window.Laya=function(t,e){var i={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(t,e){return 1==arguments.length?i.__presubstr.call(this,t):i.__presubstr.call(this,t,e>0?e:this.length+e)},__init:function(t){t.forEach(function(t){t.__init$&&t.__init$()})},__parseInt:function(t){return t?parseInt(t):0},__isClass:function(t){return t&&(t.__isclass||t==Object||t==String||t==Array)},__newvec:function(t,e){var i=[];i.length=t;for(var n=0;t>n;n++)i[n]=e;return i},__extend:function(t,e){function n(){i.un(this,"constructor",t)}for(var s in e)if(e.hasOwnProperty(s)){var a=e.__lookupGetter__(s),r=e.__lookupSetter__(s);a||r?(a&&t.__defineGetter__(s,a),r&&t.__defineSetter__(s,r)):t[s]=e[s]}n.prototype=e.prototype,t.prototype=new n,i.un(t.prototype,"__imps",i.__copy({},e.prototype.__imps))},__copy:function(t,e){if(!e)return null;t=t||{};for(var i in e)t[i]=e[i];return t},__package:function(e,n){if(!i.__packages[e]){i.__packages[e]=!0;var s=t,a=e.split(".");if(a.length>1)for(var r=0,h=a.length-1;h>r;r++){var o=s[a[r]];s=o?o:s[a[r]]={}}s[a[a.length-1]]||(s[a[a.length-1]]=n||{})}},__hasOwnProperty:function(t,e){function i(t,e){if(Object.hasOwnProperty.call(e.prototype,t))return!0;var n=e.prototype.__super;return null==n?null:i(t,n)}return e=e||this,Object.hasOwnProperty.call(e,t)||i(t,e.__class)},__typeof:function(t,e){if(!t||!e)return!1;if(e==String)return"string"==typeof t;if(e==Number)return"number"==typeof t;if(e.__interface__)e=e.__interface__;else if("string"!=typeof e)return t instanceof e;return t.__imps&&t.__imps[e]||t.__class==e},__as:function(t,e){return this.__typeof(t,e)?t:null},"interface":function(e,n){i.__package(e,{});var s=i.__internals,a=s[e]=s[e]||{};a.self=e,n&&(a.extend=s[n]=s[n]||{});for(var r=t,h=e.split("."),o=0;o<h.length-1;o++)r=r[h[o]];r[h[h.length-1]]={__interface__:e}},"class":function(e,n,s,a){if(s&&i.__extend(e,s),n)if(i.__package(n,e),i.__classmap[n]=e,n.indexOf(".")>0){if(0==n.indexOf("laya.")){var r=n.split(".");a=a||r[r.length-1],i[a]&&console.log("warning:class name redefinition,"+n+"/"+i[a]),i[a]=e}}else"Main"==n?t.Main=e:(i[n]&&console.log("warning:class name redefinition,"+n+"/"+i[n]),i[n]=e);var h=i.un,o=e.prototype;h(o,"hasOwnProperty",i.__hasOwnProperty),h(o,"__class",e),h(o,"__super",s),h(o,"__className",n),h(e,"__super",s),h(e,"__className",n),h(e,"__isclass",!0),h(e,"super",function(t){this.__super.call(t)})},imps:function(t,e){if(!e)return null;var n=t.__imps||i.un(t,"__imps",{});for(var s in e){n[s]=e[s];for(var a=s;(a=this.__internals[a])&&(a=a.extend);)a=a.self,n[a]=!0}},getset:function(t,e,n,s,a){t?(s&&(e["_$GET_"+n]=s),a&&(e["_$SET_"+n]=a)):(s&&i.un(e,"_$get_"+n,s),a&&i.un(e,"_$set_"+n,a)),s&&a?Object.defineProperty(e,n,{get:s,set:a,enumerable:!1}):(s&&Object.defineProperty(e,n,{get:s,enumerable:!1}),a&&Object.defineProperty(e,n,{set:a,enumerable:!1}))},"static":function(t,e){function i(){var i=e[n],s=e[n+1];Object.defineProperty(t,i,{get:function(){return delete this[i],this[i]=s.call(this)},set:function(t){delete this[i],this[i]=t},enumerable:!0,configurable:!0})}for(var n=0,s=e.length;s>n;n+=2)"length"==e[n]?t.length=e[n+1].call(t):i()},un:function(t,e,n){return arguments.length<3&&(n=t[e]),i.__propun.value=n,Object.defineProperty(t,e,i.__propun),n},uns:function(t,e){e.forEach(function(e){i.un(t,e)})}};return t.console=t.console||{log:function(){}},t.trace=t.console.log,Error.prototype.throwError=function(){throw arguments},String.prototype.substr=i.__substr,Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),i}(window,document),function(window,document,Laya){var __un=Laya.un,__uns=Laya.uns,__static=Laya["static"],__class=Laya["class"],__getset=Laya.getset,__newvec=Laya.__newvec;Laya["interface"]("laya.display.ILayout"),Laya["interface"]("laya.resource.IDispose"),Laya["interface"]("laya.webgl.shapes.IShape"),Laya["interface"]("laya.filters.IFilter"),Laya["interface"]("laya.webgl.submit.ISubmit"),Laya["interface"]("laya.webgl.canvas.save.ISaveData"),Laya["interface"]("laya.filters.IFilterAction"),Laya["interface"]("laya.ui.IItem"),Laya["interface"]("laya.ui.IRender"),Laya["interface"]("laya.ui.ISelect"),Laya["interface"]("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var load=Laya.load=function(t,e){return Asyn.load(t,e)},sleep=Laya.sleep=function(t){Asyn.sleep(t)},await=Laya.await=function(t,e,i){Asyn._caller_=t,Asyn._callback_=e,Asyn._nextLine_=i},wait=Laya.wait=function(t){return Asyn.wait(t)},___Laya=function(){return __getset(1,Laya,"alertGlobalError",null,function(t){var e=0;t?Browser.window.onerror=function(t,i,n,s,a){e++<5&&a&&alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+a.stack)}:Browser.window.onerror=null}),Laya.init=function(t,e,i){for(var n=[],s=2,a=arguments.length;a>s;s++)n.push(arguments[s]);for(var s=0,r=n.length;r>s;s++)n[s].enable&&n[s].enable();Font.__init__(),Style.__init__(),ResourceManager.__init__(),Laya.stage=new Stage;var h=Browser.window.location;URL.rootPath=URL.basePath=URL.getPath("file:"==h.protocal?h.pathname:h.href),Laya.initAsyn(),Laya.render=new Render(t,e),Laya.stage.size(t,e),RenderSprite.__init__(),KeyBoardManager.__init__(),MouseManager.instance.__init__()},Laya.initAsyn=function(){Asyn.loadDo=function(t,e,i){var n=new Loader;return i&&(n.once("complete",null,function(t){i.callback(t)}),n.once("error",null,function(t){})),n.load(t,e),i},Asyn.onceTimer=function(t,e){Laya.timer.once(t,e,e.callback)},Asyn.onceEvent=function(t,e){Laya.stage.once(t,null,e)},Laya.timer.frameLoop(1,null,Asyn._loop_)},Laya.stage=null,Laya.render=null,Laya.version="0.9.7",Laya.is3DMode=!1,__static(Laya,["timer",function(){return this.timer=new Timer},"loader",function(){return this.loader=new LoaderManager}]),Laya}(),Config=function(){function t(){}return __class(t,"Config"),t.showLog=!1,t.atlasEnable=!1,t.atlasLimitWidth=0,t.atlasLimitHeight=0,t.showCanvasMark=!1,t.CPUMemoryLimit=125829120,t.GPUMemoryLimit=167772160,t.animationInterval=30,t}(),Asyn=function(){function t(){}return __class(t,"laya.asyn.Asyn"),t.wait=function(e){var i=new Deferred;return 0==e.indexOf("event:")?(t.onceEvent(e.substr(8),function(){i.callback()}),null):(i.loopIndex=t._loopCount,t._Deferreds[e]=i)},t.callLater=function(e){t._callLater.push(e)},t.notify=function(e,i){var n=t._Deferreds[e];n&&(t._Deferreds[e]=null,n.callback(i))},t.load=function(e,i){return t.loadDo(e,i,new Deferred)},t.sleep=function(e){if(1>e)if(t._loopsCount>=t.loops[t._loopsIndex].length)t._loopsCount++,t.loops[t._loopsIndex].push(new Deferred);else{var i=t.loops[t._loopsIndex][t._loopsCount];i._reset(),t._loopsCount++}else t.onceTimer(e,new Deferred)},t._loop_=function(){Deferred._TIMECOUNT_++,t._loopCount++;var e=0;if((e=t._loopsCount)>0){var i=t.loops[t._loopsIndex];t._loopsCount=0,t._loopsIndex=(t._loopsIndex+1)%2;for(var n=0;e>n;n++)i[n].callback()}if((e=t._callLater.length)>0){var s=t._callLater;for(t._callLater=[],n=0,e=s.length;e>n;n++){var a=s[n];a.callback()}}},t._Deferreds={},t.loops=[[],[]],t._loopsIndex=0,t._loopCount=0,t._loopsCount=0,t._callLater=[],t._waitFunctionId=0,t.loadDo=null,t.onceEvent=null,t.onceTimer=null,t._caller_=null,t._callback_=null,t._nextLine_=0,t}(),Deferred=function(){function t(){this._caller=null,this._callback=null,this._nextLine=0,this._value=null,this._createTime=0,this._reset()}__class(t,"laya.asyn.Deferred");var e=t.prototype;return e.setValue=function(t){this._value=t},e.getValue=function(){return this._value},e._reset=function(){this._caller=Asyn._caller_,this._callback=Asyn._callback_,this._nextLine=Asyn._nextLine_,this._createTime=t._TIMECOUNT_},e.callback=function(e){arguments.length>0&&(this._value=e),this._createTime==t._TIMECOUNT_?Asyn.callLater(this):this._callback&&this._callback.call(this._caller,this._nextLine)},e.errback=function(t){arguments.length>0&&(this._value=t),this._callback&&this._callback.call(this._caller,this._nextLine)},t._TIMECOUNT_=0,t}(),EventDispatcher=function(){function t(){this._events=null}var e;__class(t,"laya.events.EventDispatcher");var i=t.prototype;return i.hasListener=function(t){var e=this._events&&this._events[t];return!!e},i.event=function(t,e){if(!this._events||!this._events[t])return!1;var i=this._events[t];if(i.run)i.once&&delete this._events[t],null!=e?i.runWith(e):i.run();else{for(var n=0,s=i.length;s>n;n++){var a=i[n];a&&(null!=e?a.runWith(e):a.run()),(!a||a.once)&&(i.splice(n,1),n--,s--)}0===i.length&&delete this._events[t]}return!0},i.on=function(t,e,i,n){return this._createListener(t,e,i,n,!1)},i.once=function(t,e,i,n){return this._createListener(t,e,i,n,!0)},i._createListener=function(t,i,n,s,a){this.off(t,i,n,a);var r=e.create(i||this,n,s,a);this._events||(this._events={});var h=this._events;return h[t]?h[t].run?h[t]=[h[t],r]:h[t].push(r):h[t]=r,this},i.off=function(t,e,i,n){if(void 0===n&&(n=!1),!this._events||!this._events[t])return this;var s=this._events[t];if(null!=i)if(s.run)e&&s.caller!==e||s.method!==i||n&&!s.once||(delete this._events[t],s.recover());else{for(var a=0,r=0,h=s.length;h>r;r++){var o=s[r];!o||e&&o.caller!==e||o.method!==i||n&&!o.once||(a++,s[r]=null,o.recover())}a===h&&delete this._events[t]}return this},i.offAll=function(t){var e=this._events;if(!e)return this;if(t)this._recoverHandlers(e[t]),delete e[t];else{for(var i in e)this._recoverHandlers(e[i]);this._events=null}return this},i._recoverHandlers=function(t){if(t.run)t.recover();else for(var e=t.length-1;e>-1;e--)t[e]&&(t[e].recover(),t[e]=null)},i.isMouseEvent=function(e){return t.MOUSE_EVENTS[e]},t.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},t.__init$=function(){e=function(t){function e(t,i,n,s){e.__super.call(this,t,i,n,s)}__class(e,"",t);var i=e.prototype;return i.recover=function(){this._id>0&&(this._id=0,e._pool.push(this.clear()))},e.create=function(t,i,n,s){return void 0===s&&(s=!0),e._pool.length?e._pool.pop().setTo(t,i,n,s):new e(t,i,n,s)},e._pool=[],e}(Handler)},t}(),Handler=function(){function t(t,e,i,n){this.once=!1,this._id=0,void 0===n&&(n=!1),this.setTo(t,e,i,n)}__class(t,"laya.utils.Handler");var e=t.prototype;return e.setTo=function(e,i,n,s){return this._id=t._gid++,this.caller=e,this.method=i,this.args=n,this.once=s,this},e.run=function(){if(null!=this.method){var t=this._id;this.method.apply(this.caller,this.args),this._id===t&&this.once&&this.recover()}},e.runWith=function(t){if(null!=this.method){var e=this._id;null==t?this.method.apply(this.caller,this.args):this.args||t.unshift?this.args?this.method.apply(this.caller,this.args?this.args.concat(t):t):this.method.apply(this.caller,t):this.method.call(this.caller,t),this._id===e&&this.once&&this.recover()}},e.clear=function(){return this.caller=null,this.method=null,this.args=null,this},e.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(e,i,n,s){return void 0===s&&(s=!0),t._pool.length?t._pool.pop().setTo(e,i,n,s):new t(e,i,n,s)},t._pool=[],t._gid=1,t}(),BitmapFont=function(){function t(){this.fontSize=12,this.autoScaleSize=!1,this._texture=null,this._fontCharDic={},this._complete=null,this._path=null,this._maxHeight=0,this._maxWidth=0,this._spaceWidth=10}__class(t,"laya.display.BitmapFont");var e=t.prototype;return e.loadFont=function(t,e){this._path=t,this._complete=e,Laya.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],Handler.create(this,this.onLoaded))},e.onLoaded=function(){this.parseFont(Loader.getRes(this._path),Loader.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.run()},e.parseFont=function(t,e){this._texture=e;var i=1,n=t.getElementsByTagName("info");this.fontSize=Laya.__parseInt(n[0].attributes.size.nodeValue);var s=t.getElementsByTagName("char"),a=0;for(a=0;a<s.length;a++){var r=s[a].attributes,h=Laya.__parseInt(r.id.nodeValue),o=Laya.__parseInt(r.xoffset.nodeValue)/i,l=Laya.__parseInt(r.yoffset.nodeValue)/i,u=(Laya.__parseInt(r.xadvance.nodeValue)/i,new Rectangle);u.x=Laya.__parseInt(r.x.nodeValue),u.y=Laya.__parseInt(r.y.nodeValue),u.width=Laya.__parseInt(r.width.nodeValue),u.height=Laya.__parseInt(r.height.nodeValue);var c=Texture.create(e,u.x,u.y,u.width,u.height,o,l);this._maxHeight=Math.max(this._maxHeight,c.height),this._maxWidth=Math.max(this._maxWidth,c.width),this._fontCharDic[h]=c}this.getCharTexture(" ")&&this.setSpaceWidth(this.getCharWidth(" "))},e.getCharTexture=function(t){return this._fontCharDic[t.charCodeAt(0)]},e.destory=function(){var t=null;for(var e in this._fontCharDic)t=this._fontCharDic[e],t&&t.destroy(),delete this._fontCharDic[e];this._texture.destroy()},e.setSpaceWidth=function(t){this._spaceWidth=t},e.getCharWidth=function(t){if(" "==t)return this._spaceWidth;var e=this.getCharTexture(t);return e?e.width+2*e.offsetX:0},e.getTextWidth=function(t){for(var e=0,i=0,n=t.length;n>i;i++)e+=this.getCharWidth(t[i]);return e},e.getMaxWidth=function(){return this._maxWidth},e.getMaxHeight=function(){return this._maxHeight},e.drawText=function(t,e,i,n,s,a){for(var r,h=0,o=0,l=t.length;l>o;o++)h+=this.getCharWidth(t[o]);var u=0;"center"===s&&(u=(a-h)/2),"right"===s&&(u=a-h);var c=0;for(o=0,l=t.length;l>o;o++)r=this.getCharTexture(t[o]),r&&e.graphics.drawTexture(r,i+c+u,n,r.width,r.height),c+=this.getCharWidth(t[o])},t}(),Style=function(){function t(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=t._TF_EMPTY}__class(t,"laya.display.css.Style");var e=t.prototype;return e.destroy=function(){this.scrollRect=null},e.render=function(t,e,i,n){},e.getCSSStyle=function(){return CSSStyle.EMPTY},e._enableLayout=function(){return!1},__getset(0,e,"block",function(){return 0!=(1&this._type)}),__getset(0,e,"paddingTop",function(){return 0}),__getset(0,e,"scaleX",function(){return this._tf.scaleX},function(e){this._tf===t._TF_EMPTY&&(this._tf=t._createTransform()),this._tf.scaleX=e}),__getset(0,e,"scaleY",function(){return this._tf.scaleY},function(e){this._tf===t._TF_EMPTY&&(this._tf=t._createTransform()),this._tf.scaleY=e}),__getset(0,e,"transform",function(){return this._tf},function(e){this._tf="none"!==e&&e?e:t._TF_EMPTY}),__getset(0,e,"translateX",function(){return this._tf.translateX},function(e){this._tf===t._TF_EMPTY&&(this._tf=t._createTransform()),this._tf.translateX=e}),__getset(0,e,"translateY",function(){return this._tf.translateY},function(e){this._tf===t._TF_EMPTY&&(this._tf=t._createTransform()),this._tf.translateY=e}),__getset(0,e,"rotate",function(){return this._tf.rotate},function(e){this._tf===t._TF_EMPTY&&(this._tf=t._createTransform()),this._tf.rotate=e}),__getset(0,e,"skewX",function(){return this._tf.skewX},function(e){this._tf===t._TF_EMPTY&&(this._tf=t._createTransform()),this._tf.skewX=e}),__getset(0,e,"skewY",function(){return this._tf.skewY},function(e){this._tf===t._TF_EMPTY&&(this._tf=t._createTransform()),this._tf.skewY=e}),__getset(0,e,"absolute",function(){return!0}),__getset(0,e,"paddingLeft",function(){return 0}),t.__init__=function(){t._TF_EMPTY=t._createTransform(),t.EMPTY=new t},t._createTransform=function(){return{translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0,skewX:0,skewY:0}},t.EMPTY=null,t._TF_EMPTY=null,t}(),Font=function(){function t(e){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=Color.create(t.defaultColor),this.family=t.defaultFamily,this.stroke=t._STROKE,this.size=t.defaultSize,e&&e!==t.EMPTY&&e.copyTo(this)}__class(t,"laya.display.css.Font");var e=t.prototype;return e.set=function(t){this._text=null;for(var e=t.split(" "),i=0,n=e.length;n>i;i++){var s=e[i];switch(s){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}s.indexOf("px")>0&&(this.size=Laya.__parseInt(s),this.family=e[i+1],i++)}},e.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},e.copyTo=function(e){e._type=this._type,e._text=this._text,e._weight=this._weight,e._color=this._color,e.family=this.family,e.stroke=this.stroke!=t._STROKE?this.stroke.slice():t._STROKE,e.indent=this.indent,e.size=this.size},__getset(0,e,"color",function(){return this._color.strColor},function(t){this._color=Color.create(t)}),__getset(0,e,"decoration",function(){return this._decoration?this._decoration.value:"none"},function(t){var e=t.split(" ");switch(this._decoration||(this._decoration={}),e[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=e[0]}e[1]&&(this._decoration.color=Color.create(e)),this._decoration.value=t}),__getset(0,e,"italic",function(){return 0!==(512&this._type)},function(t){t?this._type|=512:this._type&=-513}),__getset(0,e,"bold",function(){return 0!==(2048&this._type)},function(t){t?this._type|=2048:this._type&=-2049}),__getset(0,e,"password",function(){return 0!==(1024&this._type)},function(t){t?this._type|=1024:this._type&=-1025}),__getset(0,e,"weight",function(){return""+this._weight},function(t){var e=0;switch(t){case"normal":break;case"bold":this.bold=!0,e=700;break;case"bolder":e=800;break;case"lighter":e=100;break;default:e=Laya.__parseInt(t)}this._weight=e,this._text=null}),t.__init__=function(){t.EMPTY=new t(null)},t.EMPTY=null,t.defaultColor="#000000",t.defaultSize=12,t.defaultFamily="Arial",t.defaultFont="12px Arial",t._STROKE=[0,"#000000"],t._ITALIC=512,t._PASSWORD=1024,t._BOLD=2048,t}(),Graphics=function(){function t(){this._one=null,this._cmds=null,this._render=this._renderEmpty,this._render=this._renderEmpty}__class(t,"laya.display.Graphics");var e=t.prototype;return e.destroy=function(){this.clear(),this._temp=null,this._bounds=null,this._rstBoundPoints=null,this._sp&&(this._sp._renderType=0),this._sp=null},e.clear=function(){this._one=null,this._render=this._renderEmpty,this._cmds=null,this._temp&&(this._temp.length=0),this._sp._renderType&=-2,this._repaint()},e.empty=function(){return null===this._one&&(!this._cmds||0===this._cmds.length)},e._repaint=function(){this._temp&&(this._temp.length=0),this._sp&&this._sp.repaint()},e._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},e.getBounds=function(){return(!this._bounds||!this._temp||this._temp.length<1)&&(this._bounds=Rectangle._getWrapRec(this.getBoundPoints(),this._bounds)),this._bounds},e.getBoundPoints=function(){return(!this._temp||this._temp.length<1)&&(this._temp=this.getCmdPoints()),this._rstBoundPoints=Utils.setValueArr(this._rstBoundPoints,this._temp)},e.getCmdPoints=function(){var e,i=Render.context,n=this._cmds;if(e=this._temp||(this._temp=[]),e.length=0,n||null==this._one||(n=[this._one]),!n)return[];var s;s=[];for(var a,r=new Matrix,h=t._tempMatrix,o=0,l=n.length;l>o;o++)switch(a=n[o],a.callee){case i.save:s.push(r),r=r.clone();break;case i.restore:r=s.pop();break;case i._scale:h.identity(),h.translate(-a[2],-a[3]),h.scale(a[0],a[1]),h.translate(a[2],a[3]),this.switchMatrix(r,h);break;case i._rotate:h.identity(),h.translate(-a[1],-a[2]),h.rotate(a[0]),h.translate(a[1],a[2]),this.switchMatrix(r,h);break;case i._translate:h.identity(),h.translate(a[0],a[1]),this.switchMatrix(r,h);break;case i._transform:h.identity(),h.translate(-a[1],-a[2]),h.concat(a[0]),h.translate(a[1],a[2]),this.switchMatrix(r,h);break;case i._drawTexture:if(a[3]&&a[4])t.addPointArrToRst(e,Rectangle._getBoundPointS(a[1],a[2],a[3],a[4]),r);else{var u=a[0];t.addPointArrToRst(e,Rectangle._getBoundPointS(a[1],a[2],u.width,u.height),r)}break;case i._drawRect:case i._fillRect:t.addPointArrToRst(e,Rectangle._getBoundPointS(a[0],a[1],a[2],a[3]),r);break;case i._drawCircle:case i._fillCircle:t.addPointArrToRst(e,Rectangle._getBoundPointS(a[0]-a[2],a[1]-a[2],a[2]+a[2],a[2]+a[2]),r);break;case i._drawLine:t.addPointArrToRst(e,[a[0],a[1],a[2],a[3]],r);break;case i.drawCurves:t.addPointArrToRst(e,Bezier.I.getBezierPoints(a[2]),r,a[0],a[1]);break;case i._drawPoly:t.addPointArrToRst(e,a[2],r,a[0],a[1]);break;case i._drawPath:t.addPointArrToRst(e,this.getPathPoints(a[2]),r,a[0],a[1]);break;case i._drawPie:case i._drawPieWebGL:t.addPointArrToRst(e,this.getPiePoints(a[0],a[1],a[2],a[3],a[4]),r)}return e.length>200?e=Utils.setValueArr(e,Rectangle._getWrapRec(e)._getBoundPoints()):e.length>8&&(e=GrahamScan.scanPList(e)),e},e.switchMatrix=function(t,e){e.concat(t),e.copy(t)},e.drawTexture=function(t,e,i,n,s,a){void 0===n&&(n=0),void 0===s&&(s=0),n||(n=t.width),s||(s=t.height);var r=[t,e,i,n,s,a];null==this._one?(this._one=r,this._render=this._renderOneImg):(this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(r)),r.callee=a?Render.context._drawTextureWithTransform:Render.context._drawTexture,this._repaint()},e.textureLoaded=function(t,e){t.off("loaded",this,this.textureLoaded),e[3]=t.width,e[4]=t.height,this._repaint()},e.drawRenderTarget=function(t,e,i,n,s){var a=new Matrix(1,0,0,-1,0,s);this.drawTexture(t,e,i,n,s,a)},e._saveToCmd=function(t,e){return null==this._one?(this._one=e,this._render=this._renderOne):(this._sp._renderType&=-2,this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e)),e.callee=t,this._temp&&(this._temp.length=0),this._repaint(),e},e.clipRect=function(t,e,i,n){this._saveToCmd(Render.context._clipRect,arguments)},e.fillText=function(t,e,i,n,s,a){this._saveToCmd(Render.context._fillText,[t,e,i,n||Font.defaultFont,s,a])},e.fillBorderText=function(t,e,i,n,s,a,r,h){this._saveToCmd(Render.context._fillBorderText,[t,e,i,n||Font.defaultFont,s,a,r,h])},e.strokeText=function(t,e,i,n,s,a,r){this._saveToCmd(Render.context._strokeText,[t,e,i,n||Font.defaultFont,s,a,r])},e.alpha=function(t){this._saveToCmd(Render.context._alpha,arguments)},e.blendMode=function(t){this._saveToCmd(Render.context._blendMode,arguments)},e.transform=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(Render.context._transform,[t,e,i])},e.rotate=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(Render.context._rotate,[t,e,i])},e.scale=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._saveToCmd(Render.context._scale,[t,e,i,n])},e.translate=function(t,e){this._saveToCmd(Render.context._translate,[t,e])},e.save=function(){this._saveToCmd(Render.context.save,arguments)},e.restore=function(){this._saveToCmd(Render.context.restore,arguments)},e.replaceText=function(t){this._repaint();var e=this._cmds;if(!e)return this._one&&this._one.callee===Render.context._fillText&&(this._one[0]=t,!0);for(var i=e.length-1;i>-1;i--)if(e[i].callee===Render.context._fillText)return e[i][0]=t,!0;return!1},e.replaceTextColor=function(t){this._repaint();var e=this._cmds;if(!e)return this._one&&(this._one.callee===Render.context._fillBorderText||this._one.callee===Render.context._fillText)&&(this._one[4]=t,!0);for(var i=e.length-1;i>-1;i--)if(e[i].callee===Render.context._fillText)return e[i][4]=t,!0;return!1},e.loadImage=function(t,e,i,n,s,a){function r(t){t&&(h.drawTexture(t,e,i,n,s),null!=a&&a.call(h._sp,t))}var h=this;void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0);var o=Loader.getRes(t);o?r(o):Laya.loader.load(t,Handler.create(null,r))},e._renderEmpty=function(t,e,i,n){},e._renderAll=function(t,e,i,n){for(var s,a=this._cmds,r=0,h=a.length;h>r;r++)(s=a[r]).callee.call(e,i,n,s)},e._renderOne=function(t,e,i,n){this._one.callee.call(e,i,n,this._one)},e._renderOneImg=function(t,e,i,n){this._one.callee.call(e,i,n,this._one),t._renderType|=1},e.drawLine=function(t,e,i,n,s,a){void 0===a&&(a=1);var r=[t+.5,e+.5,i+.5,n+.5,s,a];this._saveToCmd(Render.context._drawLine,r)},e.drawLines=function(t,e,i,n,s){void 0===s&&(s=1);var a=[t+.5,e+.5,i,n,s];Render.isWebGl&&(a[3]=Color.create(n).numColor),this._saveToCmd(Render.isWebGl?Render.context.drawLinesWebGL:Render.context.drawLines,a)},e.drawCurves=function(t,e,i,n,s){void 0===s&&(s=1);var a=[t+.5,e+.5,i,n,s];this._saveToCmd(Render.context.drawCurves,a)},e.drawRect=function(t,e,i,n,s,a,r){void 0===r&&(r=1);var h=a?.5:0,o=[t+h,e+h,i,n,s,a,r];this._saveToCmd(Render.context._drawRect,o)},e.drawCircle=function(t,e,i,n,s,a){void 0===a&&(a=1);var r=s?.5:0,h=[t+r,e+r,i,n,s,a];Render.isWebGl&&(h[3]=n?Color.create(n).numColor:n,h[4]=s?Color.create(s).numColor:s),this._saveToCmd(Render.isWebGl?Render.context._drawCircleWebGL:Render.context._drawCircle,h)},e.drawPie=function(t,e,i,n,s,a,r,h){void 0===h&&(h=1);var o=r?.5:0,l=[t+o,e+o,i,n,s,a,r,h];Render.isWebGl&&(n=90-n,s=90-s,l[5]=a?Color.create(a).numColor:a,l[6]=r?Color.create(r).numColor:r),l[3]=Utils.toRadian(n),l[4]=Utils.toRadian(s),this._saveToCmd(Render.isWebGl?Render.context._drawPieWebGL:Render.context._drawPie,l)},e.getPiePoints=function(t,e,i,n,s){var a;a=[t,e];var r=Math.PI/10,h=NaN;for(h=n;s>h;h+=r)a.push(t+i*Math.cos(h),e+i*Math.sin(h));return s!=h&&a.push(t+i*Math.cos(s),e+i*Math.sin(s)),a},e.drawPoly=function(t,e,i,n,s,a){void 0===a&&(a=1);var r=s?.5:0,h=[t+r,e+r,i,n,s,a];this._saveToCmd(Render.context._drawPoly,h)},e.getPathPoints=function(t){var e=0,i=0,n=[];i=t.length;var s;for(e=0;i>e;e++)s=t[e],s.length>1&&(n.push(s[1],s[2]),s.length>3&&n.push(s[3],s[4]));return n},e.drawPath=function(t,e,i,n,s){var a=[t+.5,e+.5,i,n,s];this._saveToCmd(Render.context._drawPath,a)},__getset(0,e,"cmds",function(){return this._cmds},function(t){this._cmds=t,this._render=this._renderAll,this._repaint()}),t.addPointArrToRst=function(e,i,n,s,a){void 0===s&&(s=0),void 0===a&&(a=0);var r=0,h=0;for(h=i.length,r=0;h>r;r+=2)t.addPointToRst(e,i[r]+s,i[r+1]+a,n)},t.addPointToRst=function(t,e,i,n){var s=Point.TEMP;e=e?e:0,i=i?i:0,s.setTo(e,i),n.transformPoint(e,i,s),t.push(s.x,s.y)},__static(t,["_tempMatrix",function(){return this._tempMatrix=new Matrix}]),t}(),Event=function(){function t(){}__class(t,"laya.events.Event");var e=t.prototype;return e.setTo=function(t,e,i){return this.type=t,this.currentTarget=e,this.target=i,this},e.stopPropagation=function(){this._stoped=!0},__getset(0,e,"shiftKey",function(){return this.nativeEvent.shiftKey}),__getset(0,e,"touches",function(){var t=this.nativeEvent.touches;if(t)for(var e=0,i=t.length;i>e;e++){var n=t[e],s=Point.TEMP;s.setTo(n.clientX,n.clientY),Laya.stage._canvasTransform.invertTransformPoint(s),n.stageX=s.x,n.stageY=s.y}return t}),__getset(0,e,"altKey",function(){return this.nativeEvent.altKey}),__getset(0,e,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),t.EMPTY=new t,t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.CLICK="click",t.RIGHT_MOUSE_DOWN="rightmousedown",t.RIGHT_MOUSE_UP="rightmouseup",t.RIGHT_CLICK="rightclick",t.MOUSE_MOVE="mousemove",t.MOUSE_OVER="mouseover",t.MOUSE_OUT="mouseout",t.MOUSE_WHEEL="mousewheel",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t.DOUBLE_CLICK="doubleclick",t.CHANGE="change",t.CHANGED="changed",t.RESIZE="resize",t.ADDED="added",t.REMOVED="removed",t.DISPLAY="display",t.UNDISPLAY="undisplay",t.ERROR="error",t.COMPLETE="complete",t.LOADED="loaded",t.PROGRESS="progress",t.INPUT="input",t.RENDER="render",t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.KEY_DOWN="keydown",t.KEY_PRESS="keypress",t.KEY_UP="keyup",t.ENTER_FRAME="enterframe",t.DRAG_START="dragstart",t.DRAG_MOVE="dragmove",t.DRAG_END="dragend",t.ENTER="enter",t.SELECT="select",t.BLUR="blur",t.FOCUS="focus",t.PLAYED="played",t.PAUSED="paused",t.STOPPED="stopped",t.START="start",t.END="end",t.ENABLED_CHANGED="enabledchanged",t.COMPONENT_ADDED="componentadded",t.COMPONENT_REMOVED="componentremoved",t.ACTIVE_CHANGED="activechanged",t.LAYER_CHANGED="layerchanged",t.HIERARCHY_LOADED="hierarchyloaded",t.MEMORY_CHANGED="memorychanged",t.RECOVERING="recovering",t.RECOVERED="recovered",t.RELEASED="released",t.LINK="link",t}(),Keyboard=function(){function t(){}return __class(t,"laya.events.Keyboard"),t.NUMBER_0=48,t.NUMBER_1=49,t.NUMBER_2=50,t.NUMBER_3=51,t.NUMBER_4=52,t.NUMBER_5=53,t.NUMBER_6=54,t.NUMBER_7=55,t.NUMBER_8=56,t.NUMBER_9=57,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.SEMICOLON=186,t.EQUAL=187,t.COMMA=188,t.MINUS=189,t.PERIOD=190,t.SLASH=191,t.BACKQUOTE=192,t.LEFTBRACKET=219,t.BACKSLASH=220,t.RIGHTBRACKET=221,t.QUOTE=222,t.ALTERNATE=18,t.BACKSPACE=8,t.CAPS_LOCK=20,t.COMMAND=15,t.CONTROL=17,t.DELETE=46,t.DOWN=40,t.END=35,t.ENTER=13,t.ESCAPE=27,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t.F13=124,t.F14=125,t.F15=126,t.HOME=36,t.INSERT=45,t.LEFT=37,t.NUMPAD=21,t.NUMPAD_0=96,t.NUMPAD_1=97,t.NUMPAD_2=98,t.NUMPAD_3=99,t.NUMPAD_4=100,t.NUMPAD_5=101,t.NUMPAD_6=102,t.NUMPAD_7=103,t.NUMPAD_8=104,t.NUMPAD_9=105,t.NUMPAD_ADD=107,t.NUMPAD_DECIMAL=110,t.NUMPAD_DIVIDE=111,t.NUMPAD_ENTER=108,t.NUMPAD_MULTIPLY=106,t.NUMPAD_SUBTRACT=109,t.PAGE_DOWN=34,t.PAGE_UP=33,t.RIGHT=39,t.SHIFT=16,t.SPACE=32,t.TAB=9,t.UP=38,t}(),KeyBoardManager=function(){function t(){}return __class(t,"laya.events.KeyBoardManager"),t.__init__=function(){t.addEvent("keydown"),t.addEvent("keypress"),t.addEvent("keyup")},t.addEvent=function(t){Browser.document.addEventListener(t,function(e){laya.events.KeyBoardManager.dispatch(e,t)},!0)},t.dispatch=function(e,i){e.keyCode=e.keyCode||e.which||e.charCode,"keydown"===i?t.pressKeys[e.keyCode]=!0:"keyup"===i&&(t.pressKeys[e.keyCode]=null);for(var n=Laya.stage.focus&&null!=Laya.stage.focus.event?Laya.stage.focus:Laya.stage;n;)n.event(i,e),n=n.parent},t.hasKeyDown=function(e){return t.pressKeys[e]},t.pressKeys={},t}(),MouseManager=function(){function t(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this._stage=null,this._target=null,this._lastOvers=[],this._currOvers=[],this._lastClickTimer=0,this._lastMoveTimer=0,this._isDoubleClick=!1,this._isLeftMouse=!1,this._eventList=[],this._event=new Event,this._matrix=new Matrix,this._point=new Point,this._rect=new Rectangle}__class(t,"laya.events.MouseManager");var e=t.prototype;return e.__init__=function(){var t=this;this._stage=Laya.stage;var e=this,i=Render.canvas.source,n=this._eventList;Browser.document.oncontextmenu=function(t){return!1},i.addEventListener("mousedown",function(e){e.preventDefault(),n.push(e),t.mouseDownTime=Browser.now()}),i.addEventListener("mouseup",function(e){e.preventDefault(),n.push(e),t.mouseDownTime=-Browser.now()},!0),Browser.document.addEventListener("mousemove",function(t){var i=Browser.now();i-e._lastMoveTimer<10||(e._lastMoveTimer=i,n.push(t))},!0),i.addEventListener("mouseout",function(t){n.push(t)}),i.addEventListener("mouseover",function(t){n.push(t)}),i.addEventListener("touchstart",function(e){e.preventDefault(),n.push(e),t.mouseDownTime=Browser.now()}),i.addEventListener("touchend",function(e){e.preventDefault(),n.push(e),t.mouseDownTime=-Browser.now()},!0),i.addEventListener("touchmove",function(t){t.preventDefault(),n.push(t)},!0),i.addEventListener("mousewheel",function(t){n.push(t)}),i.addEventListener("DOMMouseScroll",function(t){n.push(t)})},e.initEvent=function(t,e){var i=laya.events.MouseManager.instance;i._event._stoped=!1,i._event.nativeEvent=e||t,i._target=null,this._point.setTo(t.clientX,t.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),t.stageX=i.mouseX=this._point.x,t.stageY=i.mouseY=this._point.y,i._event.touchId=t.identifier},e.checkMouseWheel=function(t){this._event.delta=t.wheelDelta?.025*t.wheelDelta:-t.detail;for(var e=0,i=this._lastOvers.length;i>e;e++){var n=this._lastOvers[e];n.event("mousewheel",this._event.setTo("mousewheel",n,this._target))}},e.checkMouseOut=function(){if(!this.disableMouseEvent){for(var t=0,e=this._lastOvers.length;e>t;t++){var i=this._lastOvers[t];this._currOvers.indexOf(i)<0&&(i.$_MOUSEOVER=!1,i.event("mouseout",this._event.setTo("mouseout",i,this._target)));
}var n=this._lastOvers;this._lastOvers=this._currOvers,this._currOvers=n,this._currOvers.length=0}},e.onMouseMove=function(t){this.sendMouseMove(t),this._event._stoped=!1,this.sendMouseOver(this._target)},e.sendMouseMove=function(t){t.event("mousemove",this._event.setTo("mousemove",t,this._target)),!this._event._stoped&&t.parent&&this.sendMouseMove(t.parent)},e.sendMouseOver=function(t){t.parent&&(t.$_MOUSEOVER||(t.$_MOUSEOVER=!0,t.event("mouseover",this._event.setTo("mouseover",t,this._target))),this._currOvers.push(t)),!this._event._stoped&&t.parent&&this.sendMouseOver(t.parent)},e.onMouseDown=function(t){this._isLeftMouse?(t.$_MOUSEDOWN=!0,t.event("mousedown",this._event.setTo("mousedown",t,this._target))):(t.$_RIGHTMOUSEDOWN=!0,t.event("rightmousedown",this._event.setTo("rightmousedown",t,this._target))),!this._event._stoped&&t.parent&&this.onMouseDown(t.parent)},e.onMouseUp=function(t){var e=this._isLeftMouse?"mouseup":"rightmouseup";this.sendMouseUp(t,e),this._event._stoped=!1,this.sendClick(this._target,e)},e.sendMouseUp=function(t,e){t.event(e,this._event.setTo(e,t,this._target)),!this._event._stoped&&t.parent&&this.sendMouseUp(t.parent,e)},e.sendClick=function(t,e){"mouseup"===e&&t.$_MOUSEDOWN?(t.$_MOUSEDOWN=!1,t.event("click",this._event.setTo("click",t,this._target)),this._isDoubleClick&&t.event("doubleclick",this._event.setTo("doubleclick",t,this._target))):"rightmouseup"===e&&t.$_RIGHTMOUSEDOWN&&(t.$_RIGHTMOUSEDOWN=!1,t.event("rightclick",this._event.setTo("rightclick",t,this._target))),!this._event._stoped&&t.parent&&this.sendClick(t.parent,e)},e.check=function(t,e,i,n){var s=t.transform||this._matrix,a=t.pivotX,r=t.pivotY;if(0===a&&0===r)s.setTranslate(t.x,t.y);else if(s===this._matrix)s.setTranslate(t.x-a,t.y-r);else{var h=s.cos,o=s.sin;s.setTranslate(t.x-(a*h-r*o)*t.scaleX,t.y-(a*o+r*h)*t.scaleY)}s.invertTransformPoint(this._point.setTo(e,i)),s.setTranslate(0,0),e=this._point.x,i=this._point.y;var l=t.scrollRect;if(l){this._rect.setTo(0,0,l.width,l.height);var u=this._rect.contains(e,i);if(!u)return!1}if(!this.disableMouseEvent)for(var c=!1,_=t._childs.length-1;_>-1;_--){var m=t._childs[_];if(m.mouseEnabled&&m.visible&&(c=this.check(m,e+(l?l.x:0),i+(l?l.y:0),n)))return!0}if(t.width>0&&t.height>0){var d=this._rect;t.mouseThrough?u=t.getGraphicBounds().contains(e,i):(t.hitArea?d=t.hitArea:d.setTo(0,0,t.width,t.height),u=d.contains(e,i)),u&&(this._target=t,n.call(this,t))}return u},e.runEvent=function(){var t=this._eventList.length;if(t){for(var e=this,i=0;t>i;){var n=this._eventList[i];switch(n.type){case"mousedown":e._isLeftMouse=0===n.button,e.initEvent(n),e.check(e._stage,e.mouseX,e.mouseY,e.onMouseDown);break;case"mouseup":e._isLeftMouse=0===n.button;var s=Browser.now();e._isDoubleClick=s-e._lastClickTimer<300,e._lastClickTimer=s,e.initEvent(n),e.check(e._stage,e.mouseX,e.mouseY,e.onMouseUp);break;case"mousemove":e.initEvent(n),e.check(e._stage,e.mouseX,e.mouseY,e.onMouseMove),e.checkMouseOut();break;case"touchstart":e._isLeftMouse=!0;for(var a=n.changedTouches,r=0,h=a.length;h>r;r++)e.initEvent(a[r],n),e.check(e._stage,e.mouseX,e.mouseY,e.onMouseDown);break;case"touchend":e._isLeftMouse=!0;var o=n.changedTouches;for(r=0,h=o.length;h>r;r++)e.initEvent(o[r],n),e.check(e._stage,e.mouseX,e.mouseY,e.onMouseUp);break;case"touchmove":var l=n.changedTouches;for(r=0,h=l.length;h>r;r++)e.initEvent(l[r],n),e.check(e._stage,e.mouseX,e.mouseY,e.onMouseMove);e.checkMouseOut();break;case"wheel":case"mousewheel":case"DOMMouseScroll":e.checkMouseWheel(n);break;case"mouseout":e._stage.event("mouseout",e._event.setTo("mouseout",e._stage,e._stage));break;case"mouseover":e._stage.event("mouseover",e._event.setTo("mouseover",e._stage,e._stage))}i++}this._eventList.length=0}},__static(t,["instance",function(){return this.instance=new t}]),t}(),Filter=function(){function t(){this._action=null}__class(t,"laya.filters.Filter");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilter":!0}),__getset(0,e,"type",function(){return-1}),__getset(0,e,"action",function(){return this._action}),t.BLUR=16,t.COLOR=32,t.GLOW=8,t._filterStart=null,t._filterEnd=null,t._EndTarget=null,t._recycleScope=null,t._filter=null,t._useSrc=null,t._endSrc=null,t._useOut=null,t._endOut=null,t}(),ColorFilterAction=function(){function t(){this.data}__class(t,"laya.filters.ColorFilterAction");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(t){var e=t.ctx.ctx,i=t.ctx.ctx.canvas;if(0==i.width||0==i.height)return i;for(var n,s=e.getImageData(0,0,i.width,i.height),a=s.data,r=0,h=a.length;h>r;r+=4)n=this.getColor(a[r],a[r+1],a[r+2],a[r+3]),0!=a[r+3]&&(a[r]=n[0],a[r+1]=n[1],a[r+2]=n[2],a[r+3]=n[3]);return e.putImageData(s,0,0),t},e.getColor=function(t,e,i,n){var s=[];if(this.data._elements){var a=this.data._elements;s[0]=a[0]*t+a[1]*e+a[2]*i+a[3]*n+a[4],s[1]=a[5]*t+a[6]*e+a[7]*i+a[8]*n+a[9],s[2]=a[10]*t+a[11]*e+a[12]*i+a[13]*n+a[14],s[3]=a[15]*t+a[16]*e+a[17]*i+a[18]*n+a[19]}return s},t}(),Arith=function(){function t(){}return __class(t,"laya.maths.Arith"),t.formatR=function(t){return t>Math.PI&&(t-=2*Math.PI),t<-Math.PI&&(t+=2*Math.PI),t},t.isPOT=function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},t.setMatToArray=function(t,e){t.a,t.b,t.c,t.d,t.tx+20,t.ty+20,1,e[0]=t.a,e[1]=t.b,e[4]=t.c,e[5]=t.d,e[12]=t.tx,e[13]=t.ty},t}(),Bezier=function(){function t(){this.controlPoints=[new Point,new Point,new Point],this._calFun=this.getPoint2}__class(t,"laya.maths.Bezier");var e=t.prototype;return e.switchPoint=function(t,e){var i=this.controlPoints.shift();i.setTo(t,e),this.controlPoints.push(i)},e.getPoint2=function(t,e){var i=this.controlPoints[0],n=this.controlPoints[1],s=this.controlPoints[2],a=Math.pow(1-t,2)*i.x+2*t*(1-t)*n.x+Math.pow(t,2)*s.x,r=Math.pow(1-t,2)*i.y+2*t*(1-t)*n.y+Math.pow(t,2)*s.y;e.push(a,r)},e.getPoint3=function(t,e){var i=this.controlPoints[0],n=this.controlPoints[1],s=this.controlPoints[2],a=this.controlPoints[3],r=Math.pow(1-t,3)*i.x+3*n.x*t*(1-t)*(1-t)+3*s.x*t*t*(1-t)+a.x*Math.pow(t,3),h=Math.pow(1-t,3)*i.y+3*n.y*t*(1-t)*(1-t)+3*s.y*t*t*(1-t)+a.y*Math.pow(t,3);e.push(r,h)},e.insertPoints=function(t,e){var i=0,n=0;t=t>0?t:5,n=t;var s=NaN;for(s=1/t,i=0;1>=i;i+=s)this._calFun(i,e)},e.getBezierPoints=function(t,e,i){void 0===e&&(e=5),void 0===i&&(i=2);var n=0,s=0;if(s=t.length,2*(i+1)>s)return[];var a;switch(a=[],i){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(n=0;2*i>n;n+=2)this.switchPoint(t[n],t[n+1]);for(n=2*i;s>n;n+=2)this.switchPoint(t[n],t[n+1]),n/2%i==0&&this.insertPoints(e,a);return a},__static(t,["I",function(){return this.I=new t}]),t}(),GrahamScan=function(){function t(){}return __class(t,"laya.maths.GrahamScan"),t.multiply=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},t.dis=function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},t.getPoints=function(e,i,n){for(void 0===i&&(i=!1),t._mPointList||(t._mPointList=[]);t._mPointList.length<e;)t._mPointList.push(new Point);return n||(n=[]),n.length=0,i?Utils.getFrom(n,t._mPointList,e):Utils.getFromR(n,t._mPointList,e),n},t.pListToPointList=function(e,i){void 0===i&&(i=!1);var n=0,s=e.length/2,a=t.getPoints(s,i,t._tempPointList);for(n=0;s>n;n++)a[n].setTo(e[n+n],e[n+n+1]);return a},t.pointListToPlist=function(e){var i,n=0,s=e.length,a=t._temPList;for(a.length=0,n=0;s>n;n++)i=e[n],a.push(i.x,i.y);return a},t.scanPList=function(e){return Utils.setValueArr(e,t.pointListToPlist(t.scan(t.pListToPointList(e,!0))))},t.scan=function(e){var i,n,s,a=0,r=0,h=0,o=e.length,l={};for(n=t._temArr,n.length=0,o=e.length,a=o-1;a>=0;a--)i=e[a],s=i.x+"_"+i.y,l.hasOwnProperty(s)||(l[s]=!0,n.push(i));for(o=n.length,Utils.setValueArr(e,n),a=1;o>a;a++)(e[a].y<e[h].y||e[a].y==e[h].y&&e[a].x<e[h].x)&&(h=a);for(i=e[0],e[0]=e[h],e[h]=i,a=1;o-1>a;a++){for(h=a,r=a+1;o>r;r++)(t.multiply(e[r],e[h],e[0])>0||0==t.multiply(e[r],e[h],e[0])&&t.dis(e[0],e[r])<t.dis(e[0],e[h]))&&(h=r);i=e[a],e[a]=e[h],e[h]=i}if(n=t._temArr,n.length=0,e.length<3)return Utils.setValueArr(n,e);for(n.push(e[0],e[1],e[2]),a=3;o>a;a++){for(;n.length>=2&&t.multiply(e[a],n[n.length-1],n[n.length-2])>=0;)n.pop();e[a]&&n.push(e[a])}return n},t._mPointList=null,t._tempPointList=[],t._temPList=[],t._temArr=[],t}(),MathUtil=function(){function t(){}return __class(t,"laya.maths.MathUtil"),t.subtractVector3=function(t,e,i){i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2]},t.lerp=function(t,e,i){return t*(1-i)+e*i},t.scaleVector3=function(t,e,i){i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e},t.lerpVector3=function(t,e,i,n){var s=t[0],a=t[1],r=t[2];n[0]=s+i*(e[0]-s),n[1]=a+i*(e[1]-a),n[2]=r+i*(e[2]-r)},t.lerpVector4=function(t,e,i,n){var s=t[0],a=t[1],r=t[2],h=t[3];n[0]=s+i*(e[0]-s),n[1]=a+i*(e[1]-a),n[2]=r+i*(e[2]-r),n[3]=h+i*(e[3]-h)},t.slerpQuaternionArray=function(t,e,i,n,s,a,r){var h,o,l,u,c,_=t[e+0],m=t[e+1],d=t[e+2],p=t[e+3],f=i[n+0],g=i[n+1],S=i[n+2],b=i[n+3];return o=_*f+m*g+d*S+p*b,0>o&&(o=-o,f=-f,g=-g,S=-S,b=-b),1-o>1e-6?(h=Math.acos(o),l=Math.sin(h),u=Math.sin((1-s)*h)/l,c=Math.sin(s*h)/l):(u=1-s,c=s),a[r+0]=u*_+c*f,a[r+1]=u*m+c*g,a[r+2]=u*d+c*S,a[r+3]=u*p+c*b,a},t.getRotation=function(t,e,i,n){return Math.atan2(i-t,n-e)/Math.PI*180},t.SortBigFirst=function(t,e){return t==e?0:e>t?1:-1},t.SortSmallFirst=function(t,e){return t==e?0:e>t?-1:1},t.SortNumBigFirst=function(t,e){return parseFloat(e)-parseFloat(t)},t.SortNumSmallFirst=function(t,e){return parseFloat(t)-parseFloat(e)},t.SortByKey=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);var s;return s=i?n?t.SortNumBigFirst:t.SortBigFirst:n?t.SortNumSmallFirst:t.SortSmallFirst,function(t,i){return s(t[e],i[e])}},t}(),Matrix=function(){function t(t,e,i,n,s,a){this.cos=1,this.sin=0,this.bTransform=!1,this.inPool=!1,void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===a&&(a=0),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this._checkTransform()}__class(t,"laya.maths.Matrix");var e=t.prototype;return e.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},e._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},e.setTranslate=function(t,e){this.tx=t,this.ty=e},e.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.scale=function(t,e){this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this.bTransform=!0},e.rotate=function(t){var e=this.cos=Math.cos(t),i=this.sin=Math.sin(t),n=this.a,s=this.c,a=this.tx;this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this.bTransform=!0},e.skew=function(t,e){var i=Math.tan(t),n=Math.tan(e),s=this.a,a=this.b;return this.a+=n*this.c,this.b+=n*this.d,this.c+=i*s,this.d+=i*a,this},e.invertTransformPoint=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=this.tx,r=e*s-i*n,h=s/r,o=-i/r,l=-n/r,u=e/r,c=(n*this.ty-s*a)/r,_=-(e*this.ty-i*a)/r;t.setTo(h*t.x+l*t.y+c,o*t.x+u*t.y+_)},e.transformPoint=function(t,e,i){i.setTo(this.a*t+this.c*e+this.tx,this.b*t+this.d*e+this.ty)},e.transformPointArray=function(t,e){for(var i=t.length,n=0;i>n;n+=2){var s=t[n],a=t[n+1];e[n]=this.a*s+this.c*a+this.tx,e[n+1]=this.b*s+this.d*a+this.ty}},e.transformPointArrayScale=function(t,e){for(var i=t.length,n=0;i>n;n+=2){var s=t[n],a=t[n+1];e[n]=this.a*s+this.c*a,e[n+1]=this.b*s+this.d*a}},e.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},e.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},e.setTo=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},e.concat=function(t){var e=this.a,i=this.c,n=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d,this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this},e.clone=function(){var e=t._cache,i=e._length?e[--e._length]:new t;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i.bTransform=this.bTransform,i},e.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t.bTransform=this.bTransform,t},e.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},e.destroy=function(){if(!this.inPool){var e=t._cache;this.inPool=!0,e._length||(e._length=0),e[e._length++]=this,this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},t.mul=function(t,e,i){var n=t.a,s=t.b,a=t.c,r=t.d,h=t.tx,o=t.ty,l=e.a,u=e.b,c=e.c,_=e.d,m=e.tx,d=e.ty;return 0!==u||0!==c?(i.a=n*l+s*c,i.b=n*u+s*_,i.c=a*l+r*c,i.d=a*u+r*_,i.tx=l*h+c*o+m,i.ty=u*h+_*o+d):(i.a=n*l,i.b=s*_,i.c=a*l,i.d=r*_,i.tx=l*h+m,i.ty=_*o+d),i},t.mulPre=function(t,e,i,n,s,a,r,h){var o=t.a,l=t.b,u=t.c,c=t.d,_=t.tx,m=t.ty;return 0!==i||0!==n?(h.a=o*e+l*n,h.b=o*i+l*s,h.c=u*e+c*n,h.d=u*i+c*s,h.tx=e*_+n*m+a,h.ty=i*_+s*m+r):(h.a=o*e,h.b=l*s,h.c=u*e,h.d=c*s,h.tx=e*_+a,h.ty=s*m+r),h},t.mulPos=function(t,e,i,n,s,a,r,h){var o=t.a,l=t.b,u=t.c,c=t.d,_=t.tx,m=t.ty;return 0!==l||0!==u?(h.a=e*o+i*u,h.b=e*l+i*c,h.c=n*o+s*u,h.d=n*l+s*c,h.tx=o*a+u*r+_,h.ty=l*a+c*r+m):(h.a=e*o,h.b=i*c,h.c=n*o,h.d=s*c,h.tx=o*a+_,h.ty=c*r+m),h},t.preMul=function(t,e,i){var n=t.a,s=t.b,a=t.c,r=t.d,h=e.a,o=e.b,l=e.c,u=e.d,c=e.tx,_=e.ty;return i.a=h*n,i.b=i.c=0,i.d=u*r,i.tx=c*n+t.tx,i.ty=_*r+t.ty,(0!==o||0!==l||0!==s||0!==a)&&(i.a+=o*a,i.d+=l*s,i.b+=h*s+o*r,i.c+=l*n+u*a,i.tx+=_*a,i.ty+=c*s),i},t.preMulXY=function(t,e,i,n){var s=t.a,a=t.b,r=t.c,h=t.d;return n.a=s,n.b=a,n.c=r,n.d=h,n.tx=e*s+t.tx+i*r,n.ty=i*h+t.ty+e*a,n},t.create=function(){var e=t._cache,i=e._length?e[--e._length]:new t;return i.inPool=!1,i},t.EMPTY=new t,t.TEMP=new t,t._cache=[],t}(),Point=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}__class(t,"laya.maths.Point");var e=t.prototype;return e.setTo=function(t,e){return this.x=t,this.y=e,this},t.TEMP=new t,t.EMPTY=new t,t}(),Rectangle=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n}__class(t,"laya.maths.Rectangle");var e=t.prototype;return e.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},e.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.right&&e>=this.y&&e<this.bottom?!0:!1},e.intersects=function(t){return!(t.x>this.right||t.right<this.x||t.y>this.bottom||t.bottom<this.y)},e.intersection=function(e,i){return this.intersects(e)?(i||(i=new t),i.x=Math.max(this.x,e.x),i.y=Math.max(this.y,e.y),i.width=Math.min(this.right,e.right)-i.x,i.height=Math.min(this.bottom,e.bottom)-i.y,i):null},e.union=function(e,i){return i||(i=new t),this.clone(i),e.width<=0||e.height<=0?i:(i.addPoint(e.x,e.y),i.addPoint(e.right,e.bottom),this)},e.clone=function(e){return e||(e=new t),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},e.equal=function(t){return t&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height?!0:!1},e.addPoint=function(t,e){return this.x>t&&(this.width+=this.x-t,this.x=t),this.y>e&&(this.height+=this.y-e,this.y=e),this.width<t-this.x&&(this.width=t-this.x),this.height<e-this.y&&(this.height=e-this.y),this},e._getBoundPoints=function(){var e=t._temB;return e.length=0,0==this.width||0==this.height?e:(e.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),e)},__getset(0,e,"right",function(){return this.x+this.width}),__getset(0,e,"bottom",function(){return this.y+this.height}),t._getBoundPointS=function(e,i,n,s){var a=t._temA;return a.length=0,0==n||0==s?a:(a.push(e,i,e+n,i,e,i+s,e+n,i+s),a)},t._getWrapRec=function(e,i){if(!e||e.length<1)return i?i.setTo(0,0,0,0):t.EMPTY;i=i?i:new t;var n,s,a,r,h,o=e.length,l=Point.TEMP;for(s=r=99999,a=h=-s,n=0;o>n;n+=2)l.x=e[n],l.y=e[n+1],s=s<l.x?s:l.x,r=r<l.y?r:l.y,a=a>l.x?a:l.x,h=h>l.y?h:l.y;return i.setTo(s,r,a-s,h-r)},t.EMPTY=new t,t.TEMP=new t,t._temB=[],t._temA=[],t}(),SoundManager=function(){function t(){}return __class(t,"laya.media.SoundManager"),__getset(1,t,"autoStopMusic",function(){return t._autoStopMusic},function(e){Laya.stage.off("blur",null,t.stageOnBlur),Laya.stage.off("focus",null,t.stageOnFocus),t._autoStopMusic=e,e&&(Laya.stage.on("blur",null,t.stageOnBlur),Laya.stage.on("focus",null,t.stageOnFocus))}),__getset(1,t,"muted",function(){return t._muted},function(e){e&&t._tMusic&&t.stopSound(t._tMusic),t._muted=e}),__getset(1,t,"soundMuted",function(){return t._soundMuted},function(e){t._soundMuted=e}),__getset(1,t,"musicMuted",function(){return t._musicMuted},function(e){e?(t._tMusic&&t.stopSound(t._tMusic),t._musicMuted=e):(t._musicMuted=e,t._tMusic&&t.playMusic(t._tMusic))}),t.addChannel=function(e){t._channels.indexOf(e)>=0||t._channels.push(e)},t.removeChannel=function(e){var i=0;for(i=t._channels.length-1;i>=0;i--)t._channels[i]==e&&t._channels.splice(i,1)},t.stageOnBlur=function(){t._musicChannel&&(t._musicChannel.isStopped||(t._blurPaused=!0,t._musicChannel.stop()))},t.stageOnFocus=function(){t._blurPaused&&(t.playMusic(t._tMusic),t._blurPaused=!1)},t.playSound=function(e,i,n){if(void 0===i&&(i=1),t._muted)return null;if(e==t._tMusic){if(t._musicMuted)return null}else if(t._soundMuted)return null;var s=Laya.loader.getRes(e);s||(s=new Sound,s.load(e),Loader.cacheRes(e,s));var a;return a=s.play(0,i),a.volume=e==t._tMusic?t.musicVolume:t.soundVolume,a.completeHandler=n,a},t.destroySound=function(t){var e=Laya.loader.getRes(t);e&&(Loader.clearRes(t),e.dispose())},t.playMusic=function(e,i,n){return void 0===i&&(i=0),t._tMusic=e,t._musicChannel&&t._musicChannel.stop(),t._musicChannel=t.playSound(e,i,n)},t.stopSound=function(e){var i,n=0;for(n=t._channels.length-1;n>=0;n--)i=t._channels[n],i.url==e&&i.stop()},t.stopMusic=function(){t._musicChannel&&t._musicChannel.stop()},t.setSoundVolume=function(e,i){i?t._setVolume(i,e):t.soundVolume=e},t.setMusicVolume=function(e){t.musicVolume=e,t._setVolume(t._tMusic,e)},t._setVolume=function(e,i){var n,s=0;for(s=t._channels.length-1;s>=0;s--)n=t._channels[s],n.url==e&&(n.volume=i)},t.musicVolume=1,t.soundVolume=1,t._muted=!1,t._soundMuted=!1,t._musicMuted=!1,t._tMusic=null,t._musicChannel=null,t._channels=[],t._autoStopMusic=!1,t._blurPaused=!1,t}(),LocalStorage=function(){function t(){}return __class(t,"laya.net.LocalStorage"),t.setItem=function(e,i){t.support&&t.items.setItem(e,i)},t.getItem=function(e){return t.support?t.items.getItem(e):null},t.setJSON=function(e,i){t.support&&t.items.setItem(e,JSON.stringify(i))},t.getJSON=function(e){return JSON.parse(t.support?t.items.getItem(e):null)},t.removeItem=function(e){t.support&&t.items.removeItem(e)},t.clear=function(){t.support&&t.items.clear()},t.items=null,t.support=!1,t.__init$=function(){if(window.localStorage){t.items=window.localStorage;try{localStorage.setItem("laya","1"),localStorage.removeItem("laya"),t.support=!0}catch(e){}}t.support||console.log("LocalStorage is not supprot or browser is private mode.")},t}(),URL=function(){function t(e){this._url=null,this._path=null,this._url=t.formatURL(e),this._path=t.getPath(e)}__class(t,"laya.net.URL");var e=t.prototype;return __getset(0,e,"url",function(){return this._url}),__getset(0,e,"path",function(){return this._path}),t.formatURL=function(e,i){return null!=t.customFormat&&(e=t.customFormat(e,i)),e?(t.version[e]&&(e+="?v="+t.version[e]),Browser.httpProtocol||"/"!=e[0]?t.isAbsolute(e)?e:(i||t.basePath)+e:t.rootPath+e):"null path"},t.isAbsolute=function(t){return t.indexOf(":")>0||"/"==t.charAt(0)},t.getPath=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(0,e+1):""},t.getName=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(e+1):t},t.version={},t.basePath="",t.rootPath="",t.customFormat=null,t}(),Render=function(){function t(e,i){function n(){Laya.stage._loop(),Browser.window.requestAnimationFrame(n)}t._mainCanvas=new HTMLCanvas("2D");var s=t._mainCanvas.source.style;s.position="absolute",s.top=s.left="0px",s.background="#000000";var a=null!=t.WebGL;a&&t.WebGL.init(t.canvas,e,i),Browser.document.body.appendChild(t._mainCanvas.source),t._context=new RenderContext(e,i,a?null:t._mainCanvas),Browser.window.requestAnimationFrame(n)}return __class(t,"laya.renders.Render"),__getset(1,t,"context",function(){return t._context}),__getset(1,t,"isWebGl",function(){return null!=t.WebGL}),__getset(1,t,"canvas",function(){return t._mainCanvas}),t._context=null,t._mainCanvas=null,t.WebGL=null,t.clear=function(e){t._context.ctx.clear()},t.clearAtlas=function(t){},t.finish=function(){},t}(),RenderContext=function(){function t(t,e,i){this.x=0,this.y=0,i?this.ctx=i.getContext("2d"):(i=new HTMLCanvas("3D"),this.ctx=System.createWebGLContext2D(i),i._setContext(this.ctx)),i.size(t,e),this.canvas=i}__class(t,"laya.renders.RenderContext");var e=t.prototype;return e.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},e.drawTexture=function(t,e,i,n,s){t.loaded?this.ctx.drawTexture(t,e,i,n,s,this.x,this.y):this.ctx._repaint=!0},e._drawTexture=function(t,e,i){i[0].loaded?this.ctx.drawTexture(i[0],i[1],i[2],i[3],i[4],t,e):this.ctx._repaint=!0},e.drawTextureWithTransform=function(t,e,i,n,s,a){t.loaded?this.ctx.drawTextureWithTransform(t,e,i,n,s,a,this.x,this.y):this.ctx._repaint=!0},e._drawTextureWithTransform=function(t,e,i){i[0].loaded?this.ctx.drawTextureWithTransform(i[0],i[1],i[2],i[3],i[4],i[5],t,e):this.ctx._repaint=!0},e.fillQuadrangle=function(t,e,i,n,s){this.ctx.fillQuadrangle(t,e,i,n,s)},e._fillQuadrangle=function(t,e,i){this.ctx.fillQuadrangle(i[0],i[1],i[2],i[3],i[4])},e.drawCanvas=function(t,e,i,n,s){this.ctx.drawCanvas(t,e+this.x,i+this.y,n,s)},e.drawRect=function(t,e,i,n,s,a){void 0===a&&(a=1);var r=this.ctx;r.strokeStyle=s,r.lineWidth=a,r.strokeRect(t+this.x,e+this.y,i,n)},e._drawRect=function(t,e,i){var n=this.ctx;null!=i[4]&&(n.fillStyle=i[4],n.fillRect(t+i[0],e+i[1],i[2],i[3])),null!=i[5]&&(n.strokeStyle=i[5],n.lineWidth=i[6],n.strokeRect(t+i[0],e+i[1],i[2],i[3]))},e._drawPoly=function(t,e,i){var n=this.ctx;n.beginPath();var s=i[2];t+=i[0],e+=i[1],n.moveTo(t+s[0],e+s[1]);for(var a=2,r=s.length;r>a;)n.lineTo(t+s[a++],e+s[a++]);n.closePath(),this.fillAndStroke(i[3],i[4],i[5])},e._drawPath=function(t,e,i){var n=this.ctx;n.beginPath(),t+=i[0],e+=i[1];for(var s=i[2],a=0,r=s.length;r>a;a++){var h=s[a];switch(h[0]){case"moveTo":n.moveTo(t+h[1],e+h[2]);break;case"lineTo":n.lineTo(t+h[1],e+h[2]);break;case"arcTo":n.arcTo(t+h[1],e+h[2],t+h[3],e+h[4],h[5]);break;case"closePath":n.closePath()}}var o=i[3];null!=o&&(n.fillStyle=o.fillStyle,n.fill());var l=i[4];null!=l&&(n.strokeStyle=l.strokeStyle,n.lineWidth=l.lineWidth||1,n.lineJoin=l.lineJoin,n.lineCap=l.lineCap,n.miterLimit=l.miterLimit,n.stroke())},e.fillAndStroke=function(t,e,i){null!=t&&(this.ctx.fillStyle=t,this.ctx.fill()),null!=e&&(this.ctx.strokeStyle=e,this.ctx.lineWidth=i,this.ctx.stroke())},e._drawPie=function(t,e,i){var n=this.ctx;n.translate(t+i[0],e+i[1]),n.beginPath(),n.moveTo(0,0),n.arc(0,0,i[2],i[3],i[4]),n.closePath(),this.fillAndStroke(i[5],i[6],i[7]),n.translate(-t-i[0],-e-i[1])},e._drawPieWebGL=function(t,e,i){var n=this.ctx;n.lineWidth=i[7],n.fan(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4],i[5],i[6])},e.clipRect=function(t,e,i,n){this.ctx.clipRect(t+this.x,e+this.y,i,n)},e._clipRect=function(t,e,i){this.ctx.clipRect(t+i[0],e+i[1],i[2],i[3])},e.fillRect=function(t,e,i,n,s){this.ctx.fillRect(t+this.x,e+this.y,i,n,s)},e._fillRect=function(t,e,i){this.ctx.fillRect(t+i[0],e+i[1],i[2],i[3],i[4])},e.drawCircle=function(e,i,n,s,a){void 0===a&&(a=1);var r=this.ctx;r.beginPath(),r.strokeStyle=s,r.lineWidth=a,r.arc(e+this.x,i+this.y,n,0,t.PI2),r.stroke()},e._drawCircle=function(e,i,n){var s=this.ctx;s.beginPath(),s.arc(n[0]+e,n[1]+i,n[2],0,t.PI2),this.fillAndStroke(n[3],n[4],n[5])},e._drawCircleWebGL=function(t,e,i){this.ctx.drawPoly(t+this.x+i[0],e+this.y+i[1],i[2],40,i[4],i[5],i[3])},e.fillCircle=function(e,i,n,s){var a=this.ctx;a.beginPath(),a.fillStyle=s,a.arc(e+this.x,i+this.y,n,0,t.PI2),a.fill()},e._fillCircle=function(e,i,n){var s=this.ctx;s.beginPath(),s.fillStyle=n[3],s.arc(n[0]+e,n[1]+i,n[2],0,t.PI2),s.fill()},e.setShader=function(t){this.ctx.setShader(t)},e._setShader=function(t,e,i){this.ctx.setShader(i[0])},e.drawLine=function(t,e,i,n,s,a){void 0===a&&(a=1);var r=this.ctx;r.beginPath(),r.strokeStyle=s,r.lineWidth=a,r.moveTo(this.x+t,this.y+e),r.lineTo(this.x+i,this.y+n),r.stroke()},e.drawLinesWebGL=function(t,e,i){this.ctx.drawLines(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4])},e._drawLine=function(t,e,i){var n=this.ctx;n.beginPath(),n.strokeStyle=i[4],n.lineWidth=i[5],n.moveTo(t+i[0],e+i[1]),n.lineTo(t+i[2],e+i[3]),n.stroke()},e.drawLines=function(t,e,i){var n=this.ctx;n.beginPath(),n.strokeStyle=i[3],n.lineWidth=i[4];var s=i[2];t+=i[0],e+=i[1],n.moveTo(t+s[0],e+s[1]);for(var a=2,r=s.length;r>a;)n.lineTo(t+s[a++],e+s[a++]);n.stroke()},e.drawCurves=function(t,e,i){var n=this.ctx;n.beginPath(),n.strokeStyle=i[3],n.lineWidth=i[4];var s=i[2];t+=i[0],e+=i[1],n.moveTo(t+s[0],e+s[1]);for(var a=2,r=s.length;r>a;)n.quadraticCurveTo(t+s[a++],e+s[a++],t+s[a++],e+s[a++]);n.stroke()},e.draw=function(t,e,i){i[0].call(null,this,t,e)},e.clear=function(){this.ctx.clear()},e.transform=function(t,e,i,n,s,a){this.ctx.transform(t,e,i,n,s,a)},e.transformByMatrix=function(t){this.ctx.transformByMatrix(t)},e._transformByMatrix=function(t,e,i){this.ctx.transformByMatrix(i[0])},e.setTransform=function(t,e,i,n,s,a){this.ctx.setTransform(t,e,i,n,s,a)},e._setTransform=function(t,e,i){this.ctx.setTransform(i[0],i[1],i[2],i[3],i[4],i[5])},e.setTransformByMatrix=function(t){this.ctx.setTransformByMatrix(t)},e._setTransformByMatrix=function(t,e,i){this.ctx.setTransformByMatrix(i[0])},e.save=function(){this.ctx.save()},e.restore=function(){this.ctx.restore()},e.translate=function(t,e){this.ctx.translate(t,e)},e._translate=function(t,e,i){this.ctx.translate(i[0],i[1])},e.rotate=function(t){this.ctx.rotate(t)},e._transform=function(t,e,i){this.ctx.translate(i[1]+t,i[2]+e);var n=i[0];this.ctx.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),this.ctx.translate(-t-i[1],-e-i[2])},e._rotate=function(t,e,i){this.ctx.translate(i[1]+t,i[2]+e),this.ctx.rotate(i[0]),this.ctx.translate(-t-i[1],-e-i[2])},e._scale=function(t,e,i){this.ctx.translate(i[2]+t,i[3]+e),this.ctx.scale(i[0],i[1]),this.ctx.translate(-t-i[2],-e-i[3])},e.scale=function(t,e){this.ctx.scale(t,e)},e.alpha=function(t){this.ctx.globalAlpha=t},e._alpha=function(t,e,i){this.ctx.globalAlpha=i[0]},e.setAlpha=function(t){this.ctx.globalAlpha=t},e._setAlpha=function(t,e,i){this.ctx.globalAlpha=i[0]},e.fillWords=function(t,e,i,n,s){this.ctx.fillWords(t,e,i,n,s)},e.fillText=function(t,e,i,n,s,a){this.ctx.fillText(t,e+this.x,i+this.y,n,s,a)},e._fillText=function(t,e,i){this.ctx.fillText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5])},e.strokeText=function(t,e,i,n,s,a,r){this.ctx.strokeText(t,e+this.x,i+this.y,n,s,a,r)},e._strokeText=function(t,e,i){this.ctx.strokeText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6])},e._fillBorderText=function(t,e,i){this.ctx.fillBorderText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6],i[7])},e.blendMode=function(t){this.ctx.globalCompositeOperation=t},e._blendMode=function(t,e,i){this.ctx.globalCompositeOperation=i[0]},e.flush=function(){this.ctx.flush&&this.ctx.flush()},e.addRenderObject=function(t){this.ctx.addRenderObject(t)},e.beginClip=function(t,e,i,n){this.ctx.beginClip&&this.ctx.beginClip(t,e,i,n)},e._beginClip=function(t,e,i){this.ctx.beginClip&&this.ctx.beginClip(t+i[0],e+i[1],i[2],i[3])},e.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},e._setIBVB=function(t,e,i){this.ctx.setIBVB(i[0]+t,i[1]+e,i[2],i[3],i[4],i[5],i[6],i[7])},e.fillTrangles=function(t,e,i){this.ctx.fillTrangles(i[0],i[1],i[2],i[3],i.length>4?i[4]:null)},e._fillTrangles=function(t,e,i){this.ctx.fillTrangles(i[0],i[1]+t,i[2]+e,i[3],i[4])},e.drawPath=function(t,e,i){this.ctx.drawPath(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4])},e.drawPoly=function(t,e,i){this.ctx.drawPoly(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4],i[5],i[6])},e.drawParticle=function(t,e,i){this.ctx.drawParticle(t+this.x,e+this.y,i[0])},__getset(0,e,"enableMerge",null,function(t){this.ctx.enableMerge=t}),t.PI2=2*Math.PI,t}(),RenderSprite=function(){function t(e,i){switch(this._next=i||t.NORENDER,e){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 4:return void(this._fun=this._alpha);case 8:return void(this._fun=this._transform);case 32:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._clip);case 128:return void(this._fun=this._style);case 256:return void(this._fun=this._graphics);case 1024:return void(this._fun=this._enableRenderMerge);case 2048:return void(this._fun=this._childs);case 512:return void(this._fun=this._custom);case 257:return void(this._fun=this._image2);case 265:return void(this._fun=this._image2);case 2:return void(this._fun=Filter._filter);case 69905:return void(this._fun=t._initRenderFun)}this.onCreate(e)}__class(t,"laya.renders.RenderSprite");var e=t.prototype;return e.onCreate=function(t){},e._style=function(t,e,i,n){t._style.render(t,e,i,n);var s=this._next;s._fun.call(s,t,e,i,n)},e._no=function(t,e,i,n){},e._custom=function(t,e,i,n){t.customRender(e,i,n);var s=t._style;this._next._fun.call(this._next,t,e,i-s.translateX,n-s.translateY)},e._clip=function(e,i,n,s){var a=this._next;if(a!=t.NORENDER){var r=e._style.scrollRect;i.ctx.save(),i.ctx.clipRect(n,s,r.width,r.height),a._fun.call(a,e,i,n-r.x,s-r.y),i.ctx.restore()}},e._enableRenderMerge=function(e,i,n,s){var a=this._next;a!=t.NORENDER&&(i.ctx.save(),i.ctx.enableMerge=!0,a._fun.call(a,e,i,n,s),i.ctx.restore())},e._blend=function(t,e,i,n){var s=t._style;s.blendMode&&(e.ctx.globalCompositeOperation=s.blendMode);var a=this._next;a._fun.call(a,t,e,i,n);var r=t.mask;r&&(e.ctx.globalCompositeOperation="destination-in",(r.numChildren>0||!r.graphics._isOnlyOne())&&(r.cacheAsBitmap=!0),r.render(e,i,n)),e.ctx.globalCompositeOperation="source-over"},e._graphics=function(t,e,i,n){var s=t._style;t._graphics&&t._graphics._render(t,e,i-s.translateX,n-s.translateY);var a=this._next;a._fun.call(a,t,e,i,n)},e._image=function(t,e,i,n){if(t._graphics._isOnlyOne()){var s=t._style;e.ctx.drawTexture2(i,n,s.translateX,s.translateY,t.transform,s.alpha,s.blendMode,t._graphics._one)}else this._graphics(t,e,i,n),t._renderType&=-2},e._image2=function(t,e,i,n){if(t._graphics._isOnlyOne()){var s=t._style;e.ctx.drawTexture2(i,n,s.translateX,s.translateY,t.transform,1,null,t._graphics._one)}else this._graphics(t,e,i,n),t._renderType&=-2},e._alpha=function(t,e,i,n){var s,a=t._style;if((s=a.alpha)>.01){var r=e.ctx.globalAlpha;e.ctx.globalAlpha*=s;var h=this._next;h._fun.call(h,t,e,i,n),e.ctx.globalAlpha=r}},e._transform=function(e,i,n,s){var a=e.transform,r=this._next;a&&r!=t.NORENDER?(i.save(),i.transform(a.a,a.b,a.c,a.d,a.tx+n,a.ty+s),r._fun.call(r,e,i,0,0),i.restore()):r._fun.call(r,e,i,n,s)},e._childs=function(t,e,i,n){var s=t._style;i+=-s.translateX+s.paddingLeft,n+=-s.translateY+s.paddingTop;var a=t._getWords();a&&e.fillWords(a,i,n,s.font,s.color);var r,h=t._childs,o=h.length;if(t.optimizeFloat&&null!=t.scrollRect){var l=t.scrollRect;for(u=0;o>u;++u)r=h[u],r._style.visible&&l.intersects(Rectangle.TEMP.setTo(r.x,r.y,r.width,r.height))&&r.render(e,i,n)}else for(var u=0;o>u;++u)(r=h[u])._style.visible&&r.render(e,i,n)},e._canvas=function(t,e,i,n){var s=t._$P.cacheCanvas,a=this._next;if(!s)return void a._fun.call(a,t,u,i,n);var r,h,o,l,u=s.ctx,c=t.isRepaint()||!u||u.ctx._repaint;if("bitmap"===s.type?Stat.canvasBitmap++:Stat.canvasNormal++,
c){h=-t.pivotX,o=-t.pivotY,s._cacheRec||(s._cacheRec=new Rectangle);var _=t.width,m=t.height;t.autoSize||0===_||0===m?(l=t.getSelfBounds(),l.x-=t.pivotX,l.y-=t.pivotY,l.width+=20,l.height+=20,s._cacheRec.copyFrom(l),l=s._cacheRec):l=s._cacheRec.setTo(h,o,_,m),_=l.width,m=l.height,h=l.x,o=l.y,u||(u=s.ctx=new RenderContext(_,m,new HTMLCanvas("AUTO"))),r=u.canvas,"bitmap"===s.type&&(r.asBitmap=!0),r.clear(),(r.width!=_||r.height!=m)&&r.size(_,m),a._fun.call(a,t,u,-h,-o),t.applyFilters(),t._$P.isStatic&&(s.reCache=!1),Stat.canvasReCache++}else l=s._cacheRec,h=l.x,o=l.y,r=u.canvas;e.drawCanvas(r,i+h,n+o,r.width,r.height)},t.__init__=function(){function e(e,i){for(var n=0,s=0;s<e.length;s++)n|=e[s],t.renders[n]=i}var i,n=0,s=0;for(i=System.createRenderSprite(69905,null),s=t.renders.length=4096,n=0;s>n;n++)t.renders[n]=i;t.renders[0]=System.createRenderSprite(0,null),e([1,256,8,4],new t(1,null)),t.renders[257]=System.createRenderSprite(257,null),t.renders[265]=new t(265,null)},t._initRenderFun=function(e,i,n,s){var a=e._renderType,r=t.renders[a]=t._getTypeRender(a);r._fun(e,i,n,s)},t._getTypeRender=function(t){for(var e=null,i=2048;i>1;)i&t&&(e=System.createRenderSprite(i,e)),i>>=1;return e},t.IMAGE=1,t.FILTERS=2,t.ALPHA=4,t.TRANSFORM=8,t.CANVAS=16,t.BLEND=32,t.CLIP=64,t.STYLE=128,t.GRAPHICS=256,t.CUSTOM=512,t.ENABLERENDERMERGE=1024,t.CHILDS=2048,t.INIT=69905,t.renders=[],t.NORENDER=new t(0,null),t}(),Context=function(){function t(){this._repaint=!1}__class(t,"laya.resource.Context");var e=t.prototype;return e.drawCanvas=function(t,e,i,n,s){Stat.drawCall++,this.drawImage(t.source,e,i,n,s)},e.fillRect=function(t,e,i,n,s){Stat.drawCall++,s&&(this.fillStyle=s),this.__fillRect(t,e,i,n)},e.fillText=function(t,e,i,n,s,a){Stat.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.fillStyle=s,this.textAlign=a,this.textBaseline="top"),this.__fillText(t,e,i)},e.fillBorderText=function(t,e,i,n,s,a,r,h){Stat.drawCall++,this.font=n,this.fillStyle=s,this.textBaseline="top",this.strokeStyle=a,this.lineWidth=r,this.textAlign=h,this.__strokeText(t,e,i),this.__fillText(t,e,i)},e.strokeText=function(t,e,i,n,s,a,r){Stat.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.strokeStyle=s,this.lineWidth=a,this.textAlign=r,this.textBaseline="top"),this.__strokeText(t,e,i)},e.transformByMatrix=function(t){this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.setTransformByMatrix=function(t){this.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clipRect=function(t,e,i,n){Stat.drawCall++,this.beginPath(),this.rect(t,e,i,n),this.clip()},e.drawTexture=function(t,e,i,n,s,a,r){Stat.drawCall++;var h=t.uv,o=t.bitmap.width,l=t.bitmap.height;this.drawImage(t.bitmap.source,h[0]*o,h[1]*l,(h[2]-h[0])*o,(h[5]-h[3])*l,e+t.offsetX+a,i+t.offsetY+r,n,s)},e.drawTextureWithTransform=function(t,e,i,n,s,a,r,h){Stat.drawCall++;var o=t.uv,l=t.bitmap.width,u=t.bitmap.height;this.save(),this.transform(a.a,a.b,a.c,a.d,a.tx+r,a.ty+h),this.drawImage(t.bitmap.source,o[0]*l,o[1]*u,(o[2]-o[0])*l,(o[5]-o[3])*u,e+t.offsetX,i+t.offsetY,n,s),this.restore()},e.drawTexture2=function(t,e,i,n,s,a,r,h){"use strict";Stat.drawCall++;var o=1!==a;if(o){var l=this.globalAlpha;this.globalAlpha*=a}var u=h[0],c=u.uv,_=u.bitmap.width,m=u.bitmap.height;s?(this.save(),this.transform(s.a,s.b,s.c,s.d,s.tx+t,s.ty+e),this.drawImage(u.bitmap.source,c[0]*_,c[1]*m,(c[2]-c[0])*_,(c[5]-c[3])*m,h[1]-i+u.offsetX,h[2]-n+u.offsetY,h[3],h[4]),this.restore()):this.drawImage(u.bitmap.source,c[0]*_,c[1]*m,(c[2]-c[0])*_,(c[5]-c[3])*m,h[1]-i+t+u.offsetX,h[2]-n+e+u.offsetY,h[3],h[4]),o&&(this.globalAlpha=l)},e.flush=function(){return 0},e.fillWords=function(t,e,i,n,s){n&&(this.font=n),s&&(this.fillStyle=s);this.textBaseline="top",this.textAlign="left";for(var a=0,r=t.length;r>a;a++){var h=t[a];this.__fillText(h["char"],h.x+e,h.y+i)}},e.destroy=function(){this.canvas.width=this.canvas.height=0},e.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},__getset(0,e,"enableMerge",function(){return!1},function(t){}),t._init=function(e,i){i.__fillText=i.fillText,i.__fillRect=i.fillRect,i.__strokeText=i.strokeText;var n=["fillWords","fillRect","strokeText","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText"];n.forEach(function(e){i[e]=t._default[e]})},t._default=new t,t}(),ResourceManager=function(){function t(){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=t._uniqueIDCounter,t._uniqueIDCounter++,this._name="Content Manager",t._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,t._resourceManagers.push(this),this._resources=[]}__class(t,"laya.resource.ResourceManager");var e=t.prototype;return Laya.imps(e,{"laya.resource.IDispose":!0}),e.getResourceByIndex=function(t){return this._resources[t]},e.getResourcesLength=function(){return this._resources.length},e.addResource=function(t){t.resourceManager&&t.resourceManager.removeResource(t);var e=this._resources.indexOf(t);return-1===e?(t._resourceManager=this,this._resources.push(t),this.addSize(t.memorySize),t.on("memorychanged",this,this.addSize),!0):!1},e.removeResource=function(t){var e=this._resources.indexOf(t);return-1!==e?(this._resources.splice(e,1),t._resourceManager=null,this._memorySize-=t.memorySize,t.off("memorychanged",this,this.addSize),!0):!1},e.unload=function(){if(this===t._systemResourceManager)throw new Error("systemResourceManager不能被释放！");for(var e=this._resources.slice(0,this._resources.length),i=0;i<e.length;i++){var n=e[i];n._resourceManager=null,n.dispose()}e.length=0},e.setUniqueName=function(e){for(var i=!0,n=0;n<t._resourceManagers.length;n++)if(t._resourceManagers[n]._name===e&&t._resourceManagers[n]!==this)return void(i=!1);i?this.name!=e&&(this.name=e,t._isResourceManagersSorted=!1):this.setUniqueName(e.concat("-copy"))},e.dispose=function(){if(this===t._systemResourceManager)throw new Error("systemResourceManager不能被释放！");t._resourceManagers.splice(t._resourceManagers.indexOf(this),1),t._isResourceManagersSorted=!1;for(var e=0;e<this._resources.length;e++){var i=this._resources[e];i._resourceManager=null,i.dispose()}},e.addSize=function(t){t&&(this.autoRelease&&t>0&&this._memorySize+t>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=t)},e.garbageCollection=function(t){var e=this._resources;e=e.slice(),e.sort(function(t,e){if(!t||!e)throw new Error("a或b不能为空！");return t.released&&e.released?0:t.released?1:e.released?-1:t.lastUseFrameCount-e.lastUseFrameCount});for(var i=Stat.loopCount,n=0,s=e.length;s>n;n++){var a=e[n];if(!(i-a.lastUseFrameCount>1))return void(this._memorySize>=t&&(this._isOverflow=!0));if(a.releaseResource(),this._memorySize<t)return void(this._isOverflow=!1)}},__getset(0,e,"id",function(){return this._id}),__getset(0,e,"name",function(){return this._name},function(e){!e&&""===e||this._name===e||(this._name=e,t._isResourceManagersSorted=!1)}),__getset(0,e,"memorySize",function(){return this._memorySize}),__getset(1,t,"sortedResourceManagersByName",function(){return t._isResourceManagersSorted||(t._isResourceManagersSorted=!0,t._resourceManagers.sort(t.compareResourceManagersByName)),t._resourceManagers}),__getset(1,t,"systemResourceManager",function(){return null===t._systemResourceManager&&(t._systemResourceManager=new t,t._systemResourceManager._name="System Resource Manager"),t._systemResourceManager}),t.__init__=function(){t.currentResourceManager=t.systemResourceManager},t.getLoadedResourceManagerByIndex=function(e){return t._resourceManagers[e]},t.getLoadedResourceManagersCount=function(){return t._resourceManagers.length},t.recreateContentManagers=function(){for(var e=t.currentResourceManager,i=0;i<t._resourceManagers.length;i++){t.currentResourceManager=t._resourceManagers[i];for(var n=0;n<t.currentResourceManager._resources.length;n++)t.currentResourceManager._resources[i].activeResource(!0)}t.currentResourceManager=e},t.compareResourceManagersByName=function(t,e){if(t==e)return 0;var i=t._name,n=e._name;if(null==i)return null==n?0:-1;if(null==n)return 1;var s=i.localeCompare(n);return 0!=s?s:(e.setUniqueName(n),n=e._name,i.localeCompare(n))},t._uniqueIDCounter=-2147483648,t._systemResourceManager=null,t._isResourceManagersSorted=!1,t._resourceManagers=[],t.currentResourceManager=null,t.resourcesDirectory="",t}(),System=function(){function System(){}return __class(System,"laya.system.System"),System.changeDefinition=function(name,classObj){Laya[name]=classObj;var str=name+"=classObj";eval(str)},System.__init__=function(){System.isConchApp=window.conch?!0:!1},System.isConchApp=!1,System.FILTER_ACTIONS=[],System.createRenderSprite=function(t,e){return new RenderSprite(t,e)},System.createGLTextur=null,System.createWebGLContext2D=null,System.changeWebGLSize=function(t,e){},System.createGraphics=function(){return new Graphics},System.createFilterAction=function(t){return new ColorFilterAction},System.drawToCanvas=function(t,e,i,n,s,a){var r=new HTMLCanvas("2D"),h=new RenderContext(i,n,r);return RenderSprite.renders[e]._fun(t,h,s,a),r},System.addToAtlas=null,System.createParticleTemplate2D=null,System}(),Browser=function(){function t(){}return __class(t,"laya.utils.Browser"),__getset(1,t,"clientWidth",function(){return t.document.body.clientWidth}),__getset(1,t,"clientHeight",function(){return t.document.body.clientHeight||t.document.documentElement.clientHeight}),__getset(1,t,"pixelRatio",function(){if(t._pixelRatio<0){var e=laya.utils.Browser.ctx,i=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;t._pixelRatio=(laya.utils.Browser.window.devicePixelRatio||1)/i}return t._pixelRatio}),__getset(1,t,"width",function(){return(Laya.stage&&Laya.stage.canvasRotation?t.clientHeight:t.clientWidth)*t.pixelRatio}),__getset(1,t,"height",function(){return(Laya.stage&&Laya.stage.canvasRotation?t.clientWidth:t.clientHeight)*t.pixelRatio}),t.createElement=function(e){return t.document.__createElement(e)},t.getElementById=function(e){return t.document.getElementById(e)},t.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},t.now=function(){return Date.now()},t.window=null,t.document=null,t.userAgent=navigator.userAgent,t.u=t.userAgent,t.onIOS=!!t.u.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),t.onMobile=!!t.u.match(/AppleWebKit.*Mobile.*/),t.onIPhone=t.u.indexOf("iPhone")>-1,t.onIPad=t.u.indexOf("iPad")>-1,t.onAndriod=t.u.indexOf("Android")>-1||t.u.indexOf("Adr")>-1,t.onWP=t.u.indexOf("Windows Phone")>-1,t.onQQBrowser=t.u.indexOf("QQBrowser")>-1,t.onMQQBrowser=t.u.indexOf("MQQBrowser")>-1,t.onWeiXin=t.u.indexOf("MicroMessenger")>-1,t.onPC=!t.onMobile,t.httpProtocol="http:"==window.location.protocol,t.webAudioOK=!1,t.soundType=null,t._pixelRatio=-1,__static(t,["canvas",function(){return this.canvas=new HTMLCanvas("2D")},"ctx",function(){return this.ctx=t.canvas.getContext("2d")}]),t.__init$=function(){t.window=window,t.document=window.document,t.document.__createElement=t.document.createElement,window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),t.webAudioOK=t.window.AudioContext||t.window.webkitAudioContext||t.window.mozAudioContext?!0:!1,t.soundType=t.webAudioOK?"WEBAUDIOSOUND":"AUDIOSOUND",Sound=t.webAudioOK?WebAudioSound:AudioSound},t}(),Byte=function(){function t(t){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,t?(this._u8d_=new Uint8Array(t),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}__class(t,"laya.utils.Byte");var e=t.prototype;return e.___resizeBuffer=function(t){try{var e=new Uint8Array(t);null!=this._u8d_&&(this._u8d_.length<=t?e.set(this._u8d_):e.set(this._u8d_.subarray(0,t))),this._u8d_=e,this._d_=new DataView(e.buffer)}catch(i){throw"___resizeBuffer err:"+t}},e.getString=function(){return this.rUTF(this.getUint16())},e.getFloat32Array=function(t,e){var i=new Float32Array(this._d_.buffer.slice(t,t+e));return this._pos_+=e,i},e.getUint8Array=function(t,e){var i=new Uint8Array(this._d_.buffer.slice(t,t+e));return this._pos_+=e,i},e.getInt16Array=function(t,e){var i=new Int16Array(this._d_.buffer.slice(t,t+e));return this._pos_+=e,i},e.getFloat32=function(){var t=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,t},e.writeFloat32=function(t){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,t,this._xd_),this._pos_+=4},e.getInt32=function(){var t=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,t},e.getUint32=function(){var t=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,t},e.writeInt32=function(t){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,t,this._xd_),this._pos_+=4},e.writeUint32=function(t){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,t,this._xd_),this._pos_+=4},e.getInt16=function(){var t=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,t},e.getUint16=function(){var t=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,t},e.writeUint16=function(t){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,t,this._xd_),this._pos_+=2},e.writeInt16=function(t){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,t,this._xd_),this._pos_+=2},e.getUint8=function(){return this._d_.getUint8(this._pos_++)},e.writeUint8=function(t){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,t,this._xd_),this._pos_++},e._getUInt8=function(t){return this._d_.getUint8(t)},e._getUint16=function(t){return this._d_.getUint16(t,this._xd_)},e._getMatrix=function(){var t=new Matrix(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32());return t},e.rUTF=function(t){for(var e="",i=this._pos_+t,n=0,s=0,a=0,r=String.fromCharCode,h=this._u8d_,o=0;this._pos_<i;)n=h[this._pos_++],128>n?0!=n&&(e+=r(n)):224>n?e+=r((63&n)<<6|127&h[this._pos_++]):240>n?(s=h[this._pos_++],e+=r((31&n)<<12|(127&s)<<6|127&h[this._pos_++])):(s=h[this._pos_++],a=h[this._pos_++],e+=r((15&n)<<18|(127&s)<<12|a<<6&127|127&h[this._pos_++])),o++;return e},e.getCustomString=function(t){for(var e="",i=0,n=0,s=0,a=String.fromCharCode,r=this._u8d_;t>0;)if(n=r[this._pos_],128>n)e+=a(n),this._pos_++,t--;else for(i=n-128,this._pos_++,t-=i;i>0;)n=r[this._pos_++],s=r[this._pos_++],e+=a(s<<8|n),i--;return e},e.clear=function(){this._pos_=0,this.length=0},e.__getBuffer=function(){return this._d_.buffer},e.writeUTFBytes=function(t){t+="";for(var e=0,i=t.length;i>e;e++){var n=t.charCodeAt(e);127>=n?this.writeByte(n):2047>=n?(this.writeByte(192|n>>6),this.writeByte(128|63&n)):65535>=n?(this.writeByte(224|n>>12),this.writeByte(128|n>>6&63),this.writeByte(128|63&n)):(this.writeByte(240|n>>18),this.writeByte(128|n>>12&63),this.writeByte(128|n>>6&63),this.writeByte(128|63&n))}},e.writeUTFString=function(t){var e=0;e=this.pos,this.writeInt16(1),this.writeUTFBytes(t);var i=0;i=this.pos-e-2,this._d_.setInt16(e,i,this._xd_)},e.readUTFString=function(){var t=0;t=this.pos;var e=0;return e=this.getInt16(),this.readUTFBytes(e)},e.readUTFBytes=function(t){return void 0===t&&(t=-1),t=t>0?t:this.bytesAvailable,this.rUTF(t)},e.writeByte=function(t){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,t),this._pos_+=1},e.ensureWrite=function(t){this._length<t&&(this.length=t)},e.writeArrayBuffer=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0>e||0>i)throw"writeArrayBuffer error - Out of bounds";0==i&&(i=t.byteLength-e),this.ensureWrite(this._pos_+i);var n=new Uint8Array(t);this._u8d_.set(n.subarray(e,e+i),this._pos_),this._pos_+=i},__getset(0,e,"buffer",function(){return this._u8d_.buffer}),__getset(0,e,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(t){this._xd_="littleEndian"==t}),__getset(0,e,"bytesAvailable",function(){return this.length-this._pos_}),__getset(0,e,"length",function(){return this._length},function(t){this._allocated_<t?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(t,2*this._allocated_))):this._allocated_>t&&this.___resizeBuffer(this._allocated_=t),this._length=t}),__getset(0,e,"pos",function(){return this._pos_},function(t){this._pos_=t,this._d_.byteOffset=t}),t.getSystemEndian=function(){if(!t._sysEndian){var e=new ArrayBuffer(2);new DataView(e).setInt16(0,256,!0),t._sysEndian=256===new Int16Array(e)[0]?"littleEndian":"bigEndian"}return t._sysEndian},t.BIG_ENDIAN="bigEndian",t.LITTLE_ENDIAN="littleEndian",t._sysEndian=null,t}(),Color=function(){function t(e){if(this._color=[],"string"==typeof e){this.strColor=e,null===e&&(e="#000000"),"#"==e.charAt(0)&&(e=e.substr(1));var i=this.numColor=parseInt(e,16),n=8==e.length;if(n)return void(this._color=[parseInt(e.substr(0,2),16)/255,((16711680&i)>>16)/255,((65280&i)>>8)/255,(255&i)/255])}else i=this.numColor=e,this.strColor=Utils.toHexColor(i);this._color=[((16711680&i)>>16)/255,((65280&i)>>8)/255,(255&i)/255,1],this._color.__id=++t._COLODID}return __class(t,"laya.utils.Color"),t._initDefault=function(){t._DEFAULT={};for(var e in t._COLOR_MAP)t._SAVE[e]=t._DEFAULT[e]=new t(t._COLOR_MAP[e]);return t._DEFAULT},t._initSaveMap=function(){t._SAVE_SIZE=0,t._SAVE={};for(var e in t._DEFAULT)t._SAVE[e]=t._DEFAULT[e]},t.create=function(e){var i=t._SAVE[e+""];return null!=i?i:(t._SAVE_SIZE<1e3||t._initSaveMap(),t._SAVE[e+""]=new t(e))},t._SAVE={},t._SAVE_SIZE=0,t._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},t._DEFAULT=t._initDefault(),t._COLODID=1,t}(),Dragging=function(){function t(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}__class(t,"laya.utils.Dragging");var e=t.prototype;return e.start=function(t,e,i,n,s,a,r){this.clearTimer(),this.target=t,this.area=e,this.hasInertia=i,this.elasticDistance=n,this.elasticBackTime=s,this.data=a,this._disableMouseEvent=r,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=Laya.stage.mouseX,this._lastY=Laya.stage.mouseY,Laya.stage.on("mouseup",this,this.onStageMouseUp),Laya.stage.on("mouseout",this,this.onStageMouseUp),Laya.timer.frameLoop(1,this,this.loop)},e.clearTimer=function(){Laya.timer.clear(this,this.loop),Laya.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},e.stop=function(){this._dragging&&(MouseManager.instance.disableMouseEvent=!1,Laya.stage.off("mouseup",this,this.onStageMouseUp),Laya.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},e.loop=function(){var t=Laya.stage.mouseX,e=Laya.stage.mouseY,i=t-this._lastX,n=e-this._lastY;if(this._clickOnly){if(!(Math.abs(i*Laya.stage._canvasTransform.getScaleX())>1||Math.abs(n*Laya.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),MouseManager.instance.disableMouseEvent=this._disableMouseEvent,this.target.$_MOUSEDOWN=!1}else this._offsets.push(i,n),this._lastX=t,this._lastY=e;(0!==i||0!==n)&&(this.target.x+=i*this._elasticRateX,this.target.y+=n*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},e.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var t=this.area.x-this.target.x;else t=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t/this.elasticDistance),this.target.y<this.area.y)var e=this.area.y-this.target.y;else e=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e/this.elasticDistance)}},e.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},e.onStageMouseUp=function(t){if(MouseManager.instance.disableMouseEvent=!1,Laya.stage.off("mouseup",this,this.onStageMouseUp),Laya.stage.off("mouseout",this,this.onStageMouseUp),Laya.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(Laya.stage.mouseX-this._lastX,Laya.stage.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var e=this._offsets.length,i=Math.min(e,6),n=this._offsets.length-i,s=e-1;s>n;s--)this._offsetY+=this._offsets[s--],this._offsetX+=this._offsets[s];this._offsetX=this._offsetX/i*2,this._offsetY=this._offsetY/i*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),Laya.timer.frameLoop(1,this,this.tweenMove)}else this.elasticDistance>0?this.checkElastic():this.clear()},e.checkElastic=function(){var t=NaN,e=NaN;if(this.target.x<this.area.x?t=this.area.x:this.target.x>this.area.x+this.area.width&&(t=this.area.x+this.area.width),this.target.y<this.area.y?e=this.area.y:this.target.y>this.area.y+this.area.height&&(e=this.area.y+this.area.height),isNaN(t)&&isNaN(e))this.clear();else{var i={};isNaN(t)||(i.x=t),isNaN(e)||(i.y=e),this._tween=Tween.to(this.target,i,this.elasticBackTime,Ease.sineOut,Handler.create(this,this.clear),0,!1,!1)}},e.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(Laya.timer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear())},e.clear=function(){if(this.target){this.clearTimer();var t=this.target;this.target=null,t.event("dragend",this.data)}},t}(),Ease=function(){function t(){}return __class(t,"laya.utils.Ease"),t.strongIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.strongOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.strongInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.sineIn=function(e,i,n,s){return-n*Math.cos(e/s*t.HALF_PI)+n+i},t.sineOut=function(e,i,n,s){return n*Math.sin(e/s*t.HALF_PI)+i},t.sineInOut=function(t,e,i,n){return.5*-i*(Math.cos(Math.PI*t/n)-1)+e},t.quintIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.quintOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.quintInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.quartIn=function(t,e,i,n){return i*(t/=n)*t*t*t+e},t.quartOut=function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},t.quartInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t+e:.5*-i*((t-=2)*t*t*t-2)+e},t.QuadIn=function(t,e,i,n){return i*(t/=n)*t+e},t.QuadOut=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},t.QuadInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t+e:.5*-i*(--t*(t-2)-1)+e},t.linearNone=function(t,e,i,n){return i*t/n+e},t.linearIn=function(t,e,i,n){return i*t/n+e},t.linearOut=function(t,e,i,n){return i*t/n+e},t.linearInOut=function(t,e,i,n){return i*t/n+e},t.expoIn=function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e-.001*i},t.expoOut=function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},t.expoInOut=function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=.5*n)<1?.5*i*Math.pow(2,10*(t-1))+e:.5*i*(-Math.pow(2,-10*--t)+2)+e},t.elasticIn=function(e,i,n,s,a,r){void 0===a&&(a=0),void 0===r&&(r=0);var h;return 0==e?i:1==(e/=s)?i+n:(r||(r=.3*s),!a||n>0&&n>a||0>n&&-n>a?(a=n,h=r/4):h=r/t.PI2*Math.asin(n/a),-(a*Math.pow(2,10*(e-=1))*Math.sin((e*s-h)*t.PI2/r))+i)},t.elasticOut=function(e,i,n,s,a,r){void 0===a&&(a=0),void 0===r&&(r=0);var h;return 0==e?i:1==(e/=s)?i+n:(r||(r=.3*s),!a||n>0&&n>a||0>n&&-n>a?(a=n,h=r/4):h=r/t.PI2*Math.asin(n/a),a*Math.pow(2,-10*e)*Math.sin((e*s-h)*t.PI2/r)+n+i)},t.elasticInOut=function(e,i,n,s,a,r){void 0===a&&(a=0),void 0===r&&(r=0);var h;return 0==e?i:2==(e/=.5*s)?i+n:(r||(r=s*(.3*1.5)),!a||n>0&&n>a||0>n&&-n>a?(a=n,h=r/4):h=r/t.PI2*Math.asin(n/a),1>e?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*s-h)*t.PI2/r))+i:a*Math.pow(2,-10*(e-=1))*Math.sin((e*s-h)*t.PI2/r)*.5+n+i)},t.cubicIn=function(t,e,i,n){return i*(t/=n)*t*t+e},t.cubicOut=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.cubicInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t+e:.5*i*((t-=2)*t*t+2)+e},t.circIn=function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},t.circOut=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},t.circInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*-i*(Math.sqrt(1-t*t)-1)+e:.5*i*(Math.sqrt(1-(t-=2)*t)+1)+e},t.bounceOut=function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.bounceIn=function(e,i,n,s){return n-t.bounceOut(s-e,0,n,s)+i},t.bounceInOut=function(e,i,n,s){return.5*s>e?.5*t.bounceIn(2*e,0,n,s)+i:.5*t.bounceOut(2*e-s,0,n,s)+.5*n+i},t.backIn=function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},t.backOut=function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},t.backInOut=function(t,e,i,n,s){return void 0===s&&(s=1.70158),(t/=.5*n)<1?.5*i*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},t.HALF_PI=.5*Math.PI,t.PI2=2*Math.PI,t}(),HTMLChar=function(){function t(e,i,n,s){this["char"]=e,this.charNum=e.charCodeAt(0),this._x=this._y=0,this.width=i,this.height=n,this.style=s,this.isWord=!t._isWordRegExp.test(e)}__class(t,"laya.utils.HTMLChar");var e=t.prototype;return Laya.imps(e,{"laya.display.ILayout":!0}),e.setSprite=function(t){this._sprite=t},e.getSprite=function(){return this._sprite},e._isChar=function(){return!0},e._getCSSStyle=function(){return this.style},__getset(0,e,"x",function(){return this._x},function(t){this._sprite&&(this._sprite.x=t),this._x=t}),__getset(0,e,"y",function(){return this._y},function(t){this._sprite&&(this._sprite.y=t),this._y=t}),__getset(0,e,"width",function(){return this._w},function(t){this._w=t}),__getset(0,e,"height",function(){return this._h},function(t){this._h=t}),t._isWordRegExp=new RegExp("[\\w.]",""),t}(),Log=function(){function t(){}return __class(t,"laya.utils.Log"),t.start=function(){t._logdiv=Browser.window.document.createElement("div"),Browser.window.document.body.appendChild(t._logdiv),t._logdiv.style.cssText="border:white;overflow:scroll;z-index:1000000;background:rgba(100,100,100,0.7);color:white;position: absolute;left:0px;top:0px;width:100%;height:50%",t._logdiv.onclick=function(){30==Laya.__parseInt(this.style.width)?(this.style.width="100%",this.style.height="50%",this.style.overflow="scroll",this.style.background="rgba(100,100,100,0.7)"):(this.style.width=this.style.height="30px",this.style.overflow="hidden",this.style.background="white")}},t.print=function(e){t._logdiv&&(t._logdiv.innerText+=e+"\n")},t.enable=function(){return null!=t._logdiv},t._logdiv=null,t}(),Pool=function(){function t(){}return __class(t,"laya.utils.Pool"),t.getPoolBySign=function(e){return t._poolDic[e]||(t._poolDic[e]=[])},t.recover=function(e,i){i.__InPool||(i.__InPool=!0,t.getPoolBySign(e).push(i))},t.getItemByClass=function(e,i){var n=t.getPoolBySign(e),s=n.length?n.pop():new i;return s.__InPool=!1,s},t.getItemByCreateFun=function(e,i){var n=t.getPoolBySign(e),s=n.length?n.pop():i();return s.__InPool=!1,s},t.getItem=function(e){var i=t.getPoolBySign(e),n=i.length?i.pop():null;return n&&(n.__InPool=!1),n},t._poolDic={},t.InPoolSign="__InPool",t}(),Stat=function(){function t(){}return __class(t,"laya.utils.Stat"),__getset(1,t,"onclick",null,function(e){t._canvas.source.onclick=e,t._canvas.source.style.pointerEvents=""}),t.show=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.preFrameTime=t._timer=Browser.now()-1e3,t._view[0]={title:"FPS(3D)",value:"_fpsStr",color:"yellow",units:"int"},t._view[1]={title:"Sprite",value:"spriteDraw",color:"white",units:"int"},t._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},t._view[3]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"},t._view[4]={title:"MaxMem",value:"maxMemorySize",color:"white",units:"M"},t._view[5]={title:"CurMem",value:"currentMemorySize",color:"Yellow",units:"M"},t._view[6]={title:"TexMem",value:"texturesMemSize",color:"LightGoldenRodYellow",units:"M"},t._view[7]={title:"BufMem",value:"buffersMemSize",color:"LightGoldenRodYellow",units:"M"},t._view[8]={title:"Shader",value:"shaderCall",color:"white",units:"int"},t._view[9]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},t._view[10]={title:"BufLen",value:"bufferLen",color:"white",units:"int"},Render.isWebGl||(t._view[0].title="FPS(2D)",t._view.length=4);for(var n=0;n<t._view.length;n++)t._view[n].x=4,t._view[n].y=12*n+2;if(t._height=12*t._view.length+4,!t._canvas){t._canvas=new HTMLCanvas("2D"),t._canvas.size(t._width,t._height),t._ctx=t._canvas.getContext("2d"),t._ctx.textBaseline="top";var s=t._canvas.source;s.style.cssText="pointer-events:none;z-index:100000;position: absolute;left:"+e+"px;top:"+i+"px;width:"+t._width+"px;height:"+t._height+"px;"}Laya.timer.frameLoop(1,t,t.loop),Browser.document.body.appendChild(t._canvas.source)},t.hide=function(){var e=t._canvas.source;Browser.removeElement(e),Laya.timer.clear(t,t.loop)},t.clear=function(){t.trianglesFaces=0,t.drawCall=0,t.shaderCall=0,t.spriteDraw=-1,t.bufferLen=0,t.canvasNormal=0,t.canvasBitmap=0,t.canvasReCache=0},t.loop=function(){t._count++;var e=Browser.now();if(t.interval=Browser.now()-t.preFrameTime,t.preFrameTime=e,e-t._timer<1e3)return void t.clear();t._count=Math.round(1e3*t._count/(e-t._timer)),t.maxMemorySize=ResourceManager.systemResourceManager.autoReleaseMaxSize,t.currentMemorySize=ResourceManager.systemResourceManager.memorySize,t.texturesMemSize=0,t.buffersMemSize=0;for(var i=0;i<Resource.getLoadedResourcesCount();i++){var n=Resource.getLoadedResourceByIndex(i);n instanceof laya.resource.Bitmap&&(t.texturesMemSize+=n.memorySize)}t.FPS=t._count,t._fpsStr=t._count+(t.renderSlow?" slow":""),t._canvasStr=t.canvasReCache+"/"+t.canvasNormal+"/"+t.canvasBitmap;var s=t._ctx;for(s.clearRect(0,0,t._width,t._height),s.fillStyle="rgba(50,50,60,0.8)",s.fillRect(0,0,t._width,t._height),i=0;i<t._view.length;i++){var a=t._view[i];s.fillStyle="white",s.fillText(a.title,a.x,a.y),s.fillStyle=a.color;var r=t[a.value];"M"==a.units&&(r=Math.floor(r/1048576*100)/100+" M"),s.fillText(r+"",a.x+60,a.y)}t._count=0,t._timer=e,t.clear()},t.loopCount=0,t.maxMemorySize=0,t.currentMemorySize=0,t.texturesMemSize=0,t.buffersMemSize=0,t.shaderCall=0,t.drawCall=0,t.trianglesFaces=0,t.spriteDraw=0,t.FPS=0,t.canvasNormal=0,t.canvasBitmap=0,t.canvasReCache=0,t.interval=0,t.preFrameTime=0,t.bufferLen=0,t.renderSlow=!1,t._fpsStr=null,t._canvasStr=null,t._canvas=null,t._ctx=null,t._timer=NaN,t._count=0,t._width=120,t._height=100,t._view=[],t}(),StringKey=function(){function t(){this._strs={},this._length=0}__class(t,"laya.utils.StringKey");var e=t.prototype;return e.add=function(t){var e=this._strs[t];return null!=e?e:this._strs[t]=this._length++},e.get=function(t){var e=this._strs[t];return null==e?-1:e},t}(),Timer=function(){function t(){this.scale=1,this.currFrame=0,this._mid=1,this._map=[],this._laters=[],this._handlers=[],this._temp=[],this._pool=[],this._count=0,this.currTimer=Browser.now(),this._lastTimer=Browser.now(),Laya.timer&&Laya.timer.frameLoop(1,this,this._update)}var e;__class(t,"laya.utils.Timer");var i=t.prototype;return i._update=function(){if(this.scale<=0)return void(this._lastTimer=Browser.now());
var e=this.currFrame=this.currFrame+this.scale,i=Browser.now();t.DELTA=i-this._lastTimer;var n=this.currTimer=this.currTimer+t.DELTA*this.scale;this._lastTimer=i;var s=this._handlers;for(this._count=0,h=0,o=s.length;o>h;h++)if(l=s[h],null!==l.method){var a=l.userFrame?e:n;if(a>=l.exeTime)if(l.repeat){do l.exeTime+=l.delay,l.run(!1);while(a>=l.exeTime)}else l.run(!0)}else this._count++;(this._count>30||e%200===0)&&this._clearHandlers();for(var r=this._laters,h=0,o=r.length-1;o>=h;h++){var l=r[h];null!==l.method&&l.run(!1),this._recoverHandler(l),h===o&&(o=r.length-1)}r.length=0},i._clearHandlers=function(){for(var t=this._handlers,e=0,i=t.length;i>e;e++){var n=t[e];null!==n.method?this._temp.push(n):this._recoverHandler(n)}this._handlers=this._temp,this._temp=t,this._temp.length=0},i._recoverHandler=function(t){t.clear(),this._map[t.key]=null,this._pool.push(t)},i._create=function(t,i,n,s,a,r,h){if(void 0===h&&(h=!1),!n)return void a.apply(s,r);if(h){var o=this._getHandler(s,a);if(o)return o.repeat=i,o.userFrame=t,o.delay=n,o.caller=s,o.method=a,o.args=r,void(o.exeTime=n+(t?this.currFrame:this.currTimer))}o=this._pool.length>0?this._pool.pop():new e,o.repeat=i,o.userFrame=t,o.delay=n,o.caller=s,o.method=a,o.args=r,o.exeTime=n+(t?this.currFrame:this.currTimer),this._indexHandler(o),this._handlers.push(o)},i._indexHandler=function(t){var e=t.caller,i=t.method,n=e?e.$_GID||(e.$_GID=Utils.getGID()):0,s=i.$_TID||(i.$_TID=1e5*this._mid++);t.key=n+s,this._map[t.key]=t},i.once=function(t,e,i,n,s){void 0===s&&(s=!1),this._create(!1,!1,t,e,i,n,s)},i.loop=function(t,e,i,n,s){void 0===s&&(s=!1),this._create(!1,!0,t,e,i,n,s)},i.frameOnce=function(t,e,i,n,s){void 0===s&&(s=!1),this._create(!0,!1,t,e,i,n,s)},i.frameLoop=function(t,e,i,n,s){void 0===s&&(s=!1),this._create(!0,!0,t,e,i,n,s)},i.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+this._pool.length},i.clear=function(t,e){var i=this._getHandler(t,e);i&&(this._map[i.key]=null,i.key=0,i.clear())},i.clearAll=function(t){for(var e=0,i=this._handlers.length;i>e;e++){var n=this._handlers[e];n.caller===t&&(this._map[n.key]=null,n.key=0,n.clear())}},i._getHandler=function(t,e){var i=t?t.$_GID||(t.$_GID=Utils.getGID()):0,n=e.$_TID||(e.$_TID=1e5*this._mid++);return this._map[i+n]},i.callLater=function(t,i,n){if(null==this._getHandler(t,i)){if(this._pool.length)var s=this._pool.pop();else s=new e;s.caller=t,s.method=i,s.args=n,this._indexHandler(s),this._laters.push(s)}},i.runCallLater=function(t,e){var i=this._getHandler(t,e);i&&null!=i.method&&(i.run(!0),this._map[i.key]=null)},t.DELTA=0,t.__init$=function(){e=function(){function t(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null}__class(t,"");var e=t.prototype;return e.clear=function(){this.caller=null,this.method=null,this.args=null},e.run=function(t){var e=this.caller;if(e&&e.destroyed)return this.clear();var i=this.method,n=this.args;t&&this.clear(),null!=i&&(n?i.apply(e,n):i.call(e))},t}()},t}(),Tween=function(){function t(){this.gid=0}__class(t,"laya.utils.Tween");var e=t.prototype;return e.to=function(t,e,i,n,s,a,r){return void 0===a&&(a=0),void 0===r&&(r=!1),this._create(t,e,i,n,s,a,r,!0,!1,!0)},e.from=function(t,e,i,n,s,a,r){return void 0===a&&(a=0),void 0===r&&(r=!1),this._create(t,e,i,n,s,a,r,!1,!1,!0)},e._create=function(e,i,n,s,a,r,h,o,l,u){if(!e)throw new Error("Tween:target is null");this._target=e,this._duration=n,this._ease=s||t.easeNone,this._complete=a,this._delay=r,this._props=[],this._usedTimer=0,this._startTimer=Browser.now(),this._usedPool=l;var c=e.$_GID||(e.$_GID=Utils.getGID());return t.tweenMap[c]?(h&&t.clearTween(e),t.tweenMap[c].push(this)):t.tweenMap[c]=[this],u?0>=r?this.firstStart(e,i,o):Laya.timer.once(r,this,this.firstStart,[e,i,o]):this._initProps(e,i,o),this},e.firstStart=function(t,e,i){this._initProps(t,e,i),this._beginLoop()},e._initProps=function(t,e,i){for(var n in e)if("number"==typeof t[n]){var s=i?t[n]:e[n],a=i?e[n]:t[n];this._props.push([n,s,a-s])}},e._beginLoop=function(){Laya.timer.frameLoop(1,this,this._doEase)},e._doEase=function(){this.updateEase(Browser.now())},e.updateEase=function(e){var i=this._target;if(i.destroyed)return t.clearTween(i);var n=this._usedTimer=e-this._startTimer-this._delay;if(!(0>n)){if(n>=this._duration)return this.complete();for(var s=n>0?this._ease(n,0,1,this._duration):0,a=this._props,r=0,h=a.length;h>r;r++){var o=a[r];i[o[0]]=o[1]+s*o[2]}}},e.complete=function(){var t=this._target,e=this._props,i=this._complete;this.clear();for(var n=0,s=e.length;s>n;n++){var a=e[n];t[a[0]]=a[1]+a[2]}i&&i.run()},e.pause=function(){Laya.timer.clear(this,this._beginLoop),Laya.timer.clear(this,this._doEase)},e.setStartTime=function(t){this._startTimer=t,this.updateEase(this._startTimer)},e.clear=function(){this._target&&(this._remove(),this._clear())},e._clear=function(){this.pause(),Laya.timer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._usedPool&&Pool.recover("tween",this)},e.recover=function(){this._usedPool=!0,this._clear()},e._remove=function(){var e=t.tweenMap[this._target.$_GID];if(e)for(var i=0,n=e.length;n>i;i++)if(e[i]===this){e.splice(i,1);break}},e.restart=function(){this.pause(),this._usedTimer=0,this._startTimer=Browser.now();for(var t=this._props,e=0,i=t.length;i>e;e++){var n=t[e];this._target[n[0]]=n[1]}Laya.timer.once(this._delay,this,this._beginLoop)},e.resume=function(){this._usedTimer>=this._duration||(this._startTimer=Browser.now()-this._usedTimer-this._delay,this._beginLoop())},t.to=function(e,i,n,s,a,r,h,o){return void 0===r&&(r=0),void 0===h&&(h=!1),void 0===o&&(o=!0),Pool.getItemByClass("tween",t)._create(e,i,n,s,a,r,h,!0,o,!0)},t.from=function(e,i,n,s,a,r,h,o){return void 0===r&&(r=0),void 0===h&&(h=!1),void 0===o&&(o=!0),Pool.getItemByClass("tween",t)._create(e,i,n,s,a,r,h,!1,o,!0)},t.clearAll=function(e){if(e&&e.$_GID){var i=t.tweenMap[e.$_GID];if(i){for(var n=0,s=i.length;s>n;n++)i[n]._clear();i.length=0}}},t.clear=function(t){t.clear()},t.clearTween=function(e){t.clearAll(e)},t.easeNone=function(t,e,i,n){return i*t/n+e},t.tweenMap={},t}(),Utils=function(){function t(){}return __class(t,"laya.utils.Utils"),t.toRadian=function(e){return e*t._pi2},t.toAngle=function(e){return e*t._pi},t.toHexColor=function(t){if(0>t||isNaN(t))return null;for(var e=t.toString(16);e.length<6;)e="0"+e;return"#"+e},t.getGID=function(){return t._gid++},t.parseXMLFromString=function(t){var e;return e=(new DOMParser).parseFromString(t,"text/xml")},t.preFixNumber=function(t,e){return("0000000000"+t).slice(-e)},t.concatArr=function(t,e){if(!e)return t;if(!t)return e;var i=0,n=e.length;for(i=0;n>i;i++)t.push(e[i]);return t},t.clearArr=function(t){return t?(t.length=0,t):t},t.setValueArr=function(e,i){return e||(e=[]),e.length=0,t.concatArr(e,i)},t.getFrom=function(t,e,i){var n=0;for(n=0;i>n;n++)t.push(e[n]);return t},t.getFromR=function(t,e,i){var n=0;for(n=0;i>n;n++)t.push(e.pop());return t},t.getGlobalRec=function(e){return t.getGlobalRecByPoints(e,0,0,e.width,e.height)},t.getGlobalRecByPoints=function(t,e,i,n,s){var a;a=new Point(e,i),a=t.localToGlobal(a);var r;r=new Point(n,s),r=t.localToGlobal(r);var h;return h=Rectangle._getWrapRec([a.x,a.y,r.x,r.y])},t.getGlobalPosAndScale=function(e){return t.getGlobalRecByPoints(e,0,0,1,1)},t.enableDisplayTree=function(t){for(;t;)t.mouseEnabled=!0,t=t.parent},t.bind=function(t,e){var i;return i=t.bind(e)},t.copyFunction=function(t,e,i){for(var n in t)(i||!e[n])&&(e[n]=t[n])},t.measureText=function(e,i){null==t._charSizeTestDiv&&(t._charSizeTestDiv=Browser.createElement("div"),t._charSizeTestDiv.style.cssText="z-index:10000000;padding:0px;position: absolute;left:0px;visibility:hidden;top:0px;background:white",Browser.document.body.appendChild(t._charSizeTestDiv)),t._charSizeTestDiv.style.font=i,t._charSizeTestDiv.innerText=" "==e?"i":e;var n={width:t._charSizeTestDiv.offsetWidth,height:t._charSizeTestDiv.offsetHeight};return" "==e&&(n.width=.25*n.height),n},t.regClass=function(e,i){t._systemClass[e]=i},t.New=function(e){return e=t._systemClass[e]||e,new Laya.__classmap[e]},t.updateOrder=function(t){if(t.length<2)return!1;var e=t[0],i=1,n=t.length,s=e._zOrder,a=NaN,r=NaN,h=NaN,o=NaN,l=!1;for(i=1;n>i;i++)if(e=t[i],e&&((s=e._zOrder)<0&&(s=e._zOrder),s<t[i-1]._zOrder)){for(h=a=0,r=i-1;r>=a&&(h=a+r>>>1,t[h]);)if(o=t[h]._zOrder,0>o&&(o=t[h]._zOrder),s>o)a=h+1;else{if(!(o>s))break;r=h-1}s>t[h]._zOrder&&h++,t.splice(i,1),t.splice(h,0,e),l=!0}return l},t.attachAllClassTimeDelay=function(e,i){t._attachAllClassTimeDelay=e;var n=Laya.__classmap,s=((i?i.join("%"):"")+"%Laya%laya.ui.%laya.utils.Log%laya2.display%laya.utils2%laya.asyn%laya.display.css%laya.maths%laya.utils").split("%"),a=0,r=s.length;for(var h in n)if(!(h.indexOf(".")<0)){for(a=0;r>a;a++)if(0==h.indexOf(s[a])){a=-1;break}a>0&&t.attachClassTimeDelay(n[h],h,e)}},t.attachClassTimeDelay=function(t,e,i){var n,s;for(n in t)null==t["_$GET_"+n]&&"_"!=n.charAt(0)&&(s=t[n],"function"==typeof s&&(t[n]=function(t,e,i,n,s){return function(){var a=Browser.now(),r=n.apply(t,arguments);return Browser.now()-a>s&&Log.print("static prototype delay: "+e+"."+i+" "+(Browser.now()-a)),r}}(t,e,n,s,i)));var a=t.prototype;for(n in a)null==a["_$get_"+n]&&"_"!=n.charAt(0)&&(s=a[n],"function"!=typeof s||s.__ISCHECK||(s.__ISCHECK=!0,a[n]=function(t,e,i,n,s){return function(){var t=Browser.now(),a=n.apply(this,arguments);return Browser.now()-t>s&&Log.print("prototype delay:"+e+"."+i+" "+(Browser.now()-t)),a}}(t,e,n,s,i),a[n].__ISCHECK=!0))},t._gid=1,t._pi=180/Math.PI,t._pi2=Math.PI/180,t._charSizeTestDiv=null,t._systemClass={Sprite:"laya.display.Sprite",Sprite3D:"laya.d3.display.Sprite3D",Mesh:"laya.d3.display.Mesh",Sky:"laya.d3.display.Sky",div:"laya.html.dom.HTMLDivElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},t._attachAllClassTimeDelay=-1,t}(),LayoutStyle=function(){function t(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN}return __class(t,"laya.ui.LayoutStyle"),__static(t,["EMPTY",function(){return this.EMPTY=new t}]),t}(),Styles=function(){function t(){}return __class(t,"laya.ui.Styles"),t.labelColor="#000000",t.buttonStateNum=3,t.scrollBarMinNum=15,t.scrollBarDelayTime=500,__static(t,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),t}(),UIUtils=function(){function t(){}return __class(t,"laya.ui.UIUtils"),t.fillArray=function(t,e,i){var n=t.concat();if(e)for(var s=e.split(","),a=0,r=Math.min(n.length,s.length);r>a;a++){var h=s[a];n[a]="true"==h?!0:"false"==h?!1:h,null!=i&&(n[a]=i(h))}return n},t.toColor=function(t){for(var e=t.toString("16");e.length<6;)e="0"+e;return"#"+e},t.gray=function(e,i){void 0===i&&(i=!0),i?t.addFilter(e,t.grayFilter):t.clearFilter(e,ColorFilter)},t.addFilter=function(t,e){var i=t.filters||[];i.push(e),t.filters=i},t.clearFilter=function(t,e){var i=t.filters;if(null!=i&&i.length>0){for(var n=i.length-1;n>-1;n--){var s=i[n];Laya.__typeof(s,e)&&i.splice(n,1)}t.filters=i}},__static(t,["grayFilter",function(){return this.grayFilter=new ColorFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])}]),t}(),UIConfig=function(){function t(){}return __class(t,"UIConfig"),t.resPath="",t.uiPath="",t.touchScrollEnable=!0,t.mouseWheelEnable=!0,t.showButtons=!0,t.popupBgColor="#000000",t.popupBgAlpha=.5,t}(),ShaderValue=function(){function t(){}return __class(t,"laya.webgl.shader.ShaderValue"),t}(),FilterActionGL=function(){function t(){}__class(t,"laya.filters.webgl.FilterActionGL");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilterActionGL":!0}),e.setValue=function(t){},e.setValueMix=function(t){},e.apply3d=function(t,e,i,n,s){return null},e.apply=function(t){return null},__getset(0,e,"typeMix",function(){return 0}),t}(),AtlasGrid=function(){function t(t,e,i){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new n,void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._cells=null,this._rowInfo=null,this._init(t,e),this._atlasID=i}var e,i,n;__class(t,"laya.webgl.atlas.AtlasGrid");var s=t.prototype;return s.getAltasID=function(){return this._atlasID},s.setAltasID=function(t){t>=0&&(this._atlasID=t)},s.addTex=function(t,e,i){var n=this._get(e,i);return 0==n.ret?n:(this._fill(n.x,n.y,e,i,t),this._texCount++,n)},s._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},s._init=function(t,n){if(this._width=t,this._height=n,this._release(),0==this._width)return!1;this._cells=new Array(this._width*this._height),this._rowInfo=__newvec(this._height);for(var s=0;s<this._height;s++)this._rowInfo[s]=new i;for(s=0;s<this._width*this._height;s++)this._cells[s]=new e;return this._clear(),!0},s._get=function(t,e){var i=new MergeFillInfo;if(t>=this._failSize.width&&e>=this._failSize.height)return i;for(var n=-1,s=-1,a=this._width,r=this._height,h=this._cells,o=0;r>o;o++)if(!(this._rowInfo[o].spaceCount<t))for(var l=0;a>l;)if(0!=h[o*a+l].type||h[o*a+l].successionWidth<t||h[o*a+l].successionHeight<e)l+=h[o*a+l].successionWidth;else{n=l,s=o;for(var u=0;t>u;u++)if(h[o*a+l+u].successionHeight<e){n=-1;break}if(!(0>n))return i.ret=!0,i.x=n,i.y=s,i;l+=h[o*a+l].successionWidth}return i},s._fill=function(t,e,i,n,s){var a=this._width,r=this._height;this._check(a>=t+i&&r>=e+n);for(var h=e;n+e>h;++h){this._check(this._rowInfo[h].spaceCount>=i),this._rowInfo[h].spaceCount-=i;for(var o=0;i>o;o++)this._check(0==this._cells[t+h*a+o].type),this._cells[t+h*a+o].type=s,this._cells[t+h*a+o].successionWidth=i,this._cells[t+h*a+o].successionHeight=n}if(t>0)for(h=0;n>h;++h){var l=0;for(o=t-1;o>=0&&0==this._cells[(e+h)*a+o].type;--o,++l);for(o=l;o>0;--o)this._cells[(e+h)*a+t-o].successionWidth=o,this._check(o>0)}if(e>0)for(o=t;t+i>o;++o){for(l=0,h=e-1;h>=0&&0==this._cells[o+h*a].type;--h,l++);for(h=l;h>0;--h)this._cells[o+(e-h)*a].successionHeight=h,this._check(h>0)}},s._check=function(t){0==t&&console.log("xtexMerger 错误啦")},s._clear=function(){this._texCount=0;for(var t=0;t<this._height;t++)this._rowInfo[t].spaceCount=this._width;for(var e=0;e<this._height;e++)for(var i=0;i<this._width;i++){var n=this._cells[e*this._width+i];n.type=0,n.successionWidth=this._width-i,n.successionHeight=this._width-e}this._failSize.width=this._width+1,this._failSize.height=this._height+1},t.__init$=function(){e=function(){function t(){this.type=0,this.successionWidth=0,this.successionHeight=0}return __class(t,""),t}(),i=function(){function t(){this.spaceCount=0}return __class(t,""),t}(),n=function(){function t(){this.width=0,this.height=0}return __class(t,""),t}()},t}(),AtlasManager=function(){function t(t,e,i,n){this._maxAtlasNum=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=t,this._height=e,this._gridSize=i,this._maxAtlasNum=n,this._gridNumX=t/i,this._gridNumY=e/i,this._curAtlasIndex=0,this._atlaserArray=[],WebGL.mainContext&&this.Initialize()}__class(t,"laya.webgl.atlas.AtlasManager");var e=t.prototype;return e.Initialize=function(){for(var e=0;e<this._maxAtlasNum;e++)this._atlaserArray.push(new Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,t._sid_)),t._sid_++;return!0},e.setAtlasParam=function(e,i,n,s){if(1==this._setAtlasParam)return t._sid_=0,this._width=e,this._height=i,this._gridSize=n,this._maxAtlasNum=s,this._gridNumX=e/n,this._gridNumY=i/n,this._curAtlasIndex=0,this.freeAll(),this.Initialize(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},e.computeUVinAtlasTexture=function(t,e,i){var n=t,s=e/this._width,a=i/this._height,r=(e+t.bitmap.width)/this._width,h=(i+t.bitmap.height)/this._height,o=t.bitmap.width/this._width,l=t.bitmap.height/this._height,u=n.originalUV;t.uv=[s+u[0]*o,a+u[1]*l,r-(1-u[2])*o,a+u[3]*l,r-(1-u[4])*o,h-(1-u[5])*l,s+u[6]*o,h-(1-u[7])*l]},e.pushData=function(e){var i=e;this._setAtlasParam=!1;for(var n=Math.ceil((e.bitmap.width+2)/this._gridSize),s=Math.ceil((e.bitmap.height+2)/this._gridSize),a=!1,r=0;2>r;r++){for(var h=this._atlaserArray.length,o=0;h>o;++o){var l=(this._curAtlasIndex+o)%h,u=this._atlaserArray[l],c=e.bitmap;if(-1!=u.webGLImages.indexOf(c)){!i.originalUV&&(i.originalUV=e.uv.slice()),a=!0,this._curAtlasIndex=l,this.computeUVinAtlasTexture(e,c.offsetX,c.offsetY),u.addToAtlas(e);break}var _=u.addTex(1,n,s);if(_.ret){var m=_.x*this._gridSize+1,d=_.y*this._gridSize+1;u.addToAtlasTexture(c,m,d),!i.originalUV&&(i.originalUV=e.uv.slice()),a=!0,this._curAtlasIndex=l,this.computeUVinAtlasTexture(e,c.offsetX,c.offsetY),u.addToAtlas(e);break}}if(a)break;this._atlaserArray.push(new Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,t._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return a||console.log(">>>AtlasManager pushData error"),a},e.addToAtlas=function(t){laya.webgl.atlas.AtlasManager.instance.pushData(t)},e.garbageCollection=function(){if(this._needGC===!0){for(var t=this._atlaserArray.length-this._maxAtlasNum,e=0;t>e;e++)this._atlaserArray[e].destroy();this._atlaserArray.splice(0,t),this._needGC=!1}return!0},e.freeAll=function(){for(var t=0,e=this._atlaserArray.length;e>t;t++)this._atlaserArray[t].destroy();this._atlaserArray.length=0},__getset(1,t,"instance",function(){return t.__S_Instance__||(t.__S_Instance__=new t(t.atlasTextureWidth,t.atlasTextureHeight,t.gridSize,t.maxTextureCount)),t.__S_Instance__}),__getset(1,t,"atlasLimitWidth",function(){return t._atlasLimitWidth},function(e){t._atlasLimitWidth=e,Config.atlasLimitWidth=e}),__getset(1,t,"enabled",function(){return t._enabled}),__getset(1,t,"atlasLimitHeight",function(){return t._atlasLimitHeight},function(e){t._atlasLimitHeight=e,Config.atlasLimitHeight=e}),t.enable=function(){t._enabled=!0,Config.atlasEnable=!0},t.__init__=function(){t.atlasLimitWidth=512,t.atlasLimitHeight=512},t._enabled=!1,t._atlasLimitWidth=0,t._atlasLimitHeight=0,t.atlasTextureWidth=2048,t.atlasTextureHeight=2048,t.gridSize=16,t.maxTextureCount=8,t.BOARDER_TYPE_NO=0,t.BOARDER_TYPE_RIGHT=1,t.BOARDER_TYPE_LEFT=2,t.BOARDER_TYPE_BOTTOM=4,t.BOARDER_TYPE_TOP=8,t.BOARDER_TYPE_ALL=15,t._sid_=0,t.__S_Instance__=null,t}(),MergeFillInfo=function(){function t(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return __class(t,"laya.webgl.atlas.MergeFillInfo"),t}(),BlendMode=function(){function t(){}return __class(t,"laya.webgl.canvas.BlendMode"),t._init_=function(e){t.fns=[t.BlendNormal,t.BlendAdd,t.BlendMultiply,t.BlendScreen,t.BlendOverlay,t.BlendLight],t.targetFns=[t.BlendNormalTarget,t.BlendAddTarget,t.BlendMultiplyTarget,t.BlendScreenTarget,t.BlendOverlayTarget,t.BlendLightTarget]},t.BlendNormal=function(t){t.blendFunc(770,771)},t.BlendAdd=function(t){t.blendFunc(770,772)},t.BlendMultiply=function(t){t.blendFunc(774,771)},t.BlendScreen=function(t){t.blendFunc(770,1)},t.BlendOverlay=function(t){t.blendFunc(1,769)},t.BlendLight=function(t){t.blendFunc(770,1)},t.BlendNormalTarget=function(t){t.blendFuncSeparate(770,771,1,771)},t.BlendAddTarget=function(t){t.blendFunc(770,772)},t.BlendMultiplyTarget=function(t){t.blendFunc(774,771)},t.BlendScreenTarget=function(t){t.blendFunc(770,1)},t.BlendOverlayTarget=function(t){t.blendFunc(1,769)},t.BlendLightTarget=function(t){t.blendFunc(770,1)},t.NAMES=["normal","add","multiply","screen","overlay","light"],t.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5},t.NORMAL="normal",t.ADD="add",t.MULTIPLY="multiply",t.SCREEN="screen",t.LIGHT="light",t.OVERLAY="overlay",t.fns=[],t.targetFns=[],t}(),DrawStyle=function(){function t(t){this._color=Color.create("black"),this.setValue(t)}__class(t,"laya.webgl.canvas.DrawStyle");var e=t.prototype;return e.setValue=function(t){if(t){if("string"==typeof t)return void(this._color=Color.create(t));if(t instanceof laya.utils.Color)return void(this._color=t)}},e.reset=function(){this._color=Color.create("black")},e.equal=function(t){return"string"==typeof t?this._color.strColor===t:!1},e.toColorStr=function(){return this._color.strColor},t.DEFAULT=new t("#000000"),t}(),Path=function(){function t(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.geomatrys=[];WebGL.mainContext;this.ib=new Buffer(34963,"INDEX",null,35044),this.vb=new Buffer(34962)}__class(t,"laya.webgl.canvas.Path");var e=t.prototype;return e.clear=function(){this._rect=null},e.rect2=function(t,e,i,n,s,a,r){void 0===a&&(a=2),void 0===r&&(r=0),this.geomatrys.push(this._curGeomatry=new Rect(t,e,i,n,s,a,r))},e.rect=function(t,e,i,n){this._rect=new Rectangle(t,e,i,n),this.dirty=!0},e.strokeRect=function(t,e,i,n){this._rect=new Rectangle(t,e,i,n)},e.circle=function(t,e,i,n,s,a,r){this.geomatrys.push(this._curGeomatry=new Circle(t,e,i,n,s,a,r))},e.fan=function(t,e,i,n,s,a,r,h){var o;this.geomatrys.push(this._curGeomatry=o=new Fan(t,e,i,n,s,a,r,h)),a||(o.fill=!1)},e.ellipse=function(t,e,i,n,s,a,r){this.geomatrys.push(this._curGeomatry=new Ellipse(t,e,i,n,s,a,r))},e.polygon=function(t,e,i,n,s,a,r){var h;this.geomatrys.push(this._curGeomatry=h=new Polygon(t,e,i,n,s,a,r)),s||(h.fill=!1),void 0==r&&(h.borderWidth=0)},e.drawPath=function(t,e,i,n,s){this.geomatrys.push(this._curGeomatry=new Line(t,e,i,n,s))},e.update=function(){var t=this.ib.length,e=this.geomatrys.length;this.offset=t;for(var i=this.geoStart;e>i;i++)this.geomatrys[i].getData(this.ib,this.vb,this.vb.length/20);this.geoStart=e,this.count=(this.ib.length-t)/2},e.sector=function(t,e,i,n){},e.roundRect=function(t,e,i,n,s,a){},e.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},t}(),SaveBase=function(){function t(){}__class(t,"laya.webgl.canvas.save.SaveBase");var e=t.prototype;return Laya.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){this._dataObj[this._valueName]=this._value,t._cache[t._cache._length++]=this,this._newSubmit&&(e._curSubmit=Submit.RENDERBASE)},t._createArray=function(){var t=[];return t._length=0,t},t._init=function(){var e=t._namemap={};return e[1]="ALPHA",e[2]="fillStyle",e[8]="font",e[256]="lineWidth",e[512]="strokeStyle",e[8192]="_mergeID",e[1024]=e[2048]=e[4096]=[],e[16384]="textBaseline",e[32768]="textAlign",e[65536]="_nBlendType",e[524288]="shader",e[1048576]="filters",e},t.save=function(e,i,n,s){if((e._saveMark._saveuse&i)!==i){e._saveMark._saveuse|=i;var a=t._cache,r=a._length>0?a[--a._length]:new t;r._value=n[r._valueName=t._namemap[i]],r._dataObj=n,r._newSubmit=s;var h=e._save;h[h._length++]=r}},t._cache=laya.webgl.canvas.save.SaveBase._createArray(),t._namemap=t._init(),t}(),SaveClipRect=function(){function t(){this._clipRect=new Rectangle}__class(t,"laya.webgl.canvas.save.SaveClipRect");var e=t.prototype;return Laya.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._clipRect=this._clipSaveRect,t._cache[t._cache._length++]=this,this._submitScissor.submitLength=e._submits._length-this._submitScissor.submitIndex,e._curSubmit=Submit.RENDERBASE},t.save=function(e,i){if(131072!=(131072&e._saveMark._saveuse)){e._saveMark._saveuse|=131072;var n=t._cache,s=n._length>0?n[--n._length]:new t;s._clipSaveRect=e._clipRect,e._clipRect=s._clipRect.copyFrom(e._clipRect),s._submitScissor=i;var a=e._save;a[a._length++]=s}},t._cache=SaveBase._createArray(),t}(),SaveMark=function(){function t(){this._saveuse=0}__class(t,"laya.webgl.canvas.save.SaveMark");var e=t.prototype;return Laya.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!0},e.restore=function(e){e._saveMark=this._preSaveMark,t._no[t._no._length++]=this},t.Create=function(e){var i=t._no,n=i._length>0?i[--i._length]:new t;return n._saveuse=0,n._preSaveMark=e._saveMark,e._saveMark=n,n},t._no=SaveBase._createArray(),t}(),SaveTransform=function(){function t(){this._matrix=new Matrix}__class(t,"laya.webgl.canvas.save.SaveTransform");var e=t.prototype;return Laya.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._curMat=this._savematrix,t._no[t._no._length++]=this},t.save=function(e){var i=e._saveMark;if(2048!==(2048&i._saveuse)){i._saveuse|=2048;var n=t._no,s=n._length>0?n[--n._length]:new t;s._savematrix=e._curMat,e._curMat=e._curMat.copy(s._matrix);var a=e._save;a[a._length++]=s}},t._no=SaveBase._createArray(),t}(),SaveTranslate=function(){function t(){}__class(t,"laya.webgl.canvas.save.SaveTranslate");var e=t.prototype;return Laya.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._curMat;e._x=this._x,e._y=this._y,t._no[t._no._length++]=this},t.save=function(e){var i=t._no,n=i._length>0?i[--i._length]:new t;n._x=e._x,n._y=e._y;var s=e._save;s[s._length++]=n},t._no=SaveBase._createArray(),t}(),RenderTargetMAX=function(){function t(){this.targets=null,this.oneTargets=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._clipRect=new Rectangle}var e;__class(t,"laya.webgl.resource.RenderTargetMAX");var i=t.prototype;return i.size=function(t,i){(this._width!==t||this._height!==i)&&(this.repaint=!0,this._width=t,this._height=i,this.oneTargets?this.oneTargets.target.size(t,i):this.oneTargets=new e(t,i))},i._flushToTarget=function(e,i){var n=RenderState2D.worldScissorTest,s=RenderState2D.worldClipRect;RenderState2D.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,RenderState2D.worldScissorTest=!1,WebGL.mainContext.disable(3089);var a=RenderState2D.worldAlpha,r=RenderState2D.worldMatrix4,h=RenderState2D.worldMatrix,o=RenderState2D.worldFilters,l=RenderState2D.worldShaderDefines;if(RenderState2D.worldMatrix=t._matrixDefault,RenderState2D.worldMatrix4=RenderState2D.TEMPMAT4_ARRAY,RenderState2D.worldAlpha=1,RenderState2D.worldFilters=null,RenderState2D.worldShaderDefines=null,Shader.activeShader=null,i.start(),Config.showCanvasMark?i.clear(0,1,0,.3):i.clear(0,0,0,0),e.flush(),i.end(),Shader.activeShader=null,RenderState2D.worldAlpha=a,RenderState2D.worldMatrix4=r,RenderState2D.worldMatrix=h,RenderState2D.worldFilters=o,RenderState2D.worldShaderDefines=l,RenderState2D.worldScissorTest=n){var u=RenderState2D.height-s.y-s.height;WebGL.mainContext.scissor(s.x,u,s.width,s.height),WebGL.mainContext.enable(3089)}RenderState2D.worldClipRect=s},i.flush=function(t){this.repaint&&(this._flushToTarget(t,this.oneTargets.target),this.repaint=!1)},i.drawTo=function(t,e,i,n,s){t.drawTexture(this.oneTargets.target.getTexture(),e,i,n,s,0,0)},i.destroy=function(){this.oneTargets&&(this.oneTargets.target.destroy(),this.oneTargets.target=null,this.oneTargets=null)},__static(t,["_matrixDefault",function(){return this._matrixDefault=new Matrix}]),t.__init$=function(){e=function(){function t(t,e){this.width=t,this.height=e,this.target=RenderTarget2D.create(t,e)}return __class(t,""),t}()},t}(),Shader2D=function(){function t(){this.ALPHA=1,this.shaderType=0,this.glTexture=new WebGLImage,this.defines=new ShaderDefines2D}return __class(t,"laya.webgl.shader.d2.Shader2D"),t.__init__=function(){Shader.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform float u_colorMatrix[20];\n"),Shader.addInclude("parts/ColorFilter_ps_logic.glsl","vec4 rgba=gl_FragColor;\ngl_FragColor.r =rgba.r*u_colorMatrix[0]+rgba.g*u_colorMatrix[1]+rgba.b*u_colorMatrix[2]+rgba.a*u_colorMatrix[3]+u_colorMatrix[4];\ngl_FragColor.g =rgba.r*u_colorMatrix[5]+rgba.g*u_colorMatrix[6]+rgba.b*u_colorMatrix[7]+rgba.a*u_colorMatrix[8]+u_colorMatrix[9];\ngl_FragColor.b =rgba.r*u_colorMatrix[10]+rgba.g*u_colorMatrix[11]+rgba.b*u_colorMatrix[12]+rgba.a*u_colorMatrix[13]+u_colorMatrix[14];\ngl_FragColor.a =rgba.r*u_colorMatrix[15]+rgba.g*u_colorMatrix[16]+rgba.b*u_colorMatrix[17]+rgba.a*u_colorMatrix[18]+u_colorMatrix[19];"),Shader.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),Shader.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 5.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = gl_FragColor;\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nvec4 final_color = vec4(0.0,0.0,0.0,0.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n	for(float j = 0.0;j<c_IterationTime; ++j){\n		vec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n		vec4Color += texture2D(texture, v_texcoord + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n	}\n}\ngl_FragColor = vec4Color.a*u_color*u_strength;"),Shader.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor=vec4(0.0);\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 0])*0.004431848411938341;\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 1])*0.05399096651318985;\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 2])*0.2419707245191454;\ngl_FragColor += texture2D(texture, v_texcoord        )*0.3989422804014327;\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 3])*0.2419707245191454;\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 4])*0.05399096651318985;\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 5])*0.004431848411938341;"),Shader.addInclude("parts/BlurFilter_ps_uniform.glsl","varying vec2 vBlurTexCoords[6];"),Shader.addInclude("parts/BlurFilter_vs_uniform.glsl","uniform float strength;\nvarying vec2 vBlurTexCoords[6];"),Shader.addInclude("parts/BlurFilter_vs_logic.glsl","\nvBlurTexCoords[ 0] = v_texcoord + vec2(-0.012 * strength, 0.0);\nvBlurTexCoords[ 1] = v_texcoord + vec2(-0.008 * strength, 0.0);\nvBlurTexCoords[ 2] = v_texcoord + vec2(-0.004 * strength, 0.0);\nvBlurTexCoords[ 3] = v_texcoord + vec2( 0.004 * strength, 0.0);\nvBlurTexCoords[ 4] = v_texcoord + vec2( 0.008 * strength, 0.0);\nvBlurTexCoords[ 5] = v_texcoord + vec2( 0.012 * strength, 0.0);"),Shader.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),Shader.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);");var t,e;t='attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\nuniform mat4 mmat;\nvarying vec2 v_texcoord;\n\n#include?BLUR_FILTER  "parts/BlurFilter_vs_uniform.glsl";\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_texcoord = texcoord;\n  #include?BLUR_FILTER  "parts/BlurFilter_vs_logic.glsl";\n}',e='precision mediump float;\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',
Shader.preCompile(0,1,t,e,null),t="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",e='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n	vec4 a = vec4(color.r, color.g, color.b, color.a);\n	a.w = alpha;\n	gl_FragColor = a;\n	#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',Shader.preCompile(0,2,t,e,null),t="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 pos=mmat*u_mmat2*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",e="precision mediump float;\n//precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n	//vec4 a=vec4(color.r, color.g, color.b, 1);\n	//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n}",Shader.preCompile(0,4,t,e,null)},t}(),ShaderDefines=function(){function t(t,e,i){this._value=0,this._name2int=t,this._int2name=e,this._int2nameMap=i}__class(t,"laya.webgl.shader.ShaderDefines");var e=t.prototype;return e.add=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value|=t,this._value},e.addInt=function(t){return this._value|=t,this._value},e.remove=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value&=~t,this._value},e.isDefine=function(t){return(this._value&t)===t},e.getValue=function(){return this._value},e.setValue=function(t){this._value=t},e.toNameDic=function(){var e=this._int2nameMap[this._value];return e?e:t._toText(this._value,this._int2name,this._int2nameMap)},t._reg=function(t,e,i,n){i[t]=e,n[e]=t},t._toText=function(t,e,i){var n=i[t];if(n)return n;for(var s={},a=1,r=0;32>r&&(a=1<<r,!(a>t));r++)if(t&a){var h=e[a];h&&(s[h]="")}return i[t]=s,s},t._toInt=function(t,e){for(var i=t.split("."),n=0,s=0,a=i.length;a>s;s++){var r=e[i[s]];if(!r)throw new Error("Defines to int err:"+t+"/"+i[s]);n|=r}return n},t}(),BasePoly=function(){function t(t,e,i,n,s,a,r,h,o){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===o&&(o=0),this.x=t,this.y=e,this.width=i,this.height=n,this.edges=s,this.color=a,this.borderWidth=r,this.borderColor=h}__class(t,"laya.webgl.shapes.BasePoly");var e=t.prototype;return Laya.imps(e,{"laya.webgl.shapes.IShape":!0}),e.getData=function(t,e,i){var n=[],s=[];if(this.circle(s,n,i),this.fill)this.borderWidth>0&&this.createLoopLine(s,n,this.borderWidth,i+s.length/5),t.append(new Uint16Array(n)),e.append(new Float32Array(s));else{var a=[],r=[];this.createLoopLine(s,n,this.borderWidth,i,a,r),t.append(new Uint16Array(r)),e.append(new Float32Array(a))}},e.circle=function(t,e,i){var n=this.x,s=this.y,a=this.edges,r=2*Math.PI/a,h=this.width,o=this.height,l=this.color,u=(l>>16&255)/255,c=(l>>8&255)/255,_=(255&l)/255;t.push(n,s,u,c,_);for(var m=0;a>m;m++)t.push(n+Math.sin(r*m)*h,s+Math.cos(r*m)*o),t.push(u,c,_);for(m=0;a>m;m++)e.push(i,i+m+1,i+m+2);e[e.length-1]=i+1},e.sector=function(t,e,i){var n=this.x,s=this.y,a=this.edges,r=(this.r1-this.r0)/a,h=this.width,o=this.height,l=this.color,u=(l>>16&255)/255,c=(l>>8&255)/255,_=(255&l)/255;t.push(n,s,u,c,_);for(var m=0;a+1>m;m++)t.push(n+Math.sin(r*m+this.r0)*h,s+Math.cos(r*m+this.r0)*o),t.push(u,c,_);for(m=0;a>m;m++)e.push(i,i+m+1,i+m+2)},e.createFanLine=function(t,e,i,n,s,a){var r=t.concat(),h=s?s:t,o=this.borderColor,l=(o>>16&255)/255,u=(o>>8&255)/255,c=(255&o)/255,_=[r[0],r[1]],m=[r[r.length-5],r[r.length-4]],d=m[0]+.5*(_[0]-m[0]),p=m[1]+.5*(_[1]-m[1]);r.unshift(d,p,0,0,0),r.push(d,p,0,0,0);var f,g,S,b,y,v,I,x,D,w,T,C,k,L,M,A,G,O,B,z,P,N=r.length/5,R=n,E=i/2;S=r[0],b=r[1],y=r[5],v=r[6],D=-(b-v),w=S-y,P=Math.sqrt(D*D+w*w),D=D/P*E,w=w/P*E,h.push(S-D,b-w,l,u,c,S+D,b+w,l,u,c);for(var H=1;N-1>H;H++)S=r[5*(H-1)],b=r[5*(H-1)+1],y=r[5*H],v=r[5*H+1],I=r[5*(H+1)],x=r[5*(H+1)+1],D=-(b-v),w=S-y,P=Math.sqrt(D*D+w*w),D=D/P*E,w=w/P*E,T=-(v-x),C=y-I,P=Math.sqrt(T*T+C*C),T=T/P*E,C=C/P*E,k=-w+b-(-w+v),L=-D+y-(-D+S),M=(-D+S)*(-w+v)-(-D+y)*(-w+b),A=-C+x-(-C+v),G=-T+y-(-T+I),O=(-T+I)*(-C+v)-(-T+y)*(-C+x),B=k*G-A*L,Math.abs(B)<.1?(B+=10.1,h.push(y-D,v-w,l,u,c,y+D,v+w,l,u,c)):(f=(L*O-G*M)/B,g=(A*M-k*O)/B,z=(f-y)*(f-y)+(g-v)+(g-v),h.push(f,g,l,u,c,y-(f-y),v-(g-v),l,u,c));e=a?a:e;var U=this.edges+3;for(H=1;U>H;H++)e.push(R+2*(H-1),R+2*(H-1)+1,R+2*H+1,R+2*H+1,R+2*H,R+2*(H-1));return e.push(R+2*(H-1),R+2*(H-1)+1,R+1,R+1,R,R+2*(H-1)),h},e.createLine2=function(t,e,i,n,s,a){var r,h,o,l,u,c,_,m,d,p,f,g,S,b,y,v,I,x,D,w,T,C=t.concat(),k=s,L=this.borderColor,M=(L>>16&255)/255,A=(L>>8&255)/255,G=(255&L)/255,O=C.length/2,B=n,z=i/2;o=C[0],l=C[1],u=C[2],c=C[3],d=-(l-c),p=o-u,T=Math.sqrt(d*d+p*p),d=d/T*z,p=p/T*z,k.push(o-d+this.x,l-p+this.y,M,A,G,o+d+this.x,l+p+this.y,M,A,G);for(var P=1;O-1>P;P++)o=C[2*(P-1)],l=C[2*(P-1)+1],u=C[2*P],c=C[2*P+1],_=C[2*(P+1)],m=C[2*(P+1)+1],d=-(l-c),p=o-u,T=Math.sqrt(d*d+p*p),d=d/T*z,p=p/T*z,f=-(c-m),g=u-_,T=Math.sqrt(f*f+g*g),f=f/T*z,g=g/T*z,S=-p+l-(-p+c),b=-d+u-(-d+o),y=(-d+o)*(-p+c)-(-d+u)*(-p+l),v=-g+m-(-g+c),I=-f+u-(-f+_),x=(-f+_)*(-g+c)-(-f+u)*(-g+m),D=S*I-v*b,Math.abs(D)<.1?(D+=10.1,k.push(u-d+this.x,c-p+this.y,M,A,G,u+d+this.x,c+p+this.y,M,A,G)):(r=(b*x-I*y)/D,h=(v*y-S*x)/D,w=(r-u)*(r-u)+(h-c)+(h-c),k.push(r+this.x,h+this.y,M,A,G,u-(r-u)+this.x,c-(h-c)+this.y,M,A,G));o=C[C.length-4],l=C[C.length-3],u=C[C.length-2],c=C[C.length-1],d=-(l-c),p=o-u,T=Math.sqrt(d*d+p*p),d=d/T*z,p=p/T*z,k.push(u-d+this.x,c-p+this.y,M,A,G,u+d+this.x,c+p+this.y,M,A,G);var N=a;for(P=1;N>P;P++)e.push(B+2*(P-1),B+2*(P-1)+1,B+2*P+1,B+2*P+1,B+2*P,B+2*(P-1));return k},e.createLine=function(t,e,i,n){var s=t.concat(),a=t,r=this.borderColor,h=(r>>16&255)/255,o=(r>>8&255)/255,l=(255&r)/255;s.splice(0,5);var u,c,_,m,d,p,f,g,S,b,y,v,I,x,D,w,T,C,k,L,M,A=s.length/5,G=n,O=i/2;_=s[0],m=s[1],d=s[5],p=s[6],S=-(m-p),b=_-d,M=Math.sqrt(S*S+b*b),S=S/M*O,b=b/M*O,a.push(_-S,m-b,h,o,l,_+S,m+b,h,o,l);for(var B=1;A-1>B;B++)_=s[5*(B-1)],m=s[5*(B-1)+1],d=s[5*B],p=s[5*B+1],f=s[5*(B+1)],g=s[5*(B+1)+1],S=-(m-p),b=_-d,M=Math.sqrt(S*S+b*b),S=S/M*O,b=b/M*O,y=-(p-g),v=d-f,M=Math.sqrt(y*y+v*v),y=y/M*O,v=v/M*O,I=-b+m-(-b+p),x=-S+d-(-S+_),D=(-S+_)*(-b+p)-(-S+d)*(-b+m),w=-v+g-(-v+p),T=-y+d-(-y+f),C=(-y+f)*(-v+p)-(-y+d)*(-v+g),k=I*T-w*x,Math.abs(k)<.1?(k+=10.1,a.push(d-S,p-b,h,o,l,d+S,p+b,h,o,l)):(u=(x*C-T*D)/k,c=(w*D-I*C)/k,L=(u-d)*(u-d)+(c-p)+(c-p),a.push(u,c,h,o,l,d-(u-d),p-(c-p),h,o,l));_=s[s.length-10],m=s[s.length-9],d=s[s.length-5],p=s[s.length-4],S=-(m-p),b=_-d,M=Math.sqrt(S*S+b*b),S=S/M*O,b=b/M*O,a.push(d-S,p-b,h,o,l,d+S,p+b,h,o,l);var z=this.edges+1;for(B=1;z>B;B++)e.push(G+2*(B-1),G+2*(B-1)+1,G+2*B+1,G+2*B+1,G+2*B,G+2*(B-1));return a},e.createLoopLine=function(t,e,i,n,s,a){var r=t.concat(),h=s?s:t,o=this.borderColor,l=(o>>16&255)/255,u=(o>>8&255)/255,c=(255&o)/255;r.splice(0,5);var _=[r[0],r[1]],m=[r[r.length-5],r[r.length-4]],d=m[0]+.5*(_[0]-m[0]),p=m[1]+.5*(_[1]-m[1]);r.unshift(d,p,0,0,0),r.push(d,p,0,0,0);var f,g,S,b,y,v,I,x,D,w,T,C,k,L,M,A,G,O,B,z,P,N=r.length/5,R=n,E=i/2;S=r[0],b=r[1],y=r[5],v=r[6],D=-(b-v),w=S-y,P=Math.sqrt(D*D+w*w),D=D/P*E,w=w/P*E,h.push(S-D,b-w,l,u,c,S+D,b+w,l,u,c);for(var H=1;N-1>H;H++)S=r[5*(H-1)],b=r[5*(H-1)+1],y=r[5*H],v=r[5*H+1],I=r[5*(H+1)],x=r[5*(H+1)+1],D=-(b-v),w=S-y,P=Math.sqrt(D*D+w*w),D=D/P*E,w=w/P*E,T=-(v-x),C=y-I,P=Math.sqrt(T*T+C*C),T=T/P*E,C=C/P*E,k=-w+b-(-w+v),L=-D+y-(-D+S),M=(-D+S)*(-w+v)-(-D+y)*(-w+b),A=-C+x-(-C+v),G=-T+y-(-T+I),O=(-T+I)*(-C+v)-(-T+y)*(-C+x),B=k*G-A*L,Math.abs(B)<.1?(B+=10.1,h.push(y-D,v-w,l,u,c,y+D,v+w,l,u,c)):(f=(L*O-G*M)/B,g=(A*M-k*O)/B,z=(f-y)*(f-y)+(g-v)+(g-v),h.push(f,g,l,u,c,y-(f-y),v-(g-v),l,u,c));a&&(e=a);var U=this.edges+1;for(H=1;U>H;H++)e.push(R+2*(H-1),R+2*(H-1)+1,R+2*H+1,R+2*H+1,R+2*H,R+2*(H-1));return e.push(R+2*(H-1),R+2*(H-1)+1,R+1,R+1,R,R+2*(H-1)),h},t}(),Submit=function(){function t(t){void 0===t&&(t=1),this._renderType=t}__class(t,"laya.webgl.submit.Submit");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.releaseRender=function(){var e=t._cache;e[e._length++]=this,this.shaderValue.release(),this._submitID=-1,this._vb=null},e.getRenderType=function(){return this._renderType},e.renderSubmit=function(){if(0===this._numEle)return 1;if(this.shaderValue.textureHost){if(!this.shaderValue.textureHost.bitmap||!this.shaderValue.textureHost.source)return 1;this.shaderValue.texture=this.shaderValue.textureHost.source}this._ib.upload_bind(),this._vb.upload_bind(),this.shaderValue.upload();var e=WebGL.mainContext;return t.activeBlendFunction!==this._blendFn&&(e.enable(3042),this._blendFn(e),t.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,e.drawElements(4,this._numEle,5123,this._startIdx),1},t.__init__=function(){var e=t.RENDERBASE=new t(-1);e.shaderValue=new Value2D(0,0),e.shaderValue.ALPHA=-1234},t.create=function(e,i,n,s,a,r,h){var o=t._cache._length?t._cache[--t._cache._length]:new t;null==a&&(a=o._selfVb||(o._selfVb=new Buffer(34962)),a.clear(),r=0),o._ib=s,o._vb=a,o._submitID=i,o._mergID=n,o._startIdx=r*CONST3D2D.BYTES_PIDX,o._numEle=0;var l=e._nBlendType;o._blendFn=e._targets?BlendMode.targetFns[l]:BlendMode.fns[l],o.shaderValue=h,o.shaderValue.setValue(e._shader2D);var u=e._shader2D.filters;return u&&o.shaderValue.setFilters(u),o},t.createShape=function(e,i,n,s,a,r){var h=t._cache._length?t._cache[--t._cache._length]:new t;h._ib=i,h._vb=n,h._numEle=s,h._startIdx=a,h.shaderValue=r,h.shaderValue.setValue(e._shader2D);var o=e._nBlendType;return h._blendFn=e._targets?BlendMode.targetFns[o]:BlendMode.fns[o],h},t.TYPE_2D=1,t.TYPE_CANVAS=3,t.TYPE_CMDSETRT=4,t.TYPE_CUSTOM=5,t.TYPE_BLURRT=6,t.TYPE_CMDDESTORYPRERT=7,t.TYPE_DISABLESTENCIL=8,t.TYPE_OTHERIBVB=9,t.TYPE_PRIMITIVE=10,t.TYPE_RT=11,t.TYPE_BLUR_RT=12,t.TYPE_TARGET=13,t.TYPE_CHANGE_VALUE=14,t.TYPE_SHAPE=15,t.RENDERBASE=null,t.activeBlendFunction=null,t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),SubmitCMD=function(){function t(){this.fun=null,this.args=null}__class(t,"laya.webgl.submit.SubmitCMD");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){return this.fun.apply(null,this.args),1},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this},t.create=function(e,i){var n=t._cache._length?t._cache[--t._cache._length]:new t;return n.fun=i,n.args=e,n},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),SubmitCMDScope=function(){function t(){this.variables={}}__class(t,"laya.webgl.submit.SubmitCMDScope");var e=t.prototype;return e.getValue=function(t){return this.variables[t]},e.addValue=function(t,e){return this.variables[t]=e},e.setValue=function(t,e){return this.variables.hasOwnProperty(t)?this.variables[t]=e:null},e.clear=function(){for(var t in this.variables)delete this.variables[t]},e.recycle=function(){this.clear(),t.POOL.push(this)},t.create=function(){var e=t.POOL.pop();return e||(e=new t),e},t.POOL=[],t}(),SubmitOtherIBVB=function(){function t(){this.offset=0,this.startIndex=0,this._mat=Matrix.create()}__class(t,"laya.webgl.submit.SubmitOtherIBVB");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.releaseRender=function(){var e=t._cache;e[e._length++]=this},e.getRenderType=function(){return 9},e.renderSubmit=function(){if(this._shaderValue.textureHost){var e=this._shaderValue.textureHost.source;if(!e)return 1;this._shaderValue.texture=e}this._ib.upload_bind(),this._vb.upload_bind();var i=RenderState2D.worldMatrix4,n=Matrix.TEMP;Matrix.mulPre(this._mat,i[0],i[1],i[4],i[5],i[12],i[13],n);var s=RenderState2D.worldMatrix4=t.tempMatrix4;s[0]=n.a,s[1]=n.b,s[4]=n.c,s[5]=n.d,s[12]=n.tx,s[13]=n.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var a=WebGL.mainContext;return Submit.activeBlendFunction!==this._blendFn&&(a.enable(3042),this._blendFn(a),Submit.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,a.drawElements(4,this._numEle,5123,this.startIndex),RenderState2D.worldMatrix4=i,Shader.activeShader=null,1},t.create=function(e,i,n,s,a,r,h,o){var l=t._cache._length?t._cache[--t._cache._length]:new t;l._ib=n,l._vb=i,l._numEle=s,l._shader=a,l._shaderValue=r;var u=e._nBlendType;return l._blendFn=e._targets?BlendMode.targetFns[u]:BlendMode.fns[u],l.startIndex=h,l.offset=o,l},t._cache=(t._cache=[],t._cache._length=0,t._cache),t.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t}(),SubmitScissor=function(){function t(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new Rectangle,this.screenRect=new Rectangle}__class(t,"laya.webgl.submit.SubmitScissor");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e._scissor=function(t,e,i,n){var s=RenderState2D.worldMatrix4,a=s[0],r=s[5],h=s[12],o=s[13];if(t=t*a+h,e=e*r+o,i*=a,n*=r,1>i||1>n)return!1;var l=t+i,u=e+n;0>t&&(t=0,i=l-t),0>e&&(e=0,n=u-e);var c=RenderState2D.worldClipRect;if(t=Math.max(t,c.x),e=Math.max(e,c.y),i=Math.min(l,c.right)-t,n=Math.min(u,c.bottom)-e,1>i||1>n)return!1;var _=RenderState2D.worldScissorTest;return this.screenRect.copyFrom(c),c.x=t,c.y=e,c.width=i,c.height=n,RenderState2D.worldScissorTest=!0,e=RenderState2D.height-e-n,WebGL.mainContext.scissor(t,e,i,n),WebGL.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),_?(e=RenderState2D.height-this.screenRect.y-this.screenRect.height,WebGL.mainContext.scissor(this.screenRect.x,e,this.screenRect.width,this.screenRect.height),WebGL.mainContext.enable(3089)):(WebGL.mainContext.disable(3089),RenderState2D.worldScissorTest=!1),c.copyFrom(this.screenRect),!0},e._scissorWithTagart=function(t,e,i,n){if(1>i||1>n)return!1;var s=t+i,a=e+n;0>t&&(t=0,i=s-t),0>e&&(e=0,n=a-e);var r=RenderState2D.worldClipRect;if(t=Math.max(t,r.x),e=Math.max(e,r.y),i=Math.min(s,r.right)-t,n=Math.min(a,r.bottom)-e,1>i||1>n)return!1;var h=RenderState2D.worldScissorTest;return this.screenRect.copyFrom(r),RenderState2D.worldScissorTest=!0,r.x=t,r.y=e,r.width=i,r.height=n,e=RenderState2D.height-e-n,WebGL.mainContext.scissor(t,e,i,n),WebGL.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),h?(e=RenderState2D.height-this.screenRect.y-this.screenRect.height,WebGL.mainContext.scissor(this.screenRect.x,e,this.screenRect.width,this.screenRect.height),WebGL.mainContext.enable(3089)):(WebGL.mainContext.disable(3089),RenderState2D.worldScissorTest=!1),r.copyFrom(this.screenRect),!0},e.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1?this.submitLength+1:(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height),this.submitLength+1)},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this,this.context=null},t.create=function(e){var i=t._cache._length?t._cache[--t._cache._length]:new t;return i.context=e,i},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),SubmitStencil=function(){function t(){this.step=0,this.level=0}__class(t,"laya.webgl.submit.SubmitStencil");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3()}return 1},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this},e.do1=function(){var t=WebGL.mainContext;t.enable(2960),t.clear(1024),t.colorMask(!1,!1,!1,!1),t.stencilFunc(514,this.level,255),t.stencilOp(7680,7680,7682)},e.do2=function(){var t=WebGL.mainContext;t.stencilFunc(514,this.level+1,255),t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680)},e.do3=function(){var t=WebGL.mainContext;t.clear(1024),t.disable(2960)},t.create=function(e){var i=t._cache._length?t._cache[--t._cache._length]:new t;return i.step=e,i},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),SubmitTarget=function(){function t(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}__class(t,"laya.webgl.submit.SubmitTarget");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){this._ib.upload_bind(),this._vb.upload_bind();var t=this.scope.getValue(this.proName);return this.shaderValue.texture=t.source,this.shaderValue.upload(),this.blend(),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,WebGL.mainContext.drawElements(4,this._numEle,5123,this._startIdx),1},e.blend=function(){if(t.activeBlendType!==this.blendType){var e=WebGL.mainContext;e.enable(3042),BlendMode.fns[this.blendType](e),t.activeBlendType=this.blendType}},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this},t.create=function(e,i,n,s,a,r){var h=t._cache._length?t._cache[--t._cache._length]:new t;return h._ib=i,h._vb=n,h.proName=r,h._startIdx=s*CONST3D2D.BYTES_PIDX,h._numEle=0,h.blendType=e._nBlendType,h.shaderValue=a,h.shaderValue.setValue(e._shader2D),h},t.activeBlendType=-1,t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),CharValue=function(){function t(){}__class(t,"laya.webgl.text.CharValue");var e=t.prototype;return e.value=function(e,i,n,s,a,r){this.font=e,this.fillColor=i,this.borderColor=n,this.lineWidth=s,this.scaleX=a,this.scaleY=r;var h=[e,a,r,s,i,n].join("`");return this.txtID=t._keymap[h],this.txtID||(this.txtID=1e-7*++t._keymapCount,t._keymap[h]=this.txtID),this},t._keymap={},t._keymapCount=1,t}(),DrawText=function(){function t(){}return __class(t,"laya.webgl.text.DrawText"),t.getChar=function(e,i,n){return t._wordsMsg[i]=DrawTextChar.createOneChar(e,n)},t.drawText=function(e,i,n,s,a,r,h,o,l,u,c){if(!(i&&0===i.length||n&&0===n.length)){t._fontTemp||(t._fontTemp=new FontInContext);var _=a.getItalic();_>=0&&a.copyTo(t._fontTemp).removeType("italic");var m=s.a,d=s.d;(0!==s.b||0!==s.c)&&(m=d=1);var p=1!==m||1!==d;if(p&&Laya.stage.transform){var f=Laya.stage.transform;p=f.a===m&&f.d===d}else p=!1;p?(s=s.copy(WebGLContext2D._tmpMatrix),s.scale(1/m,1/d),s._checkTransform(),u*=m,c*=d):m=d=1;var g,S,b,y,v,I=t._charsTemp,x=t._drawValue.value(a,h,o,l,m,d),D=0;if(n)for(I.length=n.length,g=0,S=n.length;S>g;g++)y=n[g],v=y.charNum+x.txtID,I[g]=b=t._wordsMsg[v]||t.getChar(y["char"],v,x),b.active();else for(I.length=i.length,g=0,S=i.length;S>g;g++)v=i.charCodeAt(g)+x.txtID,I[g]=b=t._wordsMsg[v]||t.getChar(i.charAt(g),v,x),b.active(),D+=b.width;null!==r&&"left"!==r&&(u-="center"==r?D/2:D);var w,T,C;if(n)for(g=0,S=I.length;S>g;g++)b=I[g],b.isSpace||(y=n[g],w=_>=0?.4*b.height:0,T=b.borderSize,C=b.texture,e._drawText(C,u+y.x*m-T,c+y.y*d-T,C.width,C.height,s,0,0,w,0));else for(g=0,S=I.length;S>g;g++)b=I[g],b.isSpace||(w=_>=0?.4*b.height:0,T=b.borderSize,C=b.texture,e._drawText(C,u-T,c-T,C.width,C.height,s,0,0,w,0)),u+=b.width}},t._wordsMsg={},t._charsTemp=new Array,t._fontTemp=null,__static(t,["_drawValue",function(){return this._drawValue=new CharValue}]),t}(),DrawTextChar=function(){function t(t,e){this["char"]=t,this.isSpace=" "===t,this.xs=e.scaleX,this.ys=e.scaleY,this.font=e.font.toString(),this.fontSize=e.font.size,this.fillColor=e.fillColor,this.borderColor=e.borderColor,this.lineWidth=e.lineWidth;var i=System.isConchApp;if(i){var n=ConchTextCanvas;n._source=ConchTextCanvas,n._source.canvas=ConchTextCanvas,this.texture=new Texture(new WebGLCharImage(n,this))}else this.texture=new Texture(new WebGLCharImage(Browser.canvas.source,this));!AtlasManager.enabled&&System.addToAtlas&&System.addToAtlas(this.texture,!0)}__class(t,"laya.webgl.text.DrawTextChar");var e=t.prototype;return e.active=function(){this.texture.active()},t.createOneChar=function(e,i){var n=new t(e,i);return n},t}(),FontInContext=function(){function t(t){this._index=0,this._size=14,this._italic=-2,this.setFont(t||"14px Arial")}__class(t,"laya.webgl.text.FontInContext");var e=t.prototype;return e.setFont=function(t){this._words=t.split(" ");for(var e=0,i=this._words.length;i>e;e++)if(this._words[e].indexOf("px")>0){this._index=e;break}this._size=Laya.__parseInt(this._words[this._index]),this._text=null,this._italic=-2},e.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},e.hasType=function(t){for(var e=0,i=this._words.length;i>e;e++)if(this._words[e]===t)return e;return-1},e.removeType=function(t){for(var e=0,i=this._words.length;i>e;e++)if(this._words[e]===t){this._words.splice(e,1),this._index>e&&this._index--;break}this._text=null,this._italic=-2},e.copyTo=function(t){return t._text=this._text,t._size=this._size,t._index=this._index,t._words=this._words.slice(),t._italic=-2,t},e.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},__getset(0,e,"size",function(){return this._size},function(t){this._size=t,this._words[this._index]=t+"px",this._text=null}),t.EMPTY=new t,t}(),CONST3D2D=function(){function t(){}return __class(t,"laya.webgl.utils.CONST3D2D"),t.BYTES_PE=window.Float32Array&&Float32Array.BYTES_PER_ELEMENT,t.BYTES_PIDX=window.Uint16Array&&Uint16Array.BYTES_PER_ELEMENT,t.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],t.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],t._TMPARRAY=[],t._OFFSETX=0,t._OFFSETY=0,t}(),GlUtils=function(){function t(){}return __class(t,"laya.webgl.utils.GlUtils"),t.make2DProjection=function(t,e,i){return[2/t,0,0,0,0,-2/e,0,0,0,0,2/i,0,-1,1,0,1]},t.fillIBQuadrangle=function(t,e){if(e>65535/4)throw Error("IBQuadrangle count:"+e+" must<:"+Math.floor(65535/4));e=Math.floor(e),t._resizeBuffer(6*(e+1)*2,!1),t.length=t.bufferLength;for(var i=new Uint16Array(t.getBuffer()),n=0,s=0;e>s;s++)i[n++]=4*s,i[n++]=4*s+2,i[n++]=4*s+1,i[n++]=4*s,i[n++]=4*s+3,i[n++]=4*s+2;return t.setNeedUpload(),t.upload(),!0},t.expandIBQuadrangle=function(e,i){e.bufferLength>=6*i*2||t.fillIBQuadrangle(e,i)},t.mathCeilPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t},t.fillQuadrangleImgVb=function(t,e,i,n,s,a,r,h){"use strict";e|=0,i|=0,r|=0,h|=0;var o=(t._length>>2)+16;t.length=o<<2;var l=t.getFloat32Array();o-=16,l[o+2]=s[0],l[o+3]=s[1],l[o+6]=s[2],l[o+7]=s[3],l[o+10]=s[4],l[o+11]=s[5],l[o+14]=s[6],l[o+15]=s[7];var u=a.a,c=a.b,_=a.c,m=a.d;if(1!==u||0!==c||0!==_||1!==m){a.bTransform=!0;var d=a.tx+r,p=a.ty+h;l[o]=(n[0]+e)*u+(n[1]+i)*_+d,l[o+1]=(n[0]+e)*c+(n[1]+i)*m+p,l[o+4]=(n[2]+e)*u+(n[3]+i)*_+d,l[o+5]=(n[2]+e)*c+(n[3]+i)*m+p,l[o+8]=(n[4]+e)*u+(n[5]+i)*_+d,l[o+9]=(n[4]+e)*c+(n[5]+i)*m+p,l[o+12]=(n[6]+e)*u+(n[7]+i)*_+d,l[o+13]=(n[6]+e)*c+(n[7]+i)*m+p}else a.bTransform=!1,e+=a.tx+r,i+=a.ty+h,l[o]=e+n[0],l[o+1]=i+n[1],l[o+4]=e+n[2],l[o+5]=i+n[3],l[o+8]=e+n[4],l[o+9]=i+n[5],l[o+12]=e+n[6],l[o+13]=i+n[7];return t._upload=!0,!0},t.fillTranglesVB=function(t,e,i,n,s,a,r){"use strict";e|=0,i|=0,a|=0,r|=0;var h=(t._length>>2)+n.length;t.length=h<<2;var o=t.getFloat32Array();h-=n.length;for(var l=n.length,u=s.a,c=s.b,_=s.c,m=s.d,d=0;l>d;d+=4)if(o[h+d+2]=n[d+2],o[h+d+3]=n[d+3],1!==u||0!==c||0!==_||1!==m){s.bTransform=!0;var p=s.tx+a,f=s.ty+r;o[h+d]=(n[d]+e)*u+(n[d+1]+i)*_+p,o[h+d+1]=(n[d]+e)*c+(n[d+1]+i)*m+f}else s.bTransform=!1,e+=s.tx+a,i+=s.ty+r,o[h+d]=e+n[d],o[h+d+1]=i+n[d+1];return t._upload=!0,!0},t.fillRectImgVb=function(t,e,i,n,s,a,r,h,o,l,u,c){"use strict";var _,m,d,p,f,g,S,b,y,v,I,x,D=1,w=h.a,T=h.b,C=h.c,k=h.d,L=!1;if(1!==w||0!==T||0!==C||1!==k?(h.bTransform=!0,0===T&&0===C&&(D=L?30:23,y=s+i,v=a+n,I=h.tx+o,x=h.ty+l,_=w*i+I,d=w*y+I,m=k*n+x,p=k*v+x)):(i|=0,n|=0,o|=0,l|=0,D=L?30:23,h.bTransform=!1,_=i+h.tx+o,d=_+s,m=n+h.ty+l,p=m+a),L&&(f=e.x,g=e.y,S=e.width+f,b=e.height+g),1!==D&&(_>=S||m>=b||f>=d||g>=p))return!1;var M=(t._length>>2)+16;t.length=M<<2;var A=t.getFloat32Array();switch(M-=16,A[M+2]=r[0],A[M+3]=r[1],A[M+6]=r[2],A[M+7]=r[3],A[M+10]=r[4],A[M+11]=r[5],A[M+14]=r[6],A[M+15]=r[7],D){case 1:I=h.tx+o,x=h.ty+l,y=s+i,v=a+n;var G=i,O=n,B=w*G,z=C*O,P=k*O,N=T*G,R=w*y,E=C*v,H=k*v,U=T*y;A[M]=B+z+I,A[M+1]=P+N+x,A[M+4]=R+z+I,A[M+5]=P+U+x,A[M+8]=R+E+I,A[M+9]=H+U+x,A[M+12]=B+E+I,A[M+13]=H+N+x;break;case 23:A[M]=_+u,A[M+1]=m,A[M+4]=d+u,A[M+5]=m,A[M+8]=d,A[M+9]=p,A[M+12]=_,A[M+13]=p;break;case 30:if(f>_||g>m||d>S||p>b){var V=f-_,F=g-m,W=d-S,j=p-b;V>0&&(_=f,A[M+14]=A[M+2]=A[M+2]+V/(s*w)*(A[M+6]-A[M+2])),F>0&&(m=g,A[M+7]=A[M+3]=A[M+3]+F/(a*k)*(A[M+11]-A[M+7])),W>0&&(d=S,A[M+6]=A[M+10]=A[M+6]-W/(s*w)*(A[M+6]-A[M+2])),j>0&&(p=b,A[M+11]=A[M+15]=A[M+15]-j/(a*k)*(A[M+11]-A[M+7]))}A[M]=_+u,A[M+1]=m,A[M+4]=d+u,A[M+5]=m,A[M+8]=d,A[M+9]=p,A[M+12]=_,A[M+13]=p}return t._upload=!0,!0},t.fillLineVb=function(e,i,n,s,a,r,h,o){"use strict";var l=t._fillLineArray,u=-(s-r),c=n-a,_=Math.sqrt(u*u+c*c);u/=_,c/=_,u*=h,c*=h,l[0]=n-u,l[1]=s-c,l[4]=n+u,l[5]=s+c,l[8]=a+u,l[9]=r+c,l[12]=a-u,l[13]=r-c,o&&o.transformPointArray(l,l);var m=(e._length>>2)+16;e.length=m<<2;var d=e.getFloat32Array();return d.set(l,m-16),e._upload=!0,!0},t._fillLineArray=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],t}(),RenderState2D=function(){function t(){}return __class(t,"laya.webgl.utils.RenderState2D"),t.mat2MatArray=function(t,e){var i=t,n=e;return n[0]=i.a,n[1]=i.b,n[4]=i.c,n[5]=i.d,n[12]=i.tx,n[13]=i.ty,e},t.restoreTempArray=function(){t.TEMPMAT4_ARRAY[0]=1,t.TEMPMAT4_ARRAY[1]=0,t.TEMPMAT4_ARRAY[4]=0,t.TEMPMAT4_ARRAY[5]=1,t.TEMPMAT4_ARRAY[12]=0,t.TEMPMAT4_ARRAY[13]=0},t.clear=function(){t.worldScissorTest=!1,t.worldShaderDefines=null,t.worldFilters=null,t.worldAlpha=1,t.worldClipRect.x=t.worldClipRect.y=0,t.worldClipRect.width=t.width,t.worldClipRect.height=t.height,t.curRenderTarget=null},t._MAXSIZE=99999999,t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.worldMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.worldAlpha=1,t.worldScissorTest=!1,t.worldFilters=null,t.worldShaderDefines=null,t.worldClipRect=new Rectangle(0,0,99999999,99999999),t.curRenderTarget=null,t.width=0,t.height=0,__static(t,["worldMatrix",function(){return this.worldMatrix=new Matrix}]),t}(),ShaderCompile=function(){function t(t,i,n,s,a){function r(t){for(var e=t.split(" "),i=[],n=0;n<e.length;n++)e[n].length>0&&i.push(e[n]);return i}function h(t){var i,n,s=0,h=0,o=0,l=new e(0,null,null,null),u=l,c=t.split("\n");for(s=0,h=c.length;h>s;s++){var _=c[s];if(_.indexOf("#ifdef")>=0)i=r(_),u=new e(1,i[1],"",u);else if(_.indexOf("#else")>=0)n=u.condition,u=new e(2,null,"",u.parent),u.condition=n;else if(_.indexOf("#endif")>=0)u=u.parent;else if(_.indexOf("#include")>=0){i=r(_);var m=i[1],d=m.charAt(0);('"'===d||"'"===d)&&(m=m.substr(1,m.length-2),o=m.lastIndexOf(d),o>0&&(m=m.substr(0,o))),o=i[0].indexOf("?");var p=o>0?i[0].substr(o+1):i[0];new e(1,p,a[m],u)}else u.childs.length>0&&0===u.childs[u.childs.length-1].type?u.childs[u.childs.length-1].text+="\n"+_:new e(0,null,_,u)}return l}this._VSTXT=i,this._PSTXT=n,this._VS=h(i),this._PS=h(n),this._nameMap=s}var e;__class(t,"laya.webgl.utils.ShaderCompile");var i=t.prototype;return i.createShader=function(t,e,i){var n={},s="";if(t)for(var a in t)s+="#define "+a+"\n",n[a]=!0;var r=this._VS.toscript(n,[]),h=this._PS.toscript(n,[]);return(i||Shader.create)(s+r.join("\n"),s+h.join("\n"),e,this._nameMap)},t.IFDEF_NO=0,t.IFDEF_YES=1,t.IFDEF_ELSE=2,t.__init$=function(){e=function(){function t(t,e,i,n){if(this.childs=new Array,this.type=t,this.text=i,this.parent=n,n&&n.childs.push(this),e){for(var s="",a=!1,r=!1,h=0,o=e.length;o>h;h++){var l=e.charAt(h);r="!&|() 	".indexOf(l)<0,a!=r&&(r&&(s+="this."),a=r),s+=l}var u="(function() {return "+s+";})";this.condition=Browser.window.eval(u)}}__class(t,"");var e=t.prototype;return e.toscript=function(t,e){if(0===this.type&&this.text&&e.push(this.text),this.childs.length<1&&!this.text)return e;if(0!==this.type){var i=!!this.condition.call(t);if(2===this.type&&(i=!i),!i)return e;this.text&&e.push(this.text)}return this.childs.length>0&&this.childs.forEach(function(i){i.toscript(t,e)}),e},t}()},t}(),WebGL=function(){function t(){}return __class(t,"laya.webgl.WebGL"),t.enable=function(){if(!t.isWebGLSupported())return!1;HTMLImage=WebGLImage,HTMLCanvas=WebGLCanvas,HTMLSubImage=WebGLSubImage,System.changeDefinition("HTMLImage",WebGLImage),System.changeDefinition("HTMLCanvas",WebGLCanvas),System.changeDefinition("HTMLSubImage",WebGLSubImage),Render.WebGL=t,System.createRenderSprite=function(t,e){return new RenderSprite3D(t,e)},System.createWebGLContext2D=function(t){return new WebGLContext2D(t)},System.changeWebGLSize=function(t,e){laya.webgl.WebGL.onStageResize(t,e)},System.createGraphics=function(){return new GraphicsGL};var e=System.createFilterAction;return System.createFilterAction=e?e:function(t){return new ColorFilterActionGL},Render.clear=function(t){RenderState2D.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var e=Color.create(t)._color;Render.context.ctx.clearBG(e[0],e[1],e[2],e[3]),RenderState2D.clear()},System.addToAtlas=function(t,e){void 0===e&&(e=!1);var i=t.bitmap,n=Render.isWebGl&&(AtlasManager.enabled||e),s=n&&(i instanceof laya.webgl.resource.WebGLImage||i instanceof laya.webgl.resource.WebGLSubImage||i instanceof laya.webgl.resource.WebGLCharImage)&&i.width<AtlasManager.atlasLimitWidth&&i.height<AtlasManager.atlasLimitHeight;s&&(i.on("recovering",this,function(e){t.canInAtlas&&(e.createOwnSource=!1,e.resourceManager&&e.resourceManager.removeResource(e))}),i.on("recovered",this,function(e){t.canInAtlas&&AtlasManager.instance.addToAtlas(t)}))},System.drawToCanvas=function(t,e,i,n,s,a){var r=new RenderTarget2D(i,n,!1,6408,5121,0);r.start(),r.clear(1,0,0,1),t.render(Render.context,-s,RenderState2D.height-n-a),Render.context.flush(),r.end();var h=r.getData(0,0,r.width,r.height);return r.dispose(),h},System.createFilterAction=function(t){var e;switch(t){case 32:e=new ColorFilterActionGL}return e},Filter._filter=function(t,e,i,n){var s=this._next;if(s){var a=t.filters,r=a.length;if(1==r&&32==a[0].type)return e.ctx.save(),e.ctx.setFilters(t.filters),s._fun.call(s,t,e,i,n),void e.ctx.restore();var h,o,l=SubmitCMDScope.create(),u=t._filterCache?t._filterCache:null;if(!u||t._repaint){o=new Rectangle,o.copyFrom(t.getBounds()),u&&u.recycle(),l.addValue("bounds",o);var c=SubmitCMD.create([l,t,e,0,0],Filter._filterStart);e.addRenderObject(c),s._fun.call(s,t,e,-o.x+t.x+10,-o.y+t.y+10),c=SubmitCMD.create([l,t,e,0,0],Filter._filterEnd),e.addRenderObject(c);for(var _=0;r>_;_++){0!=_&&(c=SubmitCMD.create([l],Filter._useSrc),e.addRenderObject(c),h=Value2D.create(1,0),e.ctx.drawTarget(l,0,0,o.width+20,o.height+20,d,"out",h),c=SubmitCMD.create([l],Filter._useOut),e.addRenderObject(c));var m=a[_];m.action.apply3d(l,t,e,0,0)}c=SubmitCMD.create([l],Filter._EndTarget),e.addRenderObject(c)}else o=t.getBounds(),l.addValue("out",u);var d=e.ctx._getTransformMatrix(),p=Point.TEMP;d.transformPoint(o.x,o.y,p),h=Value2D.create(1,0),e.ctx.drawTarget(l,p.x+i-t.x-10,p.y+n-t.y-10,o.width+20,o.height+20,Matrix.EMPTY,"out",h),c=SubmitCMD.create([l],Filter._recycleScope),e.addRenderObject(c)}},!0},t.isWebGLSupported=function(){for(var t,e=Browser.createElement("canvas"),i=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=0;n<i.length;n++){try{t=e.getContext(i[n])}catch(s){}if(t)return i[n]}return null},t.onStageResize=function(e,i){t.mainContext.viewport(0,0,e,i),RenderState2D.width=e,RenderState2D.height=i,Value2D.needRezise=!0},t.isExperimentalWebgl=function(){return t._isExperimentalWebgl},t.addRenderFinish=function(){t._isExperimentalWebgl&&(Render.finish=function(){Render.context.ctx.finish()})},t.removeRenderFinish=function(){t._isExperimentalWebgl&&(Render.finish=function(){})},t.init=function(e,i,n){t.mainCanvas=e,HTMLCanvas._createContext=function(t){return new WebGLContext2D(t)};var s=t.isWebGLSupported(),a=t.mainContext=e.getContext(s,{stencil:!0,alpha:!1,antialias:!0,premultipliedAlpha:!1});if(t._isExperimentalWebgl="experimental-webgl"==s&&(Browser.onWeiXin||Browser.onMQQBrowser),
Browser.window.SetupWebglContext&&Browser.window.SetupWebglContext(a),t.onStageResize(i,n),null==t.mainContext)throw new Error("webGL getContext err!");System.__init__(),AtlasManager.__init__(),ShaderDefines2D.__init__(),Submit.__init__(),WebGLContext2D.__init__(),Value2D.__init__(),Shader2D.__init__(),Buffer.__int__(a),BlendMode._init_(a)},t.mainCanvas=null,t.mainContext=null,t.antialias=!0,t._bg_null=[0,0,0,0],t._isExperimentalWebgl=!1,t}(),WebGLContext=function(){function t(){}return __class(t,"laya.webgl.WebGLContext"),t.UseProgram=function(e){return t._useProgram===e?!1:(WebGL.mainContext.useProgram(e),t._useProgram=e,!0)},t.setDepthTest=function(e,i){i!==t._depthTest&&(t._depthTest=i,i?e.enable(2929):e.disable(2929))},t.setDepthMask=function(e,i){i!==t._depthMask&&(t._depthMask=i,e.depthMask(i))},t.setBlend=function(e,i){i!==t._blend&&(t._blend=i,i?e.enable(3042):e.disable(3042))},t.setBlendFunc=function(e,i,n){(i!==t._sFactor||n!==t._dFactor)&&(t._sFactor=i,t._dFactor=n,e.blendFunc(i,n))},t.setCullFace=function(e,i){i!==t._cullFace&&(t._cullFace=i,i?e.enable(2884):e.disable(2884))},t.setFrontFaceCCW=function(e,i){i!==t._frontFace&&(t._frontFace=i,e.frontFace(i))},t._useProgram=null,t._depthTest=!0,t._depthMask=1,t._blend=!1,t._sFactor=1,t._dFactor=0,t._cullFace=!1,t._frontFace=2305,t.__init$=function(){},t}(),GlowFilterAction=function(){function t(){this.data=null}__class(t,"laya.filters.GlowFilterAction");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(e){var i=e.ctx.ctx,n=e.ctx.ctx.canvas,s=t.Canvas,a=t.Ctx;return s.width=n.width,s.height=n.height,a.shadowBlur=this.data.blur,a.shadowColor=this.data.color,a.shadowOffsetX=this.data.offX,a.shadowOffsetY=this.data.offY,a.drawImage(n,0,0),i.width=i.width,i.drawImage(s,0,0),n},__static(t,["Canvas",function(){return this.Canvas=Browser.createElement("canvas")},"Ctx",function(){return this.Ctx=t.Canvas.getContext("2d")}]),t}(),WebGLFilter=function(){function t(){}return __class(t,"laya.filters.WebGLFilter"),t.enable=function(){t.isInit||(t.isInit=!0,Render.isWebGl&&(System.createFilterAction=function(t){var e;switch(t){case 32:e=new ColorFilterActionGL;break;case 16:e=new BlurFilterActionGL;break;case 8:e=new GlowFilterActionGL}return e},Filter._filterStart=function(t,e,i,n,s){var a=t.getValue("bounds"),r=RenderTarget2D.create(a.width+20,a.height+20);r.start(),r.clear(0,0,0,0),t.addValue("src",r)},Filter._filterEnd=function(t,e,i,n,s){var a=t.getValue("bounds"),r=t.getValue("src");r.end();var h=RenderTarget2D.create(a.width+20,a.height+20);h.start(),t.addValue("out",h),e._filterCache=h},Filter._EndTarget=function(t){var e=t.getValue("out");e.end()},Filter._useSrc=function(t){var e=t.getValue("out");e.end(),e=t.getValue("src"),e.start(),e.clear(0,0,0,0)},Filter._endSrc=function(t){var e=t.getValue("src");e.end()},Filter._useOut=function(t){var e=t.getValue("src");e.end(),e=t.getValue("out"),e.start(),e.clear(0,0,0,0)},Filter._endOut=function(t){var e=t.getValue("out");e.end()},Filter._recycleScope=function(t){t.recycle()}))},t.isInit=!1,t.__init$=function(){System.createFilterAction=function(t){var e;switch(t){case 16:e=new BlurFilter;break;case 8:e=new GlowFilterAction;break;case 32:e=new ColorFilterAction}return e}},t}(),GGateLink=function(){function t(){}__class(t,"base.net.GGateLink");var e=t.prototype;return e.LinkGate=function(t,e,i){},e.BreakGate=function(){},e.OnLinkReady=function(){},t}(),CropInfo=function(){function t(){this.cropId=0,this.cropOpen={"小麦":1,"玉米":2,"大豆":5,"白菜":7,"向日葵":9,"甘蔗":13,"胡萝卜":15,"西红柿":25,"棉花":29,"土豆":34,"蘑菇":37},this.cropData=[{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:75,y:16},{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:-8,y:90},{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:-16,y:203},{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:57,y:298},{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:176,y:325},{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:292,y:276},{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:357,y:168},{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:354,y:41},{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:291,y:-66},{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:178,y:-131},{cropIcon:"",cropText:"2",jinbi:{visible:!1},jinbiText:"",x:53,y:-133}],this.cropInfo=[{label1:"",label2:"",label3:""},{label1:"",label2:"",label3:""},{label1:"",label2:"",label3:""},{label1:"",label2:"",label3:""},{label1:"",label2:"",label3:""},{label1:"",label2:"",label3:""},{label1:"",label2:"",label3:""},{label1:"",label2:"",label3:""},{label1:"",label2:"",label3:""},{label1:"",label2:"",label3:""},{label1:"",label2:"",label3:""}],this.openCropNum=0,this.m_nItemID=0,this.m_nBagKind=0,this.m_pLink=null,this.init()}__class(t,"display.crop.CropInfo");var e=t.prototype;return e.init=function(){for(var t=0;t<this.cropData.length;t++)this.cropData[t].cropIcon=GVar.texDic[ItemFeild.getInstance().getItemArr(4e3+(t+1))[3]],this.cropData[t].id=4e3+(t+1),this.cropInfo[t].label1=ItemFeild.getInstance().getItemArr(4e3+(t+1))[2],this.cropInfo[t].label2=ItemFeild.getInstance().getItemArr(4e3+(t+1))[10],this.cropInfo[t].label3=TimerTools.conversion(Math.floor(60*ItemFeild.getInstance().getItemArr(4e3+(t+1))[13]*DataTable.m_iSelfUser.GetNewerQuickAgv(0)))},e.CheckAll=function(){for(var t=DataTable.m_iItemTab.GetFieldItems(),e=DataTable.m_iSelfUser.GetLevel(),i=0,n=0;i<t.length;){if(t[i][0]>e){i<t.length&&i++;break}i++}for(this.openCropNum=i,n=0;i>n;n++)this.GPlantIcon(t[n][1],t[n][0]>e?t[n][0]:0,Boolean(n==i-2),n)},e.GPlantIcon=function(t,e,i,n){this.InitItem(78,t,"GMB_Field",n);var s=e;s>0&&(this.cropData[n].cropText="",this.cropData[n].jinbiText="",this.cropData[n].jinbi={visible:!1}),this.cropData[n].jiesuo=0==e?!0:!1,i&&GLeadManager.RegArrowInterface(this,"田_种植")},e.InitItem=function(t,e,i,n){void 0===i&&(i=""),void 0===n&&(n=0),this.m_nItemID=e;this.m_nItemID>0&&(this.m_nBagKind=DataTable.m_iSelfUser.FindItemBagKind(this.m_nItemID)),this.GetNum(n)},e.GetNum=function(t){if(this.m_nBagKind<0||this.m_nItemID<1)return this.cropData[t].cropText="",this.cropData[t].jinbiText="",void(this.cropData[t].jinbi={visible:!1});var e=DataTable.m_iSelfUser.GetBagItemNum(this.m_nBagKind,this.m_nItemID),i=DataTable.m_iFieldTab.Get(this.m_nItemID);if(!e&&i.length){var n=(DataTable.m_iSelfUser.m_nLevel,DataTable.m_iSelfUser.GetMoney());i=DataTable.m_iItemTab.Get(this.m_nItemID);var s=2.5,a=Math.floor(Math.max(1,s*i[6]*3.3)),r=a>n?-1*a:a;this.cropData[t].jinbiText=r,this.cropData[t].jinbi={visible:!0},this.cropData[t].cropText={text:e,color:"#ff0000"}}else this.cropData[t].cropText=e,this.cropData[t].jinbiText="",this.cropData[t].jinbi={visible:!1}},e.getCropLevel=function(t){return this.cropOpen[t]?this.cropOpen[t]:0},__getset(0,e,"cropdata",function(){return this.cropData}),__getset(0,e,"cropDatas",function(){return this.cropData.slice(0,this.openCropNum+1)}),__getset(0,e,"cropInfos",function(){return this.cropInfo}),__getset(0,e,"cropNum",function(){return this.openCropNum}),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.OPEN_CROP_MAX=37,t.instance=null,t}(),GMapView=function(){function t(){this.m_nInitAutoMove=1,this.m_szAllBulid=null,this.m_szAllSysBuild=[],this.m_szAllMaskCloud=[],this.m_nLinkUID=0,this.m_nAvatarID=0,this.m_iBuildTab=null,this.deleteBuildHandler=null,this.m_szWharflv=null,this.m_szOrEvaGoldData=null,this.rArr=__newvec(9,null);var e=this;LoadingView.getInstance().LabelText="初始化地图......",LoadingView.getInstance().currentValue=40,this.m_szAllBulid=[],this.initBk(),Laya.timer.frameLoop(1,this,this.createServerItem,null),DisplayItem.m_pBk=t.m_pBk,gSys.WaitSignal(Handler.create(this,regcmgr=function(){DataTable.m_iSelfUser.GetExp()>0&&(t.m_pBk.scCen=1),t.m_cloudMgr=new GClouldManager,t.m_cloudMgr.OnCreate(),e.CheckCreateBox()}),"mapready")}__class(t,"display.GMapView");var e=t.prototype;return e.CheckCreateBox=function(){t.m_cloudMgr&&(DataTable.m_iSelfUser.GetLevel()<7||(DataTable.m_iSelfUser.CheckCreateBox(0)&&t.m_cloudMgr.AddDiaGift(),DataTable.m_iSelfUser.CheckCreateBox(1)&&t.m_cloudMgr.AddGift()))},e.initBk=function(){t.m_pBk=new MutiWorld},e.createServerItem=function(){if(null!=WSocket.m_userData.mapdata&&DataTable.m_bInit&&0!=GVar.tabLoadSuc&&null!=t.m_pBk.m_mapIns._baseData){var e=WSocket.m_userData;DataTable.m_iSelfUser.GetBoatExLvSz(Handler.create(this,this.createServerItemNext,[e])),Laya.timer.clear(this,this.createServerItem)}},e.createServerItemNext=function(t,e){var i=DataTable.m_iSelfUser.GetUserMaskCloud();this.InitMap(t.mapdata,t.sysdata,1,t.uid,i,e)},e.createOtherMapView=function(t){return Laya.loader.getRes("assets/mainOther.json")?void this.createOtherMapView_1(t):(GameMain._ins.addLoading(),void Laya.loader.load([{url:"assets/mainOther.json",type:"atlas"}],Handler.create(this,this.createOtherMapView_1,[t])))},e.createOtherMapView_1=function(e){GameMain._ins.removeLoading(),this.clearMapBuild(),MainIcon.getInstance().onShowOtherHome(),t.m_nSelf=0,this.InitMap(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7])},e.recreateHomeView=function(){this.clearMapBuild()},e.createHomeMapView=function(e){void 0===e&&(e=!1),DataTable.m_iOtherUser.destory(),this.clearMapBuild(),e||MainIcon.getInstance().onShowMyHome();var i=WSocket.m_userData,n=DataTable.m_iSelfUser.GetUserMaskCloud();t.m_nSelf=1,this.InitMap(i.mapdata,i.sysdata,1,i.uid,n,null),GLeadManager.ReStart()},e.getMPBuild=function(e,i,n){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==t.m_pBk)return null;var s;if(0==e)return s=t.m_pBk.getMPMapItem(),null==s?null:this.getBuildFromItem(s.itemid,s.x,s.y);var a=t.m_pBk.getMPMapItem(e,i,n);if(0==a.length)return null;this.rArr[0]=this.rArr[1]=this.rArr[2]=this.rArr[3]=this.rArr[4]=this.rArr[5]=this.rArr[6]=this.rArr[7]=null;for(var r=0,h=a.length;h>r;r++)null!=a[r]?(s=a[r],this.rArr[r]=this.getBuildFromItem(s.itemid,s.x,s.y)):this.rArr[r]=null;return this.rArr},e.getBuildFromItem=function(t,e,i){var n=this.m_iBuildTab.Get(t);if(null==n)return null;var s=n[1],a=ArrOp.SzSearch(s,this.m_szAllBulid);if(0>a)return null;for(var r=this.m_szAllBulid[a],h=1,o=r.length;o>h;h++){var l=r[h].getMapItem();if(null!=l&&l.x==e&&l.y==i)return r[h]}return null},e.getMinYItem=function(t){for(var e=t,i=1048575,n=0,s=0,a=e.length;a>s;s++){if(null==e[s])throw new Error("Meet null item...");i>e[s].y&&(n=s,i=e[s].y)}var r=e[n];return e.splice(n,1),r},e.clearMapBuild=function(){var e=0,i=0,n=0;for(DisplayItem.ItemRefClear(),GLeadManager.s_szMultiObj.length=0,e=this.m_szAllSysBuild.length,i=0;e>i;i++)this.m_szAllSysBuild[i]&&this.m_szAllSysBuild[i].UnRegLead&&this.m_szAllSysBuild[i].UnRegLead(),DisplayItem.SafeDelObj(this.m_szAllSysBuild[i]);for(this.m_szAllSysBuild.length=0,e=this.m_szAllBulid.length,i=0;e>i;i++){var s=this.m_szAllBulid[i].length;for(n=0;s>n;n++)this.m_szAllBulid[i][n]&&this.m_szAllBulid[i][n].UnRegLead&&this.m_szAllBulid[i][n].UnRegLead(),DisplayItem.SafeDelObj(this.m_szAllBulid[i][n]);this.m_szAllBulid[i].length=0}for(this.m_szAllBulid.length=0,e=this.m_szAllMaskCloud.length,i=0;e>i;i++)DisplayItem.SafeDelObj(this.m_szAllMaskCloud[i]);this.m_szAllMaskCloud.length=0,t.m_cloudMgr.dispose(),this.ClearOrEvaGoldData()},e.GetSysBuild=function(t){for(var e=this.m_szAllSysBuild.length,i=0;e>i;i++)if(this.m_szAllSysBuild[i].GetBuildID()==t)return this.m_szAllSysBuild[i];return null},e.showAllSysBuild=function(){for(var t=this.m_szAllSysBuild.length,e=0;t>e;e++)this.m_szAllSysBuild[e].m_disObj&&this.m_szAllSysBuild[e].m_disObj.getAlpha()<1&&(this.m_szAllSysBuild[e].m_disObj.setAlpha(1),this.m_szAllSysBuild[e].m_nCanMouse=1);GMC_Truck.Me().m_disObj&&GMC_Truck.Me().m_disObj.getAlpha()<1&&(GMC_Truck.Me().m_disObj.setAlpha(1),GMC_Truck.Me().m_nCanMouse=1)},e.InitMap=function(e,i,n,s,a,r,h,o){void 0===o&&(o=0),t.m_fillBkImg||this.ChgMapAvatar(),this.m_nLinkUID=s,this.m_szWharflv=r;var l=NaN,u=NaN,c=0;t.m_bEnterMap||(l=MapIns._ins.getWidth()/2,u=MapIns._ins.getHeight()/2),t.m_pBk.preInitMap(e),this.m_iBuildTab=DataTable.m_iBuildTab,this.m_nAvatarID=o;var _=!0;if(_){var m=DataTable.sysbuildtab.itemArr;for(c=m.length,p=0;c>p;p++){var d=ArrOp.GetStrVal("s"+m[p][0],i);this.AddSysBulid(m[p],d)}}if(this.m_nInitAutoMove){var p=0,f=(new UintRef,new UintRef,new UintRef,new UintRef,[]);for(c=e.length,p=0;c>p;p++){var g=e[p],S=p;this.AddBulid(g,S,f)}f=null}this.InitMaskCloud(a),t.m_bEnterMap&&MutiWorld.m_bFInit||(t.m_pBk.afterInitMap(),t.m_pBk.updateOrder())},e.AddSysBulid=function(e,i){var n,s=e[3];switch(s){case"Home":n=new GMSB_Home;break;case"任务板":n=GMSB_Order.Me();break;case"路边摊":n=new GMSB_LBT,t.lubiantan=n;break;case"Tv":n=new GMSB_Tv;break;case"码头":n=new GMSB_wharf;break;case"气球平台":n=GMSB_Balloon.Me();break;case"NPC":n=new GMSB_NPC;break;default:n=new GMapSysBuildBase}return n&&n.InitSysBuild(e[0],t.m_nSelf,i),n&&this.m_szAllSysBuild.push(n),1},e.setTreeVis=function(t){},e.setCloudVis=function(t){},e.setAllBuildVis=function(t){var e=this.m_szAllSysBuild.length,i=0,n=0;for(i=0;e>i;i++)this.m_szAllSysBuild[i].setvis(t);for(e=this.m_szAllBulid.length,i=0;e>i;i++){var s=this.m_szAllBulid[i];for(n=1;n<s.length;n++)s[n].setvis(t)}for(e=this.m_szAllMaskCloud.length,i=0;e>i;i++)this.m_szAllMaskCloud[i].m_disObj.visible=t},e.OnBuildPosChged=function(){t.m_pBk.updateOrder()},e.AddBulid=function(e,i,n,s){void 0===s&&(s=!1);var a=this.m_iBuildTab.Get(e.itemid);if(null==a)return console.log("Can't get map build id="+e.itemid),-1;var r=a[1];if(0>r||r>t.s_szKindClassName.length)return console.log("build kind class err:"+e.itemid),-2;t.s_szKindClassName[r];t.m_pBk.m_mapIns.setGridObj(e);var h=null;switch(r){case 0:h=new GMB_Ornament;break;case 1:h=new GMB_Field;break;case 2:h=new GMB_Tree;break;case 3:h=new GMB_Mac;break;case 4:h=new GMB_Culture;break;case 5:h=new GMB_Pet;break;case 6:h=new GMB_Fence;break;case 8:h=new GMB_Totem;break;case 10:h=new GMB_CWJT;break;case 11:h=new GMB_BuyBack;break;case 12:throw new Error("Cloud Error here...");default:h=new GMapBuildBase}if(null==h)return 0;h.InitBuild(e,i,t.m_nSelf),t.m_bIPSet||1!=r||(MutiWorld.m_psInitPt.x=h.m_nXpos,MutiWorld.m_psInitPt.y=h.m_nYpos);var o=ArrOp.SzSearch(r,this.m_szAllBulid,0,n);if(0>o?(this.m_szAllBulid.push([r,h]),n&&(n[0][r]=this.m_szAllBulid.length-1),o=this.m_szAllBulid.length-1):this.m_szAllBulid[o].push(h),h.m_disObj.PlaySpeed(1,MathUtil1.rand(0,10)),0!=r&&1!=r&&6!=r)return 1;var l=new UintRef,u=new UintRef;TileGrid.TransI2W(e.x,e.y,l,u);var c=t.m_pBk.m_mapIns.getGridObj(l.uid,u.uid+1),_=0;if(c&&c.itemid==e.itemid&&(_=1),c=t.m_pBk.m_mapIns.getGridObj(l.uid+1,u.uid),c&&c.itemid==e.itemid&&(_|=2),h.m_disObj.playAni("s"+_),0==_&&s)for(var m=this.m_szAllBulid[o].length,d=1;m>d;d++)if(h=this.m_szAllBulid[o][d],h.getMapItem().itemid==e.itemid){TileGrid.TransI2W(h.IX,h.IY,l,u);var p=h.getMapItem();c=t.m_pBk.m_mapIns.getGridObj(l.uid,u.uid+1),_=0,c&&c.itemid==p.itemid&&(_=1),c=t.m_pBk.m_mapIns.getGridObj(l.uid+1,u.uid),c&&c.itemid==p.itemid&&(_|=2),h.m_disObj&&h.m_disObj.playAni("s"+_)}return 1},e.autoLink=function(e){var i=this.m_iBuildTab.Get(e),n=i[1];if(0==n||1==n||6==n){var s=ArrOp.SzSearch(n,this.m_szAllBulid,0,null);if(!(0>s))for(var a=this.m_szAllBulid[s].length,r=0,h=null,o=null,l=1;a>l;l++)if(h=this.m_szAllBulid[s][l],h.getMapItem().itemid==e){TileGrid.TransI2W(h.IX,h.IY,UintRef.t1,UintRef.t2);h.getMapItem();o=t.m_pBk.m_mapIns.getGridObj(UintRef.t1.uid,UintRef.t2.uid+1),r=0,o&&o.itemid==e&&(r=1),o=t.m_pBk.m_mapIns.getGridObj(UintRef.t1.uid+1,UintRef.t2.uid),o&&o.itemid==e&&(r|=2),h.m_disObj&&h.m_disObj.playAni("s"+r)}}},e.ChgMapAvatar=function(){var e,i,n,s,a=DataTable.m_iTerrainAvataTab.Get(this.m_nAvatarID);null==a?(e="tex_tmk2",i="tex_草地装饰物",n="tex_map_bk",s="tex_地图云l"):(e=a[3],i=a[4],n=a[5],s=a[6]),this.SetFillBkImg(n,1.3),t.m_pLayer2=t.m_pLayer2||new MapLayer,t.m_pLayer2.ChgMapAvatar(s,this.m_nAvatarID)},e.SetFillBkImg=function(e,i){var n=NaN,s=NaN;n=Laya.stage.width,s=Laya.stage.height,t.m_fillBkImg=t.m_fillBkImg||new Image2,t.m_fillBkImg.skin=GVar.texDic[e],t.m_fillBkImg.width=n,t.m_fillBkImg.height=s,t.m_fillBkImg.zOrder=-1e5,Laya.stage.addChildAt(t.m_fillBkImg,0),Laya.stage.on("resize",this,sizechg=function(){var e=NaN,i=NaN;e=Laya.stage.width,i=Laya.stage.height,t.m_fillBkImg.width=e,t.m_fillBkImg.height=i,display.GMapView.m_pBk.m_scrRect.width=e,display.GMapView.m_pBk.m_scrRect.height=i})},e.InitMaskCloud=function(e){if(1!=this.m_nLinkUID){for(var i,n=DataTable.maskcloud.itemArr,s=0,a=[],r=[],h=0,o=n.length;o>h;h++)if(s=ArrOp.SzSearch(n[h][0],e,0,a),s>=0){if(e[s]){i=new GMB_MaskCloud,i.InitMask(n[h],t.m_nSelf),r.push(i);continue}e[s][1]&&(i=new GMB_MaskCloud,i.InitBuild(n[h],t.m_nSelf,e[s][1]),this.m_szAllMaskCloud.push(i))}else i=new GMB_MaskCloud,i.InitBuild(n[h],t.m_nSelf),this.m_szAllMaskCloud.push(i);for(this.CheckMaskCloud(),h=0;h<r.length;h++)r[h].ClearMask();r.length=0}},e.CheckMaskCloud=function(){var t=DataTable.m_iSelfUser.GetEvalue(),e=DataTable.m_iSelfUser.GetNextMaskCloudEva(t),i=0;for(i=0;i<this.m_szAllMaskCloud.length;i++)this.m_szAllMaskCloud[i].CheckShowState(t,e)},e.OnPetDataChged=function(t){for(var e=0;e<t.length;e++)DataTable.FindInterface(t[e])&&DataTable.FindInterface(t[e]).NotiPetDataChg(t)},e.OnMutiBuildDeleteEx=function(e,i){t.m_pBk.unSelMuti();for(var n=0;n<this.m_szAllBulid.length;n++)for(var s=1;s<this.m_szAllBulid[n].length;s++){this.m_szAllBulid[n][s];this.m_szAllBulid[n][s].OnMutiBuildDeleteEx(e,i)&&(this.m_szAllBulid[n][s].ResetColInfo(),this.m_szAllBulid[n].splice(s,1),this.deleteBuildHandler&&this.deleteBuildHandler.run(),s--)}},e.OnFindBulitByid=function(e){var i=this.m_iBuildTab.Get(e);if(null==i)throw new Error("Can't get map build id="+s.itemid);if(i[1]<0||i[1]>t.s_szKindClassName.length)throw new Error("build kind class err:"+s.itemid);var n=ArrOp.SzSearch(i[1],this.m_szAllBulid);if(0>n)return null;var s=this.m_szAllBulid[n].slice();return s=ArrOp.DelSz(0,s),s.length<2?null:s},e.GetWharfLvSz=function(){return this.m_szWharflv},e.SetLookAt=function(t,e,i,n){if(null!=t&&t instanceof game.build.DisplayItem){var s=t,a=s.m_disObj;a?DisplayItem.m_pBk.setScreenCenter(a.x,a.y,!0,1e3):DisplayItem.m_pBk.setScreenCenter(s.m_nXpos,s.m_nYpos,!0,1e3)}},e.GetCanOrGoldEva=function(){return this.m_szOrEvaGoldData},e.ClearOrEvaGoldData=function(){this.m_szOrEvaGoldData=null},e.GetAllSubObjByFunName=function(e,i){for(var n=t.builsHasFunction[i],s=0;n&&s<n.length;s++){var a=ArrOp.SzSearch(n[s],this.m_szAllBulid);0>a||(e||(e=[]),this.m_szAllBulid[a]&&(e=e.concat(this.m_szAllBulid[a].slice(1))))}return e},e.ShowMapBuildTopEva=function(){if(this.m_szOrEvaGoldData&&this.m_szOrEvaGoldData.length>0)return 0;var t,e=0;t=[],t=this.GetAllSubObjByFunName(t,"GetOrEvalue");var i=0,n=0,s=[];if(t&&t.length>20){var a=[];for(i=0;i<t.length;i++)n=t[i].GetOrEvalue(),1>n||a.push([n,t[i],t[i]]);for(a=ArrOp.SzSort(a,1),a=ArrOp.DelSz(20,a,t.length),i=0;i<a.length;i++)a[i][1].ShowGold()&&(s.push(a[i][1].GetBuildID()),e+=a[i][0])}else for(i=0;i<t.length;i++)n=t[i].GetOrEvalue(),t[i].ShowGold()&&(e+=n,s.push(t[i].GetBuildID()));return s.length<1&&(s=null),this.m_szOrEvaGoldData=[e,s],e},e.OnSysBuildData=function(t,e){var i=this.GetSysBuild(t);i&&i.OnSysBuildData&&i.OnSysBuildData(t,e)},t.GetBk=function(){return t.m_pBk},t.m_nSelf=1,t.m_bEnterMap=!1,t.m_pBk=null,t.m_pLayer2=null,t.m_fillBkImg=null,t.lubiantan=null,t.m_cloudMgr=null,t.m_bIPSet=!1,__static(t,["s_szKindClassName",function(){return this.s_szKindClassName=["GMB_Ornament","GMB_Field","GMB_Tree","GMB_Mac","GMB_Culture","GMB_Pet","GMB_栅栏","GMB_WonderBuild","GMB_图腾","GMB_娃娃机","GMB_宠物祭坛","GMB_BuyBack","GMB_MaskClould"]},"builsHasFunction",function(){return this.builsHasFunction={GetOrEvalue:[0,6]}}]),t}(),ArrOp=function(){function t(){}return __class(t,"display.GV.ArrOp"),t.SzHalfSearch=function(e,i,n,s){void 0===n&&(n=0);var a=0;if(!i)return-1;if("string"==typeof e)return t.SzSearch(e,i,n,s);var r=i.length-1;if(i.length<=0)return-1;if(!(i[0]instanceof Array)||void 0===e)return-1;for(;r>=a;){var h=Math.floor((a+r)/2),o=i[h][n];if(e===o)return h;if(e>o&&(a=h+1),o>e&&(r=h-1),a===r){if(i[a][n]==e)return a;i[a][n]<e&&a++;break}}return 0==a&&(a=1e6),-a},t.SzAddRef=function(t,e,i){for(var n in i)if(i[n][0]===t)return i[n][1]+=e,n;return i.push([t,e]),i.length-1},t.InitSz=function(t,e){if(0>t)return[];var i=[];for(i.length=t;--t>-1;)i[t]=e;return i},t.InsertSz=function(t,e,i){1e6-1==t&&(t=-1);var n=e;return null==n&&(n=[]),n.splice(t+1,0,i),n},t.SzLink=function(t,e){return t.concat(e)},t.SzSearch=function(t,e,i,n){if(void 0===i&&(i=0),!e)return-1;var s=0,a=0;if(!n){for(s=0,a=e.length;a>s;s++)if(e[s]&&t===e[s][i])return s;return-1}var r=n[i];if(null==r)for(r=n[i]={},s=0,a=e.length;a>s;s++)e[s]&&(r[e[s][i]]=s);var h=r[t];return null==h?-1:h},t.SzSearchArr=function(t,e){if(!e||!t)return-1;for(var i=0,n=0,s=e.length;s>n;n++)if(e[n])if(t.length!=e[n].length);else{i=1;for(var a=0;a<t.length;a++)if(t[a]!==e[n][a]){i=0;break}if(i)return n}return-1},t.GetByNameArray=function(t,e,i){void 0===i&&(i=1);for(var n=e.length;--n>-1;)if(t===e[n][i])return e[n];return null},t.GetStrVal=function(t,e){if(null==e)return null;var i=e[t];return i?i:null},t.SetStrVal=function(t,e,i){return null==e&&(e=new Object),e[t]=i,e},t.GetStrValM=function(t,e){if(null==e)return null;if(!(e[0]instanceof Array))throw new Error("The Element should be Array....");for(var i=0,n=e.length;n>i;i++)if(e[i][0]===t)return e[i][1];return null},t.SetStrValM=function(t,e,i){if(null==e&&(e=[]),e.length>0&&!(e[0]instanceof Array))throw new Error("The Element should be Array....");for(var n=0,s=e.length;s>n;n++)if(e[n][0]===t)return e[n][1]=i,e;return e.push([t,i]),e},t.SzSort=function(t,e){if(void 0===e&&(e=0),!t||!t[0])return t;if(!(t[0]instanceof Array))throw new Error("排序程序结构出错");return t=display.GV.ArrOp.SzSortEx(t,0,e)},t.SzSortEx=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!(e[0]instanceof Array))throw new Error("排序程序结构出错");return t.indexboo=Boolean(n),t.index=i,e.sort(t.sortH),e},t.sortH=function(e,i){var n=0;if("number"==typeof e||"number"==typeof i||t.index>e.length-1||t.index>i.length-1)throw new Error("排序程序结构出错");return n=e[t.index]>i[t.index]?1:e[t.index]<i[t.index]?-1:0,t.indexboo&&(n=-n),n},t.DelSz=function(t,e,i){return void 0===i&&(i=1),e.splice(t,i),e},t.SzFind=function(t,e){for(var i in e)if(e[i]===t)return i;return-1},t.sameArr=function(t,e){if(t.length!=e.length)return!1;for(var i=t.length,n=0;i>n;n++)if(t[n]!==e[n])return!1;return!0},t.SEARCH_VALUE_MAX=1e6,t._sss=0,t.index=0,t.indexboo=!0,t.lx=!1,t}(),Asbin=function(){function t(){this.d=0,this.data=null,this.dpos=0,this.ptr=new GVarData}return __class(t,"display.GV.Asbin"),t}(),Asdword=function(){function t(){this.d1=0,this.d2=0,this.d3=0}__class(t,"display.GV.Asdword");var e=t.prototype;return e.getInt64=function(){return this.d1*Math.pow(2,32)+this.d2},t}(),Asptr=function(){function t(){this.ptr=0,this.ptrkind=0,this.len=0}return __class(t,"display.GV.Asptr"),t}(),Asstr=function(){function t(){this.pstr="",this.strid=0}return __class(t,"display.GV.Asstr"),t}(),Assz=function(){function t(t){this.psz=null,this._szSize=0,this.setSzSize(t)}__class(t,"display.GV.Assz");var e=t.prototype;return e.setSzSize=function(t){this._szSize=t,this.psz=[],this.psz.length=t;for(var e=0;t>e;e++)this.psz[e]=new GVar},__getset(0,e,"szSize",function(){return this._szSize}),t}(),Asvector2=function(){function t(){this.x=NaN,this.y=NaN}return __class(t,"display.GV.Asvector2"),t}(),Asvector3=function(){function t(){this.x=NaN,this.y=NaN,this.z=NaN}return __class(t,"display.GV.Asvector3"),t}(),BuildTab=function(){function t(){this.tabName=null,this.tabNum=0,this.tabList=null,this.tabObj={}}__class(t,"display.GV.BuildTab");var e=t.prototype;return e.parseData=function(t){if(t._mVarKind!=GVAR_KIND.VAR_SZ)return!1;this.tabName=t._mData.psz[0]._mData.pstr;var e=t._mData.psz[1];return this.tabNum=e._mData.szSize,this.tabList=e._mData.psz,!0},e.getTable=function(t){for(var e,i=[],n=this.tabList[t]._mData,s=(n.szSize,0);13>s;s++)e=n.psz[s],e._mVarKind==GVAR_KIND.VAR_INT&&i.push(e.getInt()),e._mVarKind==GVAR_KIND.VAR_STR&&i.push(e.getStr());return i},e.getObj=function(t){if(0==this.tabNum)return null;for(var e=0;e<this.tabNum;e++){var i=this.tabList[e]._mData.psz[0];if(i.getInt()==t){var n=this.getTable(e);return this.tabObj[t]=n,n}}return null},t}(),GMapItem=function(){function t(){this.x=0,this.y=0,this.layer=0,this.mirror=0,this.scale=NaN,this.forward=NaN,this.aniKind=0,this.aniName=null,this.sName=null,this.playIdx=0,this.speed=NaN}__class(t,"display.GV.GMapItem");var e=t.prototype;return e.OnSetCreateBinAgv=function(t,e,i,n){var s=i.getBinData(),a=i.getBinLen();if(6>a)return!1;var r=s.getUint8(),h=0;h=128&r?s.getUint16():s.getUint8();var o=e.getSZPtr(h);if(null==o||o._mVarKind!=GVAR_KIND.VAR_INT)return!1;if(this.aniName=n.getIdxName(o.getInt()),8&r?this.mirror=1:this.mirror=0,1&r?(this.x=s.getInt32(),this.y=s.getInt32()):(this.x=s.getInt16(),this.y=s.getInt16()),2&r?this.layer=s.getInt32()-120:this.layer=0,4&r?this.scale=s.getFloat32():this.scale=1,this.sName="",16&r&&(this.speed=s.getFloat32()),64&r)for(var l=s.getUint8(),u=0;l>u;u++)this.sName+=String.fromCharCode(s.getUint16());return!0},t}(),GVar=function(){function t(){this._mData=null,this._mVarKind=0,this.vardata=null,t.m_noLoadName.buildmaterial=1}__class(t,"display.GV.GVar");var e=t.prototype;return e.isBinData=function(){return this._mVarKind==GVAR_KIND.VAR_BIN},e.getBinData=function(){if(this._mVarKind!=GVAR_KIND.VAR_BIN)return null;var t=this._mData.data;return t.pos=this._mData.dpos,t},e.getBinLen=function(){return this._mData.ptr.nDataLength},e.getStr=function(){return this._mVarKind==GVAR_KIND.VAR_STR?this._mData.pstr:null},e.getInt=function(){return this._mVarKind==GVAR_KIND.VAR_INT?this._mData:0},e.getSZArr=function(){if(this._mVarKind!=GVAR_KIND.VAR_SZ)return null;var t,e=[],i=0,n=this._mData.szSize;for(i=0;n>i;i++)switch(t=this.getSZPtr(i),null==t&&e.push(null),t._mVarKind){case GVAR_KIND.VAR_STR:e.push(t.getStr());break;case GVAR_KIND.VAR_INT:e.push(t.getInt());break;case GVAR_KIND.VAR_INT64:throw new Error("Not parse Int64 Data Format now...");case GVAR_KIND.VAR_FLOAT:e.push(t._mData);break;case GVAR_KIND.VAR_SZ:e.push(t.getSZArr());break;default:e.push(null)}return e},e.getSZPtr=function(t){return this._mData.psz[t]},e.resvarComplete=function(e){var i=this,n={};n.ext={},n.ext.dec="开始分析调入GVar",n.ext.act=1.58,StatManager.getInstance().send(n);var s=new Byte(e),a=new UintRef,r=s.getUint32();if(4289446487==r){if(r=s.getInt32(),r!=s.length-8)return void console.log("The res file length error!");a.uid=8,this.processVarData(s,a,s.length),gSys.WaitSignal(Handler.create(this,compl=function(){i.processGVarData();display.GV.GVar.mutiAniDic;t.completeH&&(t.completeH.run(),t.completeH.clear());var e={};e.ext={},e.ext.dec="GVar调入成功",e.ext.act=1.6,StatManager.getInstance().send(e)}),"GVComplete")}},e.getVarFromFile=function(e,i,n){return t.topVar=this,t.completeH=i,t.progressH=n,Laya.loader.load(e,new Handler(this,this.resvarComplete),new Handler(this,this.getProgress),"arraybuffer"),!0},e.getProgress=function(e){t.progressH&&t.progressH.runWith(e)},e.getIdxStr=function(t){var e=this._mData;return t>=e.szSize?null:e.psz[t]._mVarKind!=GVAR_KIND.VAR_SZ?null:(e=e.psz[t]._mData,e.psz[2]._mVarKind!=GVAR_KIND.VAR_STR?null:e.psz[2]._mData.pstr)},e.getIdxName=function(t){var e=this._mData;return t>=e.szSize?null:e.psz[t]._mVarKind!=GVAR_KIND.VAR_SZ?null:(e=e.psz[t]._mData,e.psz[0]._mVarKind!=GVAR_KIND.VAR_STR?null:e.psz[0]._mData.pstr)},e.getAniIdxData=function(e,i,n){var s=e.getStr();if(null==s)return!1;var a=this.getIdxStr(n._mData.psz[0]._mData);return a=a.substring(0,a.lastIndexOf(".")),a+=".png",t.mutiAniDic[s]=new Array(i,a.toLowerCase()),!0},e.getMuti2dStr=function(t){return this._mVarKind==GVAR_KIND.VAR_STR?this.getStr():(this._mVarKind==GVAR_KIND.VAR_BIN,null)},e.getMuti2DData=function(t,e){var i=null;if(t.uid=0,this._mVarKind==GVAR_KIND.VAR_STR){var n=this.getStr();n=n.substring(0,n.lastIndexOf(".")),n+=".ani";var s=ListData.getIns().getAni(n);if(s){var a=s._vdata;a.pos=s._vstart,e.runWith(a)}else Laya.loader.load(n,e,null,"arraybuffer")}else{if(this._mVarKind==GVAR_KIND.VAR_BIN)return i=this.getBinData(),t.uid=this.getBinLen(),e.runWith(i),null;console.log("Error kind to Process Muti2D...")}return null},e.getMapDataFromVar=function(e,i,n){if(i._mVarKind!=GVAR_KIND.VAR_SZ)return!1;var s,a,r,h=0,o=0,l=0,u=0,c=0,_=0,m=0,d=i._mData.psz;if(h=d[0]._mData,o=d[1]._mData,l=d[2]._mData,u=d[3]._mData,c=d[4]._mData,_=d[5]._mData,m=d[6]._mData,s=d[7],a=d[8],r=d[9],11!=d.length||d[10]._mVarKind!=GVAR_KIND.VAR_NONE)return!1;var p=this.getIdxStr(n.getSZPtr(o)._mData);if(p=p.substring(0,p.lastIndexOf(".")),p+=".png",e._mVarKind!=GVAR_KIND.VAR_STR)return!1;var f=[],g=new t,S=h%100;if(S>0&&a._mVarKind==GVAR_KIND.VAR_BIN){var b=a._mData.data;b.pos=a._mData.dpos;for(var y=a._mData.ptr.nDataLength,v=!1,I=0;y>2;){var x=b.getUint8(),D=b.getUint8();y-=2,v=!0,0==D&&(D=b.getUint32(),y-=4,v=!1);var w=b.pos;if(D>y)break;if(0>x||x>=2)console.log("The classno index Error...");else{var T=new GMapItem;g.setBinData(b,D),T.OnSetCreateBinAgv(I,n,g,this),f.push(T)}b.pos=w+D,y-=D,I++}}var C=new Array(h,o,l,u,c,_,m,s,a,r,f,p.toLowerCase());return t.mapList[e._mData.pstr]=C,!0},e.varzipComplete=function(e){var i,n=0,s=0;e instanceof display.GV.LstFile?(i=e._vdata,s=e._vstart,i.pos=s,n=e._fsize):(i=new Byte(e),n=i.length,t.tblLoadNum++);var a=new UintRef,r=i.getUint32();if(1612936919==r)return void console.log("Attention Error!!!Not Support zip File Format!!!");i.getUint32();3188823047==r&&(a.uid=8+s,this.processVarData(i,a,s+n)),t.tblNum>0&&t.tblNum==t.tblLoadNum&&(t.tableBud.parseData(t.tableList.buildtab),t.tabLoadSuc=!0,t.han&&(t.han.run(),t.han=null))},e.getVarFromZip=function(e){if(null==e)return!1;var i=e.substring(0,e.lastIndexOf("."));i+=".tbl",t.m_tblList=t.m_tblList||ListData.getIns();var n=t.m_tblList.getTbl(i);return n?this.varzipComplete(n):(t.tblNum++,Laya.loader.load(i,Handler.create(this,this.varzipComplete),null,"arraybuffer")),!0},e.processTexName=function(t){if(t.indexOf("ale")>=0){var e=t.substring(0,t.lastIndexOf(".ale"));return e+=".png",e.toLowerCase()}return t.toLowerCase()},e.processSndName=function(t){if(t.indexOf("adm")>=0){var e=t.substring(0,t.lastIndexOf(".adm"));return e+=".mp3",e.toLowerCase()}return t.toLowerCase()},e.processGameTable=function(){return!0},e.setBinData=function(t,e){0>e&&(e=0),this._mVarKind=GVAR_KIND.VAR_BIN,this._mData=new Asbin,this._mData.d=0,this._mData.ptr.nRefs=1,this._mData.ptr.dwDataFlag=0,this._mData.ptr.nDataLength=e,this._mData.data=t,this._mData.dpos=t.pos},e.processGVarData=function(){if(this._mVarKind!=GVAR_KIND.VAR_SZ)return void console.log("The Var Kind is not SZ...");var e=this._mData,i=e.szSize;try{for(var n=0;i>n;n++){var s=e.psz[n];if(s._mVarKind==GVAR_KIND.VAR_SZ){var a=s._mData;if(a.szSize<3)continue;var r=a.psz[0],h=a.psz[1],o=a.psz[2],l=a.psz[3];if(h._mVarKind==GVAR_KIND.VAR_INT){var u=h._mData;switch(u){case 4:o._mVarKind==GVAR_KIND.VAR_STR&&(t.sndDic[r._mData.pstr]=this.processSndName(o.getStr()));break;case 24:case 6:case 7:case 2:o._mVarKind==GVAR_KIND.VAR_STR&&(t.texDic[r._mData.pstr]=this.processTexName(o.getStr()));break;case 20:if(t.m_noLoadName[r._mData.pstr])break;if(o._mVarKind==GVAR_KIND.VAR_STR){var c=new t;t.tableList[r._mData.pstr]=c,c.getVarFromZip(o._mData.pstr)}else t.tableList[r._mData.pstr]=o;break;case 29:this.getMapDataFromVar(r,o,l);break;case 28:this.getAniIdxData(r,o,l)}}r._mVarKind==GVAR_KIND.VAR_STR}else console.log("INDEX @"+n+"@ is not SZ KIND,kind is:"+s._mVarKind+"...\n")}}catch(_){console.log("Parse GVar Error with:"+_)}},e.processVarData=function(e,i,n){var s=this,a=n-i.uid;if(1>a)return-1;e.pos=i.uid;var r=e.getUint8();if(15>=r)return this._mVarKind=GVAR_KIND.VAR_INT,this._mData=r,i.uid++,1;a--;var h=0;switch(r){case 255:return this._mVarKind=GVAR_KIND.VAR_NONE,i.uid++,1;case 16:return 1>a?-2:(h=e.getUint8(),
this._mVarKind=GVAR_KIND.VAR_INT,this._mData=h,i.uid+=2,2);case 17:return 2>a?-2:(h=e.getUint16(),this._mVarKind=GVAR_KIND.VAR_INT,this._mData=h,i.uid+=3,3);case 18:return 4>a?-2:(h=e.getUint32(),this._mVarKind=GVAR_KIND.VAR_INT,this._mData=h,i.uid+=5,5);case 19:return 4>a?-3:(this._mVarKind=GVAR_KIND.VAR_FLOAT,this._mData=e.getFloat32(),i.uid+=5,5);case 20:if(4>a)return-3;this._mVarKind=GVAR_KIND.VAR_INT64;var o=new Asdword;return o.d2=e.getUint32(),o.d1=e.getUint32(),this._mData=o,i.uid+=9,9;case 21:if(4>a)return-3;this._mVarKind=GVAR_KIND.VAR_DOUBLE;var l=new Asdword;return l.d2=e.getUint32(),l.d1=e.getUint32(),this._mData=l,i.uid+=9,9;case 22:return 12>a?-3:(this._mVarKind=GVAR_KIND.VAR_VECTOR3,this._mData=new Asvector3,this._mData.x=e.getFloat32(),this._mData.y=e.getFloat32(),this._mData.z=e.getFloat32(),i.uid+=13,13);case 23:return 8>a?-3:(this._mVarKind=GVAR_KIND.VAR_VECTOR2,this._mData=new Asvector2,this._mData.x=e.getFloat32(),this._mData.y=e.getFloat32(),i.uid+=9,9);case 32:return 4>a?-3:(h=e.getUint32(),this._mVarKind=GVAR_KIND.VAR_DATE,this._mData=null,i.uid+=5,5);case 33:return 8>a?-4:(this._mVarKind=GVAR_KIND.VAR_PTR,this._mData=new Asptr,this._mData.ptr=e.getUint32(),this._mData.ptrkind=e.getUint32(),i.uid+=9,9);case 48:return this._mVarKind=GVAR_KIND.VAR_STR,this._mData=new Asstr,this._mData.pstr="",this._mData.strid=0,i.uid+=1,1;case 50:return 5>a?-8:(h=e.getUint32(),i.uid+=5,this.setBinData(e,h),i.uid+=h,h+5);case 64:case 65:var u=i.uid;if(65==r){if(5>a)return-21;h=e.getUint32(),i.uid+=5}else{if(1>a)return-20;h=e.getUint8(),i.uid+=2}if(h>a)return-25;this._mVarKind=GVAR_KIND.VAR_SZ,this._mData=new Assz(h);var c=0;if(2e3>h)for(var _=0;h>_;_++){if(i.uid>=n)return-22;if(c=this._mData.psz[_].processVarData(e,i,n),0>c)return c}else for(var m=Math.floor(h/t.MAX_LOOP),d=0;m>=d;d++)Laya.timer.frameOnce(d,this,delayF=function(){var a=t.GV_PFNUM*t.MAX_LOOP,r=(t.GV_PFNUM+1)*t.MAX_LOOP;r=h>r?r:h;for(var o=a;r>o;o++){if(i.uid>=n)return-22;if(c=s._mData.psz[o].processVarData(e,i,n),0>c)return c}return r==h&&gSys.SetSignal("GVComplete"),t.GV_PFNUM++,-100});return i.uid-u;case 49:if(6>a)return-5;if(h=e.getUint32(),2*h+5>a)return-6;this._mVarKind=GVAR_KIND.VAR_STR,this._mData=new Asstr;for(var p=0;h>p;p++)this._mData.pstr+=String.fromCharCode(e.getUint16());return i.uid+=2*h+5,2*h+5;default:console.log("No Kind process function find..")}return-100},t.getTable=function(e){return t.tableList[e]},t.completeH=null,t.progressH=null,t.MAX_LOOP=200,t.s_cryptTableneedinit=!1,t.cryptTable=null,t.topVar=null,t.tblNum=0,t.tblLoadNum=0,t.tabLoadSuc=!1,t.m_tblList=null,t.han=null,t.GV_PFNUM=0,__static(t,["tableList",function(){return this.tableList=new Object},"mapList",function(){return this.mapList=new Object},"texDic",function(){return this.texDic=new Object},"sndDic",function(){return this.sndDic=new Object},"mutiAniDic",function(){return this.mutiAniDic=new Object},"tableBud",function(){return this.tableBud=new BuildTab},"m_noLoadName",function(){return this.m_noLoadName=new Object}]),t}(),GVarData=function(){function t(){this.nRefs=0,this.nDataLength=0,this.nAllocLength=0,this.dwDataFlag=0,this.strData=null}__class(t,"display.GV.GVarData");var e=t.prototype;return e.dataStr=function(){return this.strData},t}(),GVAR_KIND=function(){function t(){this._mkind=0}return __class(t,"display.GV.GVAR_KIND"),t.VAR_NONE=0,t.VAR_INT=1,t.VAR_FLOAT=2,t.VAR_INT64=3,t.VAR_DOUBLE=4,t.VAR_VECTOR3=32768,t.VAR_VECTOR2=36864,t.VAR_PTR=16,t.VAR_BAND=48,t.VAR_STR=256,t.VAR_BIN=512,t.VAR_DATE=768,t.VAR_PTREX=1024,t.VAR_MATRIX4=1280,t.VAR_SCRIPT=1536,t.VAR_VECTOR4=1792,t.VAR_MATRIX3=2048,t.VAR_SZ=3840,t.VAR_END=61440,t}(),Int64Ref=function(){function t(t){this.uint64=NaN,void 0===t&&(t=0),this.uint64=t}__class(t,"display.GV.Int64Ref");var e=t.prototype;return e.setFromInt2=function(t,e){this.uint64=e*Math.pow(2,32)+t},t}(),Itemtab=function(){function t(t){if(this.itemName=null,this.itemNum=0,this.itemList=null,this.itemArr=null,this.itemObj={},!t||!this.parseData(t))throw new Error("报错了------------------------------解析数据错处")}__class(t,"display.GV.Itemtab");var e=t.prototype;return e.parseData=function(t){if(t._mVarKind!=GVAR_KIND.VAR_SZ)return!1;this.itemName=t._mData.psz[0]._mData.pstr;var e=t._mData.psz[1];return this.itemNum=e._mData.szSize,this.itemArr=e.getSZArr(),!0},e.getObj=function(t){if(0==this.itemNum)return null;if(this.itemObj[t])return this.itemObj[t];for(var e=0;e<this.itemNum;e++)if(this.itemArr[e][0]==t)return this.itemObj[t]=this.itemArr[e],this.itemArr[e];return null},e.GetIdByName=function(t){if(0==this.itemNum)return 0;for(var e=this.itemNum;--e>-1;)if(this.itemArr[e][2]==t)return this.itemArr[e][0];return 0},t}(),ListData=function(){function t(){this.m_completeHandler=null,this.m_tblFileList=null,this.m_tblNum=0,this.m_aniFileList=null,this.m_aniNum=0}__class(t,"display.GV.ListData");var e=t.prototype;return e.loadData=function(t){this.m_completeHandler=t,Laya.loader.load("dat/tbllist.pkl",Handler.create(this,this.okTblList),null,"arraybuffer"),Laya.loader.load("dat/anilist.pkl",Handler.create(this,this.okAniList),null,"arraybuffer")},e.okTblList=function(t){this.completeList(t,1)},e.okAniList=function(t){this.completeList(t,2)},e.completeList=function(t,e){for(var i=new Byte(t),n=(i.readUTFBytes(3),i.getUint8(),i.getUint16()),s=new Array(n),a=0;n>a;a++)s[a]=new LstFile,s[a]._fname="dat/"+i.readUTFString(),s[a]._vstart=i.getUint32(),s[a]._fsize=i.getUint32(),s[a]._vdata=i;1==e&&(this.m_tblNum=n,this.m_tblFileList=s),2==e&&(this.m_aniNum=n,this.m_aniFileList=s),this.m_completeHandler&&this.m_aniFileList&&this.m_tblFileList&&this.m_completeHandler.run()},e.getTbl=function(t){for(var e=this.m_tblFileList,i=0;i<this.m_tblNum;i++)if(e[i]._fname==t)return e[i];return null},e.getAni=function(t){for(var e=this.m_aniFileList,i=0;i<this.m_aniNum;i++)if(e[i]._fname==t)return e[i];return null},t.getIns=function(){return null==t._ins&&(t._ins=new t),t._ins},t._ins=null,t}(),LstFile=function(){function t(){this._fname=null,this._vstart=0,this._fsize=0,this._vdata=null}return __class(t,"display.GV.LstFile"),t}(),Resdef=function(){function t(){}return __class(t,"display.GV.Resdef"),t.RES_csysname=0,t.RES_ctype=1,t.RES_cdata=2,t.RES_posres=3,t}(),RES_TYPE=function(){function t(){}return __class(t,"display.GV.RES_TYPE"),t.RESTYPE_ERR=0,t.RESTYPE_MODEL=1,t.RESTYPE_TEX=2,t.RESTYPE_ACT=3,t.RESTYPE_SOUND=4,t.RESTYPE_MUSIC=5,t.RESTYPE_UIICON=6,t.RESTYPE_UITEX=7,t.RESTYPE_UICOM=8,t.RESTYPE_PAREFF=9,t.RESTYPE_PARTEX=10,t.RESTYPE_PARMOD=11,t.RESTYPE_PARSND=12,t.RESTYPE_COM=13,t.RESTYPE_COMSCE=14,t.RESTYPE_TERRTEX=15,t.RESTYPE_SKYTEX=16,t.RESTYPE_SCEDATA=17,t.RESTYPE_SCEPREVIEW=18,t.RESTYPE_DATA=19,t.RESTYPE_DATATAB=20,t.RESTYPE_WORLDTERR=21,t.RESTYPE_WORLDMAP=22,t.RESTYPE_WORLDROAD=23,t.RESTYPE_INNERPIC=24,t.RESTYPE_OUTDOC=25,t.RESTYPE_2DRES=26,t.RESTYPE_3DRES=27,t.RESTYPE_2DANI=28,t.RESTYPE_LINGMAP=29,t.RESTYPE_PIXEL3D=30,t.RESTYPE_PIXEL3DWORLD=31,t.RESTYPE_DOC=32,t.RESTYPE_PIXEL3DLIB=33,t.RESTYPE_MOVIE=34,t.RESTYPE_END=35,t}(),StringOp=function(){function t(){}return __class(t,"display.GV.StringOp"),t.GetWord=function(t,e){var i=t.indexOf(e);return-1==i?t:t.substr(0,i)},t.GetWordM=function(t,e){if(!t)return["",""];var i=t.indexOf(e);return-1==i?[t,""]:[t.substring(0,i),t.substring(i+1)]},t.Compare=function(t,e){return t==e?1:0},t.CompareMax=function(t,e){return t==e?1:0},t.Left=function(t,e){return void 0===e&&(e=""),e?e.substr(0,t):""},t.Right=function(t,e){return void 0===e&&(e=""),e?e.substr(e.length-t,t):""},t}(),StringRef=function(){function t(){this.ustr=null}return __class(t,"display.GV.StringRef"),t}(),UintRef=function(){function t(t){this.uid=0,void 0===t&&(t=0),this.uid=t}return __class(t,"display.GV.UintRef"),__static(t,["t1",function(){return this.t1=new t},"t2",function(){return this.t2=new t}]),t}(),GBottomBtnView=function(){function t(){this.m_pLink=null,this.manu=null,this.m_nMacItemid=-1,this.manu||Laya.loader.load("assets/manufacture.json",new Handler(this,this.addManu),null,"atlas")}__class(t,"display.Machine.GBottomBtnView");var e=t.prototype;return e.addManu=function(){Assets.checkRes("assets/manufacture.json")&&(this.manu=ManuFacture.getInstance())},e.show=function(t){if(void 0===t&&(t=1),!this.manu)return void Laya.timer.once(100,this,this.show);if(t){var e=this.m_pLink.getCentPtOnScr();e.x-=100,e.y+=150;var i=this.m_pLink.GetPopItem(),n=this.m_pLink.m_szQueItem||[],s=this.m_pLink.m_nMaxQue;this.manu.title.text=this.m_pLink.m_sName,this.manu.fillData(i.slice(),this.m_pLink.GetBuildID()),this.manu.fillcurrent(n.slice(),this.m_pLink.GetBuildID()),this.manu.fillNumber(s,this.m_pLink.GetBuildID());var a=470+e.x,r=355+e.y,h=0,o=0;return a>Laya.stage.width&&(e.x-=a-Laya.stage.width,h=-(this.m_pLink.getCentPtOnScr().x-e.x-100)),r-355>Laya.stage.height&&(e.y-=r-Laya.stage.height-300,o=-(this.m_pLink.getCentPtOnScr().y-e.y+150)),550>a&&(e.x+=550-a,h=e.x+100-this.m_pLink.getCentPtOnScr().x),650>r&&(e.y=285,o=e.y-this.m_pLink.getCentPtOnScr().y-150),(0!=h||0!=o)&&DisplayItem.m_pBk.setScrOffset(h,o,!0,200),this.m_pLink.GetBuildSysName().indexOf("挖掘机")>-1?(this.manu.MutiText(),CountDown.getInstance().targetName="挖掘机",this.manu.m_pOreBtn.visible=!0):this.manu.m_pOreBtn.visible=!1,DisplayTools.addTarget(this.manu,GameMain._ins.m_gameUI.incontainer,{x:e.x,y:e.y,scaleX:.3,scaleY:.3}),void this.manu.status(!0)}this.manu.removeSelf()},e.OnCreate=function(){},e.OnLinkObjRefresh=function(t){},e.GetMacLvUpNeed=function(t){return null},__getset(0,e,"Gmb",null,function(t){this.m_pLink=t,this.manu.bottomBtn=this}),__getset(0,e,"manus",function(){return this.manu?this.manu:null}),t}(),OnBuildPop=function(){function t(){this.m_Link=null,this.m_szbuild=null,this.m_nAllCoolT=0}__class(t,"display.Machine.OnBuildPop");var e=t.prototype;return e.OnPrepareShow=function(){},e.OnCDOver=function(t){this.m_Link.EndBuildByDia(CountDown.getInstance().GetLeftTime(),t)},e.TimeEnd=function(){},e.OnCreate=function(){var t=DataTable.m_iBuildTab.Get(this.m_Link.GetBuildID());if(null==t)throw new Error("buildid not find id="+this.m_Link.GetBuildID());this.m_szbuild=t;var e=NaN,i=NaN;e=this.m_Link.getCentPtOnScr().x,i=this.m_Link.getCentPtOnScr().y,CountDown.getInstance().sdClick=new Handler(this,this.OnCDOver),CountDown.getInstance().Init(60*this.m_szbuild[13],this.m_Link.m_nLeftSec,1,this),CountDown.getInstance().displayInStage||DisplayTools.addTarget(CountDown.getInstance(),GameMain._ins.m_gameUI.incontainer,{x:e-80,y:i+30}),CountDown.getInstance().RegLeadArrow("机器_建造加速")},e.GetNeedDiamond=function(t){var e=DataTable.m_iSelfUser.GetJszsfy(t,60*this.m_szbuild[13]);return 1>e&&(e=1),e},__getset(0,e,"gmbMac",null,function(t){this.m_Link=t}),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}(),IconItemChat=function(){function t(){if(this.iconReg=/\/:[a-z]{2}/gi,this.iconObject=null,this.arr=[],this.max=10,this.many=5,this.current=0,t.instance)throw new Error("请使用 getInstance()来获取实例");this.init()}__class(t,"display.mainIcon.chat.IconItemChat");var e=t.prototype;return e.init=function(){this.addIcon(this.max),this.iconObject=new Object,this.iconObject["/:qq"]="ui/icon/51aef02b1fe8f005.png",this.iconObject["/:ww"]="ui/icon/51bab9407bad5008.png",this.iconObject["/:ee"]="ui/icon/51bac0067bad500b.png",this.iconObject["/:rr"]="ui/icon/51bad2637cc22008.png",this.iconObject["/:tt"]="ui/icon/51beffb0c0eea00d.png",this.iconObject["/:yy"]="ui/icon/51c00c71d4e15004.png",this.iconObject["/:uu"]="ui/icon/51c1a188ea255004.png",this.iconObject["/:ii"]="ui/icon/51c2a3a500059005.png",this.iconObject["/:oo"]="ui/icon/51c2a4a7fe02a004.png",this.iconObject["/:pp"]="ui/icon/51c04fced4e1501a.png",this.iconObject["/:aa"]="ui/icon/51c12bc0e3263004.png",this.iconObject["/:ss"]="ui/icon/51dcdb969fc6b01d.png",this.iconObject["/:dd"]="ui/icon/524686c437c49005.png",this.iconObject["/:ff"]="ui/icon/524678cb365da009.png",this.iconObject["/:gg"]="ui/icon/524665f033464016.png",this.iconObject["/:hh"]="ui/icon/524647a13346400d.png",this.iconObject["/:jj"]="ui/icon/524642783346400a.png",this.iconObject["/:kk"]="ui/icon/5241312be78ee00d.png",this.iconObject["/:ll"]="ui/icon/51cec4a3c2ca9006.png",this.iconObject["/:zz"]="ui/icon/51d3f5b211b5e004.png"},e.setIcon=function(t,e){var i=[];if(i=t.text.match(this.iconReg),t.text=t.text.replace(this.iconReg,"_&_"),i)for(var n,s,a=0,r=0;r<i.length;r++)a=t.text.indexOf("_&_"),n=t.getCharPoint(a),s=this.getExp(),s.skin=this.iconObject[i[r]],s.scale(.3,.3),DisplayTools.addTarget(s,e,{x:n.x+2,y:n.y-3}),t.text=t.text.replace("_&_","     ")},e.addIcon=function(t){for(var e=0;t>e;e++)this.arr.push(new Image2)},e.getExp=function(){return this.current>this.arr.length&&this.addIcon(this.many),this.current++,this.arr.shift()},e.dispose=function(t){this.current--,this.arr[this.arr.length]=t},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}(),MessageManger=function(){function t(){this.m_szData=[],this.m_nCurrent=0,SysID.FRD_ON("inboxchg",this,this.UpdateInbox),SysID.FRD_ON("inboxadd",this,this.AddMessage),SysID.FRD_ON("inboxsent",this,this.ModMessage),SysID.FRD_ON("chgchatroom",this,this.ChgRoomName)}__class(t,"display.mainIcon.chat.MessageManger");var e=t.prototype;return e.UpdateInbox=function(t){if(t||(t=[]),DataTable.m_iFriendBar.m_szInbox){var e=DataTable.m_iFriendBar.m_szInbox[1];DataTable.m_iFriendBar.m_szInbox[3]&&(e=ArrOp.SzLink(e,DataTable.m_iFriendBar.m_szInbox[3])),this.m_szData=[];var i=e.length,n=0,s=0;for(s=0;i>s;s++)n=SysID.GROUP_MESSAGE(e[s]),this.SetGroupData(n,e[s]);var a=0,r=0,h=0;for(r=0;r<this.m_szData.length;r++){for(h=0;h<this.m_szData[r][1].length;h++)if(this.m_szData[r][1][h]){var o=this.m_szData[r][1][h][3];"string"==typeof o?a=DateOp.SubDateSec(DateOp.SetDateStr(o),DateOp.SetDate(null,2013,1,1,0,0,0,0)):o instanceof Date&&(a=DateOp.SubDateSec(o,DateOp.SetDate(null,2013,1,1,0,0,0,0))),this.m_szData[r][1][h][5]&&this.m_szData[r][1][h][6].length>0&&(a+=1610612735),this.m_szData[r][1][h]=ArrOp.InsertSz(-1,this.m_szData[r][1][h],a)}for(this.m_szData[r][1]=ArrOp.SzSort(this.m_szData[r][1],0),h=0;h<this.m_szData[r][1].length;h++)this.m_szData[r][1][h]=ArrOp.DelSz(0,this.m_szData[r][1][h],1)}for(s=0;s<t.length;s++)this.ModMessage(0,t[s]);Laya.loader.getRes(Assets.chatResUrl)&&PanelMain.isInit&&Mail.getInstance().setMailData(this.m_szData)}},e.AddMessage=function(t){if(-101!=t[1]||-100==this.m_nCurrent){var e=0;if(e=SysID.GROUP_MESSAGE(t),this.SetGroupData(e,t),Laya.loader.getRes(Assets.chatResUrl)&&PanelMain.isInit){var i=e;if(-101==i&&(i=-100),this.m_nCurrent==i){var n=ArrOp.SzSearch(-100,this.m_szData);-1!=n&&Chat.getInstance().updateChatMessage(this.m_szData[n][1])}-100!=this.m_nCurrent&&(Mail.getInstance().setMailData(this.m_szData),Mail.getInstance().mailList.scrollTo(0))}}},e.OnAddWorldMsgList=function(t){-100!=this.m_nCurrent},e.ModMessage=function(t,e){var i=SysID.GROUP_MESSAGE(e);if(this.ModGroupData(i,e),Laya.loader.getRes(Assets.chatResUrl)&&PanelMain.isInit){var n=0;if(-100==this.m_nCurrent&&-101==i&&(n=1),0==this.m_nCurrent&&1==i&&(n=1),this.m_nCurrent==i||n){var s=ArrOp.SzSearch(-100,this.m_szData);-1!=s&&Chat.getInstance().updateChatMessage(this.m_szData[s][1])}-100!=this.m_nCurrent&&(Mail.getInstance().setMailData(this.m_szData),Mail.getInstance().mailList.scrollTo(0))}},e.ModGroupData=function(t,e){-101==t&&(t=-100),1==t&&(t=0);var i=0,n=ArrOp.SzSearch(t,this.m_szData);if(0>n)return n=this.m_szData.length,void this.m_szData.push([t,[]]);var s,a,r,h=this.m_szData[n][1];for(i=0;i<h.length;i++)if(r=h[i],r[4]!=FriendDef.MESSAGE_STATUS_DELETE){if(s=r[2],(r[4]==FriendDef.MESSAGE_STATUS_SENDING||s.indexOf("语音i")>=0||s.indexOf("class=audio")>=0)&&r.content==e[2]&&r.sender==e[0]&&r.target==e[1]){if(a=e[2],a.replace("R0","R1"),e[2]=a,e[4]==FriendDef.MESSAGE_STATUS_DELETE){this.m_szData[n][1]=ArrOp.DelSz(i,this.m_szData[n][1]),h=ArrOp.DelSz(i,h),i--;continue}this.m_szData[n][1][i]=e}}else this.m_szData[n][1]=ArrOp.DelSz(i,this.m_szData[n][1]),h=ArrOp.DelSz(i,h),i--},e.SetGroupData=function(t,e){-101==t&&(t=-100),1==t&&(t=0);var i=ArrOp.SzSearch(t,this.m_szData);if(0>i){i=this.m_szData.length;var n=[];return n.push(e),this.m_szData.push([t,n]),void MainIcon.getInstance().CheckWorldTradeStgateChged()}this.m_szData[i][1].push(e),-100==t&&this.m_szData[i][1].length>50&&(this.m_szData[i][1]=ArrOp.DelSz(0,this.m_szData[i][1],this.m_szData[i][1].length-50)),MainIcon.getInstance().CheckWorldTradeStgateChged()},e.ChgRoomName=function(t){if(Laya.loader.getRes(Assets.chatResUrl)&&PanelMain.isInit){if(0>t)return void(Chat.getInstance().roomBtn.label="连接中请稍后！");t||(t=0);var e=PubDef.GetChatRoomName(t);Chat.getInstance().roomBtn.label=e}},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t._instance=null,t}(),FriendDataManger=function(){function t(){if(this.m_szAllFrdData=[],this.m_szGroupHelpCount=null,t.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(t,"display.mainIcon.friendInfoPanel.FriendDataManger");var e=t.prototype;return e.init=function(){SysID.FRD_ON("frdchged",this,this.OnUserDataChged),SysID.FRD_ON("frdgroup",this,this.OnUserGroupChged)},e.OnUserDataChged=function(t){FriendInfo.isstruct(t)&&(this.OnUserGroupChged(),this.OnHelpCount())},e.OnUserGroupChged=function(){this.GetFrdData(),Laya.loader.getRes(Assets.frdResUrl)&&FriendPanel.isInit&&(FriendPanel.getInstance().updataSearch(),FriendPanel.getInstance().onClick1(FriendPanel.getInstance().m_nCurIndex))},e.GetFrdData=function(){var t=[],e=DataTable.m_iFriendBar.GetAllFriendVar().slice(),i=0;for(i=0;i<e.length;i++)FriendDef.IsUncleJamie(e[i][0])||t.push([e[i][5][0],e[i]]);t=ArrOp.SzSort(t,1),e.length=0;var n=[0,0,"",0,0,[],0];n[0]=-100,n[2]="邀请好友",n[5]=[300,0,[],0,""],n[1]=2,e.push(n);var s=[0,0,"",0,0,[],0];for(s[0]=1,s[2]="杰米大叔",s[5]=[99,0,[],0,""],s[1]=2,e.push(s),i=0;i<t.length;i++)FriendInfo.isstruct(t[i][1])&&e.push(t[i][1]);var a=[0,0,"",0,0,[],0];a[0]=-101,a[2]="添加关注",a[5]=[-1,0,[],0,""],a[1]=2,e.push(a);var r=[0,0,"",0,0,[],0];r[0]=-101,r[2]="添加关注",r[5]=[-1,0,[],0,""],r[1]=1,e.push(r),this.m_szAllFrdData=e,Laya.loader.getRes(Assets.frdResUrl)&&FriendPanel.isInit&&(FriendPanel.getInstance().m_szAllFrdData=this.m_szAllFrdData)},e.OnHelpCount=function(){var t=this.m_szAllFrdData,e=[];ArrOp.SzAddRef(2,0,e),ArrOp.SzAddRef(1,0,e),ArrOp.SzAddRef(0,0,e);for(var i=0;i<t.length;i++)t[i][6]>0&&ArrOp.SzAddRef(t[i][1],1,e);this.m_szGroupHelpCount!=e&&(this.m_szGroupHelpCount=e,MainIcon.getInstance().OnHelpCountRef(e))},t.getInstance=function(){return t.instance||(t.isboo=!1,t.instance=new t,t.isboo=!0),t.instance},t.isboo=!0,t.instance=null,t}(),QuestCompleteAni=function(){function t(){}return __class(t,"display.mainIcon.quest.QuestCompleteAni"),t.GetIsPlay=function(t){var e;e=gSys.ReadPublicVar("rainbow","questani"),3!=e.length&&(e=ArrOp.InitSz(3,null));var i=0;SysID.IsZXRWID(t)&&(i=0),SysID.IsRCRWID(t)&&(i=1),SysID.IsHDRWID(t)&&(i=2);var n=ArrOp.SzHalfSearch(t,e[i]);return 0>n?0:1},t.SetIsPlay=function(t){var e;e=gSys.ReadPublicVar("rainbow","questani"),3!=e.length&&(e=ArrOp.InitSz(3,null));var i=0;SysID.IsZXRWID(t)&&(i=0),SysID.IsRCRWID(t)&&(i=1),SysID.IsHDRWID(t)&&(i=2);var n=ArrOp.SzHalfSearch(t,e[i]);0>n&&(e[i]=ArrOp.InsertSz(-n-1,e[i],t)),gSys.WritePublicVar("rainbow","questani",e)},t.ClearIsPlay=function(t,e){void 0===e&&(e=-1);var i;i=gSys.ReadPublicVar("rainbow","questani"),3!=i.length&&(i=ArrOp.InitSz(3,null));var n=0;if(SysID.IsZXRWID(t)&&(n=0),SysID.IsRCRWID(t)&&(n=1),SysID.IsHDRWID(t)&&(n=2),e>=0)i[e]=null;else{var s=ArrOp.SzHalfSearch(t,i[n]);s>=0&&(i[n]=ArrOp.DelSz(s,i[n]))}gSys.WritePublicVar("rainbow","questani",i)},t}(),MathUtil1=function(){function t(){}return __class(t,"display.Misk.MathUtil",null,"MathUtil1"),t.Vec2Dis=function(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))},t.rand=function(t,e){return void 0===e&&(e=0),Math.random()*(t-e)+e},t.TEMP_MAX=function(t,e){return t>e?t:e},t.TEMP_MIN=function(t,e){return t>e?t:e},t}(),GRect=function(){function t(){this.left=0,this.top=0,this.right=0,this.bottom=0}return __class(t,"display.MutiAni.GRect"),t}(),GVertex=function(){function t(){this.x=NaN,this.y=NaN,this.u=NaN,this.v=NaN,this.color=0,this.r=NaN,this.g=NaN,this.b=NaN,this.a=NaN}__class(t,"display.MutiAni.GVertex");var e=t.prototype;return e.ip=function(t,e,i,n){void 0===n&&(n=1),0==n&&(i=0),t.x=(e.x-this.x)*i+this.x,t.y=(e.y-this.y)*i+this.y,1==n?(t.u=this.u,t.v=this.v):(t.u=(e.u-this.u)*i+this.u,t.v=(e.v-this.v)*i+this.v),t.r=(e.r-this.r)*i+this.r,t.g=(e.g-this.g)*i+this.g,t.b=(e.b-this.b)*i+this.b,t.a=(e.a-this.a)*i+this.a},e.ipA=function(t,e,i,n,s){void 0===s&&(s=1),0==s&&(n=0),t[e++]=(i.x-this.x)*n+this.x,t[e++]=(i.y-this.y)*n+this.y,1==s?(t[e++]=this.u,t[e++]=this.v):(t[e++]=(i.u-this.u)*n+this.u,t[e++]=(i.v-this.v)*n+this.v),t[e++]=(i.r-this.r)*n+this.r,t[e++]=(i.g-this.g)*n+this.g,t[e++]=(i.b-this.b)*n+this.b,t[e++]=(i.a-this.a)*n+this.a},e.copy=function(t,e){t[e++]=this.x,t[e++]=this.y,t[e++]=this.u,t[e++]=this.v,t[e++]=this.r,t[e++]=this.g,t[e++]=this.b,t[e++]=this.a},t}(),Kind=function(){function t(){this.kindName=null,this.kindidx=-1,this.imgname=null,this.kindImg=null,this.showrect=null,this.m_aniShowRect=null,this.m_pPointSz=null,this.m_fMaxFrameTime=NaN,this.m_ptInfoSz=null,this.m_nRepeatMode=0,this._vecPt=null,this._f32Arr=null,this._vb=null,this._fEtime=0,this._vecCacheD=null,this._maxTime=0,this._maxFrame=0,this._vbset=!1,this._vbCache=!0,this._imgCheck=!0,this._imgLoaded=!0,this.m_ilHandler=null,this.m_bNoAni=!1,this.m_lfIdx=0,this.m_vecAlphaBack=null,this.m_bFirstSA=!0,this.tracks=new Array,this.m_pointRect=new GRect,this._values=new aniShaderValue}__class(t,"display.MutiAni.Kind");var e=t.prototype;return e.getKindTime=function(){return this._maxTime>0?this._maxTime:this.processMaxTime()},e.GetPointSz=function(){return this.m_pPointSz},e.loadKind=function(t){var e=t.getUint16();e=t.getUint16(),this.kindName=t.getCustomString(e),e=t.getUint16(),this.imgname=t.getCustomString(e),this.m_pointRect.left=t.getInt16(),this.m_pointRect.top=t.getInt16(),this.m_pointRect.right=t.getInt16(),this.m_pointRect.bottom=t.getInt16();var i=t.getUint8(),n=0;if(32==i)for(this.m_pPointSz=__newvec(32,0),n=0;32>n;n++)this.m_pPointSz[n]=t.getUint32();else if(0!=i)return!1;i=t.getInt16();var s=0;if(1>i||i>1e3)return!1;for(this.tracks=new Array(i),n=0;i>n;n++){this.tracks[n]=new Track;var a=this.tracks[n];if(s=t.getUint8(),10!=s)return!1;var r=t.getInt16();if(1>r||r>500)return!1;a.m_keyFrameNum=r,a.m_loopMode=t.getUint8(),a.m_interpolationKind=t.getUint8();var h=a.m_showMaxRect;h.left=t.getInt32(),h.top=t.getInt32(),h.right=t.getInt32(),h.bottom=t.getInt32(),a.m_offCmpX=t.getFloat32(),a.m_offCmpY=t.getFloat32(),a.m_pKeySz=new Array(r);for(var o=0,l=null,u=0;r>u;u++){a.m_pKeySz[u]=new TagKey,a.m_pKeySz[u].keytime=t.getFloat32();for(var c=0;4>c;c++)l=a.m_pKeySz[u].pt,l[c].x=t.getFloat32(),l[c].y=t.getFloat32(),l[c].u=t.getFloat32(),l[c].v=t.getFloat32(),o=t.getUint32(),l[c].a=(o>>>24&255)/255,l[c].b=(o>>>16&255)/255,l[c].g=(o>>>8&255)/255,l[c].r=(255&o)/255}a.m_fEndTime=a.m_pKeySz[r-1].keytime}if(this.m_pointRect.left||this.m_pointRect.right||this.m_pointRect.top||this.m_pointRect.bottom||(this.m_pointRect=this.tracks[0].m_showMaxRect),i=t.getInt16(),i>0){this.m_ptInfoSz=new Array(i);var _=this.m_ptInfoSz;for(n=0;i>n;n++)_[n]=new Ptinfo,s=t.getInt16(),_[n].name=t.getCustomString(s),_[n].x=t.getFloat32(),_[n].y=t.getFloat32()}return s=t.getUint16(),61149!=s?!1:(this._fEtime=0,!0)},e.getKeyData=function(t){return t>=this.tracks[0].m_pKeySz.length?null:this.tracks[0].m_pKeySz[t]},e.GetNamedPt=function(t,e,i){if(!this.m_ptInfoSz)return!1;for(var n=this.m_ptInfoSz,s=0;s<n.length;s++)if(n[s].name==t)return e.uid=n[s].x,i.uid=n[s].y,!0;return n.length>0&&(e.uid=n[0].x,i.uid=n[0].y),!1},e._getAniData=function(t,e,i){for(var n=this.tracks.length,s=0;n>s;s++)this.tracks[s].getRVer(t,0,e,4*s*8+i)},e.setNoAni=function(t){this.m_bNoAni!=t&&(this.m_bNoAni=t,1==this.m_bNoAni&&(this._vbset=!1,this._vecCacheD=null,this._vb&&(this._vb.dispose(),this._vb=null)))},e.processMaxTime=function(){var t=this.tracks.length,e=0,i=0,n=null;if(this.m_bNoAni)return 0;for(e=0;t>e;e++)n=this.tracks[e],1!=n.m_pKeySz.length&&n.m_fEndTime>i&&(i=n.m_fEndTime);return i},e.processCache=function(){if(!this._vecCacheD&&0!=this._vbCache){var e=this.tracks,i=0,n=e.length,s=this.processMaxTime();if(0==s)return this._vecCacheD=new Array(4*n*8),this._getAniData(0,this._vecCacheD,0),void(this._maxTime=0);s>10&&(this._vbCache=!1);var a=0,r=1/t.framesPerSec;a=s*t.framesPerSec,a=Math.ceil(a);var h=4*n*8;this._vecCacheD=new Array(h*a),t.tCacheLen+=this._vecCacheD.length,this._maxTime=r*a,this._maxFrame=a;var o=0;for(i=0;a>i;i++){o=i*r;for(var l=i*h,u=0;n>u;u++)e[u].getRVer(o,0,this._vecCacheD,32*u+l)}}},e.getFrameIdx=function(e){if(0==this._maxTime)return 0;var i=e%this._maxTime,n=i/(1/t.framesPerSec),s=Math.floor(n);return n-s>1/t.framesPerSec/2&&s++,s>=this._maxFrame?0:s},e.checkImg=function(t){if(this._imgCheck=!1,!(this.imgname.indexOf(":")<0)){var e=this.imgname.split(":")[1],i=GVar.texDic[e];i&&i!=t._mdata.imgName&&(this._imgLoaded=!1,Laya.loader.load(i,Handler.create(this,this.imgLoaded),null,"image"))}},e.dispose=function(){this._vb&&(this._vb.dispose(),this._vb=null)},e.imgLoaded=function(t){this.kindImg=t,this.kindImg.canInAtlas=!1,this._values&&(this._values.textureHost=this.kindImg),this._imgLoaded=!0,this.m_ilHandler&&(this.m_ilHandler.run(),this.m_ilHandler=null)},e.getShader=function(){return null==this._values.textureHost&&(this._values.textureHost=this.kindImg),this._values},e.srender=function(t,e,i,n){var s=this.tracks.length;this._vb&&(this._vbCache&&(this._f32Arr||(this._f32Arr=new Float32Array(this._vecCacheD)),this._vbset||(this._vb.setdata(this._f32Arr),this._vbset=!0)),t.ctx.setIBVB(e,i,null,this._vb,6*s,null,AniShader.shader,this._values,0,this.m_lfIdx))},e.setAlpha=function(t){if(this._vecCacheD){var e=this._vecCacheD.length/8,i=0;if(this.m_bFirstSA){for(this.m_vecAlphaBack=new Array(e),i=0;e>i;i++)this.m_vecAlphaBack[i]=this._vecCacheD[8*i+7];this.m_bFirstSA=!1}for(i=0;e>i;i++)this._vecCacheD[8*i+7]=this.m_vecAlphaBack[i]*t;this._f32Arr=null,this._vbset=!1}},e.preCache=function(){if(!this._f32Arr){this.tracks.length;this.processCache(),this._vbCache&&(this._f32Arr||(this._f32Arr=new Float32Array(this._vecCacheD)),null==this._vb&&(this._vb=new Buffer(34962)),this._vbset||(this._vb.setdata(this._f32Arr),this._vbset=!0))}},e.render=function(t,e,i,n,s,a){void 0===a&&(a=0);var r=this.tracks.length,h=4*r*8;this._imgCheck&&this.checkImg(t),this.processCache(),this._vbCache?this._f32Arr||(this._f32Arr=new Float32Array(this._vecCacheD)):this._f32Arr||(this._f32Arr=new Float32Array(h));var o=this.getFrameIdx(a);if(this._vbCache)o=o*h*4;else{for(var l=o*h,u=0;h>u;u++)this._f32Arr[u]=this._vecCacheD[u+l];o=0}null==this._vb&&(this._vb=new Buffer(34962)),null==this._values.textureHost&&(this._values.textureHost=this.kindImg),this._vbCache?this._vbset||(this._vb.setdata(this._f32Arr),this._vbset=!0):this._vb.setdata(this._f32Arr),this.m_lfIdx=o,e.ctx.setIBVB(i,n,null,this._vb,6*r,null,AniShader.shader,this._values,0,o)},t.tCacheLen=0,t.framesPerSec=25,t.FRAMETIME_TOOLONG=10,t}(),Muti2DAniData=function(){function t(){this._kinds=null,this._strName=null,this.imgName="",this.img=null,this._maxTrack=0,this.m_kindsNameList=null,this._dataL=!1,this.completeL=!1,this.m_iRef=0,this.kindDic=new Object,this._insHandler=[],this._kinds=null,this._strName="",this._maxTrack=0}__class(t,"display.MutiAni.Muti2DAniData");var e=t.prototype;return e.getKind=function(t){return this.kindDic[t]},e.addRef=function(){return this.m_iRef++,this.m_iRef},e.defRef=function(){return this.m_iRef--,this.m_iRef},e.dispose=function(){if(this.img&&(this.img.destroy(),this.img=null),this._kinds){for(var e=this._kinds.length,i=0;e>i;i++)this._kinds[i].dispose();this._kinds.splice(0,e),delete t._muti2dDic[this._strName]}},e.setImg=function(t){this.img=t,this.img.repeat=!1,1==this._dataL&&this.insCreate()},e.delInsHander=function(t){for(var e=0,i=this._insHandler.length;i>e;e++)if(this._insHandler[e].caller==t)return this._insHandler.splice(e,1),!0;return!1},e.insCreate=function(){this.completeL=!0;for(var e=this._kinds.length,i=0;e>i;i++)this._kinds[i].kindImg=this.img;if(t._inCreateDic[this._strName]=null,0!=this._insHandler.length){e=this._insHandler.length;for(var n=0;e>n;n++)this._insHandler[n].runWith(this);this._insHandler.length=0}},e.getKindNameList=function(){if(!this.m_kindsNameList&&this.completeL&&(this.m_kindsNameList=[],this._kinds&&this._kinds.length>0))for(var t=0;t<this._kinds.length;t++)this.m_kindsNameList.push(this._kinds[t].kindName);return this.m_kindsNameList},e.loadAniData=function(e,i){this._strName=e;var n=i.getUint32();if(2912096257!=n&&2910851072!=n)return!1;if(n=i.getUint16(),0>=n)return!1;this._kinds=[];for(var s=0;n>s;s++){var a=new Kind;a.loadKind(i),this._kinds.push(a),this._maxTrack>a.tracks.length||(this._maxTrack=a.tracks.length),this.kindDic[a.kindName]=a,a.kindidx=s}return t._muti2dDic[e]=this,this._dataL=!0,null!=this.img&&this.insCreate(),!0},__getset(0,e,"ref",function(){return this.m_iRef}),__static(t,["_muti2dDic",function(){return this._muti2dDic=new Object},"_inCreateDic",function(){return this._inCreateDic=new Object}]),t}(),Ptinfo=function(){function t(){this.name=null,this.x=NaN,this.y=NaN}return __class(t,"display.MutiAni.Ptinfo"),t}(),TagKey=function(){function t(){this.keytime=NaN,this.pt=null,this.keytime=0,this.pt=__newvec(4,null),this.pt[0]=new GVertex,this.pt[1]=new GVertex,this.pt[2]=new GVertex,this.pt[3]=new GVertex}return __class(t,"display.MutiAni.TagKey"),t}(),Track=function(){function t(){this.m_fEndTime=NaN,this.m_offCmpX=NaN,this.m_offCmpY=NaN,this.m_pKeySz=null,this.m_keyFrameNum=0,this.m_interpolationKind=0,this.m_loopMode=0,this._outV=null,this._lastIdx=0,this._fullFrame=[],this.m_showMaxRect=new GRect,this._outV=__newvec(4,null),this._outV[0]=new GVertex,this._outV[1]=new GVertex,this._outV[2]=new GVertex,this._outV[3]=new GVertex}__class(t,"display.MutiAni.Track");var e=t.prototype;return e.ppInterpolation=function(){},e.getRVer=function(t,e,i,n){if(1==this.m_keyFrameNum){var s=this.m_pKeySz[0];return s.pt[0].copy(i,n),n+=8,s.pt[1].copy(i,n),n+=8,s.pt[3].copy(i,n),n+=8,s.pt[2].copy(i,n),this.m_pKeySz[0].pt}t%=this.m_fEndTime;var a;if(0==this._fullFrame.length)for(var r=this.m_keyFrameNum-1,h=0;r>h;h++){var o=this.m_pKeySz[h].keytime,l=this.m_pKeySz[h+1].keytime,u=0;u=0==h?Math.floor(o/.04):Math.ceil(o/.04);for(var c=Math.floor(l/.04),_=u;c>=_;_++)this._fullFrame[_]=h}a=this._fullFrame[Math.floor(t/.04)],null==a&&(a=this._lastIdx),this._lastIdx=a;var m=this._outV,d=this.m_pKeySz[a],p=this.m_pKeySz[a+1],f=(t-d.keytime)/(p.keytime-d.keytime);d.pt[0].ip(m[0],p.pt[0],f),d.pt[1].ip(m[1],p.pt[1],f),d.pt[2].ip(m[2],p.pt[2],f),d.pt[3].ip(m[3],p.pt[3],f);var g=this.m_interpolationKind;return d.pt[0].ipA(i,n,p.pt[0],f,g),n+=8,d.pt[1].ipA(i,n,p.pt[1],f,g),n+=8,d.pt[3].ipA(i,n,p.pt[3],f,g),n+=8,d.pt[2].ipA(i,n,p.pt[2],f,g),this._outV},t}(),GBkTile=function(){function t(){this.m_pTile=null,this.m_TileXnum=0,this.m_TileYnum=0,this.m_MapWidth=0,this.m_MapHeight=0,this.m_MaskW=0,this.m_MaskH=0,this.m_fMaskU=NaN,this.m_fMaskV=NaN,this.m_nTransBkNo=0,this.m_nTileMode=2,this.m_exBkNum=0,this.m_arrBkEx=null,this.m_tileImg=null,this._bVChange=!0,this._bResetBuf=!1,this.m_bLoaded=!1,this.m_arrRVList=null,this._mScale=1,this._bDrawGrid=!1,this._arrLine=null,this.m_data=null,this.m_Rect=new GRect,t.m_TileW=128,this.m_pTile=null,this.m_TileXnum=0,this.m_TileYnum=0,this.m_MapWidth=0,this.m_MapHeight=0}__class(t,"display.MutiMap.GBkTile");var e=t.prototype;return e.GETFILLBLOCKNO=function(e,i){var n=(i+e/5)%4;return n=Math.floor(n),t.s_FillBlN[n]},e.ISBLOCKNO=function(t){return t>0&&255>t},e._GetTile=function(t,e){return null==this.m_pTile?null:this.m_pTile[t+e*this.m_TileXnum]},e.CreateTile=function(e,i,n){this.m_pTile=null,t.m_TileW=e,t.m_TileW=e*this._mScale,
t.m_TileW=Math.floor(t.m_TileW),t.m_TileW2=Math.floor(t.m_TileW/2),t.m_TileW4=Math.floor(t.m_TileW/4),t.m_TileW8=Math.floor(t.m_TileW/8),this.m_TileXnum=i,this.m_TileYnum=n,this.m_pTile=[];for(var s=0,a=i*n;a>s;s++)this.m_pTile.push(new GTILE);this.m_MapWidth=this.m_TileXnum*t.m_TileW-t.m_TileW2,this.m_MapHeight=(this.m_TileYnum-1)*t.m_TileW4,t.tileScale(1)},e.GetBdBlockUV=function(t,e,i){var n=.125*t,s=.8756;e[i].u=n,e[i].v=s,e[i+1].u=n+.125,e[i+1].v=s,e[i+3].u=n,e[i+3].v=.999,e[i+2].u=e[i+1].u,e[i+2].v=e[i+3].v},e.TransI2S=function(e,i,n){n.x=e+(i+1)/2,n.x=Math.floor(n.x),n.y=i/2-e,n.y=Math.floor(n.y),e=(n.x-n.y)*t.m_TileW2,n.y=(n.x+n.y)*t.m_TileW4,n.x=e},e.ADDBLOCK=function(t,e,i,n,s,a,r){var h=this.m_arrBkEx.length,o=new TileVer;o.x=t.x+e,o.y=t.y+i,this.m_arrBkEx.push(o),o=new TileVer,o.x=t.x+n,o.y=t.y+s,this.m_arrBkEx.push(o),o=new TileVer,o.x=t.x+n,o.y=t.y+s+a,this.m_arrBkEx.push(o),o=new TileVer,o.x=t.x+e,o.y=t.y+i+a,this.m_arrBkEx.push(o),this.GetBdBlockUV(r,this.m_arrBkEx,h),this.m_exBkNum++},e.addMapEdge=function(){var e=0,i=0,n=0,s=0,a=0,r=new TileVer;this.m_arrBkEx=[];var h=64*this._mScale,o=0;for(i=0;i<this.m_TileYnum;i++)for(e=0;e<this.m_TileXnum;e++)if(a=this._GetTile(e,i).blockno,n=a/256,!(10>n))if(n=Math.floor(n),this.TransI2S(e,i,r),s=1+i%2+e%2*4,12!=n)if(10!=n)11!=n?13!=n||(s=2,this.ADDBLOCK(r,-t.m_TileW4,-t.m_TileW8,t.m_TileW4,-t.m_TileW8,h,s)):this.ADDBLOCK(r,-t.m_TileW4,t.m_TileW8/2,t.m_TileW4,t.m_TileW8/2,h+t.m_TileW8/2,s);else{if(i>1&&e<this.m_TileXnum-1&&(o=i%2==1?this._GetTile(e+1,i-1).blockno:this._GetTile(e,i-1).blockno,768==(65280&o))){s=e%2?3:7,this.ADDBLOCK(r,-t.m_TileW4,t.m_TileW8,t.m_TileW2-t.m_TileW8-4,-t.m_TileW4,h,s);continue}this.ADDBLOCK(r,-t.m_TileW4,t.m_TileW8,t.m_TileW4,-t.m_TileW8,h,s)}else{if(i>0&&e>0&&(o=i%2==1?this._GetTile(e,i-1).blockno:this._GetTile(e-1,i-1).blockno,512==(65280&o))){s=i%2?0:4,this.ADDBLOCK(r,-t.m_TileW2+t.m_TileW8+4,-t.m_TileW4,t.m_TileW4,t.m_TileW8,h,s);continue}this.ADDBLOCK(r,-t.m_TileW4,-t.m_TileW8,t.m_TileW4,t.m_TileW8,h,s)}},e._loadMDBin=function(e,i,n){GTILE.GenSVer(),e.pos=n;var s=0,a=0,r=0,h=0,o=0,l=0,u=0;s=2e3,a=0,r=128,h=49,o=127,l=512,u=512,this.CreateTile(r,h,o),this.m_Rect.left=0,this.m_Rect.top=0,this.m_Rect.right=this.m_TileXnum*t.m_TileW-t.m_TileW,this.m_Rect.bottom=(this.m_TileYnum-1)*t.m_TileW4;var c=0,_=0,m=0;c=s/1e3,_=s/100%10,m=s%100;var d=i,p=e.getUint32();if(2046820608!=p)return console.log("Get Data failed...\n"),!1;var f=e.getInt32(),g=(d-8)/3;if(g>f)return console.log("SetBlockVar bin data err "),!1;var S,b=0,y=0,v=0,I=0;for(v=0;g>v;v++)if(b=e.getUint8(),y=e.getUint8(),I=e.getUint8(),y>=0&&y<this.m_TileYnum)for(S=this._GetTile(b,y);I>0;)b>=0&&b<this.m_TileXnum&&(S.blockno=this.GETFILLBLOCKNO(b,y)),I--,b++,S=this._GetTile(b,y);else console.log("The Y is overFlow:"+y);return this.CalAutoLinkTotal(),this.fillVertexData(32),this.addMapEdge(),this.m_bLoaded=!0,this.arrangeGrid(),!0},e.getMapData=function(t){var e=t._mData,i=this._loadMDBin(e.data,e.ptr.nDataLength,e.dpos);return i},e.arrangeGrid=function(){null!=this._arrLine||(this._arrLine=[]);var t=null;t=new TileVer,t.x=0,t.y=0,t.u=0,t.v=this.m_MapHeight,this._arrLine.push(t),t=new TileVer,t.x=0,t.y=0,t.u=this.m_MapWidth,t.v=0,this._arrLine.push(t),t=new TileVer,t.x=this.m_MapWidth,t.y=0,t.u=this.m_MapWidth,t.v=this.m_MapHeight,this._arrLine.push(t),t=new TileVer,t.x=0,t.y=this.m_MapHeight,t.u=this.m_MapWidth,t.v=this.m_MapHeight,this._arrLine.push(t)},e.fillVertexData=function(e){var i=this.m_TileXnum+1,n=this.m_TileYnum+2,s=i*n,a=new Array(s),r=0,h=0;for(r=0;n>r;r++){var o=0,l=-t.m_TileW4,u=r*i*2;for(r%2==1&&(o=-t.m_TileW2),h=0;i>h;h++)a[u+2*h]=o+t.m_TileW*h,a[u+2*h+1]=l+r*t.m_TileW4}var c,_,m,d=this.m_TileXnum,p=this.m_TileYnum,f=__newvec(4,0),g=this.m_tileImg.getuvList(),S=0,b=0,y=0;for(r=0;p>r;r++)for(h=0;d>h;h++)if(c=this._GetTile(h,r),0!=c.blockno){for(c.genVer(),m=c.vertex,r%2==0?(f[0]=r*i+h,f[1]=(r+1)*i+h+1,f[2]=(r+2)*i+h,f[3]=(r+1)*i+h):(f[0]=r*i+h+1,f[1]=(r+1)*i+h+1,f[2]=(r+2)*i+h+1,f[3]=(r+1)*i+h),y=0;4>y;y++)m[y].x=a[2*f[y]],m[y].y=a[2*f[y]+1];var v=255&c.blockno;if(_=this.m_tileImg.getTile(v),null!=_){for(y=0;4>y;y++)m[y].u=g[2*_[y]],m[y].v=g[2*_[y]+1];S=m[0].x,b=m[1].y,TileGrid.TransS2I(S,b,UintRef.t1,UintRef.t2),MapIns._ins.setCol(UintRef.t1.uid,UintRef.t2.uid,!1)}}},e.CalAutoLinkTotal=function(){var e,i=0,n=0,s=0;for(null==t.mapping&&(t.mapping=[],t.mapping.push([98,89,27,3,83,10,36,37,26,90,19,11,34,51,67]),t.mapping.push([99,33,57,82,83,18,41,92,68,91,60,20,44,51,67]),t.mapping.push([100,49,66,84,83,25,36,37,75,90,19,28,34,51,67]),t.mapping.push([99,89,74,3,83,43,41,92,26,91,60,42,44,51,67]),t.oxmask=[13,2,12,1,1,1,1,3,10,11,11,1,1,1,1]),n=0;n<this.m_TileYnum;n++)for(s=0;s<this.m_TileXnum;s++)e=this._GetTile(s,n),i=e.blockno,this.ISBLOCKNO(i)||(e.blockno=this._MakeAutoLink(s,n))},e._MakeAutoLink=function(t,e){var i=0,n=0,s=t;return e%2==0&&t--,i=n=0,t>=0&&t<this.m_TileXnum-1&&e>=0&&e<this.m_TileYnum-1&&(e>0&&(i=this._GetTile(t,e-1).blockno,this.ISBLOCKNO(i)&&(n|=9),i=this._GetTile(t+1,e-1).blockno,this.ISBLOCKNO(i)&&(n|=3)),i=this._GetTile(t,e+1).blockno,this.ISBLOCKNO(i)&&(n|=12),i=this._GetTile(t+1,e+1).blockno,this.ISBLOCKNO(i)&&(n|=6),e>=2&&0==(1&n)&&(i=this._GetTile(s,e-2).blockno,this.ISBLOCKNO(i)&&(n|=1)),0==(2&n)&&(i=this._GetTile(s+1,e).blockno,this.ISBLOCKNO(i)&&(n|=2)),e<this.m_TileYnum-2&&0==(4&n)&&(i=this._GetTile(s,e+2).blockno,this.ISBLOCKNO(i)&&(n|=4)),0==(8&n)&&(i=this._GetTile(s-1,e).blockno,this.ISBLOCKNO(i)&&(n|=8)),n>0?(n--,i=display.MutiMap.GBkTile.mapping[e%4][n]+256*display.MutiMap.GBkTile.oxmask[n]):i=0),i},e.resetVB=function(){this._bResetBuf=!0},e.renderMapImg=function(t,e,i,n){if(0!=this.m_bLoaded&&0!=this.m_tileImg.isLoaded&&(this._bResetBuf&&this.m_arrRVList&&t.ctx.fillTrangles(this.m_tileImg.deviceImg,e,i,this.m_arrRVList,n),0!=this._bVChange)){var s,a=0,r=0;null==this.m_arrRVList&&(this.m_arrRVList=[]);var h=this.m_arrRVList;h.length=0;var o=this.m_arrBkEx.length,l=this.m_arrBkEx;if(1==this._bVChange){for(a=0;o>a;a++)h.push(l[a].x),h.push(l[a].y),h.push(l[a].u),h.push(l[a].v);var u=this.m_TileXnum,c=this.m_TileYnum;for(r=0;c>r;r++)for(a=0;u>a;a++)if(s=this._GetTile(a,r),0!=s.blockno)for(var _=0;4>_;_++)h.push(s.vertex[_].x),h.push(s.vertex[_].y),h.push(s.vertex[_].u),h.push(s.vertex[_].v)}t.ctx.fillTrangles(this.m_tileImg.deviceImg,e,i,h,n),this._bVChange=!1}},t.tileScale=function(e){t.m_TileWS=t.m_TileW*e,t.m_TileW2S=t.m_TileW2*e,t.m_TileW4S=t.m_TileW4*e,t.m_TileW8S=t.m_TileW8*e},t.m_TileW=0,t.m_TileW2=0,t.m_TileW4=0,t.m_TileW8=0,t.m_TileWS=NaN,t.m_TileW2S=NaN,t.m_TileW4S=NaN,t.m_TileW8S=NaN,t.mapping=null,t.oxmask=null,__static(t,["s_FillBlN",function(){return this.s_FillBlN=[50,52,58,59]}]),t}(),GTILE=function(){function t(){this.blockno=0,this.blockflag=0,this.vertex=null}__class(t,"display.MutiMap.GTILE");var e=t.prototype;return e.genVer=function(){this.vertex=__newvec(4,null);for(var t=0;4>t;t++)this.vertex[t]=new TileVer},t.GenSVer=function(){t.sver=__newvec(4,null);for(var e=0;4>e;e++)t.sver[e]=new TileVer},t.sver=null,t}(),MapImg=function(){function t(t,e,i,n){this._imgName=null,this._deviceImg=null,this._uvList=null,this._btList=null,this.m_TileW=0,this.m_MaskW=0,this.m_MaskH=0,this.m_fMaskU=NaN,this.m_fMaskV=NaN,e>=16||(e=16),i>=16||(i=16),this.m_MaskW=e,this.m_MaskH=i,this.m_TileW=t,this.m_fMaskU=.5*this.m_TileW/this.m_MaskW,this.m_fMaskV=.25*this.m_TileW/this.m_MaskH,this._imgName=n}__class(t,"display.MutiMap.MapImg");var e=t.prototype;return e.preProcess=function(){var t=9,e=18;this._uvList=new Array(t*e*2);var i=0,n=0;for(i=0;e>i;i++){var s=0,a=-this.m_fMaskV,r=i*t*2;for(i%2==1&&(s=-this.m_fMaskU),n=0;t>n;n++)this._uvList[r+2*n]=s+2*this.m_fMaskU*n,this._uvList[r+2*n+1]=a+i*this.m_fMaskV}this._btList=[];var h=0;for(this._btList.length=128,i=0;16>i;i++)for(n=0;8>n;n++){var o=__newvec(4,0);i%2==0?(o[0]=i*t+n,o[1]=(i+1)*t+n+1,o[2]=(i+2)*t+n,o[3]=(i+1)*t+n):(o[0]=i*t+n+1,o[1]=(i+1)*t+n+1,o[2]=(i+2)*t+n+1,o[3]=(i+1)*t+n),this._btList[h++]=o}},e.getuvList=function(){return this._uvList},e.getTile=function(t){return this._btList.length>=t?this._btList[t-1]:null},e.renderMapImg=function(t,e,i,n){if(null!=this._btList){var s=__newvec(512,0),a=0,r=0,h=this._uvList;for(a=0;128>a;a++){var o=this.getTile(a);s[r++]=512*h[2*o[0]],s[r++]=512*h[2*o[0]+1],s[r++]=h[2*o[0]],s[r++]=h[2*o[0]+1],s[r++]=512*h[2*o[1]],s[r++]=512*h[2*o[1]+1],s[r++]=h[2*o[1]],s[r++]=h[2*o[1]+1],s[r++]=512*h[2*o[2]],s[r++]=512*h[2*o[2]+1],s[r++]=h[2*o[2]],s[r++]=h[2*o[2]+1],s[r++]=512*h[2*o[3]],s[r++]=512*h[2*o[3]+1],s[r++]=h[2*o[3]],s[r++]=h[2*o[3]+1]}t.ctx.fillTrangles(this._deviceImg,e,i,s,n)}},__getset(0,e,"deviceImg",function(){return this._deviceImg}),__getset(0,e,"isLoaded",function(){return null!=this._btList}),t}(),MapLayerCloud=function(){function t(){this.m_cloud=null,this.m_nW=0,this.m_nH=0,this.m_fk=NaN}__class(t,"display.MutiMap.MapLayerCloud");var e=t.prototype;return e.Init=function(e,i,n,s){this.m_cloud=new Muti2DAniIns,this.m_cloud.createInsFromName(s);var a=NaN,r=NaN;this.m_nW=i,this.m_nH=n,this.m_fk=e,a=MathUtil1.rand(i)-i/2,r=MathUtil1.rand(n)-n/2,this.m_cloud.setPos(a,r),this.m_cloud.zOrder=-t.ZBASE+r;var h=1.5*(r+this.m_nH)/this.m_nH,o=((1+Math.random())*(r+this.m_nH/2)/this.m_nH+1)*this.m_fk;this.m_cloud.scale(o,o);MathUtil1.rand(100)>50?this.MoveTo(-this.m_nW/2-10,r+MathUtil1.rand(100)-40,30*h):this.MoveTo(this.m_nW/2+10,r+MathUtil1.rand(100)-40,30*h),this.OnAni()},e.MoveTo=function(t,e,i){var n=MathUtil1.Vec2Dis(this.m_cloud.x,this.m_cloud.y,t,e)/i*1e3;Tween.to(this.m_cloud,{x:t,y:e},n,null,Handler.create(this,this.OnMoveEnd))},e.OnAni=function(){if(this.m_cloud.complete){var t=this.m_cloud.GetAniKindSz();if(t.length<2)return void this.m_cloud.playAni(t[0]);var e=MathUtil1.rand(t.length);this.m_cloud.PlayKindEnd(t[e],Math.random()+1.1,0,Handler.create(this,this.OnAni))}else this.m_cloud.SetOkHandler(Handler.create(this,this.OnAni))},e.OnMoveEnd=function(){var e=this.m_cloud.y,i=1.5*(e+this.m_nH)/this.m_nH,n=((1+Math.random())*(e+this.m_nH/2)/this.m_nH+1)*this.m_fk;this.m_cloud.scale(n,n),MathUtil1.rand(100)>50?(this.m_cloud.setPos(this.m_nW/2,e),this.m_cloud.zOrder=t.ZBASE+e,this.MoveTo(-this.m_nW/2-10,e+MathUtil1.rand(100)-40,30*i)):(this.m_cloud.setPos(-this.m_nW/2,e),this.m_cloud.zOrder=t.ZBASE+e,this.MoveTo(this.m_nW/2+10,e+MathUtil1.rand(100)-40,30*i))},t.ZBASE=-1e5,t}(),TileGrid=function(){function t(){this.m_obj=null}__class(t,"display.MutiMap.TileGrid");var e=t.prototype;return e.addObj=function(t){this.m_obj=t},e.delObj=function(){this.m_obj=null},t.TransW2S=function(t,e,i,n){i.uid=(t-e)*GBkTile.m_TileW2,n.uid=(t+e)*GBkTile.m_TileW4},t.TransS2W=function(t,e,i,n){e=2*(e+GBkTile.m_TileW4S),i.uid=Math.floor((t+e)/GBkTile.m_TileWS),n.uid=Math.floor((e-t)/GBkTile.m_TileWS)},t.TransW2I=function(t,e,i,n){i.uid=Math.floor((t-e)/2),n.uid=t+e},t.TransI2W=function(t,e,i,n){i.uid=t+Math.floor((e+1)/2),n.uid=Math.floor(e/2)-t},t.TransI2S=function(t,e,i,n){i.uid=t+Math.floor((e+1)/2),n.uid=Math.floor(e/2)-t,t=(i.uid-n.uid)*GBkTile.m_TileW2,n.uid=(i.uid+n.uid)*GBkTile.m_TileW4,i.uid=t},t.TransS2I=function(t,e,i,n){e=2*(e+GBkTile.m_TileW4),i.uid=Math.floor((t+e)/GBkTile.m_TileW),n.uid=Math.floor((e-t)/GBkTile.m_TileW),t=Math.floor((i.uid-n.uid)/2),i.uid<n.uid&&t--,n.uid=i.uid+n.uid,i.uid=t},t}(),TileVer=function(){function t(){this.x=NaN,this.y=NaN,this.u=NaN,this.v=NaN}return __class(t,"display.MutiMap.TileVer"),t}(),TreePop=function(){function t(){this.m_pLink=null,this.m_pCut=null,this.m_pCut=TreeIcon.getInstance()}__class(t,"display.tree.TreePop");var e=t.prototype;return e.OnCDOver=function(t,e){1>e||(this.m_pLink.QuickRipe(e,t),CountDown.getInstance().removeSelf())},e.GetNeedDiamond=function(t){var e=DataTable.m_iSelfUser.GetJszsfy(t,this.m_pLink.GetCurCoolLen());return e},e.CheckAll=function(t){if(void 0===t&&(t=1),this.m_pLink){var e=DataTable.m_iBuildTab.Get(this.m_pLink.GetBuildID());if(null==e)throw new Error("buildid not find id="+this.m_pLink.GetBuildID());var i=DataTable.m_iTreeTab.Get(this.m_pLink.GetBuildID());if(null==i)throw new Error("tree not find id="+this.m_pLink.GetBuildID());if(this.m_pLink.m_nPickTime<3&&0!=i[1])this.m_pCut.SetShow(0);else{var n=0;switch(e[9]){case 1:n=16;break;case 2:n=17;break;case 4:n=18;break;case 5:}n>0&&(this.m_pCut.InitItem(this.m_pLink,n),this.m_pCut.SetShow(1))}if(this.m_pLink.GetPickNum()>0&&4!=this.m_pLink.m_nOpState&&(this.m_pCut.InitItem(this.m_pLink,i[1],1),this.m_pCut.SetShow(1)),4==this.m_pLink.m_nOpState){this.m_pCut.SetShow(0);var s=this.m_pLink.getScrPoint().y;s>590&&(s=590,DisplayItem.m_pBk.setScrOffset(0,-(this.m_pLink.getScrPoint().y-590),!0,200)),DisplayTools.addTarget(CountDown.getInstance(),GameMain._ins.m_gameUI.incontainer,{scaleX:.6,scaleY:.6,x:this.m_pLink.getScrPoint().x-100,y:s}),CountDown.getInstance().Init(this.m_pLink.GetCurCoolLen(),this.m_pLink.m_nLeftSec,1,this),Tween.to(CountDown.getInstance(),{scaleX:1,scaleY:1},100,null,null,0,!0),CountDown.getInstance().sdClick=Handler.create(this,this.OnCDOver)}else CountDown.getInstance().removeSelf();1==this.m_pLink.m_nOpState&&this.m_pLink.m_nPickTime<4?(TreeHelpIcon.getInstance().m_pLink=this.m_pLink,TreeHelpIcon.getInstance().SetShow(1)):TreeHelpIcon.getInstance().SetShow(0)}},__getset(0,e,"gmb",null,function(t){this.m_pLink=t}),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}(),GClouldManager=function(){function t(){this.m_nLeftNum=0,this.m_pGiftBox=null,this.m_pDiaGift=null,this.m_szRainSz=[],this.m_nAddDiaBoxLock=0,this.m_nAddBoxLock=0}__class(t,"game.build.GClouldManager");var e=t.prototype;return e.OnCreate=function(){this.InitRun(),Laya.timer.loop(3e5,this,this.OnRun),Laya.timer.loop(6e5,this,this.CheckGift)},e.InitRun=function(){Laya.timer.once(3e3,this,this.OnRun)},e.dispose=function(){Laya.timer.clearAll(this),this.m_pGiftBox&&(this.m_pGiftBox.dispose(),this.m_pGiftBox=null),this.m_pDiaGift&&(this.m_pDiaGift.dispose(),this.m_pDiaGift=null);for(var t=this.m_szRainSz.length,e=0;t>e;e++)this.m_szRainSz[e]&&this.m_szRainSz[e].dispose();this.m_szRainSz.length=0,this.m_nLeftNum=0},e.OnRun=function(){for(var t=0;5>t;t++){if(this.m_szRainSz.length>=5)return;if(!DataTable.m_iSelfUser.MakeRainClould())return;var e=new GClould_Rain;e.OnCreate(),this.m_szRainSz.push(e)}},e.CheckGift=function(){DataTable.m_iSelfUser.GetLevel()<7||(this.CheckFreeGift(),this.CheckDiaGift())},e.delGift=function(t){!t&&this.m_pDiaGift&&(this.m_pDiaGift.OnClose(),this.m_pDiaGift=null),t&&this.m_pGiftBox&&(this.m_pGiftBox.OnClose(),this.m_pGiftBox=null)},e.delRain=function(t){for(var e=0;e<this.m_szRainSz.length;e++)if(t==this.m_szRainSz[e])return void this.m_szRainSz.splice(e,1)},e.CheckFreeGift=function(){var t=DataTable.m_iSelfUser.m_szCheckNum[1];1>t||MathUtil1.rand(2)<1||this.AddGift()},e.CheckDiaGift=function(){var t=DataTable.m_iSelfUser.m_szCheckNum[0];1>t||MathUtil1.rand(2)<1||this.AddDiaGift()},e.AddDiaGift=function(){var t=this;this.m_nAddDiaBoxLock||(this.m_nAddDiaBoxLock=1,DataTable.m_iSelfUser.GetBoxItem(0,Handler.create(this,cdiaGift=function(e){return e.length<1?void(t.m_nAddDiaBoxLock=0):(DisplayItem.SafeDelObj(t.m_pDiaGift),t.m_pDiaGift=new GDia_Gift,t.m_pDiaGift.InitData(e),void(t.m_nAddDiaBoxLock=0))})))},e.AddGift=function(){var t=this;this.m_nAddBoxLock||(this.m_nAddBoxLock=1,DataTable.m_iSelfUser.GetBoxItem(1,Handler.create(this,cGift=function(e){return e.length<1?void(t.m_nAddBoxLock=0):(DisplayItem.SafeDelObj(t.m_pGiftBox),t.m_pGiftBox=new GClould_Gift,t.m_pGiftBox.InitData(e),void(t.m_nAddBoxLock=0))})))},t}(),ClnAccCal=function(){function t(){this.m_szCurAcc=null,this.m_nAccidentExp=-1,this.m_pAccTask=0}__class(t,"game.ClnAccCal");var e=t.prototype;return e.ClearAccData=function(){this.m_szCurAcc.length=0,this.m_nAccidentExp=-1},e.GetMyAccItems=function(t){var e=this;!this.m_szCurAcc||this.m_szCurAcc.length<1?DataTable.m_iSelfUser.CallSvrRet("GetMyAccItems","NIL",Handler.create(this,curacc=function(i){e.m_szCurAcc=i,t.run()})):t.run()},e.CheckAccident=function(t,e,i){this.m_nAccidentExp<0&&(this.m_nAccidentExp=ArrOp.GetStrVal("myaccident",DataTable.m_iSelfUser.m_szData.nameddata)),this.m_nAccidentExp+=t;var n;return n=DataTable.m_iUserLevelTab.Get(DataTable.m_iSelfUser.m_nLevel),this.m_nAccidentExp<n[11]?void(this.m_nAccidentExp=ArrOp.GetStrVal("myaccident",DataTable.m_iSelfUser.m_szData.nameddata)):void(this.m_pAccTask||(this.m_pAccTask=1,this.GetAccident([e,i,1],DataTable.m_iSelfUser.m_nLevel,n[11])))},e.GetAccident=function(t,e,i){var n=this;this.GetMyAccItems(Handler.create(this,okHandler=function(){if(!n.m_szCurAcc||n.m_szCurAcc.length<1)return void gSys.Err("GetMyAccItems GetMyAccItems err:"+a);var s=n.m_szCurAcc[0].slice(),a=[];a.push([s[0],s[1]]),DataTable.m_iSelfUser.CheckMakeItemSz(a,1,0,Handler.create(n,okHandler=function(){var s=new StringRef;return DataTable.m_iSelfUser.ChgItemSz(a,s,OPEnum.OP_YW_HD,t,1)?(n.m_szCurAcc.splice(0,1),n.m_nAccidentExp-=i,n.m_nAccidentExp<0&&(n.m_nAccidentExp=0),n.m_nAccidentExp=ArrOp.GetStrVal("myaccident",DataTable.m_iSelfUser.m_szData.nameddata),DataTable.m_iSelfUser.CallSvr("AddAccident",[a,e]),void(n.m_pAccTask=0)):void gSys.Err("GetAccident "+s)}))}))},t}(),ActDef=function(){function t(){}return __class(t,"game.def.ActDef"),t.GETACTDOUBLETIME=function(){var t;return t=[[2,3],[2,0],[0,3],[2,0],[0,3],[2,0],[0,3]]},t}(),BoatExData=function(){function t(){}return __class(t,"game.def.BoatExData"),t.Create=function(){return t._default.concat()},t.wharflv=0,t.szmywharflv=1,t.curterminilv=2,t.nextterminilv=3,t.szterministar=4,t.szgift=5,t.challengetime=6,t.lastaddtime=7,__static(t,["_default",function(){return this._default=[0,null,0,0,null,null,0,0]}]),t}(),DiaToItemData=function(){function t(){}return __class(t,"game.def.DiaToItemData"),t.isstruct=function(t){return t&&8==t.length?!0:!1},t.productid=0,t.kind=1,t.diamond=2,t.prime=3,t.name=4,t.mem=5,t.chgsz=6,t.img=7,t.slen=8,t}(),ErrorDef=function(){function t(){}return __class(t,"game.def.ErrorDef"),t.SUCCESS=function(t){return 0==t?!0:!1},t.FAIL=function(t){return 0!=t?!0:!1},t.CALLFAIL=function(){return csvr.retflag!=t.FUN_OK&&csvr.retflag!=t.FUN_OKVAL?!0:!1},t.CALLSUCCESS=function(){return csvr.retflag==t.FUN_OK&&csvr.retflag==t.FUN_OKVAL?!0:!1},t.ERR_DEFINE=function(t,e){Style_error.Define(t,e)},t.ERR_MESSAGE=function(t){return Style_error.GetMessage(t)},t.ERR_DLG=function(t){gSys.GameMsg(Style_error.GetMessage(t))},t.ERR_DLGMODAL=function(t){MessageBox.show(1,{title:"提示",content:Style_error.GetMessage(t),lbtn:"确定",rbtn:"取消"})},t.addmesage=function(){t.ERR_DEFINE(901,"成就数据丢失。"),t.ERR_DEFINE(902,"成就数据无效。"),t.ERR_DEFINE(903,"不存在这个成就。"),t.ERR_DEFINE(201,"庄园名字不能太短，不得少于{d}个字符！"),t.ERR_DEFINE(202,"庄园名字不能太长，不得多于{d}个字符！"),t.ERR_DEFINE(203,"个性签名不能太长,不得多于{d}个字符！"),t.ERR_DEFINE(501,"尚未开放邮箱登录。\r\n敬请期待..."),t.ERR_DEFINE(502,"尚未开放邮箱注册。\r\n敬请期待..."),t.ERR_DEFINE(503,"电子邮箱格式不正确，请检查拼写。"),t.ERR_DEFINE(504,"该邮件地址已经被注册，请更换一个邮件地址。"),t.ERR_DEFINE(505,"此设备已绑定邮箱。"),t.ERR_DEFINE(506,"此邮箱已绑定,请更换其他邮箱。"),t.ERR_DEFINE(507,"邮箱未激活，请查收邮件并激活帐号。"),t.ERR_DEFINE(508,"邮箱未注册，请检查拼写。"),t.ERR_DEFINE(509,"邮箱登录密码错误。"),t.ERR_DEFINE(510,"邮箱激活码无效。"),t.ERR_DEFINE(511,"邮箱激活码过期。"),t.ERR_DEFINE(550,"取微博绑定数据不存在"),t.ERR_DEFINE(551,"微博号已经绑定到其他账号中"),t.ERR_DEFINE(552,"微博号没有绑定账号"),t.ERR_DEFINE(701,"本次交易收据无效，如有异议请联系客服。"),t.ERR_DEFINE(702,"本次交易涉及产品已经被官方下架。"),t.ERR_DEFINE(703,"交易已过期，如有异议请联系官方咨询解决！\r\n企业QQ：800111259"),t.ERR_DEFINE(704,"本次交易失败，请重试。"),t.ERR_DEFINE(705,"交易已完成。"),t.ERR_DEFINE(706,"验证交易超时,稍后重试。"),t.ERR_DEFINE(705,"未知交易内部错误。"),t.ERR_DEFINE(801,"朋友数据错误。err=801，请确保已更新产品到最新版本。"),t.ERR_DEFINE(802,"未找到该用户ID"),t.ERR_DEFINE(803,"朋友数量超上限，无法关注更多玩家"),t.ERR_DEFINE(810,"因违反游戏规则，已被禁止发消息，如有疑问请与系统管理员联系。"),t.ERR_DEFINE(811,"信息内容太长了，最多{d}"),t.ERR_DEFINE(812,"不能关注自己"),t.ERR_DEFINE(813,"已经关注此玩家"),t.ERR_DEFINE(813,"此玩家是好友"),t.ERR_DEFINE(814,"自己不能是自己的粉丝"),t.ERR_DEFINE(815,"不能给自己发消息"),t.ERR_DEFINE(816,"不能发空信息"),t.ERR_DEFINE(817,"世界聊天金币错误"),t.ERR_DEFINE(818,"该玩家粉丝数量已达上限,暂时无法关注该玩家"),t.ERR_DEFINE(1001,"路边摊数据丢失，请尝试重新登录解决"),t.ERR_DEFINE(1002,"路边摊数据无效，请尝试重新登录解决"),t.ERR_DEFINE(1003,"货架空是空的哇"),t.ERR_DEFINE(1004,"广告CD冷却中，可以使用钻石重置冷却时间"),t.ERR_DEFINE(1005,"商品被买走了，赶紧领钱吧"),t.ERR_DEFINE(1006,"可惜，此商品无法使用广告"),t.ERR_DEFINE(1007,"没商品啊，删不了"),t.ERR_DEFINE(1008,"眼睛花了吧，压根没有钱"),t.ERR_DEFINE(1009,"东西卖掉再领钱吧")},t.FUN_OKVAL=-2,t.FUN_OK=-1,t.FUN_ERR_OUTTIME=-20,t.FUN_ERR_NOTLINK=-19,t.FUN_ERR_NOTFINDSVR=-22,t.FUN_NOTFIND=-10,t.FUN_RUNERR=-17,t.FUN_ABORT=-6,t.ERR_REWARD_CERT_INVALID=-2,t.ERR_REWARD_REPEAT=-2,t.ERR_ARCH_DATA_LOST=901,t.ERR_ARCH_DATA_INVALID=902,t.ERR_ARCH_UNKOWN=903,t.ERR_GAME_NICK_SHORT=201,t.ERR_GAME_NICK_LONG=202,t.ERR_GAME_LABEL_LONG=203,t.OK=0,t.ERR_LOGIN_MAIL_CLOSED=501,t.ERR_LOGIN_MAIL_REG_CLOSED=502,t.ERR_LOGIN_MAIL_ADDRESS_FORMAT=503,t.ERR_LOGIN_MAIL_MAIL_USED=504,t.ERR_LOGIN_MAIL_UID_USED=505,t.ERR_LOGIN_MAIL_BIND_REPEAT=506,t.ERR_LOGIN_MAIL_INACTIVE=507,t.ERR_LOGIN_MAIL_UNKOWN=508,t.ERR_LOGIN_MAIL_PASS=509,t.ERR_LOGIN_MAIL_KEY_INVALID=510,t.ERR_LOGIN_MAIL_KEY_EXPIRED=511,t.ERR_WEIBO_GET_BINDNOUID=550,t.ERR_WEIBO_BIND_EXSIT=551,t.ERR_WEIBO_NOBINDID=552,t.ERR_IAP_RECEIPT_INVALID=701,t.ERR_IAP_PRODUCT_INVALID=702,t.ERR_IAP_TXN_EXPIRED=703,t.ERR_IAP_TXN_INVALID=704,t.ERR_IAP_TXN_COMPLETE=705,t.ERR_IAP_TXN_VEROUTTIME=706,t.ERR_IAP_UNKOWNERR=707,t.ERR_FRIEND_DATA_FORMAT=801,t.ERR_FRIEND_UID_INVALID=802,t.ERR_FRIEND_OVERLOAD=803,t.ERR_FRIEND_MESSAGE_DISABLE=810,t.ERR_FRIEND_MESSAGE_OVERLOAD=811,t.ERR_FRIEND_FOLLOW_SELF=812,t.ERR_FRIEND_FOLLOW_REPEAT=813,t.ERR_FRIEND_FOLLOW_FRIEND=813,t.ERR_FRIEND_FANS_SELF=814,t.ERR_FRIEND_MESSAGE_SELF=815,t.ERR_FRIEND_MESSAGE_EMPTY=816,t.ERR_FRIEND_MESSAGE_MONEYERR=817,t.ERR_FRIEND_OVERLOAD_FANS=818,t.ERR_MARKET_DATA_LOST=1001,t.ERR_MARKET_DATA_FORMAT=1002,t.ERR_MARKET_SOCKET_NULL=1003,t.ERR_MARKET_AD_CD=1004,t.ERR_MARKET_SOCKET_SOLD=1005,t.ERR_MARKET_AD_DATA_LOST=1006,t.ERR_MARKET_DEL_NULL=1007,t.ERR_MARKET_GET_MONEY_AIR=1008,t.ERR_MARKET_GET_MONEY_SELL=1009,t}(),FriendDef=function(){function t(){}return __class(t,"game.def.FriendDef"),t.SET_FLAG=function(t,e){t|=e},t.REM_FLAG=function(t,e){t&=4294967295^e},t.HAS_FLAG=function(t,e){return(t&e)==e},t.NO_FLAG=function(t,e){return(t&e)!=e},t.GetUserWorldTradSvrName=function(t){return"VIP交易服务"},t.SJJYFWM=function(e){return t.GetUserWorldTradSvrName(e)},t.ISFOLLOWER=function(t){return 1==t?1:0},t.ISFANS=function(t){return 0==t?1:0},t.ISFRIEND=function(t){return 2==t||t>=4&&8>=t?1:0},t.GETVISUNO=function(t){return t%1e3},t.IsLocalPlayer=function(t){return t==DataTable.m_iSelfUser.GetUID()},t.IsOtherPlayer=function(t){return t!=DataTable.m_iSelfUser.GetUID()},t.IsNpc=function(t){return 1e3>t},t.IsPlayer=function(t){return t>=1e3},t.IsSystemUid=function(t){return 0==t||1==t},t.IsUncleJamie=function(t){return 1==t},t.HEAD_MENU_CLOSE=0,t.HEAD_MENU_VISIT=1,t.HEAD_MENU_ADDFOLLOW=2,t.HEAD_MENU_ADDFOLLOWEFANS=2,t.HEAD_MENU_REMFOLLOW=4,t.HEAD_MENU_MESSAGE=8,t.HEAD_MENU_EDITGROUP=16,t.HEAD_MENU_CLOSEGROUP=32,t.HEAD_MENU_SEEPHOTO=64,t.HEAD_MENU_INVISINA=128,t.HEAD_MENU_REPORT=256,t.FRDGROUP_WEIBO=-1,t.FRDGROUP_FANS=0,t.FRDGROUP_FOLLOW=1,t.FRDGROUP_FRD=2,t.FRDGROUP_CUT=3,t.FRDGROUP_USER1=4,t.FRDGROUP_USER2=5,t.FRDGROUP_USER3=6,t.FRDGROUP_USER4=7,t.FRDGROUP_USER5=8,t.FRDGROUP_USER6=9,t.FRDGROUP_USER7=10,t.FRDGROUP_END=11,t.FRDSRC_LOCAL=0,t.FRDSRC_SINA=1,t.FRDSRC_END=2,t.INVITEQUESTKIND_LV=0,t.INVITEQUESTKIND_END=1,t.FRD_FANS_MAX=50,t.FRD_FOLLOW_MAX=20,t.FRD_FRIEND_MAX=100,t.NICK_LENGTH_MAX=16,t.NICK_LENGTH_MIN=1,t.LABEL_LENGTH_MAX=32,t.LABEL_LENGTH_MIN=0,t.SVR_INBOX_HISTORY_MAX=100,t.CLT_INBOX_HISTORY_MAX=100,t.MESSAGE_SIZE_MAX=140,t.MESSAGE_SIZE_MIN=2,t.SYSTEM_ANNM_ID=0,t.SYSTEM_MAIL_ID=1,t.SYSTEM_MAIL_GIFT=2,t.MESSAGE_STATUS_DELETE=-2,t.MESSAGE_STATUS_SENDING=-1,t.MESSAGE_STATUS_NEW=0,t.MESSAGE_STATUS_READ=1,t.MESSAGE_STATUS_PROCESSED=2,t}(),IapDef=function(){function t(){}return __class(t,"game.def.IapDef"),t.IAP_ZS=0,t.IAP_HLJB=1,t.IAP_WP=2,t.IAP_FLK=3,t.IAP_SCHD=4,t.IAP_YDLB=5,t.IAP_LB=6,t.IAP_YK=7,t}(),OrnamentDef=function(){function t(){}return __class(t,"game.def.OrnamentDef"),t.HCWP_PTJZ=0,t.HCWP_KHCJZ=1,t.HCWP_JZPF=2,t.HCWP_END=3,t}(),PlaneDef=function(){function t(){}return __class(t,"game.def.PlaneDef"),t.PLANESTATE_STOP=0,t.PLANESTATE_COME=1,t.PLANESTATE_GO=2,t.PLANESTATE_BACK_GO=3,t.PLANESTATE_END=4,t}(),PubDef=function(){function t(){}return __class(t,"game.def.PubDef"),t.RANK_LV_GROUP=function(){return[19,29,39,49,59]},t.FindRankLvGroup=function(e){var i;i=t.RANK_LV_GROUP();var n=ArrOp.SzHalfSearch(e,i);return 0>n&&(n=-1-n),n},t.GetRankSvrName=function(t){var e=["评价排行服务","人气排行服务","等级排行服务","金币排行服务","海运排行服务","种植排行服务","养殖排行服务","填充排行服务"];return t>=e.length?"":e[t]},t.FindRankSvrName=function(t){var e=["评价排行服务","人气排行服务","等级排行服务","金币排行服务","海运排行服务","种植排行服务","养殖排行服务","填充排行服务"];return ArrOp.SzFind(t,e)},t.GetRankSearchName=function(t){var e=["评价排行查询服务","人气排行查询服务","等级排行查询服务","金币排行查询服务","海运排行查询服务","种植排行查询服务","养殖排行查询服务","填充排行查询服务"];return t>=e.length?"":e[t]},t.GetUserFriendSvrName=function(e){return t.m_nFriendSvrNo>0?"fsv"+e%t.m_nFriendSvrNo:"fsv"+e%1},t.GetChatRoomName=function(t){var e=["频道1-岸金镇","频道2-风谷镇","频道3-微风镇","频道4-瑶河镇","频道5-枫叶镇","频道6-青果镇","频道7-双子镇","频道8-漫星镇","频道9-彩虹镇","频道10-绿洲镇","频道11-幻林镇","频道12-阳光镇","频道13-心见镇","频道14-碧波镇","频道15-七巧镇","频道16-鱼水镇"];return 0>t||t>=e.length?"":e[t]},t.GetUserSvrNo=function(t){return"usv"+t%1},t.GetUserTvSvrNo=function(t){return"报纸服务"+t%1},t.GetUserSvrName=function(e){return 1e3>e?"NPC服务":t.m_nUserSvrNo>0?"usv"+e%t.m_nUserSvrNo:t.GetUserSvrNo(e)},t.GetUserTvSvrName=function(e){return t.GetUserTvSvrNo(e)},t.YHFWM=function(e){return t.GetUserSvrName(e)},t.BZFWM=function(e){return t.GetUserTvSvrName(e)},t.HYFWM=function(e){return t.GetUserFriendSvrName(e)},t.PLANT_LAYER=1e4,t.ANIM_LAYER=1e4,t.SELEFF_LAYER=9999,t.CLOUD_LAYER=1e5,t.ZTOP=1e8,t.ZTOP_SAME=.8,t.BD_ZS=0,t.BD_TD=1,t.BD_GS=2,t.BD_JQ=3,t.BD_YZ=4,t.BD_CW=5,t.BD_JZ=6,t.BD_QJ=7,t.BD_TT=8,t.BD_WWJ=9,t.BD_CWJT=10,t.BD_NPCHG=11,t.BD_ZZY=12,t.BD_PF=13,t.ROOMCHATSVRNAME="roomchatsvr",t.LOGINANNANSVR="登陆公告服务",t.DEVICESVRNAME="devicesvr",t.BROADECAST="广播服务",t.MAILLOGINSVR="邮件登录",t.WEIBOLOGINSVR="WeiboLogin",t.TVSVRNAME="报纸服务",t.TVCALSVRNAME="报纸计算服务",t.LVRANKSSVRNAME="等级排行服务",t.LVSEARCHSVRNAME="等级排行查询服务",t.TRADERANKSSVRNAME="海运排行服务",t.TRADESEARCHSVRNAME="海运排行查询服务",t.EVARANKSSVRNAME="评价排行服务",t.EVASEARCHSVRNAME="评价排行查询服务",t.PRARANKSSVRNAME="人气排行服务",t.PRASEARCHSVRNAME="人气排行查询服务",t.MONEYRANKSSVRNAME="金币排行服务",t.MONEYSEARCHSVRNAME="金币排行查询服务",t.PLANTRANKSSVRNAME="种植排行服务",t.PLANTSEARCHSVRNAME="种植排行查询服务",t.COWRANKSSVRNAME="养殖排行服务",t.COWSEARCHSVRNAME="养殖排行查询服务",t.FILLRANKSSVRNAME="填充排行服务",t.FILLSEARCHSVRNAME="填充排行查询服务",t.USERTRADESVRNAME="VIP交易服务",t.RANK_LV_NO=1e4,t.RANK_LV_NUM=6,t.NPC_UID_LIMIT=1e3,t.NPCSVRNAME="NPC服务",t.MAXUSERSVRNUM=1,t.MAXFRIENDUSERSVRNUM=1,t.ALLROOMCHAT=16,t.ROOMCHATNUM=1e3,t.ROOMNAME="ChatRoom",t.m_nUserSvrNo=-1,t.m_nFriendSvrNo=-1,t.MT_JZJG=86400,t.MT_DDJG=15e3,t.MT_LGJG=52200,t.LBT_ZSGZSX=85,t.LBT_GZZS=15,t.LBT_GGZS=1,t.LBT_SCZS=1,t.FRIPOINTSWITCH=1,t.OREVAGOLDSWITCH=1,t.DK_ZSSJ=10,t.DK_SDSJDW=3,t.DK_SDSJ=100,t.DK_SDZLXS=1,t.DK_SDSJZL=500,t.DK_SDZDSL=100,t.QDJL_LJ2T=7,t.QDJL_LJ3T=8,t.QDJL_LJ5T=9,t.QDJL_LJ7T=10,t.QDJL_ZQD=11,t.QDJL_SCLB=6,t.OP_ARCH_ADD=1,t.OP_ARCH_MOD=2,t.OP_ARCH_MOST=4,t.OP_ARCH_STEP=8,t.OP_ARCH_UNBROKEN=22,t.MT_KONG=0,t.MT_JZZ=1,t.MT_DC=2,t.MT_CRG=3,t.MT_ZG=4,t.MT_CLG=5,t.MAXHELPNUM=3,t.CLOULD_MOVE=0,t.CLOULD_HOLD=1,t.CLOULD_DRAG=2,t.CLOULD_RAIN=3,t.CLOULD_END=4,t.MASKCOULDSTATE_NO=0,t.MASKCOULDSTATE_OPEN_RED=1,t.MASKCOULDSTATE_OPEN_GREEN=2,t.MASKCOULDSTATE_LOCK=3,t.MASKCOULDSTATE_UNACTIVE=4,t}(),Style_error=function(){function t(){}return __class(t,"game.def.Style_error"),t.Define=function(e,i){t.s_szError.push([e,i])},t.GetMessage=function(e){var i=ArrOp.SzSearch(e,t.s_szError);return 0>i?"error. code="+e:t.s_szError[i][1]},t.ERR_GAME_NICK_SHORT=201,t.ERR_GAME_NICK_LONG=202,t.ERR_GAME_LABEL_LONG=203,__static(t,["s_szError",function(){return this.s_szError=[[201,"庄园名字不能太短，不得少于{d}个字符！"],[202,"庄园名字不能太长，不得多于{d}个字符！"],[203,"个性签名不能太长,不得多于{d}个字符！"]]}]),t}(),VipDef=function(){function t(){}return __class(t,"game.def.VipDef"),t.GetVipDailyLight=function(){return[20,20,30,40,60,80,100,120,150]},t.VIP_0=0,t.VIP_1=1,t.VIP_2=2,t.VIP_3=3,t.VIP_4=4,t.VIP_5=5,t.VIP_6=6,t.VIP_7=7,t.VIP_8=8,t.VIP_END=9,t.VIPCZ_VIP1=1,t.VIPCZ_VIP2=6,t.VIPCZ_VIP3=30,t.VIPCZ_VIP4=100,t.VIPCZ_VIP5=200,t.VIPCZ_VIP6=500,t.VIPCZ_VIP7=1e3,t.VIPCZ_VIP8=2e3,t}(),gameOpState=function(){function t(){this.curSta=0,this.curSta=t.STA_NORMAL}return __class(t,"game.gameOpState"),t.STA_NONE=-1,t.STA_NORMAL=0,t.STA_SEED=1,t}(),DiamondToItem=function(){function t(){}return __class(t,"game.gdcal.DiamondToItem"),t.GetItem=function(e){for(var i=[],n=0;n<t.s_szDiaToItem.length;n++)if(i=t.s_szDiaToItem[n],i[0]==e)return i;return null},t.GetProductNum=function(){return t.s_szDiaToItem.length},t.GetProduct=function(e){if(0>e||e>=t.s_szDiaToItem.length)return null;var i=[];return i=t.s_szDiaToItem[e]},__static(t,["s_szDiaToItem",function(){return this.s_szDiaToItem=[["c1001",0,125,250,"名字","^125",[[25,125],[25,25]],"tex_IAP_小袋闪电"],["c1002",0,500,1e3,"名字","^500",[[25,500],[25,150]],"tex_IAP_中袋闪电"],["c1003",0,2e3,4e3,"名字","^2000",[[25,2e3],[25,800]],"tex_IAP_大箱闪电"],["c1004",1,60,120,"名字","K10",[[26,10],[26,2]],"icon_钥匙小包"],["c1005",1,360,720,"名字","K60",[[26,60],[26,15]],"icon_钥匙中包"],["c1006",1,2160,4320,"名字","K360",[[26,360],[26,120]],"icon_钥匙大箱"],["c1007",2,0,0,"名字","首冲礼包",[[2,200],[7539,1],[6002,5],[7505,3],[25,50],[16,1],[17,1],[18,1],[14,8],[10,8],[11,8],[12,8],[13,8],[15,8]],"tex_IAP_日福利卡"],["c1008",3,100,200,"1个喇叭","L1",[[27,1],[27,0]],"uiimg_小份喇叭"],["c1009",3,500,1e3,"名字","L5",[[27,5],[27,1]],"uiimg_中份喇叭"],["c1010",3,1e3,2e3,"名字","L10",[[27,10],[27,5]],"uiimg_大份喇叭"],["c1011",4,998,1998,"名字","国庆礼包",[[7576,1],[7515,1],[7584,1],[7575,1]],"tex_IAP_日福利卡"],["c1012",4,360,0,"浮空岛初级理财","",[],"tex_IAP_日福利卡"],["c1013",4,1600,0,"浮空岛大亨理财","",[],"tex_IAP_日福利卡"],["c1014",4,199,388,"节日超值DIY礼盒","每日限购1个",[[28,150],[20,2],[19,2],[21,2]],"icon_礼包图标"],["c1015",4,588,1088,"节日特惠礼盒","",[[28,300],[12,1],[10,2],[11,2],[13,1],[14,2],[15,2]],"icon_礼包图标"],["c1016",4,998,1998,"海底装饰礼盒","限购1次",[[7575,1],[7577,1]],"icon_礼包图标"],["c1017",4,68,168,"蔗糖礼盒","",[[203,5],[203,0]],"icon_礼包图标"],["c1018",4,98,180,"初级粮仓扩充礼盒","每日限购1次",[[11,2],[10,2],[12,1]],"icon_礼包图标"],["c1019",4,588,720,"高级粮仓扩充礼盒","每日限购2次",[[11,8],[10,8],[12,6]],"icon_礼包图标"],["c1020",4,98,180,"初级仓库扩充礼盒","每日限购1次",[[13,2],[14,2],[15,1]],"icon_礼包图标"],["c1021",4,588,720,"高级仓库扩充礼盒","每日限购2次",[[13,8],[14,8],[15,6]],"icon_礼包图标"],["c1022",4,118,160,"畅玩清障礼盒","每日限购1次",[[16,6],[17,6]],"icon_礼包图标"],["c1023",4,188,300,"炫酷金手指礼盒","每日限购1次",[[22,100],[22,0]],"icon_礼包图标"],["c1024",4,498,600,"暴走娃娃机","每日限购1次",[[3,20],[3,0]],"icon_礼包图标"],["c1025",4,168,200,"浮空岛地产礼盒","每日限购1次",[[6,20],[6,0]],"icon_礼包图标"],["c1026",4,199,388,"激情超值DIY礼盒","每日限购1次",[[28,150],[20,2],[19,2],[21,2]],"icon_礼包图标"],["c1027",4,588,1088,"节日特惠仓储礼盒","",[[28,300],[28,1],[10,2],[11,2],[13,1],[14,2],[15,2]],"icon_礼包图标"],["c1028",4,998,1988,"万圣节礼盒","",[[7681,1],[7682,1],[7683,1]],"icon_礼包图标"],["c1029",4,1298,1998,"凛冬冰纷乐礼盒","",[[7654,1],[7655,1],[7656,1]]]]}]),t}(),EvaLevel=function(){function t(){}return __class(t,"game.gdcal.EvaLevel"),t.GetEvaStr=function(e){var i=ArrOp.SzHalfSearch(e,t.s_szEvaStar);return 0>i&&(i=-i-1),t.s_szEvaStar[i][1]},t.GetLevelStr=function(e){return t.s_szEvaStar[Util.Clamp(e,0,t.s_szEvaStar.length-1)][1]},t.GetLevel=function(e){var i=ArrOp.SzHalfSearch(e,t.s_szEvaStar);return 0>i&&(i=-i),i},t.GetLevelSz=function(){return t.s_szEvaStar},__static(t,["s_szEvaStar",function(){return this.s_szEvaStar=[[0,"33333"],[20,"03333"],[40,"00333"],[60,"00033"],[80,"00003"],[100,"00000"],[130,"10000"],[160,"11000"],[190,"11100"],[220,"11110"],[250,"11111"],[300,"21111"],[350,"22111"],[400,"22211"],[450,"22221"],[500,"22222"],[580,"42222"],[660,"44222"],[740,"44422"],[820,"44442"],[900,"44444"],[1020,"54444"],[1140,"55444"],[1260,"55544"],[1380,"55554"],[1500,"55555"],[1670,"65555"],[1840,"66555"],[2010,"66655"],[2180,"66665"],[2350,"66666"],[2580,"86666"],[2810,"88666"],[3040,"88866"],[3270,"88886"],[3500,"88888"],[3800,"98888"],[4100,"99888"],[4400,"99988"],[4700,"99998"],[5e3,"99999"],[5380,"a9999"],[5760,"aa999"],[6140,"aaa99"],[6520,"aaaa9"],[6900,"aaaaa"],[9999999,"?????"]];
}]),t}(),ClnFriendCal=function(){function t(){this.m_szData=null,this.m_nIsHornMode=0}__class(t,"game.gdcal.frd.ClnFriendCal");var e=t.prototype;return e.GetFriPointData=function(){var t=[];if(t=ArrOp.GetStrVal("fripoint",this.m_szData.nameddata),!FriPointData.isstruct(t)){var e=gSys.GetCurSecAdj(),i=[0,0,[],0];i[0]=0,i[1]=e,i[2]=[],i[3]=0,t=i}return t},e.GetPackage=function(t,e,i){var n=DataTable.m_iSelfUser;return n.CheckMakeItemSz(e,1)?(n.CallSvrRet("GetPackage",[t],Handler.create(this,function(s){if(s.length<1)return!1;s[0];if(s=s[1],!s)return!1;if(0>=s)return Log1.debug("The opVer num is:",s),-s==ErrorDef.ERR_REWARD_CERT_INVALID&&gSys.GameMsg("错误显示邮件,无效凭证！"),-s==ErrorDef.ERR_REWARD_REPEAT&&gSys.GameMsg("错误显示邮件，奖励已领取！"),DataTable.m_iFriendBar.CheckoutPackageMessage(t),!1;var a=new StringRef;if(!n.ChgItemSz(e,a,OPEnum.OP_XT_JL,i,1))return!1;DataTable.m_iFriendBar.CheckoutPackageMessage(t);for(var r=0;r<e.length;r++)e[r][0]>=5e3&&DataTable.m_iSelfUser.AddEvalue(e[r][0]);return!0})),!0):!1},e.GetFriPoint=function(){var t=this.GetFriPointData();return t[0]},e.GetCheckFriPoint=function(){var t=gSys.GetCurSecAdj(),e=this.GetFriPointData(),i=0;if(e[3]>0){if(e[1]>0&&Math.floor(t/86400)!=Math.floor(e[1]/86400)){var n=e[3],s=e[2];e[0]+=e[3],e[1]=t,e[2]=[],e[3]=0,this.m_szData.nameddata=ArrOp.SetStrVal("fripoint",this.m_szData.nameddata,e),DataTable.m_iSelfUser.Emit("reffriget",[n,s]),i=1}}else Math.floor(t/86400)!=Math.floor(e[1]/86400)&&(e[1]=t,this.m_szData.nameddata=ArrOp.SetStrVal("fripoint",this.m_szData.nameddata,e),i=1);return i&&DataTable.m_iSelfUser.CallSvr("CheckFriPoint",[]),e},e.AddFriPoint=function(t){var e;e=this.GetCheckFriPoint(),e[3]>=5||e[0]+e[3]>=50||(e[2]instanceof Array&&e[2].length<5&&ArrOp.SzSearch(t,e[2])<0&&e[2].push(t),e[3]+=1,this.m_szData.nameddata=ArrOp.SetStrVal("fripoint",this.m_szData.nameddata,e),DataTable.m_iSelfUser.Emit("fripointchg",e.curpoint))},e.GM_AddFriPoint=function(t){var e;e=this.GetCheckFriPoint(),e[0]+=t,this.m_szData.nameddata=ArrOp.SetStrVal("fripoint",this.m_szData.nameddata,e),DataTable.m_iSelfUser.Emit("fripointchg",e.curpoint)},e.SubFriPoint=function(t,e){if(void 0===e&&(e=0),0>t)return 0;var i;return i=this.GetCheckFriPoint(),i[0]<t?0:e?1:(i[0]-=t,this.m_szData.nameddata=ArrOp.SetStrVal("fripoint",this.m_szData.nameddata,i),DataTable.m_iSelfUser.Emit("fripointchg",i.curpoint),1)},e.GetMyFriendMaxNum=function(){return DataTable.m_iSelfUser.IsCanVipFunc(20001)?DataTable.m_iSelfUser.IsCanVipFunc(50004)?200:DataTable.m_iSelfUser.IsCanVipFunc(40005)?180:DataTable.m_iSelfUser.IsCanVipFunc(30006)?150:120:100},e.GetMyWorldChatDefStr=function(){return this.m_nIsHornMode?"你的声音將通过喇叭传遍整个大陆!":DataTable.m_iSelfUser.IsCanVipFunc(10001)?"VIP特权专享【世界聊天-无冷却】":SysID.GetWorldChatNotiStr()},t}(),FriendBase=function(){function t(){this.m_szData=null,this.m_nUid=0}__class(t,"game.gdcal.frd.FriendBase");var e=t.prototype;return e.InitData=function(t){this.m_szData=t,this.m_szData[0]=this.m_szData[0]?this.m_szData[0]:0,this.m_szData[1]=this.m_szData[1]?this.m_szData[1]:"",this.m_szData[2]=this.m_szData[2]?this.m_szData[2]:0,this.m_szData[3]=this.m_szData[3]?this.m_szData[3]:0,this.m_szData[4]=this.m_szData[4]?this.m_szData[4]:[],this.m_szData[5]=this.m_szData[5]?this.m_szData[5]:0,this.m_szData[6]=this.m_szData[6]?this.m_szData[6]:[],this.m_szData[7]=this.m_szData[7]?this.m_szData[7]:[],this.m_szData[8]=this.m_szData[8]?this.m_szData[8]:[],this.m_szData[9]=this.m_szData[9]?this.m_szData[9]:[],this.m_nUid=t[0];var e=0,i=!1,n=this.m_szData[4];if(5!=!n.length){var s=[];for(e=0;e<n.length;e++)s.push(n[e]);this.m_szData[4]=s,i=!0}if(this.m_szData[7].length>0){for(this.m_szData[7]=this.CheckFriendOverMax(this.m_nUid,this.m_szData[7]),e=0;e<this.m_szData[7].length;e++)FriendInfo.isstruct(this.m_szData[7][e])?i=!FriendGameInfo.isstruct(this.m_szData[7][e][5]):gSys.Err("fr"+e+" type err");if(i){var a,r=[0,0,[],0,""];for(e=0;e<this.m_szData[7].length;e++)FriendInfo.isstruct(this.m_szData[7][e])&&(a=[],a=this.m_szData[7][e][5],FriendGameInfo.isstruct(a)||(FriendGameInfo_old.isstruct(a)?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]):(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4]),this.m_szData[7][e][5]=r))}}},e.CheckFriendOverMax=function(t,e){if(e.length<1)return e;var i=350;if(e.length<=70+i)return e;for(var n=[],s=0,a=0,r=0,h=e.length-1;h>=0;h--)if(FriendInfo.isstruct(e[h])){var o=0,l=0;switch(e[h][1]){case 1:a++,o=a,l=20;break;case 0:s++,o=s,l=50;break;case 3:continue;default:r++,o=r,l=DataTable.m_iSelfUser.GetMyFriendMaxNum()}o>l||(n=ArrOp.InsertSz(0,n,e[h]))}else gSys.Err("fr"+h+" type err");return n},e.GetUID=function(){return this.m_nUid},e.GetNick=function(){return this.m_szData[1]},e.GetLabel=function(){return this.m_szData[4][4]},e.SetLabel=function(t){this.m_szData[4][4]=t},e.GetVisu=function(){return this.m_szData[2]},e.GetShortInfo=function(){var t=[];return t[0]=this.m_szData[0],t[1]=this.m_szData[1],t[2]=this.m_szData[2],t[3]=this.m_szData[3],t},e.SetShortInfo=function(t){if(t[0]!=this.m_szData[0])return 0;var e=0;return t[1]!=this.m_szData[1]&&(this.m_szData[1]=t[1],e=1),t[2]!=this.m_szData[2]&&(this.m_szData[2]=t[2],e=1),t[3]!=this.m_szData[3]&&(this.m_szData[3]=t[3],e=1),e},e.IsFriend=function(t){var e=ArrOp.SzSearch(t,this.m_szData[7]);return 0>e?0:FriendDef.ISFRIEND(this.m_szData[7][e][1])},e.IsFollower=function(t){var e=ArrOp.SzSearch(t,this.m_szData[7]);return 0>e?0:FriendDef.ISFOLLOWER(this.m_szData[7][e][1])},e.IsFans=function(t){var e=ArrOp.SzSearch(t,this.m_szData[7]);return 0>e?0:FriendDef.ISFANS(this.m_szData[7][e][1])},e.GetFriendGroup=function(t){var e=ArrOp.SzSearch(t,this.m_szData[7]);return 0>e?-1:this.m_szData[7][e][1]},e.GetFriend=function(t){var e=ArrOp.SzSearch(t,this.m_szData[7]);if(0>e)return null;var i=this.m_szData[7][e];return i},e.DelFriend=function(t){var e=ArrOp.SzSearch(t,this.m_szData[7]);return 0>e?0:(this.m_szData[7]=ArrOp.DelSz(e,this.m_szData[7],1),1)},e.GetFriendNum=function(){for(var t=0,e=0,i=this.m_szData[7].length;i>e;e++)FriendDef.ISFRIEND(this.m_szData[7][e][1])&&t++;return t},e.GetGroupNum=function(t){for(var e=0,i=0;i<this.m_szData[7].length;i++)this.m_szData[7][i][1]==t&&e++;return e},e.GetFriendVar=function(){for(var t=[],e=0;e<this.m_szData[7].length;e++)this.m_szData[7][e][1]>=1&&t.push(this.m_szData[7][e][0]);return t},e.GetFriendVarEx=function(){for(var t=[],e=0;e<this.m_szData[7].length;e++)FriendDef.ISFRIEND(this.m_szData[7][e][1])&&t.push(this.m_szData[7][e]);return t},e.GetGroups=function(){return this.m_szData[6]},e.GetAllFriendVar=function(){return this.m_szData[7]},e.OnModi=function(){},e.MoveToGroup=function(t,e){if(!FriendDef.ISFRIEND(e))return null;if(!this.IsFriend(t))return null;var i=ArrOp.SzSearch(t,this.m_szData[7]);return this.m_szData[7][i][1]=e,this.OnModi(),this.m_szData[7][i]},e.ModifyGroup=function(t){var e=this.GetCustomGroup();if(0==t.length)return e;for(var i=0,n=0;n<t.length;n++)i=ArrOp.SzSearch(t[n][0],e),i>=0&&(e[i][1]=t[n][1]);return this.m_szData[9]=ArrOp.SetStrValM("frdgroup",this.m_szData[9],e),this.OnModi(),e},e.GetCustomGroup=function(){var t=ArrOp.GetStrValM("frdgroup",this.m_szData[9]);return(null==t||0==t.length)&&(t=[],t.push([4,"分组1"]),t.push([5,"分组2"]),t.push([6,"分组3"]),t.push([7,"分组4"]),t.push([8,"分组5"]),this.m_szData[9]=ArrOp.SetStrValM("frdgroup",this.m_szData[9],t),this.OnModi()),t.length>6&&(t=ArrOp.DelSz(6,t,2)),t},t.CastShortInfo=function(t){if(FrdUserInfo.isstruct(t))return t;var e=[0,"",0,0];return FriendUserData.isstruct(t)&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],FriendGameInfo.isstruct(t[4])),FriendInfo.isstruct(t)&&(e[0]=t[0],e[1]=t[2],e[2]=t[3],e[3]=t[4],FriendGameInfo.isstruct(t[5])),e},t}(),worldchatstyle=function(){function t(){}return __class(t,"game.gdcal.frd.worldchatstyle"),t.s_nWorldChatSwitch=1,t}(),GCultureLoader=function(){function t(){this.arr=null,this.queue=null,this.cd=3e3,this.init()}__class(t,"game.gdcal.GCultureLoader");var e=t.prototype;return e.init=function(){this.queue=[],this.arr=[[[{url:"ui/icon/51c1a498edaf500b.png",type:"image"},{url:"ui/icon/52416068e7a2b008.png",type:"image"},{url:"ui/icon/51c12bc0e3263004.png",type:"image"}],[{url:"3d/tex/51d148fde6baf002.png",type:"image"},{url:"dat/73a1a277.ani",type:"arraybuffer"}]],[[{url:"ui/icon/51c2a5b7fe02a007.png",type:"image"},{url:"ui/icon/523974b26b17d004.png",type:"image"},{url:"ui/icon/51c2a4a7fe02a004.png",type:"image"}],[{url:"3d/tex/51d55ade281fe002.png",type:"image"},{url:"dat/28cb31b3.ani",type:"arraybuffer"}]],[[{url:"ui/icon/51c418831199a004.png",type:"image"},{url:"ui/icon/52417d6ee9e0a006.png",type:"image"},{url:"ui/icon/51c117f8e70f7004.png",type:"image"}],[{url:"3d/tex/52a7cf7c4fbbe004.png",type:"image"},{url:"dat/37b03110.ani",type:"arraybuffer"}]],[[{url:"ui/icon/51c2d561fe922007.png",type:"image"},{url:"ui/icon/523974d46b17d00a.png",type:"image"},{url:"ui/icon/51dd36d7a34ef007.png",type:"image"}],[{url:"3d/tex/53303157a95d8071.png",type:"image"},{url:"dat/718773b3.ani",type:"arraybuffer"}]]]},e.cultureName=function(t,e){switch(t){case"鸡":this.variety(0,0),5>e&&this.variety(0,1);break;case"奶牛":this.variety(1,0),5>e&&this.variety(1,1);break;case"猪":this.variety(2,0),5>e&&this.variety(2,1);break;case"绵羊":this.variety(3,0),5>e&&this.variety(3,1)}},e.variety=function(t,e){this.queue.push([t,e]),Laya.timer.once(this.cd,this,this.start,null,!0)},e.start=function(){var t=GameMain._ins.m_gameUI.preloadFree;if(!t)return void Laya.timer.once(this.cd,this,this.start,null,!0);if(!(this.queue.length<1)){var e=this.queue.shift(),i=e[0],n=e[1];PreloadManager.getInstance().loadImg(this.arr[i][n],Handler.create(this,this.start),3)}},t.getIns=function(){return t.ins||(t.ins=new t),t.ins},t.ins=null,t}(),GResTab_Achievement=function(){function t(){this.m_szItemDef=null,this.m_szValNameIndex=null,this.m_szItemDef=DataTable.achievementtab.itemArr}__class(t,"game.gdcal.GResTab_Achievement");var e=t.prototype;return e.OnDataReady=function(){this.m_szValNameIndex=[];var t=0,e=[];for(t=0;t<this.m_szItemDef.length;t++){var i=this.m_szItemDef[t][4],n=ArrOp.SzHalfSearch(i,this.m_szValNameIndex,0,e);if(n>=0)throw new Error("成就表关联变量重复:"+i+" "+t+" as "+this.m_szValNameIndex[n][1]);this.m_szValNameIndex=ArrOp.InsertSz(-n-1,this.m_szValNameIndex,[i,t])}e=null},e.GetValNameLink=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szValNameIndex);return 0>e?null:(e=this.m_szValNameIndex[e][1],this.m_szItemDef[e])},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetAll=function(){return this.m_szItemDef},t}(),GResTab_Box=function(){function t(){this.m_szItemDef=null,this.m_szBoxTab=null,this.m_szDiaBoxTab=null,this.m_szItem=null,this.m_szDiaItem=null,this.m_szItemDef=DataTable.boxtab.itemArr}__class(t,"game.gdcal.GResTab_Box");var e=t.prototype;return e.OnDataReady=function(){this.m_szBoxTab=[],this.m_szDiaBoxTab=[],this.m_szItem=[],this.m_szDiaItem=[];for(var t=0,e=[],i=0;i<this.m_szItemDef.length;i++){if(t=DataTable.m_iItemTab.GetIdByName(this.m_szItemDef[i][1],e),t||(t=DataTable.m_iBuildTab.GetIdByName(this.m_szItemDef[i][1],e)),!t)throw new Error("宝箱概率表 没有获取到ID");this.m_szItemDef[i][4]?(this.m_szBoxTab.push([t,this.m_szItemDef[i][2],this.m_szItemDef[i][3],this.m_szItemDef[i][5]]),this.m_szItem.push(this.m_szItemDef[i])):(this.m_szDiaBoxTab.push([t,this.m_szItemDef[i][2],this.m_szItemDef[i][3],this.m_szItemDef[i][5]]),this.m_szDiaItem.push(this.m_szItemDef[i]))}e=null},e.GetRandItem=function(t,e){var i,n;if(e?(i=this.m_szBoxTab,n=this.m_szItem):(i=this.m_szDiaBoxTab,n=this.m_szDiaItem),i.length<1)return 0;var s=0,a=0;for(a=0;a<i.length;a++)t<i[a][2]||(s+=n[a][2]);var r=0;for(r=Math.round(Math.random()*s),a=0;a<i.length;a++)if(!(t<i.length)&&(s-=i[a][1],r>=s))return i[a][0];return 0},e.GetItemNum=function(t,e){var i;i=1==e?this.m_szBoxTab:this.m_szDiaBoxTab;var n=ArrOp.SzSearch(t,i);return 0>n?1:i[n][3]},t}(),GResTab_Activity=function(){function t(){this.m_szItemDef=null,this.m_szActivByKind=[],this.m_szActivByGroup=[],this.m_szItemDef=DataTable.activitytab.itemArr}__class(t,"game.gdcal.GResTab_Activity");var e=t.prototype;return e.OnDataReady=function(){this.CheckActivity()},e.CheckActivity=function(){for(var t=0,e=0,i=0,n=[],s=0;s<this.m_szItemDef.length;s++)e=this.m_szItemDef[s][2],e+1>this.m_szActivByGroup.length&&(n=ArrOp.InitSz(this.m_szItemDef[s][2]-this.m_szActivByGroup.length+1,[]),this.m_szActivByGroup=ArrOp.SzLink(this.m_szActivByGroup,n)),i=ArrOp.SzHalfSearch(this.m_szItemDef[s][0],this.m_szActivByGroup[e]),0>i&&(this.m_szActivByGroup[e]=ArrOp.InsertSz(-i-1,this.m_szActivByGroup[e],this.m_szItemDef[s])),t=this.m_szItemDef[s][5],t+1>this.m_szActivByKind.length&&(n=ArrOp.InitSz(this.m_szItemDef[s][5]-this.m_szActivByKind.length+1,[]),this.m_szActivByKind=ArrOp.SzLink(this.m_szActivByKind,n)),i=ArrOp.SzHalfSearch(this.m_szItemDef[s][0],this.m_szActivByKind[t]),0>i&&(this.m_szActivByKind[t]=ArrOp.InsertSz(-i-1,this.m_szActivByKind[t],this.m_szItemDef[s]))},e.GetActivityByID=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetActivityByKind=function(t){return t>=this.m_szActivByKind.length?null:this.m_szActivByKind[t]},e.GetActivityByGroup=function(t){return t>=this.m_szActivByGroup.length?null:this.m_szActivByGroup[t]},e.GetActSzQuest=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e][14]},e.GetShowAll=function(t,e){if(void 0===e&&(e=-1),t>=this.m_szActivByGroup.length)return[null,null];var i=[],n=[],s=[];n=0>t?this.m_szItemDef:this.m_szActivByGroup[t];for(var a=0,r=0,h=0;h<n.length;h++)if(!(e>=0&&n[h][3]!=e||n[h][17]>DataTable.m_iSelfUser.m_nLevel)){switch(n[h][0]){case 9:if(DataTable.m_iSelfUser.GetFirRecharge())continue;break;case SysID.HD_GQ:if(DataTable.m_iSelfUser.GetGiftPickRec(2))continue;break;case 147:if(DataTable.m_iSelfUser.IsBuyInvest())continue;break;case 148:if(!DataTable.m_iSelfUser.GetGiftPickRec(3))continue;if(!DataTable.m_iSelfUser.CheckInvestQuest(148))continue;break;case 149:if(!DataTable.m_iSelfUser.GetGiftPickRec(4))continue;if(!DataTable.m_iSelfUser.CheckInvestQuest(149))continue;break;case 154:continue;case 220:var o=DataTable.m_iSelfUser.GetQuestData(2099);if(2==o[2])continue;break;case 5:continue}DataTable.m_iSelfUser.IsActivDay(n[h][9],n[h][10],n[h][7],n[h][8])<=0||(a=n[h][1],r=ArrOp.SzHalfSearch(a,i),i=r>=0?ArrOp.InsertSz(r+1,i,[a,n[h]]):ArrOp.InsertSz(-r-1,i,[a,n[h]]),r=ArrOp.SzHalfSearch(n[h][3],s),0>r&&(s=ArrOp.InsertSz(-r-1,s,n[h][3])))}return[i,s]},e.GetAll=function(){return this.m_szItemDef},t}(),GResTab_ActNpcOrder=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.actnpcorder.itemArr}__class(t,"game.gdcal.GResTab_ActNpcOrder");var e=t.prototype;return e.OnDataReady=function(){},e.GetActNpcOrder=function(t){for(var e=[],i=0;i<this.m_szItemDef.length;i++)this.m_szItemDef[i][3]<=t&&e.push(this.m_szItemDef[i]);var n=Math.floor(Math.random()*e.length);return e[n][0]},e.GetSzItem=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);if(0>e)return null;var i=[];return i.push([this.m_szItemDef[e][1][0][0],Math.min(-this.m_szItemDef[e][1][0][1],this.m_szItemDef[e][1][0][1])]),i.push(this.m_szItemDef[e][2][0]),i},t}(),GResTab_BoatEx=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.BoatExTab.itemArr}__class(t,"game.gdcal.GResTab_BoatEx");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){var e=ArrOp.SzSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetTabSz=function(){return this.m_szItemDef.length},e.GetAll=function(){return this.m_szItemDef},t}(),GResTab_BuffGroup=function(){function t(){this.m_szItemDef=null,this.m_szTitleID=null,this.m_szItemDef=DataTable.BuffGroupTab.itemArr}__class(t,"game.gdcal.GResTab_BuffGroup");var e=t.prototype;return e.OnDataReady=function(){this.InitBuffGroupTab()},e.InitBuffGroupTab=function(){this.m_szTitleID=[];for(var t=0;t<this.m_szItemDef.length;t++)SysID.IsCHENHAO(this.m_szItemDef[t][0])&&this.m_szTitleID.push(this.m_szItemDef[t][0])},e.GetAllTitleID=function(){return this.m_szTitleID},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},t}(),GResTab_BuffTab=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.BuffTab.itemArr}__class(t,"game.gdcal.GResTab_BuffTab");var e=t.prototype;return e.OnDataReady=function(){},t}(),GResTab_Build=function(){function t(){this.m_szItemDef=null,this.m_szNameTab=[],this.m_szTreeId=[],this.m_szStampBuild=[],this.m_szItemDef=DataTable.buildtab.itemArr,t._ins=this}__class(t,"game.gdcal.GResTab_Build");var e=t.prototype;return e.OnDataReady=function(){this.m_szStampBuild.length=0,this.m_szNameTab.length=0;for(var t,e=0,i=[],n=0,s=this.m_szItemDef.length;s>n;n++)t=this.m_szItemDef[n],t[0]<1?console.log("建筑ID不能小于1： id="+t.buildid):(2==t[1]&&this.m_szTreeId.push(t[1]),e=ArrOp.SzSearch(t[2],this.m_szNameTab,0,i),0>e?this.m_szNameTab=ArrOp.InsertSz(e,this.m_szNameTab,[t[2],t[0]]):console.log("itemtab name have been existed:  name="+t[2]+";id="+t[0]),t[8]>0&&(e=ArrOp.SzHalfSearch(t[22],this.m_szStampBuild,0,i),0>e?this.m_szStampBuild=ArrOp.InsertSz(-1-e,this.m_szStampBuild,[t[22],[t[0]]]):this.m_szStampBuild[e][1].push(t[0])));i=null},e.GetStampBuildByKind=function(t){var e=0;return e=ArrOp.SzHalfSearch(t,this.m_szStampBuild),0>e?null:this.m_szStampBuild[e][1]},e.GetStampBuildNumByKind=function(t){var e=0;return e=ArrOp.SzHalfSearch(t,this.m_szStampBuild),0>e?null:this.m_szStampBuild[e][1].length},e.GetAllTreeID=function(){return this.m_szTreeId},e.Get=function(t){return DataTable.buildtab.getObj(t)},e.GetItemSysName=function(t){var e=DataTable.buildtab.getObj(t);return e?e[2]:null},e.GetIdByName=function(t,e){var i=ArrOp.SzSearch(t,this.m_szNameTab,0,e);return 0>i?0:this.m_szNameTab[i][1]},e.GetByName=function(t){var e=this.GetIdByName(t,null);return DataTable.buildtab.getObj(e)},e.GetBuildNeedLv=function(t){var e=DataTable.buildtab.getObj(t);return e?e[11]:0},e.GetAll=function(){return this.m_szItemDef},t._ins=null,t}(),GResTab_BuyBack=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.buybacktab.itemArr}__class(t,"game.gdcal.GResTab_BuyBack");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(){return this.m_szItemDef.length<1?null:this.m_szItemDef[0]},t}(),GResTab_DailyRnd=function(){function t(){this.m_szItemDef=null,this.m_nMaxLv=4,this.m_szDailyRnd=null,this.m_szItemDef=DataTable.dailyrndtab.itemArr}__class(t,"game.gdcal.GResTab_DailyRnd");var e=t.prototype;return e.OnDataReady=function(){this.m_szDailyRnd=[],this.m_szDailyRnd=ArrOp.InitSz(this.m_nMaxLv,null);var t,e,i=0,n=0,s=0,a={},r={};for(i=0;i<DataTable.itemtab.itemArr.length;i++)e=DataTable.itemtab.itemArr[i],a[e[2]]=e;for(i=0;i<DataTable.buildtab.itemArr.length;i++)e=DataTable.buildtab.itemArr[i],r[e[3]]=e;for(i=0;i<this.m_szItemDef.length;i++){var h=this.m_szItemDef[i][1];if(t=a[h])n=t[5],s=t[0];else{if(t=r[h],null==t){gSys.Err("GResTab_DailyRnd name not find name="+this.m_szItemDef[i][1]);continue}n=t[11],s=t[0]}this.m_szItemDef[i][4]>=this.m_szDailyRnd.length?gSys.Err("GResTab_DailyRnd 物品档次超过最大值"):(this.m_szDailyRnd[this.m_szItemDef[i][4]]||(this.m_szDailyRnd[this.m_szItemDef[i][4]]=[]),this.m_szDailyRnd[this.m_szItemDef[i][4]].push([n,this.m_szItemDef[i][3],[s,this.m_szItemDef[i][2],this.m_szItemDef[i][0]]]))}for(i=0;i<this.m_szDailyRnd.length;i++)ArrOp.SzSort(this.m_szDailyRnd[i])},e.GetPowerValue=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);if(0>e)return 1;switch(this.m_szItemDef[e][4]){case 0:return 5;case 1:return 3}return 1},e.GetDailyRndData=function(){return this.m_szDailyRnd},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},t}(),GResTab_EmoFace=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.emoface.itemArr}__class(t,"game.gdcal.GResTab_EmoFace");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetAll=function(){return this.m_szItemDef},t}(),GResTab_Feild=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.feild.itemArr}__class(t,"game.gdcal.GResTab_Feild");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},t}(),GResTab_GameDef=function(){function t(){this.m_szItemDef=null,this.m_vGameDef=null,this.m_szItemDef=DataTable.gamedeftab.itemArr}__class(t,"game.gdcal.GResTab_GameDef");var e=t.prototype;return e.OnDataReady=function(){this.m_vGameDef=this.m_szItemDef},e.GetDef=function(){return this.m_vGameDef},e.GetOrnament=function(){var t,e=0,i=0,n=this.m_vGameDef[4],s=0,a=0;for(n&&(a=n.length),e=0;a>e;e++)if(SysID.IsDTZSJZID(n[e][0])&&(i=ArrOp.SzHalfSearch(n[e][0],t),!(i>=0))){i=-1-i;var r=DataTable.m_iBuildTab.Get(n[e][0]);null!=r&&r[8]>0&&(s+=r[8]),t=ArrOp.InsertSz(i,t,[n[e][0],0])}return[s,t]},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},t}(),GResTab_GoldCoins=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.goldcoinstab.itemArr}__class(t,"game.gdcal.GResTab_GoldCoins");var e=t.prototype;return e.OnDataReady=function(){},e.GetGoldCoinsData=function(t,e,i,n,s){if(0>t)return null;if(t>=this.m_szItemDef.length)return null;var a=[];if(i)for(var r=this.m_szItemDef[t][1],h=0,o=t;t+e>o&&this.m_szItemDef[o][1]==r;o++){if(h+=this.m_szItemDef[o][1],s){if(h>n)break}else if(h>n&&n>=r)break;a.push(this.m_szItemDef[o])}else a.push(this.m_szItemDef[t]);return a},t}(),GResTab_Item=function(){function t(){this.m_szItemDef=null,this.m_szNameTab=[],this.m_szOrder=[],this.m_szTomData=[],this.m_szField=[],this.m_szCulture=[],this.m_szMachine=[],this.m_szItemDef=DataTable.itemtab.itemArr}__class(t,"game.gdcal.GResTab_Item");var e=t.prototype;return e.IsCanBeFindByTom=function(t){var e=this.GetItemKind(t);return 0==e?0:SysID.IsJZPFID(t)?0:15>=t?0:19==t||20==t||21==t||22==t?0:t>=40&&43>t?0:1},e.OnDataReady=function(){this.m_szOrder.splice(0,this.m_szOrder.length),this.m_szTomData.splice(0,this.m_szTomData.length),this.m_szField.splice(0,this.m_szField.length),this.m_szNameTab.splice(0,this.m_szNameTab.length),this.m_szCulture.splice(0,this.m_szCulture.length),this.m_szMachine.splice(0,this.m_szMachine.length);var t,e,i=0,n=0,s=[],a=[],r=[],h=this.m_szItemDef.length;for(i=0;h>i;i++)t=this.m_szItemDef[i],!(t[0]<1||t[0]>=5e3)||SysID.IsJZPFID(t[0])?(1==t[4]&&(e=[t[5],t[0]],this.m_szField.push(e)),t[0]>=151&&t[0]<=154&&(e=[t[5],t[0]],n=ArrOp.SzHalfSearch(t[5],this.m_szCulture,0,s),0>n&&(this.m_szCulture=ArrOp.InsertSz(-n-1,this.m_szCulture,e))),(t[0]>=101&&t[0]<=134||t[0]>=171&&t[0]<=544)&&(e=[t[5],t[0]],n=ArrOp.SzHalfSearch(t[5],this.m_szMachine,0,a),0>n&&(this.m_szMachine=ArrOp.InsertSz(-n-1,this.m_szMachine,e))),(1==t[4]||3==t[4]||6==t[4])&&t[7]>0&&(e=[t[5],t[0]],this.m_szOrder.push(e)),this.IsCanBeFindByTom(t[0])&&(e=[t[5],t[0],t[4]],this.m_szTomData.push(e)),n=ArrOp.SzHalfSearch(t[1],this.m_szNameTab,0,r),0>n?this.m_szNameTab=ArrOp.InsertSz(n,this.m_szNameTab,[t[1],t[0]]):console.log("itemtab name have been existed:  name="+t[1]+";id="+t[0])):console.log("物品ID不能小于1或大于5000： id="+t[0]);s=a=r=null,this.m_szField=ArrOp.SzSort(this.m_szField),this.m_szOrder=ArrOp.SzSort(this.m_szOrder),this.m_szTomData=ArrOp.SzSort(this.m_szTomData)},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetItemSysName=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?"":this.m_szItemDef[e][1]},e.GetItemKind=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?0:this.m_szItemDef[e][4]},e.GetItemNeedLv=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?0:this.m_szItemDef[e][5]},e.GetIdByName=function(t,e){var i=ArrOp.SzSearch(t,this.m_szNameTab,0,e);return 0>i?0:this.m_szNameTab[i][1]},e.GetByName=function(t,e){var i=ArrOp.SzSearch(t,this.m_szNameTab,0,e);return 0>i?null:this.Get(this.m_szNameTab[i][1])},e.GetLvItemByVar=function(t,e){var i=ArrOp.SzHalfSearch(t+1,e);return 0>i&&(i=0),e.splice(i,1e3),i=ArrOp.SzSearch(t+1,e),i>=0&&(e=ArrOp.DelSz(i,e,1e3)),e},e.GetTomItems=function(t){return this.GetLvItemByVar(t,this.m_szTomData.slice())},e.GetFieldItems=function(){return this.m_szField},e.GetItemBasePrice=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?0:this.m_szItemDef[e][6]},e.GetItemValuePrice=function(t){if(10>t){switch(t){case 1:return 1;case 2:return 300;case 3:return 500;case 9:return 100}return 0}var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?0:Math.floor(3.3*this.m_szItemDef[e][6])},e.GetItemVarByKind=function(t,e){void 0===e&&(e=0);var i,n=[];switch(t){case"加工产品":i=this.m_szMachine;break;case"家畜产品":i=this.m_szCulture;break;case"作物":i=this.m_szField}for(var s=i.length,a=0;s>a&&!(i[a][0]>e);a++)n.push(i[a][1]);return n.sort(),n},t}(),GResTab_Lead=function(){function t(){this.m_szBranch=null,this.m_szItemDef=null,this.m_szItemDef=DataTable.leadtab.itemArr}__class(t,"game.gdcal.GResTab_Lead");var e=t.prototype;return e.OnDataReady=function(){this.m_szBranch=[];for(var t,e=0;e<this.m_szItemDef.length;e++)t=this.m_szItemDef[e],t[13]&&this.m_szBranch.push(t[0])},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetAllBranch=function(){return this.m_szBranch},t}(),GResTab_MacFormul=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.macformultab.itemArr}__class(t,"game.gdcal.GResTab_MacFormul");var e=t.prototype;return e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.OnDataReady=function(){},e.GetBulidFormul=function(t){var e,i=[],n=0,s=0,a=1;for(n=0;n<this.m_szItemDef.length;n++)e=this.m_szItemDef[n],e[2]==t&&(s>0&&s!=e[3]&&(a=0),s=e[3],i.push(e));return a||ArrOp.SzSortEx(i,3,0),i},e.GetBuild=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?0:this.m_szItemDef[e][2]},t}(),GResTab_MaskCloud=function(){function t(){this.m_szItemDef=null,this.m_szAllEvalue=null,this.m_szItemDef=DataTable.maskcloud.itemArr}__class(t,"game.gdcal.GResTab_MaskCloud");var e=t.prototype;return e.OnDataReady=function(){this.m_szAllEvalue=[];for(var t=0;t<this.m_szItemDef.length;t++){var e=ArrOp.SzHalfSearch(this.m_szItemDef[t][6],this.m_szItemDef);e>=0||(e=-1-e,this.m_szAllEvalue=ArrOp.InsertSz(e,this.m_szAllEvalue,this.m_szItemDef[t][6]))}},e.GetNextUnLockEva=function(t){t++;var e=ArrOp.SzHalfSearch(t,this.m_szAllEvalue);return 0>e&&(e=-1-e),e>=this.m_szAllEvalue.length?0:this.m_szAllEvalue[e]},e.GetAll=function(){return this.m_szItemDef},t}(),GResTab_NPC=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.npctab.itemArr}__class(t,"game.gdcal.GResTab_NPC");var e=t.prototype;return e.OnDataReady=function(){DataTable.m_iSelfView},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},t}(),GResTab_NpcNickdict=function(){function t(){this.m_szItemDef=null,this.s_All=null,this.m_szItemDef=DataTable.NpcNickdictTab.itemArr}__class(t,"game.gdcal.GResTab_NpcNickdict");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetAll=function(){return this.m_szItemDef},e.GetNick=function(){this.s_All=this.GetAll();var t=Math.floor(Math.random()*(this.s_All.length-1));return this.s_All[t][1]},t}(),GResTab_OnlineGift=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.onlinegifttab.itemArr}__class(t,"game.gdcal.GResTab_OnlineGift");var e=t.prototype;return e.OnDataReady=function(){},e.GetOnlineGift=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},t}(),GResTab_Pet=function(){function t(){this.m_szitemDef=null,this.m_szitemDef=DataTable.pettab.itemArr}__class(t,"game.gdcal.GResTab_Pet");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szitemDef);return 0>e?null:this.m_szitemDef[e].slice()},t}(),GResTab_PetHunt=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.pethunttab.itemArr}__class(t,"game.gdcal.GResTab_PetHunt");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},t}(),GResTab_Quest=function(){function t(){this.m_szItemDef=null,this.m_szQuest=null,this.m_szDailyQuest=null,this.m_szActQuest=null,this.m_szOtherQuest=null,this.m_szActContQuest=null,this.m_szItemDef=DataTable.quest.itemArr}__class(t,"game.gdcal.GResTab_Quest");var e=t.prototype;return e.OnDataReady=function(){this.CheckGroupQuest()},e.CheckGroupQuest=function(){var t,e,i=[],n=[],s=[];i=ArrOp.InitSz(1,null),s=ArrOp.InitSz(1,null),t=[],e=[];for(var a=0,r=(i.length,s.length,0),h=0;h<this.m_szItemDef.length;h++)switch(this.m_szItemDef[h][1]){case 3:r=ArrOp.SzHalfSearch(this.m_szItemDef[h][0],e),0>r&&(e=ArrOp.InsertSz(-r-1,e,this.m_szItemDef[h]));break;case 2:r=ArrOp.SzHalfSearch(this.m_szItemDef[h][0],t),0>r&&(t=ArrOp.InsertSz(-r-1,t,this.m_szItemDef[h])),this.m_szItemDef[h][3]>0&&(ArrOp.SzHalfSearch(this.m_szItemDef[h][0],this.m_szActContQuest),0>r&&(this.m_szActContQuest=ArrOp.InsertSz(-r-1,this.m_szActContQuest,[this.m_szItemDef[h][3],this.m_szItemDef[h][0]])));break;case 1:if(a=this.m_szItemDef[h][2]%200,!a)continue;a>s.length&&(n=ArrOp.InitSz(a-s.length,null),s=ArrOp.SzLink(s,n)),r=ArrOp.SzHalfSearch(this.m_szItemDef[h][0],s[a-1]),0>r&&(s[a-1]=ArrOp.InsertSz(-r-1,s[a-1],this.m_szItemDef[h]));break;default:if(a=this.m_szItemDef[h][2],!a)continue;a>i.length&&(n=ArrOp.InitSz(a-i.length,null),i=ArrOp.SzLink(i,n)),r=ArrOp.SzHalfSearch(this.m_szItemDef[h][0],i[a-1]),0>r&&(i[a-1]=ArrOp.InsertSz(-r-1,i[a-1],this.m_szItemDef[h]))}this.m_szQuest=i,this.m_szDailyQuest=s,this.m_szActQuest=t,this.m_szOtherQuest=e},e.GetGroupQuest=function(t){return t>this.m_szQuest.length?null:this.m_szQuest[t-1]},e.GetDailyQuestNum=function(){return this.m_szDailyQuest.length},e.GetDailyQuestByGroup=function(t){return t>=this.m_szDailyQuest.length?null:this.m_szDailyQuest[t]},e.GetAllOtherQuest=function(){return this.m_szOtherQuest},e.GetQuestByID=function(t,e){void 0===e&&(e=0);var i=0;SysID.IsZXRWID(t)&&(i=0),SysID.IsRCRWID(t)&&(i=1),SysID.IsHDRWID(t)&&(i=2),SysID.IsQTRWID(t)&&(i=3);var n,s=0,a=0,r=0;switch(i){case 0:n=this.m_szQuest;break;case 1:n=this.m_szDailyQuest;break;case 2:return a=ArrOp.SzHalfSearch(t,this.m_szActQuest),0>a?null:this.m_szActQuest[a];case 3:return a=ArrOp.SzHalfSearch(t,this.m_szOtherQuest),0>a?null:this.m_szOtherQuest[a]}for(var h=Math.max(0,e-1);h<n.length;h++)if(s=h,a=ArrOp.SzHalfSearch(t,n[h]),a>=0){r=1;break}return r?n[s][a]:null},e.GetQuestGrp=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?0:this.m_szItemDef[e][2]},e.ActContQuest=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szActContQuest);return 0>e?0:this.m_szActContQuest[e][1]},t}(),GResTab_RankAward=function(){function t(){this.m_szItemDef=null,this.m_szAllAward=[],this.m_szMainAllAward=[],this.m_szItemDef=DataTable.tab_rankaward.itemArr}__class(t,"game.gdcal.GResTab_RankAward");var e=t.prototype;return e.OnDataReady=function(){this.m_szAllAward=ArrOp.InitSz(8,null),this.m_szMainAllAward=ArrOp.InitSz(8,null);var t=0,e=0,i=Rankaward.Create();for(t=0;t<this.m_szItemDef.length;t++)if(i=this.m_szItemDef[t],!(i[1]>=8)){for(var n,s=[],a=0;a<i[3].length;a++)if(i[3][a]&&!(i[3][a].length<1)){for(n=[],n.push(i[3][a][0]),e=1;e<i[3][a].length&&!(e+1>=i[3][a].length)&&!(i[3][a][e]<1||i[3][a][e+1]<1);e+=2)n.push(i[3][a][e]),n.push(i[3][a][e+1]);n.length>0&&s.push(n)}this.m_szAllAward[i[1]]||(this.m_szAllAward[i[1]]=[]),i[4]?this.m_szMainAllAward[i[1]].push(s):this.m_szAllAward[i[1]].push([i[2],s])}},e.GetMainRankAward=function(t,e){var i=this.m_szMainAllAward[t];if(!i||i.length<1)return null;i=i[0];var n=ArrOp.SzHalfSearch(e,i);
if(0>n&&(n=-1-n),n>=i.length)return null;i=i[n],i.splice(0,1);var s=[],a=0;for(a=0;a<i.length&&!(a+1>=i.length)&&!(i[a]<1||i[a+1]<1);a+=2)s.push([i[a],i[a+1]]);return s},e.GetAllMainRankReward=function(t){var e=this.m_szMainAllAward[t];if(!e||e.length<1)return null;e=e[0];for(var i=[],n=[],s=0,a=0;a<e.length;a++){i=e[a],s=i[0],i.splice(0,1);for(var r=[],h=0;h<i.length&&!(h+1>=i.length)&&!(i[h]<1||i[h+1]<1);h+=2)r.push([i[h],i[h+1]]);n.push([s,r])}return n},e.GetRankAward=function(t,e,i){var n=this.m_szAllAward[t],s=ArrOp.SzHalfSearch(e,n);if(0>s&&(s=-1-s),s>=n.length)return null;if(n[s].length<2)return null;if(n=n[s][1],s=ArrOp.SzHalfSearch(i,n),0>s&&(s=-1-s),s>=n.length)return null;n=n[s],n=n.slice(1);var a=[],r=0;for(r=0;r<n.length&&!(r+1>=n.length)&&!(n[r]<1||n[r+1]<1);r+=2)a.push([n[r],n[r+1]]);return a},t}(),GResTab_SignReward=function(){function t(){this.m_szItemDef=null,this.m_szSign=null,this.m_szSuper=null,this.m_szSign=[],this.m_szSuper=[],this.m_szItemDef=DataTable.signreward.itemArr}__class(t,"game.gdcal.GResTab_SignReward");var e=t.prototype;return e.OnDataReady=function(){this.CheckSignRewardData()},e.CheckSignRewardData=function(){for(var t=0;t<this.m_szItemDef.length;t++)this.m_szItemDef[t][0]<20?this.m_szSign.push(this.m_szItemDef[t]):this.m_szSuper.push(this.m_szItemDef[t])},e.GetCurWeekReward=function(t){var e;switch(t){case 1:e=this.m_szSuper;break;default:e=this.m_szSign}var i=0,n=0,s=0,a=0,r=[];r=ArrOp.InitSz(e.length,[]);for(var h=0;h<e.length;h++)if(e[h][4]&&e[h][4].length&&(r[h]=e[h][4]),e[h][5]&&e[h][5].length){var o=e[h][5];i=o[0][0],n=SysID.IsDTJZID(i)?DataTable.m_iSelfUser.GetBuildHaveNum(i):DataTable.m_iSelfUser.GetItemNum(i);var l=[];l.push(o[0]);for(var u=1;u<o.length;u++)i=o[u][0],SysID.IsDTJZID(i)?(a=DataTable.m_iBuildTab.GetBuildNeedLv(i),s=DataTable.m_iSelfUser.GetBuildHaveNum(i)):(a=DataTable.m_iItemTab.GetItemNeedLv(i),s=DataTable.m_iSelfUser.GetItemNum(i)),a>DataTable.m_iSelfUser.m_nLevel||(s==n&&l.push(o[u]),n>s&&(n=s,l=[],l.push(o[u])));l.length>1&&(i=o[0][0],a=SysID.IsDTJZID(i)?DataTable.m_iBuildTab.GetBuildNeedLv(i):DataTable.m_iItemTab.GetItemNeedLv(i),a>DataTable.m_iSelfUser.m_nLevel&&(l=ArrOp.DelSz(0,l,1))),r[h]=[l[0]]}return r},e.GetVip=function(t){return t>=this.m_szSign.length?0:this.m_szSign[t][6]},e.GetCost=function(t){return t>=this.m_szSign.length?0:this.m_szSign[t][7]},e.GetNeedMoney=function(t){return t>=this.m_szSuper.length?0:this.m_szSuper[t][8]},e.GetSignNum=function(t){var e=0;switch(t){case 1:e=this.m_szSuper.length;break;default:e=this.m_szSign.length}return e},e.RewardIsRight=function(t,e){if(!t.length)return 0;var i;switch(e){case 1:i=this.m_szSuper;break;default:i=this.m_szSign}for(var n=0,s=0;s<t.length;s++){var a;i[s][4].length&&(a=i[s][4]),i[s][5].length&&(a=ArrOp.SzLink(a,i[s][5]));for(var r=t[s],h=0;h<r.length;h++){if(n=a.indexOf(r[h][0]),0>n)return 0;if(r[h][1]!=a[n][1])return 0}}return 1},t}(),GResTab_Sound=function(){function t(){this._isSoundValue=!0,this.music=null,this.BUTTON_SOUND="snd/sound/button.mp3",this.m_szItemDef=null,this.m_szSoundTab=null,this.m_bWebAudioOk=!0,this.m_szItemDef=DataTable.soundtab.itemArr,this.m_bWebAudioOk=Browser.webAudioOK}__class(t,"game.gdcal.GResTab_Sound");var e=t.prototype;return e.OnDataReady=function(){this.m_szSoundTab=[];for(var t,e=0,i=[],n=0;n<this.m_szItemDef.length;n++){if(e=ArrOp.SzHalfSearch(this.m_szItemDef[n][0],this.m_szSoundTab,0,i),e>=0)throw new Error("音效名字重复:"+this.m_szItemDef[n][0]);if(e=-1-e,t=GVar.sndDic[this.m_szItemDef[n][1]],t&&t.length<1)throw new Error("音效文件未找到："+this.m_szItemDef[n][0]);this.m_szSoundTab=ArrOp.InsertSz(e,this.m_szSoundTab,[this.m_szItemDef[n][0],t,this.m_szItemDef[n][2]])}},e.playButton=function(){SoundManager.playSound(this.BUTTON_SOUND)},e.OnPlay=function(t){if(this._isSoundValue&&this.m_bWebAudioOk){var e=ArrOp.SzHalfSearch(t,this.m_szSoundTab);0>e||(SoundManager.setSoundVolume(this.m_szSoundTab[e][2]/100),SoundManager.playSound(this.m_szSoundTab[e][1]))}},e.OnStop=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szSoundTab);0>e||SoundManager.stopSound(this.m_szSoundTab[e][1])},__getset(0,e,"isSoundValue",null,function(t){this._isSoundValue=t}),t}(),GResTab_StartOrder=function(){function t(){this.m_szStartOrder=null,this.m_szItemDef=null,this.m_szItemDef=DataTable.starttab.itemArr}__class(t,"game.gdcal.GResTab_StartOrder");var e=t.prototype;return e.OnDataReady=function(){this.m_szStartOrder=[];for(var t=0,e=[],i=0,n=this.m_szItemDef.length;n>i;i++){for(var s=[],a=0,r=this.m_szItemDef[i][1].length;r>a;a++){if(t=DataTable.m_iItemTab.GetIdByName(this.m_szItemDef[i][1][a][0],e),!t)throw new Error("GResTab_StartOrder name not find name="+this.m_szItemDef[i][1][a][0]);s.push([t,this.m_szItemDef[i][1][a][1]])}this.m_szStartOrder.push(s)}},e.GetStartOrder=function(){return this.m_szStartOrder},t}(),GResTab_SysBuild=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.sysbuildtab.itemArr}__class(t,"game.gdcal.GResTab_SysBuild");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetAvatarData=function(t,e){var i=ArrOp.SzHalfSearch(t,this.m_szItemDef);if(0>i)return null;var n=this.m_szItemDef[i][5];return i=ArrOp.SzHalfSearch(e,n),0>i?null:n[i]},t}(),GResTab_SysHead=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.SysHead.itemArr}__class(t,"game.gdcal.GResTab_SysHead");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetAll=function(){return this.m_szItemDef},t}(),GResTab_SysMessage=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.sysmessage.itemArr}__class(t,"game.gdcal.GResTab_SysMessage");var e=t.prototype;return e.OnDataReady=function(){},e.GetAnnm=function(){for(var t,e=0;e<this.m_szItemDef.length;e++)0==this.m_szItemDef[e][3]&&t.push(this.m_szItemDef[e]);return t},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetAll=function(){return this.m_szItemDef},t}(),GResTab_TerrainAvatar=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.terrainavatar.itemArr}__class(t,"game.gdcal.GResTab_TerrainAvatar");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){for(var e=0;e<this.m_szItemDef.length;e++)if(this.m_szItemDef[e][0]==t)return this.m_szItemDef[e];return null},t}(),GResTab_Tree=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.treetab.itemArr}__class(t,"game.gdcal.GResTab_Tree");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},t}(),GResTab_UserLevel=function(){function t(){this.m_szItemDef=null,this.m_szBuildable=null,this.m_szExp=null,this.m_szItemDef=DataTable.userlvl.itemArr,this.m_szExp=[],this.m_szBuildable=[],t._ins=this}__class(t,"game.gdcal.GResTab_UserLevel");var e=t.prototype;return e.OnDataReady=function(){var t,e,i=0,n=new Int64Ref,s=0,a=0,r=0,h=0,o=0,l=this.m_szItemDef.length;this.m_szBuildable=[];var u=this.m_szItemDef[a];for(l>80&&(l=80),this.m_szBuildable.length=l,a=0;l>a;a++)this.m_szBuildable[a]=[];var c=GResTab_Build._ins,_=[];for(a=0;l>a;a++)if(u=this.m_szItemDef[a],n.uint64+=u[1],this.m_szExp.push(n.uint64),t=u[9],null!=t){var m=t.length;for(r=0;m>r;r++)if(e=t[r],!(e.length<1)){var d=0;o=1;var p=this.m_szBuildable.length,f=e[d];for(h=a;p>h;h++)s=c.GetIdByName(f,_),s&&(i=ArrOp.SzHalfSearch(s,this.m_szBuildable[h],0,_),0>i?(i=-1-i,this.m_szBuildable[h]=ArrOp.InsertSz(i,this.m_szBuildable[h],[s,e[1],h==a?o:0])):this.m_szBuildable[h][i][1]+=e[1])}}},e.GetExpLevel=function(t,e){if(t.uint64<this.m_szExp[0])return e.uid=t.uint64,1;for(var i=1,n=this.m_szExp.length;n>i;i++)if(t.uint64<this.m_szExp[i])return e.uid=t.uint64-this.m_szExp[i-1],i+1;return this.m_szExp.length},e.GetLevelAllExp=function(t,e){return 2>t?(e.uint64=0,1):t-2>=this.m_szExp.length?0:(e.uint64=this.m_szExp[t-2],1)},e.CheckBuildFirstNew=function(t,e){if(t--,0>t||t>this.m_szBuildable.length)return 0;var i=ArrOp.SzSearch(e,this.m_szBuildable[t]);return 0>i?0:this.m_szBuildable[t][i][2]},e.GetLevelBuildNum=function(t,e){if(t--,0>t||t>this.m_szBuildable.length)return 0;var i=ArrOp.SzSearch(e,this.m_szBuildable[t]);return 0>i?0:this.m_szBuildable[t][i][1]},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},t._ins=null,t}(),GResTab_WharfVisu=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.WharfVisuTab.itemArr}__class(t,"game.gdcal.GResTab_WharfVisu");var e=t.prototype;return e.OnDataReady=function(){},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetAll=function(){return this.m_szItemDef},t}(),GResTab_WonderKind=function(){function t(){this.m_szItemDef=null,this.m_szItemDef=DataTable.wdkindtab.itemArr}__class(t,"game.gdcal.GResTab_WonderKind");var e=t.prototype;return e.OnDataReady=function(){for(var t,e,i=0,n=0,s=[],a=0;a<this.m_szItemDef.length;a++){t=this.m_szItemDef[a];var r=t[10];if(e=[],r.length<1)e=[[19,10],[20,10],[21,10]];else for(i=0;i<r.length;i++)n=DataTable.m_iItemTab.GetIdByName(r[i][0],s),0==n&&(n=21),r[i][1]<1&&(r[i][1]=1),e.push([n,Math.floor(r[i][1])]);this.m_szItemDef[a][10]=e}},e.GetNorDesignDiys=function(){for(var t,e=0;e<this.m_szItemDef.length;e++)null!=this.m_szItemDef[e][8]&&0!=this.m_szItemDef[e][11]&&t.push(this.m_szItemDef[e]);return t},e.Get=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szItemDef);return 0>e?null:this.m_szItemDef[e]},e.GetBuildKindMat=function(t,e,i){void 0===i&&(i=0);var n,s=ArrOp.SzHalfSearch(t,this.m_szItemDef);if(0>s)return null;n=this.m_szItemDef[s][10];var a=0;switch(e){case 0:for(a=0;a<n.length;a++)n[a][1]=-n[a][1];break;case 1:for(a=0;a<n.length;a++)i?n[a][1]=-1:(n[a][1]=-(n[a][1]-3),n[a][1]>=0&&(n[a][1]=-1));break;case 2:for(a=0;a<n.length;a++)n[a][1]=-Math.min(n[a][1],3)}return n},t}(),inbox=function(){function t(){}var e,i;return __class(t,"game.gdcal.inbox.inbox"),t.CAST_TPL_MESSAGE=function(t,i,n){return void 0===n&&(n=!0),e.ToShowString(t,i,n)},t.GET_AUDIO_MESSAGE=function(t,i){return e.OnCreatAudioMsg(t,i)},t.CAST_EMO_MESSAGE=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!1),i.ToShowString(t,e,n)},t.CAST_EMO_TEXT=function(t){return i.ToEmoString(t)},t.GET_EMO=function(t,e){return i.GetEmo(t,e)},t.InitEmo=function(){i.InitEmo()},t.TimeToString=function(t){var e,i="";e=DateOp.GetLocalTime();var n=0,s=0,a=0,r=DateOp.SubDateSec(e,t);return 86400>r?e.day!=t.day?i="昨天":(s=Math.round(r/3600),s>0?i=Math.round(s)+"小时前":(a=r/60,i=a>0?Math.round(a)+"分钟前":"刚刚")):(n=DateOp.SubDateDay(e,t),i=2==n?"前天":n>30?"很久以前":n+"天前"),i},t.__init$=function(){e=function(){function t(){}return __class(t,""),t.OnCreatAudioMsg=function(t,e){return e},t.GetTempMessage=function(t){if(DataTable.m_iSysMessage){var e=DataTable.m_iSysMessage.Get(t);return e?e[2]:""}return""},t.ToShowString=function(e,i,n){void 0===n&&(n=!0);var s,a=0,r=0;if(i.length=0,a=e.indexOf("#<:json="),a>=0&&(r=e.indexOf(">",a),0>r&&(r=e.length),s=e.substr(a+8,r-a-8),t.JsonToStrVal(s,i)),0==i.length)return e;var h=Laya.__parseInt(t.GetValue("template",i));if(0==h)return e;console.log("template:"+h.toString());var o=t.GetTempMessage(h);(!o||o.length<1)&&console.log("Error:temp msg undefined.id="+s);var l=t.GetValue("_t",i);if(l&&l.length>0)for(var u=0;u<l.length;u++){var c=l[u];if(c&&c.length>0)switch(c[0]){case"player":case"nick":o.indexOf("{nick}")>-1;break;case"viplv":o=o.replace("{viplv}",c[1])}}return o},t.JsonToStrVal=function(e,i){var n=e.substr(0,1),s=e.substr(e.length-1,1);if("{"==n&&"}"==s){var a=e.indexOf("{"),r=e.lastIndexOf("}"),h=e.substr(a+1,r-a-1),o=t.DiySplice(h,",");o&&0==o.length&&o.push(h);for(var l=0;l<o.length;l++){var u=o[l],c=t.DiySplice(u,":");if(c.length>0){var _=c[0],m=_.indexOf("'"),d=_.lastIndexOf("'");c[0]=_.substr(m+1,d-m-1)}if(c.length>1){var p=c[1],f=[];1==t.JsonToStrVal(p,f)?(c.push(1),c[1]=f):c.push(0),i.push(c)}}return!0}return!1},t.DiySplice=function(t,e){for(var i=[],n=!1,s=0;s<t.length;s++){var a=t.substr(s,1);if("{"==a&&(n=!0),!n)switch(a){case"}":n=!1;break;case e:i.push(s)}}for(var r=[],h=-1,o=0,l=0;l<i.length;l++)o=i[l],h+=1,r.push(t.substr(h,o-h)),h=o;return i.length>0&&(h+=1,r.push(t.substr(h,t.length-h))),r},t.GetValue=function(t,e){for(var i,n=t,s=0;s<e.length;s++)if(i=e[s],n==i[0])return i[1];return null},t}(),i=function(){function t(){}return __class(t,""),t.InitEmo=function(){var e=0;if(t.s_vEmo.length<1){t.s_vEmo.length=0;var i,n=DataTable.m_iEmoFace.GetAll();for(e=0;e<n.length;e++)n[e][1]=n[e][1].toUpperCase(),n[e][1]=n[e][1].replace("YOU","U"),n[e][1]=n[e][1].replace("SF","SV"),n[e][1]=n[e][1].replace("B","U"),n[e][1]=n[e][1].replace("G","V"),n[e][1]=n[e][1].replace("M","Z"),i=n[e][3]}},t.GetEmo=function(t,e){return!0},t.ToShowString=function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!1),t},t.ToEmoString=function(t){return t},t.s_vEmo=[],t}()},t}(),IOS_iap=function(){function t(){}return __class(t,"game.gdcal.IOS_iap"),t.GetChgProductId=function(e,i){var n,s=["","kupai","lenovo","chongchong","yingyonghu"],a=ArrOp.SzFind(e,s);if(0>a)return i;var r=0;for(r=0;r<t.s_szSrcProduct.length;r++)if(n=t.s_szSrcProduct[r],String(n[a])==i){i=n[0];break}return i},t.GetChlProductId=function(e,i){var n,s=["","kupai","lenovo","chongchong","yingyonghui"],a=ArrOp.SzFind(e,s);if(0>a)return i;var r=0;for(r=0;r<t.s_szSrcProduct.length;r++)if(n=t.s_szSrcProduct[r],String(n[0])==i){i=n[a];break}return i},t.GetProductItem=function(e){for(var i,n=0;n<t.s_szProduct.length;n++)if(i=t.s_szProduct[n],i[0]==e)return i;return null},t.GetProductNum=function(){return t.s_szProduct.length},t.GetProduct=function(e){if(0>e||e>=t.s_szProduct.length)return null;var i;return i=t.s_szProduct[e]},t.GetFirRecSz=function(){var t;return t=[[3,"t1005"],[12,"t1005"],[16,"t1002"],[17,"t1002"],[18,"t1002"],[19,"t1002"],[20,"t1003"],[22,"t1003"],[24,"t1004"],[25,"t1004"],[26,"t1003"],[27,"t1004"],[28,"t1003"],[29,"t1004"],[30,"t1004"]]},__static(t,["s_szProduct",function(){return this.s_szProduct=[["s3002","s3002",3,499,30,"30天VIP卡","V30",[8,30],"tex_IAP_日福利卡",0,[]],["s3003","s3003",3,499,30,"农场大亨","V30",[23,30],"tex_农场月卡",1,[]],["s3004","s3004",3,499,30,"养殖专业户","V30",[24,30],"uiimg_养殖月卡",1,[]],["s3005","s3005",3,499,30,"科技达人","V30",[8,30],"uiimg_科技月卡",1,[]],["s3006","s3006",3,199,12,"农场大亨","V30",[23,30],"tex_农场月卡",0,[]],["s3007","s3007",3,199,12,"养殖专业户","V30",[24,30],"uiimg_养殖月卡",0,[]],["s3008","s3008",3,199,12,"科技达人","V30",[8,30],"uiimg_科技月卡",0,[]],["s3009","s3009",5,299,18,"仓库升级特惠包","",[[13,10],[14,10],[15,10]],"uiimg_仓库升级礼包",0,[]],["s3010","s3010",5,299,18,"粮仓升级特惠包","",[[10,10],[11,10],[12,10]],"uiimg_粮仓升级礼包",0,[]],["s3011","s3011",5,299,18,"工具特惠包","",[[16,10],[17,10],[18,10]],"uiimg_工具升级礼包",0,[]],["s3012","s3012",7,399,28,"月卡","V30",[[29,30],[2,280]],"uiimg_超值月卡",0,[]],["s3013","s3013",7,1199,78,"季卡","V90",[[30,90],[2,780]],"uiimg_特惠季卡",0,[]],["s3014","s3014",7,999,68,"特价季卡","V90",[[30,90],[2,780]],"uiimg_特惠季卡",0,[]],["d1008","d1008",0,99,6,"一把钻石","Z60",[2,60],"tex_IAP_几颗钻石",1,[]],["d1001","d1001",0,199,12,"小堆钻石","Z135",[2,135],"tex_IAP_小堆钻石",1,[[2,135]]],["d1002","d1002",0,499,30,"小袋钻石","Z345",[2,345],"tex_IAP_小袋钻石",1,[]],["d1003","d1003",0,999,68,"大袋钻石","Z720",[2,720],"tex_IAP_大袋钻石",1,[[2,720]]],["d1004","d1004",0,1899,123,"小盒钻石","Z1480",[2,1480],"tex_IAP_小盒钻石",1,[]],["d1005","d1005",0,3799,248,"小箱钻石","Z3000",[2,3e3],"tex_IAP_小箱钻石",1,[[2,2480]]],["d1006","d1006",0,9999,648,"大箱钻石","Z7888",[2,7888],"tex_IAP_大箱钻石",1,[[2,6480]]],["m2007","m2007",1,4999,328,"大箱金币","$5100",5100,"tex_IAP_大箱金币",1,[]],["m2005","m2005",1,2999,198,"小箱金币","$3000",3e3,"tex_IAP_小箱金币",1,[]],["m2004","m2004",1,1499,98,"小盒金币","$1350",1350,"tex_IAP_小盒金币",1,[]],["m2003","m2003",1,799,50,"大袋金币","$675",675,"tex_IAP_大袋金币",1,[]],["m2002","m2002",1,299,18,"小袋金币","$245",245,"tex_IAP_小袋金币",1,[]],["m2001","m2001",1,99,6,"小堆金币","$80",80,"tex_IAP_小堆金币",1,[]],["j1005","j1005",2,1499,98,"大亨理财","V30",[8,30],"tex_礼包648",1,[]],["j1004","j1004",2,299,18,"初级理财","V10",[8,10],"tex_礼包648",1,[]],["j1003","j1003",2,3799,248,"大箱闪电","^ 5000",[25,5e3],"tex_IAP_大箱闪电",1,[]],["j1002","j1002",2,999,68,"大袋闪电","^ 1000",[25,1e3],"tex_IAP_中袋闪电",1,[]],["j1001","j1001",2,199,12,"小袋闪电","^ 150",[25,150],"tex_IAP_小袋闪电",1,[]],["y1005","y1005",5,9999,648,"大箱月礼包","Z10000",[[2,12e3],[1,5e4],[25,650]],"tex_礼包648",1,[]],["y1004","y1004",5,3799,248,"大袋月礼包","Z3280",[[2,4e3],[1,3e4],[25,240]],"tex_328元礼包",1,[]],["y1003","y1003",5,1899,123,"中袋月礼包","Z1480",[[2,1800],[1,2e4],[25,120]],"tex_128元礼包",1,[]],["y1002","y1002",5,999,68,"小袋月礼包","Z720",[[2,850],[1,1e4],[25,60]],"tex_68元礼包",1,[]],["y1001","y1001",5,499,30,"一堆月礼包","Z345",[[2,400],[1,5e3],[25,30]],"tex_30元礼包",1,[]],["s3001","s3001",4,299,18,"小袋礼包","Z300",[[2,300],[1,5e3]],"tex_IAP_小袋礼包",0,[]],["t1001","t1001",4,99,6,"小袋礼包","$5000",[[1,5e3],[]],"tex_IAP_小袋礼包",0,[]],["t1002","t1002",4,199,12,"小袋金币包","$12888",[[1,12888],[25,50]],"tex_IAP_小袋礼包",0,[]],["t1003","t1003",4,99,6,"10天科技达人","V10",[[29,10],[25,30]],"tex_IAP_小袋礼包",0,[]],["t1004","t1004",4,299,18,"小盒百宝箱","$28888Z150",[[1,28888],[2,150],[25,50]],"tex_IAP_小袋礼包",0,[]],["t1005","t1005",4,99,6,"小堆金币包","$5888",[[1,5888],[25,30],[16,10],[17,10],[18,10]],"tex_IAP_小袋礼包",0,[]],["t1006","t1006",4,99,6,"10天科技达人","V10",[[29,10],[25,30]],"tex_IAP_小袋礼包",0,[]],["t10011","t10011",4,99,6,"特惠包1","V6",[[8,6],[]],"uiimg_科技月卡",0,[]],["t10012","t10012",4,288,18,"特惠包2","V18",[[8,18],[]],"uiimg_科技月卡",0,[]],["t10013","t10013",4,399,28,"特惠包3","V28",[[8,28],[]],"uiimg_科技月卡",0,[]],["t10014","t10014",4,999,68,"特惠包4","V68",[[8,68],[]],"uiimg_科技月卡",0,[]],["t10015","t10015",4,1499,98,"特惠包5","V98",[[8,98],[]],"uiimg_科技月卡",0,[]],["t10016","t10016",4,99,128,"特惠包6","V128",[[8,128],[]],"uiimg_科技月卡",0,[]]]},"s_szSrcProduct",function(){return this.s_szSrcProduct=[["s3003","6","11278","101263","13",499,30,"农场大亨"],["s3004","7","11279","101264","14",499,30,"养殖专业户"],["s3005","4","11280","101265","15",499,30,"科技达人"],["s3006","5","11281","101266","16",199,12,"农场大亨"],["s3007","2","11282","101267","17",199,12,"养殖专业户"],["s3008","3","11283","101268","18",199,12,"科技达人"],["s3009","1","11284","101269","19",299,18,"仓库升级特惠包"],["s3010","11","11285","101270","20",299,18,"粮仓升级特惠包"],["s3011","10","11286","101271","21",299,18,"工具特惠包"],["s3012","27","24966","103188","27",399,28,"月卡","V30"],["s3013","28","24967","103189","28",1199,78,"季卡","V90"],["s3014","29","24968","103190","29",999,68,"特价季卡","V90"],["d1008","16","12137","103121","26",99,6,"几颗钻石"],["d1001","20","11266","101251","1",199,12,"小堆钻石"],["d1002","18","11267","101252","2",499,30,"小袋钻石"],["d1003","17","11268","101253","3",999,68,"大袋钻石"],["d1004","24","11269","101254","4",1899,123,"小盒钻石"],["d1005","23","11270","101255","5",3799,248,"小箱钻石"],["d1006","22","11271","101256","6",9999,648,"大箱钻石"],["y1005","9","11277","101262","12",9999,648,"大箱月礼包"],["y1004","8","11276","101261","11",3799,248,"大袋月礼包"],["y1003","19","11275","101260","10",1899,123,"中袋月礼包"],["y1002","25","11274","101259","9",999,68,"小袋月礼包"],["y1001","26","11273","101258","8",499,30,"一堆月礼包"],["t1002","12","11287","101272","22",199,12,"小袋金币包"],["t1003","13","11288","101273","23",99,6,"10天科技达人"],["t1004","14","11289","101274","24",299,18,"小盒百宝箱"],["t1005","15","11290","101275","25",99,6,"小堆金币包"],["j1005","31","30073","103483","31",1499,98,"大亨理财"],["j1004","30","30072","103482","30",299,18,"初级理财"]]}]),t}(),OPEnum=function(){function t(){}return __class(t,"game.gdcal.OPEnum"),t.OP_CS_JQ=0,t.OP_CSJJY=1,t.OP_CSJWP=2,t.OP_SD_GM=3,t.OP_SJ_ZS=4,t.OP_GS_SH=5,t.OP_GS_JS=6,t.OP_SM_KF=7,t.OP_GS_BZ=8,t.OP_GS_QZ=9,t.OP_GS_GX=10,t.OP_ZW_SH=11,t.OP_ZW_ZHZ=12,t.OP_ZW_JS=13,t.OP_ZW_JS_QT=14,t.OP_XY_JS=15,t.OP_ZJ_JQ_dL=16,t.OP_CP_SH=17,t.OP_CP_TJ=18,t.OP_CP_JS=19,t.OP_JQ_SJ=20,t.OP_ZK=21,t.OP_JX_GM=22,t.OP_JX_WY=23,t.OP_JX_JS=24,t.OP_JX_JS_QT=25,t.OP_JX_SH=26,t.OP_CW_WY=27,t.OP_CW_XB=28,t.OP_XB_JS=29,t.OP_CW_XX_JS=30,t.OP_QX_XB_CD=31,t.OP_CWM_KG=32,t.OP_PJ_SH=33,t.OP_PJ_SH_TR=34,t.OP_ZSW_SJ_BZ=35,t.OP_ZS_PJ_JB=36,t.OP_YW_HD=37,t.OP_CK_SJ=38,t.OP_ZS_FZ=39,t.OP_ZS_SQ=40,t.OP_DK_ZS_BX=41,t.OP_DK_MF_BX=42,t.OP_MR_CJ=43,t.OP_WWJ=44,t.OP_ZZ_YBX=45,t.OP_LBT_MC=46,t.OP_LBT_GM=47,t.OP_LBT_GM_NPC=48,t.OP_LBT_SQ=49,t.OP_LBT_SNPCQ=50,t.OP_LBT_ZJ_DL=51,t.OP_LBT_XC_CD=52,t.OP_LBT_GG=53,t.OP_LBT_KW=54,t.OP_DD_TJ=55,t.OP_DD_SH=56,t.OP_NPC_DD_TJ=57,t.OP_DD_SC_CD=58,t.OP_HYX_WC=59,t.OP_HYX_WC_TR=60,t.OP_HY_KC=61,t.OP_HY_LJ_DD=62,t.OP_HY_BX=63,t.OP_MT_GM=64,t.OP_GM_TZ_CS=65,t.OP_QJ_BC=66,t.OP_JZ_WG=67,t.OP_JZ_XL=68,t.OP_JZ_JS=69,t.OP_JZ_YD=70,t.OP_JZ_SC=71,t.OP_ZS_SJ_JS=72,t.OP_CSQ_JQ=73,t.OP_CE_JJQ_SJ=74,t.OP_GY_Tom=75,t.OP_HG_GM=76,t.OP_JZ_QJ=77,t.OP_GM_DIY_GZ=78,t.OP_GM_SJ=79,t.OP_JZ_CL=80,t.OP_BZ_JZ_CL=81,t.OP_DIY_BZ_JS=82,t.OP_SQ_TZ_JB=83,t.OP_DIY_GG_JS=84,t.OP_CJ_JL=85,t.OP_XT_JL=86,t.OP_N_GM=87,t.OP_HDM_JL=88,t.OP_WG_ZS=89,t.OP_YQM_JL=90,t.OP_NC_JL=91,t.OP_PG_PL_JL=92,t.OP_FF_XZ_JL=93,t.OP_PL_TS=94,t.OP_FLK_ZS=95,t.OP_NGXM_SCJL=96,t.OP_LY_HD=97,t.OP_XY=98,t.OP_ZM_HD=99,t.OP_VIP_ZM_HD=100,t.OP_FX_JL=101,t.OP_BC=102,t.OP_TS_CZ_LB=103,t.OP_JFQ_DH=104,t.OP_JF_DH_WP=105,t.OP_DH_WP_HD=106,t.OP_Y_CZJL=107,t.OP_SJ_LT_XH=108,t.OP_ZSJ_CH=109,t.OP_RW_JL=110,t.OP_QD_JL=111,t.OP_SJJY_QG=112,t.OP_SJJY_QH=113,t.OP_SJJY_MC=114,t.OP_SJJY_HC=115,t.OP_SJJY_LQQG=116,t.OP_SJJY_LQJH=117,t.OP_SJJY_GQQG=118,t.OP_SJJY_GQJH=119,t.OP_DIY_GMJDSJ=120,t.OP_RCRW_JL=121,t.OP_VIP_JL=122,t.OP_JSXZ_GM=123,t.OP_GM_PFWP=124,t.OP_HD_RWJL=125,t.OP_ZX_LB=126,t.OP_SJLT_XLQ=127,t.OP_DSCJ=128,t.OP_SC_LB=129,t.OP_PHB_JL=130,t.OP_FF_GNC=131,t.OP_SDI_GM=132,t.OP_YS_GM=133,t.OP_LB_GM=134,t.OP_GQHD_FH=135,t.OP_GM_PFB=136,t.OP_HD_LB=137,t.OP_DZ=138,t.OP_TK_TC=139,t.OP_SC_HDWP=140,t.OP_YLK_YHBC=141,t.OP_HHQD_JL=142,t.OP_QT_RWJL=143,t.OP_END=144,t}(),BuyBackData=function(){function t(){}return __class(t,"game.gddef.BuyBackData"),t.Create=function(){return t._default.concat()},t.begintime=0,t.hiretime=1,t.lastoptime=2,t.outnum=3,t.itemid=4,t.discount=5,__static(t,["_default",function(){return this._default=[0,0,0,0,0,0]}]),t}(),cutMapInfo=function(){function t(){}return __class(t,"game.gddef.cutMapInfo"),t.isstruct=function(t){return t&&7==t.length?!0:!1},t.ver=0,t.shopordernum=1,t.getnum=2,t.left=3,t.use_=4,t.mapblockdata=5,t.isnosysani=6,t.slen=7,t}(),FrdUserInfo=function(){function t(){}return __class(t,"game.gddef.frd.FrdUserInfo"),t.isstruct=function(t){return t&&4==t.length?!0:!1},t.uid=0,t.nick=1,t.visu=2,t.visuver=3,t.slen=4,t}(),FriendGameInfo=function(){function t(){}return __class(t,"game.gddef.frd.FriendGameInfo"),t.isstruct=function(t){return t&&5==t.length?!0:!1},t.level=0,t.vip=1,t.bestpet=2,t.evaluelvl=3,t.label=4,t.slen=5,t}(),FriendGameInfo_old=function(){function t(){}return __class(t,"game.gddef.frd.FriendGameInfo_old"),t.isstruct=function(t){return t&&4==t.length?!0:!1},t.level=0,t.vip=1,t.bestpet=2,t.evaluelvl=3,t.slen=4,t}(),FriendInfo=function(){function t(){}return __class(t,"game.gddef.frd.FriendInfo"),t.isstruct=function(t){return t&&7==t.length?!0:!1},t.Create=function(){return t._default.concat()},t.uid=0,t.groupno=1,t.nick=2,t.visu=3,t.visuver=4,t.gameinfo=5,t.helpstatus=6,t.slen=7,__static(t,["_default",function(){return this._default=[0,0,"",0,0,null,0]}]),t}(),FriendMessageData=function(){function t(){}__class(t,"game.gddef.frd.FriendMessageData");var e=t.prototype;return e.parse=function(t){},t.isstruct=function(t){return t&&8==t.length?!0:!1},t.sender=0,t.target=1,t.content=2,t.timestamp=3,t.flag=4,t.m_package=5,t.cert=6,t.ext=7,t.slen=8,t}(),FriendUserData=function(){function t(){}return __class(t,"game.gddef.frd.FriendUserData"),t.isstruct=function(t){return t&&10==t.length?!0:!1},t.uid=0,t.nick=1,t.visu=2,t.visuver=3,t.gameinfo=4,t.helpstatus=5,t.groups=6,t.friends=7,t.messages=8,t.nameddata=9,t.slen=10,t}(),FriPointData=function(){function t(){}return __class(t,"game.gddef.frd.FriPointData"),t.isstruct=function(t){return t&&4==t.length?!0:!1},t.curpoint=0,t.lasttime=1,t.sznick=2,t.quepoint=3,t.slen=4,t}(),TInBox=function(){function t(){}return __class(t,"game.gddef.frd.TInBox"),t.isstruct=function(t){return t&&4==t.length?!0:!1},t.msgver=0,t.msg=1,t.annmver=2,t.annm=3,t.slen=4,t}(),LastWeekAllTopLog=function(){function t(){}return __class(t,"game.gddef.LastWeekAllTopLog"),t.Create=function(){return t._default.concat()},t.isstruct=function(e){if(!e)return!1;if(e.length!=t._default.length)return!1;for(var i=0;i<e.length;i++)if("number"!=typeof e[i]||Math.floor(e[i])!=e[i])return!1;return!0},t.uid=0,t.rankno=1,t.state=2,__static(t,["_default",function(){return this._default=[0,0,0]}]),t}(),MarketData=function(){function t(){}return __class(t,"game.gddef.MarketData"),t.isstruct=function(t){return t&&8==t.length?!0:!1},t.uid=0,t.rectime=1,t.adtime=2,t.itemdata=3,t.diamondadd=4,t.maxfriend=5,t.sellplayer=6,t.sellnpc=7,t.slen=8,t}(),MarketItemData=function(){function t(){}return __class(t,"game.gddef.MarketItemData"),t.isstruct=function(t){return t&&9==t.length?!0:!1},t.noid=0,t.itemid=1,t.itemnum=2,t.perprice=3,t.adtime=4,t.sellstate=5,t.puttime=6,t.enduid=7,t.endcd=8,t.slen=9,t}(),NpcOrder=function(){function t(){}return __class(t,"game.gddef.NpcOrder"),t.time=0,t.npcid=1,t.itemid=2,t.num=3,t.money=4,t}(),OldQuestData=function(){function t(){}return __class(t,"game.gddef.OldQuestData"),t.isstruct=function(t){return t&&4==t.length?!0:!1},t.id=0,t.have=1,t.status=2,t.award=3,t.slen=4,t}(),OrderData=function(){function t(){}return __class(t,"game.gddef.OrderData"),t.noid=0,t.name=1,t.itemsz=2,t.numsz=3,t.price=4,t.exp=5,t}(),OrEvaGold=function(){function t(){}return __class(t,"game.gddef.OrEvaGold"),t.Create=function(){return t._default.concat()},t.isstruct=function(e){if(!e)return!1;if(e.length!=t._default.length)return!1;for(var i=0;i<e.length;i++)if("number"!=typeof e[i]||Math.floor(e[i])!=e[i])return!1;return!0},t.begintime=0,t.makecd=1,__static(t,["_default",function(){return this._default=[0,0]}]),t}(),PraiseData=function(){function t(){}return __class(t,"game.gddef.PraiseData"),t.isstruct=function(t){return t&&8==t.length?!0:!1},t.lasetaddfreetime=0,t.lasetpraiedTime=1,t.lasetsendTime=2,t.weekpraisedcount=3,t.weeksendcount=4,t.szrecent=5,t.szpraiserecnt=6,t.subpraise=7,t.slen=8,t}(),PraiseSubData=function(){function t(){}return __class(t,"game.gddef.PraiseSubData"),t.isstruct=function(t){return t&&4==t.length?!0:!1},t.kind=0,t.num=1,t.sendnum=2,t.receivenum=3,t.slen=4,t}(),QuestData=function(){function t(){}return __class(t,"game.gddef.QuestData"),t.isstruct=function(t){return t&&8==t.length?!0:!1},t.Create=function(){return t._default.concat()},t.id=0,t.have=1,t.status=2,t.award=3,t.count=4,t.total=5,t.ver=6,t.lastdate=7,t.slen=8,__static(t,["_default",function(){return this._default=[0,0,0,null,0,0,"",""]}]),t}(),QuestGrpData=function(){function t(){}return __class(t,"game.gddef.QuestGrpData"),t.isstruct=function(t){return t&&6==t.length?!0:!1},t.id=0,t.kind=1,t.szquest=2,t.grp=3,t.lastdate=4,t.ver=5,t.slen=6,t}(),TVData=function(){function t(){}return __class(t,"game.gddef.TVData"),t.noid=0,t.uid=1,t.nick=2,t.visu=3,t.adtime=4,t.itemid=5,t.itemnum=6,t.perprice=7,t.helpstatus=8,t.headbox=9,t}(),UserSvrData=function(){function t(){}return __class(t,"game.gddef.UserSvrData"),t.uid=0,t.power=1,t.nick=2,t.src=3,t.visu=4,t.level=5,t.exp=6,t.evalue=7,t.vip=8,t.mapdata=9,t.sysdata=10,t.helpstatus=11,t.BagData=12,t.BagData=13,t.BagData=14,t.createdate=15,t.onlinedate=16,t.offlinedate=17,t.onlinesec=18,t.devmode=19,t.money=20,t.diamond=21,t.shell=22,t.medal=23,t.tradept=24,t.tradeexp=25,t.friendpt=26,t.randgroup=27,t.fasttime=28,t.frienddata=29,t.achievement=30,t.BagData=31,t.BagData=32,t.nameddata=33,t.nszver=34,t.clnopver=35,t.sziapid=36,t.svrnameddata=37,t.userdiy=38,t.nverdata=39,t}(),UserTradeData=function(){function t(){}return __class(t,"game.gddef.UserTradeData"),t.isstruct=function(t){return t&&11==t.length?!0:!1},t.id=0,t.uid=1,t.visu=2,t.selluid=3,t.kind=4,t.state=5,t.sellitem=6,t.buyitem=7,t.overtime=8,t.creatime=9,t.buytime=10,t.slen=11,t}(),UserVisitData=function(){function t(){}return __class(t,"game.gddef.UserVisitData"),t.isstruct=function(t){return t&&6==t.length?!0:!1},t.time_last=0,t.visitor_last=1,t.count_last=2,t.visitor_recent=3,t.count_best=4,t.time_best=5,t.slen=6,t}(),VipData=function(){function t(){}return __class(t,"game.gddef.VipData"),t.isstruct=function(t){return t&&3==t.length?!0:!1},t.endtime=0,t.gettime=1,t.pushtime=2,t.slen=3,t}(),WharfData=function(){function t(){}return __class(t,"game.gddef.WharfData"),t.Create=function(){return t._default.concat()},t.level=0,t.boatkind=1,t.continuation=2,t.fastboat=3,t.boatsec=4,t.tradept=5,t.tradeexp=6,t.tradeshell=7,t.havehelp=8,t.kindneedsz=9,t.ordersz=10,__static(t,["_default",function(){return this._default=[0,0,0,0,0,0,0,0,0,null,null]}]),t}(),WharfOrder=function(){function t(){}return __class(t,"game.gddef.WharfOrder"),t.status=0,t.helpinfo=1,t.needitemid=2,t.neednum=3,t.exp=4,t.money=5,t.ftrade=6,t}(),Achdef=function(){function t(){}return __class(t,"game.gtab.Achdef"),t.id=0,t.name=1,t.mem=2,t.kind=3,t.valname=4,t.levels=5,t}(),Achleveldef=function(){function t(){}return __class(t,"game.gtab.Achleveldef"),t.needval=0,t.exp=1,t.diamon=2,t.point=3,t}(),Activity=function(){function t(){}return __class(t,"game.gtab.Activity"),t.id=0,t.no=1,t.group=2,t.tab=3,t.icon=4,t.kind=5,t.state=6,t.way=7,t.wait=8,t.begin=9,t.end=10,t.name=11,t.title=12,t.mem=13,t.szquest=14,t.sziapitem=15,t.src=16,t.lev=17,t.show=18,t}(),Actnpcorder=function(){function t(){}return __class(t,"game.gtab.Actnpcorder"),t.id=0,t.need=1,t.award=2,t.lev=3,t}(),Animal=function(){function t(){}return __class(t,"game.gtab.Animal"),t.buildid=0,t.animalname=1,t.geticon=2,t.maxnum=3,t.resitemname=4,t.buildtime=5,t.mapimg=6,t.makediamon=7,t.getexp=8,t.shopprice=9,t.pricenum=10,t.priceadd=11,t.feeditemname=12,t.loopsnddelay=13,t.loopsnd=14,t}(),BagID=function(){function t(){}return __class(t,"game.gtab.BagID"),t.BAG_LIANGCANG=0,t.BAG_WUPIN=1,t.BAG_ZHAUNGSHI=2,t.BAG_JIQI=3,t.BAG_QIJI=4,t}(),Boatex=function(){function t(){}return __class(t,"game.gtab.Boatex"),t.lv=0,t.lvname=1,t.mapicon=2,t.x=3,t.y=4,t.difficulty=5,t.szitem=6,t}(),Box1=function(){function t(){}return __class(t,"game.gtab.Box",null,"Box1"),t.id=0,t.itemname=1,t.rp=2,t.needlv=3,t.kind=4,t.num=5,t}(),Buffgroup=function(){function t(){}return __class(t,"game.gtab.Buffgroup"),t.id=0,t.name=1,t.mem=2,t.pathinfo=3,t.icon=4,t.szbuff=5,t.delay=6,t.overlaymode=7,t.refreshmode=8,t.usetime=9,t.cooltime=10,t.skillkind=11,t.skillvalue=12,t.skilldelay=13,t}(),BuffGroupDataSt=function(){function t(){}return __class(t,"game.gtab.BuffGroupDataSt"),t.isstruct=function(t){return t&&6==t.length?!0:!1},t.id=0,t.begintime=1,t.delay=2,t.refreshtime=3,t.lastusetime=4,t.lefttime=5,t}(),Build=function(){function t(){}return __class(t,"game.gtab.Build"),t.isstruct=function(t){return t&&23==t.length?!0:!1},t.buildid=0,t.kind=1,t.sysbuildname=2,t.buildname=3,t.mapimg=4,t.putx=5,t.puty=6,t.layer=7,t.evalue=8,t.delmode=9,t.movekind=10,t.needlvl=11,t.mem=12,t.buildtime=13,t.shopprice=14,t.pricekind=15,t.pricenum=16,t.priceadd=17,t.macquenum=18,t.selectsnd=19,t.lvupt=20,t.orstyle=21,t.stampid=22,t.slen=23,t}(),Builddata=function(){function t(){}return __class(t,"game.gtab.Builddata"),t.buildid=0,t.num=1,t}(),Buyback=function(){function t(){}return __class(t,"game.gtab.Buyback"),t.name=0,t.mapimg=1,t.dailytime=2,t.resttime=3,t.hiredata=4,t.hireitem=5,t.discountrate=6,t.discount=7,t}(),Dailyrnd=function(){function t(){}return __class(t,"game.gtab.Dailyrnd"),t.id=0,t.itemname=1,t.num=2,t.rp=3,t.lv=4,t}(),Emoface=function(){function t(){}return __class(t,"game.gtab.Emoface"),t.id=0,t.key=1,t.src=2,t.srcext=3,t.w=4,t.h=5,t.desc=6,t.group=7,t.kind=8,t}(),EvaluateData=function(){function t(){}return __class(t,"game.gtab.EvaluateData"),t.Create=function(){return t._default.concat()},t.total=0,t.itemsz=1,t.getdelaysec=2,t.getothersec=3,t.smoney=4,
t.fmoney=5,t.otherleft=6,t.szbuild=7,t.lvupdata=8,__static(t,["_default",function(){return this._default=[0,null,0,0,0,0,null,null,null]}]),t}(),Feild=function(){function t(){}return __class(t,"game.gtab.Feild"),t.itemid=0,t.name=1,t.buildtime=2,t.mapimg=3,t.makediamon=4,t.getexp=5,t}(),Formul=function(){function t(){}return __class(t,"game.gtab.Formul"),t.formulid=0,t.mem=1,t.buildid=2,t.needlvl=3,t.needtime=4,t.data=5,t.resitemid=6,t.resnum=7,t.getexp=8,t.defshow=9,t}(),Gamedef=function(){function t(){}return __class(t,"game.gtab.Gamedef"),t.Create=function(){return t._default.concat()},t.loadimg=0,t.usermap=1,t.initmoney=2,t.initdiamond=3,t.initmapdata=4,t.initbagdata=5,t.initlight=6,__static(t,["_default",function(){return this._default=["","",0,0,null,null,0]}]),t}(),Goldcoins=function(){function t(){}return __class(t,"game.gtab.Goldcoins"),t.id=0,t.diamond=1,t.agv=2,t.Crit=3,t}(),Hiredata=function(){function t(){}return __class(t,"game.gtab.Hiredata"),t.time=0,t.diamond=1,t}(),IapProduct=function(){function t(){}return __class(t,"game.gtab.IapProduct"),t.isstruct=function(t){return t&&11==t.length?!0:!1},t.productid=0,t.iosproduct=1,t.iapkind=2,t.usprice=3,t.rmb=4,t.showname=5,t.mem=6,t.chgsz=7,t.linkimg=8,t.shopshow=9,t.first=10,t.slen=11,t}(),Item=function(){function t(){}return __class(t,"game.gtab.Item"),t.itemid=0,t.sysitemname=1,t.itemname=2,t.icon=3,t.kind=4,t.needlvl=5,t.baseprice=6,t.orderprice=7,t.diamondprice=8,t.evaluate=9,t.mem=10,t}(),Itemdata=function(){function t(){}return __class(t,"game.gtab.Itemdata"),t.itemid=0,t.num=1,t}(),Lead=function(){function t(){}return __class(t,"game.gtab.Lead"),t.noid=0,t.name=1,t.beginsig=2,t.endsig=3,t.addnpc=4,t.mode=5,t.talk=6,t.mapimg=7,t.movecamera=8,t.waittime=9,t.opwaittime=10,t.btnname=11,t.homeid=12,t.kind=13,t.endlv=14,t.logname=15,t.subno=16,t}(),Maskcloud=function(){function t(){}return __class(t,"game.gtab.Maskcloud"),t.id=0,t.x=1,t.y=2,t.putx=3,t.puty=4,t.mapimg=5,t.needeva=6,t.needmedal=7,t.rewardid=8,t.rewardnum=9,t}(),Npc=function(){function t(){}return __class(t,"game.gtab.Npc"),t.npcid=0,t.sysitemname=1,t.npcname=2,t.talk=3,t.mapimg=4,t.selectsnd=5,t.model=6,t}(),Onlinegift=function(){function t(){}return __class(t,"game.gtab.Onlinegift"),t.id=0,t.sec=1,t.szreward=2,t.szrand=3,t}(),Patface=function(){function t(){}return __class(t,"game.gtab.Patface"),t.id=0,t.patkind=1,t.img=2,t.content=3,t.linkdlg=4,t.begintime=5,t.endtime=6,t}(),Pet=function(){function t(){}return __class(t,"game.gtab.Pet"),t.buildid=0,t.name=1,t.mapimg=2,t.beginlucky=3,t.feedagv=4,t.feeditem=5,t.mem=6,t.info=7,t}(),Petfeed=function(){function t(){}return __class(t,"game.gtab.Petfeed"),t.itemid=0,t.num=1,t}(),Pethunt=function(){function t(){}return __class(t,"game.gtab.Pethunt"),t.buildid=0,t.huntcd=1,t.minput=2,t.maxput=3,t.needlucky=4,t.itemdata=5,t}(),Quest=function(){function t(){}return __class(t,"game.gtab.Quest"),t.isstruct=function(t){return t&&24==t.length?!0:!1},t.id=0,t.kind=1,t.group=2,t.complete=3,t.require=4,t.caption=5,t.icon=6,t.img=7,t.scale=8,t.mem=9,t.way=10,t.waitex=11,t.begin=12,t.end=13,t.valname=14,t.iap=15,t.need=16,t.count=17,t.total=18,t.getkind=19,t.ver=20,t.award=21,t.awardagv=22,t.pos=23,t.slen=24,t}(),Questaward=function(){function t(){}return __class(t,"game.gtab.Questaward"),t.id=0,t.num=1,t}(),Rankaward=function(){function t(){}return __class(t,"game.gtab.Rankaward"),t.Create=function(){return t._default.concat()},t.id=0,t.kind=1,t.lvmax=2,t.award=3,t.mainkind=4,__static(t,["_default",function(){return this._default=[0,0,0,null,0]}]),t}(),Signreward=function(){function t(){}return __class(t,"game.gtab.Signreward"),t.id=0,t.kind=1,t.begin=2,t.end=3,t.reward=4,t.random=5,t.vip=6,t.cost=7,t.money=8,t}(),Sysbuild=function(){function t(){}return __class(t,"game.gtab.Sysbuild"),t.sysbuildid=0,t.buildname=1,t.Leadname=2,t.classname=3,t.mapimg=4,t.avatar=5,t.mapx=6,t.mapy=7,t.putx=8,t.puty=9,t.needlvl=10,t.fixprice=11,t.strdef=12,t.ani1=13,t.ani2=14,t.ani3=15,t.selectsnd=16,t}(),Sysbuildavatar=function(){function t(){}return __class(t,"game.gtab.Sysbuildavatar"),t.id=0,t.mapimg=1,t.s=2,t.x=3,t.y=4,t.pricekind=5,t.pricenum=6,t.needviplv=7,t.beginsell=8,t.endsell=9,t.stampid=10,t}(),SysID=function(){function t(){}return __class(t,"game.gtab.SysID"),__getset(1,t,"KQZTBJ",function(){return 0}),t.TKHDSJ=function(){var t=[[28,32,42,2,2,98,1,3e3],[58,68,78,2,2,128,1,3e3],[128,149,179,2,2,228,1,3e3],[328,348,448,2,2,528,1,3e3],[666,660,780,2,2,888,1,3e3],[998,1088,1288,2,2,1688,1,3e3]];return t},t.GetZXLBHDWP=function(){var t=[null,28];return t},t.GetHDYWWP=function(){var t=[null,[28,1,5,1]];return t},t.GetHDSCWPBBH=function(t){var e=[null,[800,20151126],[801,20151126]],i=ArrOp.SzSearch(t,e);return 0>i?0:e[i][1]},t.getDQHD=function(){return[1,200]},t.SBHDSJB=function(){var t;return t=[[2,3],[2,0],[0,3],[2,0],[0,3],[2,0],[0,3]]},t.getTCHDGRJL=function(){var t=[[25,100],[22,100],[7403,1]];return t},t.JBHDBX=function(){var t=[[7723,1,1],[41,1,371],[20,1,371],[7104,1,15],[18,1,371],[7210,1,2],[101,1,371],[41,2,371],[7554,1,15],[19,1,371],[21,1,371],[171,1,370]];return t},t.ZSHDBX=function(){var t=[[7537,1,1],[13,1,100],[7308,1,2],[14,1,100],[15,1,100],[7207,1,15],[9,1,534],[203,1,534],[201,1,533],[202,1,533],[7206,1,15],[292,1,533]];return t},t.DQHDBX=function(){var t=[[7578,1,1],[9,5,100],[7590,1,2],[3,1,100],[6,1,100],[7405,1,15],[28,10,534],[28,1,534],[2,1,533],[1,100,533],[7543,1,15],[25,5,533]];return t},t.JRTCHDWP=function(){var t=[[171,1],[292,3]];return t},t.GetWorldChatNotiStr=function(){return t.m_nIsForbidWorldChat?"您被禁止发言":"提示:VIP1可享受聊天'无等待'"},t.getBZCHDSJ=function(){var t=[["2015-12-05 12:30:00","2015-12-05 13:00:00"],["2015-12-05 21:00:00","2015-12-05 21:30:00"]];return t},t.HYJRHDTBHW=function(){var t=[102,103,104];return t},t.IsZWCPID=function(t){return t>=4001&&4012>t},t.IsQJJZID=function(t){return t>=5900&&5999>=t},t.IsJCCPID=function(t){return t>=151&&155>t},t.IsJZPFID=function(t){return t>=3e4},t.IsDTJZID=function(t){return t>=5e3&&3e4>t},t.IsDTZSJZID=function(t){return t>=6e3&&3e4>t&&7e3!=t},t.IsHDCPID=function(t){return t>=800&&999>=t},t.IsZXRWID=function(t){return t>0&&200>t},t.IsRCRWID=function(t){return t>=200&&1e3>t},t.IsHDRWID=function(t){return t>=1e3},t.IsQTRWID=function(t){return t>=3e4},t.IsCHENHAO=function(t){return t>=4e4&&42999>=t},t.IsRONGYU=function(t){return t>=43e3&&45999>=t},t.IsBUFFZUID=function(t){return t>=4e4&&45999>=t},t.GetVipDailyLight=function(){return[20,20,30,40,60,80,100,120,150]},t.GetTradeItemCostAgv=function(t){var e=[1,2,3,5];return t>=e.length&&(t=3),0>t&&(t=0),e[t]},t.GetVipReachReward=function(t){var e;switch(t){case 1:e=[[16,5],[17,5],[18,5]];break;case 2:e=[[7585,1],[7581,1],[7583,1]];break;case 3:e=[[10,10],[11,10],[12,10]];break;case 4:e=[[7626,1],[7556,1],[7558,1]];break;case 5:e=[[13,15],[14,15],[15,15]];break;case 6:e=[[7618,1],[7625,1],[7627,1]];break;case 7:e=[[25,2e3]];break;case 8:e=[[7619,1],[7630,1],[7633,1]]}return e},t.GetVipDescriptionByLv=function(t){var e;switch(t){case 1:e=["累计充值<黄色>1元<>即可享受该特权","VIP1奖励（邮件发送）<VIP奖励>","直升机代购次数增加到<黄色>3次<>（购买后生效）","世界聊天<黄色>无冷却时间","可<黄色>完成<>世界求购的订单","可<黄色>完成<>扩容工具互换的订单","路边摊广告<黄色>冷却时间减半","每天点石成金的次数增加到<黄色>10次","每天可免费领取闪电<黄色>20个","每周可赠送点赞花<黄色>5朵","享受VIP1<黄色>签到奖励"];break;case 2:e=["累计充值<黄色>6元<>即可享受该特权","包含VIP1等级所有特权","VIP2奖励（邮件发送）<VIP奖励>","好友上限增加至<黄色>120名","每天点石成金的次数增加到<黄色>20次","每天可免费领取闪电<黄色>30个","每周可赠送点赞花<黄色>6朵","享受VIP2<黄色>签到奖励"];break;case 3:e=["累计充值<黄色>30元<>即可享受该特权","包含VIP2等级所有特权","VIP3奖励（邮件发送）<VIP奖励>","邮筒报纸增加到<黄色>14页","每天可使用庄园全体加速<黄色>1小时","作物、家畜的全体加速享<黄色>半价","好友上限增加至<黄色>150名","每天点石成金的次数增加到<黄色>40次","每天可免费领取闪电<黄色>40个","每周可赠送点赞花<黄色>8朵","享受VIP3<黄色>签到奖励"];break;case 4:e=["累计充值<黄色>100元<>即可享受该特权","包含VIP3等级所有特权","VIP4奖励（邮件发送）<VIP奖励>","解锁<黄色>世界求购<>发布功能，每天可免费发布<黄色>2次<>世界求购信息","解锁<黄色>生产机器仓库<>，生产机器可以收回到仓库中","邮筒报纸增加到<黄色>15页<>，每次可查看更多商品","直升机代购次数增加到<黄色>4次<>（购买后生效）","每天点石成金的次数增加到<黄色>60次","每天可免费领取闪电<黄色>60个","每周可赠送点赞花<黄色>10朵","好友上限增加至<黄色>180名"];break;case 5:e=["累计充值<黄色>200元<>即可享受该特权","包含VIP4等级所有特权","VIP5奖励（邮件发送）<VIP奖励>","解锁<黄色>航运预测<>，可预知下一船所需物品的具体数量","每天可免费发布<黄色>3次<>世界求购信息","直升机代购次数增加到<黄色>5次<>（购买后生效）","每天点石成金的次数增加到<黄色>80次","每天可免费领取闪电<黄色>80个","每周可赠送点赞花<黄色>15朵","好友上限增加至<黄色>200名"];break;case 6:e=["累计充值<黄色>500元<>即可享受该特权","包含VIP5等级所有特权","VIP6奖励（邮件发送）<VIP奖励>","每天可使用庄园全体加速<黄色>2小时","解锁<黄色>工具互换<>发布功能，每天可免费发布<黄色>2次<>工具互换信息","直升机代购次数增加到<黄色>6次<>（购买后生效）","每天点石成金的次数增加到<黄色>100次","每天可免费领取闪电<黄色>100个","每周可赠送点赞花<黄色>20朵","每天可免费发布<黄色>4次<>世界求购信息"];break;case 7:e=["累计充值<黄色>1000元<>即可享受该特权","包含VIP6等级所有特权","VIP7奖励（邮件发送）<VIP奖励>","直升机代购次数增加到<黄色>7次<>（购买后生效）","每天可免费发布<黄色>3次<>工具互换信息","每天点石成金的次数增加到<黄色>200次","每天可免费领取闪电<黄色>120个","每周可赠送点赞花<黄色>25朵"];break;case 8:e=["累计充值<黄色>2000元<>即可享受该特权","包含VIP7等级所有特权","VIP8奖励（邮件发送）<VIP奖励>","每天可免费发布<黄色>4次<>工具互换信息","直升机代购次数增加到<黄色>8次<>（购买后生效）","每天点石成金的次数增加到<黄色>300次","每天可免费领取闪电<黄色>150个"]}var i=game.gtab.SysID.GetVipReachReward(t);if(i.length>0)for(var n=0,s=0;s<e.length;s++)e[s].indexOf("<VIP奖励>")>0&&(n=1);return e},t.GetSellPercentKind=function(t,e){var i=NaN;return i=10*t/e+1,i>10?"":i>9?"c9":i>8?"c8":i>7?"c7":"c6"},t.GETSELLPERCENT=function(e,i){return t.GetSellPercentKind(e,i)},t.FRD_ON=function(t,e,i){DataTable.m_iFriendBar.AddListener(t,e,i)},t.FRD_EMIT=function(t,e){DataTable.m_iFriendBar.Emit(t,e)},t.FRF_HAS=function(t){return DataTable.m_iFriendBar.hasEvent(t)},t.FRF_DEL=function(t){DataTable.m_iFriendBar.offEvent(t)},t.FRD_GETUSERINFO=function(t,e,i,n){DataTable.m_iSelfFrd.Frd_GetUserInfo(t,e,i,n)},t.GROUP_MESSAGE=function(t){return t[0]<0?-101==t[1]?-101:-100:FriendDef.IsLocalPlayer(t[0])?t[1]:t[0]},t.MONEYKIND_MONEY=0,t.MONEYKIND_DIAMOND=1,t.MONEYKIND_SHELL=2,t.MONEYKIND_MEDAL=3,t.ITEMKIND_OTHER=4,t.FLYQUENAME_WWJ=0,t.FLYQUENAME_CWXB=1,t.FLYQUENAME_BZ=2,t.FLYQUENAME_BZHY=3,t.FLYQUENAME_BZDIY=4,t.FLYQUENAME_NGM=5,t.FLYQUENAME_YJLQ=6,t.FLYQUENAME_YQD=7,t.FLYQUENAME_ZSJB=8,t.FLYQUENAME_XY=9,t.FLYQUENAME_LBLQ=10,t.FLYQUENAME_QDLQ=11,t.TREESTATE_CS=0,t.TREESTATE_WQZ=1,t.TREESTATE_QZZ=2,t.TREESTATE_FGX=3,t.TREESTATE_LQ=4,t.TREESTATE_KD=5,t.ITEMKIND_SYS=0,t.ITEMKIND_ZW=1,t.ITEMKIND_SL=2,t.ITEMKIND_MAKE=3,t.ITEMKIND_PF=4,t.ITEMKIND_ZS=5,t.ITEMKIND_GS=6,t.ITEMKIND_BUFFZ=7,t.ITEMKIND_QT=8,t.BUILDKIND_ZS=0,t.BUILDKIND_TD=1,t.BUILDKIND_GS=2,t.BUILDKIND_JQ=3,t.BUILDKIND_YZ=4,t.BUILDKIND_CW=5,t.BUILDKIND_ZL=6,t.BUILDKIND_QJJZ=7,t.BUILDKIND_TT=8,t.BUILDKIND_WWJ=9,t.BUILDKIND_CWJT=10,t.BUILDKIND_NPCHG=11,t.BUILDKIND_ZZY=12,t.BUILDKIND_PF=13,t.BUILDKIND_OTHER=14,t.BARNBAG=50,t.WAREBAG=50,t.MENUBTNSIZE=78,t.POPBTNSIZE1=82,t.POPBTNSIZE2=116,t.SYSITEMID_JB=1,t.SYSITEMID_ZS=2,t.SYSITEMID_BK=3,t.SYSITEMID_JY=4,t.SYSITEMID_HHD=5,t.SYSITEMID_DK=6,t.SYSITEMID_YQD=7,t.SYSITEMID_FLKZS=8,t.SYSITEMID_XZ=9,t.SYSITEMID_TD=10,t.SYSITEMID_TC=11,t.SYSITEMID_MH=12,t.SYSITEMID_LD=13,t.SYSITEMID_BS=14,t.SYSITEMID_HJ=15,t.SYSITEMID_KD=16,t.SYSITEMID_JZ=17,t.SYSITEMID_ZY=18,t.SYSITEMID_YG=19,t.SYSITEMID_SJC=20,t.SYSITEMID_SJTZ=21,t.SYSITEMID_JSZ=22,t.SYSITEMID_FLKZS2=23,t.SYSITEMID_FLKZS3=24,t.SYSITEMID_JSSD=25,t.SYSITEMID_PTYS=26,t.SYSITEMID_LB=27,t.SYSITEMID_HDLQ=28,t.SYSITEMID_FLKZS4=29,t.SYSITEMID_FLKZS5=30,t.SYSITEMID_PTXH=39,t.SYSITEMID_XTCS_BEGIN=40,t.SYSITEMID_DQ=40,t.SYSITEMID_KXCJQ=41,t.SYSITEMID_HHCJQ=42,t.SYSITEMID_XTCS_END=43,t.ITEMID_MB=101,t.ITEMID_MT=4530,t.BUILDITEMID=5e3,t.BUILDID_JSHE=5151,t.BUILDID_PJZS=6e3,t.BUILDID_LMPY=5700,t.BUILDID_SMLZ=5701,t.BUILDID_DXWWJ=-1,t.NPC_YDBH=31,t.RQQ_YDBH=35,t.ZSJYDBH=53,t.ZSJDHBH=54,t.JSSDSX=50,t.PTSDSL=1,t.JQSDSL=2,t.WPJGXS=3.3,t.LBTID=4,t.MTID=6,t.NPCJZID=7,t.LQLB_SCLB=0,t.LQLB_SDFH=1,t.LQLB_GQLB=2,t.LQLB_V2LC=3,t.LQLB_V4LC=4,t.LQLB_END=5,t.WE_BIN_FLAG1=253296386,t.WE_BIN_FLAG2=253296402,t.DIYADCD=43200,t.DIYGGCXSJ=21600,t.JQZDTJSL=30,t.GMTZCSJG=50,t.HYTZYGFS=2e3,t.HYTZKQFS=2500,t.VIPMRZSS=30,t.VIPMRSDS=20,t.SDEWGMPJ=100,t.JSMXLX_MR=0,t.JSMXLX_JB=1,t.JSMXLX_ZS=2,t.JSMXLX_BK=3,t.JSMXLX_PJ=4,t.DIYPRICEKIND_BSM=0,t.DIYPRICEKIND_JB=1,t.DIYPRICEKIND_ZS=2,t.DIYPRICEKIND_BK=3,t.DIYPRICEKIND_XZ=4,t.JZPFSJ_NULL=0,t.JZPFSJ_JB=1,t.JZPFSJ_ZS=2,t.JZPFSJ_BK=3,t.JZPFSJ_XZ=4,t.JZPFSJ_PJ=5,t.MODELANIKIND_T=0,t.MODELANIKIND_JQ=1,t.MODELANIKIND_GS=2,t.MODELANIKIND_END=3,t.KQPXRGN=0,t.PJSICKG=0,t.FKSXJG=10,t.FKZCTLSJ=10,t.FKZDRS=30,t.ZBJLMC=3,t.BLOCKONCEDM=10,t.ZJHCKQ=0,t.CKLX_LC=0,t.CKLX_WP=1,t.CKLX_ZS=2,t.CKLX_JQ=3,t.CKLX_QJ=4,t.JSLX_ZW=0,t.JSLX_YZ=1,t.JSLX_JQ=2,t.JSLX_END=3,t.YK_NCDH=0,t.YK_YZZYH=1,t.YK_KJDR=2,t.YK_PTYK=3,t.YK_CJYK=4,t.YK_END=5,t.RW_PT=0,t.RW_RC=1,t.RW_HD=2,t.RW_QT=3,t.RW_END=4,t.RWSJ_YWCZX=0,t.RWSJ_ZX=1,t.RWSJ_RC=2,t.RWSJ_HD=3,t.RWSJ_QT=4,t.RWSJ_ZXJD=5,t.RWSJ_RWBB=6,t.RWSJ_END=7,t.NGSD_YK=0,t.NGSD_LB=1,t.NGSD_ZS=2,t.NGSD_SD=3,t.NGSD_YS=4,t.NGSD_END=5,t.HDLX_GG=0,t.HDLX_HD=1,t.HDLX_NG=2,t.HDLX_RC=3,t.HDLX_LB=4,t.HDLX_SC=5,t.HDLX_LC=6,t.HDLX_END=7,t.HDKS_PT=0,t.HDKS_XH=1,t.HDKS_ZC=2,t.HDKS_SX=3,t.HDKS_END=4,t.HD_ZM=1,t.HD_ZXLB=4,t.HD_RC=5,t.HD_SC=9,t.HD_GQ=-100,t.HD_LC=147,t.HD_LCLQV2=148,t.HD_LCLQV4=149,t.HD_YQHY=154,t.HD_SCFX=220,t.LB_SC="c1007",t.LB_GQ="c1011",t.LB_LCV2="j1004",t.LB_LCV4="j1005",t.ZSDH_SD=0,t.ZSDH_YS=1,t.ZSDH_SC=2,t.ZSDH_LB=3,t.ZSDH_LIB=4,t.ZSDH_END=5,t.DKBX_XB=0,t.DKBX_HD=1,t.DKBX_FF=2,t.DKBX_END=3,t.DSCJ_DTCS=0,t.DSCJ_BJSJ=1,t.DSCJ_GXSJ=2,t.DSCJ_ZCS=3,t.DSCJ_END=4,t.CJSJ_CJ=0,t.CJSJ_GLZ=1,t.CJSJ_HDLSZ=2,t.CJSJ_MRJL=3,t.CJSJ_END=4,t.CJDJ_YJ=0,t.CJDJ_EJ=1,t.CJDJ_SJ=2,t.CJDJ_FJ=3,t.CJDJ_WJ=4,t.CJDJ_END=5,t.QDSJ_QDSJ=0,t.QDSJ_QD=1,t.QDSJ_JL=2,t.QDSJ_ZQD=3,t.QDSJ_HHSJ=4,t.QDSJ_HH=5,t.QDSJ_HHJL=6,t.QDSJ_HHXF=7,t.QDSJ_END=8,t.QDLX_PT=0,t.QDLX_HH=1,t.QDLX_END=2,t.LQZT_WWC=0,t.LQZT_WLQ=1,t.LQZT_YLQ=2,t.LQZT_ZRWLQ=3,t.LQZT_WJH=4,t.LQZT_GQ=5,t.LQZT_END=6,t.RWSZ_WJH=0,t.RWSZ_CZDT=1,t.RWSZ_CZQB=2,t.RWSZ_CZRC=3,t.RWSZ_GQ=4,t.RWSZ_RWWC=5,t.RWSZ_END=6,t.SJLTLQSJ=600,t.RANK_EVA=0,t.RANK_PRA=1,t.RANK_LEVEL=2,t.RAND_MONEY=3,t.RANK_TRADE=4,t.RANK_PLANT=5,t.RANK_COW=6,t.RANK_FILL=7,t.RANK_END=8,t.OTHERDATACOLMAX=12,t.HDDJBBH=20151203,t.TKHDBBH=20151011,t.ZXLB_VIP_HDKS="2016-10-23 00:00:00",t.ZXLB_VIP_HDJS="2016-10-25 23:59:59",t.ZXLB_VIP_WPBS=2,t.ZXLB_WPKS="2016-10-23 00:00:00",t.ZXLB_WPJS="2015-12-06 23:59:59",t.HDYW_KSSJ="2015-12-03 12:00:00",t.HDYW_JSSJ="2015-12-03 12:00:00",t.HDSC_KSSJ="2015-11-26 00:00:00",t.HDSC_JSSJ="2015-11-29 23:59:59",t.HDBX_KSSJ="2015-10-29 00:00:00",t.HDBX_JSSJ="2015-11-03 23:59:59",t.HDBX_DHK=0,t.HD_NPC_KSSJ="2015-11-26 00:00:00",t.HD_NPC_JSSJ="2015-11-29 23:59:59",t.HD_NPC_ID=0,t.SW_JLKG=0,t.SW_JLKFRW=50,t.YCZHD_KQNF=2014,t.YCZHD_KQYF=9,t.YCZHD_KSSJ="2014-09-10",t.YCZHD_CXXS=48,t.YCZHD_TSXX="活动",t.WZ_ZL=2e6,t.ZMZPHD_KQSJ="2015-12-03 12:00:00",t.ZMZPHD_JSSJ="2015-12-06 23:55:00",t.DQCJ_KSSJ="2015-12-03 12:00:00",t.DQCJ_JSSJ="2015-12-06 23:59:59",t.ZMHD_KQSJ="2015-12-03 12:00:00",t.ZMHD_JSSJ="2015-12-06 23:55:00",t.SBHD_KQSJ="2015-10-29 00:00:00",t.SBHD_JSSJ="2030-10-29 00:00:00",t.ZMHD_JLEWBS=1,t.JRHD_KSSJ="2015-12-03 12:00:00",t.JRHD_JSSJ="2015-12-06 23:55:00",t.JRHD_BXSSJ="2015-12-07 23:55:00",t.LYJF_1=6,t.LYJF_2=12,t.LYJF_3=90,t.LYJF_4=180,t.LYJF_5=300,t.JRZDLJMC=200,t.JRCHBXKS="2014-09-01",t.JRCHBXCXXS=48,t.JRCHYGL=50,t.CHYBXHFZS=5,t.SJLTGNKG=1,t.SJLTXH=0,t.m_nIsForbidWorldChat=0,t.BZCCXJL=800,t.HYJRHD_KSSJ="2014-12-17",t.HYJRHD_JSSJ="2014-12-20",t.HYJUTBHWGL=30,t.HYJRJLWP=103,t.HYJRJLWPMC="圣诞帽",t.HYJR_PTJLSL=1,t.HYJR_GJJLSL=3,t.XGNCHFZS=100,t.XGNCMFCS=2,t.ZPBCCS=50,t.XYXH_JB_1=500,t.XYXH_JB_10=4900,t.XYXH_JB_100=24e3,t.XYXH_ZS_1=10,t.XYXH_ZS_10=90,t.XYXH_ZS_100=400,t.DQXYXH_1=10,t.DQXYXH_10=90,t.DQXYXH_100=400,t.XYJC_BBSL=2e3,t.XYJC_DGGJSL=300,t.XYJC_MRHDGJ=100,t.XYJC_MRXHGJ=100,t.PFTJBBQKG=1,t.SCFX_RW_ID=2099,t.SJLTDLMS=0,t.DZKG=1,t.LBKG=1,t.LBTLSJ=20,t.LBHHJSW=5,t.LBHHSDW=25,t.JQSJKG=0,t.LBT_GG_JCD=.5,t.BZ_YS_ZJ_1D=3,t.BZ_YS_ZJ_2D=4,t.ZSJ_DGCS_1D=2,t.ZSJ_DGCS_2D=2,t.ZSJ_DGCS_3D=2,t.ZSJ_DGCS_4D=3,t.ZSJ_DGCS_5D=4,t.ZSJ_DGCS_6D=5,t.ZSJ_DGCS_7D=6,t.ZSJ_DGCS_8D=7,t.DJS_KFCS_1D=10,t.DJS_KFCS_2D=20,t.DJS_KFCS_3D=40,t.DJS_KFCS_4D=60,t.DJS_KFCS_5D=80,t.DJS_KFCS_6D=100,t.DJS_KFCS_7D=200,t.DJS_KFCS_8D=300,t.QT_JS_DZ_ZW=.5,t.QT_JS_DZ_JC=.5,t.SJ_KRJH_CS_1=2,t.SJ_KRJH_CS_2=3,t.SJ_KRJH_CS_3=4,t.SJ_QGGM_CS_1=2,t.SJ_QGGM_CS_2=3,t.SJ_QGGM_CS_3=4,t.CK_QJ_RL_1=20,t.CK_QJ_RL_2=40,t.ZSJ_ZH_ZS=15,t.SJ_QGGM_ZS=10,t.SJ_KRJH_ZS=15,t.SJ_QGGM_DLSX=100,t.SJ_KRJH_DLSX=100,t.YK_NCDHJS=.2,t.YK_YZZYHJS=.2,t.YK_KJDRJS=.1,t.PTYK_NCJS=.1,t.PTYK_YZJS=.1,t.PTYK_KJJS=.1,t.CJYK_NCJS=.15,t.CJYK_YZJS=.15,t.CJYK_KJJS=.15,t.EWHYSL_1=20,t.EWHYSL_2=50,t.EWHYSL_3=80,t.EWHYSL_4=100,t.MFDZCS_1=5,t.MFDZCS_2=6,t.MFDZCS_3=8,t.MFDZCS_4=10,t.MFDZCS_5=15,t.MFDZCS_6=20,t.MFDZCS_7=25,t.MFDZCS_8=25,t.QGFB_0=0,t.QGFB_1=1,t.QGFB_2=2,t.QGFB_3=3,t.QGFB_END=4,t.VIP_XCD_ZSJ_ZH=90001,t.VIP_JS_SD_EWGM=90005,t.VIP_JS_SD_DXWWJ=90006,t.VIP_WLQ_SJLT=10001,t.VIP_JS_SJ_KRCK=10002,t.VIP_JCD_LBT_GG=10003,t.VIP_ZJ_ZSJ_DGCS_1=10004,t.VIP_ZJ_ZSJ_DGCS_2=10005,t.VIP_ZJ_ZSJ_DGCS_3=10006,t.VIP_ZJ_DJS_SYCS_1=10007,t.VIP_MFDZCS_1=10008,t.VIP_JS_SJ_QGCK=10009,t.VIP_ZJ_HYSL_1=20001,t.VIP_ZJ_DJS_SYCS_2=20007,t.VIP_MFDZCS_2=20008,t.VIP_ZJ_BZ_YS_1=30001,t.VIP_JS_QT_1=30002,t.VIP_QTJS_DZ_ZW=30004,t.VIP_QTJS_DZ_JC=30005,t.VIP_ZJ_HYSL_2=30006,t.VIP_ZJ_DJS_SYCS_3=30007,t.VIP_MFDZCS_3=30008,t.VIP_FTVIPCJ=30009,t.VIP_ZJ_BZ_YS_2=40001,t.VIP_JS_CK_JQ=40002,t.VIP_ZJ_ZSJ_DGCS_4=40003,t.VIP_JS_SJ_QGGM_1=40004,t.VIP_ZJ_HYSL_3=40005,t.VIP_ZJ_DJS_SYCS_4=40007,t.VIP_MFDZCS_4=40008,t.VIP_JS_HY_YCSL=50001,t.VIP_JS_SJ_QGGM_2=50002,t.VIP_ZJ_ZSJ_DGCS_5=50003,t.VIP_ZJ_HYSL_4=50004,t.VIP_ZJ_DJS_SYCS_5=50007,t.VIP_MFDZCS_5=50008,t.VIP_JS_QT_2=60001,t.VIP_JS_SJ_KRJH_1=60002,t.VIP_ZJ_ZSJ_DGCS_6=60003,t.VIP_JS_SJ_QGGM_3=60004,t.VIP_ZJ_DJS_SYCS_6=60007,t.VIP_MFDZCS_6=60008,t.VIP_JS_CK_QJ=70001,t.VIP_ZJ_ZSJ_DGCS_7=70002,t.VIP_JS_SJ_KRJH_2=70003,t.VIP_ZJ_DJS_SYCS_7=70007,t.VIP_MFDZCS_7=70008,t.VIP_JS_CK_QJ_2=80001,t.VIP_ZJ_ZSJ_DGCS_8=80002,t.VIP_JS_SJ_KRJH_3=80003,t.VIP_ZJ_DJS_SYCS_8=80007,t.VIP_MFDZCS_8=80008,t.NOTI_TS1=0,t.NOTI_TS2=1,t.NOTI_ZW=2,t.NOTI_GS=3,t.NOTI_JC=4,t.NOTI_JQ=5,t.NOTI_HY=6,t.NOTI_TT=7,t.NOTI_QJ=8,t.NOTI_USER=9,t.BILLSTATE_SELL=0,t.BILLSTATE_BEENSOLD=1,t.BILLSTATE_END=2,t.RW_VERSION=1112,t.RW_CZ_CZDT=2,t.RW_CZ_CZQB=3,t.GAMERECNAME="rainbow",t.TRADE_NUM_MAX=100,t.TRADE_TOOLS=0,t.TRADE_ITEM=1,t.TRADE_END=2,t.STATE_TOBUY=0,t.STATE_DEAL=1,t.STATE_BESELL=2,t.STATE_OVER=3,t.STATE_GETBACK=4,t.STATE_END=5,t.TRADEMSG_OVERTIME=10800,t.CHAT_MAIL=0,t.CHAT_WORLDCHAT=1,t.CHAT_FRD=2,t.CHAT_SYS=3,t.UV_CHECK_MAX=64,t.UV_COUNT_MAX=7,t.UV_RECENT_MAX=7,t.CJZT_LP=0,t.CJZT_XP=1,t.CJZT_CJ=2,t.CJZT_QP=3,t.CJZT_END=4,t}(),Sysmessage=function(){function t(){}return __class(t,"game.gtab.Sysmessage"),t.id=0,t.title=1,t.content=2,t.kind=3,t}(),Terrainavatar=function(){function t(){}return __class(t,"game.gtab.Terrainavatar"),t.id=0,t.name=1,t.mapimg=2,t.tileimg=3,t.widgetimg=4,t.bkimg=5,t.leafimg=6,t.pricekind=7,t.pricenum=8,t.needviplv=9,t.beginsell=10,t.endsell=11,t.stampid=12,t}(),TInviteCode=function(){function t(){}return __class(t,"game.gtab.TInviteCode"),t.isstruct=function(t){return t&&6==t.length?!0:!1},t.uid=0,t.regtime=1,t.code=2,t.player=3,t.inviter=4,t.szinviterdata=5,t.slen=6,t}(),Tree1=function(){function t(){}return __class(t,"game.gtab.Tree",null,"Tree1"),t.buildid=0,t.resitemid=1,t.resnum=2,t.buildtime=3,t.mapimg=4,t.makediamon=5,t.getexp=6,t}(),Userlvl=function(){function t(){}return __class(t,"game.gtab.Userlvl"),t.level=0,t.exp=1,t.o_nummax=2,t.o_breaktime=3,t.o_itemmax=4,t.o_pricemin=5,t.o_pricemax=6,t.s_pricemin=7,t.s_pricemax=8,t.addbuild=9,t.additem=10,t.acccount=11,t.recycletime=12,t.exchgrate=13,t}(),Wharfvisu=function(){function t(){}return __class(t,"game.gtab.Wharfvisu"),t.lv=0,t.needstar=1,t.needitemid=2,t.neednum=3,t.mapimg=4,t}(),Wonderkind=function(){function t(){}return __class(t,"game.gtab.Wonderkind"),t.id=0,t.kindname=1,t.maskimg=2,t.mask_l=3,t.mask_t=4,t.mask_r=5,t.mask_b=6,t.maxparts=7,t.defshow=8,t.addmatimg=9,t.builditem=10,t.pricekind=11,t.price=12,t.makemat=13,t}(),PreloadManager=function(){function t(){this.soundArr=["snd/sound/button.mp3","snd/sound/51eca45c23ae400e.mp3","snd/sound/51eca46923ae4010.mp3","snd/sound/51eca46b23ae4012.mp3"],this.grade1L=[{url:"ui/icon/51bfe749311a3004.png",type:"image"},{url:"3d/tex/5284c06ba4be7029.png",type:"image"},{url:"ui/icon/51aef02b1fe8f005.png",type:"image"},{url:"3d/tex/527cbab92a3e4016.png",type:"image"},{url:"3d/tex/51f9cee9fb2d6002.png",type:"image"}],this.imgArr=[{url:"ui/icon/51bfe749311a3004.png",type:"image"},{url:"3d/tex/5284c06ba4be7029.png",type:"image"},{url:"ui/icon/51aef02b1fe8f005.png",type:"image"},{url:"3d/tex/51ba7e337d8fc002.png",type:"image"},{url:"ui/icon/51bad2637cc22008.png",type:"image"},{url:"ui/icon/51beffb0c0eea00d.png",type:"image"},{url:"assets/other/2.jpg",type:"image"},{url:DataTable.getSkin("tex_商店_大背景图"),type:"image"},{url:Assets.activityResUrl,type:"atlas"},{url:Assets.signResUrl,type:"atlas"},{url:Assets.levelUpResUrl,type:"atlas"},{url:Assets.figureInfoResUrl,type:"atlas"},{url:Assets.trophyResUrl,type:"atlas"},{url:Assets.goldResUrl,type:"atlas"},{url:Assets.vipResUrl,type:"atlas"},{url:Assets.marketResUrl,type:"atlas"},{url:Assets.frdResUrl,type:"atlas"},{url:Assets.rankResUrl,type:"atlas"},{url:Assets.chatResUrl,type:"atlas"},{url:Assets.actFirstUrl,type:"image"},{url:DataTable.getSkin("tex_cacel"),type:"image"},{url:DataTable.getSkin("btn_buy"),type:"image"}]}__class(t,"game.PreloadManager");var e=t.prototype;return e.loadSound=function(t){if(!DataTable.m_iSoundTab||0!=DataTable.m_iSoundTab.m_bWebAudioOk){var e=0,i=0,n=t||this.soundArr;i=n.length;var s;for(e=0;i>e;e++)s=new Sound,s.load(n[e]),Loader.cacheRes(n[e],s);s=null}},e.loadG1Img=function(){Laya.loader.load(this.grade1L,null,null,null,0)},e.loadImg=function(t,e,i){void 0===i&&(i=4);var n=t||this.imgArr;if(e){var s=e;return e=null,void Laya.loader.load(n,s,null,null,i)}Laya.loader.load(n,null,null,null,i)},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}(),csvr=function(){function t(){}return __class(t,"game.sys.csvr"),t.call=function(t,e,i,n,s,a){var r="("+PackCoder.ArrToPack(i)+")",h="$c "+t+"$"+e+r+WSocket.addHandler(n)+"|"+WSocket.addHandler(s)+"?"+a;Log1.info("[csvr::call]:"+h),WSocket.sendString(h)},t.Send=function(t,e,i,n){var s="("+PackCoder.ArrToPack(n)+")",a="$s "+e+"$"+i+s;Log1.info("[csvr::Send]:"+a),WSocket.sendString(a)},t.IsLinked=function(){return WSocket.me.IsLinked()},t.GetDefCenterLink=function(){},t.BeginLink=function(){Log1.debug(1,"[BeginLink]"),WSocket.me.wConnect()},t.retflag=0,t}(),gSys=function(){function gSys(){}return __class(gSys,"game.sys.gSys"),__getset(1,gSys,"_DEVICE_NAME",function(){return"WIN_JIANGWANJIANG1"}),gSys.InitTimer=function(){gSys.m_startTimer=new Date},gSys.GetCurSecAdj=function(){return gSys.GetCurSecInt()+gSys.s_SecAdj},gSys.GetCurSecInt=function(){return Math.floor(((new Date).getTime()-gSys.m_startTimer.getTime())/1e3)},gSys.GetTickCount=function(){return gSys.GetCurSecInt()},gSys.getRandStr=function(t){1>t&&(t=1);var e=Math.random(),i=e.toPrecision(t).split(".");return i[1]},gSys.SetSecAdj=function(t){gSys.m_nSysSec=t,gSys.s_SecAdj=gSys.m_nSysSec-gSys.GetCurSecInt()},gSys.GetSecAfter=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),Math.floor(((new Date).getTime()-new Date(t,e,i).getTime())/1e3)},gSys.GetLocalTime=function(t){return t||(t=new Date),t},gSys.ReadPublicString=function(){return"WFCAA144A7F72_30"},gSys.GameMsg=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i="提示"),MessageBox.show(2,{title:i,content:t,closeOther:e})},gSys.PopOkCancel=function(t,e,i,n,s,a,r,h,o,l,u){void 0===s&&(s="提示"),void 0===a&&(a="确定"),void 0===r&&(r="取消"),void 0===h&&(h=!1),void 0===o&&(o=0),void 0===u&&(u=!0);var c=[];if(null!=l)for(var _=0;_<l.length;_++)c.push({iconskin:l[_][0],iconnum:l[_][1]});c.length>0?o>0?MessageBox.show(0,{content:n,title:s,iconArr:c,lbtn:a,rbtn:r,zsnum:o,closeOther:u},t,e,i):MessageBox.show(0,{content:n,title:s,iconArr:c,lbtn:a,rbtn:r,closeOther:u},t,e,i):""==a&&""==r?MessageBox.show(3,{content:n,title:s,closeOther:u},t,e,i):""==r?MessageBox.show(5,{title:"提示",content:n,num:o,closeOther:u},t,e,i):MessageBox.show(1,{content:n,title:s,lbtn:a,rbtn:r,closeOther:u},t,e,i)},gSys.PopOkCancel2=function(t,e,i,n,s,a,r){void 0===e&&(e=""),void 0===s&&(s=1),void 0===a&&(a=""),void 0===r&&(r="")},gSys.GameAdNoti=function(t){MessageBox.show(4,t)},gSys.Err=function(t){for(var e=arguments,i=e,n="",s=i?i.length:0,a=0;s>a;a++)n+=i[a];Log1.error(n)},gSys.SetSignal=function(t,e){Log1.debug(1,"[SetSignal]  ",t),SignalMr.SetSignal(t,e)},gSys.WaitSignal=function(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=!0),Log1.debug(1,"[WaitSignal]  ",e),SignalMr.WaitSignal(t,e,i,n,s)},gSys.ResetSignal=function(t){Log1.debug(1,"[ResetSignal]  ",t),SignalMr.ResetSignal(t)},gSys.RemoveSignalWait=function(t,e,i){Log1.debug(1,"[RemoveSignalWait]  ",t),SignalMr.RemoveSignalWait(t,e,i)},gSys.GetOnlyShortStr=function(){var t=Math.random(),e=t.toPrecision(6).split(".");return e[1]},gSys.WritePublicInt=function(t,e,i){LocalStorage.setItem(t+e,i+"")},gSys.ReadPublicInt=function(t,e,i){var n=LocalStorage.getItem(t+e);return n&&n.length>1?Laya.__parseInt(n):i},gSys.WritePublicVar=function(t,e,i,n){void 0===n&&(n=0);var s=t+e,a=new Object;a[s]=i,LocalStorage.setJSON(s,a)},gSys.ReadPublicVar=function(t,e,i){void 0===i&&(i=0);var n=t+e,s=LocalStorage.getJSON(n);if(s){var a=s[n];if(a)return a}return[]},gSys.CalAngle=function(t,e,i,n){var s=t-i,a=t-i,r=Math.atan(s/a),h=180*r/Math.PI;return h},gSys.CallByNameWithRet=function(name,ret,source){return source&&source[name]?(ret=eval("(source."+name+"())"),!0):!1},gSys.setErr=function(t){t>gSys.m_iError&&(gSys.m_iError=t)},gSys.getErr=function(){return gSys.m_iError},gSys.staticTree=!1,gSys.staticPlant=!1,gSys.staticCloud=!1,gSys.hideAni=!1,gSys.s_SecAdj=0,gSys.m_nSysSec=0,gSys.m_startTimer=null,gSys.m_iError=-1,gSys.SOCKET_CLNERR=0,gSys.SOCKET_ERR=1,gSys.SOCKET_CLOSE=2,gSys.SOCKET_SVRDOWN=3,gSys.SOCKET_SVRERR=1e3,__static(gSys,["t1",function(){return this.t1=new UintRef},"t2",function(){return this.t2=new UintRef}]),gSys}(),GObj=function(){function t(){this._map=[]}__class(t,"game.ui.base.GObj");var e=t.prototype;return e.FindInterface=function(t){return this._map[t]},e.RegInterface=function(t,e){this._map[e]=t},e.UnRegInterface=function(t){delete this._map[t]},t}(),GSysPopMenu=function(){function t(){}return __class(t,"game.ui.comui.menu.GSysPopMenu"),t.s_pMenu=null,t}(),OpenGiftBox=function(){function t(){}return __class(t,"game.ui.comui.OpenGiftBox"),t.Open=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s;return s.createInsFromName("layer_打开宝箱"),s},t}(),DlgManager=function(){function t(){this.res_activity=[{url:Assets.activityResUrl,type:"atlas"}],this.res_sign=[{url:Assets.signResUrl,type:"atlas"}],this.res_order=[{url:Assets.dingdanResUrl,type:"atlas"}],this.res_Wharf=[{url:Assets.dingdanResUrl,type:"atlas"},{url:Assets.wharfResUrl,type:"atlas"},{url:Assets.levelUpResUrl,type:"atlas"},{url:Assets.rndGiftResUrl,type:"atlas"}],this.res_Ornament=[{url:Assets.trophyResUrl,type:"atlas"}]}__class(t,"game.ui.DlgManager");var e=t.prototype;return e.showActivityDlg=function(t){void 0===t&&(t=0),GameMain._ins.addLoading(),Laya.loader.load(this.res_activity,Handler.create(this,this.onLoadActivity,[t]))},e.showSignDlg=function(t){void 0===t&&(t=0),GameMain._ins.addLoading(),Laya.loader.load(this.res_sign,Handler.create(this,this.onLoadSign,[t],!0))},e.showOrderDlg=function(){GameMain._ins.addLoading(),Laya.loader.load(this.res_order,Handler.create(this,this.onLoadOrder,null,!0))},e.showWharfDlg=function(t){void 0===t&&(t=0),GameMain._ins.addLoading(),Laya.loader.load(this.res_Wharf,Handler.create(this,this.onLoadWharf,[t],!0))},e.showTomBuyDlg=function(){GameMain._ins.addLoading(),Laya.loader.load(this.res_Wharf,Handler.create(this,this.onLoadTomBuy,null,!0))},e.showOrnamentInfo=function(t,e,i){void 0===i&&(i=0),GameMain._ins.addLoading(),Laya.loader.load(this.res_Ornament,Handler.create(this,this.onLoadOrnament,[t,e,i],!0))},e.onLoadActivity=function(t){Assets.checkRes(this.res_activity[0].url)&&(ActivityMainView.getInstance().tags=t,ActivityMainView.getInstance().myPopupMax(!1,!1,!0,"活动界面"),GameMain._ins.removeLoading())},e.onLoadSign=function(t){if(void 0===t&&(t=0),Assets.checkRes(this.res_sign[0].url)){if(88==t)return void OrdinarySign.Me().onShow();GSignDlg.Me().Index=t,GSignDlg.Me().myPopup(),GameMain._ins.removeLoading()}},e.onLoadOrder=function(){Assets.checkRes(this.res_order[0].url)&&(GOrderDlg.Me().myPopup(),GameMain._ins.removeLoading())},e.onLoadWharf=function(t){void 0===t&&(t=0),this.checkRes()&&(0==t?(DataTable.m_i_WharfMT&&(DataTable.m_i_WharfMT.m_pBoatDlg=GWharfDlg.Me()),GWharfDlg.Me().myPopup()):1==t&&GWharfWaitDlg.Me().myPopup(),GameMain._ins.removeLoading())},e.checkRes=function(){return Assets.checkRes(this.res_Wharf[0].url)&&Assets.checkRes(this.res_Wharf[1].url)&&Assets.checkRes(this.res_Wharf[2].url)&&Assets.checkRes(this.res_Wharf[3].url)?!0:!1},e.onLoadTomBuy=function(){this.checkRes()&&(GTomBuyDlg.Me().myPopup(),GameMain._ins.removeLoading())},e.onLoadOrnament=function(t,e,i){void 0===i&&(i=0),Assets.checkRes(this.res_Ornament[0].url)&&(OrnamentInfo.Me().Init(t,e,i),OrnamentInfo.Me().myPopup(),GameMain._ins.removeLoading())},t.Me=function(){return null==t._me&&(t._me=new t),t._me},t._me=null,t}(),NetPt=function(){function t(){if(this.ani=null,this.m_nLinkOk=0,this.relinkMsg=null,this.isOnOtherLogin=!1,t.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(t,"game.ui.gmainui.NetPt");var e=t.prototype;return e.init=function(){DataTable.m_iSelfUser.AddNoti("m_nNetLinkOk",this,this.ChgLinkChged),this.ani=new Muti2DAniIns,this.ani.createInsFromName("netst_ani"),this.ani.on("click",this,this.onAniClick)},e.onAniClick=function(){this.isOnOtherLogin||DataTable.m_iSelfUser.AutoCheckLink()},e.ChgLinkChged=function(t){this.m_nLinkOk=t,this.SetShow(!this.m_nLinkOk)},e.SetShow=function(t){var e=this;if(t)this.ani||(this.ani=new Muti2DAniIns),this.ani.displayInStage?this.ChgNetSt():(this.ani.SetOkHandler(Handler.create(this,function(){e.ani.scale(DisplayTools.globalScale,DisplayTools.globalScale);var t=MainIcon.getInstance().box_activity.parent.x+MainIcon.getInstance().box_activity.parent.width,i=MainIcon.getInstance().box_uppEff.y+MainIcon.getInstance().box_uppEff.height;e.ani.setPos(t,i+20),MainIcon.getInstance().addChild(e.ani),e.ChgNetSt()})),this.ani.createInsFromName("netst_ani"));else{if(!this.ani)return;this.ani.removeSelf(),this.ChgNetSt()}},e.ChgNetSt=function(){var t;t="wifi",this.m_nLinkOk?(Laya.timer.clear(this,this.OnCheckNoLink),this.relinkMsg&&this.relinkMsg.close()):(t+="bk",Laya.timer.loop(5e3,this,this.OnCheckNoLink,null,!0),GameMain._ins.closeAllView()),this.ani.playAni(t)},e.OnCheckNoLink=function(){this.m_nLinkOk||(GMapView.m_bEnterMap&&(this.relinkMsg||(this.relinkMsg=new MsgBoxType2UI,this.relinkMsg.txt_title.text="",this.relinkMsg.txt_content.text="网络故障,重新连接服务器...",this.relinkMsg.btn_close.visible=!1),this.relinkMsg.displayInStage||this.relinkMsg.showInStage(!0,!0,!0)),this.onAniClick())},e.OnOtherLogin=function(){this.isOnOtherLogin=!0,Laya.timer.clear(this,this.OnCheckNoLink),this.relinkMsg&&this.relinkMsg.close()},t.getInstance=function(){return t.instance||(t.isboo=!1,t.instance=new t,t.isboo=!0),t.instance},t.isboo=!0,t.instance=null,t}(),GLeadSub=function(){function t(){this._m_nCurStep=0,this.m_pRunTask=null,this.m_sCurWaitSig=null,this.m_szLead=null,this.m_szBuyLeadBuild=null,this.pid=null,this.m_pShowCurLead=null}__class(t,"game.ui.lead.GLeadSub");var e=t.prototype;return e.ReStart=function(){this.removeWaitOp(),this.removeShowCurLead(),this.pid.SetArrowStream(""),this.OnLeadQueRun(Handler.create(this,this.OnLeadQueRunBack))},e.Init=function(t){this.m_nCurStep=t,this.OnLeadQueRun(Handler.create(this,this.OnLeadQueRunBack)),DataTable.m_iSelfUser.AddNoti("archchged",this,this.OnAchLeadOpChg)},e.OnLeadQueRunBack=function(){Log1.debug("[OnLeadQueRun]: ")},e.GetLeadKind=function(){return!this.m_szLead||this.m_szLead.length<1?0:this.m_szLead[13]},e.GetLeadBuyBuild=function(){return this.m_szBuyLeadBuild},e.CheckOpAchData=function(t){var e=t,i=StringOp.GetWordM(e,",");if(t=i[0],e=i[1],!t||t.length<1)return null;var n,s;return i=StringOp.GetWordM(t,":"),
n=i[0],t=i[1],"ach"!=n?null:(i=StringOp.GetWordM(t,":"),s=i[0],t=i[1],!t||t.length<1?[Laya.__parseInt(s),1]:[Laya.__parseInt(s),Laya.__parseInt(t)])},e.GetOpNameSz=function(t){var e=t,i=StringOp.GetWordM(e,",");t=i[0],e=i[1];for(var n=null,s="";t.length>0;){var a;i=StringOp.GetWordM(t,":"),a=i[0],t=i[1],(!n||n.length<1)&&(s=t),n||(n=[]),n.push(a)}return[s,n]},e.GetAllOpName=function(t){for(var e=null;t.length>0;){var i,n=StringOp.GetWordM(t,",");i=n[0],t=n[1],e||(e=[]),e.push(i)}return e},e.OnLvChg=function(t){if(this.m_szLead&&!(this.m_szLead.length<1)){if(this.m_szLead[14]>0&&t>=this.m_szLead[14])return void this.DelLead();Log1.debug(1,"[OnLvChg] ",t,this.m_szLead[14]);var e=this.CheckOpAchData(this.m_sCurWaitSig);e=e[1],e.length<3||"sig"!=e[0]||"level"!=e[1]||e[2]>t||gSys.SetSignal("level:"+e[2])}},e.OnAchLeadOpChg=function(){var t=this.CheckOpAchData(this.m_sCurWaitSig);Log1.debug(1,"[OnAchLeadOpChg] ",t,this.m_sCurWaitSig),t&&2==t.length&&DataTable.m_iSelfUser.CheckAchFinish(t[0],t[1])&&gSys.SetSignal(this.m_sCurWaitSig)},e.CheckNeedOp=function(t){Log1.debug(1,"[CheckNeedOp]",t),GMapView.GetBk().event("LeadNeedOp",[t])},e.removeWaitOp=function(){this.m_sCurWaitSig&&(gSys.RemoveSignalWait(this.m_sCurWaitSig,this,this.sigWait),gSys.RemoveSignalWait(this.m_sCurWaitSig,this,this.cacheWait),gSys.RemoveSignalWait(this.m_sCurWaitSig,this,this.achWait)),Laya.timer.clear(this,this.CheckNeedOp),gSys.RemoveSignalWait("closelvupdlg",this,this.closelvupdlgWait)},e.CheckWaitOp=function(t,e){if(Log1.debug(1,"[CheckWaitOp]",t),!t||t.length<1)return 1;var i=this.GetOpNameSz(t);Log1.debug(1,"[CheckWaitOp]",i);var n,s="";if(s=i[0],n=i[1],!n||n.length<2)return e&&e.runWith(1),1;switch(Log1.debug(1,"[CheckWaitOp]",n),n[0]){case"sig":if("level"==n[1]){if(n.length<3)return e&&e.runWith(1),1;if(DataTable.m_iSelfUser.GetLevel()>=Laya.__parseInt(n[2]))return e&&e.runWith(1),1}return this.m_sCurWaitSig=s,gSys.WaitSignal(Handler.create(this,this.sigWait,[e,n]),s),Log1.debug(1,"[CheckWaitOp] WaitSignal [sig]: before: ",s),1;case"cache":return!n||n.length<3?(gSys.Err("leadtab err cache err:  "+t),e&&e.runWith(1),1):(this.m_sCurWaitSig=s,Log1.debug(1,"[CheckNeedOp] wait　２００：",[[n[2],n[1]]]),Laya.timer.once(200,this,this.CheckNeedOp,[[n[2],n[1]]]),gSys.WaitSignal(Handler.create(this,this.cacheWait,[e]),s,0,0),Log1.debug(1,"[CheckWaitOp] WaitSignal [cache]: before: ",s,0,0),"arrive:balloon"==s&&GMC_Truck.m_sArrived&&gSys.SetSignal(s),"arrive:plane"==s&&GMC_Truck.m_sArrived&&gSys.SetSignal(s),1);case"ach":var a=1;return n.length>=3&&(a=Laya.__parseInt(n[2])),DataTable.m_iSelfUser.CheckAchFinish(Laya.__parseInt(n[1]),a)?(e&&e.runWith(1),1):(this.m_sCurWaitSig="ach:"+n[1]+":"+a,gSys.WaitSignal(Handler.create(this,this.achWait,[e]),this.m_sCurWaitSig),Log1.debug(1,"[CheckWaitOp] WaitSignal [ach]: before: ",this.m_sCurWaitSig),1)}return e&&e.runWith(1),1},e.sigWait=function(t,e){return Log1.debug(1,"[CheckWaitOp] WaitSignal [sig]: end: ",this.m_sCurWaitSig),e&&"level"==e[1]?(gSys.WaitSignal(Handler.create(this,this.closelvupdlgWait,[t]),"closelvupdlg",5e3),Log1.debug(1,"[CheckWaitOp] WaitSignal [sig]: before: ","closelvupdlg",5e3),1):(this.m_sCurWaitSig="",t&&t.runWith(1),1)},e.closelvupdlgWait=function(t){return Log1.debug(1,"[CheckWaitOp] WaitSignal [sig]: end: ","closelvupdlg",5e3),this.m_sCurWaitSig="",t&&t.runWith(1),1},e.cacheWait=function(t){return Log1.debug(1,"[CheckWaitOp] WaitSignal [cache]: end: ",this.m_sCurWaitSig,0,0),this.m_sCurWaitSig="",t&&t.runWith(1),1},e.achWait=function(t){return Log1.debug(1,"[CheckWaitOp] WaitSignal [ach]: end: ",this.m_sCurWaitSig),this.m_sCurWaitSig="",t&&t.runWith(1),1},e.CheckIgnoreLead=function(t){Log1.debug(1,"[CheckIgnoreLead] opname=",t);var e=this.GetAllOpName(t);if(!e||e.length<2)return 0;for(var i=1;i<e.length;i++){var n,s=this.GetOpNameSz(e[i]);if(n=s[1],n&&!(n.length<2))switch(n[0]){case"sig":if("level"==n[1]){if(n.length<3)return 1;if(DataTable.m_iSelfUser.GetLevel()>=Laya.__parseInt(n[2]))return 1}break;case"ach":var a=1;if(n.length>=3&&(a=Laya.__parseInt(n[2])),DataTable.m_iSelfUser.CheckAchFinish(Laya.__parseInt(n[1]),a))return 1}}return 0},e.DelLead=function(){this.pid.DelLeadObj(this)},e.OnLeadQueRun=function(t){return this.m_sCurWaitSig="",this.m_szLead=DataTable.m_iLeadTab.Get(this.m_nCurStep),Log1.debug(1,"[OnLeadQueRun] ",this.m_szLead),!this.m_szLead||this.m_szLead.length<1?(Log1.debug(1,"[OnLeadQueRun]无需引导"),void this.OnLeadQueRunStep1(t)):void this.OnLeadQueRunStep2(t)},e.OnLeadQueRunStep1=function(t){this.pid.DelLeadObj(this),Log1.debug(1,"[OnLeadQueRun]无需引导 end"),t&&t.run()},e.OnLeadQueRunStep2=function(t){if(this.m_szLead[14]>0&&DataTable.m_iSelfUser.GetLevel()>=this.m_szLead[14]){if(0!=this.m_szLead[13])return;this.m_nCurStep++;"00000"+this.m_nCurStep;return Log1.debug(1,"[OnLeadQueRun]检查引导是否超过提示等级 --进入下一循环！"),void this.OnLeadQueRun(t)}StatManager.getInstance().m_nCurStep=this.m_nCurStep,this.OnLeadQueRunStep3(t)},e.OnLeadQueRunStep3=function(t){var e=this;return this.m_szLead[2].length>0?(Log1.debug(1,"[OnLeadQueRunStep3]检查引导是否可以开始 "),void this.CheckWaitOp(this.m_szLead[2],Handler.create(this,function(i){e.OnLeadQueRunStep4(t)}))):void this.OnLeadQueRunStep4(t)},e.OnLeadQueRunStep4=function(t){if(this.CheckIgnoreLead(this.m_szLead[2])){if(Log1.debug(1,"[OnLeadQueRunStep4]检查引导可以跳过---1 "),0!=this.m_szLead[13])return DataTable.m_iSelfUser.AddBranchLead(this.m_nCurStep),void(t&&t.run());Log1.debug(1,"[OnLeadQueRunStep4]检查引导可以跳过---2  进入下一次循环！ "),this.m_nCurStep++;"00000"+this.m_nCurStep;return DataTable.m_iSelfUser.SetLeadStep(this.m_nCurStep),void this.OnLeadQueRun(t)}this.ShowCurLead(Handler.create(this,this.OnLeadQueRunStep5,[t]))},e.OnLeadQueRunStep5=function(t){Log1.debug(1,"[OnLeadQueRunStep5]检查引导是否可以结束"),this.CheckWaitOp(this.m_szLead[3],Handler.create(this,this.OnLeadQueRunStep6,[t]))},e.OnLeadQueRunStep6=function(t){if(Log1.debug(1,"[OnLeadQueRunStep6]结束清掉NPC和箭头"),DataTable.m_iNpcManager.ClearLeadNpc(this.m_szLead[4],"",0),this.pid.SetArrowStream(""),0!=this.m_szLead[13])return Log1.debug(1,"[OnLeadQueRunStep6]判断引导类型不为0"),DataTable.m_iSelfUser.AddBranchLead(this.m_nCurStep),void(t&&t.run());this.m_nCurStep++;"00000"+this.m_nCurStep;Log1.debug(1,"[OnLeadQueRunStep6]--设置引导步数"),DataTable.m_iSelfUser.SetLeadStep(this.m_nCurStep),this.OnLeadQueRun(t)},e.MoveCamera=function(t,e){if(t&&2==t.length){var i;i=e?e:GLeadManager.GetMapBuildObj(t[0]);var n=Laya.__parseInt(t[1]);if("地图_热气球"==t[0]){if(i.m_nShow)return;i.OnBack(0)}"地图_回购直升机"==t[0]&&(i=i.LeadPlaneCome()),n>0&&(MainIcon.getInstance().hideAll(),DataTable.m_iSelfView.SetLookAt(i,.08,0,.2),this.UnLookView(n,i))}},e.UnLookView=function(t,e){Laya.timer.once(t,this,this.UnLookViewWait)},e.UnLookViewWait=function(){MainIcon.getInstance().showAll()},e.ShowCurLead=function(t){Log1.debug(1,"[ShowCurLead]"),this.removeShowCurLead(),this.CurLeadTask(t)},e.removeShowCurLead=function(){Laya.timer.clear(this,this.onCurLeadTaskStep2),Laya.timer.clear(this,this.RETRYLEAD),gSys.RemoveSignalWait("mapready",this,this.RETRYLEAD_next)},e.CurLeadTask=function(t){return Log1.debug(1,"[CurLeadTask]",this.m_szLead.length),!this.m_szLead||this.m_szLead.length<1?void(t&&t.run()):this.m_szLead[9]>0?(Log1.debug(1,"[CurLeadTask]  $$$   ---11",this.m_szLead[9]),void this.onCurLeadTaskStep2(t)):void this.onCurLeadTaskStep2(t)},e.onCurLeadTaskStep2=function(t){return!this.m_szLead||this.m_szLead.length<1?(Log1.debug(1,"[onCurLeadTaskStep2]  $$$   ---长度不够--2--"),void(t&&t.run())):this.m_szLead[10]>0?(Log1.debug(1,"[onCurLeadTaskStep2]  $$$   ---22"),void this.onSignalTouchidel(t)):void this.RETRYLEAD(t)},e.onSignalTouchidel=function(t){Log1.debug(1,"[onSignalTouchidel]  $$$   ---22"),this.RETRYLEAD(t)},e.onWaitTouchidel=function(t,e){return e<this.m_szLead[10]?(Log1.debug(1,"[onWaitTouchidel]  $$$   ---33"),void Laya.timer.once(10,this,this.onSignalTouchidel)):void this.RETRYLEAD(t)},e.RETRYLEAD=function(t){if(Log1.debug(1,"[RETRYLEAD]"),MyDiaLog.OnlyUiPop(2)||GMapBuildBase.HaveDisMapItem()||GMapBuyItem.m_bInBuyMode)return void Laya.timer.once(800,this,this.RETRYLEAD,null,!0);this.m_szLead[13]||this.pid.SetArrowStream(this.m_szLead[11],this.m_szLead[12]),3==this.m_szLead[0]&&(MutiWorld.CRI_TWEEN=!0,Tween.to(DisplayItem.m_pBk,{scCen:1},2e3,null,Handler.create(this,cmc=function(){MutiWorld.CRI_TWEEN=!1}))),this.MoveCamera(this.m_szLead[8]);var e,i,n=this.m_szLead[9]<200?1:0;if(e=DataTable.m_iOtherUser,1==this.m_szLead[12])if(e){if(1!=e.GetUID())return void(t&&t.run());i=GMapView.GetBk(),n=0}else i=GMapView.GetBk();else{if(e){if(GMapView.m_bEnterMap){var s={};s.ext={},s.ext.dec="开始弹出引导",s.ext.act=2.74,StatManager.getInstance().send(s),this.RETRYLEAD_next(t,!0,e,n,i)}else{var a={};a.ext={},a.ext.dec="等待MapReady弹出引导",a.ext.act=2.75,StatManager.getInstance().send(a),gSys.WaitSignal(Handler.create(this,this.RETRYLEAD_next,[t,!0,e,n,i]),"mapready")}return}i=GMapView.GetBk()}this.RETRYLEAD_next(t,!1,e,n,i)},e.RETRYLEAD_next=function(t,e,i,n,s){e&&(s=GMapView.GetBk());var a;switch(a=this.m_szLead[6],this.m_szLead[7].length>0&&(a+=this.m_szLead[1].length<1?"[引导-"+this.m_szLead[7]+"]":"["+this.m_szLead[1]+"-"+this.m_szLead[7]+"]"),this.m_szLead[5]){case 5:if(i=DataTable.m_iNpcManager.CheckLeadNpc(this.m_szLead[4],""+(this.m_szLead[6]+"-"+this.m_szLead[7]),this.m_szLead[5],n,s),!i)return void(t&&t.run());if(!this.m_szLead[8]||2!=this.m_szLead[8].length)return void(t&&t.run());this.MoveCamera(this.m_szLead[8]);break;default:if(i=DataTable.m_iNpcManager.CheckLeadNpc(this.m_szLead[4],a,this.m_szLead[5],n,s,54==this.m_szLead[0]?1:0),!i)return void(t&&t.run());if(!this.m_szLead[8]||2!=this.m_szLead[8].length)return this.MoveCamera(["地图_引导_稻草人",1e3]),void(t&&t.run());this.MoveCamera(this.m_szLead[8])}t&&t.run()},__getset(0,e,"m_nCurStep",function(){return this._m_nCurStep},function(t){this._m_nCurStep=t,(11==t||12==t||13==t||14==t||15==t)&&(this._m_nCurStep=16),(47==t||48==t||49==t)&&(this._m_nCurStep=50)}),t}(),StatManager=function(){function t(){this.m_nCurStep=0,this._httprequest=null,this._errHttpRe=null,this._errUrl=null}__class(t,"game.ui.lead.StatManager");var e=t.prototype;return e.send=function(t){t.act=game.ui.lead.StatManager.getInstance().m_nCurStep,t.channelId=layaSystem.channelId,t.gameId=10037,t.serverId=1,t.uid=layaSystem.uid,t.ct=(new Date).getTime(),t.ext.os=layaSystem.osSystem,t.ext.webgl=layaSystem.isWebGl,t.ext.browser=layaSystem.browser,t.ext.websocket=layaSystem.isWebSocket,t.ext.weiXin=layaSystem.isWeiXin,this.requestHandler(t)},e.requestHandler=function(t){var e={},i="";e.gameinfo=encodeURIComponent(JSON.stringify(t));for(var n in e)i+=n+"="+e[n]+"&";i=i.substring(0,i.length-1),this._httprequest=new HttpRequest;var s,a=window.location.hostname;s="mhjy.layabox.com"==a?"http://log.lmzy.layabox.com/log/collect":"http://log.lmzy.layabox.com/log/testcollect",this._httprequest.send(s,i,"post","text",["Content-Type","application/x-www-form-urlencoded"]),this._httprequest.on("complete",this,this.onRequestComplete),this._httprequest.on("error",this,this.onRequestError)},e.onRequestError=function(){this._httprequest.off("complete",this,this.onRequestComplete),this._httprequest.off("error",this,this.onRequestError)},e.onRequestComplete=function(){this._httprequest.off("complete",this,this.onRequestComplete),this._httprequest.off("error",this,this.onRequestError)},e.sendError=function(t){if(DataTable.m_iSelfUser.m_szData&&DataTable.m_iSelfUser.GetUID()){var e={};e.uid=DataTable.m_iSelfUser.GetUID(),e.act="Error收集",e.ct=(new Date).getTime(),e.ext=t,e.version=GameMain._ins.VERSION,this.requestError(e)}},e.requestError=function(t){var e=window.location.hostname;"mhjy.layabox.com"==e||(this._errUrl="http://lmzy-log-collect.hong.chen.inner.layabox.com/log/testEngineErro");var i={},n="";i.gameinfo=encodeURIComponent(JSON.stringify(t));for(var s in i)n+=s+"="+i[s]+"&";n=n.substring(0,n.length-1),this._errHttpRe=new HttpRequest,this._errHttpRe.on("complete",this,this.onErrComplete),this._errHttpRe.on("error",this,this.onErrError),this._errHttpRe.send(this._errUrl,n,"post","text",["Content-Type","application/x-www-form-urlencoded"])},e.onErrComplete=function(t){this._errHttpRe.off("complete",this,this.onErrComplete),this._errHttpRe.off("error",this,this.onErrError)},e.onErrError=function(t){this._errHttpRe.off("complete",this,this.onErrComplete),this._errHttpRe.off("error",this,this.onErrError)},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t._instance=null,t}(),GMapOrnament=function(){function t(){}return __class(t,"game.ui.ornament.totem.GMapOrnament"),t.PutOrnament=function(e,i,n){DisplayItem.SafeDelObj(t.s_pPutBuild);var s=3;SysID.IsDTZSJZID(i)&&(s=2),SysID.IsQJJZID(i)&&(s=4);var a,r;switch(s){case 2:t.s_pPutBuild=new GBagOrnament,a=DataTable.m_iBuildTab.Get(i),r=DisplayItem.m_pBk.getFreePos(a[5],a[6]),t.s_pPutBuild.Init(i,r.x,r.y),t.s_pPutBuild.SetSubData(n,0,0),DisplayItem.m_pBk.SelObjToMove(t.s_pPutBuild.m_disObj);break;default:t.s_pPutBuild=new GSpeBagOrnament,a=DataTable.m_iBuildTab.Get(i),r=DisplayItem.m_pBk.getFreePos(a[5],a[6]),t.s_pPutBuild.InitMe(i,r.x,r.y,e,s),t.s_pPutBuild.SetSubData(n,0,0),DisplayItem.m_pBk.SelObjToMove(t.s_pPutBuild.m_disObj)}},t.s_pPutBuild=null,t}(),TimeCalStyle=function(){function t(){}return __class(t,"game.ui.TimeCalStyle"),t.GetLongTimeText=function(t,e){void 0===e&&(e=0);var i="",n=Math.floor(t/86400);if(t%=86400,n>0&&(i+=""+n+"天",e))return i;var s=Math.floor(t/3600);if(t%=3600,s>0&&(i+=""+s+"小时",e))return i;var a=Math.floor(t/60);return t%=60,a>0&&(i+=""+a+"分",e)?i:i+=""+t+"秒"},t.isleap=function(t){return t%4==0&&(t%100!=0||t%400==0)},t.GetDateBySec=function(e,i){void 0===i&&(i=8);var n,s=Math.floor(e/3600);s+=i;var a=0,r=Math.floor(s/24),h=0;for(a=2013;3e3>a&&(h=t.isleap(a)?366:365,!(h>r));a++)r-=h;var o;o=t.isleap(a)?[0,31,60,91,121,152,182,213,244,274,305,335,366]:[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var l=0;12>l;l++)if(r<o[l+1]){r-=o[l];break}return n=new Date(a,l,r+1,s%24,e%3600/60,e%60)},t}(),GameMain=function(){function t(){this.VERSION="2016-4-21-18:10",this.signMark=0,this.num=1,this.m_mutiWorld=null,this.m_pMap=null,this._oriX=0,this._oriY=0,this.offX=0,this.offY=0,this.maxOffset=50,this.m_gameUI=null,this.m_socket=null,this.lastDist=0,this._stageX=NaN,this._stageY=NaN,this.showLand=!1,this.closeAni=!1,this.optimizeAni=!1,this.isLoadingBg=!1,this.createUser=null,this.opSta=new gameOpState,t._ins=this,SoundManager.autoStopMusic=!0,this.init()}__class(t,"GameMain");var e=t.prototype;return e.onResize=function(){var t=Laya.stage.width/1334,e=Laya.stage.height/750;DisplayTools.setGlobalScale(t,e),MainIcon.isInit&&MainIcon.getInstance().initChildScale(),Loding.getInstance().displayInStage&&Loding.getInstance().pos(Laya.stage.width/2,Laya.stage.height/2)},e.init=function(){var t={};t.ext={},t.ext.dec="初始化载入游戏加载成功",t.ext.act=1.2,StatManager.getInstance().send(t),this.initGame(),this.initialize()},e.initialize=function(){},e.initGame=function(){var e=this;gSys.InitTimer(),Laya.stage.on("resize",this,this.onResize),this.onResize(),t.container=new Sprite,t.container.mouseEnabled=!0,DisplayTools.addTarget(t.container,Laya.stage,{width:Laya.stage.width,height:Laya.stage.height}),Laya.stage.on("keydown",this,this.keyDown),ErrorDef.addmesage(),t.random6&&t.random6.length||(t.random6=gSys.getRandStr(6));var i="files.fst?"+t.random6;UpdateMgr.Instance().LoadFile(i,Handler.create(this,sload=function(){e.addLoading(),Laya.loader.load([{url:"assets/loading.json",type:"atlas"},{url:"ui/img/loadingBg.jpg",type:"image"},{url:Assets.reuseUrl,type:"atlas"}],Handler.create(e,e.onComplete))}),null)},e.addLoading=function(){Loding.getInstance().addEvent(),DisplayTools.addTarget(Loding.getInstance(),t.container,{x:Laya.stage.width/2,y:Laya.stage.height/2})},e.removeLoading=function(){Loding.getInstance().removeSelf()},e.onComplete=function(){var e=this,i={};i.ext={},i.ext.dec="添加显示Loading界面",i.ext.act=1.3,StatManager.getInstance().send(i);var n=ListData.getIns();n.loadData(Handler.create(this,loadvar=function(){var t=new GVar;GVar.han=Handler.create(e,e.onLoadComplete1),t.getVarFromFile("gvar/res_unzip.var",Handler.create(e,e.onGvarComplete),new Handler(e,e.onProgress))})),this.removeLoading(),LoadingView.getInstance().currentValue=this.num,LoadingView.getInstance().LabelText="登录服务器...",DisplayTools.addTarget(LoadingView.getInstance(),t.container,{width:Laya.stage.width,height:Laya.stage.height}),this.joinSocket()},e.joinSocket=function(){this.m_socket=this.m_socket||new WSocket,this.m_socket.wConnect(),this.m_socket.on("open",this,this.onConnectOk),LoadingView.getInstance().fun=Handler.create(this,this.onloadAllHandle),Laya.timer.frameLoop(1,this,this.onCurrentTime),this.m_socket.on("close",this,this.onClose)},e.onloadAllHandle=function(){t.container.addChild(GMapView.GetBk()),t.container.addChild(this.m_gameUI)},e.onClose=function(){Laya.timer.clear(this,this.onCurrentTime)},e.onConnectOk=function(){LoadingView.getInstance().LabelText="服务器连接成功...",Laya.timer.clear(this,this.onCurrentTime),LoadingView.getInstance().currentValue=5,this.onConnectHandler(),Log1.info("服务器连接成功..............................")},e.onConnectHandler=function(){return t.m_bGLoaded?void 0:(t.m_bGLoaded=!0,LoadingView.getInstance().LabelText="获取用户数据...",void gSys.SetSignal("consersuc"))},e.onProgress=function(t){LoadingView.getInstance().currentValue=100*t*.3+5,Log1.info("加载进度..............................",100*t*.3+5)},e.onGvarComplete=function(){Log1.info("本地数据表加载成功.............................."),Laya.loader.load("3d/layaImage.json",null,null,"atlas"),LoadingView.getInstance().currentValue=35,this.onLoadComplete()},e.onCurrentTime=function(){this.num>=99||(this.num+=.1,LoadingView.getInstance().currentValue=5*this.num/100)},e.onLoadComplete=function(){Log1.info("加载成功。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。");var t={};t.ext={},t.ext.dec="移除Loading界面",t.ext.act=1.4,StatManager.getInstance().send(t),this.m_pMap=new GMapView,DataTable.m_iSelfView=this.m_pMap},e.onLoadComplete1=function(){this.m_gameUI=new GameUI,t.m_bGLoaded?DataTable.initDataTable(function(){}):gSys.WaitSignal(Handler.create(this,dtableAgui=function(){DataTable.initDataTable(function(){})}),"consersuc")},e.onMove=function(){this._oriX=Laya.stage.mouseX,this._oriY=Laya.stage.mouseY,Laya.stage.on("mousemove",this,this.mouseMove),Laya.stage.once("mouseup",this,this.mouseUp)},e.getDis=function(t,e){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2))},e.getScaleFactor=function(t,e){var i=this.getDis(t,e);if(0==this.lastDist)return this.lastDist=i,1;var n=i/this.lastDist;return this.lastDist=i,n},e.mouseMove=function(e){if(e&&null!=t._moveTarget&&this.opSta.curSta==gameOpState.STA_NORMAL){var i=t._moveTarget.parent,n=e.nativeEvent.touches;if(n&&2==n.length){var s=n[0],a=n[1],r=i.scaleX*this.getScaleFactor(s,a),h=Math.floor((s.clientX+a.clientX)/2),o=Math.floor((s.clientY+a.clientY)/2);isNaN(h)||isNaN(o)?(console.log("TC1:"+s.clientX+","+s.mouseY+"   TC2:"+a.mouseX+","+a.mouseY),console.log("Scale value:"+r+"  X,YCenter:"+h+","+o)):(t._scaleMap=!0,i.stopDrag(),i.scaleWithCen(r,h,o))}}},e.mouseUp=function(t){Laya.stage.off("mousemove",this,this.mouseMove),this.lastDist=0},e.closeAllView=function(){this.m_gameUI.disposeIcon(),MyDiaLog.closeAll()},e.keyDown=function(t){var e=GMapView.GetBk();73==t.keyCode&&e.scaleWithCen(.98*e.scaleX),80==t.keyCode&&e.scaleWithCen(1/.98*e.scaleX),88==t.keyCode},__getset(0,e,"GmView",function(){return this.m_pMap}),t.$width=1334,t.$height=750,t.container=null,t._moveTarget=null,t._rTCSSP=1,t._scaleMap=!1,t._ins=null,t.random6=null,t.m_bGLoaded=!1,t}(),GameMarket=function(){function t(){}return __class(t,"GameMarket"),t.onBuy=function(e,i,n,s,a,r){if(void 0===r&&(r=1),WSocket.normalLog)return void gSys.GameMsg("登录渠道错误，请联系网管或重新登录！",!1);var h=new Date;t.result=h.getFullYear()+t.fillChar(h.getMonth()+1+"","0",2,"left")+t.fillChar(h.getDate()+"","0",2,"left")+t.fillChar(h.getHours()+"","0",2,"left")+t.fillChar(h.getMinutes()+"","0",2,"left")+t.fillChar(h.getSeconds()+"","0",2,"left")+t.fillChar(h.getMilliseconds()+"","0",3,"left")+t.fillChar(Math.ceil(1e5*Math.random())+"","0",6,"left");var o={order_id:t.result,goods_name:e.replace(/\r|\n/g,""),amount:i,goods_desc:e,serverId:r,params:n+"_"+a+"_"+t.spFname+"_"+s+"_"+(t.isIOS?1:0)},l=JSON.stringify(o);LayaBoxMarket.getInstance().recharge(l,t.callBack)},t.fillChar=function(t,e,i,n,s){if(void 0===s&&(s=!1),t.length>i)return s?t.substr(0,i):t;if(t.length==i)return t;for(;t.length<i;)t="left"==n?e+t:t+e;return t},t.callBack=function(t){},t.share=function(){var e={title:"梦幻家园",link:Browser.window.location.href,desc:GAppShell.m_i_Shell.GetShareMsg(),imgsrc:Assets.shareUrl(),imgtitle:"梦幻家园",custxt:"输入想对小伙伴说的话"};t.market&&t.market.enterShareAndFeed(JSON.stringify(e),function(t){var e=JSON.parse(t);0==e.result||(-1==e.result?gSys.GameMsg("分享失败",!1,"分享提示"):-2==e.result?gSys.GameMsg("分享失败",!1,"分享提示"):-3==e.result&&gSys.GameMsg("分享失败",!1,"分享提示"))})},t.hadLogin=function(){return t.userInfo.userId?!0:!1},t.result="123476548772",t.shareUrl="http://lmzy.layabox.com/share/",t.openKey="58ea441d3f17fe9febe8b0e0de7a87e7",t.openID="10093",t.userid="",t.userInfo={},t.orderDatas=null,t.orderDict={},t.spFname="",t.isIOS=!1,t.isShare=!1,t.black=null,t.market=null,__static(t,["SP_DATA",function(){return this.SP_DATA={openId:"10093",openKey:"58ea441d3f17fe9febe8b0e0de7a87e7"}}]),t}(),Main=function(){function t(){}return __class(t,"Main"),t.initGame=function(){Laya.alertGlobalError=!0,Font.defaultFamily="simhei",gSys.staticTree=!0,gSys.staticPlant=!0,gSys.staticCloud=!0,Laya.loader.retryNum=4;var e={};if(AtlasManager.enable(),WebGL.enable()){e.ext={},e.ext.dec="WebGL支持",e.ext.act=1.18,StatManager.getInstance().send(e);var i=NaN,n=NaN;i=Browser.width,n=Browser.height,Laya.init(1136,640),Laya.stage.sizeMode="fullwidth",Laya.stage.useHDRendering=!1,ResourceManager.currentResourceManager.autoRelease=!0,ResourceManager.currentResourceManager.autoReleaseMaxSize=104857600,Browser.onAndriod,Laya.stage.bgColor="#000000",Laya.stage.screenMode="horizontal",t.checkShowStat();new GameMain;t.addFinish()}else e.ext={},e.ext.dec="WebGL不支持",e.ext.act=1.19,StatManager.getInstance().send(e),alert("您当前的浏览器环境不支持WebGL,将打开WebGL测试页面,请耐心等待"),window.location.href="http://get.webgl.org"},t.addFinish=function(){(Browser.onWeiXin||Browser.onMQQBrowser)&&WebGL.isExperimentalWebgl()&&WebGL.addRenderFinish()},t.checkShowStat=function(){"1"==LocalStorage.getItem("stat")&&Stat.show(10,10)},t}(),BagData=function(){function t(){this.bagkind=0,this.baglevel=0,this.itemsz=null}__class(t,"net.BagData");var e=t.prototype;return e.parseData=function(t){if(this.bagkind=t[0],this.baglevel=t[1],null!=t[2]){var e=t[2],i=e.length;this.itemsz=[];for(var n=0;i>n;n++)"string"==typeof e[n][0]&&(e[n][0]=Laya.__parseInt(e[n][0]),Log1.logDebug="parseData 背包数据错误，id为字符串："+e[n][0]),this.itemsz.push([e[n][0],e[n][1]])}},__getset(0,e,"itemszNew",function(){var t=[];if(!this.itemsz)return t;for(var e=0,i=this.itemsz.length;i>e;e++)t.push([this.itemsz[e][0],this.itemsz[e][1]]);return t}),t}(),BagItem1=function(){function t(t,e){this.itemid=0,this.num=0,void 0===t&&(t=0),void 0===e&&(e=0)}return __class(t,"net.BagItem",null,"BagItem1"),t}(),DataTable=function(){function t(){}return __class(t,"net.DataTable"),t.initSelfUser=function(e){0==t.m_bInit?t.selfUserD=e:(t.m_iSelfUser.InitData(e),GameUI.completeLoad?MainIcon.getInstance().init():Laya.timer.loop(100,t,net.DataTable.mainIconCaller))},t.mainIconCaller=function(){GameUI.completeLoad&&(Laya.timer.clear(t,net.DataTable.mainIconCaller),MainIcon.getInstance().init())},t.initDT1=function(){t.m_iBuildTab=new GResTab_Build,t.m_iBuildTab.OnDataReady(),t.m_iSysBuildTab=new GResTab_SysBuild,t.m_iSysBuildTab.OnDataReady()},t.initDT2=function(){t.m_iUserLevelTab=new GResTab_UserLevel,t.m_iUserLevelTab.OnDataReady(),t.m_iItemTab=new GResTab_Item,t.m_iItemTab.OnDataReady(),t.m_iPetTab=new GResTab_Pet,t.m_iPetTab.OnDataReady()},t.initDT3=function(){t.m_iPetHuntTab=new GResTab_PetHunt,t.m_iPetHuntTab.OnDataReady(),t.m_iBuyBack=new GResTab_BuyBack,t.m_iBuyBack.OnDataReady(),t.m_iBoxTab=new GResTab_Box,t.m_iBoxTab.OnDataReady(),t.m_iFieldTab=new GResTab_Feild,t.m_iFieldTab.OnDataReady(),t.m_iTreeTab=new GResTab_Tree,t.m_iTreeTab.OnDataReady(),t.m_iAchievementTab=new GResTab_Achievement,t.m_iAchievementTab.OnDataReady()},t.initDT31=function(){t.m_iMacFormulTab=new GResTab_MacFormul,t.m_iMacFormulTab.OnDataReady(),t.m_iSignRewardTab=new GResTab_SignReward,t.m_iSignRewardTab.OnDataReady(),t.m_iGoldCoinsTab=new GResTab_GoldCoins,t.m_iStartOrderTab=new GResTab_StartOrder,t.m_iStartOrderTab.OnDataReady(),t.m_iActNpcOrderTab=new GResTab_ActNpcOrder,t.m_iActNpcOrderTab.OnDataReady(),t.m_iActivityTab=new GResTab_Activity,t.m_iActivityTab.OnDataReady(),t.m_iBoatExTab=new GResTab_BoatEx,t.m_iBoatExTab.OnDataReady(),t.m_iWharfVisuTab=new GResTab_WharfVisu,t.m_iWharfVisuTab.OnDataReady(),t.m_iQuestTab=new GResTab_Quest,t.m_iQuestTab.OnDataReady(),t.m_iOnlineGiftTab=new GResTab_OnlineGift,t.m_iOnlineGiftTab.OnDataReady(),t.m_iNpcTab=new GResTab_NPC,t.m_iNpcTab.OnDataReady(),t.m_iLeadTab=new GResTab_Lead,t.m_iLeadTab.OnDataReady()},t.initDT32=function(){t.m_iSoundTab=new GResTab_Sound,t.m_iSoundTab.OnDataReady(),t.m_iTerrainAvataTab=new GResTab_TerrainAvatar,t.m_iTerrainAvataTab.OnDataReady(),t.m_iNpcNickdictTab=new GResTab_NpcNickdict,t.m_iNpcNickdictTab.OnDataReady(),t.m_iSysHead=new GResTab_SysHead,t.m_iSysHead.OnDataReady(),t.m_iDailyRndTab=new GResTab_DailyRnd,t.m_iDailyRndTab.OnDataReady(),t.m_iSysMessage=new GResTab_SysMessage,t.m_iSysMessage.OnDataReady(),t.m_iEmoFace=new GResTab_EmoFace,t.m_iEmoFace.OnDataReady(),t.m_iMaskCloudTab=new GResTab_MaskCloud,t.m_iMaskCloudTab.OnDataReady(),t.m_iRankAward=new GResTab_RankAward,t.m_iRankAward.OnDataReady()},t.initDT4=function(){t.m_iBuffTab=new GResTab_BuffTab,t.m_iBuffTab.OnDataReady(),t.m_iBuffGroupTab=new GResTab_BuffGroup,t.m_iBuffGroupTab.OnDataReady(),t.m_iGameDef=new GResTab_GameDef,t.m_iGameDef.OnDataReady(),t.m_iWonderKind=new GResTab_WonderKind,t.m_iWonderKind.OnDataReady(),t.Accident=new ClnAccCal,t.m_iSelfFrd=t.m_iSelfFrd||GFriendBar.getins(),t.m_iFriendBar=t.m_iFriendBar||GFriendBar.getins()},t.initDT5=function(){t.m_bInit=!0,null!=t.selfUserD&&(t.initSelfUser(t.selfUserD),t.selfUserD=null),null!=t.linkHandler&&(t.linkHandler.run(),t.linkHandler.clear(),t.linkHandler=null),inbox.InitEmo();var e={};e.ext={},e.ext.dec="完成DataTable初始化",e.ext.act=1.8,StatManager.getInstance().send(e)},t.initDataTable=function(e){var i={};i.ext={},i.ext.dec="开始初始化DataTable",i.ext.act=1.7,StatManager.getInstance().send(i),t.delayFn=e,null!=t.delayFn&&(t.delayFn(),t.delayFn=null),t.userlvl=new Itemtab(GVar.tableList.userlvl),t.itemtab=new Itemtab(GVar.tableList.itemtab),t.buildtab=new Itemtab(GVar.tableList.buildtab),t.sysbuildtab=new Itemtab(GVar.tableList.sysbuildtab),t.macformultab=new Itemtab(GVar.tableList.macformultab),t.accrptab=new Itemtab(GVar.tableList.accrp),t.boxtab=new Itemtab(GVar.tableList.boxtab),t.soundtab=new Itemtab(GVar.tableList.soundtab),t.starttab=new Itemtab(GVar.tableList.startordertab),t.gamedeftab=new Itemtab(GVar.tableList.hddef),t.npctab=new Itemtab(GVar.tableList.npctab),t.npcmarkettab=new Itemtab(GVar.tableList.npcmarkettab),t.buybacktab=new Itemtab(GVar.tableList.buybacktab),t.leadtab=new Itemtab(GVar.tableList.leadtab),t.gmmarkettab=new Itemtab(GVar.tableList.gmmarkettab),t.dailyrndtab=new Itemtab(GVar.tableList.dailyrndtab),t.dollmactab=new Itemtab(GVar.tableList.dollmactab),t.wdkindtab=new Itemtab(GVar.tableList.wdkindtab),t.achievementtab=new Itemtab(GVar.tableList.achievementtab),t.pettab=new Itemtab(GVar.tableList.pettab),t.pethunttab=new Itemtab(GVar.tableList.pethunttab),t.quest=new Itemtab(GVar.tableList.quest),t.sysmessage=new Itemtab(GVar.tableList.sysmessage),t.emoface=new Itemtab(GVar.tableList.emoface),t.maskcloud=new Itemtab(GVar.tableList.maskcloud),t.itemexchg=new Itemtab(GVar.tableList.itemexchg),t.signreward=new Itemtab(GVar.tableList.signreward),t.activitytab=new Itemtab(GVar.tableList.activitytab),t.onlinegifttab=new Itemtab(GVar.tableList.onlinegifttab),t.goldcoinstab=new Itemtab(GVar.tableList.goldcoinstab),t.tab_rankaward=new Itemtab(GVar.tableList.tab_rankaward),t.actnpcorder=new Itemtab(GVar.tableList.actnpcorder),t.terrainavatar=new Itemtab(GVar.tableList.terrainavatar),t.avatarpack=new Itemtab(GVar.tableList.avatarpack),t.feild=new Itemtab(GVar.tableList.feild),t.treetab=new Itemtab(GVar.tableList.treetab),t.animaltab=new Itemtab(GVar.tableList.animaltab),t.BoatExTab=new Itemtab(GVar.tableList.boatex),t.WharfVisuTab=new Itemtab(GVar.tableList.wharfvisu),t.NpcNickdictTab=new Itemtab(GVar.tableList.npcnickdicttab),t.SysHead=new Itemtab(GVar.tableList.syshead),t.BuffTab=new Itemtab(GVar.tableList.buff),t.BuffGroupTab=new Itemtab(GVar.tableList.buffgroup);var n=0;Laya.timer.frameOnce(n++,null,t.initDT1),Laya.timer.frameOnce(n++,null,t.initDT2),Laya.timer.frameOnce(n++,null,t.initDT3),Laya.timer.frameOnce(n++,null,t.initDT31),Laya.timer.frameOnce(n++,null,t.initDT32),Laya.timer.frameOnce(n++,null,t.initDT4),Laya.timer.frameOnce(n++,null,t.initDT5)},t.getSkin=function(t){try{return GVar.texDic[t]}catch(e){throw new Error("The "+t+" is not in GVar.texDic")}return""},t.RegInterface=function(e,i){t.DeskTop[i]=e},t.DelInterface=function(e,i){delete t.DeskTop[i]},t.FindInterface=function(e){return t.DeskTop[e]?t.DeskTop[e]:null},t.userlvl=null,t.itemtab=null,t.buildtab=null,t.sysbuildtab=null,t.macformultab=null,t.feild=null,t.treetab=null,t.animaltab=null,t.accrptab=null,t.boxtab=null,t.soundtab=null,t.starttab=null,t.gamedeftab=null,t.npctab=null,t.npcmarkettab=null,t.buybacktab=null,t.leadtab=null,t.gmmarkettab=null,t.dailyrndtab=null,t.dollmactab=null,t.wdkindtab=null,t.achievementtab=null,t.pettab=null,t.pethunttab=null,t.quest=null,t.sysmessage=null,t.emoface=null,t.maskcloud=null,t.itemexchg=null,t.signreward=null,t.activitytab=null,t.onlinegifttab=null,t.goldcoinstab=null,t.tab_rankaward=null,t.actnpcorder=null,t.terrainavatar=null,t.avatarpack=null,t.BoatExTab=null,t.WharfVisuTab=null,t.NpcNickdictTab=null,t.SysHead=null,t.BuffTab=null,t.BuffGroupTab=null,t.m_bInit=!1,t.m_iBuildTab=null,t.m_iWonderKind=null,t.m_iSysBuildTab=null,t.m_iUserLevelTab=null,t.m_iItemTab=null,t.m_iFieldTab=null,t.m_iPetTab=null,t.m_iPetHuntTab=null,t.m_iBuyBack=null,t.m_iTreeTab=null,t.m_iBoxTab=null,t.m_iAchievementTab=null,t.m_iMacFormulTab=null,t.m_iSignRewardTab=null,t.m_iGoldCoinsTab=null,t.m_iStartOrderTab=null,t.m_iActNpcOrderTab=null,t.m_iActivityTab=null,t.m_iBoatExTab=null,t.m_iWharfVisuTab=null,t.m_iSelfFrd=null,t.m_iFriendBar=null,t.m_iQuestTab=null,t.m_iOnlineGiftTab=null,t.m_iNpcTab=null,t.m_iLeadTab=null,t.m_iSoundTab=null,t.m_iTerrainAvataTab=null,t.m_iNpcNickdictTab=null,t.m_iSysHead=null,t.m_iBuffTab=null,t.m_iBuffGroupTab=null,t.m_iDailyRndTab=null,t.m_iRankAward=null,t.m_iGameDef=null,t.m_iSysMessage=null,t.m_iEmoFace=null,t.m_iMaskCloudTab=null,t.m_iSelfView=null,t.selfUserD=null,t.linkHandler=null,t.m_iOtherView=null,t.m_iNpcManager=null,t.m_iNpcDlg=null,t.m_iLeadManager=null,t.m_iScarecrow=null,t.m_iWholeEditMovePop=null,t.m_i_QuestInfo=null,t.m_i_Wharf=null,t.m_i_WharfMT=null,t.m_i_WharfDlg=null,t.m_iTerminDlg=null,t.m_itree=null,t.Accident=null,t.m_i_RepayLightBtn=null,t.delayFn=null,__static(t,["m_iSelfUser",function(){return this.m_iSelfUser=new ClnDataCal},"m_iOtherUser",function(){return this.m_iOtherUser=new OtherUserData},"DeskTop",function(){return this.DeskTop=new Object}]),t}(),MapItem=function(){function t(){this.itemid=0,this.x=0,this.y=0,this.forword=0,this.data=null,this.data=[]}__class(t,"net.MapItem");var e=t.prototype;return e.parseData=function(t){this.itemid=t[0],this.x=t[1],this.y=t[2],this.forword=t[3],this.data=t[4]},e.copyfrom=function(t){if(this.itemid=t.itemid,this.x=t.x,this.y=t.y,this.forword=t.forword,null==t.data)this.data=null;else if("number"==typeof t.data&&Math.floor(t.data)==t.data)this.data=t.data;else{
this.data=[];for(var e=0,i=t.data.length;i>e;e++)if(t.data[e]instanceof Array){var n=t.data[e].length;this.data.push([]);for(var s=0;n>s;s++)this.data[e].push(t.data[e][s])}else this.data.push(t.data[e])}},t}(),OtherUserData=function(){function t(){this.uid=0,this.power=0,this.nick="",this.src="",this.visu=0,this.level=0,this.evalue=0,this.vip=0,this.mapdata=null,this.helpstatus=0,this.decoration=[],this.tradept=0,this.tradecombo=0,this.friendpt=0,this.diybuildcount=0,this.svrname=null,this._isShowRoadShop=!1,this._m_szSysData_LBT=null,this.exp=new Int64Ref,this.sysdata=new Object}__class(t,"net.OtherUserData");var e=t.prototype;return e.parseData=function(t){this.uid=t[0]||0,this.power=t[1]||0,this.nick=t[2]||"",this.src=t[3]||"",this.visu=t[4]||0,this.level=t[5]||0,this.exp.uint64=t[6]||0,this.evalue=t[7]||0,this.vip=t[8]||0;var e=t[9],i=e.length;this.mapdata=new Array(i);for(var n=0;i>n;n++)this.mapdata[n]=new MapItem,this.mapdata[n].parseData(e[n]);for(this.sysdata=new Object,e=t[10],i=e.length,n=0;i>n;n++)this.sysdata[e[n][0]]=e[n][1];this.helpstatus=t[11]||0,this.decoration=t[12]||[],this.tradept=t[13]||0,this.tradecombo=t[14]||0,this.friendpt=t[15]||0,this.diybuildcount=t[16]||0},e.destory=function(){this.uid=0,this.power=0,this.nick="",this.src="",this.visu=0,this.level=0,this.exp.uint64=0,this.evalue=0,this.vip=0,this.mapdata=null,this.sysdata=[],this.helpstatus=0,this.decoration=[],this.tradept=0,this.tradecombo=0,this.friendpt=0,this.diybuildcount=0,this.m_szSysData_LBT=[],GMapView.m_nSelf=1},e.GetUID=function(){return this.uid},e.GetSvrName=function(){return this.svrname},e.GetNick=function(){return this.nick},e.GetLevel=function(){return this.level},e.GetEvalue=function(){return this.evalue},e.applyOtherData=function(t,e,i){var n=this;return void 0===i&&(i=!1),this._isShowRoadShop=i,DataTable.m_iSelfUser.m_nNetLinkOk?t?this.GetUID()&&this.GetUID()==t?void GFlyItemIcon.FlyText("您已经在该玩家庄园"):(1>t||1==t&&(DataTable.m_iSelfUser.LogGameTag("visit_1",t),DataTable.m_iSelfUser.CallSvr("QuestVisit",t)),void csvr.call(PubDef.YHFWM(t),"GetUserOtherSvrName",[t,DataTable.m_iSelfUser.GetUID()],Handler.create(this,function(t){console.log("返回的其他玩家的数据为===",t),n.Load(t,e)}),null,0)):(GFlyItemIcon.FlyText("无效的玩家"),void(e&&e.runWith([]))):(gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),void(e&&e.runWith([])))},e.Load=function(t,e){var i=this;this.svrname=t;var n=[1885,1442];this._isShowRoadShop||(Laya.stage.addChild(LoadingView.getInstance()),LoadingView.getInstance().LabelText="努力加载中......",LoadingView.getInstance().currentValue=99),Log1.debug(5,"luohuantao--申请别人家的数据===",t,"GetOtherData",[DataTable.m_iSelfUser.GetUID(),DataTable.m_iSelfUser.GetCurPlayerModelID(),n]),csvr.call(t,"GetOtherData",[DataTable.m_iSelfUser.GetUID(),DataTable.m_iSelfUser.GetCurPlayerModelID(),n],Handler.create(this,function(t){t.length>=3&&t.push(DataTable.m_iSelfUser.GetUserMaskCloud()),MainIcon.getInstance().removeBoxHide(),i.parseData(t[0]),i.Init(this.sysdata,t[0],t[1],t[2],t[3],t[4],t[6]),e&&e.runWith([t]),i._isShowRoadShop||(LoadingView.getInstance().currentValue=100,Laya.timer.once(300,this,removeLv=function(){LoadingView.getInstance().removeSelf()}))}),null,0)},e.Init=function(t,e,i,n,s,a,r){var h=e,o=0;r&&r.length&&0==r[0][0]&&(o=r[0][1]),GameMain._ins.GmView.createOtherMapView([this.mapdata,this.sysdata,0,this.uid,s,a,null,o]);var l=DataTable.m_iFriendBar.GetFriend(h[0]);l&&l[6]!=h[11]&&DataTable.m_iSelfUser.VerifyFriendStatus(h[0]);for(var u,c=DataTable.sysbuildtab.itemArr,_=0,m=c.length;m>_;_++)if("路边摊"==c[_][3]){u=ArrOp.GetStrVal("s"+c[_][0],t);break}GMapView.m_nSelf=0,this.m_szSysData_LBT=u},__getset(0,e,"m_szSysData_LBT",function(){return this._m_szSysData_LBT},function(t){this._m_szSysData_LBT=t,GMapView.lubiantan.updataLBT()}),t.uid=0,t.power=1,t.nick=2,t.src=3,t.visu=4,t.level=5,t.exp=6,t.evalue=7,t.vip=8,t.mapdata=9,t.sysdata=10,t.helpstatus=11,t.decoration=12,t.tradept=13,t.tradecombo=14,t.friendpt=15,t.diybuildcount=16,t}(),PackCoder=function(){function t(){}return __class(t,"net.PackCoder"),t.ArrToPack=function(e){if(!e)return"N";if("number"==typeof e&&Math.floor(e)==e)return e;for(var i="",n=0,s=e.length;s>n;n++){if(n>0&&(i+=","),"number"==typeof e[n]&&Math.floor(e[n])==e[n])i+=e[n];else if("number"==typeof e[n])throw new Error("发送给服务器的消息中，没有浮点数...当前值:"+e[n]);if("string"==typeof e[n]&&("NULL"==e[n]?i+="NULL":"NIL"==e[n]?i+="N":(i+='"',i+=e[n],i+='"')),e[n]instanceof Array&&(i+="(",i+=t.ArrToPack(e[n]),i+=")"),e[n]instanceof net.MapItem){i+="(";var a=e[n];i+=a.itemid,i+=",",i+=a.x,i+=",",i+=a.y,i+=",",i+=a.forword,i+=",",null==a.data||0==a.data.length?i+="N":(i+="(",null!=a.data&&(i+=t.ArrToPack(a.data)),i+=")"),i+=")"}}return i.indexOf("D{")>=0&&(i=i.replace(/\"D\{(.*?)\}\"/,"D{$1}")),i},t}(),UserData=function(){function t(){this.uid=0,this.power=0,this.nick=null,this.src=null,this.visu=0,this.level=0,this.exp=null,this.evalue=0,this.vip=0,this.mapdata=null,this.sysdata=null,this.helpstatus=0,this.decoration=null,this.macbag=null,this.wonderbag=null,this.createdate=null,this.onlinedate=null,this.offlinedate=null,this.onlinesec=0,this.devmode=0,this.money=0,this.diamond=0,this.shell=0,this.medal=0,this.tradept=0,this.tradeexp=0,this.friendpt=0,this.randgroup=0,this.fasttime=0,this.frienddata=null,this.achievement=null,this.barn=null,this.warehouse=null,this.nameddata=null,this.nszver=null,this.clnopver=0,this.sziapid=null,this.m_nSysSec=0,this.m_nDiyBuildNum=0,this.m_nDiyBuildEvalue=0,this.m_nRankData=null}__class(t,"net.UserData");var e=t.prototype;return e.getStrValFromND=function(t){return this.nameddata[t]},e.delStrValFromND=function(t){delete this.nameddata[t]},e.parseData=function(t){var e=t[0];this.m_nSysSec=t[1],this.m_nDiyBuildNum=t[2],this.m_nDiyBuildEvalue=t[3],this.m_nRankData=t[4];var i=0;this.uid=e[i++],this.power=e[i++],this.nick=e[i++],this.src=e[i++],this.visu=e[i++],this.level=e[i++],this.exp=new Int64Ref,this.exp.uint64=e[i++],this.evalue=e[i++],this.vip=e[i++];var n=e[i++];this.mapdata=new Array(n.length);var s=0,a=0;for(s=0,a=n.length;a>s;s++)this.mapdata[s]=new MapItem,this.mapdata[s].parseData(n[s]);for(this.sysdata=new Object,n=e[i++],a=n.length,s=0;a>s;s++)this.sysdata[n[s][0]]=n[s][1];for(this.helpstatus=e[i++],this.decoration=new BagData,this.decoration.parseData(e[i++]),this.macbag=new BagData,this.macbag.parseData(e[i++]),this.wonderbag=new BagData,this.wonderbag.parseData(e[i++]),this.createdate=e[i++],this.onlinedate=e[i++],this.offlinedate=e[i++],this.onlinesec=e[i++],this.devmode=e[i++],this.money=e[i++],this.diamond=e[i++],this.shell=e[i++],this.medal=e[i++],this.tradept=e[i++],this.tradeexp=e[i++],this.friendpt=e[i++],this.randgroup=e[i++],this.fasttime=e[i++],this.frienddata=e[i++],this.achievement=e[i++],this.barn=new BagData,this.barn.parseData(e[i++]),this.warehouse=new BagData,this.warehouse.parseData(e[i++]),this.nameddata=new Object,n=e[i++],a=n.length,s=0;a>s;s++)this.nameddata[n[s][0]]=n[s][1];this.nszver=e[i++],this.clnopver=e[i++],this.sziapid=e[i++]},t}(),UserLogRetData=function(){function t(){this.seeksvrname=null,this.uid=0,this.netkey=0,this.level=0,this.nick=null,this.bindflag=0,this.logtimes=0,this.lognetkey=0}__class(t,"net.UserLogRetData");var e=t.prototype;return e.parseData=function(t){this.seeksvrname=t[0],this.uid=t[1],this.netkey=t[2],this.level=t[3],this.nick=t[4],this.bindflag=t[5],this.logtimes=t[6],this.lognetkey=t[7]},t}(),GAppShell=function(){function t(t){if(!t||!Laya.__typeof(t,e))throw new Error("GAppShell 是个单例类，请调用GAppShell.m_i_Shell 来获取类实例")}var e;__class(t,"pub.GAppShell");var i=t.prototype;return i.GetShareMsg=function(){var t=["在《梦幻家园》我邂逅了自己的浪漫，你不来吗？","这个充满爱的季节里，我在《梦幻家园》等你。","《梦幻家园》的动物好奇怪，鸡都会织围巾了！","你见过《梦幻家园》戴圣诞帽的猪吗，好呆萌啊！","我在《梦幻家园》里建好了城堡，等待公主的到来。 "],e=t[Math.floor(Math.random()*t.length)];return e},__getset(1,t,"m_i_Shell",function(){return t.i=t.i||new t(new e)}),t.i=null,t.__init$=function(){e=function(){function t(){}return __class(t,""),t}()},t}(),Assets=function(){function t(){}return __class(t,"Tools.Assets"),t.BuildUrl=function(e){return t.m_buildmap=e,e=GVar.mutiAniDic[e][1],e?"build/"+e:(Log1.error("getSkin 未包含："+t.m_buildmap),"")},t.checkRes=function(t){return Laya.loader.getRes(t)?!0:(Log1.logDebug="资源未加载到："+t,GameMain._ins.removeLoading(),!1)},t.shareUrl=function(){return"http://mhjy.layabox.com/share/"+Math.floor(13*Math.random()+1)+".jpg"},t.UiUrl="assets/",t.m_buildmap=null,__static(t,["actFirstUrl",function(){return this.actFirstUrl="assets/other/activity/dddddd_03.png"},"activityResUrl",function(){return this.activityResUrl="assets/activity.json"},"signResUrl",function(){return this.signResUrl="assets/sign.json"},"levelUpResUrl",function(){return this.levelUpResUrl="assets/levelUp.json"},"figureInfoResUrl",function(){return this.figureInfoResUrl="assets/figureInfo.json"},"trophyResUrl",function(){return this.trophyResUrl="assets/trophy.json"},"goldResUrl",function(){return this.goldResUrl="assets/gold.json"},"vipResUrl",function(){return this.vipResUrl="assets/VIPprivilegespree.json"},"marketResUrl",function(){return this.marketResUrl="assets/market.json"},"frdResUrl",function(){return this.frdResUrl="assets/friendPanel.json"},"rankResUrl",function(){return this.rankResUrl="assets/ranking.json"},"chatResUrl",function(){return this.chatResUrl="assets/chat.json"},"dingdanResUrl",function(){return this.dingdanResUrl="assets/dingdan.json"},"wharfResUrl",function(){return this.wharfResUrl="assets/wharf.json"},"rndGiftResUrl",function(){return this.rndGiftResUrl="assets/rndGift.json"},"reuseUrl",function(){return this.reuseUrl="assets/reuse.json"}]),t}(),DateOp=function(){function t(){}return __class(t,"Tools.DateOp"),t.string=function(t){var e=t.getFullYear(),i=t.getMonth(),n=t.getDate(),s=t.getHours(),a=t.getMinutes(),r=t.getSeconds(),h=e+"-"+(i>=9?i+1:"0"+(i+1))+"-"+(n>=10?n:"0"+n)+" "+(s>=10?s:"0"+s)+":"+(a>=10?a:"0"+a)+":"+(r>=10?r:"0"+r);return h},t.getDateStr=function(t){var e=t.getFullYear(),i=t.getMonth(),n=t.getDate(),s=e+"年"+(i+1)+"月"+n+"日";return s},t.getTimeFormat=function(t){var e=Math.floor(t/3600),i=Math.floor(t%3600/60),n=t%60;return e>0?(e>=10?e:"0"+e)+"时"+(i>=10?i:"0"+i)+"分"+(n>=10?n:"0"+n)+"秒":i>0?(i>=10?i:"0"+i)+"分"+(n>=10?n:"0"+n)+"秒":n+"秒"},t.SetDateStr=function(t,e){if(null==e&&(e=new Date),"string"!=typeof t)return e;if(0==t.length)return e.setFullYear(1971,0,0),e;var i=t.split(" "),n=i[0].split("-");if(e.setFullYear(Laya.__parseInt(n[0]),Laya.__parseInt(n[1])-1,Laya.__parseInt(n[2])),2==i.length){var s=i[1].split(":");e.setHours(Laya.__parseInt(s[0]),Laya.__parseInt(s[1]),Laya.__parseInt(s[2]))}return e},t.SubDateDay=function(t,e){return Math.floor(Math.abs(t.getTime()-e.getTime())/1e3/60/60/24)*(t.getTime()-e.getTime()<0?-1:1)},t.SubDateSec=function(t,e){return Math.floor(Math.abs(t.getTime()-e.getTime())/1e3)*(t.getTime()-e.getTime()<0?-1:1)},t.SetDate=function(t,e,i,n,s,a,r,h){return void 0===s&&(s=0),void 0===a&&(a=0),void 0===r&&(r=0),void 0===h&&(h=0),t?(t.setFullYear(e,i,n),t.setHours(s,a,r,h)):t=new Date(e,i,n,s,a,r,h),t},t.GetLocalTime=function(t){return null==t&&(t=new Date),t},t.AdjDateDay=function(t,e){return null==e&&(e=new Date),e.setDate(e.getDate()+t),e},t.AdjDateSec=function(t,e){return null==e&&(e=new Date),e.setTime(e.getTime()+1e3*t),e},t.dayofweek=function(t){return t.getDay()},t.GetYMD=function(t){return t?t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate():""},t}(),DisplayTools=function(){function DisplayTools(){}return __class(DisplayTools,"Tools.DisplayTools"),__getset(1,DisplayTools,"scrollBar",null,function(t){if(!t)throw new Error("无效的滚动条");t.hide=!0,t.elasticDistance=200,t.elasticBackTime=100}),DisplayTools.setGlobalScale=function(t,e){DisplayTools.globalScale=t>e?e:t},DisplayTools.addTarget=function(t,e,i,n,s){return void 0===n&&(n=-1),void 0===s&&(s=!1),null==t?null:(null!=i&&DisplayTools.setObject(t,i),s&&DisplayTools.setCenter(t,e),null!=e&&t instanceof laya.display.Sprite&&(n>-1?e.addChildAt(t,n):e.addChild(t)),t)},DisplayTools.setObject=function(t,e){var i=t,n=e;for(var s in n)if("function"!=s&&"_parent_"!=s&&"_childs_"!=s)try{i[s]=n[s]}catch(a){console.log("\n-=-=-=-=-=-=-=-=-=DisplayTools Error-=-=-=-=-=-=-=-=-=-",a.message),console.log("instance:",i),console.log("property:",s),console.log("   value:",n[s]),console.log("-=-=-=-=-=-=-=-=-=-=-=-=-=END=-=-=-=-=-=-=-=-=-=-=-=-=-=-\n")}i=null,n=null},DisplayTools.setCenter=function(t,e){var i,n=t;i=e?e:{width:Laya.stage.width,height:Laya.stage.height};var s=n.pivotX>1?0:n.width,a=n.pivotY>1?0:n.height;n.x=i.width-s>>1,n.y=i.height-a>>1,n=null,i=null},DisplayTools.getNum=function(t,e,i,n,s){var a=NaN;a=e-t;var r=NaN;r=n-i;var h=NaN;h=r/a;var o=NaN;return o=i+(s-t)*h},DisplayTools.getJson=function(value){var json;return json=eval("("+value+")")},DisplayTools.onCenter=function(t,e,i,n){var s=0;if(n&&0!=n.length){var a=0;for(a=0;a<n.length;a++)s+=n[a].width;for(a=0;a<n.length;a++)0==a?n[a].x=.5*(i.width-s):n[a].x=n[a-1].x+n[a-1].width}else s=t.width+e.width,t.x=.5*(i.width-s),e.x=t.x+t.width},DisplayTools.onAutoSizeX=function(t,e,i){if(void 0===i&&(i=!1),t.scale(1,1),e.viewWidth>t.viewWidth)return void(i&&DisplayTools.onCenter(null,null,e,[t]));var n=e.viewWidth/t.viewWidth;n>1&&(n=1),t.scale(n,n)},DisplayTools.moveTop=function(t){t.parent&&t.parent.addChild(t)},DisplayTools.globalScale=1,DisplayTools}(),FlyItemTool=function(){function t(){}return __class(t,"Tools.FlyItemTool"),t.FlyDownItem=function(e,i,n,s){t.checkXY(s);var a=!0;if(s[0]){var r=t.flyToType(e),h=new CropTools(GVar.texDic[DataTable.m_iItemTab.Get(e)[3]],a,r,a?""+i:"+"+i);DisplayTools.addTarget(h,Laya.stage,{x:s[0],y:s[1]})}},t.AutoFlyTo=function(e,i,n){t.checkXY(n);var s=!1;if(n[0]){var a=t.flyToType(e),r=DataTable.m_iItemTab.Get(e);if(r&&r.length>3){var h=new CropTools(GVar.texDic[r[3]],s,a,s?""+i:"+"+i);DisplayTools.addTarget(h,Laya.stage,{x:n[0]+Math.floor(180*Math.random())-90,y:n[1]})}}},t.checkXY=function(t){t[0]||(t[0]=Laya.stage.mouseX),t[1]||(t[1]=Laya.stage.mouseY)},t.flyToType=function(t){var e=0;switch(t){case 1:e=4;break;case 2:e=5;break;case 4:e=0;break;case 5:e=0;break;case 7:e=0;break;case 25:e=6;break;default:if(5e3>t){var i=DataTable.m_iItemTab.Get(t);e=1==i[4]||6==i[4]?1:2}else e=SysID.IsDTZSJZID(t)?3:2;switch(t){case 8:case 23:case 24:case 29:case 30:case 40:e=5}}return e},t}(),ItemFeild=function(){function t(){if(this.item=null,this.itemFeildObj={},this.feildArr=[4001,4002,4003,4004,4005,4006,4007,4008,4009,4010,4011],t.isboo)throw new Error("请调用 getInstance()来获取实例")}__class(t,"Tools.ItemFeild");var e=t.prototype;return e.getItemArr=function(t){return-1==this.feildArr.indexOf(t)?DataTable.itemtab.getObj(t):(this.itemFeildObj[t]=DataTable.itemtab.getObj(t).concat(DataTable.feild.getObj(t)),this.itemFeildObj[t])},t.getInstance=function(){return t.instance||(t.isboo=!1,t.instance=new t,t.isboo=!0),t.instance},t.isboo=!0,t.instance=null,t}(),Log1=function(){function t(){t.content="Logs: \n\r"}return __class(t,"Tools.Log",null,"Log1"),__getset(1,t,"content",function(){return t._content},function(e){t._content=e,t.changeContentHd&&t.changeContentHd.runWith(t.content)}),__getset(1,t,"logDebug",function(){return t._logDebug},function(e){var i=t.getDayString(new Date),n="["+i+"]"+e;t._logDebug+=n+"\n",LogDebug.isShow&&LogDebug.I.updateText()}),t.reset=function(){t.content="Logs: \n\r"},t.debug=function(e){var i=arguments;15==i[0]&&t.log(t.argumentToString(i),0)},t.argumentToString=function(t){var e=arguments,i=e;i=e[0];for(var n="",s=0;s<i.length;s++)n+=i[s]+",";return n},t.info=function(e){var i=arguments;t.log(t.argumentToString(i),1)},t.error=function(e){var i=arguments;t.log(t.argumentToString(i),2)},t.log=function(e,i){var n=t.getDayString(new Date),s="["+Tools.Log.levelNames[i]+"]["+n+"]"+e;t.content+=s,t.content+="\n";var a=t.levelColors[i];console.log("%c"+s,"color:"+a)},t.getDayString=function(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"::"+t.getMilliseconds()},t.DEBUG_NO=15,t.level=0,t._content="",t.changeContentHd=null,t._logDebug="",__static(t,["levelNames",function(){return this.levelNames=["Debug","Info","Error"]},"levelColors",function(){return this.levelColors=["#5180CE","#6B8E24","#FF0000"]}]),t}(),TimerTools=function(){function t(){}return __class(t,"Tools.TimerTools"),t.conversion=function(t){var e=Math.floor(t/86400);t%=86400;var i=Math.floor(t/3600);t%=3600;var n=Math.floor(t/60);return t%=60,e>0?i>0?""+e+"D"+i+"H":""+e+"D":i>0?n>0?""+i+"H"+n+"M":""+i+"H":n>0?t>0?""+n+"M"+t+"S":""+n+"M":""+t+"S"},t}(),TweenTool=function(){function t(){if(this.han=null,this._boo=!0,this._isOverOut=!0,t.isboo)throw new Error("请调用 getInstance()来获取实例")}__class(t,"Tools.TweenTool");var e=t.prototype;return e.clearTween=function(t){Tween.clearTween(t)},e.interfaceTween=function(t,e,i){var n=1;return n=DisplayTools.globalScale,e?(DisplayTools.addTarget(t,e,{pivotX:t.width/2,pivotY:t.height/2,scaleX:.5,scaleY:.5},-1,!0),Tween.to(t,{scaleX:n,scaleY:n},100,Ease.circInOut,new Handler(this,this.onTweenComplete,[t]),0,!0)):(t.scale(.01,.01),Tween.to(t,{scaleX:n,scaleY:n},200,null,i,0,!0))},e.onTweenComplete=function(t){},e.onCloseHandler=function(t){},e.buttonTween=function(t,e,i,n){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),t&&(n?this.addEvent(t,e,i):t.on("mousedown",this,this.addEvent,[t,e,i]))},e.addEvent=function(t,e,i){Tween.to(t,{scaleX:1.1,scaleY:1.1},100,Ease.circOut,null,0,!0),i&&(t.on("mouseout",this,this.onEventHandler,[t,e,i]),t.on("mouseover",this,this.onEventHandler,[t,e,i])),Laya.stage.once("mouseup",this,this.onEventHandler,[t,e,i])},e.onEventHandler=function(t,e,i,n){switch(n.type){case"mouseout":Tween.to(t,{scaleX:1,scaleY:1},100,Ease.circOut,null,0,!0);break;case"mouseover":Tween.to(t,{scaleX:1.1,scaleY:1.1},100,Ease.circOut,null,0,!0);break;case"mouseup":if(!e)return Tween.clearTween(t),t.scale(1,1),void this.onRemoveEvent(t);Tween.to(t,{scaleX:1,scaleY:1},100,Ease.circOut,null,0,!0),this.onRemoveEvent(t)}},e.onRemoveEvent=function(t){t.off("mouseout",this,this.onEventHandler),t.off("mouseover",this,this.onEventHandler)},t.getInstance=function(){return t.instance||(t.isboo=!1,t.instance=new t,t.isboo=!0),t.instance},t.isboo=!0,t.instance=null,t}(),UpdateMgr=function(){function t(){this.completeH=null,this.progressH=null,this.mAstDic=new Object}__class(t,"Tools.UpdateMgr");var e=t.prototype;return e.LoadFile=function(t,e,i){this.completeH=e,this.progressH=i,Laya.loader.load(t,new Handler(this,this.onComplete),new Handler(this,this.getProgress),"arraybuffer")},e.onComplete=function(t){var e=new Byte(t),i=e.readUTFBytes(4);if("fst"==i){var n=e.getUint32();if(100==n){n=e.getUint32();for(var s=0,a=0,r=0;n>r;r++)s=e.getUint32(),a=e.getUint32(),this.mAstDic[s]=a;URL.customFormat=Tools.UpdateMgr.customUrl,this.completeH&&(this.completeH.run(),this.completeH.clear())}}},e.getProgress=function(t){this.progressH&&this.progressH.runWith(t)},e.getFileModtime=function(t){var e=t.toLowerCase(),i=this.string_hash(e);return this.mAstDic[i]},e.string_hash=function(t){for(var e=0,i=0,n=0;n<t.length;n++)i=t.charCodeAt(n),e=(e<<5)-e+i;return e>>>=0},t.Instance=function(){return null==t.m_ins?(t.m_ins=new t,t.m_ins):t.m_ins},t.customUrl=function(e,i){if(!e)return e;var n=t.m_ins.getFileModtime(e);return n&&(e=e+"?"+n),e},t.m_ins=null,t}(),Util=function(){function t(){}return __class(t,"Tools.Util"),t.Clamp=function(t,e,i){return e>t?e:t>i?i:t},t.InitPinyinDict=function(){Tools.Util.s_bFirstPinyinDict.Length<1},t.FirstPinyin=function(t){if(!t)return"";if(Tools.Util.s_bFirstPinyinDict.Length<1&&(Tools.Util.InitPinyinDict(),Tools.Util.s_bFirstPinyinDict.Length<1))return t;var e="";return e},t.s_bFirstPinyinDict=[],t}(),Node=function(t){function e(){this.name="",this.destroyed=!1,this._displayInStage=!1,this._parent=null,this._privates=null,e.__super.call(this),this._childs=e.ARRAY_EMPTY,this.timer=Laya.timer}__class(e,"laya.display.Node",t);var i=e.prototype;return i.destroy=function(t){void 0===t&&(t=!0),this.destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(t?this.destroyChildren():this.removeChildren()),this._childs=null,this._privates&&(this._privates=null),this.offAll()},i.destroyChildren=function(){if(this._childs)for(var t=this._childs.length-1;t>-1;t--)this._childs[t].destroy(!0)},i.addChild=function(t){return t===this?t:(t._parent===this?(this._childs.splice(this.getChildIndex(t),1),this._childs.push(t)):(t.parent&&t.parent.removeChild(t),this._childs===e.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t),t.parent=this),t)},i.addChildren=function(t){for(var e=arguments,i=0,n=e.length;n>i;)this.addChild(e[i++])},i.addChildAt=function(t,i){if(t===this)return t;if(i>=0&&i<=this._childs.length)return t._parent===this?(this._childs.splice(this.getChildIndex(t),1),this._childs.splice(i,0,t)):(t.parent&&t.parent.removeChild(t),this._childs===e.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(i,0,t),t.parent=this),t;throw new Error("appendChildAt:The index is out of bounds")},i.getChildIndex=function(t){return this._childs.indexOf(t)},i.getChildByName=function(t){for(var e=this._childs,i=0,n=e.length;n>i;i++){var s=e[i];if(s.name===t)return s}return null},i.getPrivates=function(){return this._privates},i.getChildAt=function(t){return this._childs[t]},i.setChildIndex=function(t,e){var i=this._childs;if(0>e||e>=i.length)throw new Error("setChildIndex:The index is out of bounds.");var n=this.getChildIndex(t);return i.splice(n,1),i.splice(e,0,t),this.childChanged(),t},i.childChanged=function(t){},i.removeChild=function(t){if(!this._childs)return t;var e=this._childs.indexOf(t);return this.removeChildAt(e)},i.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},i.removeChildByName=function(t){var e=this.getChildByName(t);return e&&this.removeChild(e),e},i.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(this._childs.splice(t,1),e.parent=null),e},i.removeChildren=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=2147483647),this._childs.length>0){var n=this._childs;if(0===t&&i>=r){var s=n;this._childs=e.ARRAY_EMPTY}else s=n.splice(t,i-t);for(var a=0,r=s.length;r>a;a++)s[a].parent=null}return this},i.replaceChild=function(t,e){var i=this._childs.indexOf(e);return i>-1?(this._childs.splice(i,1,t),e.parent=null,t.parent=this,t):null},i._setDisplay=function(t){this._displayInStage!==t&&(this._displayInStage=t,t?this.event("display"):this.event("undisplay"))},i._displayChild=function(t,e){t._setDisplay(e);var i=t._childs;if(i)for(var n=i.length-1;n>-1;n--){var s=i[n];s._setDisplay(e),s.numChildren&&this._displayChild(s,e)}},i.ask=function(t,e){return 1==t?1==e:!1},i.contains=function(t){if(t===this)return!0;for(;t;){if(t.parent===this.parent)return!0;t=t.parent}return!1},i.timerLoop=function(t,e,i,n,s){void 0===s&&(s=!1),this.timer._create(!1,!0,t,e,i,n,s)},i.timerOnce=function(t,e,i,n,s){void 0===s&&(s=!1),this.timer._create(!1,!1,t,e,i,n,s)},i.frameLoop=function(t,e,i,n,s){void 0===s&&(s=!1),this.timer._create(!0,!0,t,e,i,n,s)},i.frameOnce=function(t,e,i,n,s){void 0===s&&(s=!1),this.timer._create(!0,!1,t,e,i,n,s)},i.clearTimer=function(t,e){this.timer.clear(t,e)},__getset(0,i,"numChildren",function(){return this._childs.length}),__getset(0,i,"parent",function(){return this._parent},function(t){this._parent!==t&&(t?(this._parent=t,this.event("added"),t.displayInStage&&this._displayChild(this,!0),t.childChanged(this)):(this.event("removed"),this._parent.childChanged(),this._displayChild(this,!1),this._parent=t))}),__getset(0,i,"displayInStage",function(){return this._displayInStage}),e.ASK_CLASS=1,e.ASK_VALUE_NODE=1,e.ASK_VALUE_SPRITE=2,e.ASK_VALUE_HTMLELEMENT=3,e.ASK_VALUE_SPRITE3D=100,e.ARRAY_EMPTY=[],e}(EventDispatcher),CSSStyle=function(t){function e(t){this._bgground=null,this._border=null,this._rect=null,this.lineHeight=0,e.__super.call(this),this._padding=e._PADDING,this._spacing=e._SPACING,this._aligns=e._ALIGNS,this._font=Font.EMPTY,this._ower=t}__class(e,"laya.display.css.CSSStyle",t);var i=e.prototype;return i.destroy=function(){this._ower=null,this._font=null,this._rect=null},i.inherit=function(t){this._font=t._font,this._spacing=t._spacing===e._SPACING?e._SPACING:t._spacing.slice(),this.lineHeight=t.lineHeight},i._widthAuto=function(){return 0!==(262144&this._type)},i.widthed=function(t){return 0!=(8&this._type)},i._calculation=function(t,e){function i(t,e,i){return t*i[0]+e*i[1]+i[2]}function n(t){var e=a.width,n=s.width;r.width&&(s.width=i(e,n,r.width)),r.height&&(s.height=i(e,n,r.height)),r.left&&(s.x=i(e,n,r.left)),r.top&&(s.y=i(e,n,r.top))}if(e.indexOf("%")<0)return!1;var s=this._ower,a=s.parent,r=this._rect;null===r&&(a._getCSSStyle()._type|=524288,a.on("resize",this,n),this._rect=r={input:{}});var h=e.split(" ");return h[0]=parseFloat(h[0])/100,1==h.length?h[1]=h[2]=0:(h[1]=parseFloat(h[1])/100,h[2]=parseFloat(h[2])),r[t]=h,r.input[t]=e,n(t),!0},i.heighted=function(t){return 0!=(8192&this._type)},i.size=function(t,e){var i=this._ower,n=!1;-1!==t&&t!=this._ower.width&&(this._type|=8,this._ower.width=t,n=!0),-1!==e&&e!=this._ower.height&&(this._type|=8192,this._ower.height=e,n=!0),n&&(i.layoutLater(),524288&this._type&&i.event("resize",this))},i._getAlign=function(){return this._aligns[0]},i._getValign=function(){return this._aligns[1]},i._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},i._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new Font(this._font))},i.render=function(t,e,i,n){var s=t.width,a=t.height;this._bgground&&null!=this._bgground.color&&e.ctx.fillRect(i,n,s,a,this._bgground.color),this._border&&this._border.color&&e.drawRect(i,n,s,a,this._border.color.strColor,this._border.size)},i.getCSSStyle=function(){return this},i.cssText=function(t){this.attrs(e.parseOneCSS(t,";"))},i.attrs=function(t){if(t)for(var e=0,i=t.length;i>e;e++){var n=t[e];this[n[0]]=n[1]}},i.translate=function(t,e){this._tf===Style._TF_EMPTY&&(this._tf=Style._createTransform()),this._tf.translateX=t,this._tf.translateY=e},i.scale=function(t,e){this._tf===Style._TF_EMPTY&&(this._tf=Style._createTransform()),this._tf.scaleX=t,this._tf.scaleY=e},i._enableLayout=function(){return 0===(2&this._type)&&0===(4&this._type)},__getset(0,i,"align",function(){return e._aligndef[this._aligns[0]]},function(t){this._aligns===e._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=e._aligndef[t]}),__getset(0,i,"paddingTop",function(){return this.padding[0]}),__getset(0,i,"block",t.prototype._$get_block,function(t){t?this._type|=1:this._type&=-2}),__getset(0,i,"padding",function(){return this._padding},function(t){this._padding=t}),__getset(0,i,"width",null,function(t){if(this._type|=8,"string"==typeof t){var e=t.indexOf("auto");if(e>=0&&(this._type|=262144,t=t.substr(0,e)),this._calculation("width",t))return;t=Laya.__parseInt(t)}this.size(t,-1)}),__getset(0,i,"height",null,function(t){if(this._type|=8192,"string"==typeof t){if(this._calculation("height",t))return;t=Laya.__parseInt(t)}this.size(-1,t)}),__getset(0,i,"_scale",null,function(t){this._ower.scale(t[0],t[1])}),__getset(0,i,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(t){this.lineElement=!1,"right"===t?this._type|=32768:this._type&=-32769}),__getset(0,i,"font",function(){return this._font.toString()},function(t){this._createFont().set(t)}),__getset(0,i,"lineElement",function(){return 0!=(65536&this._type)},function(t){t?this._type|=65536:this._type&=-65537}),__getset(0,i,"valign",function(){return e._valigndef[this._aligns[1]]},function(t){this._aligns===e._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=e._valigndef[t]}),__getset(0,i,"border",function(){return this._border?this._border.value:""},function(t){if("none"==t)return void(this._border=null);this._border||(this._border={}),this._border.value=t;var e=t.split(" ");if(this._border.color=Color.create(e[e.length-1]),1==e.length)return this._border.size=1,void(this._border.type="solid");var i=0;e[0].indexOf("px")>0?(this._border.size=Laya.__parseInt(e[0]),i++):this._border.size=1,this._border.type=e[i],this._ower._renderType|=128}),__getset(0,i,"leading",function(){return this._spacing[1]},function(t){"string"==typeof t&&(t=Laya.__parseInt(t+"")),this._spacing===e._SPACING&&(this._spacing=[0,0]),this._spacing[1]=t}),__getset(0,i,"left",null,function(t){var e=this._ower;if("string"==typeof t){if("center"===t?t="50% -50% 0":"right"===t&&(t="100% -100% 0"),this._calculation("left",t))return;t=Laya.__parseInt(t)}e.x=t}),__getset(0,i,"position",function(){return 4&this._type?"absolute":""},function(t){"absolute"==t?this._type|=4:this._type&=-5}),__getset(0,i,"top",null,function(t){var e=this._ower;if("string"==typeof t){if("middle"===t?t="50% -50% 0":"bottom"===t&&(t="100% -100% 0"),this._calculation("top",t))return;t=Laya.__parseInt(t)}e.y=t}),__getset(0,i,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(t){"nowrap"===t&&(this._type|=131072),"none"===t&&(this._type&=-131073)}),__getset(0,i,"wordWrap",function(){return 0===(131072&this._type)},function(t){t?this._type&=-131073:this._type|=131072}),__getset(0,i,"bold",function(){return this._font.bold},function(t){this._createFont().bold=t}),__getset(0,i,"password",function(){return this._font.password},function(t){this._createFont().password=t}),__getset(0,i,"weight",null,function(t){this._createFont().weight=t}),__getset(0,i,"letterSpacing",function(){return this._spacing[0]},function(t){"string"==typeof t&&(t=Laya.__parseInt(t+"")),this._spacing===e._SPACING&&(this._spacing=[0,0]),this._spacing[0]=t}),__getset(0,i,"fontSize",function(){return this._font.size},function(t){this._createFont().size=t}),__getset(0,i,"italic",function(){return this._font.italic},function(t){this._createFont().italic=t}),__getset(0,i,"fontFamily",function(){return this._font.family},function(t){this._createFont().family=t}),__getset(0,i,"fontWeight",function(){return this._font.weight},function(t){this._createFont().weight=t}),__getset(0,i,"textDecoration",function(){return this._font.decoration},function(t){this._createFont().decoration=t}),__getset(0,i,"color",function(){return this._font.color},function(t){this._createFont().color=t}),__getset(0,i,"strokeColor",function(){return this._font.stroke[1]},function(t){this._createFont().stroke===Font._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=t}),__getset(0,i,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(t){this._border||(this._border={size:1,type:"solid"}),this._border.color=null==t?null:Color.create(t),this._ower._renderType|=128}),__getset(0,i,"stroke",function(){return this._font.stroke[0]},function(t){this._createFont().stroke===Font._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=t}),__getset(0,i,"backgroundColor",function(){return this._bgground?this._bgground.color:""},function(t){"none"===t?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=t),this._ower._renderType|=128}),__getset(0,i,"absolute",function(){return 0!==(4&this._type)}),__getset(0,i,"background",null,function(t){this._bgground||(this._bgground={}),this._bgground.color=t,this._type|=16384,this._ower._renderType|=128}),__getset(0,i,"paddingLeft",function(){return this.padding[3]}),__getset(0,i,"display",null,function(t){switch(t){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower.layoutLater()}}),__getset(0,i,"transform",t.prototype._$get_transform,function(t){"none"===t?this._tf=Style._TF_EMPTY:this.attrs(e.parseOneCSS(t,","))}),__getset(0,i,"_translate",null,function(t){this.translate(t[0],t[1])}),__getset(0,i,"_rotate",null,function(t){this._ower.rotation=t}),e.parseOneCSS=function(t,i){for(var n,s=[],a=t.split(i),r=0,h=a.length;h>r;r++){var o=a[r],l=o.indexOf(":"),u=o.substr(0,l).replace(/^\s+|\s+$/g,""),c=o.substr(l+1).replace(/^\s+|\s+$/g,""),_=[u,c];switch(u){case"italic":case"bold":_[1]="true"==c;break;
case"line-height":_[0]="lineHeight",_[1]=Laya.__parseInt(c);break;case"font-size":_[0]="fontSize",_[1]=Laya.__parseInt(c);break;case"padding":n=c.split(" "),n.length>1||(n[1]=n[2]=n[3]=n[0]),_[1]=[Laya.__parseInt(n[0]),Laya.__parseInt(n[1]),Laya.__parseInt(n[2]),Laya.__parseInt(n[3])];break;case"rotate":_[0]="_rotate",_[1]=parseFloat(c);break;case"scale":n=c.split(" "),_[0]="_scale",_[1]=[parseFloat(n[0]),parseFloat(n[1])];break;case"translate":n=c.split(" "),_[0]="_translate",_[1]=[Laya.__parseInt(n[0]),Laya.__parseInt(n[1])];break;default:(_[0]=e._CSSTOVALUE[u])||(_[0]=u)}s.push(_)}return s},e.parseCSS=function(t,i){for(var n;null!=(n=e._parseCSSRegExp.exec(t));)e.styleSheets[n[1]]=e.parseOneCSS(n[2],";")},e.EMPTY=new e(null),e.styleSheets={},e.ALIGN_CENTER=1,e.ALIGN_RIGHT=2,e.VALIGN_MIDDLE=1,e.VALIGN_BOTTOM=2,e._CSS_BLOCK=1,e._DISPLAY_NONE=2,e._ABSOLUTE=4,e._WIDTH_SET=8,e._PADDING=[0,0,0,0],e._RECT=[-1,-1,-1,-1],e._SPACING=[0,0],e._ALIGNS=[0,0,0],e.ADDLAYOUTED=512,e._NEWFONT=4096,e._HEIGHT_SET=8192,e._BACKGROUND_SET=16384,e._FLOAT_RIGHT=32768,e._LINE_ELEMENT=65536,e._NOWARP=131072,e._WIDTHAUTO=262144,e._LISTERRESZIE=524288,e._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},e._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},e._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor","float":"cssFloat"},e._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),e}(Style),AudioSound=function(t){function e(){this.url=null,this.audio=null,this.loaded=!1,e.__super.call(this)}__class(e,"laya.media.h5audio.AudioSound",t);var i=e.prototype;return i.dispose=function(){var t=e._audioCache[this.url];t&&(t.src="",delete e._audioCache[this.url])},i.load=function(t){function i(){s(),r.loaded=!0,r.event("complete")}function n(){s(),r.event("error")}function s(){a.removeEventListener("canplaythrough",i),a.removeEventListener("error",n)}this.url=t;var a=e._audioCache[t];if(a&&a.readyState>=2)return void this.event("complete");a||(a=Browser.createElement("audio"),a.src=t,e._audioCache[t]=a),a.addEventListener("canplaythrough",i),a.addEventListener("error",n);var r=this;this.audio=a,a.load()},i.play=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),!this.url)return null;var n;if(n=e._audioCache[this.url],!n)return null;n.autoplay=!0;var s;s=Pool.getItem(this.url),s=s?s:n.cloneNode();var a=new AudioSoundChannel(s);return a.url=this.url,a.loops=i,a.startTime=t,a.play(),SoundManager.addChannel(a),a},e._audioCache={},e}(EventDispatcher),SoundChannel=function(t){function e(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.completeHandler=null,e.__super.call(this)}__class(e,"laya.media.SoundChannel",t);var i=e.prototype;return i.play=function(){},i.stop=function(){},__getset(0,i,"volume",function(){return 1},function(t){}),__getset(0,i,"position",function(){return 0}),e}(EventDispatcher),Sound=function(t){function e(){e.__super.call(this)}__class(e,"laya.media.Sound",t);var i=e.prototype;return i.load=function(t){},i.play=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),null},i.dispose=function(){},e}(EventDispatcher),WebAudioSound=function(t){function e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,e.__super.call(this)}__class(e,"laya.media.webaudio.WebAudioSound",t);var i=e.prototype;return i.load=function(t){function i(){e._dataCache[t]=s.audioBuffer,s.loaded=!0,s.event("complete")}function n(){s.event("error")}var s=this;if(this.url=t,this.audioBuffer=e._dataCache[t],this.audioBuffer)return void i();var a=new Browser.window.XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){s.data=a.response,e.buffs.push({buffer:s.data,loaded:i,err:n,me:s,url:s.url}),e.decode()},a.send()},i.play=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i=i?i:new WebAudioSoundChannel,this.audioBuffer||this.url&&(this.once("complete",this,this.play,[t,e,i]),this.load(this.url)),i.url=this.url,i.loops=e,i.audioBuffer=this.audioBuffer,i.startTime=t,i.play(),SoundManager.addChannel(i),i},i.dispose=function(){delete e._dataCache[this.url]},e.decode=function(){e.buffs.length<=0||e.isDecoding||(e.isDecoding=!0,e.tInfo=e.buffs.shift(),e.ctx.decodeAudioData(e.tInfo.buffer,e._done,e._fail))},e._done=function(t){e.tInfo.me.audioBuffer=t,e.tInfo.loaded&&e.tInfo.loaded(),e.isDecoding=!1,e.decode()},e._fail=function(){e.tInfo.err&&e.tInfo.err(),e.isDecoding=!1,e.decode()},e.buffs=[],e.isDecoding=!1,e.tInfo=null,e._dataCache={},__static(e,["window",function(){return this.window=Browser.window},"webAudioOK",function(){return this.webAudioOK=e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext},"ctx",function(){return this.ctx=e.webAudioOK?new(e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext):void 0}]),e}(EventDispatcher),ColorFilter=function(t){function e(t){if(e.__super.call(this),!t)return void(this._elements=e.DEFAULT._elements);this._elements=new Float32Array(20);for(var i=0;20>i;i++)this._elements[i]=t[i];this._action=System.createFilterAction(32),this._action.data=this}__class(e,"laya.filters.ColorFilter",t);var i=e.prototype;return Laya.imps(i,{"laya.filters.IFilter":!0}),__getset(0,i,"type",function(){return 32}),__getset(0,i,"action",function(){return this._action}),__static(e,["DEFAULT",function(){return this.DEFAULT=new e([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0])},"GRAY",function(){return this.GRAY=new e([.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0])}]),e}(Filter),HttpRequest=function(t){function e(){this._responseType=null,this._data=null,e.__super.call(this),this._http=new Browser.window.XMLHttpRequest}__class(e,"laya.net.HttpRequest",t);var i=e.prototype;return i.send=function(t,e,i,n,s){void 0===i&&(i="get"),void 0===n&&(n="text"),this._responseType=n,this._data=null;var a=this,r=this._http;if(r.open(i,t,!0),s)for(var h=0;h<s.length;h++)r.setRequestHeader(s[h++],s[h]);else e&&"string"!=typeof e?r.setRequestHeader("Content-Type","application/json"):r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r.responseType="arraybuffer"!==n?"text":"arraybuffer",r.onerror=function(t){a.onError(t)},r.onabort=function(t){a.onAbort(t)},r.onprogress=function(t){a.onProgress(t)},r.onload=function(t){a.onLoad(t)},r.send(e)},i.onProgress=function(t){t&&t.lengthComputable&&this.event("progress",t.loaded/t.total)},i.onAbort=function(t){this.error("Request was aborted by user")},i.onError=function(t){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},i.onLoad=function(t){var e=this._http,i=void 0!==e.status?e.status:200;200===i||204===i||0===i?this.complete():this.error("["+e.status+"]"+e.statusText+":"+e.responseURL)},i.error=function(t){this.clear(),this.event("error",t)},i.complete=function(){if(this.clear(),"json"===this._responseType)this._data=JSON.parse(this._http.responseText);else if("xml"===this._responseType){var t=new Browser.window.DOMParser;this._data=t.parseFromString(this._http.responseText,"text/xml")}else this._data=this._http.response||this._http.responseText;this.event("complete",this._data instanceof Array?[this._data]:this._data)},i.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null},__getset(0,i,"data",function(){return this._data}),__getset(0,i,"url",function(){return this._http.responseURL}),e}(EventDispatcher),Loader=function(t){function e(){this._data=null,this._url=null,this._type=null,this._cache=!1,this._http=null,e.__super.call(this)}__class(e,"laya.net.Loader",t);var i=e.prototype;return i.load=function(t,i,n){return void 0===n&&(n=!0),t=URL.formatURL(t),this._url=t,this._type=i||(i=this.getTypeFromUrl(t)),this._cache=n,this._data=null,e.loadedMap[t]?(this._data=e.loadedMap[t],this.event("progress",1),void this.event("complete",this._data)):"image"===i?this._loadImage(t):"sound"===i?this._loadSound(t):(this._http||(this._http=new HttpRequest,this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded)),void this._http.send(t,null,"get","atlas"!==i?i:"json"))},i.getTypeFromUrl=function(t){e._extReg.lastIndex=t.lastIndexOf(".");var i=e._extReg.exec(t);return i&&i.length>1?e.typeMap[i[1].toLowerCase()]:(console.log("Not recognize the resources suffix",t),"text")},i._loadImage=function(t){function e(){i.onload=null,i.onerror=null}var i=new HTMLImage,n=this;i.onload=function(){e(),n.onLoaded(i)},i.onerror=function(){e(),n.event("error","Load image filed")},i.src=t},i._loadSound=function(t){function e(){n(),r.onLoaded(a)}function i(){n(),r.event("error","Load sound filed")}function n(){a.off("complete",s,e),a.off("error",s,i)}var s=this,a=new Sound,r=this;a.on("complete",this,e),a.on("error",this,i),a.load(t)},i.onProgress=function(t){this.event("progress",t)},i.onError=function(t){this.event("error",t)},i.onLoaded=function(t){var i=this._type;if("image"===i)this.complete(new Texture(t));else if("sound"===i)this.complete(t);else if("texture"===i)this.complete(new Texture(t));else if("atlas"===i){var n;if(!t.src){if(!this._data){if(this._data=t,t.meta&&t.meta.image){n=t.meta.image.split(",");var s,a;a=this._url.indexOf("/")>=0?"/":"\\";var r=0;r=this._url.lastIndexOf(a),s=r>=0?this._url.substr(0,r+1):"";var h=0,o=0;for(o=n.length,h=0;o>h;h++)n[h]=s+n[h]}else n=[this._url.replace(".json",".png")];t.toLoads=n,t.pics=[]}return this._loadImage(URL.formatURL(n.pop()))}if(this._data.pics.push(t),this._data.toLoads.length>0)return this._loadImage(URL.formatURL(this._data.toLoads.pop()));var l,u=this._data.frames,c=this._data.meta&&this._data.meta.prefix?URL.basePath+this._data.meta.prefix:this._url.substring(0,this._url.lastIndexOf("."))+"/";l=this._data.pics;var _,m=e.atlasMap[this._url]||(e.atlasMap[this._url]=[]);Config.atlasEnable&&Render.isWebGl;for(var d in u){var p=u[d];_=l[p.frame.idx?p.frame.idx:0];var f=c+d;e.loadedMap[f]=Texture.create(_,p.frame.x,p.frame.y,p.frame.w,p.frame.h,p.spriteSourceSize.x,p.spriteSourceSize.y),m.push(e.loadedMap[f])}this.complete(this._data)}else this.complete(t)},i.complete=function(t){this._data=t,e._loaders.push(this),e._isWorking||e.checkNext()},i._endLoad=function(){this._cache&&(e.loadedMap[this._url]=this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},__getset(0,i,"cache",function(){return this._cache}),__getset(0,i,"data",function(){return this._data}),__getset(0,i,"url",function(){return this._url}),__getset(0,i,"type",function(){return this._type}),e.checkNext=function(){e._isWorking=!0;for(var t=Browser.now(),i=t;e._startIndex<e._loaders.length;)if(i=Browser.now(),e._loaders[e._startIndex]._endLoad(),e._startIndex++,Browser.now()-t>e.maxTimeOut)return console.log("loader callback cost a long time:"+(Browser.now()-t)+") url="+e._loaders[e._startIndex-1].url),void Laya.timer.frameOnce(1,null,e.checkNext);e._loaders.length=0,e._startIndex=0,e._isWorking=!1},e.clearRes=function(t){t=URL.formatURL(t);var i=e.atlasMap[t];if(i){for(var n=0,s=i.length;s>n;n++){var a=i[n];a&&a.destroy()}i.length=0,delete e.atlasMap[t]}delete e.loadedMap[t]},e.getRes=function(t){return e.loadedMap[URL.formatURL(t)]},e.getAtlas=function(t){return e.atlasMap[URL.formatURL(t)]},e.cacheRes=function(t,i){e.loadedMap[URL.formatURL(t)]=i},e.basePath="",e.TEXT="text",e.JSOn="json",e.XML="xml",e.BUFFER="arraybuffer",e.IMAGE="image",e.SOUND="sound",e.TEXTURE="texture",e.ATLAS="atlas",e.typeMap={png:"image",jpg:"image",txt:"text",json:"json",xml:"xml",als:"atlas"},e.loadedMap={},e.atlasMap={},e._loaders=[],e._isWorking=!1,e._startIndex=0,e.maxTimeOut=100,e._extReg=/\.(\w+)\??/g,e}(EventDispatcher),LoaderManager=function(t){function e(){this.retryNum=1,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._resMap={},this._infoPool=[],this._maxPriority=5,this._failRes={},e.__super.call(this);for(var t=0;t<this._maxPriority;t++)this._resInfos[t]=[]}var i;__class(e,"laya.net.LoaderManager",t);var n=e.prototype;return n.load=function(t,e,n,s,a,r){if(void 0===a&&(a=1),void 0===r&&(r=!0),t instanceof Array)return this._loadAssets(t,e,n,r);var h=Loader.getRes(t);if(null!=h)e&&e.runWith(h),this._loaderCount||this.event("complete");else{var o=this._resMap[t];o?(e&&o.on("complete",e.caller,e.method,e.args),n&&o.on("progress",n.caller,n.method,n.args)):(o=this._infoPool.length?this._infoPool.pop():new i,o.url=t,o.type=s,o.cache=r,e&&o.on("complete",e.caller,e.method,e.args),n&&o.on("progress",n.caller,n.method,n.args),this._resMap[t]=o,a=a<this._maxPriority?a:this._maxPriority-1,this._resInfos[a].push(o),this._next())}return this},n._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var t=0;t<this._maxPriority;t++){var e=this._resInfos[t];if(e.length>0)return this._doLoad(e.shift())}this._loaderCount||this.event("complete")}},n._doLoad=function(t){function e(e){i.offAll(),n._loaders.push(i),n._endLoad(t,e),n._loaderCount--,n._next()}this._loaderCount++;var i=this._loaders.length?this._loaders.pop():new Loader;i.on("complete",null,e),i.on("progress",null,function(e){t.event("progress",e)}),i.on("error",null,function(t){e(null)});var n=this;i.load(t.url,t.type,t.cache)},n._endLoad=function(t,e){if(null===e){var i=this._failRes[t.url]||0;if(i<this.retryNum)return console.log("[warn]Retry to load:",t.url),this._failRes[t.url]=i+1,void this._resInfos[this._maxPriority-1].push(t);console.log("[error]Failed to load:",t.url),this.event("error",t.url)}delete this._resMap[t.url],t.event("complete",e),t.offAll(),this._infoPool.push(t)},n.clearRes=function(t){Loader.clearRes(t)},n.getRes=function(t){return Loader.getRes(t)},n.clearUnLoaded=function(){this._resInfos.length=0,this._loaderCount=0,this._resMap={}},n._loadAssets=function(t,e,i,n){function s(t,i){h++,t.progress=1,h===r&&e&&e.run()}function a(t,e){if(null!=i){t.progress=e;for(var n=0,s=0;r>s;s++){var a=l[s];n+=a.size*a.progress}var h=n/o;i.runWith(h)}}void 0===n&&(n=!0);for(var r=t.length,h=0,o=0,l=[],u=0;r>u;u++){var c=t[u];"string"==typeof c&&(c={url:c,type:"image",size:1,priority:1}),c.size||(c.size=1),c.progress=0,o+=c.size,l.push(c);var _=i?Handler.create(this,a,[c]):null;this.load(c.url,Handler.create(c,s,[c]),_,c.type,c.priority||1,n)}return this},e.cacheRes=function(t,e){Loader.cacheRes(t,e)},e.__init$=function(){i=function(t){function e(){this.url=null,this.type=null,this.cache=!1,e.__super.call(this)}return __class(e,"",t),e}(EventDispatcher)},e}(EventDispatcher),Socket=function(t){function e(t,i,n){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._host=null,this._port=0,this._addInputPosition=0,this._input=null,this._output=null,this._bytes=null,this.timeout=0,this.objectEncoding=0,this._byteClass=null,void 0===i&&(i=0),e.__super.call(this),this._byteClass=n,this._byteClass=this._byteClass?this._byteClass:Byte,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,i>0&&65535>i&&this.connect(t,i)}__class(e,"laya.net.Socket",t);var i=e.prototype;return i.connect=function(t,e){var i=this;null!=this._socket&&this.close();var n="ws://"+t+":"+e;this._host=t,this._port=e,this._socket&&this.cleanSocket(),this._socket=new WebSocket(n),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._socket.onopen=function(t){var e=arguments;i.onOpenHandler(e)},this._socket.onmessage=function(t){i.onMessageHandler(t)},this._socket.onclose=function(t){var e=arguments;i.onCloseHandler(e)},this._socket.onerror=function(t){var e=arguments;i.onErrorHandler(e)},this._socket.binaryType="arraybuffer"},i.cleanSocket=function(){try{this._socket.close()}catch(t){}this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},i.close=function(){null!=this._socket&&this.cleanSocket()},i.onOpenHandler=function(t){arguments;this._connected=!0,this.event("open")},i.onMessageHandler=function(t){this._input.length>0&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var e=this._input.pos;if(!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,t&&t.data){var i=t.data;i&&("string"==typeof i?this._input.writeUTFBytes(i):this._input.writeArrayBuffer(i),this._addInputPosition=this._input.pos,this._input.pos=e),this.event("message",i)}},i.onCloseHandler=function(t){arguments;this.event("close")},i.onErrorHandler=function(t){arguments;this.event("error")},i.sendString=function(t){this._socket.send(t)},i.flush=function(){if(this._output&&this._output.length>0)try{this._socket&&this._socket.send(this._output.__getBuffer()),this._output.endian=this.endian,this._output.clear()}catch(t){}},__getset(0,i,"input",function(){return this._input}),__getset(0,i,"output",function(){return this._output}),__getset(0,i,"connected",function(){return this._connected}),__getset(0,i,"endian",function(){return this._endian},function(t){this._endian=t,null!=this._input&&(this._input.endian=t),null!=this._output&&(this._output.endian=t)}),e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian",e}(EventDispatcher),Resource=function(t){function e(){this._id=0,this._name=null,this._resourceManager=null,this._lastUseFrameCount=0,this._memorySize=0,this._released=!1,this.lock=!1,e.__super.call(this),this._$1__id=++e._uniqueIDCounter,e._loadedResources.push(this),e._isLoadedResourcesSorted=!1,this._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,ResourceManager.currentResourceManager&&ResourceManager.currentResourceManager.addResource(this)}__class(e,"laya.resource.Resource",t);var i=e.prototype;return Laya.imps(i,{"laya.resource.IDispose":!0}),i.recreateResource=function(){this.startCreate(),this.compoleteCreate()},i.detoryResource=function(){},i.activeResource=function(t){void 0===t&&(t=!1),this._lastUseFrameCount=Stat.loopCount,(this._released||t)&&this.recreateResource()},i.releaseResource=function(){return this.lock?!1:(this._released||(this.detoryResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this)),!0)},i.setUniqueName=function(t){for(var i=!0,n=0;n<e._loadedResources.length;n++)if(e._loadedResources[n]._name===t&&e._loadedResources[n]!==this)return void(i=!1);i?this.name!=t&&(this.name=t,e._isLoadedResourcesSorted=!1):this.setUniqueName(t.concat("-copy"))},i.dispose=function(){if(null!==this._resourceManager)throw new Error("附属于resourceManager的资源不能独立释放！");this.lock=!1,this.releaseResource();var t=e._loadedResources.indexOf(this);-1!==t&&(e._loadedResources.splice(t,1),e._isLoadedResourcesSorted=!1)},i.startCreate=function(){this.event("recovering",this)},i.compoleteCreate=function(){this._released=!1,this.event("recovered",this)},__getset(0,i,"id",function(){return this._$1__id}),__getset(0,i,"lastUseFrameCount",function(){return this._lastUseFrameCount}),__getset(0,i,"name",function(){return this._name},function(t){!t&&""===t||this.name===t||(this._name=t,e._isLoadedResourcesSorted=!1)}),__getset(0,i,"resourceManager",function(){return this._resourceManager}),__getset(0,i,"memorySize",function(){return this._memorySize},function(t){var e=t-this._memorySize;this._memorySize=t,this.event("memorychanged",e)}),__getset(0,i,"released",function(){return this._released}),__getset(1,e,"sortedLoadedResourcesByName",function(){return e._isLoadedResourcesSorted||(e._isLoadedResourcesSorted=!0,e._loadedResources.sort(e.compareResourcesByName)),e._loadedResources},laya.events.EventDispatcher._$SET_sortedLoadedResourcesByName),e.getLoadedResourceByIndex=function(t){return e._loadedResources[t]},e.getLoadedResourcesCount=function(){return e._loadedResources.length},e.compareResourcesByName=function(t,e){if(t===e)return 0;var i=t.name,n=e.name;if(null===i)return null===n?0:-1;if(null==n)return 1;var s=i.localeCompare(n);return 0!=s?s:(e.setUniqueName(n),n=e.name,i.localeCompare(n))},e.animationCache={},e.meshCache={},e._uniqueIDCounter=0,e._loadedResources=[],e._isLoadedResourcesSorted=!1,e}(EventDispatcher),Texture=function(t){function e(t,i,n){this._w=0,this._h=0,this.offsetX=0,this.offsetY=0,this.canInAtlas=!0,void 0===n&&(n=!0),e.__super.call(this),this.set(t,i,n)}__class(e,"laya.resource.Texture",t);var i=e.prototype;return i.set=function(t,i,n){if(void 0===n&&(n=!0),this.bitmap=t,this.uv=i||e.DEF_UV,n=n,t){this._w=t.width,this._h=t.height,this._loaded=this._w>0;var s=this;if(this._loaded)System.addToAtlas&&System.addToAtlas(s);else{var a=t;a instanceof laya.resource.HTMLImage&&a.image&&a.image.addEventListener("load",function(t){System.addToAtlas&&System.addToAtlas(s)},!1)}}},i.active=function(){this.bitmap.activeResource()},i.destroy=function(){this.bitmap=null},i.load=function(t){var e=this;this._loaded=!1;var i=this.bitmap||(this.bitmap=new HTMLImage),n=this;i.onload=function(){i.onload=null,n._loaded=!0,e._w=i.width,e._h=i.height,n.event("loaded",this),System.addToAtlas&&System.addToAtlas(n)},i.src=URL.formatURL(t)},__getset(0,i,"height",function(){return this._h?this._h:this.uv&&this.uv!==e.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(t){this._h=t}),__getset(0,i,"loaded",function(){return this._loaded}),__getset(0,i,"released",function(){return this.bitmap.released}),__getset(0,i,"repeat",null,function(t){var e=this.bitmap;e.repeat=t}),__getset(0,i,"source",function(){return this.bitmap.activeResource(),this.bitmap.source}),__getset(0,i,"width",function(){return this._w?this._w:this.uv&&this.uv!==e.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(t){this._w=t}),e.moveUV=function(t,e,i){for(var n=0;8>n;n+=2)i[n]+=t,i[n+1]+=e;return i},e.create=function(t,i,n,s,a,r,h,o){void 0===r&&(r=0),void 0===h&&(h=0),void 0===o&&(o=!0);var l=t.uv||e.DEF_UV,u=t.bitmap||t,c=new e(u,null,o);c.width=s,c.height=a,c.offsetX=r,c.offsetY=h;var _=1/u.width,m=1/u.height;i*=_,n*=m,s*=_,a*=m;var d=c.uv[0],p=c.uv[1],f=c.uv[4],g=c.uv[5],S=f-d,b=g-p,y=e.moveUV(l[0],l[1],[i,n,i+s,n,i+s,n+a,i,n+a]);return c.uv=[d+y[0]*S,p+y[1]*b,f-(1-y[2])*S,p+y[3]*b,f-(1-y[4])*S,g-(1-y[5])*b,d+y[6]*S,g-(1-y[7])*b],c},e.TEXTURE2D=1,e.TEXTURE3D=2,e.DEF_UV=[0,0,1,0,1,1,0,1],e.INV_UV=[0,1,1,1,1,0,0,0],e}(EventDispatcher),AutoBitmap=function(t){function e(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,e.__super.call(this)}__class(e,"laya.ui.AutoBitmap",t);var i=e.prototype;return i.destroy=function(){t.prototype.destroy.call(this),this._source=null,this._sizeGrid=null},i.changeSource=function(){var t=this._source;if(t){var i=this.width,n=this.height,s=this._sizeGrid,a=t.width,r=t.height;if(!s||a===i&&r===n)this.clear(),this.drawTexture(t,0,0,i,n);else{t.$_GID||(t.$_GID=Utils.getGID());var h=t.$_GID+"."+i+"."+n+"."+s.join(".");if(e.cmdCaches[h])return void(this.cmds=e.cmdCaches[h]);this.clear();var o=s[0],l=s[1],u=s[2],c=s[3];c+l>i&&(l=0),c&&o&&this.drawTexture(e.getTexture(t,0,0,c,o),0,0,c,o),l&&o&&this.drawTexture(e.getTexture(t,a-l,0,l,o),i-l,0,l,o),c&&u&&this.drawTexture(e.getTexture(t,0,r-u,c,u),0,n-u,c,u),l&&u&&this.drawTexture(e.getTexture(t,a-l,r-u,l,u),i-l,n-u,l,u),o&&this.drawTexture(e.getTexture(t,c,0,a-c-l,o),c,0,i-c-l,o),u&&this.drawTexture(e.getTexture(t,c,r-u,a-c-l,u),c,n-u,i-c-l,u),c&&this.drawTexture(e.getTexture(t,0,o,c,r-o-u),0,o,c,n-o-u),l&&this.drawTexture(e.getTexture(t,a-l,o,l,r-o-u),i-l,o,l,n-o-u),this.drawTexture(e.getTexture(t,c,o,a-c-l,r-o-u),c,o,i-c-l,n-o-u),this.autoCacheCmd&&(e.cmdCaches[h]=this._cmds)}this._repaint()}},__getset(0,i,"sizeGrid",function(){return this._sizeGrid},function(t){this._sizeGrid=t,Laya.timer.callLater(this,this.changeSource)}),__getset(0,i,"source",function(){return this._source},function(t){t?(this._source=t,Laya.timer.callLater(this,this.changeSource)):(this._source=null,this.clear())}),__getset(0,i,"width",function(){return this._width?this._width:this._source?this._source.width:0},function(t){this._width=t,Laya.timer.callLater(this,this.changeSource)}),__getset(0,i,"height",function(){return this._height?this._height:this._source?this._source.height:0},function(t){this._height=t,Laya.timer.callLater(this,this.changeSource)}),e.getTexture=function(t,i,n,s,a){t.$GID||(t.$GID=Utils.getGID());var r=t.$GID+"."+i+"."+n+"."+s+"."+a,h=e.textureCache[r];return h||(h=e.textureCache[r]=Texture.create(t,i,n,s,a)),h},e.clearCache=function(){e.cmdCaches={},e.textureCache={}},e.cmdCaches={},e.textureCache={},e}(Graphics),UIEvent=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.UIEvent",t),e.SHOW_TIP="showtip",e.HIDE_TIP="hidetip",e}(Event),GraphicsGL=function(t){function e(){e.__super.call(this)}__class(e,"laya.webgl.display.GraphicsGL",t);var i=e.prototype;return i.setShader=function(t){this._saveToCmd(Render.context._setShader,arguments)},i.setIBVB=function(t,e,i,n,s,a){this._saveToCmd(Render.context._setIBVB,arguments)},i.drawParticle=function(t,e,i){var n=System.createParticleTemplate2D(i);n.x=t,n.y=e,this._saveToCmd(Render.context.drawParticle,[n])},e}(Graphics),WebGLContext2D=function(t){function e(t){this._x=0,this._y=0,this._id=++e._COUNT,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._submits=[],this._mergeID=0,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,e.__super.call(this),this._path=new Path,this._width=99999999,this._height=99999999,this._clipRect=e.MAXCLIPRECT,this._shader2D=new Shader2D,this.drawTexture=this._drawTextureM,this._canvas=t,this._curMat=Matrix.create(),this._ib=Buffer.QuadrangleIB,this._vb=new Buffer(34962),this._vb.getFloat32Array(),this._other=i.DEFAULT,this._save=[SaveMark.Create(this)],this._save.length=10,this.clear()}var i;__class(e,"laya.webgl.canvas.WebGLContext2D",t);var n=e.prototype;return n.clearBG=function(t,e,i,n){var s=WebGL.mainContext;s.clearColor(t,e,i,n),s.clear(16640)},n._getSubmits=function(){return this._submits},n.destroy=function(){this._curMat&&this._curMat.destroy(),this._targets&&this._targets.destroy(),this._vb&&this._vb.releaseResource(),this._ib&&this._ib!=Buffer.QuadrangleIB&&this._ib.releaseResource()},n.clear=function(){this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=i.DEFAULT,this._clear=!0,this._mergeID=0,this._repaint=!1,this._drawCount=1,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=e.MAXCLIPRECT,this._curSubmit=Submit.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=DrawStyle.DEFAULT;for(var t=0,n=this._submits._length;n>t;t++)this._submits[t].releaseRender();this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},n.size=function(t,e){this._width=t,this._height=e,this._targets&&this._targets.size(t,e)},n._getTransformMatrix=function(){return this._curMat},n.translate=function(t,e){(0!==t||0!==e)&&(SaveTranslate.save(this),this._curMat.bTransform&&(SaveTransform.save(this),this._curMat.transformPoint(t,e,Point.TEMP),t=Point.TEMP.x,e=Point.TEMP.y),this._x+=t,this._y+=e)},n.save=function(){this._save[this._save._length++]=SaveMark.Create(this)},n.restore=function(){var t=this._save._length;if(!(1>t))for(var e=t-1;e>=0;e--){var i=this._save[e];if(i.restore(this),i.isSaveMark())return void(this._save._length=e)}},n.measureText=function(t){return Utils.measureText(t,this._other.font.toString())},n._fillText=function(t,i,n,s,a,r,h){var o=this._shader2D,l=this._curSubmit.shaderValue,u=a?(e._fontTemp.setFont(a),e._fontTemp):this._other.font;if(AtlasManager.enabled)o.ALPHA!==l.ALPHA&&(o.glTexture=null),DrawText.drawText(this,t,i,this._curMat,u,h||this._other.textAlign,r,null,-1,n,s);else{var c=this._shader2D.defines.getValue(),_=r?Color.create(r)._color:o.colorAdd;(o.ALPHA!==l.ALPHA||_!==o.colorAdd||l.colorAdd!==o.colorAdd)&&(o.glTexture=null,o.colorAdd=_),o.defines.add(64),DrawText.drawText(this,t,i,this._curMat,u,h||this._other.textAlign,null,null,-1,n,s),o.defines.setValue(c)}},n.fillWords=function(t,e,i,n,s){t.length>0&&this._fillText(null,t,e,i,n,s,null)},n.fillText=function(t,e,i,n,s,a){t.length>0&&this._fillText(t,null,e,i,n,s,a)},n.strokeText=function(t,i,n,s,a,r,h){if(0!==t.length){var o=this._shader2D,l=this._curSubmit.shaderValue,u=s?(e._fontTemp.setFont(s),e._fontTemp):this._other.font;if(AtlasManager.enabled)o.ALPHA!==l.ALPHA&&(o.glTexture=null),DrawText.drawText(this,t,null,this._curMat,u,h||this._other.textAlign,null,a,r||1,i,n);else{var c=this._shader2D.defines.getValue(),_=a?Color.create(a)._color:o.colorAdd;(o.ALPHA!==l.ALPHA||_!==o.colorAdd||l.colorAdd!==o.colorAdd)&&(o.glTexture=null,o.colorAdd=_),o.defines.add(64),DrawText.drawText(this,t,null,this._curMat,u,h||this._other.textAlign,null,a,r||1,i,n),o.defines.setValue(c)}}},n.fillBorderText=function(t,i,n,s,a,r,h,o){if(0!==t.length){if(!AtlasManager.enabled)return this.strokeText(t,i,n,s,r,h,o),void this.fillText(t,i,n,s,a,o);var l=this._shader2D,u=this._curSubmit.shaderValue;l.ALPHA!==u.ALPHA&&(l.glTexture=null);var c=s?(e._fontTemp.setFont(s),e._fontTemp):this._other.font;DrawText.drawText(this,t,null,this._curMat,c,o||this._other.textAlign,a,r,h||1,i,n)}},n.fillRect=function(t,e,i,n,s){var a=this._vb;if(GlUtils.fillRectImgVb(a,this._clipRect,t,e,i,n,Texture.DEF_UV,this._curMat,this._x,this._y,0,0)){var r=this._shader2D.fillStyle;s&&(this._shader2D.fillStyle=new DrawStyle(s));var h=this._shader2D,o=this._curSubmit.shaderValue;if(h.fillStyle!==o.fillStyle||h.ALPHA!==o.ALPHA){h.glTexture=null;var l=this._curSubmit=Submit.create(this,0,this._mergeID,this._ib,a,(a._length-64)/32*3,Value2D.create(2,0));l.shaderValue.color=h.fillStyle._color._color,l.shaderValue.ALPHA=h.ALPHA,this._submits[this._submits._length++]=l}this._curSubmit._numEle+=6,this._shader2D.fillStyle=r}},n.setShader=function(t){SaveBase.save(this,524288,this._shader2D,!0),this._shader2D.shader=t},n.setFilters=function(t){SaveBase.save(this,1048576,this._shader2D,!0),this._shader2D.filters=t,this._curSubmit=Submit.RENDERBASE,this._drawCount++,this._mergeID=0},n._findSameSubmit=function(t){for(var e=this._submits._length-1;e>=0;e--){var i=this._submits[e];if(i._mergID&&i._mergID!==this._mergeID)break;if(i._submitID===t)return i}return null},n._drawTextureM=function(t,e,i,n,s,a,r,h){if(!(t.loaded&&t.bitmap&&t.source))return void(this._targets&&(this._targets.repaint=!0));var o=t.bitmap,l=this._shader2D,u=this._curSubmit.shaderValue;if(this._drawCount++,l.glTexture!==o||l.ALPHA!==u.ALPHA){l.glTexture=o;var c=this._vb,_=null,m=NaN,d=c._length/32*3;this._mergeID&&(m=o.id+l.ALPHA/10,_=this._findSameSubmit(m),c=null),_||(_=Submit.create(this,m,this._mergeID,this._ib,c,d,Value2D.create(1,0)),this._submits[this._submits._length++]=_,_.shaderValue.textureHost=t),this._curSubmit=_}GlUtils.fillRectImgVb(this._curSubmit._vb||this._vb,this._clipRect,e+a+t.offsetX,i+r+t.offsetY,n||t.width,s||t.height,t.uv,h||this._curMat,this._x,this._y,0,0)&&(this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},n.drawImage=function(t){var e=arguments,i=e[0],n=i.__texture||(i.__texture=new Texture(new WebGLImage(i)));switch(n.uv=Texture.DEF_UV,e.length){case 3:i.__width||(i.__width=i.width,i.__height=i.height),this.drawTexture(n,e[1],e[2],i.__width,i.__height,0,0);break;case 5:this.drawTexture(n,e[1],e[2],e[3],e[4],0,0);break;case 9:var s=e[1]/i.__width,a=(e[1]+e[3])/i.__width,r=e[2]/i.__height,h=(e[2]+e[4])/i.__height;n.uv=[s,r,a,r,a,h,s,h],this.drawTexture(n,e[5],e[6],e[7],e[8],0,0)}},n._drawText=function(t,e,i,n,s,a,r,h,o,l){var u=t.bitmap,c=this._shader2D;this._curSubmit.shaderValue;if(this._drawCount++,
c.glTexture!==u){c.glTexture=u;var _=this._vb,m=null,d=NaN,p=_._length/32*3;this._mergeID&&(d=u.id+c.ALPHA/10+(AtlasManager.enabled?0:c.colorAdd.__id/1e4),m=this._findSameSubmit(d),_=null),m||(AtlasManager.enabled?m=Submit.create(this,d,this._mergeID,this._ib,_,p,Value2D.create(1,0)):(m=Submit.create(this,d,this._mergeID,this._ib,_,p,TextSV.create()),m.shaderValue.colorAdd=c.colorAdd,m.shaderValue.defines.add(64)),m.shaderValue.textureHost=t,this._submits[this._submits._length++]=m),this._curSubmit=m}t.active(),GlUtils.fillRectImgVb(this._curSubmit._vb||this._vb,this._clipRect,e+r,i+h,n||t.width,s||t.height,t.uv,a||this._curMat,this._x,this._y,o,l)&&(this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},n.drawTextureWithTransform=function(t,i,n,s,a,r,h,o){var l=this._curMat;(0!==h||0!==o)&&(this._x=h*l.a+o*l.c,this._y=o*l.d+h*l.b),r&&l.bTransform?(Matrix.mul(r,l,e._tmpMatrix),r=e._tmpMatrix,r._checkTransform()):(this._x+=l.tx,this._y+=l.ty),this._drawTextureM(t,i,n,s,a,0,0,r),this._x=this._y=0},n.fillQuadrangle=function(t,e,i,n,s){var a=this._curSubmit,r=this._vb,h=this._shader2D,o=a.shaderValue;if(t.bitmap){var l=t.bitmap;(h.glTexture!=l||h.ALPHA!==o.ALPHA)&&(h.glTexture=l,a=this._curSubmit=Submit.create(this,0,this._mergeID,this._ib,r,r._length/32*3,Value2D.create(1,0)),a.shaderValue.glTexture=l,this._submits[this._submits._length++]=a),GlUtils.fillQuadrangleImgVb(r,e,i,n,t.uv,s||this._curMat,this._x,this._y)}else a.shaderValue.fillStyle&&a.shaderValue.fillStyle.equal(t)&&h.ALPHA===o.ALPHA||(h.glTexture=null,a=this._curSubmit=Submit.create(this,0,this._mergeID,this._ib,r,r._length/32*3,Value2D.create(2,0)),a.shaderValue.defines.add(2),a.shaderValue.fillStyle=new DrawStyle(t),this._submits[this._submits._length++]=a),GlUtils.fillQuadrangleImgVb(r,e,i,n,Texture.DEF_UV,s||this._curMat,this._x,this._y);a._numEle+=6},n.drawTexture2=function(t,i,n,s,a,r,h,o){var l=this._curMat;if(this._x=t*l.a+i*l.c,this._y=i*l.d+t*l.b,a&&l.bTransform&&(Matrix.mul(a,l,e._tmpMatrix),a=e._tmpMatrix),1!==r||h){var u=this._shader2D.ALPHA,c=this._nBlendType;this._shader2D.ALPHA=r,h&&(this._nBlendType=BlendMode.TOINT(h)),this._drawTextureM(o[0],o[1]-n,o[2]-s,o[3],o[4],0,0,a),this._shader2D.ALPHA=u,this._nBlendType=c}else this._drawTextureM(o[0],o[1]-n,o[2]-s,o[3],o[4],0,0,a);this._x=this._y=0},n.drawCanvas=function(t,e,i,n,s){var a=t.context;if(a._targets)this._submits[this._submits._length++]=SubmitCanvas.create(a,0,null),this._curSubmit=Submit.RENDERBASE,a._targets.drawTo(this,e,i,n,s);else{var r=this._submits[this._submits._length++]=SubmitCanvas.create(a,this._shader2D.ALPHA,this._shader2D.filters),h=n/t.width,o=s/t.height,l=r._matrix;this._curMat.copy(l),1!=h&&1!=o&&l.scale(h,o);var u=l.tx,c=l.ty;l.tx=l.ty=0,l.transformPoint(e,i,Point.TEMP),l.translate(Point.TEMP.x+u,Point.TEMP.y+c),this._curSubmit=Submit.RENDERBASE}Config.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=a._targets?"yellow":"green",this.strokeRect(e-1,i-1,n+2,s+2),this.strokeRect(e,i,n,s),this.restore())},n.drawTarget=function(t,e,i,n,s,a,r,h,o){var l=this._vb;if(GlUtils.fillRectImgVb(l,this._clipRect,e,i,n,s,o||Texture.DEF_UV,a||this._curMat,this._x,this._y,0,0)){var u=this._shader2D;u.glTexture=null;var c=(this._curSubmit.shaderValue,this._curSubmit=SubmitTarget.create(this,this._ib,l,(l._length-64)/32*3,h,r));c.scope=t,this._submits[this._submits._length++]=c,this._curSubmit._numEle+=6}},n.transform=function(t,e,i,n,s,a){SaveTransform.save(this),Matrix.mul(Matrix.TEMP.setTo(t,e,i,n,s,a),this._curMat,this._curMat),this._curMat._checkTransform()},n.setTransformByMatrix=function(t){t.copy(this._curMat)},n.transformByMatrix=function(t){SaveTransform.save(this),Matrix.mul(t,this._curMat,this._curMat),this._curMat._checkTransform()},n.rotate=function(t){SaveTransform.save(this),this._curMat.rotate(t)},n.scale=function(t,e){SaveTransform.save(this),this._curMat.scale(t,e)},n.clipRect=function(t,e,i,n){i*=this._curMat.a,n*=this._curMat.d;var s=Point.TEMP;this._curMat.transformPoint(t,e,s);var a=this._curSubmit=SubmitScissor.create(this);this._submits[this._submits._length++]=a,a.submitIndex=this._submits._length,a.submitLength=9999999,SaveClipRect.save(this,a);var r=this._clipRect,h=r.x,o=r.y,l=s.x+i,u=s.y+n;h<s.x&&(r.x=s.x),o<s.y&&(r.y=s.y),r.width=Math.min(l,h+r.width)-r.x,r.height=Math.min(u,o+r.height)-r.y,this._shader2D.glTexture=null,a.clipRect.copyFrom(r),this._curSubmit=Submit.RENDERBASE,this._mergeID=0},n.setIBVB=function(t,e,i,n,s,a,r,h,o,l){if(void 0===o&&(o=0),void 0===l&&(l=0),null===i&&(GlUtils.expandIBQuadrangle(this._ib,n.length/64+8),i=this._ib),!h||!r)throw Error("setIBVB must input:shader shaderValues");var u=SubmitOtherIBVB.create(this,n,i,s,r,h,o,l);a||(a=Matrix.EMPTY),a.translate(t,e),Matrix.mul(a,this._curMat,u._mat),a.translate(-t,-e),this._submits[this._submits._length++]=u,this._curSubmit=Submit.RENDERBASE},n.addRenderObject=function(t){this._submits[this._submits._length++]=t},n.fillTrangles=function(t,e,i,n,s){var a=this._curSubmit,r=this._vb,h=this._shader2D,o=a.shaderValue,l=n.length>>4,u=t.bitmap;(h.glTexture!=u||h.ALPHA!==o.ALPHA)&&(a=this._curSubmit=Submit.create(this,0,this._mergeID,this._ib,r,r._length/32*3,Value2D.create(1,0)),a.shaderValue.textureHost=t,this._submits[this._submits._length++]=a),GlUtils.fillTranglesVB(r,e,i,n,s||this._curMat,this._x,this._y),a._numEle+=6*l},n.arc=function(t,e,i,n,s,a){void 0===a&&(a=!0)},n.fill=function(){},n.closePath=function(){},n.beginPath=function(){this._other=this._other.make(),this._other.path||(this._other.path=new Path),this._other.path.clear()},n.rect=function(t,e,i,n){this._other=this._other.make(),this._other.path||(this._other.path=new Path),this._other.path.rect(t,e,i,n)},n.strokeRect=function(t,e,i,n,s){void 0===s&&(s=1),this.line(t,e,t+i,e,s/2,this._curMat),this.line(t+i,e,t+i,e+n,s/2,this._curMat),this.line(t,e,t,e+n,s/2,this._curMat),this.line(t,e+n,t+i,e+n,s/2,this._curMat)},n.clip=function(){},n.stroke=function(){if(this._other!==i.DEFAULT){if(this._other.path._rect){var t=this._other.path._rect;this.strokeRect(t.x,t.y,t.width,t.height,this._other.lineWidth)}this._other.path.clear()}},n.moveTo=function(t,e){this._other.path._x=t,this._other.path._y=e},n.lineTo=function(t,e){this.line(this._other.path._x,this._other.path._y,t,e,this._other.lineWidth/2,this._curMat)},n.line=function(t,e,i,n,s,a){var r=this._curSubmit,h=this._vb;if(GlUtils.fillLineVb(h,this._clipRect,t,e,i,n,s,a)){var o=this._shader2D,l=r.shaderValue;(o.strokeStyle!==l.strokeStyle||o.ALPHA!==l.ALPHA)&&(o.glTexture=null,r=this._curSubmit=Submit.create(this,0,this._mergeID,this._ib,h,(h._length-64)/32*3,Value2D.create(2,0)),r.shaderValue.strokeStyle=o.strokeStyle,r.shaderValue.mainID=2,r.shaderValue.ALPHA=o.ALPHA,this._submits[this._submits._length++]=r),r._numEle+=6}},n.submitElement=function(t,e){var i=this._submits;for(0>e&&(e=i._length);e>t;)t+=i[t].renderSubmit()},n.finish=function(){WebGL.mainContext.finish()},n.flush=function(){this._ib.upload_bind();var t=Math.max(this._vb.length/64,this._maxNumEle/6)+8;return t>this._ib.bufferLength/12&&GlUtils.expandIBQuadrangle(this._ib,t),this._vb.upload_bind(),this.submitElement(0,this._submits._length),this._path.reset(),Value2D.reset(),this._curSubmit=Submit.RENDERBASE,this._submits._length},n.fan=function(t,e,i,n,s,a,r){this._path.fan(t,e,i,n,s,a,this._other.lineWidth?this._other.lineWidth:1,r),this._path.update();var h=Submit.createShape(this,this._path.ib,this._path.vb,this._path.count,this._path.offset,Value2D.create(4,0));this._submits[this._submits._length++]=h},n.drawPoly=function(t,e,i,n,s,a,r){this._path.polygon(t,e,i,n,r,a?a:1,s),this._path.update();var h=Submit.createShape(this,this._path.ib,this._path.vb,this._path.count,this._path.offset,Value2D.create(4,0));h.shaderValue.ALPHA=this._shader2D.ALPHA,h.shaderValue.u_mmat2=RenderState2D.mat2MatArray(this._curMat,RenderState2D.TEMPMAT4_ARRAY),this._submits[this._submits._length++]=h},n.drawPath=function(t,e,i,n,s){this._path.drawPath(t,e,i,n,s),this._path.update();var a=Submit.createShape(this,this._path.ib,this._path.vb,this._path.count,this._path.offset,Value2D.create(4,0));this._submits[this._submits._length++]=a},n.drawParticle=function(t,e,i){i.x=t,i.y=e,this._submits[this._submits._length++]=i},n.drawLines=function(t,e,i,n,s){var a=Point.TEMP;this._curMat.transformPoint(t,e,a),this._curMat.bTransform&&(i=i.concat(),this._curMat.transformPointArrayScale(i,i)),this._path.drawPath(a.x,a.y,i,n,s),this._path.update();var r=Submit.createShape(this,this._path.ib,this._path.vb,this._path.count,this._path.offset,Value2D.create(4,0));this._submits[this._submits._length++]=r},__getset(0,n,"asBitmap",null,function(t){if(t){if(this._targets||(this._targets=new RenderTargetMAX),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.size(this._width,this._height)}else this._targets=null}),__getset(0,n,"fillStyle",function(){return this._shader2D.fillStyle},function(t){this._shader2D.fillStyle.equal(t)||(SaveBase.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=new DrawStyle(t))}),__getset(0,n,"globalCompositeOperation",function(){return BlendMode.NAMES[this._nBlendType]},function(t){var e=BlendMode.TOINT[t];null==e||this._nBlendType===e||(SaveBase.save(this,65536,this,!0),this._curSubmit=Submit.RENDERBASE,this._nBlendType=e)}),__getset(0,n,"textAlign",function(){return this._other.textAlign},function(t){this._other.textAlign===t||(this._other=this._other.make(),SaveBase.save(this,32768,this._other,!1),this._other.textAlign=t)}),__getset(0,n,"globalAlpha",function(){return this._shader2D.ALPHA},function(t){t=Math.floor(1e3*t)/1e3,t!=this._shader2D.ALPHA&&(SaveBase.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=t)}),__getset(0,n,"textBaseline",function(){return this._other.textBaseline},function(t){this._other.textBaseline===t||(this._other=this._other.make(),SaveBase.save(this,16384,this._other,!1),this._other.textBaseline=t)}),__getset(0,n,"enableMerge",function(){return this._mergeID>0},function(t){SaveBase.save(this,8192,this,!0),this._mergeID=this._drawCount}),__getset(0,n,"strokeStyle",function(){return this._shader2D.strokeStyle},function(t){this._shader2D.strokeStyle.equal(t)||(SaveBase.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=new DrawStyle(t))}),__getset(0,n,"lineWidth",function(){return this._other.lineWidth},function(t){this._other.lineWidth===t||(this._other=this._other.make(),SaveBase.save(this,256,this._other,!1),this._other.lineWidth=t)}),__getset(0,n,"font",null,function(t){t!=this._other.font.toString()&&(this._other=this._other.make(),SaveBase.save(this,8,this._other,!1),this._other.font===FontInContext.EMPTY?this._other.font=new FontInContext(t):this._other.font.setFont(t))}),e.__init__=function(){i.DEFAULT=new i},e._SUBMITVBSIZE=32e3,e._MAXSIZE=99999999,e._RECTVBSIZE=16,e.MAXCLIPRECT=new Rectangle(0,0,99999999,99999999),e._COUNT=0,e._tmpMatrix=new Matrix,__static(e,["_fontTemp",function(){return this._fontTemp=new FontInContext},"_drawStyleTemp",function(){return this._drawStyleTemp=new DrawStyle(null)}]),e.__init$=function(){i=function(){function t(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=FontInContext.EMPTY}__class(t,"");var e=t.prototype;return e.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=FontInContext.EMPTY},e.make=function(){return this===t.DEFAULT?new t:this},t.DEFAULT=null,t}()},e}(Context),BlurFilter=function(t){function e(t){void 0===t&&(t=4),e.__super.call(this),this.strength=t,this._action=System.createFilterAction(16),this._action.data=this}__class(e,"laya.filters.BlurFilter",t);var i=e.prototype;return __getset(0,i,"action",function(){return this._action}),__getset(0,i,"type",function(){return 16}),e}(Filter),GlowFilter=function(t){function e(t,i,n,s){this._blurX=!0,e.__super.call(this),this.elements=new Float32Array(9),void 0===i&&(i=4),void 0===n&&(n=6),void 0===s&&(s=6),WebGLFilter.enable(),this.color=t,this.blur=i,this.offX=n,this.offY=s,this._action=System.createFilterAction(8),this._action.data=this}__class(e,"laya.filters.GlowFilter",t);var i=e.prototype;return __getset(0,i,"type",function(){return 8}),__getset(0,i,"action",function(){return this._action}),__getset(0,i,"offX",function(){return this.elements[5]},function(t){this.elements[5]=t}),__getset(0,i,"offY",function(){return this.elements[6]},function(t){this.elements[6]=t}),__getset(0,i,"blur",function(){return this.elements[4]},function(t){this.elements[4]=t}),__getset(0,i,"color",function(){return this._color.strColor},function(t){this._color=Color.create(t)}),e}(Filter),RenderSprite3D=function(t){function e(t,i){e.__super.call(this,t,i)}__class(e,"laya.webgl.utils.RenderSprite3D",t);var i=e.prototype;return i.onCreate=function(t){switch(t){case 32:return void(this._fun=this._blend);case 8:return void(this._fun=this._transform)}},i._blend=function(t,e,i,n){var s,a,r=t._style;e.ctx.save(),t.mask?(s=SubmitStencil.create(1),e.addRenderObject(s),t.mask.render(e,i,n),s=SubmitStencil.create(2),e.addRenderObject(s),a=this._next,a._fun.call(a,t,e,i,n),s=SubmitStencil.create(3),e.ctx._curSubmit=Submit.RENDERBASE,e.addRenderObject(s)):(e.ctx.globalCompositeOperation=r.blendMode,a=this._next,a._fun.call(a,t,e,i,n)),e.ctx.restore()},i._transform=function(t,e,i,n){"use strict";var s=t.transform,a=this._next;if(s&&a!=RenderSprite.NORENDER){var r=e.ctx;t._style;s.tx=i,s.ty=n;var h=r._getTransformMatrix(),o=h.clone();Matrix.mul(s,h,h),h._checkTransform(),a._fun.call(a,t,e,0,0),o.copy(h),o.destroy(),s.tx=s.ty=0}else a._fun.call(a,t,e,i,n)},e}(RenderSprite),Value2D=function(t){function e(t,i){this.size=[0,0],this.alpha=1,this.mmat=null,this.ALPHA=1,this.shader=null,this.mainID=0,this.subID=0,this.filters=null,this.textureHost=null,this.texture=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._inClassCache=null,this._cacheID=0,e.__super.call(this),this.defines=new ShaderDefines2D,this.position=e._POSITION,this.mainID=t,this.subID=i,this.textureHost=null,this.texture=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=t|i,this._inClassCache=e._cache[this._cacheID],t>0&&!this._inClassCache&&(this._inClassCache=e._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}__class(e,"laya.webgl.shader.d2.value.Value2D",t);var i=e.prototype;return i.setValue=function(t){},i.refresh=function(){var t=this.size;return t[0]=RenderState2D.width,t[1]=RenderState2D.height,this.alpha=this.ALPHA*RenderState2D.worldAlpha,this.mmat=RenderState2D.worldMatrix4,this},i._ShaderWithCompile=function(){return Shader.withCompile(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,Shader2X.create)},i._withWorldShaderDefines=function(){var t=RenderState2D.worldShaderDefines,e=Shader.sharders[this.mainID|this.defines._value|t.getValue()];if(!e){var i,n,s={};i=this.defines.toNameDic();for(n in i)s[n]="";i=t.toNameDic();for(n in i)s[n]="";e=Shader.withCompile(0,this.mainID,s,this.mainID|this.defines._value|t.getValue(),Shader2X.create)}var a=RenderState2D.worldFilters;if(!a)return e;for(var r,h=a.length,o=0;h>o;o++)(r=a[o])&&r.action.setValue(this);return e},i.upload=function(){var t=RenderState2D;this.alpha=this.ALPHA*t.worldAlpha;var e,i=t.worldShaderDefines?this._withWorldShaderDefines():Shader.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();if(Shader.activeShader!==i)this.mmat=t.worldMatrix4,t.width!==i._shaderValueWidth||t.height!==i._shaderValueHeight?(this.size[0]=i._shaderValueWidth=t.width,this.size[1]=i._shaderValueHeight=t.height):e=i._params2dQuick2||i._make2dQuick2(),i.upload(this,e);else{var n=laya.webgl.shader.d2.value.Value2D.needRezise;if(n){this.size[0]=i._shaderValueWidth=t.width,this.size[1]=i._shaderValueHeight=t.height;var s=i._params2dQuick1;i._params2dQuick1=null,e=i._make2dQuick1(),i.upload(this,e),i._params2dQuick1=s}else e=i._params2dQuick1||i._make2dQuick1(),i.upload(this,e)}},i.setFilters=function(t){if(this.filters=t,t)for(var e,i=t.length,n=0;i>n;n++)e=t[n],e&&(this.defines.add(e.type),e.action.setValue(this))},i.clear=function(){this.defines.setValue(this.subID)},i.release=function(){this._inClassCache[this._inClassCache._length++]=this,this.clear()},e._initone=function(t,i){e._typeClass[t]=i,e._cache[t]=[],e._cache[t]._length=0},e.__init__=function(){e._POSITION=[2,5126,!1,4*CONST3D2D.BYTES_PE,0],e._TEXCOORD=[2,5126,!1,4*CONST3D2D.BYTES_PE,2*CONST3D2D.BYTES_PE],e._initone(2,Color2dSV),e._initone(4,PrimitiveSV),e._initone(1,TextureSV),e._initone(65,TextSV),e._initone(9,TextureSV)},e.create=function(t,i){var n=e._cache[t|i];return n._length?n[--n._length]:new e._typeClass[t|i](i)},e.reset=function(){laya.webgl.shader.d2.value.Value2D.needRezise&&(laya.webgl.shader.d2.value.Value2D.needRezise=!1)},e._POSITION=null,e._TEXCOORD=null,e.needRezise=!1,e._cache=[],e._typeClass=[],e}(ShaderValue),ColorFilterActionGL=function(t){function e(){this.data=null,e.__super.call(this)}__class(e,"laya.filters.webgl.ColorFilterActionGL",t);var i=e.prototype;return Laya.imps(i,{"laya.filters.IFilterActionGL":!0}),i.setValue=function(t){t.u_colorMatrix=this.data._elements},i.apply3d=function(t,e,i,n,s){var a=t.getValue("bounds"),r=Value2D.create(1,0);r.setFilters([this.data]),i.ctx.drawTarget(t,0,0,a.width+20,a.height+20,Matrix.EMPTY,"src",r)},e}(FilterActionGL),Atlaser=function(t){function e(t,i,n,s,a){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureValue=null,this._webGLImages=null,e.__super.call(this,t,i,a),this._inAtlasTextureKey=[],this._inAtlasTextureValue=[],this._webGLImages=[],this._atlasCanvas=new AtlasWebGLCanvas,this._atlasCanvas.width=n,this._atlasCanvas.height=s,this._atlasCanvas.activeResource()}__class(e,"laya.webgl.atlas.Atlaser",t);var i=e.prototype;return i.addToAtlasTexture=function(t,e,i){t instanceof laya.webgl.resource.WebGLImage&&this._webGLImages.push(t),t.offsetX=e,t.offsetY=i,this._atlasCanvas.texSubImage2D(t,e,i,t.image||t.canvas),t instanceof laya.webgl.resource.WebGLImage&&(t._image=null),t instanceof laya.webgl.resource.WebGLCharImage&&(t.canvas=null),t instanceof laya.webgl.resource.WebGLSubImage&&(t.canvas=null)},i.addToAtlas=function(t){this._inAtlasTextureKey.push(t),this._inAtlasTextureValue.push(t.bitmap),t.bitmap=this._atlasCanvas},i.clear=function(){for(var t=0,e=this._inAtlasTextureKey.length;e>t;t++)this._inAtlasTextureKey[t].bitmap=this._inAtlasTextureValue[t],this._inAtlasTextureKey[t].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureValue.length=0,this._webGLImages.length=0},i.destroy=function(){this.clear(),this._atlasCanvas.releaseResource()},__getset(0,i,"texture",function(){return this._atlasCanvas}),__getset(0,i,"webGLImages",function(){return this._webGLImages}),e}(AtlasGrid),ShaderDefines2D=function(t){function e(){e.__super.call(this,e.__name2int,e.__int2name,e.__int2nameMap)}return __class(e,"laya.webgl.shader.d2.ShaderDefines2D",t),e.__init__=function(){e.reg("TEXTURE2D",1),e.reg("COLOR2D",2),e.reg("PRIMITIVE",4),e.reg("GLOW_FILTER",8),e.reg("BLUR_FILTER",16),e.reg("COLOR_FILTER",32),e.reg("COLOR_ADD",64)},e.reg=function(t,i){ShaderDefines._reg(t,i,e.__name2int,e.__int2name)},e.toText=function(t,e,i){return ShaderDefines._toText(t,e,i)},e.toInt=function(t){return ShaderDefines._toInt(t,e.__name2int)},e.TEXTURE2D=1,e.COLOR2D=2,e.PRIMITIVE=4,e.FILTERGLOW=8,e.FILTERBLUR=16,e.FILTERCOLOR=32,e.COLORADD=64,e.__name2int={},e.__int2name=[],e.__int2nameMap=[],e}(ShaderDefines),BlurFilterActionGL=function(t){function e(){this.data,e.__super.call(this)}__class(e,"laya.filters.webgl.BlurFilterActionGL",t);var i=e.prototype;return i.setValueMix=function(t){t.defines.add(this.data.type)},i.apply3d=function(t,e,i,n,s){var a=t.getValue("bounds"),r=Value2D.create(1,0);r.setFilters([this.data]),i.ctx.drawTarget(t,0,0,a.width+20,a.height+20,Matrix.EMPTY,"src",r),r.setFilters(null)},i.setValue=function(t){t.strength=this.data.strength},__getset(0,i,"typeMix",function(){return 16}),e}(FilterActionGL),GlowFilterActionGL=function(t){function e(){this.data=null,this._initKey=!1,this._textureWidth=0,this._textureHeight=0,e.__super.call(this)}__class(e,"laya.filters.webgl.GlowFilterActionGL",t);var i=e.prototype;return Laya.imps(i,{"laya.filters.IFilterActionGL":!0}),i.setValueMix=function(t){},i.apply3d=function(t,i,n,s,a){var r=t.getValue("bounds"),h=r.width,o=r.height;this._textureWidth=h+20,this._textureHeight=o+20;var l=SubmitCMD.create([t,i,n,0,0],e.tmpTarget);n.ctx.addRenderObject(l);var u,c=Matrix.TEMP;return u=Value2D.create(1,0),u.setFilters([this.data]),n.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,c,"src",u),l=SubmitCMD.create([t,i,n,0,0],e.startOut),n.ctx.addRenderObject(l),u=Value2D.create(1,0),n.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,c,"tmpTarget",u,Texture.INV_UV),u=Value2D.create(1,0),n.ctx.drawTarget(t,0,0,this._textureWidth,this._textureHeight,c,"src",u),l=SubmitCMD.create([t,i,n,0,0],e.recycleTarget),n.ctx.addRenderObject(l),null},i.setValue=function(t){t.u_offsetX=this.data.offX,t.u_offsetY=-this.data.offY,t.u_strength=1,t.u_blurX=this.data.blur,t.u_blurY=this.data.blur,t.u_textW=this._textureWidth,t.u_textH=this._textureHeight,t.u_color=this.data._color._color},__getset(0,i,"typeMix",function(){return 8}),e.tmpTarget=function(t,e,i,n,s){var a=t.getValue("bounds"),r=t.getValue("out");r.end();var h=RenderTarget2D.create(a.width+20,a.height+20);h.start(),h.clear(0,0,0,0),t.addValue("tmpTarget",h)},e.startOut=function(t,e,i,n,s){var a=t.getValue("tmpTarget");a.end();var r=t.getValue("out");r.start()},e.recycleTarget=function(t,e,i,n,s){var a=(t.getValue("src"),t.getValue("tmpTarget"));a.recycle()},e}(FilterActionGL),Circle=function(t){function e(t,i,n,s,a,r,h){e.__super.call(this,t,i,n,n,80,s,a,r),this.fill=h}return __class(e,"laya.webgl.shapes.Circle",t),e}(BasePoly),Ellipse=function(t){function e(t,i,n,s,a,r,h){e.__super.call(this,t,i,n,s,40,a,r,h)}return __class(e,"laya.webgl.shapes.Ellipse",t),e}(BasePoly),Fan=function(t){function e(t,i,n,s,a,r,h,o,l){void 0===l&&(l=0),e.__super.call(this,t,i,n,n,30,r,h,o,l),this.r0=s,this.r1=a}__class(e,"laya.webgl.shapes.Fan",t);var i=e.prototype;return i.getData=function(t,e,i){var n=[],s=[];if(this.sector(s,n,i),this.fill)this.borderWidth>0&&-1!=this.borderColor&&this.createFanLine(s,n,this.borderWidth,i+s.length/5,null,null),t.append(new Uint16Array(n)),e.append(new Float32Array(s));else{var a=[],r=[];-1!=this.borderColor&&this.borderWidth>0&&this.createFanLine(s,n,this.borderWidth,i,a,r),t.append(new Uint16Array(r)),e.append(new Float32Array(a))}},e}(BasePoly),Line=function(t){function e(t,i,n,s,a){this.points,e.__super.call(this,t,i,0,0,0,s,a,s,0),this.points=n}__class(e,"laya.webgl.shapes.Line",t);var i=e.prototype;return i.getData=function(t,e,i){var n=[],s=[];this.borderWidth>0&&this.createLine2(this.points,n,this.borderWidth,i,s,this.points.length/2),t.append(new Uint16Array(n)),e.append(new Float32Array(s))},e}(BasePoly),Polygon=function(t){function e(t,i,n,s,a,r,h){e.__super.call(this,t,i,n,n,s,a,r,h)}return __class(e,"laya.webgl.shapes.Polygon",t),e}(BasePoly),Rect=function(t){function e(t,i,n,s,a,r,h){e.__super.call(this,t+n/2,i+s/2,n/2,s/2,4,a,r,h)}return __class(e,"laya.webgl.shapes.Rect",t),e}(BasePoly),EventEmitter=function(t){function e(){e.__super.call(this)}__class(e,"base.event.EventEmitter",t);var i=e.prototype;return i.Emit=function(t,e){this.event(t,e)},i.AddNoti=function(t,e,i,n){this.on(t,e,i,null==n?null:[n])},i.DelNoti=function(t,e,i){this.off(t,e,i)},e}(EventDispatcher),SubmitCanvas=function(t){function e(){this._matrix=new Matrix,this._matrix4=CONST3D2D.defaultMatrix4.concat(),e.__super.call(this,1),this.shaderValue=new Value2D(0,0)}__class(e,"laya.webgl.submit.SubmitCanvas",t);var i=e.prototype;return i.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var t=RenderState2D.worldAlpha,e=RenderState2D.worldMatrix4,i=RenderState2D.worldMatrix,n=RenderState2D.worldFilters,s=RenderState2D.worldShaderDefines,a=this.shaderValue,r=this._matrix,h=this._matrix4,o=Matrix.TEMP;return Matrix.mul(r,i,o),h[0]=o.a,h[1]=o.b,h[4]=o.c,h[5]=o.d,h[12]=o.tx,h[13]=o.ty,RenderState2D.worldMatrix=o.clone(),RenderState2D.worldMatrix4=h,RenderState2D.worldAlpha=RenderState2D.worldAlpha*a.alpha,a.filters&&a.filters.length&&(RenderState2D.worldFilters=a.filters,RenderState2D.worldShaderDefines=a.defines),this._ctx_src.flush(),RenderState2D.worldAlpha=t,RenderState2D.worldMatrix4=e,RenderState2D.worldMatrix.destroy(),RenderState2D.worldMatrix=i,RenderState2D.worldFilters=n,RenderState2D.worldShaderDefines=s,1},i.releaseRender=function(){var t=e._cache;t[t._length++]=this},i.getRenderType=function(){return 3},e.create=function(t,i,n){var s=e._cache._length?e._cache[--e._cache._length]:new e;s._ctx_src=t;var a=s.shaderValue;return a.alpha=i,a.defines.setValue(0),n&&n.length&&a.setFilters(n),s},e._cache=(e._cache=[],e._cache._length=0,e._cache),e}(Submit),GameGateLink=function(t){function e(){this.m_nlinked=0,this.m_sSignalName=null,this.m_nPort=0,this.m_nIndex=-1,this.m_sAdd=null,this.m_sVer=null,this.m_sGameAdd=null,this.m_nGamePort=0,this.m_nLinkErrNum=0,e.__super.call(this)}__class(e,"game.GameGateLink",t);var i=e.prototype;return i.SetDef=function(t,e,i,n){void 0===e&&(e=30001),void 0===i&&(i="gate"),void 0===n&&(n="g100"),this.m_sAdd=t,this.m_nPort=e,i.length>0&&(this.m_sSignalName=i+":ready"),this.m_sVer=n,this.m_nlinked=0,this.BeginLink()},i.TryLinkGameGate=function(t,e){return this.m_nIndex=t,this.m_nLinkErrNum=0,this.m_sGameAdd.length<2||this.m_nGamePort<1?(this.m_nGamePort=0,""):(this.m_nlinked=0,this.m_nLinkErrNum=10,this.BeginLink(),this.m_sSignalName)},i.BeginLink=function(){gSys.ResetSignal(this.m_sSignalName),this.m_nGamePort>0?this.LinkGate(this.m_sGameAdd,this.m_nGamePort,this.m_sVer):this.LinkGate(this.m_sAdd,this.m_nPort,this.m_sVer)},i.OnLinkReady=function(){t.prototype.OnLinkReady.call(this),this.OnLinkBreaked(),this.m_nlinked=1,this.m_nLinkErrNum=0},i.OnLinkBreaked=function(){if(this.m_nLinkErrNum++,this.m_nLinkErrNum>3&&this.m_nGamePort>0)return gSys.Err("game gate link err too swicth to def"),this.BreakGate(),void this.LinkGate(this.m_sAdd,this.m_nPort,this.m_sVer);this.m_nlinked;this.BeginLink()},i.RegBroadCast=function(t){var e="广播服务";t&&this.m_nIndex>=0&&(e+=""+this.m_nIndex)},e.GBr=function(t,e){DataTable.m_iSelfUser&&DataTable.m_iSelfUser.OnGetGBr(t,e)},e}(GGateLink),FriendMessage=function(t){function e(){this.m_nMyChatRoom=-1,this.m_szInbox=null,this.m_szReadAnnm=null,this.m_szHornMsg=[],this.m_nInLinkRoom=0,this._m_nLockMarkPos=-1,this.m_szWorldTmpMsg=[],this.m_nWorldMsgNum=0,this.m_szCacheInfo=[],e.__super.call(this)}__class(e,"game.gdcal.frd.FriendMessage",t);var i=e.prototype;return i.InitInbox=function(){var t;t&&(this.m_szInbox=t),this.m_szReadAnnm?this.m_szReadAnnm.length=0:this.m_szReadAnnm=[];var e=DataTable.m_iSelfUser.GetSvrLocalTime();this.FormatInbox(this.m_szInbox,e)&&this.SaveLocalInbox(),SysID.FRD_EMIT("inboxchg",[[]]),this.m_szInbox=this.m_szInbox||[0,[],0,[]],this.DownloadInbox(),this.DownloadHorn(e),worldchatstyle.s_nWorldChatSwitch=gSys.ReadPublicInt("rainbow","WORLDCHATSWITCH",1),this.OnLinkChatRoom()},i.OnLinkChatRoom=function(){function t(){function n(){if(Log1.debug(5,"luohuantao----聊天室消息返回错误"),a=-1,0>a){if(i++,i>5)return void(e.m_nInLinkRoom=0);t()}}function s(i){return Log1.debug(5,"luohuantao----聊天室连接成功--",i),a=i,a!=e.m_nMyChatRoom?(e.m_nMyChatRoom=a,void t()):(e.m_nInLinkRoom=0,gSys.WritePublicInt("rainbow","chatroom",e.m_nMyChatRoom),SysID.FRD_EMIT("chgchatroom",e.m_nMyChatRoom),void(e.m_nMyChatRoom<0))}csvr.call("ChatRoom"+e.m_nMyChatRoom,"OnLinkUser",[DataTable.m_iSelfUser.GetUID(),DataTable.m_iSelfUser.GetPower(),worldchatstyle.s_nWorldChatSwitch],Handler.create(e,s),Handler.create(e,n),0);var a=0}var e=this;if(!this.m_nInLinkRoom){this.m_nInLinkRoom=1;var i=0,n=16;this.m_nMyChatRoom=gSys.ReadPublicInt("rainbow","chatroom",-1),this.m_nMyChatRoom<0&&(n=16,this.m_nMyChatRoom=DataTable.m_iSelfUser.GetUID()%n),t()}},i.OnUserChgRoomChat=function(t){var e=this;return this.m_nMyChatRoom<0?void this.OnLinkChatRoom():!DataTable.m_iSelfUser.IsCanVipFunc(10001)&&DataTable.m_iSelfUser.GetLevel()<15?void(t!=this.m_nMyChatRoom&&gSys.GameMsg("达到15级或成为VIP1可自由切换频道")):void(t!=this.m_nMyChatRoom&&csvr.call("ChatRoom"+this.m_nMyChatRoom,"c_OnClientChgRoom",[DataTable.m_iSelfUser.GetUID(),t,DataTable.m_iSelfUser.GetPower()],Handler.create(this,function(i){return 0>i?void gSys.GameMsg("房间已爆满，请切换频道"):(e.m_nMyChatRoom=t,gSys.WritePublicInt("rainbow","chatroom",e.m_nMyChatRoom),SysID.FRD_EMIT("chgchatroom",e.m_nMyChatRoom),void csvr.call("ChatRoom"+e.m_nMyChatRoom,"OnLinkUser",[DataTable.m_iSelfUser.GetUID(),DataTable.m_iSelfUser.GetPower(),worldchatstyle.s_nWorldChatSwitch],null,null,0))}),null,0))},i.PushHornMsg=function(t,e,i){if(void 0===e&&(e=1),void 0===i&&(i=-1),-101==t[1]){if(i>=0){i=0,this.m_szHornMsg=ArrOp.InsertSz(i,this.m_szHornMsg,[t[3],t]);for(var n=i+1,s=this.m_szHornMsg.length;s>n;n++)"string"==typeof this.m_szHornMsg[n][0]?this.m_szHornMsg[n][0]=DateOp.AdjDateSec(20,DateOp.SetDateStr(this.m_szHornMsg[n][0])):this.m_szHornMsg[n][0]instanceof Date&&(this.m_szHornMsg[n][0]=DateOp.AdjDateSec(20,this.m_szHornMsg[n][0])),"string"==typeof this.m_szHornMsg[n][1][3]?this.m_szHornMsg[n][1][3]=DateOp.AdjDateSec(20,DateOp.SetDateStr(this.m_szHornMsg[n][1][3])):this.m_szHornMsg[n][1][3]instanceof Date&&(this.m_szHornMsg[n][1][3]=DateOp.AdjDateSec(20,this.m_szHornMsg[n][1][3]));this.m_nLockMarkPos>=0&&this.m_nLockMarkPos++}else{var a=ArrOp.SzHalfSearch(t[3],this.m_szHornMsg);if(a>=0)return;a=-1-a,ArrOp.InsertSz(a,this.m_szHornMsg,[t[3],t]),t[7]>0&&(this.m_nLockMarkPos=a)}e&&SysID.FRD_EMIT("hornadd",[[]])}},i.PopHornMsg=function(){if(DataTable.m_iFriendBar.m_szHornMsg.length<1)return[];var t=DataTable.m_iFriendBar.m_szHornMsg[0][1];return ArrOp.DelSz(0,DataTable.m_iFriendBar.m_szHornMsg),this.m_nLockMarkPos>=0&&this.m_nLockMarkPos--,t},i.GetHornLockLeft=function(){if(this.m_nLockMarkPos<0||this.m_nLockMarkPos>=this.m_szHornMsg.length)return 0;if(1!=this.m_szHornMsg[this.m_nLockMarkPos][1][7])return 0;var t,e=DataTable.m_iSelfUser.GetSvrLocalTime();"string"==typeof this.m_szHornMsg[this.m_nLockMarkPos][1][3]?t=DateOp.SetDateStr(this.m_szHornMsg[this.m_nLockMarkPos][1][3]):this.m_szHornMsg[this.m_nLockMarkPos][1][3]instanceof Date&&(t=this.m_szHornMsg[this.m_nLockMarkPos][1][3]);var i=DateOp.SubDateDay(e,t);return Math.max(0,i)},i.DownloadHorn=function(t){function e(t){var e=t;if(e.length>0){if(FriendMessageData.isstruct(e))i.PushHornMsg(e,0);else for(var n=0;n<e.length;n++)i.PushHornMsg(e[n],0);SysID.FRD_EMIT("hornadd",[[]])}}var i=this;t="D{"+DateOp.string(t)+"}",csvr.call(PubDef.HYFWM(this.GetUID()),"GetHornMsgByTimeStamp",[t],Handler.create(this,e),null,0)},i.FormatInbox=function(t,e){var i=!1;if(e=DataTable.m_iSelfUser.GetSvrLocalTime(),t&&4==t.length){var n,s=0;for(t[1]=t[1]||[],s=0;s<t[1].length;s++)FriendMessageData.isstruct(t[1][s])?(n=t[1][s][2],n.indexOf("语音i")>=0&&(t[1].splice(s,1),s--,i=!0)):(t[1].splice(s,1),s--,i=!0);for(t[3]=t[3]||[],s=0;s<t[3].length;s++)FriendMessageData.isstruct(t[3][s])||(t[3].splice(s,1),s--,i=!0)}else t=[0,[],0,[]],i=!0;return i},i.DownloadInbox=function(){var t=this,i="D{"+DataTable.m_iSelfUser.GetCreateDate()+"}";csvr.call(e.m_sSvrName,"DownloadInbox",[DataTable.m_iSelfUser.GetLevel(),this.m_szInbox[0],0,i],Handler.create(this,function(e){var i=new Date;t.FormatInbox(e,i),t.m_szInbox[0]=e[0],t.m_szInbox[2]=e[2],0==e[0]&&(t.m_szInbox[1]=[]),0==e[2]&&(t.m_szInbox[3]=[]);var n=0,s=0;if(e[1]=e[1]||[],s=e[1].length,s>0)for(n=0;s>n;n++)t.PushMsgData(e[1][n]);else t.PushMsgData([]);t.m_szInbox[3]=e[3],
SysID.FRD_EMIT("inboxchg",[[]])}),Handler.create(this,function(t){console.log("Get In Box failed with Msg:"+t)}),0)},i.CountNewMessage=function(t,e){if(void 0===t&&(t=-1),void 0===e&&(e=0),!this.m_szInbox)return 0;if(-101==t)return 0;var i=0,n=0,s=0;if(0>=t&&-100!=t){for(s=this.m_szInbox[3].length,n=0;s>n;n++)if(2!=this.m_szInbox[3][n][4]&&-100!=this.m_szInbox[3][n][1]&&-101!=this.m_szInbox[3][n][1]&&!(ArrOp.SzSearch(this.m_szInbox[3][n][7][0],this.m_szReadAnnm)>=0)){if(1==e)return 1;i++}for(s=this.m_szInbox[1].length,n=0;s>n;n++)if(2!=this.m_szInbox[1][n][4]&&-100!=this.m_szInbox[1][n][1]&&-101!=this.m_szInbox[1][n][1]&&!(0==t&&this.m_szInbox[1][n][0]>=1e3)&&this.m_szInbox[1][n][0]!=DataTable.m_iSelfUser.GetUID()){if(1==e)return 1;i++}}if(t>0)for(s=this.m_szInbox[1].length,n=0;s>n;n++)if(2!=this.m_szInbox[1][n][4]&&!(this.m_szInbox[1][n][0]<1e3||this.m_szInbox[1][n][0]==DataTable.m_iSelfUser.GetUID()||t!=this.m_szInbox[1][n][0]&&t!=this.m_szInbox[1][n][1])){if(1==e)return 1;i++}return i},i.CheckoutMessage=function(t){void 0===t&&(t=-1);var i=0,n=0,s=0,a=0;if(0>=t&&-100!=t){for(s=this.m_szInbox[3].length,i=0;s>i;i++)2!=this.m_szInbox[3][i][4]&&-100!=this.m_szInbox[3][i][1]&&(this.m_szInbox[3][i][6].length>0||(this.m_szInbox[3][i][4]=2,n=1,ArrOp.SzAddRef(this.m_szInbox[3][i][7][0],1,this.m_szReadAnnm),a=1));for(s=this.m_szInbox[1].length,i=0;s>i;i++)2!=this.m_szInbox[1][i][4]&&-100!=this.m_szInbox[1][i][1]&&(this.m_szInbox[1][i][6].length>0||0==t&&this.m_szInbox[1][i][0]>=1e3||(this.m_szInbox[1][i][4]=2,n=1))}if(t>0)for(s=this.m_szInbox[1].length,i=0;s>i;i++)2!=this.m_szInbox[1][i][4]&&this.m_szInbox[1][i][4]!=FriendDef.MESSAGE_STATUS_SENDING&&(this.m_szInbox[1][i][6].length>0||this.m_szInbox[1][i][0]<1e3||(this.m_szInbox[1][i][0]==t||this.m_szInbox[1][i][1]==t)&&(this.m_szInbox[1][i][4]=2,n=1));n&&(SysID.FRD_EMIT("inboxcheckout",[[]]),csvr.Send(this,e.m_sSvrName,"CheckoutMessage",[t]))},i.CheckoutPackageMessage=function(t){var e=0,i=0;for(i=0;i<this.m_szInbox[1].length;i++)this.m_szInbox[1][i][6]==t&&(this.m_szInbox[1][i][4]=2,this.m_szInbox[1][i][6]="",e++);for(i=0;i<this.m_szInbox[3].length;i++)this.m_szInbox[3][i][6]==t&&(this.m_szInbox[3][i][4]=2,this.m_szInbox[3][i][6]="",e++);return e>0&&SysID.FRD_EMIT("inboxchg",[[]]),e},i.SendMessage=function(t,e,i,n,s){var a=this;if(FriendDef.IsLocalPlayer(t))return void ErrorDef.ERR_DLG(815);var r=e;return r=r.replace(" ",""),r.length<1?void ErrorDef.ERR_DLG(816):(n=n||[],void(n.length>0?DataTable.m_iSelfUser.CheckMakeItemSz(n,0,0,Handler.create(this,_succ=function(){var r=new StringRef;DataTable.m_iSelfUser.ChgItemSz(n,r,OPEnum.OP_SJ_LT_XH,s)&&a.temp_SendMessage(t,e,i,n,s)}),Handler.create(this,_failF=function(){var t=new StringRef;!DataTable.m_iSelfUser.ChgItemSz(n,t,OPEnum.OP_SJ_LT_XH,s)})):this.temp_SendMessage(t,e,i,n,s)))},i.temp_SendMessage=function(t,i,n,s,a){function r(){ErrorDef.ERR_DLGMODAL(csvr.retflag),810==csvr.retflag&&(SysID.m_nIsForbidWorldChat=1,l[4]=FriendDef.MESSAGE_STATUS_DELETE,null!=n&&n.CheckDefInfor()),SysID.FRD_EMIT("inboxsent",[!1,l])}function h(){0>t&&(DataTable.m_iSelfUser.IsCanVipFunc(10001)||DataTable.m_iSelfUser.SetLastWorldChatTime(gSys.GetCurSecAdj()),Chat.getInstance().isShowInputText(),-100==t&&DataTable.m_iSelfUser.ClnLogGameTag("get_世界聊天次数",1))}var o=this,l=[-1,-1,"",null,-1,[],"",[]];if(t>=0?l[0]=this.GetUID():l[0]=-this.GetUID(),l[1]=t,l[2]=i,l[3]=DateOp.string(DateOp.GetLocalTime()),l[4]=FriendDef.MESSAGE_STATUS_SENDING,-101!=l[1]&&-100!=l[1]&&this.m_szInbox[0]++,this.PushMsgData(l),SysID.FRD_EMIT("inboxadd",[l]),s=s||[],s.length>0)csvr.call(DataTable.m_iSelfUser.m_sSvrName,"OnWorldChatByCost",[e.m_sSvrName,t,i,s],Handler.create(this,h),Handler.create(this,r),0);else if(-100==l[1]){if(DataTable.m_iFriendBar.IsMute())return void gSys.GameMsg("您已被禁言");if(this.m_nMyChatRoom<0)return void this.OnLinkChatRoom();csvr.call("ChatRoom"+this.m_nMyChatRoom,"SendMessage",[DataTable.m_iSelfUser.GetUID(),t,i,DataTable.m_iSelfUser.GetNick()],Handler.create(this,h),Handler.create(this,function(){o.OnLinkChatRoom()}),0)}else csvr.call(e.m_sSvrName,"SendMessage",[t,i,DataTable.m_iSelfUser.m_sSvrName],Handler.create(this,h),Handler.create(this,r),0)},i.SendMessageEx=function(t,e){t=t||[];for(var i=0;i<t.length;i++)this.SendMessage(t[i],e)},i.ReportBug=function(t){if(1e3!=DataTable.m_iSelfUser.GetUID()){var i=t;i=i.replace(" ",""),i.length>0&&csvr.call(e.m_sSvrName,"ReportBug",[1e3,t],null,null,0)}},i.OnAddWorldMsgList=function(t){this.m_szWorldTmpMsg.push(t),this.m_szWorldTmpMsg.length>100&&(this.m_szWorldTmpMsg=ArrOp.DelSz(0,this.m_szWorldTmpMsg,this.m_szWorldTmpMsg.length-100)),MessageManger.getInstance().OnAddWorldMsgList(t)},i.OnAddAudioMsgList=function(t,e){if(t){var i,n=0;for(n=0;n<this.m_szWorldTmpMsg.length;n++)this.m_szWorldTmpMsg[n][2]==e[2]&&this.m_szWorldTmpMsg[n][0]==e[0]&&this.m_szWorldTmpMsg[n][1]==e[1]&&(i=this.m_szWorldTmpMsg[n][2],i=i.replace("R0","R1"),this.m_szWorldTmpMsg[n][2]=i)}else this.OnAddWorldMsgList(e)},i.OnReciveAudioMessage=function(t,e){if(t){var i,n=0,s=0;for(s=0;s<this.m_szInbox[1].length;s++)this.m_szInbox[1][s][2]==e[2]&&this.m_szInbox[1][s][0]==e[0]&&this.m_szInbox[1][s][1]==e[1]&&(i=this.m_szInbox[1][s][2],i=i.replace("R0","R1"),this.m_szInbox[1][s][2]=i,n=1);SysID.FRD_EMIT("inboxsent",[!0,e])}else this.PushMsgData(e),SysID.FRD_EMIT("inboxadd",[e]);this.OnAddAudioMsgList(t,e),this.SaveLocalInbox()},i.OnReciveMessage=function(t,e){for(var i=0;this.m_szInbox[1].length>=100&&(2==this.m_szInbox[1][i][4]?this.m_szInbox[1]=ArrOp.DelSz(1,this.m_szInbox[1],1):i++,!(i>=this.m_szInbox[1].length)););if(-101==t[1]){if(this.PushHornMsg(t,1,e),Math.abs(t[0])==DataTable.m_iSelfUser.GetUID())for(i=0;i<this.m_szInbox[1].length;i++)this.m_szInbox[1][i][4]==FriendDef.MESSAGE_STATUS_SENDING&&this.m_szInbox[1][i][2]==t[2]&&this.m_szInbox[1][i][0]==t[0]&&this.m_szInbox[1][i][1]==t[1]&&(this.m_szInbox[1][i]=t);SysID.FRD_EMIT("inboxsent",[!0,t])}else{if(Math.abs(t[0])!=DataTable.m_iSelfUser.GetUID())this.m_szInbox[0]++,this.PushMsgData(t),-100==t[1]&&this.OnAddWorldMsgList(t),SysID.FRD_EMIT("inboxadd",[t]),t[1]>0&&DataTable.m_iSoundTab.OnPlay("短消息");else{if(-100==t[1])return void this.OnAddWorldMsgList(t);for(i=0;i<this.m_szInbox[1].length;i++)this.m_szInbox[1][i].flag==FriendDef.MESSAGE_STATUS_SENDING&&this.m_szInbox[1][i][2]==t[2]&&this.m_szInbox[1][i][0]==t[0]&&this.m_szInbox[1][i][1]==t[1]&&(this.m_szInbox[1][i]=t);SysID.FRD_EMIT("inboxsent",[!0,t])}this.SaveLocalInbox()}},i.SaveLocalInbox=function(){},i.PushMsgData=function(t,e){if(void 0===e&&(e=0),t.length>0){if(-101==t[1]&&!e&&Math.abs(t[0])!=DataTable.m_iSelfUser.GetUID())return;var i=0,n=t[6];if(n.length>0)for(i=0;i<this.m_szInbox[1].length;i++)if(t.cert==this.m_szInbox[1][i][6])return;this.m_szInbox[1].push(t),t[0]<0&&-100==t[1]&&this.m_nWorldMsgNum++}if(!(this.m_nWorldMsgNum<50))for(i=0;i<this.m_szInbox[1].length&&(this.m_szInbox[1][i][0]>=0||(this.m_szInbox[1]=ArrOp.DelSz(i,this.m_szInbox[1]),this.m_nWorldMsgNum--,i--,!(this.m_nWorldMsgNum<20)));i++);},i.Frd_GetUserInfo=function(t,e,i,n){var s=[],a="frd"+t;if(s[0]=t,1==t)return s[1]="杰米大叔",e&&e.CallByName(i,s),void n.runWith([s]);if(DataTable.m_iFriendBar){if(t==DataTable.m_iFriendBar.GetUID())return s=DataTable.m_iFriendBar.GetShortInfo(),e&&e.CallByName(i,s),void n.runWith([s]);var r=0;if(r=ArrOp.SzSearch(t,DataTable.m_iFriendBar.m_szData[7]),r>=0)return s=FriendBase.CastShortInfo(DataTable.m_iFriendBar.m_szData[7][r]),e&&e.CallByName(i,s),void n.runWith([s])}return r=ArrOp.SzSearch(t,this.m_szCacheInfo),r>=0?this.m_szCacheInfo[r].length>2?(s=this.m_szCacheInfo[r],e&&e.CallByName(i,s),void n.runWith([s])):e?(DataTable.m_iSelfUser.AddNoti(a,e,i,1),void n.runWith([s])):void gSys.WaitSignal(n,a):(this.m_szCacheInfo.length>1e3&&(this.m_szCacheInfo=[]),this.m_szCacheInfo.push([t,0]),e?(DataTable.m_iSelfUser.AddNoti(a,e,i,1),this._Frd_GetInfo(t,a),void n.runWith([s])):(gSys.WaitSignal(n,a),void this._Frd_GetInfo(t,a)))},i._Frd_GetInfo=function(t,e){function i(){throw new Error("csvr.call is Error..."+PubDef.HYFWM(t)+"GetShortInfo"+r)}function n(i){csvr.retflag==ErrorDef.FUN_OKVAL&&FrdUserInfo.isstruct(i)&&(a=i);var n=ArrOp.SzSearch(t,s.m_szCacheInfo);0>n?s.m_szCacheInfo.push(a):s.m_szCacheInfo[n]=a,gSys.SetSignal(e,[a]),DataTable.m_iSelfUser.Emit(e,[a])}var s=this,a=[0,"",0,0];a[1]="?";var r=t;csvr.call(PubDef.HYFWM(t),"GetShortInfo",r,Handler.create(SysID,n),Handler.create(this,i),0)},i.OnWorldChatSwitch=function(t){worldchatstyle.s_nWorldChatSwitch=t,gSys.WritePublicInt("rainbow","WORLDCHATSWITCH",t),csvr.call("ChatRoom"+this.m_nMyChatRoom,"c_OnChgChatSwitch",[DataTable.m_iSelfUser.GetUID(),t],null,null,0)},__getset(0,i,"m_nLockMarkPos",function(){return this._m_nLockMarkPos},function(t){this._m_nLockMarkPos=t,DataTable.m_iFriendBar.Emit("m_nLockMarkPos",this._m_nLockMarkPos)}),e.m_sSvrName=null,e}(FriendBase),GLeadManager=function(t){function e(){this.m_szLeadObj=[],e.__super.call(this),new GMSB_NPC,DataTable.m_iLeadManager=this,this.OnCreate()}__class(e,"game.ui.lead.GLeadManager",t);var i=e.prototype;return i.OnCreate=function(){var t={};t.ext={},t.ext.dec="WaitLeadBsig",t.ext.act=2.71,StatManager.getInstance().send(t),gSys.WaitSignal(new Handler(this,this.onleadbeginsig),"leadbeginsig")},i.onleadbeginsig=function(){var t={};t.ext={},t.ext.dec="startLeadWait",t.ext.act=2.72,StatManager.getInstance().send(t),Laya.timer.once(1750,this,this.onleadbeginsigWait,null,!0)},i.onleadbeginsigWait=function(){var t={};t.ext={},t.ext.dec="InitLead",t.ext.act=2.73,StatManager.getInstance().send(t),this.InitLead(),Laya.timer.loop(400,this,this.CheckShowArrow,null,!0)},i.InitLead=function(){Log1.debug(1,"[GLeadManager] InitLead");var t=DataTable.m_iSelfUser.GetBranchLead(),e=DataTable.m_iLeadTab.GetAllBranch();e=ArrOp.InsertSz(0,e,DataTable.m_iSelfUser.GetLeadStep());for(var i=0;i<e.length;i++)if(!(i>0&&ArrOp.SzSearch(e[i],t)>=0)){var n=new GLeadSub;n.pid=this,n.Init(e[i]),this.m_szLeadObj.push(n)}},i.test_SetCurStep=function(t){DataTable.m_iNpcManager.CheckLeadNpc(null,"",0),this.m_szLeadObj.length>0&&0==this.m_szLeadObj[0].GetLeadKind()&&(this.m_szLeadObj[0].DelThis(),this.m_szLeadObj=ArrOp.DelSz(0,this.m_szLeadObj)),DataTable.m_iSelfUser.SetLeadStep(t);var e=new GLeadSub;e.pid=this,e.Init(t),this.m_szLeadObj=ArrOp.InsertSz(0,this.m_szLeadObj,e)},i.CheckLeadObj=function(){for(var t=0;t<this.m_szLeadObj.length;t++)this.m_szLeadObj[t]||(this.m_szLeadObj=ArrOp.DelSz(t,this.m_szLeadObj),t--)},i.GetBuyLeadBuild=function(){return!this.m_szLeadObj||this.m_szLeadObj.length<1?null:this.m_szLeadObj[0]?0!=this.m_szLeadObj[0].GetLeadKind()?null:this.m_szLeadObj[0].GetLeadBuyBuild():(this.CheckLeadObj(),null)},i.DelLeadObj=function(t){var e=ArrOp.SzSearch(t,this.m_szLeadObj);0>e||(this.m_szLeadObj=ArrOp.DelSz(e,this.m_szLeadObj),t=null)},i.SetArrowStream=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=-1),Log1.debug(1,"[SetArrowStream]",t,i,n);var s=game.ui.lead.GLeadManager.SeprateLeadStr(t,i,n);e.s_nSubLeadno=n,e.s_szArrowStream=s,this.CheckShowArrow()},i.CheckShowArrow=function(){if(e.s_pInterfaceManager){if(!e.s_szArrowStream||e.s_szArrowStream.length<1)return void(game.ui.lead.GLeadManager.s_pLeadArrow&&game.ui.lead.GLeadManager.s_pLeadArrow.SafeDelThis());var t=-1,i=0;if(game.ui.lead.GLeadManager.s_pLeadArrow){var n=game.ui.lead.GLeadManager.s_pLeadArrow.GetFaceName();if(ArrOp.SzSearch(n,e.s_szArrowStream)>=0){if(!game.ui.lead.GLeadManager.s_pLeadArrow.GetLinkObj())return Log1.debug(1,"[CheckShowArrow]","lead--------&&&---------return-----SafeDelObj---1-"),void game.ui.lead.GLeadManager.s_pLeadArrow.SafeDelThis();if(game.ui.lead.GLeadManager.s_pLeadArrow.GetLinkObj().m_nShow){t=game.ui.lead.GLeadManager.s_pLeadArrow.GetPosLv();var s=game.ui.lead.GLeadManager.s_pLeadArrow.GetLinkObj();gSys.CallByNameWithRet("CheckLeadArrow",i,s)&&i&&(Log1.debug(1,"[CheckShowArrow]","lead--------&&&---------return-----SafeDelObj---1-"),game.ui.lead.GLeadManager.s_pLeadArrow.SafeDelThis())}else game.ui.lead.GLeadManager.s_pLeadArrow.SafeDelThis()}else game.ui.lead.GLeadManager.s_pLeadArrow.SafeDelThis()}for(var a,r,h=e.s_szArrowStream.length-1;h>=0;h--)if(!(t>=h)&&(a=e.s_pInterfaceManager.FindInterface(e.s_szArrowStream[h][0]),r=e.s_pInterfacePosManager.FindInterface(e.s_szArrowStream[h][0]),a&&(a.m_nShow||a._style&&a.visible))){if(gSys.CallByNameWithRet("CheckLeadArrow",i,a)&&i){if(e.s_szArrowStream[h][5]>0)continue;break}if(!(e.s_nSubLeadno>=0&&h!=e.s_nSubLeadno)){game.ui.lead.GLeadManager.s_pLeadArrow&&game.ui.lead.GLeadManager.s_pLeadArrow.SafeDelThis(),e.s_szArrowStream[h][6]?(game.ui.lead.GLeadManager.s_pLeadArrow=GLeadArrow.Me(),game.ui.lead.GLeadManager.s_pLeadArrow.pid=GameMain._ins.m_gameUI.container):(game.ui.lead.GLeadManager.s_pLeadArrow=GLeadArrow.Me(),game.ui.lead.GLeadManager.s_pLeadArrow.pid=a),DataTable.m_i_QuestInfo&&DataTable.m_i_QuestInfo.m_pCurArrow&&DataTable.m_i_QuestInfo.m_pCurArrow.SafeDelThis(),game.ui.lead.GLeadManager.s_pLeadArrow.Init(a,h,e.s_szArrowStream[h][0],e.s_szArrowStream[h][1],e.s_szArrowStream[h][2],e.s_szArrowStream[h][3],e.s_szArrowStream[h][4],e.s_szArrowStream[h][5],e.s_szArrowStream[h][6],r.x,r.y);break}}}},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.SeprateLeadStr=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);for(var n=0,s=[],a=["/",":","#","^","@","?","!"];t.length>0;){var r,h=0,o="",l="",u=StringOp.GetWordM(t,"/");for(l=u[0],t=u[1],r=["",0,"","",0,0,0],n=0;n<a.length;n++)u=StringOp.GetWordM(l,a[n]),o=u[0],l=u[1],l.length>0?(1==h||4==h?r[h]=Laya.__parseInt(o):r[h]=o,h=n):l=o;l.length>0&&(1==h||4==h?r[h]=Laya.__parseInt(l):r[h]=l),e>0&&(r[0]+="_0"),s.push([r[0],r[1],r[2],r[3],r[4],r[5],r[6]])}return Log1.debug(1,"[SeprateLeadStr]  return v=",s),s},e.GetMapBuildObj=function(t){var i;return e.s_pInterfaceManager&&(i=e.s_pInterfaceManager.FindInterface(t)),Log1.debug(1,"[GLeadManager] GetMapBuildObj: ",t,i),i},e.GetMapBuildPosObj=function(t){var i;return e.s_pInterfacePosManager&&(i=e.s_pInterfacePosManager.FindInterface(t)),Log1.debug("[GLeadManager] GetMapBuildObj: ",t,i),i},e.GetMapBuildObjNum=function(t){var i=ArrOp.SzSearch(t,e.s_szMultiObj);return Log1.debug(1,"[GLeadManager] GetMapBuildObjNum: -1-",t,i),0>i?1:(Log1.debug(1,"[GLeadManager] GetMapBuildObjNum: -2-",t,i,e.s_szMultiObj[i][1]),e.s_szMultiObj[i][1])},e.RegArrowInterface=function(t,i,n,s,a){if(void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=0),t){if(Log1.debug(1,"[GLeadManager] RegArrowInterface: -1-",t,i,n),StringOp.Compare(i,"地图_任务炸掉石头")||StringOp.Compare(i,"地图_任务砍伐树")){var r=ArrOp.SzSearch(i,e.s_szMultiObj);0>r?e.s_szMultiObj.push([i,1]):(e.s_szMultiObj[r][1]+=1,i+="_"+e.s_szMultiObj[r][1].toString())}var h=ArrOp.SzSearch(i,e.s_szArrowStream);if(1==n&&0>h){var o;if(!o)return;if(!o.IsHaveArrow(i))return}if(e.s_pInterfaceManager||(e.s_pInterfaceManager=new GObj),e.s_pInterfacePosManager||(e.s_pInterfacePosManager=new GObj),e.s_pInterfaceManager.RegInterface(t,i),e.s_pInterfacePosManager.RegInterface({x:s,y:a},i),(t.m_nShow||t.visible)&&!(0>h||game.ui.lead.GLeadManager.s_pLeadArrow&&1==game.ui.lead.GLeadManager.s_pLeadArrow.m_nShowMe&&game.ui.lead.GLeadManager.s_pLeadArrow.GetPosLv()>h)){game.ui.lead.GLeadManager.s_pLeadArrow&&game.ui.lead.GLeadManager.s_pLeadArrow.SafeDelThis();var l;gSys.CallByNameWithRet("CheckLeadArrow",l,t)&&(Log1.debug(1,"lead--------------------RegArrowInterface-------p.CallByNameWithRet---in---",t,l),l)||(Log1.debug(1,"lead--------------------RegArrowInterface-------p.CallByNameWithRet------",t,l),e.s_szArrowStream[h][6]?(game.ui.lead.GLeadManager.s_pLeadArrow=GLeadArrow.Me(),game.ui.lead.GLeadManager.s_pLeadArrow.pid=GameMain._ins.m_gameUI.container):(game.ui.lead.GLeadManager.s_pLeadArrow=GLeadArrow.Me(),game.ui.lead.GLeadManager.s_pLeadArrow.pid=t),game.ui.lead.GLeadManager.s_pLeadArrow.Init(t,h,e.s_szArrowStream[h][0],e.s_szArrowStream[h][1],e.s_szArrowStream[h][2],e.s_szArrowStream[h][3],e.s_szArrowStream[h][4],e.s_szArrowStream[h][5],e.s_szArrowStream[h][6],s,a))}}},e.UnRegArrowInterface=function(t){Log1.debug(1,"[UnRegArrowInterface]",t),e.s_pInterfaceManager&&e.s_pInterfaceManager.UnRegInterface(t),e.s_pInterfacePosManager&&e.s_pInterfacePosManager.UnRegInterface(t)},e.ClearRegArrowInterface=function(){e.s_pInterfaceManager&&(e.s_pInterfaceManager=null),e.s_pInterfacePosManager&&(e.s_pInterfacePosManager=null)},e.ReStart=function(){if(e.hadInit){var t=game.ui.lead.GLeadManager.Me();if(t.m_szLeadObj&&!(t.m_szLeadObj.length<1)){for(var i,n=0;n<t.m_szLeadObj.length;n++)i=t.m_szLeadObj[n],i&&i.ReStart();t=null}}},e.hadInit=!1,e._me=null,e.s_pInterfaceManager=null,e.s_szArrowStream=null,e.s_pLeadArrow=null,e.s_nSubLeadno=0,e.s_szMultiObj=[],e.s_pInterfacePosManager=null,e}(GObj),Sprite=function(t){function e(){this.mouseThrough=!1,this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._enableRenderMerge=!1,this._zOrder=0,this._graphics=null,this._renderType=0,this.autoSize=!1,this.optimizeFloat=!1,e.__super.call(this),this._style=Style.EMPTY,this._$P=e.PropEmpty}__class(e,"laya.display.Sprite",t);var i=e.prototype;return Laya.imps(i,{"laya.display.ILayout":!0}),i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._style&&this._style.destroy(),this._transform=null,this._style=null,this._graphics=null,this._$P=null},i.updateOrder=function(){Utils.updateOrder(this._childs)&&this.repaint()},i.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0)},i.setBounds=function(t){this.get$P().uBounds=t},i.getBounds=function(){return Rectangle._getWrapRec(this.boundPointsToParent(),Rectangle.TEMP)},i.getSelfBounds=function(){return Rectangle._getWrapRec(this._getBoundPointsM(!1),Rectangle.TEMP)},i.transPointList=function(t,e,i){var n=0,s=t.length;for(n=0;s>n;n+=2)t[n]+=e,t[n+1]+=i},i.boundPointsToParent=function(t){void 0===t&&(t=!1);var e=0,i=0;this._style&&(e=this._style.translateX,i=this._style.translateY,t=t||0!==this._style.rotate,this._style.scrollRect&&(e+=this._style.scrollRect.x,i+=this._style.scrollRect.y));var n=this._getBoundPointsM(t);if(!n||n.length<1)return n;if(8!=n.length&&(n=t?GrahamScan.scanPList(n):Rectangle._getWrapRec(n,Rectangle.TEMP)._getBoundPoints()),!this.transform)return this.transPointList(n,this.x-e,this.y-i),n;var s=Point.TEMP,a=[],r=0,h=n.length;for(r=0;h>r;r+=2)s.x=n[r],s.y=n[r+1],this.toParentPoint(s),a.push(s.x,s.y);return a},i.getGraphicBounds=function(){return this._graphics?this._graphics.getBounds():Rectangle.EMPTY},i._getBoundPointsM=function(t){if(void 0===t&&(t=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();this._$P.temBM||(this.get$P().temBM=[]);for(var e,i,n=this._graphics?this._graphics.getBoundPoints():Utils.clearArr(this._$P.temBM),s=0,a=this.numChildren;a>s;s++)e=this.getChildAt(s),e instanceof laya.display.Sprite&&1==e.visible&&(i=e.boundPointsToParent(t),i&&(n=n?Utils.concatArr(n,i):i));return n},i.getStyle=function(){return this._style===Style.EMPTY&&(this._style=new Style),this._style},i.get$P=function(){return this._$P===e.PropEmpty&&(this._$P={}),this._$P},i.setStyle=function(t){this._style=t},i._adjustTransform=function(){"use strict";this._tfChanged=!1;var t,e=this._style,i=e.scaleX,n=e.scaleY;if(e.rotate||1!==i||1!==n||e.skewX||e.skewY){if(t=this._transform||(this._transform=Matrix.create()),t.bTransform=!0,e.rotate){var s=.0174532922222222*e.rotate,a=t.cos=Math.cos(s),r=t.sin=Math.sin(s);return t.a=i*a,t.b=i*r,t.c=-n*r,t.d=n*a,t.tx=t.ty=0,t}return t.a=i,t.d=n,t.c=t.b=t.tx=t.ty=0,e.skewX||e.skewY?t.skew(.0174532922222222*e.skewX,.0174532922222222*e.skewY):t}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-9,t},i.pos=function(t,e){return(this._x!==t||this._y!==e)&&(this.x=t,this.y=e),this},i.pivot=function(t,e){return this.pivotX=t,this.pivotY=e,this},i.size=function(t,e){return this.width=t,this.height=e,this},i.scale=function(t,e){return this.scaleX=t,this.scaleY=e,this},i.skew=function(t,e){return this.skewX=this.scaleX,this.skewY=this.scaleY,this},i._removeRenderType=function(t){(this._renderType&t)==t&&(this._renderType&=~t)},i._addRenderType=function(t){this._renderType|=t},i.render=function(t,e,i){Stat.spriteDraw++,RenderSprite.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this._repaint=0},i.drawToCanvas=function(t,e,i,n){return System.drawToCanvas(this,this._renderType,t,e,i,n)},i.customRender=function(t,e,i){},i.applyFilters=function(){if(!Render.isWebGl){var t;if(t=this._$P.filters,t&&!(t.length<1))for(var e=0,i=t.length;i>e;e++)t[e].action.apply(this._$P.cacheCanvas)}},i.ask=function(t,e){return 1==t?2==e:!1},i.localToGlobal=function(t,e){if(void 0===e&&(e=!1),!this._displayInStage||!t)return t;e===!0&&(t=new Point(t.x,t.y));for(var i=this;i&&i!=Laya.stage;)t=i.toParentPoint(t),i=i.parent;return t},i.globalToLocal=function(t,e){if(void 0===e&&(e=!1),!this._displayInStage||!t)return t;e===!0&&(t=new Point(t.x,t.y));for(var i=this,n=[];i&&i!=Laya.stage;)n.push(i),i=i.parent;for(var s=n.length-1;s>=0;)i=n[s],t=i.fromParentPoint(t),s--;return t},i.toParentPoint=function(t){if(!t)return t;t.x-=this.pivotX,t.y-=this.pivotY,this.transform&&this._transform.transformPoint(t.x,t.y,t),t.x+=this._x,t.y+=this._y;var e=this._style.scrollRect;return e&&(t.x-=e.x,t.y-=e.y),t},i.fromParentPoint=function(t){if(!t)return t;t.x-=this._x,t.y-=this._y;var e=this._style.scrollRect;return e&&(t.x+=e.x,t.y+=e.y),this.transform&&this._transform.invertTransformPoint(t),t.x+=this.pivotX,t.y+=this.pivotY,t},i.on=function(t,e,i,n){return 1!==this._mouseEnableState&&this.isMouseEvent(t)&&(this._displayInStage?this._$2__onDisplay():laya.events.EventDispatcher.prototype.once.call(this,"display",this,this._$2__onDisplay)),laya.events.EventDispatcher.prototype.on.call(this,t,e,i,n)},i.once=function(t,e,i,n){return 1!==this._mouseEnableState&&this.isMouseEvent(t)&&(this._displayInStage?this._$2__onDisplay():laya.events.EventDispatcher.prototype.once.call(this,"display",this,this._$2__onDisplay)),laya.events.EventDispatcher.prototype.once.call(this,t,e,i,n)},i._$2__onDisplay=function(){if(1!==this._mouseEnableState)for(var t=this;t&&1!==t._mouseEnableState;)t.mouseEnabled=!0,t=t.parent},i.loadImage=function(t,e,i,n,s,a){function r(t){h._width||h._height||h.size(n||t.width,s||t.height),h.repaint(),a&&a.run()}var h=this;return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),this.graphics.loadImage(t,e,i,n,s,r),this},i.repaint=function(){0===this._repaint&&(this._repaint=1,this.parentRepaint(this))},i.isRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},i.childChanged=function(t){this._renderType|=2048,t&&t.zOrder&&Laya.timer.callLater(this,this.updateOrder),this.repaint()},i.parentRepaint=function(t){var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint(this))},i.startDrag=function(t,e,i,n,s,a){void 0===e&&(e=!1),void 0===i&&(i=0),void 0===n&&(n=300),void 0===a&&(a=!1),this._$P.dragging||(this.get$P().dragging=new Dragging),this._$P.dragging.start(this,t,e,i,n,s,a)},i.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},i._setDisplay=function(e){!e&&this._$P.cacheCanvas&&this._$P.cacheCanvas.ctx&&(this._$P.cacheCanvas.ctx.destroy(),this._$P.cacheCanvas.ctx=null);var i=this._filterCache;i&&(i.destroy(),i.recycle(),this._filterCache=null),t.prototype._setDisplay.call(this,e)},i.hitTestPoint=function(t,e){var i=this.globalToLocal(Point.TEMP.setTo(t,e)),n=this._$P.hitArea?this._$P.hitArea:Rectangle.EMPTY.setTo(0,0,this._width,this._height);return n.contains(i.x,i.y)},i.getMousePoint=function(){return this.globalToLocal(Point.TEMP.setTo(Laya.stage.mouseX,Laya.stage.mouseY))},i._getWords=function(){return null},i._addChildsToLayout=function(t){var e=this._getWords();return null==e&&0==this._childs.length?!1:(e&&e.forEach(function(e){t.push(e)}),this._childs.forEach(function(e){e._style._enableLayout()&&e._addToLayout(t)}),!0)},i._addToLayout=function(t){this._style.absolute||(this._style.block?t.push(this):this._addChildsToLayout(t)&&(this.x=this.y=0))},i._isChar=function(){return!1},i._getCSSStyle=function(){return this._style.getCSSStyle()},i.setValue=function(t,e){switch(t){case"x":this.x=parseFloat(e);break;case"y":this.y=parseFloat(e);break;case"width":this.width=parseFloat(e);break;case"height":this.height=parseFloat(e);break;default:this[t]=e}},i.layoutLater=function(){this.parent&&this.parent.layoutLater()},__getset(0,i,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(t){this.cacheAs=t?"normal":"none"}),__getset(0,i,"scrollRect",function(){return this._style.scrollRect},function(t){this.getStyle().scrollRect=t,this.repaint(),t?this._renderType|=64:this._renderType&=-65}),__getset(0,i,"viewHeight",function(){return this.height*this._style.scaleY}),__getset(0,i,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(t){t!==(this._$P.cacheCanvas?this._$P.cacheCanvas.type:"none")&&("none"!==t?(this._$P.cacheCanvas||(this.get$P().cacheCanvas=Pool.getItemByClass("cacheCanvas",Object)),this._$P.cacheCanvas.type=t,this._$P.cacheCanvas.reCache=!0,this._renderType|=16):(this._$P.cacheCanvas&&Pool.recover("cacheCanvas",this._$P.cacheCanvas),this._$P.cacheCanvas=null,this._renderType&=-17),this.repaint())}),__getset(0,i,"staticCache",function(){return this._$P.staticCache},function(t){this._$P.staticCache=t,!t&&this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0)}),__getset(0,i,"x",function(){return this._x},function(t){var e=this._parent;this._x!==t&&(this._x=t,e&&0===e._repaint&&(e._repaint=1,e.parentRepaint(this)))}),__getset(0,i,"y",function(){return this._y},function(t){var e=this._parent;this._y!==t&&(this._y=t,e&&0===e._repaint&&(e._repaint=1,e.parentRepaint(this)))}),__getset(0,i,"skewX",function(){return this._style.skewX},function(t){var e=this.getStyle();if(e.skewX!==t){e.skewX=t,this._tfChanged=!0,this._renderType|=8;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint(this))}}),__getset(0,i,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(t){this._width!==t&&(this._width=t,this.repaint())}),__getset(0,i,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(t){this._height!==t&&(this._height=t,this.repaint())}),__getset(0,i,"viewWidth",function(){return this.width*this._style.scaleX}),__getset(0,i,"scaleX",function(){return this._style.scaleX},function(t){var e=this.getStyle();if(e.scaleX!==t){e.scaleX=t,this._tfChanged=!0,this._renderType|=8;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint(this))}}),__getset(0,i,"hitArea",function(){return this._$P.hitArea},function(t){this.get$P().hitArea=t}),__getset(0,i,"rotation",function(){return this._style.rotate},function(t){var e=this.getStyle();if(e.rotate!==t){e.rotate=t,this._tfChanged=!0,this._renderType|=8;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint(this))}}),__getset(0,i,"scaleY",function(){return this._style.scaleY},function(t){var e=this.getStyle();if(e.scaleY!==t){e.scaleY=t,this._tfChanged=!0,this._renderType|=8;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint(this))}}),__getset(0,i,"blendMode",function(){return this._style.blendMode},function(t){this.getStyle().blendMode=t,this._renderType|=32,this.parentRepaint(this)}),__getset(0,i,"skewY",function(){return this._style.skewY},function(t){var e=this.getStyle();if(e.skewY!==t){e.skewY=t,this._tfChanged=!0,this._renderType|=8;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint(this))}}),__getset(0,i,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(t){this._tfChanged=!1,this._transform=t,t?this._renderType|=8:this._renderType&=-9,this.parentRepaint(this)}),__getset(0,i,"pivotX",function(){return this._style.translateX},function(t){this.getStyle().translateX=t,this.repaint()}),__getset(0,i,"pivotY",function(){return this._style.translateY},function(t){this.getStyle().translateY=t,this.repaint()}),__getset(0,i,"alpha",function(){return this._style.alpha},function(t){this._style.alpha!==t&&(t=0>t?0:t>1?1:t,this.getStyle().alpha=t,1!==t?this._renderType|=4:this._renderType&=-5,this.parentRepaint(this))}),__getset(0,i,"visible",function(){return this._style.visible},function(t){this._style.visible!==t&&(this.getStyle().visible=t,this.parentRepaint(this))}),__getset(0,i,"graphics",function(){return this._renderType|=256,this._graphics||(this.graphics=System.createGraphics())},function(t){this._graphics&&(this._graphics._sp=null),this._graphics=t,t?(t._sp=this,this._renderType|=256,t.empty()&&(this._renderType&=-2)):(this._renderType&=-257,this._renderType&=-2),this.repaint()}),__getset(0,i,"filters",function(){return this._$P.filters},function(t){if(t&&0===t.length&&(t=null),this._$P.filters!=t){if(this.get$P().filters=t?t.slice():null,Render.isWebGl)return t&&t.length?this._renderType|=2:this._renderType&=-3,void this.repaint();this.cacheAsBitmap=t&&t.length>0,this.repaint()}}),__getset(0,i,"mask",function(){return this._$P._mask},function(t){this.cacheAsBitmap=!0,this.get$P()._mask=t,this._renderType|=32,this.parentRepaint(this)}),__getset(0,i,"stage",function(){return Laya.stage}),__getset(0,i,"mouseEnabled",function(){return this._mouseEnableState>1},function(t){this._mouseEnableState=t?2:1}),__getset(0,i,"enableRenderMerge",function(){return this._enableRenderMerge},function(t){Render.isWebGl&&(t?this._renderType|=1024:this._renderType&=-1025,this._enableRenderMerge=t)}),__getset(0,i,"mouseY",function(){return this.getMousePoint().y}),__getset(0,i,"mouseX",function(){return this.getMousePoint().x}),__getset(0,i,"zOrder",function(){return this._zOrder},function(t){this._zOrder!=t&&(this._zOrder=t,this._parent&&Laya.timer.callLater(this._parent,this.updateOrder))}),e.fromImage=function(t){return(new e).loadImage(t)},e.PropEmpty={},e}(Node),AudioSoundChannel=function(t){function e(t){this._audio=null,this._onEnd=null,this._resumePlay=null,e.__super.call(this),this._onEnd=Utils.bind(this.onEnd,this),this._resumePlay=Utils.bind(this.resumePlay,this),t.addEventListener("ended",this._onEnd),this._audio=t}__class(e,"laya.media.h5audio.AudioSoundChannel",t);var i=e.prototype;return i.onEnd=function(){return 1==this.loops?(this.completeHandler&&(this.completeHandler.run(),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,void this.play())},i.resumePlay=function(){this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,this._audio.play()}catch(t){this.event("error")}},i.play=function(){try{this._audio.currentTime=this.startTime}catch(t){return void this._audio.addEventListener("canplay",this._resumePlay)}this._audio.play()},i.stop=function(){this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),Pool.recover(this.url,this._audio),this._audio=null)},__getset(0,i,"position",function(){return this._audio?this._audio.currentTime:0}),__getset(0,i,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),e}(SoundChannel),WebAudioSoundChannel=function(t){function e(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._onPlayEnd=null,this.context=WebAudioSound.ctx,e.__super.call(this),this._onPlayEnd=Utils.bind(this.onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}__class(e,"laya.media.webaudio.WebAudioSoundChannel",t);var i=e.prototype;return i.play=function(){if(this.bufferSource&&(this.bufferSource.disconnect(),this.bufferSource.onended=null,this.bufferSource=null),this.audioBuffer){var t=this.context,e=this.gain,i=t.createBufferSource();
this.bufferSource=i,i.buffer=this.audioBuffer,i.connect(e),e&&e.disconnect(),e.connect(t.destination),i.onended=this._onPlayEnd,this._startTime=Browser.now(),this.gain.gain.value=this._volume,0==this.loops&&(i.loop=!0),i.start(0,this.startTime),this._currentTime=0}},i.onPlayEnd=function(){return 1==this.loops?(this.completeHandler&&(this.completeHandler.run(),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,void this.play())},i.stop=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),this.bufferSource.disconnect(),this.bufferSource=null,this.audioBuffer=null}this.gain&&this.gain.disconnect(),this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null},__getset(0,i,"position",function(){return this.bufferSource?(Browser.now()-this._startTime)/1e3+this.startTime:0}),__getset(0,i,"volume",function(){return this._volume},function(t){this.isStopped||(this._volume=t,this.gain.gain.value=t)}),e}(SoundChannel),Bitmap=function(t){function e(){e.__super.call(this),this._w=0,this._h=0}__class(e,"laya.resource.Bitmap",t);var i=e.prototype;return i.copyTo=function(t){t._source=this._source,t._w=this._w,t._h=this._h},i.dispose=function(){this._resourceManager.removeResource(this),t.prototype.dispose.call(this)},__getset(0,i,"source",function(){return this._source}),__getset(0,i,"width",function(){return this._w}),__getset(0,i,"height",function(){return this._h}),e}(Resource),Shader=function(t){function e(t,i,n,s){this.customCompile=!1,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,e.__super.call(this),this._id=++e._count,this._vs=t,this._ps=i,this._nameMap=s?s:{},null!=n&&(e.sharders[n]=this)}__class(e,"laya.webgl.shader.Shader",t);var i=e.prototype;return i.recreateResource=function(){this.startCreate(),this.compile(),this.compoleteCreate(),this.memorySize=0},i.detoryResource=function(){WebGL.mainContext.deleteShader(this._vshader),WebGL.mainContext.deleteShader(this._pshader),WebGL.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0},i.compileParams=function(){},i.compile=function(){if(this._vs&&this._ps&&!this._params){this._params=[];var t,i=[this._vs,this._ps];this.customCompile&&(t=this.preGetParams(this._vs,this._ps));var n=WebGL.mainContext;if(this._program=n.createProgram(),this._vshader=e._createShader(n,i[0],35633),this._pshader=e._createShader(n,i[1],35632),n.attachShader(this._program,this._vshader),n.attachShader(this._program,this._pshader),n.linkProgram(this._program),!n.getProgramParameter(this._program,35714))throw n.getProgramInfoLog(this._program);var s,a,r=0,h=0,o=0;for(o=this.customCompile?t.attributes.length:n.getProgramParameter(this._program,35721),r=0;o>r;r++){var l;l=this.customCompile?t.attributes[r]:n.getActiveAttrib(this._program,r),a=n.getAttribLocation(this._program,l.name),s={vartype:"attribute",ivartype:0,attrib:l,location:a,name:l.name,type:l.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(s)}var u=0;for(u=this.customCompile?t.uniforms.length:n.getProgramParameter(this._program,35718),r=0;u>r;r++){var c;c=this.customCompile?t.uniforms[r]:n.getActiveUniform(this._program,r),a=n.getUniformLocation(this._program,c.name),s={vartype:"uniform",ivartype:1,attrib:l,location:a,name:c.name,type:c.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},s.name.indexOf("[0]")>0&&(s.name=s.name.substr(0,s.name.length-3),s.isArray=!0,s.location=n.getUniformLocation(this._program,s.name)),this._params.push(s)}for(r=0,h=this._params.length;h>r;r++)if(s=this._params[r],s.indexOfParams=r,s.index=1,s.value=[s.location,null],s.codename=s.name,s.name=this._nameMap[s.codename]?this._nameMap[s.codename]:s.codename,this._paramsMap[s.name]=s,s._this=this,s.saveValue=[],"attribute"!==s.vartype)switch(s.type){case 5126:s.fun=s.isArray?this._uniform1fv:this._uniform1f;break;case 35664:s.fun=this._uniform_vec2;break;case 35665:s.fun=this._uniform_vec3;break;case 35666:s.fun=this._uniform_vec4;break;case 35678:s.fun=this._uniform_sampler2D;break;case 35676:s.fun=this._uniformMatrix4fv;break;case 35670:s.fun=this._uniform1i;break;case 35680:case 35674:case 35675:throw new Error("compile shader err!");default:throw new Error("compile shader err!")}else s.fun=this._attribute}},i.getUniform=function(t){return this._paramsMap[t]},i._attribute=function(t,e){var i=WebGL.mainContext;return i.enableVertexAttribArray(t.location),i.vertexAttribPointer(t.location,e[0],e[1],e[2],e[3],e[4]+this._offset),2},i._uniformMatrix4fv=function(t,e){return WebGL.mainContext.uniformMatrix4fv(t.location,!1,e),1},i._uniform1i=function(t,e){var i=t.saveValue;return i[0]!==e?(WebGL.mainContext.uniform1i(t.location,i[0]=e),1):0},i._uniform1f=function(t,e){var i=t.saveValue;return i[0]!==e?(WebGL.mainContext.uniform1f(t.location,i[0]=e),1):0},i._uniform1fv=function(t,e){var i=t.saveValue;return i[0]!==e?(WebGL.mainContext.uniform1fv(t.location,i[0]=e),1):0},i._uniform_vec2=function(t,e){var i=t.saveValue;return i[0]!==e[0]||i[1]!==e[1]?(WebGL.mainContext.uniform2f(t.location,i[0]=e[0],i[1]=e[1]),1):0},i._uniform_vec3=function(t,e){return WebGL.mainContext.uniform3f(t.location,e[0],e[1],e[2]),1},i._uniform_vec4=function(t,e){return WebGL.mainContext.uniform4f(t.location,e[0],e[1],e[2],e[3]),1},i._uniform_sampler2D=function(t,i){var n=WebGL.mainContext;n.activeTexture(e._TEXTURES[this._texIndex]),n.bindTexture(3553,i);var s=t.saveValue;return s[0]!==this._texIndex&&n.uniform1i(t.location,s[0]=this._texIndex),this._texIndex++,1},i._noSetValue=function(t){console.log("no....:"+t.name)},i.uploadOne=function(t,e){this.activeResource(),WebGLContext.UseProgram(this._program);var i=this._paramsMap[t];i.fun.call(this,i,e)},i.upload=function(t,i){e.activeShader=this,this.activeResource(),WebGLContext.UseProgram(this._program),this._texIndex=0,i=i||this._params;for(var n,s,a=i.length,r=0,h=0;a>h;h++)n=i[h],null!==(s=t[n.name])&&(r+=n.fun.call(this,n,s));Stat.shaderCall+=r},i.uploadArray=function(t,i,n){e.activeShader=this,this.activeResource(),this._texIndex=0;for(var s,a,r=!WebGLContext.UseProgram(this._program),h=(this._params,0),o=e._uploadArrayCount++,l=i-2;l>=0;l-=2)if(a=this._paramsMap[t[l]],a&&a._uploadArrayCount!==o){a._uploadArrayCount=o;var u=t[l+1],c=u[1];r&&1===a.ivartype&&c>0&&c===a.__uploadid||(s=u[0],null!=s&&(n&&n[a.name]&&n[a.name].bind(),h+=a.fun.call(this,a,s),a.__uploadid=c))}Stat.shaderCall+=h},i.getParams=function(){return this._params},i.preGetParams=function(t,i){var n=[t,i],s={},a=[],r=[];s.attributes=a,s.uniforms=r;for(var h,o=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),l=new RegExp("(\".*\")|('.*')|([\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),u=0,c=0,_=0;2>_;_++){n[_]=n[_].replace(o,"");var m=n[_].match(l),d="";for(u=0,c=m.length;c>u;u++){var p=m[u];"attribute"==p||"uniform"==p?(h={type:e.shaderParamsMap[m[u+1]],name:m[u+2],size:isNaN(Laya.__parseInt(m[u+3]))?1:Laya.__parseInt(m[u+3])},"attribute"==p?a.push(h):r.push(h),d+=h.vartype+" "+h.type+" "+h.name+" ",":"==m[u+3]&&(h.type=m[u+4],u+=2),u+=2):(d+=p,";"!=p&&(d+=" "))}n[_]=d}return s},e.getShader=function(t){return e.sharders[t]},e.create=function(t,i,n,s){return new e(t,i,n,s)},e.withCompile=function(t,i,n,s,a){if(s&&e.sharders[s])return e.sharders[s];var r=e._preCompileShader[2e-4*t+i];if(!r)throw new Error("withCompile shader err!"+t+" "+i);return r.createShader(n,s,a)},e.addInclude=function(t,i){if(!i||0===i.length)throw new Error("add shader include file err:"+t);if(e._includeFiles[t])throw new Error("add shader include file err, has add:"+t);e._includeFiles[t]=i},e.preCompile=function(t,i,n,s,a){var r=2e-4*t+i;e._preCompileShader[r]=new ShaderCompile(r,n,s,a,e._includeFiles)},e._createShader=function(t,e,i){var n=t.createShader(i);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,35713))throw t.getShaderInfoLog(n);return n},e._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],e._includeFiles={},e._count=0,e._preCompileShader={},e._uploadArrayCount=1,e.SHADERNAME2ID=2e-4,e.activeShader=null,e.sharders=(e.sharders=[],e.sharders.length=32,e.sharders),__static(e,["shaderParamsMap",function(){return this.shaderParamsMap={"float":5126,"int":5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new StringKey}]),e}(Resource),RenderTarget2D=function(t){function e(t,i,n,s,a,r){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthFormat=0,this._mipMap=!1,this._destroy=!1,this._type=1,this._w=t,this._h=i,this._surfaceFormat=s,this._surfaceType=a,this._depthFormat=r,this._mipMap=n,this._createWebGLRenderTarget(),this.bitmap.lock=!0,e.__super.call(this,this.bitmap,Texture.INV_UV)}__class(e,"laya.webgl.resource.RenderTarget2D",t);var i=e.prototype;return Laya.imps(i,{"laya.resource.IDispose":!0}),i.getType=function(){return this._type},i.getTexture=function(){return this},i.size=function(t,e){(this._w!=t||this._h!=e)&&(this._w=t,this._h=e,this.release(),this._createWebGLRenderTarget())},i.release=function(){this.destroy()},i.recycle=function(){e.POOL.push(this)},i.start=function(){var t=WebGL.mainContext;return this._preRenderTarget=RenderState2D.curRenderTarget,RenderState2D.curRenderTarget=this,t.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(t.viewport(0,0,this._w,this._h),this._svWidth=RenderState2D.width,this._svHeight=RenderState2D.height,RenderState2D.width=this._w,RenderState2D.height=this._h,Shader.activeShader=null),this},i.clear=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1);var s=WebGL.mainContext;s.clearColor(t,e,i,n);var a=16384;this._depthFormat&&(a|=256),s.clear(a)},i.end=function(){var t=WebGL.mainContext;t.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,RenderState2D.curRenderTarget=this._preRenderTarget,1==this._type?(t.viewport(0,0,this._svWidth,this._svHeight),RenderState2D.width=this._svWidth,RenderState2D.height=this._svHeight,Shader.activeShader=null):t.viewport(0,0,Laya.stage.width,Laya.stage.height)},i.getData=function(t,e,i,n){var s=WebGL.mainContext;s.bindFramebuffer(36160,this.bitmap.frameBuffer);var a=36053===s.checkFramebufferStatus(36160);if(!a)return s.bindFramebuffer(36160,null),null;var r=new Uint8Array(this._w*this._h*4);return s.readPixels(t,e,i,n,this._surfaceFormat,this._surfaceType,r),s.bindFramebuffer(36160,null),r},i.destroy=function(){this._destroy||(this._loaded=!1,this.bitmap.dispose(),this.bitmap=null,this._destroy=!0,t.prototype.destroy.call(this))},i.dispose=function(){},i._createWebGLRenderTarget=function(){this.bitmap=new WebGLRenderTarget(this.width,this.height,this.mipMap,this.surfaceFormat,this.surfaceType,this.depthFormat),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0},__getset(0,i,"surfaceFormat",function(){return this._surfaceFormat}),__getset(0,i,"surfaceType",function(){return this._surfaceType}),__getset(0,i,"depthFormat",function(){return this._depthFormat}),__getset(0,i,"mipMap",function(){return this._mipMap}),__getset(0,i,"source",function(){if(this._alreadyResolved)return t.prototype._$get_source.call(this);throw new Error("RenderTarget  还未准备好！")}),e.create=function(t,i,n){void 0===n&&(n=1);var s=e.POOL.pop();return s||(s=new e(t,i,!1,6408,5121,0)),s.size(t,i),s},e.TYPE2D=1,e.TYPE3D=2,e.POOL=[],e}(Texture),Buffer=function(t){function e(t,i,n,s){this._length=0,this._upload=!0,this._uploadSize=0,this._maxsize=0,void 0===s&&(s=35048),e.__super.call(this),this.lock=!0,e._gl=WebGL.mainContext,this._$2__id=++e._COUNT,this._usage=i,34963==t&&(t=34963,this._usage="INDEX"),34962==t&&(t=34962),this._glTarget=t,this._bufferUsage=s,this._buffer=new ArrayBuffer(8),n&&this.append(n)}__class(e,"laya.webgl.utils.Buffer",t);var i=e.prototype;return i.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},i.getUint16Array=function(){return new Uint16Array(this._buffer)},i.clear=function(){this._length=0,this._upload=!0},i.append=function(t){this._upload=!0;var e,i=0;t instanceof Uint8Array?(i=t.length,this._resizeBuffer(this._length+i,!0),e=new Uint8Array(this._buffer,this._length)):t instanceof Float32Array?(i=4*t.length,this._resizeBuffer(this._length+i,!0),e=new Float32Array(this._buffer,this._length)):t instanceof Uint16Array&&(i=2*t.length,this._resizeBuffer(this._length+i,!0),e=new Uint16Array(this._buffer,this._length)),e.set(t,0),this._length+=i,this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},i.setdata=function(t){this._buffer=t.buffer,this._upload=!0,this._floatArray32||(this._floatArray32=new Float32Array(this._buffer)),this._length=this._buffer.byteLength},i.getBuffer=function(){return this._buffer},i.seLength=function(t){this._length!==t&&(t<=this._buffer.byteLength||this._resizeBuffer(2*t+256,!0),this._length=t)},i._resizeBuffer=function(t,e){if(t<this._buffer.byteLength)return this;if(this.memorySize=this._buffer.byteLength,e&&this._buffer&&this._buffer.byteLength>0){var i=new ArrayBuffer(t),n=new Uint8Array(i);n.set(new Uint8Array(this._buffer),0),this._buffer=i}else this._buffer=new ArrayBuffer(t);return this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer)),this._upload=!0,this},i.setNeedUpload=function(){this._upload=!0},i.getNeedUpload=function(){return this._upload},i.bind=function(){this.activeResource(),e._bindActive[this._glTarget]===this._glBuffer||(e._gl.bindBuffer(this._glTarget,e._bindActive[this._glTarget]=this._glBuffer),Shader.activeShader=null)},i.recreateResource=function(){this.startCreate(),this._glBuffer||(this._glBuffer=e._gl.createBuffer()),this._upload=!0,this.memorySize=0,this.compoleteCreate()},i.detoryResource=function(){if(this._glBuffer){var t=this._glBuffer;Laya.timer.frameOnce(1,null,function(){WebGL.mainContext.deleteBuffer(t)}),this._glBuffer=null,this._upload=!0,this._uploadSize=0,this.memorySize=0}},i.upload=function(){return this._upload?(this._upload=!1,this.bind(),this._maxsize=Math.max(this._maxsize,this._length),Stat.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))),this._maxsize=this._length),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,e._gl.bufferData(this._glTarget,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),e._gl.bufferSubData(this._glTarget,0,this._buffer),Stat.bufferLen+=this._length,!0):!1},i.subUpload=function(t,i,n){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),!this._upload)return!1;if(this._upload=!1,this.bind(),this._maxsize=Math.max(this._maxsize,this._length),Stat.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))),this._maxsize=this._length),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,e._gl.bufferData(this._glTarget,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),i||n){var s=this._buffer.slice(i,n);e._gl.bufferSubData(this._glTarget,t,s)}else e._gl.bufferSubData(this._glTarget,t,this._buffer);return!0},i.upload_bind=function(){this._upload&&this.upload()||this.bind()},i.disposeCPUData=function(){this._buffer=null,this._floatArray32=null},i.dispose=function(){this._resourceManager=null,t.prototype.dispose.call(this)},__getset(0,i,"uintArray16",function(){return this._uint16=new Uint16Array(this._buffer),this._uint16}),__getset(0,i,"bufferLength",function(){return this._buffer.byteLength}),__getset(0,i,"length",function(){return this._length},function(t){this._length!==t&&(t<=this._buffer.byteLength||this._resizeBuffer(2*t+256,!0),this._length=t)}),__getset(0,i,"usage",function(){return this._usage}),e.__int__=function(t){e._gl=t,e.QuadrangleIB=new e(34963,"INDEX",null,35044),GlUtils.fillIBQuadrangle(e.QuadrangleIB,16)},e.INDEX="INDEX",e.POSITION0="POSITION",e.NORMAL0="NORMAL",e.COLOR0="COLOR",e.UV0="UV",e.NEXTUV0="NEXTUV",e.UV1="UV1",e.NEXTUV1="NEXTUV1",e.BLENDWEIGHT0="BLENDWEIGHT",e.BLENDINDICES0="BLENDINDICES",e.MATRIX0="MATRIX0",e.MATRIX1="MATRIX1",e.MATRIX2="MATRIX2",e.DIFFUSETEXTURE="DIFFUSETEXTURE",e.NORMALTEXTURE="NORMALTEXTURE",e.SPECULARTEXTURE="SPECULARTEXTURE",e.EMISSIVETEXTURE="EMISSIVETEXTURE",e.AMBIENTTEXTURE="AMBIENTTEXTURE",e.REFLECTTEXTURE="REFLECTTEXTURE",e.MATRIXARRAY0="MATRIXARRAY0",e.FLOAT0="FLOAT0",e.UVAGEX="UVAGEX",e.CAMERAPOS="CAMERAPOS",e.LUMINANCE="LUMINANCE",e.ALPHATESTVALUE="ALPHATESTVALUE",e.FOGCOLOR="FOGCOLOR",e.FOGSTART="FOGSTART",e.FOGRANGE="FOGRANGE",e.MATERIALAMBIENT="MATERIALAMBIENT",e.MATERIALDIFFUSE="MATERIALDIFFUSE",e.MATERIALSPECULAR="MATERIALSPECULAR",e.LIGHTDIRECTION="LIGHTDIRECTION",e.LIGHTDIRDIFFUSE="LIGHTDIRDIFFUSE",e.LIGHTDIRAMBIENT="LIGHTDIRAMBIENT",e.LIGHTDIRSPECULAR="LIGHTDIRSPECULAR",e.POINTLIGHTPOS="POINTLIGHTPOS",e.POINTLIGHTRANGE="POINTLIGHTRANGE",e.POINTLIGHTATTENUATION="POINTLIGHTATTENUATION",e.POINTLIGHTDIFFUSE="POINTLIGHTDIFFUSE",e.POINTLIGHTAMBIENT="POINTLIGHTAMBIENT",e.POINTLIGHTSPECULAR="POINTLIGHTSPECULAR",e.SPOTLIGHTPOS="SPOTLIGHTPOS",e.SPOTLIGHTDIRECTION="SPOTLIGHTDIRECTION",e.SPOTLIGHTSPOT="SPOTLIGHTSPOT",e.SPOTLIGHTRANGE="SPOTLIGHTRANGE",e.SPOTLIGHTATTENUATION="SPOTLIGHTATTENUATION",e.SPOTLIGHTDIFFUSE="SPOTLIGHTDIFFUSE",e.SPOTLIGHTAMBIENT="SPOTLIGHTAMBIENT",e.SPOTLIGHTSPECULAR="SPOTLIGHTSPECULAR",e.CORNERTEXTURECOORDINATE="CORNERTEXTURECOORDINATE",e.VELOCITY="VELOCITY",e.SIZEROTATION="SIZEROTATION",e.RADIUSRADIAN="RADIUSRADIAN",e.AGEADDSCALE="AGEADDSCALE",e.TIME="TIME",e.VIEWPORTSCALE="VIEWPORTSCALE",e.CURRENTTIME="CURRENTTIME",e.DURATION="DURATION",e.GRAVITY="GRAVITY",e.ENDVELOCITY="ENDVELOCITY",e.FLOAT32=4,e.SHORT=2,e.QuadrangleIB=null,e._gl=null,e._bindActive=[],e._COUNT=1,e}(Resource),Color2dSV=function(t){function e(){e.__super.call(this,2,0),this.color=[]}__class(e,"laya.webgl.shader.d2.value.Color2dSV",t);var i=e.prototype;return i.setValue=function(t){t.fillStyle&&(this.color=t.fillStyle._color._color),t.strokeStyle&&(this.color=t.strokeStyle._color._color)},e}(Value2D),TextureSV=function(t){function e(t){this.u_colorMatrix=null,this.texcoord=Value2D._TEXCOORD,void 0===t&&(t=0),e.__super.call(this,1,t)}__class(e,"laya.webgl.shader.d2.value.TextureSV",t);var i=e.prototype;return i.setValue=function(t){this.ALPHA=t.ALPHA,t.filters&&this.setFilters(t.filters)},i.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},e}(Value2D),PrimitiveSV=function(t){function e(){this.a_color=null,e.__super.call(this,4,0),this.position=[2,5126,!1,5*CONST3D2D.BYTES_PE,0],this.a_color=[3,5126,!1,5*CONST3D2D.BYTES_PE,8]}return __class(e,"laya.webgl.shader.d2.value.PrimitiveSV",t),e}(Value2D),aniShaderValue=function(t){function e(){this.texcoord=null,e.__super.call(this,0,0);var t=8*CONST3D2D.BYTES_PE;this.position=[2,5126,!1,t,0],this.texcoord=[2,5126,!1,t,2*CONST3D2D.BYTES_PE],this.color=[4,5126,!1,t,4*CONST3D2D.BYTES_PE]}return __class(e,"display.MutiAni.shader.aniShaderValue",t),e}(Value2D),DisplayItem=function(t){function e(t,i){this.m_nMirror=0,this.m_disObj=null,this.m_nCanMouse=0,this.m_nXpos=0,this.m_nYpos=0,this.m_nMapIY=0,this.m_nMapIX=0,this.m_nPutW=0,this.m_nPutH=0,this.m_nPutFlag=0,this.m_posHandler=null,this.m_iLayer=0,this.m_bMoveUD=!0,this.m_bLAdd=!0,this.m_nShow=0,this.m_bCanSAni=!0,this.m_bInMoving=!1,e.__super.call(this),void 0===i&&(i=!0),this.m_disObj=t,this.m_nShow=1,this.SetShow(),this.m_bCanSAni=i}__class(e,"game.build.DisplayItem",t);var i=e.prototype;return i.canPosMove=function(){return!1},i.dispose=function(){this.m_disObj&&(this.m_disObj.removeSelf(),this.m_disObj.dispose(),Tween.clearAll(this.m_disObj),this.m_disObj=null)},i.setDisObj=function(t){this.m_disObj=t,this.SetShow()},i.setMoveHandler=function(t){this.m_posHandler=t},i.GetNamedPt=function(t,e,i){return this.m_disObj?this.m_disObj.GetNamedPt(t,e,i):!1},i.SetShow=function(t){void 0===t&&(t=-1),-1==t&&(t=this.m_nShow),this.m_disObj&&(t?this.m_disObj.visible=!0:this.m_disObj.visible=!1),this.m_nShow=t},i.GetShow=function(){return this.m_nShow},i.SetPut=function(t,i,n){if(void 0===t&&(t=-1),void 0===i&&(i=-1),void 0===n&&(n=4294967295),0!=GMapView.m_nSelf&&(t>0?(this.m_nPutW=t,this.m_nPutH=i,this.m_nPutFlag=n):(t=this.m_nPutW,i=this.m_nPutH),TileGrid.TransI2W(this.m_nMapIX,this.m_nMapIY,UintRef.t1,UintRef.t2),null!=e.m_pBk)){var s=UintRef.t1.uid,a=UintRef.t2.uid;s-=Math.floor((t-1)/2),a+=Math.floor((i-1)/2);var r=!0;4294967295==n&&(r=!1);for(var h=a;h>a-i;h--)for(var o=s;s+t>o;o++)TileGrid.TransW2I(o,h,UintRef.t1,UintRef.t2),e.m_pBk.m_mapIns.tileSetCol(UintRef.t1.uid,UintRef.t2.uid,r)}},i.getpid=function(){return null},i.MoveTo=function(t,e,i,n,s){if(void 0===n&&(n=!1),null==this.m_disObj)return!1;var a=MathUtil1.Vec2Dis(t,e,this.m_disObj.x,this.m_disObj.y);return a/=i,this.m_bInMoving=!0,Tween.clearTween(this.m_disObj),this.m_bMoveUD?Tween.to(this.m_disObj,{x:t,y:e,zOrder:e+this.m_iLayer},1e3*a,null,s):Tween.to(this.m_disObj,{x:t,y:e},1e3*a,null,s),n&&(t>this.m_disObj.x?this.SetMirror(1):this.SetMirror(0)),!0},i.StopMove=function(){this.m_bInMoving&&(this.m_bInMoving=!1,Tween.clearTween(this.m_disObj))},i.SetLayer=function(t,e){void 0===e&&(e=!0),this.m_iLayer=t,this.m_bLAdd=e,this.m_iLayer>=1e5&&(this.m_bMoveUD=!1),this.m_disObj&&(e?this.m_disObj.zOrder=t+this.m_disObj.y:this.m_disObj.zOrder=t,this.m_nMirror>0?this.m_disObj.mirror=!0:this.m_disObj.mirror=!1)},i.SetMirror=function(t){this.m_nMirror=t,this.m_disObj&&(this.m_nMirror?this.m_disObj.mirror=!0:this.m_disObj.mirror=!1)},i.PlayKindEndRetrun=function(t){this.m_disObj&&this.m_disObj.PlayKindEndRetrun(t)},i.PlayKindEnd=function(t,e,i,n){this.m_disObj&&this.m_disObj.PlayKindEnd(t,e,i,n)},i.PlayAni=function(t,e){void 0===t&&(t=1),void 0===e&&(e=0),this.m_disObj&&this.m_disObj.PlaySpeed(t,e)},i.SetAniKind=function(t,e){void 0===e&&(e=!1),this.m_disObj&&this.m_disObj.playAni(t,e)},i.StopAni=function(){this.m_disObj&&this.m_disObj.StopAni()},i.linkGameObj=function(t){this.m_disObj&&this.m_disObj.linkGameObj(t)},i.LoadFromName=function(t,i,n){if(void 0===n&&(n=!0),null==e.m_pBk)throw new Error("The MutiWorld is not init...");this.m_disObj?(this.m_disObj.removeSelf(),this.m_disObj.dispose(),this.m_disObj=new Muti2DAniIns(this.m_bCanSAni),this.SetMapPos(this.m_nXpos,this.m_nYpos)):this.m_disObj=new Muti2DAniIns(this.m_bCanSAni),this.m_disObj.createInsFromName(t),n&&e.m_pBk.addAni(this.m_disObj),this.m_disObj.linkGameObj(i),this.SetShow()},i.isMouseOn=function(){return this.m_disObj?this.m_disObj._IsPointOn():!1},i.LoadAni=function(t,i){if(null==e.m_pBk)throw new Error("The MutiWorld is not init...");this.m_disObj=new Muti2DAniIns(this.m_bCanSAni),this.m_disObj.createFromItemDArr(t),e.m_pBk.addAni(this.m_disObj),this.m_disObj.linkGameObj(i),this.SetShow()},i.SetIPos=function(t,i){var n=0,s=0;this.m_disObj&&(n=this.m_disObj.x,s=this.m_disObj.y),TileGrid.TransI2S(t,i,e.xt,e.yt),this.m_disObj&&(this.m_disObj.x=e.xt.uid,this.m_disObj.y=e.yt.uid),n=e.xt.uid-n,s=e.yt.uid-s,this.m_nXpos=e.xt.uid,this.m_nYpos=e.yt.uid,this.m_nMapIX=t,this.m_nMapIY=i,this.m_disObj&&(this.m_bLAdd?this.m_iLayer>0?this.m_disObj.zOrder=this.m_nYpos+this.m_iLayer:this.m_disObj.zOrder=this.m_nYpos+.2:this.m_disObj.zOrder=this.m_iLayer),this.m_posHandler&&this.m_posHandler.runWith([n,s]),e.m_pBk.onAniRePos(this.m_disObj)},i.GetIPos=function(t){return this.m_disObj?(TileGrid.TransW2I(this.m_disObj.x,this.m_disObj.y,e.xt,e.yt),t.x=e.xt.uid,void(t.y=e.yt.uid)):void(t.x=t.y=0)},i.SetMapPos=function(t,e,i){if(void 0===i&&(i=!1),this.m_disObj){var n=this.m_disObj.x,s=this.m_disObj.y;this.m_disObj.x=t,this.m_disObj.y=e,n=t-n,s=e-s,this.m_bLAdd?this.m_iLayer>0?this.m_disObj.zOrder=e+this.m_iLayer:this.m_disObj.zOrder=e+.2:this.m_disObj.zOrder=this.m_iLayer,this.m_posHandler&&this.m_posHandler.runWith([n,s])}this.m_nXpos=t,this.m_nYpos=e,i&&(TileGrid.TransS2I(t,e,gSys.t1,gSys.t2),this.m_nMapIX=gSys.t1.uid,this.m_nMapIY=gSys.t2.uid)},i.SetPos=function(t,e){this.SetMapPos(t,e)},i.getCentPtOnScr=function(){return this.m_disObj?this.m_disObj.getCenterPtScr():null},i.getScrPoint=function(t){void 0===t&&(t=!0),null==this.m_disObj&&(e.tmpPt.x=0,e.tmpPt.y=0);var i=this.getCentPtOnScr();if(!i)return new Point(0,0);var n=this.m_disObj.GetRect();return t?i.y+=(n.bottom-n.top)/2:i.y-=(n.bottom-n.top)/2,i},i.OnMouseIn=function(){var t=this.m_disObj.scaleX>0?1.05:-1.05;Tween.to(this.m_disObj,{scaleX:t,scaleY:1.05},100,Ease.circIn)},i.OnMouseOut=function(){var t=this.m_disObj.scaleX>0?1:-1;Tween.to(this.m_disObj,{scaleX:t,scaleY:1},150,Ease.circIn)},i.GetUID=function(){var t=0;return t=DataTable.m_iOtherUser.GetUID()?DataTable.m_iOtherUser.GetUID():DataTable.m_iSelfUser.GetUID()},i.DelThis=function(){this.m_disObj&&(this.m_disObj.visible=!1),game.build.DisplayItem.SafeDelObj(this)},i.IsAniKind=function(t){return this.m_disObj&&this.m_disObj.curKind?this.m_disObj.curKind.kindName==t:!1},i.GetAniKind=function(){return this.m_disObj?this.m_disObj.getAniName():""},__getset(0,i,"IX",function(){return this.m_nMapIX},function(t){this.m_nMapIX=t}),__getset(0,i,"IY",function(){return this.m_nMapIY},function(t){this.m_nMapIY=t}),__getset(0,i,"m_iSelfBk",function(){return e.m_pBk}),__getset(0,i,"_playTime",function(){return this.m_disObj?this.m_disObj.getCurKindTime():0}),e.ItemRefClear=function(){},e.CheckPos=function(t,i,n,s,a){void 0===a&&(a=!1),TileGrid.TransI2W(t,i,UintRef.t1,UintRef.t2);var r=UintRef.t1.uid,h=UintRef.t2.uid;r-=Math.floor((n-1)/2),h+=Math.floor((s-1)/2);var o=0,l=0;for(l=h;l>h-s;l--)for(o=r;r+n>o;o++)if(TileGrid.TransW2I(o,l,UintRef.t1,UintRef.t2),e.m_pBk.m_mapIns.getCol(UintRef.t1.uid,UintRef.t2.uid))return!1;return!0},e.delObjModel=function(t){if(t instanceof game.build.DisplayItem){var e=t.m_disObj;e.removeSelf(),e.dispose()}},e.SafeDelObj=function(t){null!=t&&(t instanceof game.build.GCloudMedal?t.dispose():t instanceof game.build.DisplayItem?t.dispose():t instanceof laya.display.Sprite&&t.removeSelf(),SelectItemShow.UnLinkItem(t))},e.m_pBk=null,__static(e,["xt",function(){return this.xt=new UintRef},"yt",function(){return this.yt=new UintRef},"tmpPt",function(){return this.tmpPt=new Point}]),e}(EventEmitter),WSocket=function(_super){function WSocket(){this._$2__host=null,this._port=0,WSocket.__super.call(this),WSocket._me=this}__class(WSocket,"net.WSocket",_super);var __proto=WSocket.prototype;return __proto.wConnect=function(){this.host=gameConfig.ip,this.port=gameConfig.port,"115.159.100.115"==this.host&&(GameMarket.openID="10112",GameMarket.openKey="fd1434c3caefbba2d9a959d737378c25",GameMarket.SP_DATA={openId:"10112",openKey:"fd1434c3caefbba2d9a959d737378c25"}),this.connect(this.host,this.port),WSocket.ssocket=this._socket},__proto.IsLinked=function(){return this._socket?1==this._socket.readyState:!1},__proto.strToJson=function(str){var jsonObj=null;return jsonObj=eval("("+str+")")},__proto.isOnline=function(t,e){gSys.SetSecAdj(e)},__proto.onMessageHandler=function(msg){var retstr=msg.data,ret=this.strToJson(retstr);if(ret.fun)return void this.onFunHandler(ret);if(null==ret.pto){var retmsg=ret.ret.split("?"),fun=retmsg[0].split("|"),cn=retmsg[1],hd;if(csvr.retflag=ret.flag,-2==ret.flag){var funagv=null;funagv=eval(ret.agv),hd=net.WSocket.getHandler(fun[0]),hd?hd.runWith([funagv,cn]):Log1.info("未注册的 处理函数！"+fun[0])}else hd=net.WSocket.getHandler(fun[1]),hd?hd.runWith(ret.flag+","+ret.err):Log1.info("未注册的 处理函数！"+fun[1])}},__proto.onCloseHandler=function(t){arguments;_super.prototype.onCloseHandler.call(this),Log1.info("[---Close WebSock------]"),gSys.setErr(2),DataTable.m_iSelfUser.m_nNetLinkOk=0},__proto.onErrorHandler=function(t){arguments;Log1.error("WebSock 出错了!!!!!!!!!!!!!!!!!!!!!!"),gSys.setErr(1)},__proto.onOpenHandler=function(t){arguments;_super.prototype.onOpenHandler.call(this),this.addLoginAnnmMsgCall()},__proto.callIp_devlogin=function(){var t;if(WSocket.normalLog)t='"WFD6CE_'+GameMarket.userid+'",(0,"WIN_WWEERR-PC","Windows 6.2",96,1920,1080),1',WSocket.mailLogin&&0!=WSocket.mailLogin.length?csvr.call("邮件登录","_IP_Login",[WSocket.mailLogin[0],WSocket.mailLogin[1],"WFD6CE_0",[0,"WIN_WWEERR-PC","Windows 6.2",96,1920,1080,3141]],Handler.create(this,this.onLoginSuccess,null,!1),Handler.create(this,this.onLoginFailed,null,!1),0):WSocket.csvr_call("devicesvr","_IP_devlogin",t,Handler.create(this,this.onLoginSuccess,null,!1),Handler.create(this,this.onLoginFailed,null,!1),0);else{console.log("normalLog = false......"),t='"WFD6CE_101200",(0,"WIN_WWEERR-PC","Windows 6.2",96,1920,1080)';var e=GameMarket.userInfo.spId+',"'+GameMarket.openID+'","'+GameMarket.userInfo.accessToken+'","'+GameMarket.openKey+'","'+GameMarket.userInfo.userId+'",';e=e+t+',"'+GameMarket.spFname+'"',console.log(e),WSocket.csvr_call("locologsvr","_IP_LayaBoxlogin",e,Handler.create(this,this.onLoginSuccess,null,!1),Handler.create(this,this.onLoginFailed,null,!1),0)}},__proto.onLoginSuccess=function(t){WSocket.normalLog?(WSocket.logdata.parseData(t),DataTable.m_iSelfUser.Init(t)):(WSocket.logdata.parseData(t[1]),DataTable.m_iSelfUser.Init(t[1]))},__proto.onLinkuser=function(){WSocket.csvr_call(WSocket.logdata.seeksvrname,"linkuser",WSocket.logdata.uid+","+WSocket.logdata.netkey+',(),""',Handler.create(this,this.onLinkUserSuccess,null,!1),Handler.create(this,this.onLinkUserFailed,null,!1),0)},__proto.onLoginFailed=function(t,e){Log1.error("Login Server Failed....")},__proto.onLinkUserSuccess=function(t){Log1.info("Get UserData From Server success..."),WSocket.m_userData.parseData(t),gSys.SetSecAdj(t[1]),DataTable.initSelfUser(WSocket.m_userData),DataTable.m_iSelfUser.resetSvr(WSocket.logdata.seeksvrname,WSocket.logdata.netkey),DataTable.m_iSelfUser.m_nNetLinkOk=1,DataTable.m_iSelfUser.m_nSending=0},__proto.addLoginAnnmMsgCall=function(){WSocket.csvr_call("登陆公告服务","GetLoginAnnmMsg","",new Handler(this,this.GetLoginAnnmMsg),new Handler(this,this.GetLoginAnnmMsgFail),0)},__proto.GetLoginAnnmMsgFail=function(t){},__proto.GetLoginAnnmMsg=function(t,e){t.length<3?Log1.info("[GetLoginAnnmMsg]:.................游戏公告内容长度不足，不弹出游戏公告面板！"):(Log1.info("[GetLoginAnnmMsg]:.................需弹出游戏公告面板！"),MainIcon.isInit||(Assets.checkRes(Assets.reuseUrl)?this.showNotice(t):Laya.loader.load(Assets.reuseUrl,Handler.create(this,this.showNotice,[t]),null,"atlas",0)));var i=""+Browser.window.location.href;net.WSocket.normalLog=i.toLowerCase().indexOf("relatedid")<0,net.WSocket.normalLog?(GameMarket.userid=LocalStorage.getItem("userid")&&LocalStorage.getItem("userid").length?LocalStorage.getItem("userid"):gSys.getRandStr(10),LocalStorage.setItem("userid",GameMarket.userid),this.callIp_devlogin()):GameMarket.hadLogin()?this.callIp_devlogin():MarketCtr.Me().BeginLogin()},__proto.showNotice=function(t){Notice.getInstance().setText(t)},__proto.onLinkUserFailed=function(t,e){Log1.info("Get UserData From Server Failed,Flag:"+t+"   failed Msg:"+e)},__proto.onFunHandler=function(t){var e=this.strToJson(t.agv);switch(Log1.debug(5,t.fun,"--函数名对应的数据---",e),t.fun){case"IsOnline":DataTable.m_iSelfUser.IsOnline(e[0],e[1]);break;case"SvrDown":DataTable.m_iSelfUser.SvrDown(e[0],e[1]);break;case"OnSystemMsg":DataTable.m_iSelfUser.OnSystemMsg(e);break;case"OnSvrWillClose":DataTable.m_iSelfUser.OnSvrWillClose(e);break;case"OnOtherLogin":DataTable.m_iSelfUser.OnOtherLogin(e[0],e[1]);break;case"OnReciveMessage":DataTable.m_iFriendBar.OnReciveMessage(e[0],e[1]);break;case"GBr":GameGateLink.GBr(e[0],e[1]);
break;case"NotiMutiTradeStgateChged":DataTable.m_iSelfUser.NotiMutiTradeStgateChged(e[1]);break;case"SetTradeSvrPath":DataTable.m_iSelfUser.SetTradeSvrPath(e);break;case"SetShutup":DataTable.m_iFriendBar.SetShutup(e);break;case"OnAddSourceFans":DataTable.m_iFriendBar.OnAddSourceFans(e[0],e[1],e[2]);break;case"OnAddFans":DataTable.m_iFriendBar.OnAddFans(e);break;case"OnDelSourceFans":DataTable.m_iFriendBar.OnDelSourceFans(e[0],e[1],e[2]);break;case"OnDelFans":DataTable.m_iFriendBar.OnDelFans(e[0],e[1]);break;case"OnUserInfoChged":DataTable.m_iFriendBar.OnUserInfoChged(e);break;case"OnFriendHelp":DataTable.m_iFriendBar.OnFriendHelp(e[0],e[1]);break;case"OnFirInfoChged":DataTable.m_iFriendBar.OnFirInfoChged(e);break;case"OnRecommended":AddFriend.getInstance().OnRecommended(e[0],e[1]);break;case"OnFailToPraise":DataTable.m_iSelfUser.OnFailToPraise(e);case"OnSuccessToPraise":DataTable.m_iSelfUser.OnSuccessToPraise(e[0],e[1]);case"OnPraisedByOtherUser":DataTable.m_iSelfUser.OnPraisedByOtherUser(e[0],e[1],e[2],e[3]);case"OnGetLastRankLv":DataTable.m_iSelfUser.OnGetLastRankLv(e[0],e[1],e[2]);break;case"OnGetCurRankNo":DataTable.m_iSelfUser.OnGetCurRankNo(e);break;case"OnGetAllRankData":DataTable.m_iSelfUser.OnGetAllRankData(e);break;case"OnBuildData":DataTable.m_iSelfUser.OnBuildData(e[0],e[1]);break;case"OnSupDailyQuest":DataTable.m_iSelfUser.OnSupDailyQuest(e);break;case"ResetRainClould":DataTable.m_iSelfUser.ResetRainClould(e);break;case"UpdateMarketData":DataTable.m_iSelfUser.UpdateMarketData(e[0],e[1]);break;case"MarketError":DataTable.m_iSelfUser.MarketError(e);break;case"CompletedPurchase":DataTable.m_iSelfUser.CompletedPurchase(e[0],e[1],e[2]);break;case"OnSysBuildData":DataTable.m_iSelfUser.OnSysBuildData(e[0],e[1]);break;case"NotiAddInviteQuestAch":DataTable.m_iSelfUser.NotiAddInviteQuestAch(e);break;case"OnDiyNumEvaChged":DataTable.m_iSelfUser.OnDiyNumEvaChged(e[0],e[1]);break;default:Log1.error("服务器回调函数："+t.fun+"    没有添加！")}},__getset(0,__proto,"host",function(){return this._$2__host},function(t){this._$2__host=t}),__getset(0,__proto,"port",function(){return this._$2__port},function(t){this._$2__port=t}),__getset(1,WSocket,"me",function(){return WSocket._me},laya.net.Socket._$SET_me),WSocket.addHandler=function(t){return WSocket.handerIndex++,WSocket.handlerTable[WSocket.handerIndex+""]=t,WSocket.handerIndex+""},WSocket.getHandler=function(t){return WSocket.handlerTable[t]},WSocket.csvr_call=function(t,e,i,n,s,a){var r="$c "+t+"$"+e+"("+i+")"+net.WSocket.addHandler(n)+"|"+net.WSocket.addHandler(s)+"?"+a;this.sendString(r)},WSocket.csvr_send=function(t,e,i){var n="$s "+t+"$"+e+"("+i+")";this.sendString(n)},WSocket.sendString=function(t){WSocket.ssocket.send(t)},WSocket.onServerListOk=function(t){Log1.info("Exec this function")},WSocket.onServerListFailed=function(t,e){Log1.info("Failed to get Server List...")},WSocket.ssocket=null,WSocket.handlerTable={},WSocket.handerIndex=-1,WSocket._me=null,WSocket.normalLog=!0,WSocket.mailLogin=[],__static(WSocket,["logdata",function(){return this.logdata=new UserLogRetData},"m_userData",function(){return this.m_userData=new UserData}]),WSocket}(Socket),GDataCal=function(t){function e(){this.m_szData=null,this._m_nLevel=0,this.m_nLevelExp=0,this.m_nLevelExpNeed=0,this.m_nVipLevel=0,this.m_nShopNewNum=0,this.m_nBarnNum=0,this.m_nWareNum=0,this.m_nBarnAllNum=0,this.m_nWareAllNum=0,this.m_nEvalue=0,this.m_szQuest=[],this.m_szDailyQuest=[],this.m_szActQuest=[],this.m_szOtherQuest=[],this.m_nQuestGrp=0,this.cultureObj={},this.m_szEvalue=[],this.m_szStampBuildNum=null,this.m_szBranchLead=null,this.m_szMacBagNum=null,this.m_szWonderBagNum=null,this.m_nShowMoney=0,this.m_nShowDiamond=0,this.m_nShowShell=0,this.m_nShowMedal=0,this.m_nDiyBuildEvalue=0,this.m_nDiyBuildNum=0,this.m_nShowLight=0,this.m_sSvrName=null,this.m_nNetKey=0,this.m_nHornNum=0,this.m_nSending=0,this._m_nNetLinkOk=0,this.m_szCallSz=null,this.m_szTradeData=null,this._m_szLaskRankLv=null,this._m_szLastRankNo=null,this._m_szCurWeekNo=null,this._m_szRankAward=null,this.m_nCurItemNum=0,this.m_nLastWorldChatTime=-1,this.m_nBuffOverLatestT=0,this.m_szCurrentBuffID=null,this.m_szBuffEffect=null,this.m_nMyCurBuffGroupID=0,this.friendCal=null,this.m_nActFen=0,this.m_pRefAchvTask=null,this.m_nPraiseStructCheck=0,this._m_nFlowerNum=0,this.m_nLastUserToolLogTime=0,this.m_nUserToolGetNumLog=0,this.m_nUserToolCostNumLog=0,this.m_nUserToolLogModi=0,e.__super.call(this),this.m_szBagNum=__newvec(3,0)}__class(e,"game.gdcal.GDataCal",t);var i=e.prototype;return i.SetAllSubObj=function(t){this.cultureObj[t]?this.cultureObj[t]++:this.cultureObj[t]=1},i.GetAllSubObj=function(t){return this.cultureObj[t]?this.cultureObj[t]:0},i.Temp_TranslateOldUVData=function(){var t=ArrOp.GetStrVal("uservisit",this.m_szData.nameddata);if(t){var e=DateOp.GetLocalTime(),i=0,n=[];for(n[0]=e,n[2]=n[2]||[],i=0;7>i;i++)n[2].push(0);for(n[3]=n[3]||[],i=0;7>i;i++)n[3].push(0);n[0]=t[0],n[1]=t[1];var s=Util.Clamp(t.length,0,9);for(i=2;s>i;i++)n[2][i-2]=t[i];for(s=Util.Clamp(n[1].length,0,7),i=0;s>i;i++)n[3][i]=n[1][i];n[5]=t[0],n[4]=this.max(n[2]),this.m_szData.nameddata=ArrOp.SetStrVal("uservisit",this.m_szData.nameddata,[]),this.m_szData.nameddata=ArrOp.SetStrVal("uvdata",this.m_szData.nameddata,n)}},i.max=function(t){for(var e=0,i=0;i<t.length;i++)e<t[i]&&(e=t[i]);return e},i.GetUserVisit=function(){this.Temp_TranslateOldUVData();var t=ArrOp.GetStrVal("uvdata",this.m_szData.nameddata);if(!UserVisitData.isstruct(t)){var e=DateOp.GetLocalTime(),i=[0,[],[],[],0,0];t=i,t[0]=e,t[5]=e;var n=0;for(n=0;7>n;n++)t[2].push(0);for(n=0;7>n;n++)t[3].push(0);this.m_szData.nameddata=ArrOp.SetStrVal("uvdata",this.m_szData.nameddata,t)}return t},i.SetUserVisit=function(t){var e=ArrOp.GetStrVal("uvdata",this.m_szData.nameddata);e!=t&&(this.m_szData.nameddata=ArrOp.SetStrVal("uvdata",this.m_szData.nameddata,t))},i.GetEvalue=function(){return this.m_nEvalue},i.GetEvaMoney=function(){return 150*Math.pow(this.m_nEvalue,.5)},i.GetEvalueLevel=function(){return EvaLevel.GetLevel(this.m_nEvalue)},i.GetEvalueteSz=function(){return this.m_szEvalue},i.SetEvalueSz=function(t){this.m_szData.evalue=t[0],this.m_szEvalue=t,this.m_nEvalue=this.m_szData.evalue+this.GetDiyTotalValue()+this.GetPlayerModelEvalue(),this.m_szData.nameddata=ArrOp.SetStrVal("evaluete",this.m_szData.nameddata,t)},i.GetDiyTotalValue=function(){return this.m_nDiyBuildEvalue},i.GetPlayerModelEvalue=function(){return 0},i.ReCalMyStampBuildNum=function(){var t,e=this.GetMyStampBuildData(),i=2;if(!(1>i))for(var n=0,s=e.length;s>n;n++)t=DataTable.m_iBuildTab.Get(e[n][0]),null!=t&&0!=t.length&&this.AddMyStampBuildNumByKind(t[22])},i.GetMyStampBuildNumByKind=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szStampBuildNum);return 0>e?0:this.m_szStampBuildNum[e][1]},i.AddMyStampBuildNumByKind=function(t){var e=ArrOp.SzHalfSearch(t,this.m_szStampBuildNum);return 0>e?(ArrOp.InsertSz(-e-1,this.m_szStampBuildNum,[t,1]),0):(this.m_szStampBuildNum[e][1]++,1)},i.GetMyStampBuildData=function(){var t=this.GetEvalueteSz();return null==t||0==t.length?null:t[7]},i.PreOnLevelUp=function(){},i.OnLevelUp=function(t,e){},i.GetUserCheckData=function(){var t=[];t.push(this.m_szData.level),t.push(this.m_szData.exp);for(var e=16;21>e;e++)t.push(this.m_szData[e]);return t.push(this.m_szData.barn),t.push(this.m_szData.warehouse),t},i.AddExp=function(t,e){if(t.uint64<0)return 0;this.m_szData.exp.uint64+=t.uint64;var i=new UintRef,n=DataTable.m_iUserLevelTab,s=n.GetExpLevel(this.m_szData.exp,i);if(this.m_nLevelExp=i.uid,s!=this.m_nLevel){this.PreOnLevelUp();var a=this.m_nLevel;this.m_nLevel=s,this.m_szData.level=s;var r=n.Get(this.m_nLevel);this.m_nLevelExpNeed=r[1],this.OnLevelUp(a,s)}return 1},i.SubExp=function(t,e){if(t.uint64<0)return 0;if(e!=OPEnum.OP_CSJJY)return gSys.GameMsg("opkind="+e+"企图扣经验;exp="+t),0;this.m_szData.exp.uint64-=t.uint64;var i=new UintRef,n=DataTable.m_iUserLevelTab,s=n.GetExpLevel(this.m_szData.exp,i);if(this.m_nLevelExp=i.uid,s!=this.m_nLevel){this.PreOnLevelUp(),this.m_nLevel=s,this.m_szData.level=s;var a=n.Get(this.m_nLevel);this.m_nLevelExpNeed=a[1],this.OnLevelUp(0,0)}return 1},i.GetPlayerModelData=function(){var t=[];return t=ArrOp.GetStrVal("myplayermodel",this.m_szData.nameddata),t.length<1&&(t=[null]),t},i.SetPlayerModelData=function(t){ArrOp.SetStrVal("myplayermodel",this.m_szData.nameddata,t)},i.GetCurPlayerModelID=function(){var t=[];return t=ArrOp.GetStrVal("myplayermodel",this.m_szData.nameddata),!t||t.length<1?-1:t[0]},i.SetCurPlayerModelID=function(t){var e;e=ArrOp.GetStrVal("myplayermodel",this.m_szData.nameddata),e.length<1&&(e=[null]),e[0]=t,ArrOp.SetStrVal("myplayermodel",this.m_szData.nameddata,e)},i.AddHavePlayerModelID=function(t){var e;e=ArrOp.GetStrVal("myplayermodel",this.m_szData.nameddata);var i=ArrOp.SzHalfSearch(t,e[1]);0>i&&(i=-1-i),e[1].splice(i,0,t),ArrOp.SetStrVal("myplayermodel",this.m_szData.nameddata,e)},i.GetWorldChatLeftCD=function(){if(this.IsCanVipFunc(10001))return 0;var t=0;t=gSys.GetCurSecAdj();var e=this.GetLastWorldChatTime(),i=t-e;return i>=600?0:600-i},i.GetLastWorldChatTime=function(){if(this.m_nLastWorldChatTime<0){var t;t=ArrOp.GetStrVal("myplayermodel",this.m_szData.nameddata),this.m_nLastWorldChatTime=Math.floor(t)}return this.m_nLastWorldChatTime},i.SetLastWorldChatTime=function(t){this.m_nLastWorldChatTime=t,ArrOp.SetStrVal("myplayermodel",this.m_szData.nameddata,t)},i.GetUID=function(){return this.m_szData.uid},i.GetExp=function(){return this.m_szData.exp.uint64},i.IsMyUid=function(t){var e=0;return e=this.m_szData.uid==t?1:0},i.GetVisu=function(){return this.m_szData.visu},i.GetPower=function(){return this.m_szData.power},i.GetDeviceMode=function(){return this.m_szData.devmode},i.GetNick=function(){return this.m_szData.nick},i.GetLevel=function(){return this.m_nLevel},i.GetMoney=function(){return this.m_szData.money},i.GetDiamond=function(){return this.m_szData.diamond},i.GetShell=function(){return this.m_szData.shell},i.GetMedal=function(){return this.m_szData.medal},i.GetCreateDate=function(){return"string"==typeof this.m_szData.createdate?DateOp.SetDateStr(this.m_szData.createdate):this.m_szData.createdate},i.InitBuff=function(){var t=ArrOp.GetStrVal("curbuffgroup",this.m_szData.nameddata);this.m_nMyCurBuffGroupID=t},i.GetMyBuffEffectValue=function(t){var e=0;return this.m_szBuffEffect&&(e=this.m_szBuffEffect.length),t>=e?0:this.m_szBuffEffect[t]},i.GetAllMyBuffID=function(){return this.m_szCurrentBuffID},i.GetAllMyBuffEffect=function(){return this.m_szBuffEffect},i.GetMyBuffGroup=function(){return ArrOp.GetStrVal("userbuffgroup",this.m_szData.nameddata)},i.SetMyBuffGroup=function(t){ArrOp.SetStrVal("userbuffgroup",this.m_szData.nameddata,t)},i.IsHaveBuffGroup=function(t){var e=this.GetMyBuffGroup(),i=ArrOp.SzHalfSearch(t,e);return 0>i?0:1},i.GetMyCurBuffGroup=function(){return this.m_nMyCurBuffGroupID},i.GetMyBuffGroupLeftTime=function(t){var e=this.GetMyBuffGroup(),i=ArrOp.SzHalfSearch(t,e);if(0>i)return 0;if(!BuffGroupDataSt.isstruct(e[i]))return 0;var n=gSys.GetCurSecAdj(),s=e[i][1]+e[i][2]-n;return 0>s&&(s=0),s},i.GetLostFrdRewardState=function(){var t;return t=ArrOp.GetStrVal("user3lostfrdget",this.m_szData.nameddata),Laya.__parseInt(t)},i.SetLostFrdRewardState=function(t){ArrOp.SetStrVal("user3lostfrdget",this.m_szData.nameddata,t)},i.GetNextMaskCloudEva=function(t){for(var e=DataTable.m_iMaskCloudTab.GetAll(),i=this.GetUserMaskCloud(),n=0,s=0,a=0;a<e.length;a++)if(n=ArrOp.SzSearch(e[a][0],i),!(n>=0&&i[n].length||e[a][6]<=t)){s=e[a][6];break}return s},i.AddMaskCloud=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;n=ArrOp.GetStrVal("maskcloud",this.m_szData.nameddata),n||(n=[]),n=n.slice();var s=ArrOp.SzSearch(t,n);if(s>=0){if("number"==typeof n[s]&&Math.floor(n[s])==n[s])return 0;if(!n[s][1])return 0;if(n[s][1]==e)return 0;n[s][1]=e}else n.push([t,e]);return i?1:(this.m_szData.nameddata=ArrOp.SetStrVal("maskcloud",this.m_szData.nameddata,n),1)},i.GetUserMaskCloud=function(){var t=[];return t=ArrOp.GetStrVal("maskcloud",this.m_szData.nameddata)},i.MaskCloudIsUnlock=function(t){var e=this.GetUserMaskCloud(),i=ArrOp.SzSearch(t,e);return 0>i?0:e[i][1]?1:0},i.GetMarketData=function(t){void 0===t&&(t=0);var e=this.GetSysBuildData(4);return e},i.GetSysBuildData=function(t){var e;return e=ArrOp.GetStrVal("s"+t,this.m_szData.sysdata)},i.SetMarketData=function(t,e){void 0===e&&(e=0),this.SetSysBuildData(4,t)},i.SetSysBuildData=function(t,e){this.m_szData.sysdata=ArrOp.SetStrVal("s"+t,this.m_szData.sysdata,e)},i.SetBestPet=function(t){2==t.length&&t.push(0),ArrOp.SetStrVal("bestpet",this.m_szData.nameddata,t)},i.GetBestPet=function(){var t=[];return t=ArrOp.GetStrVal("bestpet",this.m_szData.nameddata)},i.GetBuyBackData=function(){var t=[];return t=ArrOp.GetStrVal("buyback",this.m_szData.nameddata)},i.SetBuyBackData=function(t){this.m_szData.nameddata=ArrOp.SetStrVal("buyback",this.m_szData.nameddata,t)},i.SetBoatFastData=function(t,e){this.m_szData.nameddata=ArrOp.SetStrVal("boatfast",this.m_szData.nameddata,[t,e])},i.GetBoatFastData=function(){var t=[];return t=ArrOp.GetStrVal("boatfast",this.m_szData.nameddata)},i.GetLastDiyAdData=function(){var t=[];return t=ArrOp.GetStrVal("lastdiydata",this.m_szData.nameddata),2!=t.length?[null]:t},i.SetLastDiyAdData=function(t){ArrOp.SetStrVal("lastdiydata",this.m_szData.nameddata,t)},i.AddLastDiyAdData=function(t,e){var i=[];i=ArrOp.GetStrVal("lastdiydata",this.m_szData.nameddata),2!=i.length&&(i=[null]);var n=0;n=gSys.GetCurSecAdj();for(var s=0;s<i[1].length;s++)i[1][s][1]+SysID.DIYGGCXSJ>n&&i[1][s][0]!=t||(i[1].splice(s,1),s--);i[0]=e,i[1].push([t,e]),ArrOp.SetStrVal("lastdiydata",this.m_szData.nameddata,i)},i.GetPetCurLucky=function(t,e,i){if(0==e)return t;var n=Math.floor(t/e),s=0;return s=n>=i?t+e*i:t+Math.pow(i-n,.5)+n*e,Math.floor(s)},i.AddMapBlock=function(t,e){var i=this.GetCutMapData();e==OPEnum.OP_SD_GM?i[1]+=t:i[2]+=t,i[3]+=t,this.SetCutMapData(i);var n=i[3]+i[4];return n},i.GetCutMapData=function(){var t=[],e=ArrOp.GetStrVal("cmap",this.m_szData.sysdata);return e?t=e:(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=200,t[6]=0),t},i.SetCutMapData=function(t){this.m_szData.sysdata=ArrOp.SetStrVal("cmap",this.m_szData.sysdata,t)},i.GetLightData=function(){var t;return t=ArrOp.GetStrVal("light",this.m_szData.sysdata),null==t&&(t=[0,50]),2!=t.length&&(t=[0,50]),t},i.GetLight=function(){var t;return t=ArrOp.GetStrVal("light",this.m_szData.sysdata),null==t&&(t=[0,50]),2!=t.length&&(t=[0,50]),t[0]},i.AddLightData=function(t,e){var i=this.GetLightData();i[0]+=t,ArrOp.SetStrVal("light",this.m_szData.sysdata,i),this.m_nShowLight=i[0]},i.SubLightData=function(t,e){if(!(t>0)){var i=this.GetLightData();i[0]+=t,i[0]<1&&(i[0]=0),ArrOp.SetStrVal("light",this.m_szData.sysdata,i),this.m_nShowLight=i[0]}},i.GetKey=function(){var t=ArrOp.GetStrVal("key",this.m_szData.sysdata);return t?t[0]:0},i.AddKeyData=function(t,e){var i=this.GetKey();i+=t;var n=[];n.push(i),ArrOp.SetStrVal("key",this.m_szData.sysdata,n)},i.SubKeyData=function(t,e){var i=this.GetKey();i+=t;var n=[];n.push(i),ArrOp.SetStrVal("key",this.m_szData.sysdata,n)},i.GetHorn=function(){var t=ArrOp.GetStrVal("chathorn",this.m_szData.nameddata);return t?t:0},i.AddHornData=function(t,e){var i=this.GetHorn();i+=t,ArrOp.SetStrVal("chathorn",this.m_szData.nameddata,i),this.m_nHornNum=i,this.Emit("m_nHornNum",this.m_nHornNum)},i.SubHornData=function(t,e){var i=this.GetHorn();i+=t,0>i&&(i=0),ArrOp.SetStrVal("chathorn",this.m_szData.nameddata,i),this.m_nHornNum=i,this.Emit("m_nHornNum",this.m_nHornNum)},i.OnAddRankData=function(t,e,i,n){},i.AddMoney=function(t,e){return 1>t?0:(this.m_szData.money+=t,1)},i.SubMoney=function(t,e){return 1>t?0:this.m_szData.money<t?(gSys.GameMsg("金币扣减错误"),0):(this.m_szData.money-=t,1)},i.AddDiamond=function(t,e){return 1>t?0:(this.m_szData.diamond+=t,1)},i.SubDiamond=function(t,e){return 1>t?0:this.m_szData.diamond<t?(gSys.GameMsg("钻石扣减错误"),0):(this.m_szData.diamond-=t,1)},i.AddShell=function(t,e){return 1>t?0:(this.m_szData.shell+=t,this.m_nShowShell=this.m_szData.shell,1)},i.SubShell=function(t,e){return 1>t?0:(this.m_szData.shell-=t,this.m_nShowShell=this.m_szData.shell,1)},i.AddMedal=function(t,e){return 1>t?0:(this.m_szData.medal+=t,this.m_nShowMedal=this.m_szData.medal,this.Emit("checkmaskcloud",[]),1)},i.SubMedal=function(t,e){return 1>t?0:(this.m_szData.medal-=t,this.m_nShowMedal=this.m_szData.medal,this.Emit("checkmaskcloud",[]),1)},i.AddTrade=function(t,e){return 1>t?0:(this.m_szData.tradept+=t,this.m_pRefAchvTask||this.RefAchv(),1)},i.GetTrade=function(){return this.m_szData.tradept},i.InitData=function(t){var e,i=0,n=0;for(this.m_szData=t,this.friendCal||(this.friendCal=new ClnFriendCal),this.friendCal.m_szData=this.m_szData,i=0;2>=i;i++){e=this.GetBagItemSz(i),this.m_szBagNum[i]=0;var s=0;for(e&&e.length&&(s=e.length),n=0;s>n;n++)SysID.IsHDCPID(e[n][0]),this.m_szBagNum[i]+=e[n][1]}var a=new UintRef,r=DataTable.m_iUserLevelTab;this.m_nLevel=r.GetExpLevel(this.m_szData.exp,a),this.m_nLevelExp=a.uid,this.m_szData.level=this.m_nLevel,this.m_nBarnNum=this.m_szBagNum[0]||0,this.m_nWareNum=this.m_szBagNum[1]||0,this.m_nBarnAllNum=this.GetBagMax(0)||0,this.m_nWareAllNum=this.GetBagMax(1)||0;var h=r.Get(this.m_nLevel);return this.m_nLevelExpNeed=h[1],this.InitFlowerNum(),this.CalVipLevel(1),this.InitEvalueteData(),this.InitBranchLead(),this.m_szData.uid>=1e3&&(this.InitSignData(),this.InitQuestData(),this.InitOLGiftData(),this.InitBuff()),gSys.SetSignal("bagdataref",-1),this.Temp_TranslateOldUVData(),MainIcon.isInit?(MainIcon.getInstance().upperIcon.upDate(),MainIcon.getInstance().rightIcon.upDate()):Laya.timer.frameLoop(10,this,this.onResComplete),1==this.m_nLevel&&PreloadManager.getInstance().loadG1Img(),1},i.InitOLGiftData=function(){var t;gSys.GetCurSecAdj();t=ArrOp.GetStrVal("onlinegift",this.m_szData.nameddata)},i.OnChgNick=function(t,e){function i(e){void 0===e&&(e="NIL"),DataTable.m_iSelfUser.CallSvr("OnChgNick",e),s.AddChgNickNum(),t.runWith(1)}function n(){var n=[];n.push([2,-100]),s.CheckMakeItemSz(n,0,0,Handler.create(s,function(){var a=new StringRef;return s.ChgItemSz(n,a,OPEnum.OP_FF_GNC,e)?void i(n):void t.runWith(0)}),Handler.create(s,function(){t.runWith(0)}))}var s=this;if(void 0===e&&(e="NIL"),this.GetChgNickNum()>=2){var a={title:"昵称修改",content:"您的免费改名次数已经用尽，您确定要进行付费改名吗？",num:100,isClip:!0,lbtn:"确定更改",closeOther:!1};return void MessageBox.show(5,a,Handler.create(this,n),null,Handler.create(this,function(){t.runWith(0)}))}i()},i.InitQuestData=function(){},i.onResComplete=function(){MainIcon.isInit&&(MainIcon.getInstance().upperIcon.upDate(),MainIcon.getInstance().rightIcon.upDate(),Laya.timer.clear(this,this.onResComplete))},i.InitBranchLead=function(){this.m_szBranchLead=ArrOp.GetStrVal("breanchlead",this.m_szData.nameddata),this.m_szBranchLead||(this.m_szBranchLead=[])},i.InitSignData=function(){var t;t=this.m_szData.getStrValFromND("mysign"),DataTable.m_iSelfUser.CheckSignData()},i.ReGetSpeBagItemNum=function(){},i.GetVipLevelByTotalRmb=function(t){return 1>t?0:t>=2e3?8:t>=1e3?7:t>=500?6:t>=200?5:t>=100?4:t>=30?3:t>=6?2:1},i.GetVipNeedRechargeDia=function(t){switch(t){case 0:return 0;case 1:return 1;case 2:return 6;case 3:return 30;case 4:return 100;case 5:return 200;case 6:return 500;case 7:return 1e3}return 2e3},i.GetVipDailyReward=function(t){return 0>t||t>=SysID.GetVipDailyLight().length||t>=9?SysID.GetVipDailyLight()[0]:SysID.GetVipDailyLight()[t]},i.GetVipQuickCDTimesMax=function(){return this.IsCanVipFunc(30002)?1:0},i.IsVip=function(t){void 0===t&&(t=1);var e=this.GetVipLevel(),i=e>=t?1:0;return i},i.GetVipLevel=function(){return this.m_nVipLevel},i.GetVipItemLeftTime=function(t){switch(t){case 8:return this.GetVipLeftTime(2);case 23:return this.GetVipLeftTime(0);case 24:return this.GetVipLeftTime(1);case 29:return this.GetVipLeftTime(3);case 30:return this.GetVipLeftTime(4)}return 0},i.GetVipLeftTime=function(t){var e=0,i=this.GetVipData(t);return e=gSys.GetCurSecAdj(),i.length<VipData.endtime||i[VipData.endtime]<e?0:i[VipData.endtime]-e},i.GetVipData=function(t){var e="monthdiamond";t>0&&5>t?e+=t.toString():0>t&&(e="vipdalyreward"+-t);var i;if(i=ArrOp.GetStrVal(e,this.m_szData.nameddata),!VipData.isstruct(i)){var n=[0,0,0];n[VipData.endtime]=0,n[VipData.gettime]=0,n[VipData.pushtime]=0,i=n}return i},i.SetVipData=function(t,e){var i="monthdiamond";e>0&&5>e?i+=e.toString():0>e&&(i="vipdalyreward"+-e),this.m_szData.nameddata=ArrOp.SetStrVal(i,this.m_szData.nameddata,t)},i.SetVipGetDiaTime=function(t,e){var i="monthdiamond";t>0&&3>t&&(i+=t.toString()),this.m_szData.nameddata=ArrOp.SetStrVal(i,this.m_szData.nameddata,e)},i.GetCurRechargeDia=function(){var t;return t=ArrOp.GetStrVal("totaldiamondbuy",this.m_szData.nameddata)},i.CalVipLevel=function(t){void 0===t&&(t=0);var e=this.m_nVipLevel,i=this.GetIapTotalRmb();this.m_nVipLevel=this.GetVipLevelByTotalRmb(i),e!=this.m_nVipLevel&&(t||(this.NotiVipLvChged(e,this.m_nVipLevel),this.LogGameTag("get_vip等级",this.m_nVipLevel-e))),this.NotiRechargeLvChged()},i.NotiVipLvChged=function(t,e){var i=this.GetFreePraiseNumByVip(t),n=this.GetFreePraiseNumByVip(e);n-i>0&&this.AddPraiseFlower(0,n-i);for(var s=ArrOp.GetStrVal("viprewardmailok",this.m_szData.nameddata),a=[],r=s,h=0,o=t+1;e>=o;o++)if(h=Math.pow(2,o),r!=(r|h)){var l=SysID.GetVipReachReward(o);if(!(l.length<1))for(var u=0;u<l.length;u++)a.push(l[u])}this.m_szData.nameddata=ArrOp.SetStrVal("viprewardmailok",this.m_szData.nameddata,r),a.length>0&&gSys.GameMsg("Vip奖励已发送到您的邮箱，请查收",!1)},i.NotiRechargeLvChged=function(){this.Emit("userrechargechged",[])},i.GetIapTotalRmb=function(){var t=ArrOp.GetStrVal("totaldiamondbuy",this.m_szData.nameddata);t=.1*t;var e=ArrOp.GetStrVal("iaptotalrmb",this.m_szData.nameddata);return e?e+t:t},i.OnDiyNumEvaChged=function(t,e){this.m_nDiyBuildNum=t,this.m_nDiyBuildEvalue=e,this.m_nBarnAllNum=this.GetBagMax(0),this.m_nWareAllNum=this.GetBagMax(1),this.m_nEvalue=this.m_szData.evalue+this.GetDiyTotalValue()+this.GetPlayerModelEvalue(),this.m_pRefAchvTask||this.RefAchv()},i.GetDiyBuildNum=function(){return this.m_nDiyBuildNum},i.GetBagMax=function(t){switch(t){case 0:return 5*this.m_szData.barn.baglevel+50+2*(this.m_nLevel-1)+10*this.GetDiyBuildNum();case 1:return 5*this.m_szData.warehouse.baglevel+50+2*(this.m_nLevel-1)+10*this.GetDiyBuildNum();case 2:return 65535;case 3:return 65535;case 4:return 20}return 0},i.GetBagItemSz=function(t){switch(t){case 0:return this.checkBagData(this.m_szData.barn.itemsz);case 1:return this.checkBagData(this.m_szData.warehouse.itemsz);case 2:return this.m_szData.decoration.itemsz;case 3:return this.m_szData.macbag.itemsz;case 4:return this.m_szData.wonderbag.itemsz}return null},i.checkBagData=function(t){var e=!0,i=0;for(i=1;i<t.length;i++)if(!(t[i][0]>t[i-1][0])){e=!1;break}if(e)return t;for(i=0;i<t.length;i++)for(var n=i+1;n<t.length;n++)if("string"==typeof t[n][0]&&(t[n][0]=Laya.__parseInt(t[n][0]+""),Log1.logDebug="checkBagData 背包数据错误，id为字符串："+t[n][0]),t[i][0]>t[n][0]){var s=t[i].slice();t[i]=t[n],t[n]=s}else if(t[i][0]==t[n][0]){t[n][1]+=t[i][1],t.splice(i,1);break}return t},i._chgbag=function(t,e,i,n){var s,a=0;if("string"==typeof e&&(e=Laya.__parseInt(e+""),Log1.logDebug="_chgbag 背包数据错误，id为字符串："+e),n.uid=0,0>i){if(t.length<1)return 0;if(a=ArrOp.SzHalfSearch(e,t),0>a)return 0;var r=-i;if(t[a][1]<r)return t[a][1];t[a][1]==r?(n.uid=1,t.splice(a,1),0==t.length&&(t=null)):t[a][1]-=r}else null==t?(t=[],t.push([e,i])):(a=ArrOp.SzHalfSearch(e,t),0>a?(s=[e,i],ArrOp.InsertSz(-a-1,t,s)):t[a][1]+=i);return i},i.SubFriPoint=function(t,e){return void 0===e&&(e=0),this.friendCal.SubFriPoint(t,e)},i.GM_AddFriPoint=function(t){this.friendCal.GM_AddFriPoint(t)},i.IsCanBuyExBuild=function(){return this.GetEvalue()>=100},i.CheckMakeItemSz=function(t,e,i,n,s){var a=this;void 0===e&&(e=0),void 0===i&&(i=0);var r=0;return this.InnerCheckMakeItemSz(t,e,i,!1,new Handler(this,function(){return r=a.InnerCheckMakeItemSz(t,e,i,!0),r?n&&n.run():s&&s.run(),r}),Handler.create(this,function(){return s&&s.run(),0})),r},i.InnerCheckMakeItemSz=function(t,e,i,n,s,a){function r(){MainIcon.getInstance().upperIcon.addInterface(1,1)}function h(){MainIcon.getInstance().upperIcon.addInterface(2,1)}var o=this;void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=!1);var l=0,u=0,c=0,_=0,m=0,d=__newvec(3,null),p=__newvec(3,0),f=[],g=0,S=0,b=0,y=0,v=0,I=0,x=0,D=0,w=0,T=0,C=0,k=0,L=0,M=0,A=0,G=0,O=0,B=0,z=0,P=0,N=0,R=0,E=[],H=[],U=[],V=(DataTable.itemtab,1);for(c=0;c<t.length;c++){if(null==t[c])return a&&a.run(),0;if(l=t[c][0],u=t[c][1],0!=u){switch(l){case 1:g+=u;continue;case 2:S+=u,0>u&&(x+=-u);continue;case 3:b+=u;continue;case 4:f.push([l,u]),y+=u;continue;case 5:if(0>u)return gSys.GameMsg("Add trade<0"),0;v+=u;continue;case 6:if(0>=u)return gSys.GameMsg("Add 地块<0"),0;I+=u;continue;case 7:D+=u;continue;case 8:w+=u;continue;case 23:T+=u;continue;case 24:C+=u;continue;case 29:k+=u;continue;case 30:L+=u;continue;case 9:M+=u;continue;case 22:P+=u;continue;case 25:A+=u;continue;case 26:G+=u;continue;case 27:O+=u;continue;case 39:B+=u;continue;case 28:z+=u;continue;default:if(SysID.IsBUFFZUID(l)){ArrOp.SzAddRef(l,u,U);continue}if(l>=40&&43>l)continue;u>0&&(V=0)}if(10>l)return gSys.GameMsg("unkown item:"+l),a&&a.run(),0;var F=0;if(l>=5e3)F=5;else{var W=DataTable.m_iItemTab.Get(l);if(null==W)return gSys.GameMsg("unkown item:"+l),0;F=W[4]}switch(F){case 1:case 6:m=0,0==p[0]&&(d[0]=this.m_szData.barn.itemszNew,p[0]=this.m_szBagNum[0]),u>0&&(N=1);break;case 0:case 2:case 3:case 7:m=1,0==p[1]&&(d[1]=this.m_szData.warehouse.itemszNew,p[1]=this.m_szBagNum[1]),u>0&&(R=1);break;case 4:case 5:m=2,0==p[2]&&(d[2]=this.m_szData.decoration.itemszNew,p[2]=this.m_szBagNum[2]);break;default:return gSys.GameMsg("not bagkind item:"+l),a&&a.run(),0}var j=new UintRef(0);if(_=this._chgbag(d[m],l,u,j),_!=u){if(i){var Y=DataTable.m_iItemTab.Get(l);if(null==Y)return gSys.GameMsg("unkown item:"+l),0;var X=2.5;g+=Math.min(-1,Math.ceil(X*Y[6]*3.3*(u+_)))}else E.push([l,-u-_]);_>0&&(this._chgbag(d[m],l,-_,j),f.push([l,-_])),u=-_}else f.push([l,u]);!i&&1==F&&j.uid&&(this.m_nCurItemNum=0,this.m_nCurItemNum<1&&H.push([l,_])),p[m]+=u}}if(V>0&&(e=1),N&&0!=p[0]&&!e&&p[0]>this.GetBagMax(0)){var K={title:"提示",content:"粮仓满了!",lbtn:"升级粮仓",rbtn:"取消"};return MessageBox.show(1,K,Handler.create(this,r)),a&&a.run(),0}if(R&&0!=p[1]&&!e&&p[1]>this.GetBagMax(1)){var Q={title:"提示",content:"货仓满了!",lbtn:"升级货仓",rbtn:"取消"};return MessageBox.show(1,Q,Handler.create(this,h)),a&&a.run(),0}if(0>D&&!this.SubFriPoint(-D,1))return gSys.GameMsg("友情点不足!"),a&&a.run(),0;if(0>w||0>T||0>C||0>k||0>L)return gSys.GameMsg("VIP时间无法扣减!"),a&&a.run(),0;if(0>g&&g+this.m_szData.money<0&&(E.push([1,-g-this.m_szData.money]),g=-this.m_szData.money),0>b&&b+this.m_szData.shell<0&&(E.push([3,-b-this.m_szData.shell]),b=-this.m_szData.shell),0>M&&M+this.m_szData.medal<0&&(E.push([9,-M-this.m_szData.medal]),M=-this.m_szData.medal),0>P)return gSys.Err("无权限扣除金手指!"),a&&a.run(),0;var J=this.GetLightData();0>A&&A+J[0]<0&&(E.push([25,-A-J[0]]),A=-J[0]);var Z=this.GetKey();0>G&&0>G+Z&&(E.push([26,-G-Z]),G=-Z);var q=this.GetHorn();if(0>O&&0>O+q&&(E.push([27,-O-q]),O=-q),0!=B){var $=this.GetFlowerNumByKind(0);0>B&&0>B+$&&(E.push([39,-B-$]),B=-$)}var tt=this.GetActFen();0>z&&0>z+tt&&(E.push([28,-z-tt]),z=-tt);var et,it=0;if(E.length>0){var nt=[];if(it=this.GetDiamondOfItem(E,nt),1>it){if(ArrOp.SzSearch(26,nt)>=0)return et="您的钥匙不足",gSys.PopOkCancel(new Handler(this,function(){MainIcon.getInstance().rightIcon.addInterface(1,3,"c1004")}),null,null,et,"资源不足","购买","以后再说",!1,0,E),a&&a.run(),0;if(ArrOp.SzSearch(28,nt)>=0)return et="礼券不足，点击下方小图可查看获得方式",gSys.PopOkCancel(new Handler(this,function(){gSys.GameMsg("此处打开得点券活动界面...")}),null,null,et,"资源不足","立即获取","以后再说",!1,0,E),a&&a.run(),0;if(ArrOp.SzSearch(25,nt)>=0)MainIcon.getInstance().rightIcon.addInterface(1,3);else{var st=[];if(null!=nt)for(var at=0;at<nt.length;at++)st.push({iconskin:nt[at][0],iconnum:nt[at][1]});MessageBox.show(6,{content:"缺少材料，点击下方小图可查看材料获得方式",iconArr:st})}return a&&a.run(),0}if(ArrOp.SzSearch(1,nt)>=0)return et="您可以使用点石成金换取金币",gSys.PopOkCancel(new Handler(this,function(){MainIcon.getInstance().rightIcon.addInterface(0)}),null,null,et,"资源不足","前往点石成金","以后再说",!1,0,E),a&&a.run(),0;var rt=this;if(0==n)return et="您可以使用钻石立刻换取资源",gSys.PopOkCancel(Handler.create(this,function(){a&&a.run()}),Handler.create(this,function(){return it>0&&o.GetLevel()>=1?(et="您确定花费"+it+"钻石吗?",void gSys.PopOkCancel(new Handler(rt,function(){s&&s.run()}),new Handler(rt,function(){a&&a.run()}),Handler.create(rt,function(){a&&a.run()}),et,"","确定","",!1,it,null,!1)):void(a&&a.run())}),Handler.create(this,function(){a&&a.run()}),et,"资源不足","取消","确定",!1,it,E,!1),0;S-=it,x+=it}if(0>S&&S+this.m_szData.diamond<0)return MainIcon.getInstance().rightIcon.addInterface(1,2),gSys.GameMsg("钻石不够了! 充值购买",!1),a&&a.run(),0;for(0!=g&&f.push([1,g]),0!=b&&f.push([3,b]),0!=S&&f.push([2,S]),v>0&&f.push([5,v]),I>0&&f.push([6,I]),0!=D&&f.push([7,D]),w>0&&f.push([8,w]),T>0&&f.push([23,T]),C>0&&f.push([24,C]),k>0&&f.push([29,k]),L>0&&f.push([30,L]),0!=M&&f.push([9,M]),0!=P&&f.push([22,P]),0!=A&&f.push([25,A]),0!=G&&f.push([26,G]),0!=O&&f.push([27,O]),0!=B&&f.push([39,B]),0!=z&&f.push([28,z]),c=0;c<U.length;c++)f.push([U[c][0],U[c][1]]);t.splice(0,t.length);var ht=f.length;for(c=0;ht>c;c++)t.push(f[c]);return f.splice(0,ht),s&&s.run(),1},i.GetFreeVip=function(){var t=ArrOp.GetStrVal("freevip",this.m_szData.nameddata);return t?t:0},i.GetVipQuickCDTimes=function(){if(!this.IsVip())return 0;var t=ArrOp.GetStrVal("vipcdusetimes",this.m_szData.nameddata);t||(t=0);var e=this.GetVipQuickCDTimesMax(),i=ArrOp.GetStrVal("vipcddate",this.m_szData.nameddata);if(!i)return t=0,e-t;if(i){var n=0;if(n=gSys.GetCurSecAdj(),Math.round(i/86400)==Math.round(n/86400))return e-t;if(Math.floor(i/86400)==Math.floor(n/86400))return e-t}else{var s,a;if(s=DataTable.m_iSelfUser.GetSvrLocalTime(),i instanceof Date&&(a=i),a&&s.getFullYear()==a.getFullYear()&&s.getMonth()==a.getMonth()&&s.getDate()==a.getDate())return e-t}return t=0,this.m_szData.nameddata=ArrOp.SetStrVal("vipcdusetimes",this.m_szData.nameddata,t),e-t},i.GetBlockCountFromShop=function(){var t=ArrOp.GetStrVal("terrainshop",this.m_szData.nameddata);return t?t:0},i.SetBlockCountFromShop=function(t){this.m_szData.nameddata=ArrOp.SetStrVal("terrainshop",this.m_szData.nameddata,t)},i.GetBlockPriceFromShop=function(){var t=ArrOp.GetStrVal("terrainshop",this.m_szData.nameddata);t=t?t:0;var e=t/10/1;return e=Math.floor(100+500*e)},i.GetDiamondOfItem=function(t,e){for(var i=0,n=0,s=0,a=0,r=[],h=0,o=0;o<t.length;o++){if(t[o].length<2)throw new Error("GetDiamondOfItem item sz err:"+t);if(s=t[o][0],a=t[o][1],1>a)throw new Error("GetDiamondOfItem item num err:"+s+"="+a);switch(s){case 1:i+=this.GetMoneyExchgDia(a),e.push([1,a]);break;case 3:i+=30*a;break;case 9:i+=30*a;break;default:if(r=DataTable.m_iItemTab.Get(s),null==r){e.push([s,a]),h=1;continue}if(r[8]<1){e.push([s,a]),h=1;continue}n=a*r[8],1>n&&(n=1),i+=n;continue}}return Boolean(h)?-1:i},i.GetMoneyExchgDia=function(t){var e=DataTable.m_iUserLevelTab.Get(this.m_nLevel);if(0==e[13])throw new Error("金币转换钻石错误：m_nLevel="+this.m_nLevel);var i=Math.floor(100*t/e[13]);return 1>i?1:i},i.ChgItemSz=function(t,e,i,n,s,a,r,h,o){void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===r&&(r=0),void 0===h&&(h=""),void 0===o&&(o="");var l,u=0,c=0,_=0,m=0,d=0,p=new Array(null,null,null),f=new Array(null,null,null),g=this.m_szData.money,S=this.m_szData.diamond,b=this.m_szData.shell,y=this.m_szData.medal,v=this.GetLight(),I=this.GetKey(),x=this.GetHorn(),D=this.GetFlowerNumByKind(0),w=this.GetActFen(),T=0,C=0,k=0,L=0,M=0,A=0,G=0,O=0,B=0,z=0,P=0,N=0,R=0,E=0,H=0,U=0,V=0,F=0,W=0,j=0,Y=0,X=0,K=0,Q=[],J=1,Z=0;if(t.length<1)throw new Error("Empty数组内容是空的");var q=t.length;for(u=0;q>u;u++){if(l=null,t[u].length<2)throw new Error("szformat数组格式不对"+t);if(c=t[u][0],_=t[u][1],0!=_){switch((21>=c&&4!=c||c>=5e3)&&(Z=1),c){case 1:T+=_;continue;case 2:C+=_;continue;case 3:k+=_;continue;case 4:L+=_;continue;case 5:if(0>=_)return gSys.GameMsg("Add trade < 0"),
0;M+=_;continue;case 6:if(0>=_)return gSys.GameMsg("Add 地块<0"),0;A+=_;continue;case 7:G+=_;continue;case 8:O+=_;continue;case 23:B+=_;continue;case 24:z+=_;continue;case 29:P+=_;continue;case 30:N+=_;continue;case 9:R+=_;continue;case 22:E+=_;continue;case 25:H+=_;continue;case 26:U+=_;continue;case 27:V+=_;continue;case 39:F+=_;continue;case 28:W+=_;continue;default:if(SysID.IsBUFFZUID(c)&&ArrOp.SzAddRef(c,_,Q),c>=40&&43>c){gSys.GameMsg("暂不处理系统 参数...");continue}_>0&&(J=0)}if(10>c)return gSys.GameMsg("unkown item:"+c),0;var $=0;if(c>=5e3)$=5;else{if(l=DataTable.m_iItemTab.Get(c),null==l)return gSys.GameMsg("unkown item:"+c),0;$=l[4]}switch($){case 1:case 6:d=0,null==f[0]&&(p[0]=this.m_szData.barn.itemszNew,f[0]=this.m_szBagNum[0],gSys.SetSignal("bagdataref",0)),_>0&&(j=1);break;case 0:case 2:case 3:case 7:d=1,null==f[1]&&(p[1]=this.m_szData.warehouse.itemszNew,f[1]=this.m_szBagNum[1],gSys.SetSignal("bagdataref",1)),_>0&&(Y=1);break;case 4:case 5:d=2,null==f[2]&&(p[2]=this.m_szData.decoration.itemszNew,f[2]=this.m_szBagNum[2],gSys.SetSignal("bagdataref",2));break;default:return gSys.GameMsg("not bagkind item:"+c),0}var tt=new UintRef;if(this._chgbag(p[d],c,_,tt)!=_)return e.ustr="can't chgbag item:"+c+" "+_,0;f[d]+=_,c>=10&&15>=c&&(a||this.LogToolItemChg(c,_)),SysID.IsHDCPID(c)&&this.AddActivProductVer(c),SysID.IsZWCPID(c)&&i==OPEnum.OP_ZW_SH&&(l=DataTable.m_iFieldTab.Get(c),l&&(X+=l[2]*_)),SysID.IsJCCPID(c)&&i==OPEnum.OP_JX_SH&&(l=DataTable.m_iMacFormulTab.Get(c),l&&(K+=l[4]*_))}}var et=this.GetLightData();if(J>0&&(s=1),0>T&&T+this.m_szData.money<0)return e.ustr="money "+this.m_szData.money+"<"+-T,0;if(0>C&&C+this.m_szData.diamond<0)return e.ustr="diamond "+this.m_szData.diamond+"<"+-C,0;if(0>k&&k+this.m_szData.shell<0)return e.ustr="shell "+this.m_szData.shell+"<"+-k,0;if(0>R&&R+this.m_szData.medal<0)return e.ustr="medal "+this.m_szData.medal+"<"+-R,0;if(0>E)return e.ustr="chgfinger<0",0;if(0>H&&H+et[0]<0)return e.ustr="light "+et[0]+"<"+-H,0;var it=this.GetKey();if(0>U&&0>U+it)return e.ustr="key "+it+"<"+-U,0;var nt=this.GetHorn();if(0>V&&0>V+nt)return e.ustr="horn "+nt+"<"+-V,0;if(0!=F){var st=this.GetFlowerNumByKind(0);if(0>F&&0>F+st)return e.ustr="flower0 "+st+"<"+-F,0}var at=this.GetActFen();if(0>W&&0>W+at)return e.ustr="actfen "+at+"<"+-W,0;if(null!=f[0]&&!s&&f[0]>this.GetBagMax(0))return e.ustr="bag over "+f[0]+">"+this.GetBagMax(0),0;if(null!=f[1]&&!s&&f[1]>this.GetBagMax(1))return e.ustr="bag over "+f[1]+">"+this.GetBagMax(1),0;if(0>G&&!this.SubFriPoint(-G,1))return e.ustr="fripoint not enough!",0;if(0>O||0>B||0>z||0>P||0>N)return e.ustr="try to sub vip time",0;if(a)return 1;null!=f[0]&&(this.m_szData.barn.itemsz=this.checkBagData(p[0]),this.m_szBagNum[0]=f[0],this.m_nBarnNum=this.m_szBagNum[0],gSys.SetSignal("bagdataref",0)),null!=f[1]&&(this.m_szData.warehouse.itemsz=this.checkBagData(p[1]),this.m_szBagNum[1]=f[1],this.m_nWareNum=this.m_szBagNum[1],gSys.SetSignal("bagdataref",1)),null!=f[2]&&(this.m_szData.decoration.itemsz=p[2],this.m_szBagNum[2]=f[2],gSys.SetSignal("bagdataref",2)),0!=T&&(0>T?this.SubMoney(-T,i):this.AddMoney(T,i)),0!=C&&(0>C?this.SubDiamond(-C,i):this.AddDiamond(C,i)),0!=k&&(0>k?this.SubShell(-k,i):this.AddShell(k,i)),0!=R&&(0>R?this.SubMedal(-R,i):this.AddMedal(R,i)),0!=L&&(0>L?this.SubExp(new Int64Ref(-L),i):this.AddExp(new Int64Ref(L),i)),0!=U&&(U>0?this.AddKeyData(U,i):this.SubKeyData(U,i)),0!=V&&(V>0?this.AddHornData(V,i):this.SubHornData(V,i)),0!=F&&(F>0?this.AddPraiseFlower(0,F):this.SubPraiseFlower(0,F)),0!=W&&(W>0?this.AddActFen(W):this.SubActFen(W)),0!=H&&(H>0?this.AddLightData(H,i):this.SubLightData(H,i)),M>0&&this.AddTrade(M,i),A>0&&(m=this.AddMapBlock(A,i)),0>G?this.SubFriPoint(-G):G>0&&this.GM_AddFriPoint(G),O>0&&DataTable.m_iSelfUser.AddVipTime(O),B>0&&DataTable.m_iSelfUser.AddVipTime(B,0),z>0&&DataTable.m_iSelfUser.AddVipTime(z,1),P>0&&DataTable.m_iSelfUser.AddVipTime(P,3),N>0&&DataTable.m_iSelfUser.AddVipTime(N,4);var rt=[];if(Q.length>0)for(u=0;u<Q.length;u++)Q[u][1]>0||Q[u][1]<0;var ht=[];return 0!=T&&ht.push([1,[g,T,this.GetMoney()]]),0!=C&&ht.push([2,[S,C,this.GetDiamond()]]),0!=k&&ht.push([3,[b,k,this.GetShell()]]),0!=R&&ht.push([9,[y,R,this.GetMedal()]]),0!=H&&ht.push([25,[v,H,this.GetLight()]]),0!=U&&ht.push([26,[I,U,this.GetKey()]]),0!=V&&ht.push([27,[x,V,this.GetHorn()]]),0!=F&&ht.push([39,[D,F,this.GetFlowerNumByKind(0)]]),0!=W&&ht.push([28,[w,W,this.GetActFen()]]),0!=A&&ht.push([6,[m-A,A,m]]),rt.length>0&&ht.push([40,rt]),ht.length>0&&(Z=1),0>C&&this.LogGameTag("get_钻石使用数量",-C),0>H&&this.LogGameTag("get_闪电使用数量",-H),0>H&&this.m_nLevel<10&&this.SetGiftPickRec(1,H),this.CheckItemAutoFly(t,n,o),MainIcon.getInstance().upperIcon.upDate(),MainIcon.getInstance().rightIcon.upDate(),1},i.CheckItemAutoFly=function(t,e,i){void 0===i&&(i="");for(var n,s=0,a=0,r=0;t&&r<t.length;r++)s=t[r][0],a=t[r][1];this.GetItemAutoFly(n,t,e,i)},i.GetItemAutoFly=function(t,e,i,n){void 0===n&&(n="");var s=0,a=0;for(a=0;t&&a<t.length;a++)s=t[a][0];return n&&n.length>0?void gSys.WaitSignal(Handler.create(this,this.ItemAutoFly,[e,i]),n):void this.ItemAutoFly(e,i)},i.ItemAutoFly=function(t,e){for(var i,n=!1,s=0,a=0,r=0,h=0;t&&h<t.length;h++)s=t[h][0],a=t[h][1],i=t[h]&&t[h].length>2?t[h][2]:e,(!i||i.length<2)&&(i=[Laya.stage.mouseX,Laya.stage.mouseY]),0!=a&&(0>a?(GFlyItemIcon.FlyDownItem(s,a,r,i),r+=600):(s>5e3&&(n=!0,this.IsNewEvaBuild(s)&&(a>0&&this.addNewEvaSign(s),i&&i.length>=3?i[2]=1:i.push(1))),GFlyItemIcon.AutoFlyTo(s,a,i)));n&&this.checkNewEvaSign()},i.checkNewEvaSign=function(){var t,e=LocalStorage.getItem("newevasign");t=e&&e.length>0?JSON.parse(e):{};var i=DataTable.m_iSelfUser.GetEvalueteSz();if(i&&i[7]){i=i[7];for(var n=!1,s=0;s<i.length;s++)if(1==t[i[s][0]]){n=!0;break}MainIcon.getInstance().upperIcon.ShowEvaEff(n)}},i.hasNewEvaSign=function(t){var e,i=LocalStorage.getItem("newevasign");return i&&i.length>0?(e=JSON.parse(i),1==e[t]):!1},i.addNewEvaSign=function(t){var e,i=LocalStorage.getItem("newevasign");e=i&&i.length>0?JSON.parse(i):{},e[t]=1,LocalStorage.setItem("newevasign",JSON.stringify(e))},i.delNewEvaSign=function(t){var e,i=LocalStorage.getItem("newevasign");e=i&&i.length>0?JSON.parse(i):{},e[t]=0,delete e[t],LocalStorage.setItem("newevasign",JSON.stringify(e)),this.checkNewEvaSign()},i.GetNewerQuickAgv=function(t){var e=1,i=0,n=15;this.m_nLevel<n&&(e=.25+.75/(n-1)*(this.m_nLevel-1));var s=0,a=0;return s=this.GetVipLeftTime(3),a=this.GetVipLeftTime(4),(s>0||a>0)&&(i=this.GetVipQuickAgvByKind(t,s,a),e-=i),.1>e&&(e=.1),e},i.GetVipQuickAgvByKind=function(t,e,i){switch(t){case 0:return MathUtil1.TEMP_MAX(.1*(e>0?1:0),.15*(i>0?1:0));case 1:return MathUtil1.TEMP_MAX(.1*(e>0?1:0),.15*(i>0?1:0));case 2:return MathUtil1.TEMP_MAX(.1*(e>0?1:0),.15*(i>0?1:0))}return 0},i.GetDiaExchgMoney=function(t){var e=DataTable.m_iUserLevelTab.Get(this.m_nLevel),i=Math.floor(t*e[13]/100);return 1>i?1:i},i.GetIapMoney=function(t){var e=DataTable.m_iUserLevelTab.Get(this.m_nLevel);return t*e[13]/100},i.GetLeadStep=function(){if(!this.m_szData)return 0;var t;return t=ArrOp.GetStrVal("leadstep",this.m_szData.nameddata),!t||Math.floor(t)<1?1:Math.floor(t)},i.GetShopTipData=function(){var t=ArrOp.GetStrVal("shoptip",this.m_szData.nameddata);return t},i.CheckCost=function(t,e){var i=0;switch(t){case 0:i=this.GetMoney();break;case 1:i=this.GetDiamond();break;case 2:i=this.GetShell();break;default:return 0}return e>i?0:1},i.ChgTotalCurrency=function(t,e){},i.GetItemNum=function(t){var e=DataTable.m_iItemTab.Get(t);if(null==e)return 0;var i=this.GetItemBagByKind(e[4]);return this.GetBagItemNum(i,t)},i.GetBuildHaveNum=function(t){for(var e=new MapItem,i=0,n=0;n<this.m_szData.mapdata.length;n++)e=this.m_szData.mapdata[n],e.itemid==t&&i++;var s=ArrOp.SzHalfSearch(t,this.m_szData.decoration.itemsz);return s>=0&&(i+=this.m_szData.decoration.itemsz[s][1]),s=ArrOp.SzHalfSearch(t,this.m_szMacBagNum),s>=0&&(i+=this.m_szMacBagNum[s][1]),s=ArrOp.SzHalfSearch(t,this.m_szWonderBagNum),s>=0&&(i+=this.m_szWonderBagNum[s][1]),i},i.FindItemBagKind=function(t){if(!SysID.IsDTJZID(t)){var e=DataTable.m_iItemTab.Get(t);if(null==e)return-1;switch(e[4]){case 1:case 6:return 0;case 0:case 2:case 3:case 7:return 1;case 4:case 5:return 2}return-1}return 2},i.GetItemBagByKind=function(t){switch(t){case 1:case 6:return 0;case 0:case 2:case 3:return 1;case 4:case 5:return 2}return-1},i.GetBagNumData=function(t){return[this.GetBagTotalNum(t),this.GetBagMax(t)]},i.GetBagTotalNum=function(t){return this.m_szBagNum[t]},i.GetBagLvl=function(t){switch(t){case 0:return this.m_szData.barn.baglevel;case 1:return this.m_szData.warehouse.baglevel;case 2:return this.m_szData.decoration.baglevel;case 3:return this.m_szData.macbag.baglevel;case 4:return this.m_szData.wonderbag.baglevel}return 0},i.GetNextBagMax=function(t){switch(t){case 0:return 5*(this.m_szData.barn.baglevel+1)+50+2*(this.m_nLevel-1)+10*this.GetDiyBuildNum();case 1:return 5*(this.m_szData.warehouse.baglevel+1)+50+2*(this.m_nLevel-1)+10*this.GetDiyBuildNum();case 2:return 65535;case 3:return 65535;case 4:return 40}return 0},i.AddBagLvl=function(t){switch(t){case 0:this.m_szData.barn.baglevel++,this.m_nBarnAllNum=this.GetBagMax(0);break;case 1:this.m_szData.warehouse.baglevel++,this.m_nWareAllNum=this.GetBagMax(1);break;default:return 0}return gSys.SetSignal("bagdataref",t),1},i.IsBagFull=function(t){return 0==t&&this.m_nBarnNum>=this.m_nBarnAllNum?1:1==t&&this.m_nWareNum>=this.m_nWareAllNum?1:0},i.GetBagItemNum=function(t,e){if(10>e)switch(e){case 1:return this.GetMoney();case 2:return this.GetDiamond();case 3:return this.GetShell();case 9:return this.GetMedal()}if(e>=22&&40>e)switch(e){case 28:return this.GetActFen()}if(e>=40&&43>e)return this.GetXTCS(e);var i;switch(t){case 0:i=this.m_szData.barn.itemsz=this.m_szData.barn.itemsz||[];break;case 1:i=this.m_szData.warehouse.itemsz=this.m_szData.warehouse.itemsz||[];break;case 2:i=this.m_szData.decoration.itemsz=this.m_szData.decoration.itemsz||[];break;default:throw new Error("GetBagItemNum kind err:"+t+" "+e)}if(i.length<1)return 0;var n=ArrOp.SzHalfSearch(e,i);return 0>n?0:i[n][1]},i.IsXTCS=function(t){return 40>t?0:t>=43?0:1},i.GetXTCS=function(t){if(40>t)return 0;if(t>=43)return 0;t-=40;var e=0;return Boolean(e=ArrOp.GetStrVal("sn_"+t,this.m_szData.nameddata))?e:0},i.SetXTCS=function(t,e){40>t||t>=43||(t-=40,ArrOp.SetStrVal("sn_"+t,this.m_szData.nameddata,e))},i.GetActFen=function(){var t=[];return Boolean(t=ArrOp.GetStrVal("actfen",this.m_szData.nameddata))?2!=t.length?0:20151203!=t[1]?0:t[0]:0},i.AddActFen=function(t){var e=this.GetActFen();e+=t,ArrOp.SetStrVal("actfen",this.m_szData.nameddata,[e,20151203]),this.m_nActFen=e},i.SubActFen=function(t){var e=this.GetActFen();e+=t,0>e&&(e=0),ArrOp.SetStrVal("actfen",this.m_szData.nameddata,[e,20151203]),this.m_nActFen=e},i.GetFillPitCount=function(){var t=[];return Boolean(t=ArrOp.GetStrVal("fillpitcount",this.m_szData.nameddata))?2!=t.length?0:20151011!=t[1]?0:t[0]:0},i.AddFillPitCount=function(t){var e=this.GetFillPitCount();e+=t,ArrOp.SetStrVal("fillpitcount",this.m_szData.nameddata,[e,20151011])},i.SubFillPitCount=function(t){var e=this.GetFillPitCount();e+=t,0>e&&(e=0),ArrOp.SetStrVal("fillpitcount",this.m_szData.nameddata,[e,20151011])},i.DelVerChgItem=function(t){if(t.length){if(!this.CheckMakeItemSz(t,1))throw new Error("check activ ver item err");var e=new StringRef;!this.ChgItemSz(t,e,OPEnum.OP_SC_HDWP,null,1)}},i.AddSysBuildAvatar=function(t,e){var i=ArrOp.GetStrVal("sysbuildavatar",this.m_szData.nameddata);i||(i=[],i.push([t,0,[]])),3!=i[0].length&&(i.splice(0,1),i.unshift([t,0,[]]));var n=ArrOp.SzHalfSearch(t,i);if(n>=0){var s=ArrOp.SzHalfSearch(e,i[n][2]);if(s>=0)return;i[n][1]=e,i[n][2].unshift(e)}else{var a=[t,e,[]];a[2].push(e),i.unshift(a)}ArrOp.SetStrVal("sysbuildavatar",this.m_szData.nameddata,i)},i.GetCurBuildAvatar=function(t){var e;if(e=ArrOp.GetStrVal("sysbuildavatar",this.m_szData.nameddata),!e)return e=[t,0,[]];if(3!=e[0].length)return e=[t,0,[]];var i=ArrOp.SzHalfSearch(t,e);return 0>i?[t,0,[]]:e[i]},i.GetVipTomFindTime=function(){var t=0;return this.IsVip()?(this.IsCanVipFunc(80002)?t=7:this.IsCanVipFunc(70002)?t=6:this.IsCanVipFunc(60003)?t=5:this.IsCanVipFunc(50003)?t=4:this.IsCanVipFunc(40003)?t=3:this.IsCanVipFunc(10006)?t=2:this.IsCanVipFunc(10005)?t=2:this.IsCanVipFunc(10004)&&(t=2),t):t},i.AddMapItem=function(t,e,i,n,s){var a=new MapItem;if(a.itemid=e,a.x=i,a.y=n,t>0)if(2==s){var r=DataTable.m_iTreeTab.Get(e);null==r?(gSys.Err("tree not find id="+e),a.data=[t,0,0,null]):a.data=[t,0,r[2],null]}else a.forword=256,a.data=t;else a.forword=0,a.data=[];return this.m_szData.mapdata.push(a),a},i.GetFirIapLead=function(){var t;return t=ArrOp.GetStrVal("firipalead",this.m_szData.nameddata),t?t:null},i.CheckOLGift=function(t){var e;if(e=ArrOp.GetStrVal("onlinegift",this.m_szData.nameddata),"number"==typeof e[2]&&Math.floor(e[2])==e[2]){var i=0;i=gSys.GetCurSecAdj(),Math.floor(e[2]/86400)!=Math.floor(i/86400)&&(t=1)}else{var n,s;n=DataTable.m_iSelfUser.GetSvrLocalTime(),e[2]instanceof Date&&(s=e[2]),(n.getFullYear()!=s.getFullYear()||n.getMonth()!=s.getMonth()||n.getDate()!=s.getDate())&&(t=1)}this.SetCurOLGiftSec(t)},i.SetCurOLGiftSec=function(t){var e=0;e=gSys.GetCurSecAdj();var i=DataTable.m_iOnlineGiftTab.GetOnlineGift(t);i=i.length?[t,i[1]+e,e]:[0,0,e],this.m_szData.nameddata=ArrOp.SetStrVal("onlinegift",this.m_szData.nameddata,i),this.Emit("activchg",0)},i.GetCurOLGiftSec=function(){var t;if(t=ArrOp.GetStrVal("onlinegift",this.m_szData.nameddata),0==t[1])return 0;var e=0;return e=gSys.GetCurSecAdj(),Math.max(0,t[1]-e)},i.GetCurOLGift=function(){var t;return t=ArrOp.GetStrVal("onlinegift",this.m_szData.nameddata),t[0]},i.GetActCreateDate=function(){var t,e=0;t=ArrOp.GetStrVal("activdata",this.m_szData.nameddata),t||(e=1),t.length&&0!=t[1]&&(e=1);var i;return e?(i=DateOp.GetLocalTime(),this.m_szData.nameddata=ArrOp.SetStrVal("activdata",this.m_szData.nameddata,[DateOp.string(i),0])):i=DateOp.SetDateStr(t[0],i),i},i.GetAdjActDate=function(t,e,i){var n=DataTable.m_iActivityTab.GetActivityByID(t),s=this.GetAdjDate(n[9],n[10],n[7],n[8]);return e=s[0],i=s[1],s[2]},i.IsActivDay=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s=this.GetAdjDate(t,e,i,n);return s[2]>=1?1:0},i.GetActSzQuestKind=function(t){switch(t){case 1:return 2;case 2:return 2}return-1},i.CheckActQuest=function(){for(var t,e,i=DataTable.m_iQuestTab.m_szActQuest,n=0,s=0,a=0;a<i.length;a++)if(t=i[a],Quest.isstruct(t))if(s=this.IsQuestDay(t[12],t[13],t[10],t[11]),n=ArrOp.SzHalfSearch(t[0],this.m_szActQuest),n>=0){if(e=this.m_szActQuest[n],!QuestData.isstruct(e)){this.m_szActQuest=ArrOp.DelSz(n,this.m_szActQuest);continue}StringOp.Compare(e[6],t[20])||(e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=t[20],1==t[19]?e[1]=this.GetAchvTagNum(t[14]):e[1]=0),0>s&&this.AddTempAchvTag(t[14],t[0])&&(e[2]=4),0==s&&(e[2]=5),s>0&&(4==e[2]&&(e[2]=0,e[4]=0,e[5]=0,1==t[19]?e[1]=this.GetAchvTagNum(t[14]):e[1]=0),(e[4]>=t[17]||e[5]>=t[18])&&(e[2]=2)),4!=e[2]&&this.RemoveTempAchvTag(t[14],t[0]),this.m_szActQuest[n]=e}else{var r=[0,0,0,[],0,0,"",""];if(r[0]=t[0],r[1]=0,r[4]=0,r[5]=0,r[2]=0,r[6]=t[20],0>s&&this.AddTempAchvTag(t[14],t[0])&&(r[2]=4),0==s)continue;s>0&&(1==t[19]?r[1]=this.GetAchvTagNum(t[14]):r[1]=0),4!=r[2]&&this.RemoveTempAchvTag(t[14],t[0]),this.m_szActQuest=ArrOp.InsertSz(-n-1,this.m_szActQuest,r)}else gSys.Err("quest not find at tab id : "+t[0]);this.SaveUnfinish()},i.ActQuestUpdate=function(){this.CheckActQuest();for(var t,e=DataTable.m_iQuestTab.m_szActQuest,i=0;i<e.length;i++)t=e[i],2==t[19]&&this.SetQuestData(t[0],1);this.Emit("activchg",0)},i.CheckOtherQuest=function(){for(var t=DataTable.m_iQuestTab.GetAllOtherQuest(),e=0;e<t.length;e++)this.AddQuest(t[e][0],3);this.SaveUnfinish()},i.OnChgOldQuestData=function(){1112!=this.GetQuestVer()&&Log1.error("OnChgOldQuestData 函数 需要做数据转换！")},i.IsQuestDay=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s=this.GetAdjDate(t,e,i,n);return s[2]},i.IsQuestDayByID=function(t){var e=DataTable.m_iQuestTab.GetQuestByID(t);if(!Quest.isstruct(e))return 0;var i=this.GetAdjDate(e[12],e[13],e[10],e[11]);return i[2]},i.IsActivDayByID=function(t){var e=DataTable.m_iActivityTab.GetActivityByID(t),i=this.GetAdjDate(e[9],e[10],e[7],e[8]);return i[2]},i.GetAdjDate=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s,a,r;if(s=DataTable.m_iSelfUser.GetSvrLocalTime(),a=DateOp.SetDateStr(t,a),r=DateOp.SetDateStr(e,r),i>=1){var h=DateOp.SubDateSec(r,a);switch(i){case 1:a=DateOp.SetDate(a,s.getFullYear(),s.getMonth(),s.getDate(),a.getHours(),a.getMinutes(),a.getSeconds());break;case 2:a=this.GetCreateDate();break;case 3:a=this.GetActCreateDate()}n>0&&DateOp.AdjDateSec(n,a),r=DateOp.SetDate(r,a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()),r instanceof Date||(r=DateOp.SetDateStr(r)),r=DateOp.AdjDateSec(h,r)}var o=0;return a instanceof Date||(a=DateOp.SetDateStr(r)),t.length&&(o=DateOp.SubDateSec(s,a),0>o)?[a,r,o]:e.length?(o=DateOp.SubDateSec(r,s),0>o?[a,r,0]:[a,r,o]):[a,r,1]},i.LoadUnfinish=function(){var t;if(t=ArrOp.GetStrVal("myquest",this.m_szData.nameddata),t||(t=ArrOp.InitSz(7,null)),t.length<7){var e;e=ArrOp.InitSz(7-t.length,null),t=ArrOp.SzLink(t,e),this.m_szData.nameddata=ArrOp.SetStrVal("myquest",this.m_szData.nameddata,t)}this.m_szQuest=t[1],this.m_szDailyQuest=t[2],this.m_szActQuest=t[3],this.m_szOtherQuest=t[4],"number"==typeof t[5]&&Math.floor(t[5])==t[5]&&(this.m_nQuestGrp=t[5])},i.SaveUnfinish=function(){var t;if(t=ArrOp.GetStrVal("myquest",this.m_szData.nameddata),t||(t=ArrOp.InitSz(7,null)),t.length<7){var e;e=ArrOp.InitSz(7-t.length,null),t=ArrOp.SzLink(t,e)}t[1]=this.m_szQuest,t[2]=this.m_szDailyQuest,t[3]=this.m_szActQuest,t[4]=this.m_szOtherQuest,t[5]=this.m_nQuestGrp,this.m_szData.nameddata=ArrOp.SetStrVal("myquest",this.m_szData.nameddata,t)},i.GetQuestVer=function(){var t;if(t=ArrOp.GetStrVal("myquest",this.m_szData.nameddata),!t)return 0;if(t.length<7)return 0;var e=0;return"number"==typeof t[6]&&Math.floor(t[6])==t[6]&&(e=t[6]),e},i.SetQuestVer=function(){var t;if(t=ArrOp.GetStrVal("myquest",this.m_szData.nameddata),t||(t=ArrOp.InitSz(7,null)),t.length<7){var e;e=ArrOp.InitSz(7-t.length,null),t=ArrOp.SzLink(t,e)}t[6]=1112,this.m_szData.nameddata=ArrOp.SetStrVal("myquest",this.m_szData.nameddata,t)},i.GetCompleteQuest=function(t){var e;return e=ArrOp.GetStrVal("myquest",this.m_szData.nameddata),e?e[0]?e[0].indexOf(t):-1:0},i.GetLastCompleteQuest=function(){var t;if(t=ArrOp.GetStrVal("myquest",this.m_szData.nameddata),!t)return 0;if(!t[0])return 0;var e=t[0].length;return e?t[0][e-1]:0},i.AddCompleteQuest=function(t){var e;e=ArrOp.GetStrVal("myquest",this.m_szData.nameddata);var i=ArrOp.SzHalfSearch(t,e[0]);i>=0||(e[0]||(e[0]=[]),e[0].push(t),this.m_szData.nameddata=ArrOp.SetStrVal("myquest",this.m_szData.nameddata,e))},i.CheckQuestWharfData=function(){for(var t,e=this.m_szDailyQuest,i=0;i<e.length;i++)if(e[i]&&(t=DataTable.m_iQuestTab.GetQuestByID(e[i][0],i),t&&StringOp.Compare(t[14],"连续航运"))){this.GetAchvTagNum(t[14])-e[i][1]>=t[16]&&(e[i][2]=1),e[i][1]>this.GetAchvTagNum(t[14])&&(e[i][1]=this.GetAchvTagNum(t[14]));break}this.m_szDailyQuest=e,this.SaveUnfinish()},i.GetNewQuest=function(){this.m_nQuestGrp=0;var t=0,e=0;t=this.GetLastCompleteQuest(),t++;var i=DataTable.m_iQuestTab.GetGroupQuest(t);if(!i||i.length<1)return void this.NEWQUESTEND(e);if(this.m_nQuestGrp=t,!this.IsQuestPrecond(i[0][4]))return void this.NEWQUESTEND(e);var n=i[0][3],s=1>n?1:this.GetCompleteQuest(n);if(s>=0&&this.GetCompleteQuest(t)<0)for(var a=0;a<i.length;a++){if(!this.AddQuest(i[a][0],0)){gSys.Err("AddQuest err id : "+i[a][0]),this.m_szQuest=[];break}e=1}this.NEWQUESTEND(e)},i.NEWQUESTEND=function(t){this.SaveUnfinish(),t&&(DataTable.m_i_QuestInfo.m_nStatus=0,QuestCompleteAni.ClearIsPlay(0,0),this.Emit("questdatachg",0))},i.GetDailyQuestAward=function(t){var e=DataTable.m_iUserLevelTab.Get(this.m_nLevel),i=e[5],n=e[6],s=3.3*(i+Math.random()*(n-i)),a=1*(60*Math.random()+20)/100,r=Math.max(1,Math.floor(s*a)),h=Math.floor(s)-r,o=[];return o.push([4,r*t]),o.push([1,h*t]),o},i.IsQuestPrecond=function(t){var e,i=StringOp.GetWordM(t,"_");e=i[0],t=i[1];var n=Laya.__parseInt(t),s=0;switch(e){case"lev":s=this.m_nLevel;break;case"lead":if(this.m_nLevel>=5)return 1;s=this.GetLeadStep();break;default:return 1}return n>s?0:1},i.GetQuestKind=function(t){return SysID.IsZXRWID(t)?0:SysID.IsRCRWID(t)?1:SysID.IsHDRWID(t)?2:SysID.IsQTRWID(t)?3:(gSys.Err("quest kind err id : "+t),-1)},i.GetSzQuestData=function(t){return 0==t?this.m_szQuest:1==t?this.m_szDailyQuest:2==t?this.m_szActQuest:3==t?this.m_szOtherQuest:(gSys.Err("quest kind err kind : "+t),null)},i.AddQuest=function(t,e){if(1>t)return 0;var i=DataTable.m_iQuestTab.GetQuestByID(t);if(!Quest.isstruct(i))return gSys.Err("quest not find at tab id : "+t),0;var n=[0,0,0,[],0,0,"",""];n[0]=t,n[4]=0,n[5]=0,n[2]=0,n[6]=i[20],1==i[19]?n[1]=this.GetAchvTagNum(i[14]):n[1]=0;var s=0;switch(e){case 0:this.m_szQuest||(this.m_szQuest=[]),this.m_szQuest.push(n);break;case 1:switch(s=i[2]%200-1,i[14]){case"get_vip等级":var a=this.GetVipDailyReward(this.GetVipLevel());n[3].push([25,a]);break;default:i[21].length||(n[3]=this.GetDailyQuestAward(i[22]))}this.m_szDailyQuest[s]=n;break;case 2:gSys.Err("err");break;case 3:var r=this.GetSzQuestData(3);s=ArrOp.SzHalfSearch(t,r),r=ArrOp.InsertSz(-s-1,r,n),this.m_szOtherQuest=r}return 1},i.GetQuestData=function(t){if(1>t)return null;var e=this.GetQuestKind(t),i=this.GetSzQuestData(e),n=0;if(n=2>e?ArrOp.SzSearch(t,i):ArrOp.SzHalfSearch(t,i),0>n)return null;var s=i[n];if(!QuestData.isstruct(s))return gSys.Err("QuestData err not find id : "+t),null;var a=DataTable.m_iQuestTab.GetQuestByID(t);if(!Quest.isstruct(a))return gSys.Err("hdtab err not find id : "+t),null;var r=this.IsQuestDay(a[12],a[13],a[10],a[11]);0==r&&(s[2]=5);var h=this.GetAchvTagNum(a[14]);switch(s[2]){case 4:s[1]=h,s[2]=0;break;case 2:s[1]=h;break;case 1:s[1]=h-a[16];break;case 5:s[1]=h;break;default:2==a[19]&&(s[1]=h-this.GetAchvTagNum(a[14],3)),s[2]=h-s[1]<a[16]?0:1}return s},i.SetQuestData=function(t,e){if(void 0===e&&(e=5),!(1>t)){var i=this.GetQuestKind(t),n=this.GetSzQuestData(i),s=0;if(s=2>i?ArrOp.SzSearch(t,n):ArrOp.SzHalfSearch(t,n),!(0>s)){var a=n[s];if(!QuestData.isstruct(a))return void gSys.Err("QuestData err not find id : "+t);var r=DataTable.m_iQuestTab.GetQuestByID(t);if(!Quest.isstruct(r))return void gSys.Err("hdtab err not find id : "+t);var h=this.IsQuestDay(r[12],r[13],r[10],r[11]);0==h&&(e=4),0>h&&(e=0);var o=0;switch(e){case 0:this.AddTempAchvTag(r.valname,t)&&(a[4]=4);break;case 1:a[4]=0,a[2]=0,o=1;break;case 2:a[2]=0,a[4]=0,a[5]=0,1==r[19]?a[1]=this.GetAchvTagNum(r[14]):a[1]=0;break;case 3:a[2]=0,a[4]=0,a[5]=0;break;case 4:a[2]=5;break;case 5:a[4]+=1,a[5]+=1,o=1}switch(o&&(a[4]>=r[17]&&(a[2]=2),a[5]>=r[18]&&(a[2]=2)),4!=a[2]&&this.RemoveTempAchvTag(r[14],t),n[s]=a,i){case 1:this.m_szDailyQuest=n,QuestCompleteAni.ClearIsPlay(t);break;case 2:this.m_szActQuest=n;break;case 3:this.m_szOtherQuest=n}this.SaveUnfinish()}}},i.RefAchv=function(){Log1.debug(1,"[RefAchv]    Emit    archchged"),this.m_pRefAchvTask=!0,Laya.timer.once(1e3,this,this.RefAchv_Wait)},i.RefAchv_Wait=function(){Log1.debug(1,"[RefAchv]    Emit    archchged"),this.Emit("archchged",null),this.m_pRefAchvTask=!1},i.MergSingleNums=function(t){if(t.length<1)return 0;for(var e=0,i=0;i<t.length;i++)e+=Math.floor(t[i])*Math.pow(10,t.length-i-1);return e},i.LogGameTags=function(t,e,i){void 0===i&&(i=1),Log1.debug(1,"[LogGameTags] ",t,e,i);var n=[];t>380&&404>t&&n.push("矿石"),t>=4530&&4537>t&&n.push("果实"),t>=5900&&5999>=t&&n.push("奇迹"),(t>=101&&134>=t||t>=171&&544>=t)&&n.push("机器产品"),t>=151&&154>=t&&n.push("家畜"),t>=4001&&4011>=t&&n.push("作物");var s=DataTable.m_iBuildTab.Get(t);if(null!=s){var a=s[1];3==a&&n.push("机器"),5==a&&n.push("宠物"),(0==a||6==a)&&(n.push("装饰"),n.push("装饰_"+t))}for(var r=0;r<n.length;r++)this.LogGameTag("get_"+n[r],e,i)},i.LogTempGameTag=function(t){Log1.debug(1,"[LogTempGameTag] ",t);var e=ArrOp.SzHalfSearch(t,this.m_szData.achievement[2]);if(!(0>e))for(var i=0,n=this.m_szData.achievement[2][e][1],s=0;s<n.length;s++)i="number"==typeof n[s]&&Math.floor(n[s])==n[s]?n[s]:n[s][0],this.IsQuestDayByID(i)<=0||this.SetQuestData(i,2)},i.LogGameTag=function(t,e,i){if(void 0===i&&(i=1),Log1.debug(1,"[LogGameTag] ",t,e,i),this.m_szData.achievement.length<4){var n;n=ArrOp.InitSz(4-this.m_szData.achievement.length,null),this.m_szData.achievement=ArrOp.SzLink(this.m_szData.achievement,n)}this.LogTempGameTag(t),this.LogTag(t,e,i,1),this.LogTag(t,e,i,3),this.m_pRefAchvTask||this.RefAchv()},i.ClearTag=function(t){this.m_szData.achievement[t]?this.m_szData.achievement[t].length=0:this.m_szData.achievement[t]=[]},i.LogTag=function(t,e,i,n){void 0===i&&(i=1),void 0===n&&(n=1);var s=0,a=ArrOp.SzHalfSearch(t,this.m_szData.achievement[n]);if(a>=0){switch(i){case 2:s=e;break;case 4:s=Math.max(this.m_szData.achievement[n][a][1],e);break;default:s=this.m_szData.achievement[n][a][1]+e}s=Math.max(0,s),this.m_szData.achievement[n][a][1]=s}else s=e,s=Math.max(0,s),this.m_szData.achievement[n]=ArrOp.InsertSz(-a-1,this.m_szData.achievement[n],[t,s])},i.SetAchvData=function(t,e){if(this.m_szData.achievement.length<4){var i;i=ArrOp.InitSz(4-this.m_szData.achievement.length,null),this.m_szData.achievement=ArrOp.SzLink(this.m_szData.achievement,i)}var n;n=ArrOp.GetStrValM(t.toString(),this.m_szData.achievement[0]),n||(n=ArrOp.InitSz(4,0)),n[e]=2,this.m_szData.achievement[0]=ArrOp.SetStrValM(t.toString(),this.m_szData.achievement[0],n)},i.GetAchvData=function(t){var e,i;return this.m_szData.achievement.length<4&&(i=ArrOp.InitSz(4-this.m_szData.achievement.length,null),this.m_szData.achievement=ArrOp.SzLink(this.m_szData.achievement,i)),e=ArrOp.GetStrValM(t.toString(),this.m_szData.achievement[0]),e||(e=ArrOp.InitSz(5,0)),i=ArrOp.InitSz(5-e.length,0),e=ArrOp.SzLink(e,i)},i.AddTempAchvTag=function(t,e){if(StringOp.Compare(t,"level_到达"))return 0;if(StringOp.Compare(t,"get_评价"))return 0;if(StringOp.Compare(t,"get_当前金币数量"))return 0;if(StringOp.Compare(t,"get_航运值"))return 0;if(StringOp.Compare(t,"get_普通月卡"))return 0;if(StringOp.Compare(t,"get_超级月卡"))return 0;if(StringOp.Compare(t,"get_收到点赞总次数"))return 0;if(StringOp.Compare(t,"get_收到点赞周次数"))return 0;if(StringOp.Compare(t,"get_收集册进度"))return 0;if(this.m_szData.achievement.length<4){var i;i=ArrOp.InitSz(4-this.m_szData.achievement.length,null),this.m_szData.achievement=ArrOp.SzLink(this.m_szData.achievement,i)}var n=[],s=0,a=ArrOp.SzHalfSearch(t,this.m_szData.achievement[2]);if(0>a)n.push(e),this.m_szData.achievement[2]=ArrOp.InsertSz(-a-1,this.m_szData.achievement[2],[t,n]);else{if(n=this.m_szData.achievement[2][a][1],s=ArrOp.SzHalfSearch(e,n),s>=0)return n[s]=e,this.m_szData.achievement[2][a][1]=n,1;n=ArrOp.InsertSz(-s-1,n,e),this.m_szData.achievement[2][a][1]=n}return 1},i.RemoveTempAchvTag=function(t,e){if(!(this.m_szData.achievement.length<4)){for(var i=this.m_szData.achievement[2],n=0,s=0;s<i.length;s++)n=ArrOp.SzHalfSearch(e,i[s][1]),n>=0&&(i[s][1]=ArrOp.DelSz(n,i[s][1]));this.m_szData.achievement[2]=i}},i.GetAchvTagNum=function(t,e,i,n){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),StringOp.Compare(t,"level_到达"))return this.m_nLevel;if(StringOp.Compare(t,"get_评价"))return this.m_nEvalue;if(StringOp.Compare(t,"get_当前金币数量"))return this.GetMoney();if(StringOp.Compare(t,"get_航运值"))return this.GetTrade();if(StringOp.Compare(t,"get_航运积分"))return this.GetTrade();if(StringOp.CompareMax(t,"get_收集册进度")){var s;s=StringOp.GetWord(t,":");Laya.__parseInt(t)}if(!this.m_szData.achievement||4!=this.m_szData.achievement.length){var a;a.InitSz(4-this.m_szData.achievement.length,null),this.m_szData.achievement.SzLink(a)}var r=ArrOp.SzHalfSearch(t,this.m_szData.achievement[1]);return 0>r?0:this.m_szData.achievement[1][r][1]},i.GetSignReward=function(t,e){var i,n;n=ArrOp.GetStrVal("mysign",this.m_szData.nameddata),null==n&&(n=[]),n.length<8&&(i=ArrOp.InitSz(8-n.length,null),n=ArrOp.SzLink(n,i));var s=0;switch(e){case 1:s=6;break;default:if(s=2,null==n[s]||t>=n[s].length)return[0,0];if("number"!=typeof n[s][t][0]||Math.floor(n[s][t][0])!=n[s][t][0])return n[s][t][0]}return!n[s]||n[s].length<1?null:n[s][t]},i.GetSignData=function(t,e){var i,n;if(n=ArrOp.GetStrVal("mysign",this.m_szData.nameddata),null==n&&(n=[]),n&&n.length<8&&(i=ArrOp.InitSz(8-n.length,null),n=ArrOp.SzLink(n,i)),0==e&&11==t)return n[3];var s=0;switch(e){case 1:s=5;break;default:s=1}return this.IsSignCurWeek(e)?t>=n[s].length?1:n[s][t]:0},i.GetSignMoney=function(t){var e,i;return i=ArrOp.GetStrVal("mysign",this.m_szData.nameddata),null==i&&(i=[]),i&&i.length<8&&(e=ArrOp.InitSz(8-i.length,null),i=ArrOp.SzLink(i,e)),i[7][t]},i.SetSignMoney=function(t){var e,i;i=ArrOp.GetStrVal("mysign",this.m_szData.nameddata),null==i&&(i=[]),i&&i.length<8&&(e=ArrOp.InitSz(8-i.length,null),i=ArrOp.SzLink(i,e));var n=this.GetCurSignDay(1);i[7][n]+=t,this.m_szData.nameddata=ArrOp.SetStrVal("mysign",this.m_szData.nameddata,i)},i.IsSignCurWeek=function(t){var e,i;e=DataTable.m_iSelfUser.GetSvrLocalTime();var n,s;switch(s=ArrOp.GetStrVal("mysign",this.m_szData.nameddata),null==s&&(s=[]),s&&s.length<8&&(n=ArrOp.InitSz(8-s.length,null),s=ArrOp.SzLink(s,n)),t){case 1:s[4]instanceof Date&&(i=s[4]),"string"==typeof s[4]&&(i=DateOp.SetDateStr(s[4],i));break;default:s[0]instanceof Date&&(i=s[0]),"string"==typeof s[0]&&(i=DateOp.SetDateStr(s[0],i))}if(null==i&&(i=new Date(0)),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(i.getFullYear(),i.getMonth(),i.getDate()),DateOp.SubDateDay(e,i)<0)return 0;var a=0;switch(t){case 1:a=DataTable.m_iSignRewardTab.GetSignNum(1);break;default:a=7}return DateOp.SubDateDay(e,i)>=a?0:1},i.GetCurSignDay=function(t){var e,i;e=DataTable.m_iSelfUser.GetSvrLocalTime(),e=new Date(e.getFullYear(),e.getMonth(),e.getDate());var n,s;s=ArrOp.GetStrVal("mysign",this.m_szData.nameddata),null==s&&(s=[]),s&&s.length<8&&(n=ArrOp.InitSz(8-s.length,null),s=ArrOp.SzLink(s,n));var a=0;switch(t){case 1:s[4]instanceof Date&&(i=s[4]),"string"==typeof s[4]&&(i=DateOp.SetDateStr(s[4],i)),a=DataTable.m_iSignRewardTab.GetSignNum(1);break;default:s[0]instanceof Date&&(i=s[0]),"string"==typeof s[0]&&(i=DateOp.SetDateStr(s[0],i)),a=7}null==i&&(i=new Date(0)),i=new Date(i.getFullYear(),i.getMonth(),i.getDate());var r=0;return r=DateOp.SubDateDay(e,i),0>r||r>=a?(DataTable.m_iSelfUser.CheckSignData(),0):r},i.SetSignData=function(t,e){var i,n;n=ArrOp.GetStrVal("mysign",this.m_szData.nameddata),null==n&&(n=[]),n.length<8&&(i=ArrOp.InitSz(8-n.length,null),n=ArrOp.SzLink(n,i));var s=0;switch(e){case 1:s=5;break;default:s=1}var a=n[s],r=DataTable.m_iSignRewardTab.GetSignNum(e);a.length<r&&(i=ArrOp.InitSz(r-a.length,null),a.SzLink(i));for(var h=0;h<t.length;h++)a[t[h]]=1;n[s]=a,0==e&&(n[3]+=1),this.m_szData.nameddata=ArrOp.SetStrVal("mysign",this.m_szData.nameddata,n)},i.GetLeastTool=function(){for(var t=[10,11,12,13,14,15],e=t[0],i=this.GetItemNum(t[0]),n=0,s=1;s<t.length;s++)n=this.GetItemNum(t[s]),n>i||(e=t[s],i=n);return e},i.GetOrderData=function(){var t;return t=ArrOp.GetStrVal("myorder",this.m_szData.nameddata)},i.GetOrderDataByPos=function(t){var e;return e=ArrOp.GetStrVal("myorder",this.m_szData.nameddata),0>t||t>=e.length?null:e[t]},i.GetOrderTruckData=function(){var t;return t=ArrOp.GetStrVal("myordertruck",this.m_szData.nameddata)},i.IsNewEvaBuild=function(t){if(!SysID.IsDTZSJZID(t))return 0;var e=this.GetEvalueteSz();if(e&&e.length>0&&e[7].length>0){var i=ArrOp.SzHalfSearch(t,e[7]);if(i>=0)return 0}var n=DataTable.m_iBuildTab.Get(t);return null==n||0==n.length?0:n[8]<1?0:n[8]},i.TryPutBagBuild=function(t,e,i,n,s){void 0===s&&(s=0);var a=[];a.push([e,-1]),this.CheckMakeItemSz(a,1,0,Handler.create(this,this.TryPutBagBuildCheck,[t,e,i,n,s,a]),Handler.create(this,this.TryPutBagBuildCheckFail,[t]))},i.TryPutBagBuildCheckFail=function(t){t&&t.runWith([null])},i.TryPutBagBuildCheck=function(t,e,i,n,s,a){if(a.length<1)return void(t&&t.runWith([null]));var r=new StringRef;if(!this.ChgItemSz(a,r,OPEnum.OP_ZS_FZ,null,1,s))return gSys.Err("TryPutBagBuild ChgItemSz err = "+r.ustr),
void(t&&t.runWith([null]));var h=new MapItem;h.itemid=e,h.x=i,h.y=n,h.forword=0,h.data=null,s||this.m_szData.mapdata.push(h),t&&t.runWith(h)},i.GetOrEvaGoldCD=function(){if(this.m_nLevel>=20)return 86400;var t=0;return t=Math.floor(480+(this.m_nLevel-1)*(85920/19))},i.InitEvalueteData=function(){var t;if(t=ArrOp.GetStrVal("evaluete",this.m_szData.nameddata),!t){var e=DataTable.m_iGameDef.GetOrnament(),i=EvaluateData.Create();i[0]=e[0],i[1]=null,i[2]=0,i[3]=0,i[4]=Math.floor(150*Math.pow(e[0],.5)),i[5]=i[4],i[6]=null,i[7]=e[1],i[8]=null,t=i}this.SetEvalueSz(t),t=null,this.InitOrEvaGoldData(),this.ReCalMyStampBuildNum()},i.InitOrEvaGoldData=function(){var t;if(t=ArrOp.GetStrVal("orevagold",this.m_szData.nameddata),!OrEvaGold.isstruct(t)){var e=OrEvaGold.Create(),i=0;i=gSys.GetCurSecAdj(),e[0]=i,e[1]=this.GetOrEvaGoldCD(),t=e,this.SetOrEvaGoldData(t)}},i.GetOrEvaGoldData=function(){var t;if(t=ArrOp.GetStrVal("orevagold",this.m_szData.nameddata),!OrEvaGold.isstruct(t)){var e=OrEvaGold.Create(),i=0;i=gSys.GetCurSecAdj(),e[0]=i,e[1]=this.GetOrEvaGoldCD(),t=e}return t},i.SetOrEvaGoldData=function(t){this.m_szData.nameddata=ArrOp.SetStrVal("orevagold",this.m_szData.nameddata,t)},i.GetZsjsxs=function(){return this.m_nLevel<=15?.5:this.m_nLevel>=20?1:.5+.1*(this.m_nLevel-15)},i.GetJszsfy=function(t,e){var i=e/60>0?Math.floor(Math.pow(e/60,1/1.5)/2*(1*t/e)):1;return i*=this.GetZsjsxs(),1>i&&(i=1),Math.floor(i)},i.GetMyPetData=function(){for(var t=new MapItem,e=[],i=0;i<this.m_szData.mapdata.length;i++){t.copyfrom(this.m_szData.mapdata[i]);var n=[];n=DataTable.m_iBuildTab.Get(t.itemid),5==n[1]&&e.push([i,t.itemid,t.data])}return e},i.IsCanVipFunc=function(t){return this.m_nVipLevel>=Math.floor(t/1e4)?1:0},i.GetVipFuncLv=function(t){return Math.floor(t/1e4)},i.PutMactoBag=function(t){if(0>t||t>=this.m_szData.mapdata.length)throw new Error("ChgMapItemData mapszno err:"+t);var e=new MapItem;e.copyfrom(this.m_szData.mapdata[t]);var i=[],n=0,s=0;e.data&&e.data.length>=6&&(i=e.data[0],n=e.data[2],i.length>0&&(s=gSys.GetCurSecAdj(),e.data[2]=s)),this.m_szData.macbag.itemsz||(this.m_szData.macbag.itemsz=[]),this.m_szData.macbag.itemsz.push([e.itemid,1,e.data])},i.ReturnMacToWorld=function(t){if(0>t||t>=this.m_szData.macbag.itemsz.length)return gSys.Err("ChgMapItemData mapszno err:"+t),null;var e=new MapItem;e.itemid=this.m_szData.macbag.itemsz[t][0],e.data=this.m_szData.macbag.itemsz[t][2];var i,n=0,s=0;return e.data&&e.data.length>=6&&(i=e.data[0],n=e.data[2],i&&i.length>0&&(s=gSys.GetCurSecAdj(),s-=n,e.data[2]=s)),e},i.GetIapTimes=function(){var t=ArrOp.GetStrVal("iapt",this.m_szData.nameddata);return t?t:0},i.GetWholeEditCheckCode=function(){return 0},i.SetWholeEditCheckCode=function(t){this.m_szData.nameddata=ArrOp.SetStrVal("wholeeditcheckcode",this.m_szData.nameddata,t)},i.GetMacLvQuickAgvByLv=function(t){for(var e=0,i=0;t>i;i++)e+=4>i?.01:.02;return e},i.GetHaveItemNum=function(t){if(9>=t)switch(t){case 1:return this.GetMoney();case 2:return this.GetDiamond();case 3:return this.GetShell();case 4:return this.GetExp();case 5:return this.GetTrade();case 6:case 8:return this.GetVipItemLeftTime(8);case 9:return this.GetMedal()}if(this.IsXTCS(t))return this.GetXTCS(t);var e=this.FindItemBagKind(t);return 0>e?0:this.GetBagItemNum(e,t)},i.ClearAllBag=function(){this.m_szData.barn.itemsz=[],this.m_szData.warehouse.itemsz=[],this.m_szData.decoration.itemsz=[];for(var t=0;t<this.m_szBagNum.length;t++)this.m_szBagNum[t]=0;return this.m_nBarnNum=0,this.m_nWareNum=0,this.m_nBarnAllNum=this.GetBagMax(0),this.m_nWareAllNum=this.GetBagMax(1),gSys.SetSignal("bagdataref",-1),1},i.GetVipDiaToGold=function(){var t=0;return this.IsVip()?(this.IsCanVipFunc(80007)?t=300:this.IsCanVipFunc(70007)?t=200:this.IsCanVipFunc(60007)?t=100:this.IsCanVipFunc(50007)?t=80:this.IsCanVipFunc(40007)?t=60:this.IsCanVipFunc(30007)?t=40:this.IsCanVipFunc(20007)?t=20:this.IsCanVipFunc(10007)&&(t=10),t):2},i.GetGoldCoinsMax=function(){var t=this.GetVipDiaToGold();return t},i.CurDiaToGoldData=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=1);var n=this.GetGoldCoinsData();if(!n||!n.length)return null;var s=n[0],a=this.GetGoldCoinsMax();if(s>a)return null;var r=DataTable.m_iUserLevelTab.Get(this.m_nLevel);if(!r||!r.length)return null;var h=r[13],o=0,l=0,u=0,c=0,_=DataTable.m_iGoldCoinsTab.GetGoldCoinsData(n[0],a-s,t,this.GetDiamond(),e);if(!_||!_.length)return null;for(var m=[],d=[],p=0;p<_.length&&(l=1,c++,!(s+p>a));p++)this.CanCritical(n[3]+p)&&e&&(l+=Math.max(1,Math.floor(Math.random()*_[p][3])),m.push([p,l])),o=Math.floor(_[p][1]),u=Math.floor(_[p][1]*_[p][2]*h*l/100),d.push([2,-o]),d.push([1,u]);return[d,c,m]},i.GetGoldCoinsData=function(){var t=0;t=gSys.GetCurSecAdj();var e;return e=this.m_szData.getStrValFromND("goldcoins"),Math.floor(e[2]/86400)!=Math.floor(t/86400)&&(e[0]=0,e[2]=t,e=this.m_szData.getStrValFromND("goldcoins")),e},i.CanCritical=function(t){var e=this.GetGoldCoinsData(),i=Math.floor(t/10),n=t%10;if(i>=e[1].length)return 0;for(var s=-1,a=0,r=e[1][i].length;r>a;a++)if(e[1][i][a]==n){s=a;break}return 0>s?0:1},i.GetFirRecharge=function(){return this.m_szData.getStrValFromND("firrecharge")&&(this.SetGiftPickRec(0),this.m_szData.delStrValFromND("firrecharge")),this.GetGiftPickRec(0)},i.SetFirRecharge=function(){this.SetGiftPickRec(0),this.Emit("activchg",0)},i.GetChgNickNum=function(){var t=this.m_szData.getStrValFromND("chgnicknum");return t?t:0},i.AddChgNickNum=function(){var t=0,e=this.m_szData.getStrValFromND("chgnicknum");t=e?e+1:1,ArrOp.SetStrVal("chgnicknum",this.m_szData.nameddata,t)},i.GetGiftPickRec=function(t){var e=this.m_szData.getStrValFromND("giftpickrec");return e?e.length<=t?0:e[t]:0},i.SetGiftPickRec=function(t,e){void 0===e&&(e=1);var i=this.m_szData.getStrValFromND("giftpickrec");if(i||(i=ArrOp.InitSz(5,0)),i.length<5){var n=ArrOp.InitSz(5-i.length,0);i=ArrOp.SzLink(i,n)}0>e?i[t]+=e:i[t]=e,ArrOp.SetStrVal("giftpickrec",this.m_szData.nameddata,i),0>e&&this.Emit("giftpicknumchg",null)},i.AddActivProductVer=function(t){var e=ArrOp.GetStrVal("actprodver",this.m_szData.nameddata),i=SysID.GetHDSCWPBBH(t);if(i){var n=ArrOp.SzHalfSearch(t,e);0>n?e=ArrOp.InsertSz(-n-1,e,[t,i]):e[n]=[t,i],this.m_szData.nameddata=ArrOp.SetStrVal("actprodver",this.m_szData.nameddata,e)}},i.GetCurActivProductVer=function(t){var e=ArrOp.GetStrVal("actprodver",this.m_szData.nameddata);if(!e)return 0;var i=ArrOp.SzHalfSearch(t,e);return 0>i?0:e[i][1]},i.GetYKXSSJ=function(t){var e,i=DataTable.m_iSelfUser.GetVipLeftTime(t);if(1>i)return"(点击购买)";var n=Math.floor(i/86400);return n>0?"(剩余:"+n+"天)":(i%86400/3600?e="(剩余:"+Math.floor(i%86400/3600)+"小时)":i>59&&i%3600/60&&(e="(剩余:"+Math.floor(i%3600/60)+"分钟)"),e)},i.ClearReCheckStruct=function(){this.m_nPraiseStructCheck=0},i.GetPraiseData=function(){var t=[],e=0;if(t=ArrOp.GetStrVal("praisedata",this.m_szData.nameddata),t&&0!=t.length){if(Log1.debug(5,"V:",t),!PraiseData.isstruct(t)){var i=t;if(Log1.debug(5,"V[0]:",t),"string"==typeof t[0]){var n=t[0].split(" "),s=n[0].split("-");if(s.length>2)for(e=0;e<t.length;e++)"string"==typeof t[e]&&(n=t[e].split(" "),s=n[0].split("-"),s.length&&(t[e]=i[e]))}if(Log1.debug(5," end    V[0]:",t),!PraiseData.isstruct(t)){var a=["","","",0,0,[],[],[]];t=a}this.m_szData.nameddata=ArrOp.SetStrVal("praisedata",this.m_szData.nameddata,t)}if(!this.m_nPraiseStructCheck){for(this.m_nPraiseStructCheck=1,t[7]||(t[7]=[]),e=0;e<t[7].length;e++)PraiseSubData.isstruct(t[7][e])||(t[7]=ArrOp.DelSz(e,t[7]),e--);this.m_szData.nameddata=ArrOp.SetStrVal("praisedata",this.m_szData.nameddata,t)}}else{var r=["","","",0,0,[],[],[]];t=r}return t},i.AddPraisedTime=function(t,e,i){var n=this.GetPraiseData(),s=0,a=0;if(s=ArrOp.SzSearch(t,n[7]),0>s){var r=[0,0,0,0];r[0]=t,r[3]=e,n[7]=r,a=e}else n[7][s][3]+=e,a=n[7][s][3];var h,o;return h=DataTable.m_iSelfUser.GetSvrLocalTime(),o=DateOp.SetDateStr(n[1]),this.IsSameWeek(h,o)||(n[1]=DateOp.string(h),n[3]=0),n[3]+=e,n[5]||(n[5]=[]),s=n[5].indexOf(i),s>=0?(n[5]=ArrOp.DelSz(s,n[5]),n[5].push(i)):(n[5]&&n[5].length>=5&&(n[5]=ArrOp.DelSz(0,n[5])),n[5]||(n[5]=[]),n[5].push(i)),this.m_szData.nameddata=ArrOp.SetStrVal("praisedata",this.m_szData.nameddata,n),a},i.AddPraiseFlowerByData=function(t,e,i){var n=0,s=0,a=0;if(n=ArrOp.SzSearch(t,i[7]),0>n){var r=[0,0,0,0];r[0]=t,r[1]=e,i[7].push(r),s=e}else a=i[7][n][1],i[7][n][1]+=e,s=i[7][n][1];return t||(this.m_nFlowerNum=s),i},i.GetFlowerNumByKind=function(t){var e=0,i=this.GetPraiseData();if(e=ArrOp.SzSearch(t,i[7]),0>e)return 0;var n=i[7][e][1];return n},i.AddPraiseFlower=function(t,e){if(0>e)return 0;var i=this.GetPraiseData();return i=this.AddPraiseFlowerByData(t,e,i),this.m_szData.nameddata=ArrOp.SetStrVal("praisedata",this.m_szData.nameddata,i),1},i.SubPraiseFlower=function(t,e){if(e>0)return 0;var i=this.GetPraiseData();return i=this.AddPraiseFlowerByData(t,e,i),this.m_szData.nameddata=ArrOp.SetStrVal("praisedata",this.m_szData.nameddata,i),1},i.IsSameWeek=function(t,e){var i=DateOp.dayofweek(t);return i>0&&(t=DateOp.AdjDateDay(7-i,t)),i=DateOp.dayofweek(e),i>0&&(e=DateOp.AdjDateDay(7-i,e)),DateOp.GetYMD(t)==DateOp.GetYMD(e)?1:0},i.GetFreePraiseNumByVip=function(t){void 0===t&&(t=-1);var e=1;return 0>t&&(t=this.GetVipLevel()),1>t?e:(t>=this.GetVipFuncLv(80008)?e=25:t>=this.GetVipFuncLv(70008)?e=25:t>=this.GetVipFuncLv(60008)?e=20:t>=this.GetVipFuncLv(50008)?e=15:t>=this.GetVipFuncLv(40008)?e=10:t>=this.GetVipFuncLv(30008)?e=8:t>=this.GetVipFuncLv(20008)?e=6:t>=this.GetVipFuncLv(10008)&&(e=5),e)},i.InitFlowerNum=function(){var t=this.GetPraiseData(),e=ArrOp.SzSearch(0,t[7]);0>e||PraiseSubData.isstruct(t[7][e])&&(this.m_nFlowerNum=t[7][e][1])},i.OnPraiseUser=function(t,e,i){if(0>=i)return gSys.Err("OnPraiseUser num<=0"),0;var n=this.GetPraiseData(),s=ArrOp.SzSearch(e,n[7]);if(0>s)return gSys.Err("OnPraiseUser num not enough"),0;if(n[7][s][1]<i)return gSys.Err("OnPraiseUser num not enough"),0;var a,r;return a=DataTable.m_iSelfUser.GetSvrLocalTime(),r=DateOp.SetDateStr(n[2]),this.IsSameWeek(a,r)||(n[2]=DateOp.string(a),n[4]=0),n[4]+=i,n[7][s][1]-=i,n[7][s][2]++,e||(this.m_nFlowerNum=n[7][s][1]),this.m_szData.nameddata=ArrOp.SetStrVal("praisedata",this.m_szData.nameddata,n),DataTable.m_iSelfUser.CallSvr("OnPraiseUser",[t,e,i]),this.LogGameTag("get_点赞次数",i),1},i.OnFailToPraise=function(t){GFlyItemIcon.FlyText("点赞失败!请稍后再试...","#ff0000"),PraiseData.isstruct(t)&&(this.m_szData.nameddata=ArrOp.SetStrVal("praisedata",this.m_szData.nameddata,t),this.Emit("praisechged",[]))},i.OnSuccessToPraise=function(t,e){GFlyItemIcon.FlyText("赠送点赞花成功!","#00ff00");var i="<名字>%1<白色>向<名字>%2<白色>送出价值<花费>%3<白色>的<物品>%4";i=i.replace("%1",this.GetNick()),DataTable.m_iFriendBar.Frd_GetUserInfo(e,null,null,Handler.create(this,_a_b_c=function(t){i=i.replace("%2",t[1]),i=i.replace("%3","1元"),i=i.replace("%4","点赞花")}))},i.OnPraisedByOtherUser=function(t,e,i,n){this.AddPraisedTime(t,e,i),this.Emit("praisechged",[])},i.CheckAddFreeFlower=function(t){var e,i,n=this;e=DataTable.m_iSelfUser.GetSvrLocalTime(),e=DateOp.AdjDateSec(-this.m_szData.fasttime,e);var s=this.GetPraiseData();if(i=DateOp.SetDateStr(s[0],i),this.IsSameWeek(e,i))return void(t&&t.runWith(0));var a=this.GetFreePraiseNumByVip();if(1>a)return void(t&&t.runWith(0));var r=[];r.push([39,a]),this.CheckMakeItemSz(r,0,0,Handler.create(this,_succ=function(){DataTable.m_iSelfUser.CallSvrRet("CheckAddFreeFlower",a,Handler.create(n,_back=function(i){if(1>i)return void(t&&t.runWith(0));var h=new StringRef;return n.ChgItemSz(r,h,OPEnum.OP_XT_JL)?(s=n.GetPraiseData(),s[0]=DateOp.string(e),n.m_szData.nameddata=ArrOp.SetStrVal("praisedata",n.m_szData.nameddata,s),void(t&&t.runWith(a))):void(t&&t.runWith(0))}))}),Handler.create(this,_f=function(){t&&t.runWith(0)}))},i.LogToolItemChg=function(t,e){var i=gSys.GetCurSecAdj();i/86400!=this.m_nLastUserToolLogTime/86400&&(this.m_nLastUserToolLogTime=i,this.m_nUserToolGetNumLog=0,this.m_nUserToolCostNumLog=0),e>0?this.m_nUserToolGetNumLog+=e:this.m_nUserToolCostNumLog+=-e,this.m_nUserToolLogModi=1},i.LoadToolLogChg=function(){},__getset(0,i,"m_nFlowerNum",function(){return this._m_nFlowerNum},function(t){this._m_nFlowerNum=t,this.Emit("luohuantao_m_nFlowerNum",this._m_nFlowerNum)}),__getset(0,i,"m_nLevel",function(){return this._m_nLevel},function(t){this._m_nLevel=t,this.Emit("m_nLevel",[this._m_nLevel])}),__getset(0,i,"m_nNetLinkOk",function(){return this._m_nNetLinkOk},function(t){this._m_nNetLinkOk=t,this.Emit("m_nNetLinkOk",[this._m_nNetLinkOk])}),__getset(0,i,"m_szLaskRankLv",function(){return this._m_szLaskRankLv},function(t){this._m_szLaskRankLv=t,this.Emit("m_szLaskRankLv",[this._m_szLaskRankLv])}),__getset(0,i,"m_szLastRankNo",function(){return this._m_szLastRankNo},function(t){this._m_szLastRankNo=t,this.Emit("m_szLastRankNo",[this._m_szLastRankNo])}),__getset(0,i,"m_szRankAward",function(){return this._m_szRankAward},function(t){this._m_szRankAward=t,this.Emit("m_szRankAward",[this._m_szRankAward])}),__getset(0,i,"m_szCurWeekNo",function(){return this._m_szCurWeekNo},function(t){this._m_szCurWeekNo=t,this.Emit("m_szCurWeekNo",[this._m_szCurWeekNo])}),e}(EventEmitter),SignalMr=function(t){function e(){e.__super.call(this)}return __class(e,"Tools.SignalMr",t),e.Me=function(){return null==e._me&&(e._me=new e),e._me},e.SetSignal=function(t,e){Tools.SignalMr.Me().event(t,e)},e.WaitSignal=function(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=!0),null!=i&&(null==t.args&&(t.args=[]),t.args.push(i)),s?Tools.SignalMr.Me().once(e,t.caller,t.method,t.args):Tools.SignalMr.Me().on(e,t.caller,t.method,t.args)},e.ResetSignal=function(t){},e.RemoveSignalWait=function(t,e,i){Tools.SignalMr.Me().off(t,e,i)},e._me=null,e}(EventEmitter),GFriendCln=function(t){function e(){this.m_nLinkUID=0,this.m_nKey=0,this.m_nFrdLnkOk=0,this.m_nMute=0,this.m_szMyRankTop=[],e.__super.call(this)}__class(e,"game.gdcal.GFriendCln",t);var i=e.prototype;return i.InitFrd=function(t,e){var i=this;this.m_nLinkUID=t,this.m_nKey=e;var n=PubDef.GetUserFriendSvrName(t);csvr.call(n,"_IP_loginfrd",[t,e],Handler.create(this,function(t){Log1.info("成功返回结果:"+t),i.m_nFrdLnkOk=1,FriendMessage.m_sSvrName=t[0],i.InitData(t[1]),i.m_nMute=ArrOp.GetStrValM("shutup",i.m_szData[9]),i.InitInbox(),i.OnDataChged(),SysID.FRD_EMIT("frdgroup",null)}),Handler.create(this,function(t){console.log("The failed ResultData is:"+t)}),0)},i.SetShutup=function(t){this.m_nMute=t},i.IsMute=function(){if(0==this.m_nMute)return 0;if(this.m_nMute<0)return 1;var t=gSys.GetCurSecAdj();return t>=this.m_nMute?0:1},i.OnGateLinkChged=function(t){this.m_nFrdLnkOk=t,this.m_nFrdLnkOk&&this.OnUserOn()},i.OnUserOn=function(){var t=this;csvr.call(PubDef.HYFWM(this.m_nLinkUID),"_IP_Relnk",[this.m_nLinkUID,this.m_nKey],Handler.create(this,function(e){FriendMessage.m_sSvrName=e[0],t.InitInbox()}),null,0)},i.OnDataChged=function(){},i.ChgUserInfo=function(t,e){if(void 0===e&&(e=!1),null==t)return!1;if(t[0]!=DataTable.m_iSelfUser.GetUID())return!1;var i;if(t[1].length<1)return i=ErrorDef.ERR_MESSAGE(201),i.replace("{d}",FriendDef.NICK_LENGTH_MIN.toString()),gSys.GameMsg(i),!1;if(t[1].length>16)return i=ErrorDef.ERR_MESSAGE(202),i.replace("{d}",FriendDef.NICK_LENGTH_MAX.toString()),gSys.GameMsg(i),!1;var n=FriendDef.GETVISUNO(t[2]);return n+=1e3*DataTable.m_iSelfUser.GetMyCurBuffGroup(),t[2]=n,this.SetShortInfo(t)?(e&&gSys.GameMsg("Not Supported..."),csvr.call(FriendMessage.m_sSvrName,"ChgShortInfo",t,Handler.create(this,function(){SysID.FRD_EMIT("visuchged",[t]),DataTable.m_iSelfUser.SetMyNick(t[1])}),Handler.create(this,function(){ErrorDef.ERR_DLGMODAL(csvr.retflag)}),0),!0):!1},i.GetSourceFriend=function(t){var e=ArrOp.GetStrValM("frd_"+t,this.m_szData[9]);return e},i.GetSourceFrdRank=function(t,e,i){var n=this,s=0,a=0,r=gSys.GetCurSecAdj();if(s=ArrOp.SzSearch(e,this.m_szMyRankTop),s>=0&&this.m_szMyRankTop[s].length>2&&(a=this.m_szMyRankTop[s][2],300>r-a))return void(i&&i.runWith([[this.m_szMyRankTop[s][1],null]]));var h,o=[],l=[];h=ArrOp.GetStrValM("frd_"+t,this.m_szData[9]);var u=0,c=0;for(u=0;u<h.length;u++)h[u].length<2||o.push(h[u][1]);o.push(this.m_nLinkUID),csvr.call(PubDef.GetRankSvrName(e),"GetAllRankByUserSz",o,Handler.create(this,function(t){for(t.length>1&&(t=ArrOp.DelSz(0,t)),u=0;u<t.length;u++)l=t[u],c=l[0],l[0]=l[1],l[1]=c,t[u]=l;t=ArrOp.SzSort(t,1),s>=0&&(n.m_szMyRankTop=ArrOp.DelSz(s,n.m_szMyRankTop)),n.m_szMyRankTop.push([e,t,r]),i&&i.runWith([[t,null]])}),Handler.create(this,function(){i&&i.runWith([null])}),0)},i.GetGameInfo=function(t,e){csvr.call(PubDef.HYFWM(t),"GetGameInfo",t,Handler.create(this,function(t){return FriendGameInfo.isstruct(t)?void(e&&e.runWith([t])):void(e&&e.runWith([null]))}),Handler.create(this,function(){e&&e.runWith([null])}),0)},i.ChgUserLabel=function(t,e){void 0===e&&(e=!1);var i;return t.length>32?(i=ErrorDef.ERR_MESSAGE(203),i=i.replace("{d}","32"),gSys.GameMsg(i),0):(this.SetLabel(t),csvr.call(FriendMessage.m_sSvrName,"ChgUserLabel",[t],Handler.create(this,function(){SysID.FRD_EMIT("visuchged",[])}),Handler.create(this,function(){ErrorDef.ERR_DLGMODAL(csvr.retflag)}),0),1)},i.InstallFriends=function(t,e,i,n){var s=this,a=0,r=e.slice();for(a=0;a<e.length;a++)this.IsFriend(e[a][1])&&(e=ArrOp.DelSz(a,e,1),a--);csvr.call(FriendMessage.m_sSvrName,"InstallFriends",[t,e,i],Handler.create(this,function(e){e.length>1&&(e=e[1]);var i=0;for(a=0;a<e.length;a++)FriendInfo.isstruct(e[a])&&(i=ArrOp.SzSearch(e[a][0],s.m_szData[7]),i>=0&&(s.m_szData[7]=ArrOp.DelSz(i,s.m_szData[7],1)),s.m_szData[7].push(e[a]),SysID.FRD_EMIT("frdchged",[e[a]]));r.length>0&&(s.m_szData[9]=ArrOp.SetStrValM("frd_"+t,s.m_szData[9],r)),s.OnDataChged(),n&&n.runWith(e.length)}),Handler.create(this,function(){ErrorDef.ERR_DLG(csvr.retflag),n&&n.runWith(0)}),0)},i.UnInstallFriends=function(t){var e=this;csvr.call(FriendMessage.m_sSvrName,"UnInstallFriends",t,Handler.create(this,function(t){t=t[1];for(var i=0,n=0;n<t.length;n++)FriendInfo.isstruct(t[n])&&(i=ArrOp.SzSearch(t[n].uid,e.m_szData[7]),0>i||(e.m_szData[7]=ArrOp.DelSz(i,e.m_szData[7],1),t[n][1]=-1,SysID.FRD_EMIT("frdchged",[t[n]]),e.OnDataChged()))}),null,0)},i.AddFollower=function(t,e,i,n){var s=this;if(void 0===i&&(i=1),void 0===n&&(n=0),!DataTable.m_iSelfUser.m_nNetLinkOk)return n||gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能",!1),void(t&&t.runWith(0));if(1e3>e)return n||gSys.GameMsg("未找到该玩家ID",!1),void(t&&t.runWith(0));if(FriendDef.IsLocalPlayer(e))return n||gSys.GameMsg("不能关注自己",!1),void(t&&t.runWith(0));if(this.IsFollower(e))return n||gSys.GameMsg("已关注此玩家",!1),void(t&&t.runWith(0));if(this.IsFriend(e))return n||gSys.GameMsg("此玩家已是朋友",!1),void(t&&t.runWith(0));var a,r=this.GetFriendNum();if(i){if(!this.IsFans(e)&&this.GetGroupNum(1)>=20)return a="游戏内最多只能关注{d}个玩家",a=a.replace("{d}","20"),n||gSys.GameMsg(a,!1),void(t&&t.runWith(0));if(r>=DataTable.m_iSelfUser.GetMyFriendMaxNum())return n||gSys.GameMsg("朋友数量超出上限，不能再关注更多的玩家了",!1),void(t&&t.runWith(0))}csvr.call(FriendMessage.m_sSvrName,"AddFollower",e,Handler.create(this,function(i){FriendInfo.isstruct(i);var n=ArrOp.SzSearch(e,s.m_szData[7]);n>=0&&(s.m_szData[7]=ArrOp.DelSz(n,s.m_szData[7],1)),s.m_szData[7].push(i),s.OnDataChged(),SysID.FRD_EMIT("frdchged",[i]),s.IsFriend(e)&&(SysID.FRD_EMIT("frdnew",[i]),DataTable.m_iSoundTab.OnPlay("新粉丝"),DataTable.m_iSelfUser.LogGameTag("get_朋友",s.GetFriendNum(),2)),t&&t.runWith(1)}),Handler.create(this,function(){n||ErrorDef.ERR_DLG(csvr.retflag),t&&t.runWith(0)}),0)},i.OnAddSourceFans=function(t,e,i){if(!FriendInfo.isstruct(e))return void gSys.Err("AddFans type err:"+e);var n=ArrOp.GetStrValM("frd_"+t,this.m_szData[9]),s=0;for(s=0;s<n.length;s++)n.length<1?(n=ArrOp.DelSz(s,n),s--):n[s][1]==e[0]&&(n=ArrOp.DelSz(s,n),s--);n.push([i,e[0]]),this.m_szData[9]=ArrOp.SetStrValM("frd_"+t,this.m_szData[9],n),this.OnAddFans(e),this.OnDataChged()},i.OnAddFans=function(t){return FriendInfo.isstruct(t)?(this.DelFriend(t[0]),this.m_szData[7].push(t),this.OnDataChged(),SysID.FRD_EMIT("frdchged",[t]),SysID.FRD_EMIT("frdnew",[t]),DataTable.m_iSoundTab.OnPlay("新粉丝"),void DataTable.m_iSelfUser.LogGameTag("get_朋友",this.GetFriendNum(),2)):void gSys.Err("AddFans type err:"+t)},i.DelFollower=function(t,e){function i(){csvr.call(FriendMessage.m_sSvrName,"DelFollower",[t,e],Handler.create(n,_succF=function(t){if(a=t,a&&FriendInfo.isstruct(a)){var i=ArrOp.SzSearch(a[0],n.m_szData[7]);0>i||(FriendDef.ISFRIEND(a[1])&&!e?(a[1]=0,n.m_szData[7][i][1]=0):(a[1]=-1,n.m_szData[7]=ArrOp.DelSz(i,n.m_szData[7],1)),SysID.FRD_EMIT("frdchged",[a]),DataTable.m_iSelfUser.LogGameTag("get_朋友",n.GetFriendNum(),2),n.OnDataChged())}}),Handler.create(n,_failF=function(){ErrorDef.ERR_DLG(csvr.retflag)}),0)}var n=this;void 0===e&&(e=!0);var s,a=this.GetFriend(t);FriendDef.ISFRIEND(a[1])&&(s="您确定要解除同 {s} 的好友关系吗？"),FriendDef.ISFOLLOWER(a[1])&&(s="您确定要取消对 {s} 的关注吗？"),FriendDef.ISFANS(a[1])&&(s="您确定要解除 {s} 对您的关注吗？"),s=s.replace("{s}",a[2]),MessageBox.show(1,{title:"解除提示",content:s,lbtn:"确定",rbtn:"取消",closeOther:!1},Handler.create(this,i))},i.OnDelSourceFans=function(t,e,i){if(!FriendInfo.isstruct(e))return void gSys.Err("AddFans type err:"+e);var n=ArrOp.GetStrValM("frd_"+t,this.m_szData[9]),s=0;for(s=0;s<n.length;s++)n.length<1?(n=ArrOp.DelSz(s,n),s--):n[s][1]==e[0]&&(n=ArrOp.DelSz(s,FriendInfo),s--);this.m_szData[9]=ArrOp.SetStrValM("frd_"+t,this.m_szData[9],n),this.OnDelFans(e),this.OnDataChged()},i.OnDelFans=function(t,e){if(void 0===e&&(e=!1),!FriendInfo.isstruct(t))return void gSys.Err("AddFans type err:"+t);var i=ArrOp.SzSearch(t[0],this.m_szData[7]);0>i||(FriendDef.ISFRIEND(t[1])&&!e?this.m_szData[7][i][1]=1:(t[1]=-1,this.m_szData[7]=ArrOp.DelSz(i,this.m_szData[7],1)),SysID.FRD_EMIT("frdchged",[t]),DataTable.m_iSelfUser.LogGameTag("get_朋友",this.GetFriendNum(),2),this.OnDataChged())},i.OnUserInfoChged=function(t){var e=ArrOp.SzSearch(t[0],this.m_szData[7]);if(!(0>e)){var i=this.m_szData[7][e];this.m_szData[7][e]=t,SysID.FRD_EMIT("frdchged",[t]),i[5]!=t[5]&&SysID.FRD_EMIT("frdgamechged",[t[0],t[5]])}},i.OnFriendHelp=function(t,e){var i=ArrOp.SzSearch(t,this.m_szData[7]);i>=0&&this.m_szData[7][i][6]!=e&&(this.m_szData[7][i][6]=e,SysID.FRD_EMIT("frdhelpchged",this.m_szData[7][i]))},i.OnFirInfoChged=function(t){var e,i=0,n=0,s=[0,0,"",0,0,[],0];for(i=0;i<t.length;i++)t[i].length<2||(e=t[i][1],FriendInfo.isstruct(e)&&(n=ArrOp.SzSearch(t[i][0],this.m_szData[7]),0>n||(s=this.m_szData[7][n],s[6]=e[6],s[5]=e[5],s[2]=e[2],s[3]=e[3],s[4]=e[4],this.OnUserInfoChged(s))))},i.CountAllFriendHelp=function(t){var e=DataTable.m_iFriendBar.GetAllFriendVar(),i=0;t.length=0;for(var n=0;n<e.length;n++)e[n][6]>0&&(i++,t.push(e[n][0]));return i},i.MoveToGroup=function(t,e){return csvr.call(FriendMessage.m_sSvrName,"MoveToGroup",[t,e],Handler.create(this,function(i){FriendInfo.isstruct(i)||gSys.Err("移动好友错误"+t+","+e)}),null,0),game.gdcal.frd.FriendBase.prototype.MoveToGroup.call(this,t,e),SysID.FRD_EMIT("frdgroup",null),[]},i.ModifyGroup=function(t){return csvr.call(FriendMessage.m_sSvrName,"ModifyGroup",[t],Handler.create(this,function(t){t.length>0||gSys.Err("改变组名错误"+t)}),null,0),game.gdcal.frd.FriendBase.prototype.ModifyGroup.call(this,t),SysID.FRD_EMIT("frdgroup",null),[]},e}(FriendMessage),Text=function(t){function e(){this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._clipPoint=null,this._currBitmapFont=null,e.__super.call(this),this._style=new CSSStyle(this),this._style.wordWrap=!1}__class(e,"laya.display.Text",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._lines=null},i._getBoundPointsM=function(t){void 0===t&&(t=!1);var e=Rectangle.TEMP;return e.setTo(0,0,this.width,this.height),e._getBoundPoints()},i.getGraphicBounds=function(){var t=Rectangle.TEMP;return t.setTo(0,0,this.width,this.height),t},i._getCSSStyle=function(){return this._style},i.lang=function(t,i,n,s,a,r,h,o,l,u,c){if(arguments.length<2)this._text=e.langPacks?e.langPacks[t]:t;else{for(var _=0,m=arguments.length;m>_;_++)t=t.replace("{"+_+"}",arguments[_+1]);this._text=t}},i.renderTextAndBg=function(t,e){var i=this.graphics;i.clear();var n=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Browser.ctx.font=n;var s=this.padding,a=s[3],r="left",h=this._lines,o=this.leading+this.fontSize,l=this._currBitmapFont;l&&(o=this.leading+l.getMaxHeight());var u=s[0];if(!l&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(r="right",a=this._width-s[1]):"center"==this.align&&(r="center",a=.5*this._width+s[3]-s[1])),this._height>0){var c=this._textHeight>this._height?"top":this.valign;"middle"===c?u=.5*(this._height-e*o)+s[0]-s[2]:"bottom"===c&&(u=this._height-e*o-s[2])}var _=this._style;if(l&&l.autoScaleSize)var m=l.fontSize/this.fontSize;if(this._clipPoint)if(i.save(),l&&l.autoScaleSize){var d=0,p=0;d=this._width?this._width-s[3]-s[1]:this._textWidth,p=this._height?this._height-s[0]-s[2]:this._textHeight,d*=m,p*=m,i.clipRect(s[3],s[0],d,p)}else i.clipRect(s[3],s[0],this._width?this._width-s[3]-s[1]:this._textWidth,this._height?this._height-s[0]-s[2]:this._textHeight);for(var f=0,g=0,S=Math.min(this._lines.length,e+t)||1,b=t;S>b;b++){var y=h[b];if(_.password){var v=y.length;y="";for(var I=v;I>0;I--)y+="·"}if(f=a-(this._clipPoint?this._clipPoint.x:0),g=u+o*b-(this._clipPoint?this._clipPoint.y:0),l){var x=this.width;l.autoScaleSize&&(x=this.width*m),l.drawText(y,this,f,g,this.align,x)}else _.stroke?i.fillBorderText(y,f,g,n,this.color,_.strokeColor,_.stroke,r):i.fillText(y,f,g,n,this.color,r)}if(l&&l.autoScaleSize){var D=1/m;this.scale(D,D)}this._clipPoint&&i.restore(),this._startX=a,this._startY=u},i.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear();Browser.ctx.font=this._getCSSStyle().font,this._lines=this.parseWordWrap(this._text),this._textWidth=0;for(var t=0,e=this._lines.length;e>t;++t){var i=this._lines[t];this._currBitmapFont?this._textWidth=Math.max(this._currBitmapFont.getTextWidth(i)+this.padding[3]+this.padding[1],this._textWidth):this._textWidth=Math.max(Browser.ctx.measureText(i).width+this.padding[3]+this.padding[1],this._textWidth)}this._currBitmapFont?this._textHeight=this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._textHeight=this._lines.length*(this.fontSize+this.leading)+this.padding[0]+this.padding[2],this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new Point(0,0)):this._clipPoint=null,this.renderTextAndBg(0,Math.min(this._lines.length,Math.ceil((this.height-this.padding[0]-this.padding[2])/(this.leading+this.fontSize)))),this.repaint()},i.checkEnabledViewportOrNot=function(){return this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height},i.changeText=function(t){this._text!==t&&(this.lang(t),this._graphics&&this._graphics.replaceText(t)||this.typeset())},i.parseWordWrap=function(t){for(var e=t.split(/\r|\n|\\n/),i=0,n=e.length;n-1>i;i++)e[i]+="\n";var s=this._width;this._currBitmapFont&&this._currBitmapFont.autoScaleSize&&(s=this._width*(this._currBitmapFont.fontSize/this.fontSize));var a=Browser.ctx,r=this.wordWrap;if(r&&0>=s&&(s=100),0>=s||!r)return e;this._lines.length=0;var h,o=this.padding,l=this._lines,u=s-o[3]-o[1],c=0,_=this._currBitmapFont,m=0;for(i=0,n=e.length;n>i;i++){var d=e[i],p=0,f=0;if(m=_?_.getTextWidth(d):a.measureText(d).width,u>=m)l.push(d);else{m=_?_.getMaxWidth():a.measureText("阳").width,c||(c=Math.floor(u/m)),0==c&&(c=1),m=_?this._currBitmapFont.getTextWidth(d.substring(0,c)):a.measureText(d.substring(0,c)).width,p=m;for(var g=c,S=d.length;S>g;g++)if(m=_?this._currBitmapFont.getCharWidth(d.charAt(g)):a.measureText(d.charAt(g)).width,p+=m,p>u){var b=d.substring(f,g);if(h=/\b\w+$/.exec(b),h&&(g=h.index+f,0==h.index?g+=b.length:b=d.substring(f,g)),l.push(b),f=g,!(S>g+c)){l.push(d.substring(f,S)),f=-1;break}g+=c,m=_?this._currBitmapFont.getTextWidth(d.substring(f,g)):a.measureText(d.substring(f,g)).width,p=m,g--}-1!=f&&l.push(d.substring(f,S))}}return l},i.getCharPoint=function(t,e){this._isChanged&&Laya.timer.runCallLater(this,this.typeset);for(var i=0,n=this._lines,s=0,a=0,r=n.length;r>a;a++){if(i+=n[a].length,i>t){var h=a;break}s=i}var o=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Browser.ctx.font=o;var l=Browser.ctx.measureText(this._text.substring(s,t)).width,u=e||new Point;return u.setTo(this._startX+l-(this._clipPoint?this._clipPoint.x:0),this._startY+h*(this.fontSize+this.leading)-(this._clipPoint?this._clipPoint.y:0))},__getset(0,i,"textHeight",function(){return this._isChanged&&Laya.timer.runCallLater(this,this.typeset),this._textHeight}),__getset(0,i,"width",function(){return this._width?this._width:this.textWidth},function(e){t.prototype._$set_width.call(this,e),this.isChanged=!0}),__getset(0,i,"font",function(){return this._getCSSStyle().fontFamily},function(t){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),e.bitmapFonts&&e.bitmapFonts[t]&&(this._currBitmapFont=e.bitmapFonts[t]),this._getCSSStyle().fontFamily=t,this.isChanged=!0}),__getset(0,i,"height",function(){return this._height?this._height:this.textHeight},function(e){t.prototype._$set_height.call(this,e),this.isChanged=!0}),__getset(0,i,"leading",function(){return this._getCSSStyle().leading},function(t){this._getCSSStyle().leading=t,this.isChanged=!0}),__getset(0,i,"text",function(){return this._text},function(t){this._text!==t&&(this.lang(t+""),this.isChanged=!0,this.event("change"))}),__getset(0,i,"textWidth",function(){return this._isChanged&&Laya.timer.runCallLater(this,this.typeset),this._textWidth}),__getset(0,i,"fontSize",function(){return this._getCSSStyle().fontSize},function(t){this._getCSSStyle().fontSize=t,this.isChanged=!0}),__getset(0,i,"bold",function(){return this._getCSSStyle().bold},function(t){this._getCSSStyle().bold=t,this.isChanged=!0}),__getset(0,i,"color",function(){return this._getCSSStyle().color},function(t){this._getCSSStyle().color=t,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0}),__getset(0,i,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(t){this._getCSSStyle().strokeColor=t,this.isChanged=!0}),__getset(0,i,"italic",function(){return this._getCSSStyle().italic},function(t){this._getCSSStyle().italic=t,this.isChanged=!0}),__getset(0,i,"align",function(){return this._getCSSStyle().align},function(t){this._getCSSStyle().align=t,this.isChanged=!0}),__getset(0,i,"valign",function(){return this._getCSSStyle().valign},function(t){this._getCSSStyle().valign=t,this.isChanged=!0}),__getset(0,i,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(t){this._getCSSStyle().wordWrap=t,this.isChanged=!0}),__getset(0,i,"padding",function(){return this._getCSSStyle().padding},function(t){this._getCSSStyle().padding=t,this.isChanged=!0}),__getset(0,i,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(t){this._getCSSStyle().backgroundColor=t,this.isChanged=!0}),__getset(0,i,"borderColor",function(){return this._getCSSStyle().borderColor},function(t){this._getCSSStyle().borderColor=t,this.isChanged=!0}),__getset(0,i,"stroke",function(){return this._getCSSStyle().stroke},function(t){this._getCSSStyle().stroke=t,this.isChanged=!0}),__getset(0,i,"asPassword",function(){return this._getCSSStyle().password},function(t){this._getCSSStyle().password=t,this.isChanged=!0}),__getset(0,i,"isChanged",null,function(t){this._isChanged!==t&&(this._isChanged=t,t&&Laya.timer.callLater(this,this.typeset))}),__getset(0,i,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(t){if(!(this.textWidth<this._width)&&this._clipPoint){t=t<this.padding[3]?this.padding[3]:t;var e=this._textWidth-this._width;t=t>e?e:t;var i=this._height/(this.fontSize+this.leading)|1;this._clipPoint.x=t,this.renderTextAndBg(this._lastVisibleLineIndex,i)}}),__getset(0,i,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(t){
if(!(this.textHeight<this._height)&&this._clipPoint){t=t<this.padding[0]?this.padding[0]:t;var e=this._textHeight-this._height;t=t>e?e:t;var i=t/(this.fontSize+this.leading)|0;this._lastVisibleLineIndex=i;var n=(this._height/(this.fontSize+this.leading)|0)+1;this._clipPoint.y=t,this.renderTextAndBg(i,n)}}),__getset(0,i,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),__getset(0,i,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),e.registerBitmapFont=function(t,i){e.bitmapFonts||(e.bitmapFonts={}),e.bitmapFonts[t]=i},e.unregisterBitmapFont=function(t,i){if(void 0===i&&(i=!0),e.bitmapFonts&&e.bitmapFonts[t]){var n=e.bitmapFonts[t];i&&n.destory(),delete e.bitmapFonts[t]}},e.langPacks=null,e.bitmapFonts=null,e}(Sprite),Stage=function(t){function e(){this.focus=null,this.frameRate="fast",this.canvasRotation=!1,this._screenMode="none",this._scaleMode="noscale",this._sizeMode="none",this._alignV="top",this._alignH="left",this._bgColor="black",this._useHDRendering=!0,this._mouseMoveTime=0,this._oldSize=null,this._renderCount=0,e.__super.call(this),this.offset=new Point,this.now=Browser.now(),this._canvasTransform=new Matrix,this._preLoopTime=Browser.now();var t=this;this.mouseEnabled=!0,this._displayInStage=!0;var i=this,n=Browser.window;n.addEventListener("resize",function(){Input.isInputting||(t.resetCanvas(),Laya.timer.once(100,i,i._changeCanvasSize,null,!0))}),n.addEventListener("focus",function(){i.event("focus")}),n.addEventListener("blur",function(){i.event("blur")}),n.addEventListener("orientationchange",function(e){t.resetCanvas(),Laya.timer.once(100,i,i._changeCanvasSize,null,!0)}),this.on("mousemove",this,this._onmouseMove)}__class(e,"laya.display.Stage",t);var i=e.prototype;return i.size=function(t,e){return this.width=t,this.height=e,Laya.timer.callLater(this,this._changeCanvasSize),this},i._changeCanvasSize=function(){this.setCanvasSize(Browser.clientWidth,Browser.clientHeight)},i.resetCanvas=function(){var t=Render.canvas,e=t.source.style;t.size(1,1),e.transform=e.webkitTransform=e.msTransform=e.mozTransform=e.oTransform="",this.visible=!1},i.setCanvasSize=function(t,e){this._oldSize||(this._oldSize=new Point(this._width,this._height));var i=!1;if("none"!==this._screenMode){var n=1>t/e?"vertical":"horizontal";if(i=n!==this._screenMode){var s=e;e=t,t=s}}this.canvasRotation=i;var a=this._useHDRendering?Browser.pixelRatio:1,r=Render.canvas,h=r.source.style,o=this._canvasTransform.identity(),l=t*a,u=e*a,c=t/e,_=this._oldSize.x,m=this._oldSize.y;"full"===this._sizeMode?(_=l,m=u):"fullwidth"===this._sizeMode?(m=this._oldSize.y,_=this._height*c):"fullheight"===this._sizeMode&&(_=this._oldSize.x,m=this._width/c),this._width=_,this._height=m,r.size(_,m),System.changeWebGLSize(_,m);var d=l/this._oldSize.x,p=u/this._oldSize.y;"showall"===this._scaleMode?d=p=Math.min(d,p):"noborder"===this._scaleMode?d=p=Math.max(d,p):"noscale"===this._scaleMode&&(d=p=1),1===d&&1===p?this.transform&&this.transform.identity():(this.transform||(this.transform=new Matrix),this.transform.a=d,this.transform.d=p),"none"===this._sizeMode?(r.size(this._oldSize.x*d,this._oldSize.y*p),System.changeWebGLSize(r.width,r.height),o.scale(1/a,1/a),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=l-r.width/a:this.offset.x=.5*(l-r.width)/a,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=u-r.height/a:this.offset.y=.5*(u-r.height)/a,o.translate(this.offset.x,this.offset.y)):(this._width=_/d,this._height=m/p,o.scale(t/r.width,e/r.height)),i&&("horizontal"===this._screenMode?(o.rotate(Math.PI/2),o.translate(e,0)):(o.rotate(-Math.PI/2),o.translate(0,t))),o.a<1e-14&&(o.a=o.d=0),h.transformOrigin=h.webkitTransformOrigin=h.msTransformOrigin=h.mozTransformOrigin=h.oTransformOrigin="0px 0px 0px",h.transform=h.webkitTransform=h.msTransform=h.mozTransform=h.oTransform="matrix("+o.toString()+")",this.visible=!0,this._repaint=1,this.event("resize")},i.repaint=function(){this._repaint=1},i.parentRepaint=function(t){},i._loop=function(){return this.render(Render.context,0,0),!0},i._onmouseMove=function(t){this._mouseMoveTime=Browser.now()},i.render=function(e,i,n){var s=Browser.now();Log.enable()&&s-this.now>500&&Log.print("-------------render delay:"+(Browser.now()-this.now)+"  cound:"+this._renderCount),this.now=s,this._renderCount++;var a=(s-this._preLoopTime,"slow"!==this.frameRate),r=this._renderCount%2===0,h=Render.context;Stat.renderSlow=!a,(a||r)&&(Stat.loopCount++,MouseManager.instance.runEvent(),Laya.timer._update(),this._style.visible&&(Render.isWebGl?h.clear():Render.clear(this._bgColor),t.prototype.render.call(this,e,i,n))),!this._style.visible||!a&&r||(Render.isWebGl&&Render.clear(this._bgColor),e.flush(),Render.finish()),this._preLoopTime=s},__getset(0,i,"scaleMode",function(){return this._scaleMode},function(t){this._scaleMode=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,t?Render.canvas.source.style.background=t:Render.canvas.source.style.background="none"}),__getset(0,i,"sizeMode",function(){return this._sizeMode},function(t){this._sizeMode=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"alignH",function(){return this._alignH},function(t){this._alignH=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"alignV",function(){return this._alignV},function(t){this._alignV=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"clientScaleX",function(){return this._transform?this._transform.a:1}),__getset(0,i,"useHDRendering",function(){return this._useHDRendering},function(t){this._useHDRendering=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"mouseX",function(){return Math.round(MouseManager.instance.mouseX/(this._transform?this._transform.a:1))}),__getset(0,i,"mouseY",function(){return Math.round(MouseManager.instance.mouseY/(this._transform?this._transform.d:1))}),__getset(0,i,"clientScaleY",function(){return this._transform?this._transform.d:1}),__getset(0,i,"screenMode",function(){return this._screenMode},function(t){this._screenMode=t}),e.SCALE_NOSCALE="noscale",e.SCALE_EXACTFIT="exactfit",e.SCALE_SHOWALL="showall",e.SCALE_NOBORDER="noborder",e.SIZE_NONE="none",e.SIZE_FULL="full",e.SIZE_FULL_WIDTH="fullwidth",e.SIZE_FULL_HEIGHT="fullheight",e.ALIGN_LEFT="left",e.ALIGN_RIGHT="right",e.ALIGN_CENTER="center",e.ALIGN_TOP="top",e.ALIGN_MIDDLE="middle",e.ALIGN_BOTTOM="bottom",e.SCREEN_NONE="none",e.SCREEN_HORIZONTAL="horizontal",e.SCREEN_VERTICAL="vertical",e.FRAME_FAST="fast",e.FRAME_SLOW="slow",e.FRAME_MOUSE="mouse",e.FRAME_AUTO="auto",e}(Sprite),Component=function(t){function e(){this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._comXml=null,e.__super.call(this),this._layout=LayoutStyle.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}__class(e,"laya.ui.Component",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IComponent":!0}),i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},i.preinitialize=function(){},i.createChildren=function(){},i.initialize=function(){},i.callLater=function(t,e){Laya.timer.callLater(this,t,e)},i.runCallLater=function(t){Laya.timer.runCallLater(this,t)},i.commitMeasure=function(){},i.changeSize=function(){this.event("resize")},i.getLayout=function(){return this._layout===LayoutStyle.EMPTY&&(this._layout=new LayoutStyle),this._layout},i.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},i.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},i.onCompResize=function(){this.resetLayoutX(),this.resetLayoutY()},i.resetLayoutX=function(){var t=this.parent;if(t){var e=this._layout;isNaN(e.centerX)?isNaN(e.left)?isNaN(e.right)||(this.x=t.width-this.displayWidth-e.right):(this.x=e.left,isNaN(e.right)||(this.width=(t._width-e.left-e.right)/this.scaleX)):this.x=.5*(t.width-this.displayWidth)+e.centerX}},i.resetLayoutY=function(){var t=this.parent;if(t){var e=this._layout;isNaN(e.centerY)?isNaN(e.top)?isNaN(e.bottom)||(this.y=t.height-this.displayHeight-e.bottom):(this.y=e.top,isNaN(e.bottom)||(this.height=(t._height-e.top-e.bottom)/this.scaleY)):this.y=.5*(t.height-this.displayHeight)+e.centerY}},i.onMouseOver=function(t){Laya.stage.event("showtip",this._toolTip)},i.onMouseOut=function(t){Laya.stage.event("hidetip",this._toolTip)},__getset(0,i,"width",function(){return this._width?this._width:this.measureWidth},function(t){this._width!=t&&(this._width=t,this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)||this.resetLayoutX())}),__getset(0,i,"displayWidth",function(){return this.width*this.scaleX}),__getset(0,i,"centerX",function(){return this._layout.centerX},function(t){this.getLayout().centerX=t,this.layOutEabled=!0,this.resetLayoutX()}),__getset(0,i,"displayHeight",function(){return this.height*this.scaleY}),__getset(0,i,"measureHeight",function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i.visible&&(t=Math.max(i.y+i.height*i.scaleY,t))}return t}),__getset(0,i,"measureWidth",function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i.visible&&(t=Math.max(i.x+i.width*i.scaleX,t))}return t}),__getset(0,i,"height",function(){return this._height?this._height:this.measureHeight},function(t){this._height!=t&&(this._height=t,this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)||this.resetLayoutY())}),__getset(0,i,"scaleX",t.prototype._$get_scaleX,function(e){t.prototype._$get_scaleX.call(this)!=e&&(t.prototype._$set_scaleX.call(this,e),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),__getset(0,i,"scaleY",t.prototype._$get_scaleY,function(e){t.prototype._$get_scaleY.call(this)!=e&&(t.prototype._$set_scaleY.call(this,e),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),__getset(0,i,"dataSource",function(){return this._dataSource},function(t){this._dataSource=t;for(var e in this._dataSource)this.hasOwnProperty(e)&&(this[e]=this._dataSource[e])}),__getset(0,i,"toolTip",function(){return this._toolTip},function(t){this._toolTip!=t&&(this._toolTip=t,null!=t?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),__getset(0,i,"top",function(){return this._layout.top},function(t){this.getLayout().top=t,this.layOutEabled=!0,this.resetLayoutY()}),__getset(0,i,"bottom",function(){return this._layout.bottom},function(t){this.getLayout().bottom=t,this.layOutEabled=!0,this.resetLayoutY()}),__getset(0,i,"left",function(){return this._layout.left},function(t){this.getLayout().left=t,this.layOutEabled=!0,this.resetLayoutX()}),__getset(0,i,"right",function(){return this._layout.right},function(t){this.getLayout().right=t,this.layOutEabled=!0,this.resetLayoutX()}),__getset(0,i,"centerY",function(){return this._layout.centerY},function(t){this.getLayout().centerY=t,this.layOutEabled=!0,this.resetLayoutY()}),__getset(0,i,"tag",function(){return this._tag},function(t){this._tag=t}),__getset(0,i,"layOutEabled",null,function(t){this._layout.enable!=t&&(this._layout.enable=t,this.hasListener("added")||(this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved)))}),__getset(0,i,"comXml",function(){return this._comXml},function(t){this._comXml=t}),__getset(0,i,"x",t.prototype._$get_x,function(e){t.prototype._$set_x.call(this,Math.round(e))}),__getset(0,i,"y",t.prototype._$get_y,function(e){t.prototype._$set_y.call(this,Math.round(e))}),__getset(0,i,"disabled",function(){return this._disabled},function(t){t!==this._disabled&&(this._disabled=t,UIUtils.gray(this,t))}),e}(Sprite),FileBitmap=function(t){function e(){this._src=null,this._onload=null,this._onerror=null,e.__super.call(this)}__class(e,"laya.resource.FileBitmap",t);var i=e.prototype;return __getset(0,i,"onload",null,function(t){}),__getset(0,i,"src",function(){return this._src},function(t){this._src=t}),__getset(0,i,"onerror",null,function(t){}),e}(Bitmap),HTMLCanvas=function(t){function e(t){this._is2D=!1,e.__super.call(this);var i=this;if(this._source=this,"2D"===t||"AUTO"===t&&!Render.isWebGl){this._is2D=!0,this._source=Browser.createElement("canvas");var n=this;n.getContext=function(t,e){if(i._ctx)return i._ctx;var s=i._ctx=i._source.getContext(t,e);return s&&(s._canvas=n,s.size=function(){}),"2d"===t&&Context._init(n,s),s}}else this._source={}}__class(e,"laya.resource.HTMLCanvas",t);var i=e.prototype;return i.clear=function(){this._ctx&&this._ctx.clear()},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null},i.release=function(){},i._setContext=function(t){this._ctx=t},i.getContext=function(t,i){return this._ctx?this._ctx:this._ctx=e._createContext(this)},i.copyTo=function(e){t.prototype.copyTo.call(this,e),e._ctx=this._ctx},i.getMemSize=function(){return 0},i.size=function(t,e){(this._w!=t||this._h!=e)&&(this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this._source&&(this._source.height=e,this._source.width=t))},__getset(0,i,"context",function(){return this._ctx}),__getset(0,i,"asBitmap",null,function(t){}),e.TYPE2D="2D",e.TYPE3D="3D",e.TYPEAUTO="AUTO",e._createContext=null,e}(Bitmap),HTMLSubImage=function(t){function e(t,i,n,s,a,r,h,o){throw e.__super.call(this),void 0===o&&(o=!1),new Error("不允许new！")}return __class(e,"laya.resource.HTMLSubImage",t),e}(Bitmap),AtlasWebGLCanvas=function(t){function e(){e.__super.call(this),this._resourceManager.removeResource(this)}__class(e,"laya.webgl.atlas.AtlasWebGLCanvas",t);var i=e.prototype;return i.recreateResource=function(){this.startCreate();var t=WebGL.mainContext,e=this._source=t.createTexture();t.bindTexture(3553,e),t.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),t.bindTexture(3553,null),this.memorySize=this._w*this._h*4,this.compoleteCreate()},i.detoryResource=function(){this._source&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.texSubImage2D=function(t,e,i,n){var s=WebGL.mainContext;s.bindTexture(3553,this._source),e-1>=0&&s.texSubImage2D(3553,0,e-1,i,6408,5121,n),e+1<=t.width&&s.texSubImage2D(3553,0,e+1,i,6408,5121,n),i-1>=0&&s.texSubImage2D(3553,0,e,i-1,6408,5121,n),i+1<=t.height&&s.texSubImage2D(3553,0,e,i+1,6408,5121,n),s.texSubImage2D(3553,0,e,i,6408,5121,n),s.bindTexture(3553,null)},i.texSubImage2DPixel=function(t,e,i,n,s,a){var r=WebGL.mainContext;r.bindTexture(3553,this._source);var h=new Uint8Array(a.data);r.texSubImage2D(3553,0,e,i,n,s,6408,5121,h),r.bindTexture(3553,null)},__getset(0,i,"width",t.prototype._$get_width,function(t){this._w=t}),__getset(0,i,"height",t.prototype._$get_height,function(t){this._h=t}),e}(Bitmap),WebGLCanvas=function(t){function e(t){this._is2D=!1;var i=this;if(e.__super.call(this),this._canvas=this,"2D"===t||"AUTO"===t&&!Render.isWebGl){this._is2D=!0,this._canvas=this._source=Browser.createElement("canvas");var n=this;n.getContext=function(t,e){if(i._ctx)return i._ctx;var s=i._ctx=i._canvas.getContext(t,e);return s&&(s._canvas=n,s.size=function(){}),"2d"===t&&Context._init(n,s),s}}else this._canvas={};this.createOwnSource=!0,this.lock=!0}__class(e,"laya.webgl.resource.WebGLCanvas",t);var i=e.prototype;return i.clear=function(){this._ctx&&this._ctx.clear()},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null},i._setContext=function(t){this._ctx=t},i.getContext=function(t,i){return this._ctx?this._ctx:this._ctx=e._createContext(this)},i.copyTo=function(e){t.prototype.copyTo.call(this,e),e._ctx=this._ctx},i.size=function(t,e){(this._w!=t||this._h!=e)&&(this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this._canvas&&(this._canvas.height=e,this._canvas.width=t))},i.recreateResource=function(){this.startCreate(),this.createWebGlTexture(),this.compoleteCreate()},i.detoryResource=function(){this._source&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.createWebGlTexture=function(){var t=WebGL.mainContext;if(!this._canvas)throw"create GLTextur err:no data:"+this._canvas;var e=this._source=t.createTexture();t.bindTexture(3553,e),t.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),this.memorySize=this._w*this._h*4,t.bindTexture(3553,null),this._canvas=null},i.texSubImage2D=function(t,e,i){var n=WebGL.mainContext;n.bindTexture(3553,this._source),n.texSubImage2D(3553,0,e,i,6408,5121,t._source)},__getset(0,i,"canvas",function(){return this._canvas}),__getset(0,i,"context",function(){return this._ctx}),__getset(0,i,"asBitmap",null,function(t){this._ctx&&(this._ctx.asBitmap=t)}),e._createContext=null,e}(Bitmap),WebGLCharImage=function(t){function e(t,i){this.borderSize=4,e.__super.call(this),this.canvas=t,this["char"]=i;var n=System.isConchApp;n?this._ctx=t:this._ctx=t.getContext("2d",void 0);var s=i.xs,a=i.ys,r=null;n?(this._ctx.font=i.font,r=this._ctx.measureText(i["char"]),i.width=r.width1*s,i.height=r.height*a):(r=Utils.measureText(i["char"],i.font),i.width=r.width*s,i.height=r.height*a),this._w=i.width+2*this.borderSize,this._h=i.height+2*this.borderSize}__class(e,"laya.webgl.resource.WebGLCharImage",t);var i=e.prototype;return i.size=function(t,e){this._w=t,this._h=e,this.canvas&&(this.canvas.height=e,this.canvas.width=t)},i.recreateResource=function(){this.startCreate();var t=this["char"],e=System.isConchApp,i=t.xs,n=t.ys;if(this.size(t.width+2*this.borderSize,t.height+2*this.borderSize),e){var s="normal 100 "+t.fontSize+"px Arial";t.borderColor&&(s+=" 1 "+t.borderColor),this._ctx.font=s,this._ctx.textBaseline="top",this._ctx.fillStyle=t.fillColor,this._ctx.fillText(t["char"],this.borderSize,this.borderSize,null,null,null)}else this._ctx.save(),this._ctx.clearRect(0,0,t.width+4*this.borderSize,t.height+4*this.borderSize),this._ctx.font=t.font,this._ctx.textBaseline="top",(1!=i||1!=n)&&this._ctx.scale(i,n),this._ctx.translate(this.borderSize,this.borderSize),t.fillColor&&t.borderColor?(this._ctx.strokeStyle=t.borderColor,this._ctx.lineWidth=t.lineWidth,this._ctx.strokeText(t["char"],0,0,null,null,0,null),this._ctx.fillStyle=t.fillColor,this._ctx.fillText(t["char"],0,0,null,null,null)):-1===t.lineWidth?(this._ctx.fillStyle=t.fillColor?t.fillColor:"white",this._ctx.fillText(t["char"],0,0,null,null,null)):(this._ctx.strokeStyle=t.borderColor?t.borderColor:"white",this._ctx.lineWidth=t.lineWidth,this._ctx.strokeText(t["char"],0,0,null,null,0,null)),this._ctx.restore();t.borderSize=this.borderSize,this.compoleteCreate()},i.copyTo=function(e){var i=e;i._ctx=this._ctx,i.canvas=this.canvas,i["char"]=this["char"],t.prototype.copyTo.call(this,e)},e}(Bitmap),WebGLRenderTarget=function(t){function e(t,i,n,s,a,r){void 0===n&&(n=!1),void 0===s&&(s=6408),void 0===a&&(a=5121),void 0===r&&(r=33189),e.__super.call(this),this._w=t,this._h=i,this._mipMap=n,this._surfaceFormat=s,this._surfaceType=a,this._depthFormat=r,this.lock=!0}__class(e,"laya.webgl.resource.WebGLRenderTarget",t);var i=e.prototype;return i.recreateResource=function(){this.startCreate();var t=WebGL.mainContext;this._frameBuffer||(this._frameBuffer=t.createFramebuffer()),this._source||(this._source=t.createTexture()),t.bindTexture(3553,this._source),t.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071);var e=Arith.isPOT(this._w,this._h);this._mipMap&&e?(t.texParameteri(3553,10240,9987),t.generateMipmap(3553)):(t.texParameteri(3553,10240,9729),this._mipMap&&(this._mipMap=!1)),t.bindFramebuffer(36160,this._frameBuffer),t.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthFormat&&(this._depthBuffer||(this._depthBuffer=t.createRenderbuffer()),t.bindRenderbuffer(36161,this._depthBuffer),t.renderbufferStorage(36161,this._depthFormat,this._w,this._h),t.framebufferRenderbuffer(36160,36096,36161,this._depthBuffer)),t.bindFramebuffer(36160,null),t.bindTexture(3553,null),t.bindRenderbuffer(36161,null),this.memorySize=this._w*this._h*4,this.compoleteCreate()},i.detoryResource=function(){this._frameBuffer&&(WebGL.mainContext.deleteTexture(this._source),WebGL.mainContext.deleteFramebuffer(this._frameBuffer),WebGL.mainContext.deleteRenderbuffer(this._depthBuffer),this._source=null,this._frameBuffer=null,this._depthBuffer=null,this.memorySize=0)},__getset(0,i,"frameBuffer",function(){return this._frameBuffer}),__getset(0,i,"depthBuffer",function(){return this._depthBuffer}),e}(Bitmap),WebGLSubImage=function(t){function e(t,i,n,s,a,r,h,o){this.offsetX=0,this.offsetY=0,void 0===o&&(o=!1),e.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=r,this.canvas=t,this._ctx=t.getContext("2d",void 0),this.createOwnSource=o,this._w=s,this._h=a,this.offsetX=i,this.offsetY=n,this.src=h}__class(e,"laya.webgl.resource.WebGLSubImage",t);var i=e.prototype;return i.copyTo=function(e){var i=e;t.prototype.copyTo.call(this,e),i._ctx=this._ctx},i.size=function(t,e){this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this.canvas&&(this.canvas.height=e,this.canvas.width=t)},i.recreateResource=function(){this.startCreate(),this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this.createOwnSource&&this.createWebGlTexture(),this.compoleteCreate()},i.createWebGlTexture=function(){var t=WebGL.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var e=this._source=t.createTexture();t.bindTexture(3553,e),t.texImage2D(3553,0,6408,6408,5121,this.canvas);var i=this.minFifter,n=this.magFifter,s=this.repeat?10497:33071,a=Arith.isPOT(this.width,this.height);a?(this.mipmap?-1!==i||(i=9987):-1!==i||(i=9729),-1!==n||(n=9729),t.texParameteri(3553,10240,n),t.texParameteri(3553,10241,i),t.texParameteri(3553,10242,s),t.texParameteri(3553,10243,s),this.mipmap&&t.generateMipmap(3553)):(-1!==i||(i=9729),-1!==n||(n=9729),t.texParameteri(3553,10241,i),t.texParameteri(3553,10240,n),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),t.bindTexture(3553,null),this.canvas=null,this.memorySize=this._w*this._h*4},i.detoryResource=function(){this.createOwnSource&&this._source&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e}(Bitmap),ColorFilter1=function(t){function e(){var t="attribute vec4 position;\nattribute vec2 texcoord;\nuniform  mat4 mmat;\nuniform vec2 size;\nvarying vec2 v_texcoord;\nvoid main() {\n  gl_Position =mmat*vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  v_texcoord = texcoord;\n}",i="precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform float u_colorMatrix[20];\n\nvoid main(){\n 	vec4 rgba=gl_FragColor= texture2D(texture, v_texcoord)*vec4(1,1,1,alpha);\n   gl_FragColor.r =rgba.r*u_colorMatrix[0]+rgba.g*u_colorMatrix[1]+rgba.b*u_colorMatrix[2]+rgba.a*u_colorMatrix[3]+u_colorMatrix[4];\n   gl_FragColor.g =rgba.r*u_colorMatrix[5]+rgba.g*u_colorMatrix[6]+rgba.b*u_colorMatrix[7]+rgba.a*u_colorMatrix[8]+u_colorMatrix[9];\n   gl_FragColor.b =rgba.r*u_colorMatrix[10]+rgba.g*u_colorMatrix[11]+rgba.b*u_colorMatrix[12]+rgba.a*u_colorMatrix[13]+u_colorMatrix[14];\n   gl_FragColor.a =rgba.r*u_colorMatrix[15]+rgba.g*u_colorMatrix[16]+rgba.b*u_colorMatrix[17]+rgba.a*u_colorMatrix[18]+u_colorMatrix[19];	   \n}\n";e.__super.call(this,t,i,"colorFilter")}return __class(e,"laya.webgl.shader.d2.filters.ColorFilter",t,"ColorFilter1"),e}(Shader),GlowFilterShader=function(t){function e(){var t="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\nuniform  mat4 mmat;\nuniform  mat4 pmat;\nvarying vec2  v_texcoord;\nvoid main(){\n gl_Position =mmat*vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  v_texcoord = texcoord;\n}",i="precision mediump float;\nconst int c_FilterTime = 9;\nconst float c_Gene = (1.0/(1.0 + 2.0*(0.93 + 0.8 + 0.7 + 0.6 + 0.5 + 0.4 + 0.3 + 0.2 + 0.1)));\nuniform sampler2D texture;\nconst bool u_FiterMode=true;\nconst float u_GlowGene=1.5;\nconst vec4 u_GlowColor=vec4(1.0,0.0,0.0,0.5);\nconst float u_FilterOffset=2.0;\nconst float u_TexSpaceU=1.0/10.0;\nconst float u_TexSpaceV=1.0/10.0;\nvarying vec2 v_texcoord;\nvoid main()\n{\n	float aryAttenuation[c_FilterTime];\n	aryAttenuation[0] = 0.93;\n	aryAttenuation[1] = 0.8;\n	aryAttenuation[2] = 0.7;\n	aryAttenuation[3] = 0.6;\n	aryAttenuation[4] = 0.5;\n	aryAttenuation[5] = 0.4;\n	aryAttenuation[6] = 0.3;\n	aryAttenuation[7] = 0.2;\n	aryAttenuation[8] = 0.1;\n	vec4 vec4Color = texture2D(texture, v_texcoord)*c_Gene;\n	vec2 vec2FilterDir;\n	if(u_FiterMode)\n	  vec2FilterDir = vec2(u_FilterOffset*u_TexSpaceU/9.0, 0.0);\n	else\n		vec2FilterDir =  vec2(0.0, u_FilterOffset*u_TexSpaceV/9.0);\n	vec2 vec2Step = vec2FilterDir;\n	for(int i = 0;i< c_FilterTime; ++i){\n		vec4Color += texture2D(texture, v_texcoord + vec2Step)*aryAttenuation[i]*c_Gene;\n		vec4Color += texture2D(texture, v_texcoord - vec2Step)*aryAttenuation[i]*c_Gene;\n		vec2Step += vec2FilterDir;\n	}\n	if(u_FiterMode)\n		gl_FragColor = vec4Color.a*u_GlowColor*u_GlowGene;\n	else\n		gl_FragColor = vec4Color.a*u_GlowColor;\n}";e.__super.call(this,t,i,"glowFilter")}return __class(e,"laya.webgl.shader.d2.filters.GlowFilterShader",t),e}(Shader),Shader2X=function(t){function e(t,i,n,s){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=0,this._shaderValueHeight=0,this._shaderValueAlpha=NaN,e.__super.call(this,t,i,n,s)}__class(e,"laya.webgl.shader.d2.Shader2X",t);var i=e.prototype;return i.upload2dQuick1=function(t){this.upload(t,this._params2dQuick1||this._make2dQuick1())},i._make2dQuick1=function(){try{if(!this._params2dQuick1){this._program||this.activeResource(),this._params2dQuick1=[];for(var t,e=this._params,i=0,n=e.length;n>i;i++)t=e[i],!Value2D.needRezise&&"size"===t.name||"al2pha"===t.name||"mmat"===t.name||"position"===t.name||"texcoord"===t.name||this._params2dQuick1.push(t)}return this._params2dQuick1}catch(s){}return null},i.upload2dQuick2=function(t){this.upload(t,this._params2dQuick2||this._make2dQuick2())},i._make2dQuick2=function(){try{if(!this._params2dQuick2){this._program||this.activeResource(),this._params2dQuick2=[];for(var t,e=this._params,i=0,n=e.length;n>i;i++)t=e[i],"size"!==t.name&&"al2pha"!==t.name&&this._params2dQuick2.push(t)}return this._params2dQuick2}catch(s){}return null},e.create=function(t,i,n,s){return new e(t,i,n,s)},e}(Shader),IconCrop=function(t){function e(){this.cropArr=[],this.box=null,this.index=0,this.container=null,this.offsetX=0,this.offsetY=0,this.flag=0,e.__super.call(this),this.gmv=GameMain._ins.GmView,this.on("added",this,this.AddH),this.on("removed",this,this.removeH),this.mouseThrough=!0,this.mouseEnabled=!0}__class(e,"display.crop.IconCrop",t);var i=e.prototype;return i.AddH=function(){GLeadManager.RegArrowInterface(this,"田_种植",0,75,100),this.stage.hasListener("mouseup")&&this.stage.off("mouseup",this,this.onUpHandler),GMB_Field.isHide=!1,this.upData(),this.showCrop()},i.upData=function(){CropInfo.getInstance().CheckAll()},i.removeH=function(){this.stage.off("mouseup",this,this.onUpHandler),this.stage.off("mousemove",this,this.onMouseMove)},i.onUpHandler=function(){this.stage.off("mousemove",this,this.onMouseMove),this.box&&!GMB_Field.isHide?(this.isShow(1),this.box=null):GameMain._ins.m_gameUI.disposeIcon()},i.showCrop=function(){this.cropArr.length<CropInfo.getInstance().cropNum&&this.addCrop(),this.fillCropIcon();for(var t=0;t<this.cropArr.length;t++)this.cropArr[t].alpha=0,Tween.to(this.cropArr[t],{alpha:1},100,Ease.circOut,null,50*t)},i.addCrop=function(){for(var t=this.cropArr.length;t<CropInfo.getInstance().cropNum;t++){var e=new CropView;DisplayTools.addTarget(e,this),e.Id=t,this.cropArr[t]=e,this.cropArr[t].on("mousedown",this,this.onDownHandler)}},i.fillCropIcon=function(t){void 0===t&&(t=!1);for(var e=0;e<this.cropArr.length;e++)t?this.cropArr[e].fillData({cropText:CropInfo.getInstance().cropdata[e].cropText},!1):this.cropArr[e].fillData(CropInfo.getInstance().cropdata[e]),this.cropArr[e].filters=[];0==CropInfo.getInstance().cropdata[this.cropArr[this.cropArr.length-1].Id].jiesuo&&this.cropArr[this.cropArr.length-1].Id==CropInfo.getInstance().cropNum-1&&(this.cropArr[this.cropArr.length-1].filters=[ColorFilter.GRAY])},i.onDownHandler=function(t){if((t.target||t.target.name)&&(this.box=t.target.parent,DisplayTools.moveTop(this.box),this.box.isK)){this.index=this.box.Id,this.isShow(.7,this.index),this.flag=DataTable.m_iSelfUser.GetItemNum(CropInfo.getInstance().cropdata[this.index].id);var e=this.localToGlobal(new Point(t.target.x,t.target.y));this.offsetX=Laya.stage.mouseX-(64+e.x),this.offsetY=Laya.stage.mouseY-(64+e.y),this.stage.on("mousemove",this,this.onMouseMove),this.stage.once("mouseup",this,this.onUpHandler)}},i.onMouseMove=function(){if(this.box&&this.isShow(0,this.index),this.flag==DataTable.m_iSelfUser.GetItemNum(CropInfo.getInstance().cropdata[this.index].id)){var t=this.gmv.getMPBuild(60,this.offsetX,this.offsetY);if(t instanceof game.build.GMB_Field){if(t.m_nLinkItemID>0||!GameMain._ins.m_gameUI.mouseBoolean)return;t.OnPut(CropInfo.getInstance().cropdata[this.index].id,null),this.upData(),this.fillCropIcon(!0),DataTable.m_iSelfUser.GetItemNum(CropInfo.getInstance().cropdata[this.index].id)&&(this.flag=DataTable.m_iSelfUser.GetItemNum(CropInfo.getInstance().cropdata[this.index].id))}if(t instanceof Array)for(var e=0,i=t.length;i>e;e++)if(t[e]&&t[e]instanceof game.build.GMB_Field){if(this.flag!=DataTable.m_iSelfUser.GetItemNum(CropInfo.getInstance().cropdata[this.index].id))return;t[e].m_nLinkItemID>0||!GameMain._ins.m_gameUI.mouseBoolean||(t[e].OnPut(CropInfo.getInstance().cropdata[this.index].id,null),this.upData(),this.fillCropIcon(!0),DataTable.m_iSelfUser.GetItemNum(CropInfo.getInstance().cropdata[this.index].id)&&(this.flag=DataTable.m_iSelfUser.GetItemNum(CropInfo.getInstance().cropdata[this.index].id)))}}},i.isShow=function(t,e,i){void 0===e&&(e=15),void 0===i&&(i=!0);for(var n=0;n<this.cropArr.length;n++)this.cropArr[n].alpha=t,e==n&&(this.cropArr[n].alpha=1)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(Sprite),CultureIconMain=function(t){function e(){this.m_pLink=null,this.cultureIconArr=[],this.iconLocation=[{x:75,y:16},{x:-18,y:70},{x:-75,y:165},{x:95,y:265}],this.count=0,this.m_nCdMode=0,e.__super.call(this),this.mouseEnabled=!0,this.mouseThrough=!0}__class(e,"display.culture.CultureIconMain",t);var i=e.prototype;return i.upIcon=function(){var t=1;if(CountDown.getInstance().removeSelf(),this.cultureIconArr.length<1){for(var e,i=0;4>i;i++){if(3==i){this.cultureIconArr.push(0);break}e=new CultureIcon(i),this.cultureIconArr.push(e),DisplayTools.addTarget(e,this,{x:this.iconLocation[i].x,y:this.iconLocation[i].y,visible:!1})}e=null}this.count=0;var n=this.m_pLink.m_szAniObjs.length,s=[0,0,0,0];if(1>n)return this.cultureIconArr[0].visible=!1,this.cultureIconArr[1].visible=!1,this.show(2),[t,s[3]];for(;--n>-1;)0==this.m_pLink.m_szAniObjs[n].m_nStatus&&(s[0]=1),2==this.m_pLink.m_szAniObjs[n].m_nStatus&&(s[1]=1),this.m_pLink.GetCurAniNum()<5&&(s[2]=1),1==this.m_pLink.m_szAniObjs[n].m_nStatus&&(s[3]=1);for(var a=0;a<s.length;a++)1==s[a]?(this.show(a),3>a&&a>0&&t++):this.hide(a),3>a&&(this.cultureIconArr[a].isOk=!0);return[t,s[3]]},i.hide=function(t){return t>=this.cultureIconArr.length&&gSys.Err("引用超出"),
0==t?(this.cultureIconArr[t].isOk=!1,void this.show(t)):t>2?void CountDown.getInstance().removeSelf():void(this.cultureIconArr[t].visible=!1)},i.show=function(t){if(t>2){if(CountDown.getInstance().RegLeadArrow("家畜_生产加速"),CountDown.getInstance().displayInStage)return;return DisplayTools.addTarget(CountDown.getInstance(),this,{x:this.iconLocation[t].x,y:this.iconLocation[t].y,scaleX:DisplayTools.globalScale+.2,scaleY:DisplayTools.globalScale+.2}),CountDown.getInstance().sdClick=new Handler(this,this.OnCDOver),void CountDown.getInstance().Init(Math.floor(60*this.m_pLink.m_szLinkAni[5]*DataTable.m_iSelfUser.GetNewerQuickAgv(1)),this.m_pLink.m_nQuickTime,1,this)}this.cultureIconArr[t].init(),this.cultureIconArr[t].fillData(),this.cultureIconArr[t].visible=!0,this.cultureIconArr[t].x=this.iconLocation[this.count].x,this.cultureIconArr[t].y=this.iconLocation[this.count].y,this.count++},i.iconAlpha=function(t,e){void 0===e&&(e=0),this.cultureIconArr[t].alpha=e},i.OnCDOver=function(t,e){return this.m_nCdMode=t,DataTable.m_iSelfUser.m_nLevel<5?void this.OnSelectKind(0):(Quick.getInstance().myPopup(),Quick.getInstance().m_pLink=this,void Quick.getInstance().OnSetTime(this.GetNeedDiamond(this.m_pLink.m_nQuickTime),this.GetAllFeedTime(),this.m_pLink.GetAniImgName(),1))},i.OnSelectKind=function(t){this.m_pLink.OnQuick(this.m_nCdMode,t)},i.GetAllFeedTime=function(){var t,e=0,i=0,n=0;for(e=0;e<this.m_pLink.m_szAniObjs.length;e++)t=this.m_pLink.m_szAniObjs[e],t.m_nLeftTime>0&&(n++,i+=this.GetNeedDiamond(t.m_nLeftTime));return[n,i]},i.GetNeedDiamond=function(t){var e=DataTable.m_iSelfUser.GetJszsfy(t,60*this.m_pLink.m_szLinkAni[5]*DataTable.m_iSelfUser.GetNewerQuickAgv(1));return e},__getset(0,i,"culture",function(){return this.m_pLink},function(t){this.m_pLink=t}),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(Sprite),GameUI=function(t){function e(){this.m_vAddBtn=[],this.iconContainer=null,this.inContainer=null,this.mouseBoo=!0,this._viewContainer=null,this.hide=!0,this.preloadFree=!1,e.__super.call(this),this.mouseEnabled=!0,Laya.loader.load("assets/mainIcon.json",Handler.create(this,this.init),null,"atlas")}__class(e,"display.GameUI",t);var i=e.prototype;return i.init=function(){DisplayTools.addTarget(MainIcon.getInstance(),this,{width:Laya.stage.width,height:Laya.stage.height}),Log1.info("添加主界面图标。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。"),this.iconContainer=new Sprite,DisplayTools.addTarget(this.iconContainer,this,{width:Laya.stage.width,height:Laya.stage.height,mouseEnabled:!0,mouseThrough:!0}),this.inContainer=new Sprite,DisplayTools.addTarget(this.inContainer,this,{width:Laya.stage.width,height:Laya.stage.height,mouseEnabled:!0,mouseThrough:!0}),this._viewContainer=new Sprite,this._viewContainer.mouseEnabled=!0,this._viewContainer.mouseThrough=!0,DisplayTools.addTarget(this._viewContainer,this,{width:Laya.stage.width,height:Laya.stage.height}),this._viewContainer.addChild(MyDiaLog.DialogManager);var t=Handler.create(this,this.preloadsi);gSys.WaitSignal(t,"preloadsig");var i=Handler.create(this,this.onDelOrder);gSys.WaitSignal(i,"preloadsig"),e.completeLoad=!0;var n={};n.ext={},n.ext.dec="GameUI调入完成",n.ext.act=1.9,StatManager.getInstance().send(n),GFlyItemIcon.initOPool(),e.completeLoad=!0},i.onDelOrder=function(){DataTable.m_iSelfUser.DelPayData()},i.preloadsi=function(){PreloadManager.getInstance().loadImg(),PreloadManager.getInstance().loadSound(),this.preloadFree=!0},i.showEditUI=function(){MutiMove.getInstance().isIconShow(!0)&&MainIcon.getInstance().hideAll()},i.onSetPlaceButton=function(t){this.m_vAddBtn.push(t)},i.OnPlaceTempButton=function(){var t=50,e=80,i=0,n=0;if(DataTable.m_i_RepayLightBtn&&DataTable.m_i_RepayLightBtn.visible&&(DataTable.m_i_RepayLightBtn.pos(-3,e),e+=85),this.m_vAddBtn.length>0)for(i=0;i<this.m_vAddBtn.length;i++)this.m_vAddBtn[i].visible&&(n++,0==i||i==this.m_vAddBtn.length-1?this.m_vAddBtn[i].pos(t,e-15):this.m_vAddBtn[i].pos(t,e),n%3!=0?t+=75:(t=52,e+=85))},i.disposeIcon=function(){if(this.hide&&(this.mouseBoo=!1,this.iconContainer)){for(var t=0;t<this.iconContainer.numChildren;t++)Laya.loader.getRes(Assets.chatResUrl)&&this.iconContainer.getChildAt(t)==PanelMain.getInstance()?PanelMain.getInstance().onCkClick(null,!1):this.iconContainer.getChildAt(t).removeSelf();this.dispose()}},i.dispose=function(){this.inContainer&&this.inContainer.removeChildren()},__getset(0,i,"incontainer",function(){return this.mouseBoo=!0,this.inContainer}),__getset(0,i,"isShow",null,function(t){this.hide=t}),__getset(0,i,"container",function(){return this.mouseBoo=!0,this.iconContainer}),__getset(0,i,"mouseBoolean",function(){return this.mouseBoo}),e.completeLoad=!1,e}(Sprite),MessageBox=function(t){function e(){e.__super.call(this),this.mouseEnabled=!0}var i;return __class(e,"display.kit.MessageBox",t),e.test=function(){display.kit.MessageBox.show(0,{title:"资源不足",content:"您可以使用钻石立刻换取资源",lbtn:"去报纸逛逛",rbtn:"确定",iconArr:[{iconskin:175,iconnum:21},{iconskin:175,iconnum:21},{iconskin:175,iconnum:21},{iconskin:175,iconnum:21},{iconskin:175,iconnum:21},{iconskin:175,iconnum:21}],zsnum:458})},e.show=function(t,n,s,a,r){function h(t){t=null}void 0===t&&(t=0);var o=new i;o.handl=Handler.create(e,h,[o]),o.show(t,n,s,a,r)},e.TYPE_0=0,e.TYPE_1=1,e.TYPE_2=2,e.TYPE_3=3,e.TYPE_4=4,e.TYPE_5=5,e.TYPE_6=6,e.TYPE_22=22,e.__init$=function(){i=function(){function t(){this.handl=null,this.index_clip=0,this._okHandler=null,this._noHandler=null,this._onCloseHandler=null,this._box=null,this._alertBox=null,this.img_bg=null,this.btn_close=null,this.txt_title=null,this.txt_content=null,this.btn_sure=null,this.btn_cancel=null,this.txt_buzaitishi=null,this.checkbox_clip=null,this.box_icon=null,this.txt_zs_num=null,this.img_zs=null,this._type=-1,this._data=new Object}__class(t,"");var e=t.prototype;return e.show=function(e,i,n,s,a){if(void 0===e&&(e=0),i.closeOther=0==i.closeOther?!1:!0,this._type=e,this._data=i,GameMain._ins.m_gameUI.container.displayInStage&&GameMain._ins.m_gameUI.disposeIcon(),this._okHandler=n,this._noHandler=s,this._onCloseHandler=a,this._okHandler&&(this._okHandler.once=!0),this._noHandler&&(this._noHandler.once=!0),this._onCloseHandler&&(this._onCloseHandler.once=!0),t.PromptAgain[this._type+"_"+this._data.title])return void(this._okHandler&&this._okHandler.runWith(this.index_clip));if(4==e)return void this.onShow4(i);if(5==e)return void this.onShow5(i);if(22==e)return void this.onShow2(i);switch(this._box=new MyDiaLog,this._box.closeHandler=Handler.create(this,this.onCloseHandler),i.closeOnlyByMe=0==i.closeOnlyByMe?!1:!0,i.closeOnlyByMe||(this._box.isCanClickMaskToDel=!1,this._box.isCanCloseByOther=!1),this._alertBox=new Sprite,this.img_bg=new Image2("reuse/528077ed63a9a016.png"),this.img_bg.sizeGrid="130,30,30,30",this.img_bg.size(530,365),this.img_bg.mouseEnabled=!0,this.btn_close=new Button("reuse/btn_close.png",""),this.btn_close.stateNum=1,this.btn_close.pos(432,7),this.btn_close.scale(.6,.6),this.btn_close.mouseEnabled=!0,this.txt_title=new Text,this.txt_title.text="资源不足",this.txt_title.fontSize=40,this.txt_title.size(359,46),this.txt_title.pos(32,23),this.txt_title.bold=!0,this.txt_title.color="#FFF7D0",this.txt_content=new Text,this.txt_content.text="您可以使用钻石立即换取资源",this.txt_content.align="center",this.txt_content.fontSize=35,this.txt_content.size(482,42),this.txt_content.pos(29,96),this.txt_content.wordWrap=!0,this.txt_content.bold=!0,this.btn_sure=new Button("reuse/btn_Qd.png",""),this.btn_sure.stateNum=1,this.btn_sure.pos(69,289),this.btn_sure.size(140,60),this.btn_sure.label="确定",this.btn_sure.labelSize=20,this.btn_sure.labelBold=!0,this.btn_sure.labelColors="#ffffff,#ffffff,#ffffff",this.btn_sure.labelStroke=1,this.btn_sure.labelStrokeColor="#000000",this.btn_cancel=new Button("reuse/btn_Qd.png",""),this.btn_cancel.stateNum=1,this.btn_cancel.pos(289,289),this.btn_cancel.size(140,60),this.btn_cancel.label="取消",this.btn_cancel.labelSize=20,this.btn_cancel.labelBold=!0,this.btn_cancel.labelColors="#ffffff,#ffffff,#ffffff",this.btn_cancel.labelStroke=1,this.btn_cancel.labelStrokeColor="#000000",this.txt_buzaitishi=new Text,this.txt_buzaitishi.text="本次登录不再提示",this.txt_buzaitishi.fontSize=25,this.txt_buzaitishi.pos(45,352),this.txt_buzaitishi.size(359,28),this.checkbox_clip=new Clip("reuse/clip_select.png",2,1),this.index_clip=0,this.checkbox_clip.index=this.index_clip,this.checkbox_clip.pos(422,334),this.box_icon=new Box,this.box_icon.y=155,this.txt_zs_num=new Text,this.txt_zs_num.pos(264,305),this.txt_zs_num.size(69,28),this.txt_zs_num.align="right",this.txt_zs_num.fontSize=20,this.img_zs=new Image2("reuse/527cc2592399b009.png"),this.img_zs.pos(338,302),this.img_zs.size(64,64),this.img_zs.scale(.5,.5),this.img_bg.visible=this.btn_close.visible=this.txt_title.visible=this.txt_content.visible=this.btn_sure.visible=this.btn_cancel.visible=this.txt_buzaitishi.visible=this.checkbox_clip.visible=!1,this.txt_zs_num.visible=this.img_zs.visible=!1,this.box_icon.visible=!1,this.btn_sure.once("click",this,this.onClickSureBtnHandler),this.btn_cancel.once("click",this,this.onClickCancelBtnHandler),this.btn_close.once("click",this,this.onClickCloseBtnHandler),this.checkbox_clip.on("click",this,this.onClickClipHandler,[this.checkbox_clip]),e){case 0:this.typeHandler0(i);break;case 1:this.typeHandler1(i);break;case 2:this.typeHandler2(i);break;case 3:this.typeHandler3(i);break;case 6:this.typeHandler6(i)}this._alertBox.addChild(this.img_bg),this._alertBox.addChild(this.btn_close),this._alertBox.addChild(this.txt_title),this._alertBox.addChild(this.txt_content),this._alertBox.addChild(this.btn_sure),this._alertBox.addChild(this.btn_cancel),this._alertBox.addChild(this.txt_buzaitishi),this._alertBox.addChild(this.checkbox_clip),this._alertBox.addChild(this.txt_zs_num),this._alertBox.addChild(this.img_zs),this._alertBox.addChild(this.box_icon),this._alertBox.size(this.img_bg.width,this.img_bg.height),DisplayTools.addTarget(this._alertBox,this._box,null,-1,!0),this._box.size(this._alertBox.width,this._alertBox.height),this._box.myPopupMax(i.closeOther,!0,!0,"MessageBox0_3")},e.onClickClipHandler=function(t,e){0==this.index_clip?this.index_clip=1:this.index_clip=0,t.index=this.index_clip},e.typeHandler3=function(t){var e=t.title,i=t.content,n=t.lbtn,s=t.rbtn;this.img_bg.size(530,409),this.btn_close.pos(431,7),this.txt_title.size(359,46),this.txt_title.pos(31,23),this.txt_content.size(482,164),this.txt_content.pos(28,96),this.btn_sure.pos(111,277),this.btn_sure.size(140,53),this.btn_cancel.pos(267,277),this.btn_cancel.size(140,53),this.txt_title.text=e,this.txt_content.text=i,this.btn_sure.label=n,this.btn_cancel.label=s,this.img_bg.visible=this.btn_close.visible=this.txt_title.visible=this.txt_content.visible=this.btn_sure.visible=this.btn_cancel.visible=this.txt_buzaitishi.visible=this.checkbox_clip.visible=!0},e.typeHandler2=function(t){var e=t.title,i=t.content;this.img_bg.size(530,205),this.btn_close.pos(434,6),this.txt_title.pos(36,24),this.txt_title.size(359,46),this.txt_content.pos(30,93),this.txt_content.size(482,98),this.txt_content.fontSize=30,this.txt_title.text=e,this.txt_content.text=i,this.img_bg.visible=this.btn_close.visible=this.txt_title.visible=this.txt_content.visible=!0},e.typeHandler1=function(t){var e=t.title,i=t.content,n=t.lbtn,s=t.rbtn;this.img_bg.size(530,283),this.btn_close.pos(432,10),this.txt_title.pos(35,23),this.txt_title.size(359,46),this.txt_content.pos(30,93),this.txt_content.size(482,107),this.btn_sure.pos(93,208),this.btn_sure.size(160,60),this.btn_cancel.pos(269,208),this.btn_cancel.size(160,60),this.txt_title.text=e,this.txt_content.text=i,this.btn_sure.label=n,this.btn_cancel.label=s,this.img_bg.visible=this.btn_close.visible=this.txt_title.visible=this.txt_content.visible=this.btn_sure.visible=this.btn_cancel.visible=!0},e.typeHandler6=function(t){var e=t.iconArr||[{iconskin:t.iconskin,iconnum:t.iconnum}],i=t.content;this.img_bg.size(529,365),this.txt_content.size(482,100),this.txt_content.pos(29,96);for(var n=0,s=e.length;s>n;n++){var a=e[n];if(a){var r=DataTable.buildtab.getObj(a.iconskin),h=r[4],o=Assets.BuildUrl(h),l=new Image2;l.size(115,115),l.skin=o||"";var u=new Label;u.text=a.iconnum+"",u.fontSize=25,u.pos(102,82),u.color="#ffffff",u.strokeColor="#000000",u.stroke=2;var c=new Box;c.addChild(l),c.addChild(u),c.x=n*(c.viewWidth+20),c.y=50,c.on("click",this,this.onClickHandler,[a.iconskin]),this.box_icon.addChild(c)}}if(e.length>4){var _=(e.length-4)*(this.box_icon.width/this.box_icon.numChildren)+20;this.img_bg.width+=_,this.btn_close.x+=_,this.txt_content.width+=_}this.box_icon.x=(this.img_bg.width-this.box_icon.width)/2,this.txt_content.text=i,this.img_bg.visible=this.btn_close.visible=this.txt_content.visible=!0,this.box_icon.visible=!0},e.onClickHandler=function(t){DlgManager.Me().showOrnamentInfo(t,null)},e.typeHandler0=function(t){var e=t.title,i=t.content,n=t.lbtn,s=t.rbtn,a=t.iconArr||[{iconskin:t.iconskin,iconnum:t.iconnum}],r=t.zsnum||0;this.img_bg.size(529,365),this.btn_close.pos(432,7),this.txt_title.pos(32,23),this.txt_title.size(359,46),this.txt_content.size(482,42),this.txt_content.pos(29,96),this.btn_sure.pos(69,289),this.btn_sure.size(140,60),this.btn_cancel.pos(228,284),this.btn_cancel.size(274,69);for(var h=0,o=a.length;o>h;h++){var l=a[h];if(l){var u=DataTable.itemtab.getObj(l.iconskin),c=u[3],_=DataTable.getSkin(c);null==_&&(_=Assets.BuildUrl(c));var m=new Image2;m.size(115,115),m.skin=_||"";var d=new Label;d.text=l.iconnum+"",d.fontSize=25,d.pos(102,82),d.color="#ffffff",d.strokeColor="#000000",d.stroke=2;var p=new Box;p.addChild(m),p.addChild(d),p.x=h*p.viewWidth,this.box_icon.addChild(p)}}if(a.length>4){var f=(a.length-4)*(this.box_icon.width/this.box_icon.numChildren)+20;this.img_bg.width+=f,this.btn_close.x+=f,this.txt_content.width+=f,this.btn_sure.x+=f/2,this.btn_cancel.x+=f/2,r&&(this.txt_zs_num.x+=f/2,this.img_zs.x+=f/2)}this.box_icon.x=(this.img_bg.width-this.box_icon.width)/2,this.txt_title.text=e,this.txt_content.text=i,this.btn_sure.label=n,r?(this.txt_zs_num.visible=this.img_zs.visible=!0,this.btn_cancel.label="          "+s):this.btn_cancel.label=s,this.txt_zs_num.text=r+"",this.img_bg.visible=this.btn_close.visible=this.txt_title.visible=this.txt_content.visible=this.btn_sure.visible=this.btn_cancel.visible=!0,this.box_icon.visible=!0},e.onClickCancelBtnHandler=function(t){this.destoryHandler(),this._noHandler&&this._noHandler.run()},e.onClickSureBtnHandler=function(e){this.destoryHandler(),3==this._type||5==this._type?(this.index_clip&&(t.PromptAgain[this._type+"_"+this._data.title]=this.index_clip),this._okHandler&&this._okHandler.runWith(this.index_clip)):this._okHandler&&this._okHandler.run()},e.onClickCloseBtnHandler=function(t){this.destoryHandler(),this._onCloseHandler&&this._onCloseHandler.run()},e.destoryHandler=function(){this._box.close()},e.onCloseHandler=function(t){if("MyDiaLog._mask"==t&&this._onCloseHandler&&this._onCloseHandler.run(),this._alertBox){for(;this._alertBox.numChildren>0;){var e=this._alertBox.removeChildAt(0);e.offAll(),e=null}this._box.removeChild(this._alertBox),this._alertBox=null}this._box.closeHandler=null,this._box=null,this.handl&&this.handl.run()},e.onShow2=function(t){this._box=new MsgBoxType2UI,this._box.txt_title.text=t.title,this._box.txt_content.text=t.content,this._box.txt_content.height>80?this._box.txt_content.align="left":this._box.txt_content.align="center",this._box.btn_close.clickHandler=Handler.create(this,this.onClickCloseBtnHandler),this._box.img_bj.height=this._box.txt_content.y+this._box.txt_content.height+28,this._box.height=this._box.img_bj.height,this._box.myPopup(t.closeOther,!0,!0)},e.onShow4=function(t){this._box=new MsgBoxType4UI,this._box.closeHandler=Handler.create(this,this.onCloseHandler),this._box.txt_title.text=t.title,this._box.img.skin=DataTable.getSkin(t.img),this._box.txt_content.text=t.content,this._box.btn_close.clickHandler=Handler.create(this,this.onClickCloseBtnHandler),this._box.myPopupMax(t.closeOther,!0,!0,"功能未开启")},e.onShow5=function(t){this._box=new MsgBoxType5UI,this._box.closeHandler=Handler.create(this,this.onCloseHandler),this._box.txt_title.text=t.title,this._box.txt_content.text=t.content,this._box.label_num.visible=!1;var e=new GObj2DMutiText;e.LoadAni("tex_文字大_ani"),e.SetText(t.num+"Z"),e.y=28,e.width=e.getClipRect().right-e.getClipRect().left,this._box.box_btn.addChild(e),this._box.label_queding.text=t.lbtn?t.lbtn:"确定";var i=[e,this._box.label_queding];DisplayTools.onCenter(null,null,this._box.box_btn,i),t.isClip?(this._box.label_true.visible=this._box.clip_sure.visible=!1,this._box.box_btn.y=201):(this._box.label_true.visible=this._box.clip_sure.visible=!0,this._box.box_btn.y=161),this.index_clip=1,this._box.clip_sure.index=this.index_clip,this._box.btn_sure.clickHandler=Handler.create(this,this.onClickSureBtnHandler),this._box.clip_sure.on("click",this,this.onClickClipHandler,[this._box.clip_sure]),this._box.btn_close.clickHandler=Handler.create(this,this.onClickCloseBtnHandler),this._box.myPopup(t.closeOther)},t.PromptAgain={},t}()},e}(Sprite),Loding=function(t){function e(){this.img=null,e.__super.call(this),this.init()}__class(e,"display.loading.Loding",t);var i=e.prototype;return i.init=function(){this.img=new Image2,this.img.width=this.img.height=128,this.img.skin="3d/tex/5339106167227007.png",this.img.pivot(64,64),this.addChild(this.img),this.on("removed",this,this.onRemoveHandler)},i.addEvent=function(){Laya.timer.frameLoop(1,this,this.onComplete,null,!0)},i.removeP=function(){this.removeSelf()},i.onComplete=function(){this.img.rotation+=.3},i.onRemoveHandler=function(){Laya.timer.clear(this,this.onComplete),Laya.timer.clear(this,this.removeP)},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(Sprite),Muti2DAniIns=function(t){function e(t,i,n){this._mdata=null,this._mbackPtr=null,this._arrLT=null,this._etime=0,this._aniName="",this._noAniStart=!1,this._curKind=null,this._curKIdx=0,this._backName="",this.m_bNLRt=!1,this.m_bPlayRt=!1,this.m_bPlayKE=!1,this._smulti=1,this._randS=0,this.m_boundsRect=null,this.img=null,this._viewid=0,this._bCreated=!1,this.m_gameObj=null,this.m_gzObj=null,this.m_bMirror=!1,this._tTexture=null,this.m_bCStopA=!1,this.m_completeHandler=null,this.m_kindEndHandler=null,this._checkInViewID=-1,this._isInView=!1,this._mutiWorld=null,this._alpha=1,e.__super.call(this),void 0===t&&(t=!1),void 0===n&&(n=""),this._viewid=e.ANICOUNT++%4,e.needCNum++,this._aniName=n,null!=i&&this.createInsFromData(i),this.mouseEnabled=!1,this.m_bCStopA=t}__class(e,"display.MutiAni.Muti2DAniIns",t);var i=e.prototype;return i.getClipRect=function(){return this._curKind.m_pointRect},i.linkGameObj=function(t){this.m_gameObj=t},i.getGameObj=function(){return this.m_gameObj},i.dispose=function(){return null==this._mdata?!1:(this.destroy(),this._tTexture&&(this._tTexture=null),this.removeSelf(),this.m_gameObj=null,this.m_gzObj=null,this.m_kindEndHandler&&(this.m_kindEndHandler.clear(),this.m_kindEndHandler=null),this.m_completeHandler&&(this.m_completeHandler.clear(),this.m_completeHandler=null),this._bCreated?this._mdata.defRef():(this._mdata.delInsHander(this),this._mbackPtr=this._mdata),this._mdata=null,this._bCreated=!1,!0)},i.GetAniKindSz=function(){return this._mdata?this._mdata.getKindNameList():null},i.getCenterPtScr=function(){if(null==this._curKind)return null;var t=this._curKind.m_pointRect,e=new Point;return e.x=Math.floor((t.right-t.left)/2+t.left),e.y=Math.floor((t.bottom-t.top)/2+t.top),this.localToGlobal(e)},i.GetNamedPt=function(t,e,i){return this._curKind?this._curKind.GetNamedPt(t,e,i):!1},i._IsPointOn=function(){if(e.ptl.setTo(Laya.stage.mouseX,Laya.stage.mouseY),this.globalToLocal(e.ptl),this._curKind){var t=this._curKind.m_pointRect;if(e.ptl.x<t.left||e.ptl.x>t.right||e.ptl.y<t.top||e.ptl.y>t.bottom)return!1;var i=this._curKind.GetPointSz();if(null==i)return!0;this.m_bMirror&&(e.ptl.x=-e.ptl.x);var n=Math.floor(32*(e.ptl.x-t.left)/(t.right-t.left)),s=Math.floor(32*(e.ptl.y-t.top)/(t.bottom-t.top));if(0>s||s>32)return!1;i[s],e.GetBit32(n);return i[s]&e.GetBit32(n)?!0:!1}return!1},i.moveWithMousePt=function(){var t=Laya.stage.mouseX,e=Laya.stage.mouseY;if(!this.m_gameObj)return!1;var i=new UintRef,n=new UintRef;return MutiWorld.transS2W(t,e,i,n),TileGrid.TransS2W(i.uid,n.uid,i,n),this.m_gameObj.IX==i.uid&&this.m_gameObj.IY==n.uid?!1:(TileGrid.TransW2I(i.uid,n.uid,UintRef.t1,UintRef.t2),this.m_gameObj.IX=UintRef.t1.uid,this.m_gameObj.IY=UintRef.t2.uid,TileGrid.TransW2S(i.uid,n.uid,i,n),this.m_gameObj.SetPos(i.uid,n.uid),!0)},i.GetRect=function(){return this._mdata&&this._mdata.completeL&&this._curKind?this._curKind.m_pointRect:null},i.SetOkHandler=function(t){this.m_completeHandler=t},i.createInsFromData=function(t){if(!this.destroyed){this._mdata=t,this._curKind=t._kinds[0],this._curKIdx=0,this._etime=0,this._arrLT=new Array(this._mdata._maxTrack);for(var i=0;i<this._mdata._maxTrack;i++)this._arrLT[i]=0;this.playAni(this._aniName,this._noAniStart)||this._curKind.setNoAni(this._noAniStart);var n=this._curKind.m_pointRect;if(this.hitArea=new Rectangle(n.left,n.top,n.right-n.left,n.bottom-n.top),this.size(n.right-n.left,n.bottom-n.top),this._renderType|=512,e.bDisplayRect&&(this.m_boundsRect=new Sprite,this.m_boundsRect.graphics.drawRect(n.left,n.top,n.right-n.left,n.bottom-n.top,"#555555","#ffffff"),this.m_boundsRect.alpha=.3,this.addChild(this.m_boundsRect)),this._bCreated=!0,this._repaint=0,this.repaint(),this._mdata.addRef(),this.m_completeHandler&&(this.m_completeHandler.run(),this.m_completeHandler.clear(),this.m_completeHandler=null),!e.bIsShowLoading){if(e.haveCNum++,e.haveCNum>20&&(LoadingView.getInstance().currentValue=60+e.haveCNum/e.needCNum*40-1),e.needCNum>100&&e.haveCNum/e.needCNum>.6){e.bIsShowLoading=!0,Notice.getInstance().displayInStage?gSys.WaitSignal(Handler.create(this,this.removeLoading),"removeLoading"):(LoadingView.getInstance().currentValue=100,LoadingView.getInstance().removeSelf()),GMapView.m_bEnterMap=!0,gSys.SetSignal("mapready",1);var s={};s.ext={},s.ext.dec="场景创建OK",s.ext.act=2.6,StatManager.getInstance().send(s),console.log("场景创建OK..."),GMapView.GetBk().visible=!0,Laya.timer.once(3e3,this,preloadSig=function(){gSys.SetSignal("preloadsig",1)})}this.createstex()}}},i.removeLoading=function(){LoadingView.getInstance().currentValue=100,LoadingView.getInstance().removeSelf()},i.createstex=function(){if(null==this._tTexture){var t=this._mdata.imgName,i=t.lastIndexOf("/");if(i>-1){var n=e.mResImage+t.substr(i+1,t.length-i);this._tTexture=Laya.loader.getRes(n)}}},i.setStaticTexture=function(t){null!=t&&(this._tTexture=t)},i.gameObjMove=function(){this.m_gameObj&&this.m_gameObj.ReadyToMove&&this.m_gameObj.ReadyToMove()},i.cItemFromArr=function(t,e){var i=t[0].getMuti2dStr();i=null==i?"dat/"+e+".ani":i.substring(0,i.lastIndexOf("."))+".ani";var n=Muti2DAniData._muti2dDic[i];if(null!=n&&null!=n.img)return this.createInsFromData(n),!0;if(this._mdata=Muti2DAniData._inCreateDic[i],null==this._mdata){this._mdata=new Muti2DAniData,this._mdata._strName=i,Muti2DAniData._inCreateDic[i]=this._mdata,this._mdata._insHandler.push(new Handler(this,this.createInsFromData)),this._mdata.imgName=t[1],Laya.loader.load(t[1],Handler.create(this,this.imgLoaded),null,"image");var s=new UintRef(0);t[0].getMuti2DData(s,Handler.create(this,this.anidLoad))}else this._mdata._insHandler.push(Handler.create(this,this.createInsFromData));return!0},i.createFromMapItem=function(t){return this.createInsFromName(t.aniName)},i.createInsFromName=function(t){if(null==t)return!1;var e=GVar.mutiAniDic[t];return null==e?!1:this.cItemFromArr(e,t)},i.createFromItemDArr=function(t){return null==t||t.length<5?!1:this.createInsFromName(t[4])},i.imgLoaded=function(t){if(t){t.canInAtlas=!1;var e=this._mdata;null==e&&(e=this._mbackPtr),e.setImg(t)}},i.anidLoad=function(t){if(t){var e=this._mdata;if(null==e&&(e=this._mbackPtr),null!=t.byteLength){var i=new Byte(t);e.loadAniData(e._strName,i)}else e.loadAniData(e._strName,t)}},i.setPos=function(t,e){this.x=t,this.y=e},i.mouseDown=function(){this.m_gameObj&&this.m_gameObj.OnLBDown&&this.m_gameObj.OnLBDown()},i.mouseUp=function(){this.m_gameObj&&this.m_gameObj.OnLBUp&&this.m_gameObj.OnLBUp()},i.mouseOut=function(){this.m_gameObj&&this.m_gameObj.OnMouseOut&&this.m_gameObj.OnMouseOut()},i.resetAni=function(){this._etime=0,this.m_bPlayRt=!1;for(var t=0;t<this._mdata._maxTrack;t++)this._arrLT[t]=0},i.PlaySpeed=function(t,e){this._smulti=t,this._randS=e},i.PlayKindEndRetrun=function(t){this._mdata&&0!=this._mdata.completeL?(this._backName=this._aniName,this.playAni(t),this._etime=0,this.m_bPlayRt=!0):(this._backName=t,this.m_bNLRt=!0)},i.PlayKindEnd=function(t,e,i,n){this.playAni(t),this.m_kindEndHandler=n,this.m_bPlayKE=!0,this.PlaySpeed(e,i)},i.StopAni=function(){this._noAniStart||(this._noAniStart=!0,this._curKind&&this._curKind.setNoAni(!0),this.complete&&this.createstex())},i.setCurKind=function(t){var e=this;t.checkImg(this),t._imgLoaded?this._curKind=t:(this._curKind=this._mdata._kinds[0],t.m_ilHandler=Handler.create(this,chgKind=function(){e._curKind=t}))},i.pCacheKindAni=function(t){var e=this._mdata.getKind(t);e&&e.preCache()},i.playAni=function(t,e){if(void 0===e&&(e=!1),this._noAniStart=e,!this._mdata||0==this._mdata.completeL)return this._aniName=t,this.m_bPlayRt=!1,!0;if(this.m_bNLRt)return this.m_bNLRt=!1,this.PlayKindEndRetrun(this._backName),!0;""==t&&(t="std");var i=this._mdata.getKind(t);return i?(this._curKIdx!=i.kindidx&&(this._curKIdx=i.kindidx,this.setCurKind(i),this._aniName=t,this.m_bMirror?this.scaleX>0&&(this.scaleX*=-1):this.scaleX<0&&(this.scaleX*=-1),this.resetAni()),this._curKind||this.setCurKind(i),this._curKind.setNoAni(e),!0):"std"==t?(this.playAniIdx(0),!0):!1},i.getAniName=function(){return this.curKind?this.curKind.kindName:this._aniName},i.getCurKindTime=function(){return this._curKind?this._curKind.getKindTime():0},i.isKindName=function(t){return this._mdata.getKind(t)?!0:!1},i.playAniIdx=function(t){return t>=0&&t<this._mdata._kinds.length?(t==this._curKIdx&&this._curKind||(this.setCurKind(this._mdata._kinds[t]),this._aniName=this._mdata._kinds[t].kindName,this._curKIdx=t),this.resetAni(),!0):(this._curKind=null,!1)},i.render=function(e,i,n){this._bCreated&&(!this._mutiWorld||(this._mutiWorld._viewChangeID!=this._checkInViewID&&this._viewid==Stat.loopCount%4&&(this._isInView=this._mutiWorld.isMutiInsInView(this),this._checkInViewID=this._mutiWorld._viewChangeID),this.m_gameObj&&this.m_gameObj.childvis&&this.m_gameObj.childvis(this._isInView),this._isInView))&&t.prototype.render.call(this,e,i,n)},i.setAlpha=function(t){this.curKind&&(this.curKind.setAlpha(t),this._alpha=t)},i.getAlpha=function(){return this._alpha},i.customRender=function(t,e,i){if(this._tTexture&&this._noAniStart){var n=this.getClipRect();return this.blendMode&&t.blendMode(this.blendMode),void t.drawTexture(this._tTexture,n.left+e,n.top+i,n.right-n.left,n.bottom-n.top)}return MutiWorld.STOP_ALLANI&&this.m_bCStopA?void(this._curKind&&this._curKind.srender(t,e,i,null)):(this.transform&&this.transform.setTranslate(0,0),this._randS>0&&(this._etime=this._randS,this._randS=0),this._etime+=Timer.DELTA/1e3*this._smulti,this.m_bPlayRt&&this._etime>=this._curKind.getKindTime()-.1&&this.playAni(this._backName),this.m_bPlayKE&&this._etime>=this._curKind.getKindTime()-.1&&(this.m_bPlayKE=!1,this.m_kindEndHandler&&Laya.timer.frameOnce(1,this.m_kindEndHandler,this.m_kindEndHandler.run),this._etime=this._curKind.getKindTime()-.1,this._randS=0),void(this._curKind&&this._curKind.render(this,t,e,i,null,this._etime)))},__getset(0,i,"mirror",function(){return this.m_bMirror},function(t){this.m_bMirror!=t&&(this.m_bMirror=t,t?this.scaleX=-Math.abs(this.scaleX):this.scaleX=Math.abs(this.scaleX))}),__getset(0,i,"curKind",function(){return this._curKind}),__getset(0,i,"visible",function(){return this.destroyed?!1:t.prototype._$get_visible.call(this)},function(e){this.destroyed||t.prototype._$set_visible.call(this,e)}),__getset(0,i,"zOrder",t.prototype._$get_zOrder,function(e){if(t.prototype._$set_zOrder.call(this,e),this.m_gzObj&&null!=this.m_gzObj.getpid()){var i=this.m_gzObj.getpid().m_disObj.zOrder+this.y/3e3;t.prototype._$set_zOrder.call(this,i)}}),__getset(0,i,"x",t.prototype._$get_x,function(e){t.prototype._$set_x.call(this,e),this._checkInViewID=-1}),__getset(0,i,"y",t.prototype._$get_y,function(e){t.prototype._$set_y.call(this,e),this._checkInViewID=-1}),__getset(0,i,"complete",function(){return this._bCreated}),__getset(0,i,"parent",t.prototype._$get_parent,function(e){t.prototype._$set_parent.call(this,e),this.parent instanceof display.MutiWorld?this._mutiWorld=this.parent:this._mutiWorld=null}),e.GetBit32=function(t){if(0==e.s_d[0])for(var i=2147483648,n=0;32>n;n++)e.s_d[n]=i,i>>>=1;return e.s_d[31&t]},e.bDisplayRect=!1,e.needCNum=0,e.haveCNum=0,e.ANICOUNT=0,e.mResImage="layaImage/",e.bIsShowLoading=!1,e._checkInView=0,__static(e,["s_d",function(){return this.s_d=__newvec(32,0)},"ptl",function(){return this.ptl=new Point}]),e}(Sprite),QuestInfo=function(t){function e(){this.m_nStep=0,this.m_nStatus=0,this.m_nOpenKind=-1,this.m_nHaveKind=0,this.m_szArrow=null,this.m_pCurArrow=null,this.m_pLastArrow=null,this.m_pIcon=null,this.m_pComplete=null,this.m_pTip=null,this.m_pNew=null,e.__super.call(this),Laya.loader.load("assets/quest.json",Handler.create(this,this.questHandler),null,"atlas")}__class(e,"display.mainIcon.quest.QuestInfo",t);var i=e.prototype;return i.questHandler=function(){DataTable.m_i_QuestInfo=this,DataTable.m_iSelfUser.AddNoti("questdatachg",this,this.Refresh),DataTable.m_iSelfUser.AddNoti("archchged",this,this.Refresh),this.OnInitEnd(),this.size(100,100),this.mouseEnabled=!0,this.on("click",this,this.onClickHandler)},i.init=function(){GLeadManager.RegArrowInterface(this,"主界面_任务",0,-5,100)},i.onClickHandler=function(){this.OpenQuestDlg()},i.OnInitEnd=function(){GLeadManager.RegArrowInterface(this,"主界面_任务",0,-5,100);var t=new Image2("ui/img/5560371a8734c005.png");this.addChild(t),t.x=-15,t.y=-10,this.m_pNew=new Muti2DAniIns,this.m_pNew.createInsFromName("tex_任务_任务气泡_ani"),this.m_pNew.x=105,this.m_pNew.y=20,this.addChild(this.m_pNew),this.m_pNew.visible=!1,this.m_pIcon=new Muti2DAniIns,this.m_pIcon.createInsFromName("tex_任务头像效果表现_ani"),this.m_pIcon.x=50,this.m_pIcon.y=90,this.m_pIcon.playAni("有任务头像"),this.addChild(this.m_pIcon),this.m_pComplete=new Muti2DAniIns,this.m_pComplete.createInsFromName("tex_任务头像效果表现_ani"),this.m_pComplete.x=80,this.m_pComplete.y=120,this.addChild(this.m_pComplete),this.m_pComplete.playAni("完成"),this.m_pComplete.visible=!1,this.m_pTip=new Image2("reuse/5284c06ea4be702b.png"),this.m_pTip.x=this.m_pTip.y=67,this.addChild(this.m_pTip),this.Refresh()},i.Refresh=function(){if(this.m_nOpenKind=-1,DataTable.m_iSelfUser.m_szDailyQuest)for(var t=DataTable.m_iSelfUser.m_szDailyQuest.length,e=0;t>e;e++)DataTable.m_iSelfUser.m_szDailyQuest[e]&&(QuestPanel.getInstance().clip_MR.visible=!0,QuestPanel.getInstance().clip_MR.mouseEnabled=!0);else QuestPanel.getInstance().clip_MR.visible=!1,QuestPanel.getInstance().clip_MR.mouseEnabled=!1;Laya.timer.clear(this,this.Refresh);var i=DataTable.m_iSelfUser.CheckQuestState();if(Log1.debug(1,"[任务刷新]",DataTable.m_iSelfUser.GetLeadStep(),"|",i),!i)return void this.SetShow(0);Laya.timer.clear(this,this.Refresh),this.SetShow(1);var n=i[0];this.m_nHaveKind=i[1];var s=i[2],a=0;1&n?(this.m_nOpenKind=0,QuestCompleteAni.GetIsPlay(0)?a=1:QuestCompleteAni.SetIsPlay(0)):2&n&&(this.m_nOpenKind=1,a=SysID.IsRCRWID(s)?0:1),this.m_nOpenKind<0&&(1&this.m_nHaveKind&&DataTable.m_iSelfUser.m_nLevel<15?this.m_nOpenKind=0:this.m_nOpenKind=1),this.SetHintAni(n,a)},i.IsHaveArrow=function(t){var e=ArrOp.SzSearch(t,this.m_szArrow);return e>=0?1:0},i.OpenQuestDlg=function(t){void 0===t&&(t=-1),this.Refresh(),t>=0&&(this.m_nOpenKind=t),this.m_pNew.visible=!0,this.m_nStatus=1,Laya.timer.clear(this,this.OpenQuestDlg),gSys.SetSignal("openquestdlg:1"),QuestPanel.getInstance().myPopup(!0,!1,!0),
QuestPanel.getInstance().Refresh(this.m_nOpenKind)},i.CheckQuest=function(){DataTable.m_iSelfUser.m_szQuest.length&&Laya.timer.once(1e3,this,this.OpenQuestDlg,[-1],!0)},i.SetHintAni=function(t,e){return t?(this.m_pNew.visible=!1,this.m_pTip.visible=!1,this.m_pIcon.playAni("有任务头像"),e||this.m_pComplete.visible||this.m_pComplete.PlayKindEndRetrun("完成动画1"),this.m_pIcon.PlaySpeed(1,0),void(this.m_pComplete.visible=!0)):(this.m_pNew.visible=!this.m_nStatus,this.m_pTip.visible=!this.m_pNew.visible,this.m_pTip.visible?(this.TipAni(),Laya.timer.loop(6e3,this,this.TipAni,null,!0)):Laya.timer.clear(this,this.TipAni),this.m_pIcon.playAni("无任务头像"),this.m_pComplete.visible=!1,void this.m_pComplete.playAni("完成"))},i.completeAni=function(){return this.m_pComplete.complete?(this.m_pComplete.PlayKindEndRetrun("完成动画1"),this.m_pIcon.PlaySpeed(1,0),void(this.m_pComplete.visible=!0)):void Laya.timer.once(100,this,this.completeAni)},i.RunHelp=function(t){this.m_szArrow=t,this.Help()},i.SetCurArrow=function(t,e,i,n){this.m_pLastArrow=this.m_pCurArrow;var s;GLeadManager.s_pLeadArrow&&(s=GLeadManager.s_pLeadArrow.GetFaceName());s!=e&&(this.m_pCurArrow=new GLeadArrow,this.m_pCurArrow.pid=t,this.m_pCurArrow.Init(t,0,e,i,"","",0,0,0,n.x,n.y),this.m_pCurArrow.OnPrepareShow(),this.stage.once("click",this,this.OnCheckArrow)),DataTable.m_iSelfView.SetLookAt(t,0,0,0)},i.OnCheckArrow=function(){this.m_pCurArrow&&DisplayItem.SafeDelObj(this.m_pCurArrow)},i.getObj=function(t){var e;return t instanceof game.build.DisplayItem?e=t.m_disObj:t instanceof laya.display.Sprite&&(e=t),e},i.Help=function(){if(this.m_szArrow.length){this.m_nStep=0,this.m_pCurArrow&&this.m_pCurArrow.SafeDelThis();var t,e,i=this.m_szArrow[0][0];if(StringOp.Compare(i,"主界面_内购商店"))return void MainIcon.getInstance().rightIcon.addInterface(1,2);var n=i,s=GLeadManager.GetMapBuildObjNum(i);if(s>1)for(var a=1;s>=a&&(a>1&&(i=n+"_"+a),t=GLeadManager.GetMapBuildObj(i),e=GLeadManager.GetMapBuildPosObj(i),!t);a++);else t=GLeadManager.GetMapBuildObj(i),e=GLeadManager.GetMapBuildPosObj(i);t&&this.SetCurArrow(t,i,this.m_szArrow[0][1],e)}},i.OnLBDownHook=function(t,e){var i=this;this.m_pCurArrow&&this.m_pCurArrow.SetShow(0);var n;if(this.m_szArrow.length){for(var s=0,a=50,r=1;;){if(s>=5)break;Laya.timer.once(a,this,function(){a+=a;for(var t=i.m_szArrow.length-1;t>=0;t--)if(!(t>i.m_szArrow.length-1)){if(i.m_nStep>t)break;if(n=GLeadManager.GetMapBuildObj(i.m_szArrow[t][0]),n&&i.m_nStep<t){i.m_nStep=t,i.SetCurArrow(n,i.m_szArrow[t][0],i.m_szArrow[t][1]),s=1e3,r=0;break}}s++})}r&&(this.m_szArrow=[])}},i.OnLBUpHook=function(t,e){this.m_pLastArrow?DisplayItem.SafeDelObj(this.m_pLastArrow):DisplayItem.SafeDelObj(this.m_pCurArrow),!this.m_pCurArrow&&!this.m_pLastArrow},i.TipAni=function(){var t=this;this.m_pTip&&Tween.to(this.m_pTip,{y:77},500,Ease.elasticIn,Handler.create(null,function(){Tween.to(t.m_pTip,{y:67},500,Ease.elasticOut)}))},i.SetShow=function(t){this.visible=t>0,GameMain._ins.m_gameUI.OnPlaceTempButton()},e}(Sprite),Muti2DAni=function(t){function e(){this._kinds=null,this._playKind=null,this._aniName=null,this.m_bFirst=!0,this.img=null,e.__super.call(this),this.initSprite(),Laya.timer.frameLoop(1,this,this.onLoop)}__class(e,"display.MutiAni.Muti2DAni",t);var i=e.prototype;return i.initSprite=function(){var t=new Sprite;Laya.stage.addChild(t),t.alpha=.5},i.onLoop=function(){},i.loadAniData=function(t,e){var i=e.getUint32();if(2912096257!=i)return!1;if(i=e.getUint16(),0>=i)return!1;this._kinds=[];for(var n=0;i>n;n++){var s=new Kind;s.loadKind(e),this._kinds.push(s)}return console.log("Load Ani Data successed..."),this._playKind=this._kinds[1],!0},i.render=function(t,e,i){var n=new Matrix;n.scale(3,3),this._playKind.render(this.img,t,300,300)},e}(Sprite),MapIns=function(t){function e(){this._baseImg=null,this._baseData=null,this._bMoved=!1,this._bMoveStatus=!1,this._oriX=0,this._oriY=0,this._gridSp=[],this._mapItemList=null,this.sx=1,this.sy=1,this._vecTileGrid=null,this._vecPutCol=null,e.__super.call(this),this._vecTileGrid=new Object,this._vecPutCol=new Object,LoadingView.getInstance().currentValue=45;var t=GVar.mapList.mainmap;this._baseImg=new MapImg(128,512,512,t[11]),Laya.loader.load(t[11],new Handler(this,this.imgComplete),null,"image"),e._ins=this}__class(e,"display.MutiMap.MapIns",t);var i=e.prototype;return i.getWidth=function(){return this._baseData?this._baseData.m_MapWidth:0},i.getHeight=function(){return this._baseData?this._baseData.m_MapHeight:0},i.imgComplete=function(t){LoadingView.getInstance().currentValue=50,t.canInAtlas=!1;var e=GVar.mapList.mainmap;this._baseImg._deviceImg=Laya.loader.getRes(e[11]),this._baseImg._deviceImg.repeat=!1,this._baseImg._deviceImg.bitmap.lock=!0,this._baseImg.preProcess(),this._baseData=new GBkTile,this._baseData.m_tileImg=this._baseImg,this._baseData.getMapData(e[7]),this._mapItemList=e[10],this.on("mousedown",this,this.mouseDown),this._renderType|=512,this.cacheAsBitmap=!0,LoadingView.getInstance().currentValue=55,WebGL.removeRenderFinish(),this.zOrder=0},i.mouseDown=function(t){this._bMoveStatus=!0,this._bMoved=!0;var e=t.nativeEvent;if(null!=e){var i=t.nativeEvent.touches,n=this.parent;if(!i||i&&1==i.length){var s=NaN,a=NaN;s=this.getWidth()*n.getScale(),a=this.getHeight()*n.getScale();var r=NaN,h=NaN;r=Laya.stage.width,h=Laya.stage.height;var o=new Rectangle(-s+r,-a+h,s-r,a-h);n.startDrag(o,!0,200,300,null,!0)}else n.stopDrag();GameMain._moveTarget=this,GameMain._ins.onMove(),GameMain._scaleMap=!1,MutiWorld.scaCenX=Laya.stage.mouseX,MutiWorld.scaCenY=Laya.stage.mouseY}},i.mouseUp=function(t,e){Tween.to(t,{scaleX:1,scaleY:1},300,null,null,0,!0),this.off("mouseup",this,this.mouseUp),this.off("mousemove",this,this.mouseUp)},i.getGridObj=function(t,e){var i=this.getIdxStr(t,e),n=this._vecTileGrid[i];return null!=n&&null!=n.m_obj?n.m_obj:null},i.getIdxStr=function(t,e){return t.toString()+","+e},i.setGridObj=function(t){TileGrid.TransI2W(t.x,t.y,UintRef.t1,UintRef.t2);var e=this.getIdxStr(UintRef.t1.uid,UintRef.t2.uid),i=this._vecTileGrid[e];null==i&&(i=new TileGrid,this._vecTileGrid[e]=i),i.addObj(t)},i.delGridObj=function(t){TileGrid.TransI2W(t.x,t.y,UintRef.t1,UintRef.t2);var e=this.getIdxStr(UintRef.t1.uid,UintRef.t2.uid),i=this._vecTileGrid[e];null!=i&&i.delObj()},i.setCol=function(t,e,i){if(void 0===i&&(i=!0),null==this._vecPutCol)throw new Error("The ColData Not Initialized...");this._vecPutCol[this.getIdxStr(t,e)]=i},i.tileSetCol=function(t,e,i){if(void 0===i&&(i=!0),null==this._vecPutCol)throw new Error("The ColData Not Initialized...");var n=this.getIdxStr(t,e);null!=this._vecPutCol[n]&&(this._vecPutCol[n]=i)},i.getCol=function(t,e){if(null==this._vecPutCol)throw new Error("The ColData Not Initialized...");var i=this.getIdxStr(t,e);return null==this._vecPutCol[i]?!0:this._vecPutCol[i]},i.processTileGrid=function(t){var e,i=(this._baseData.m_TileXnum,this._baseData.m_TileYnum,0),n=t,s=n.length;for(i=0;s>i;i++){e=n[i],TileGrid.TransI2W(e.x,e.y,UintRef.t1,UintRef.t2);var a=this.getIdxStr(UintRef.t1.uid,UintRef.t2.uid),r=this._vecTileGrid[a];null==r&&(r=new TileGrid,this._vecTileGrid[a]=r),r.addObj(e)}},i.customRender=function(t,e,i){this.cacheAsBitmap=!0;var n=this._baseData.m_MapWidth*this.scaleX,s=this._baseData.m_MapHeight*this.scaleY;this.size(n,s),this.scale(this.sx,this.sy),this._baseData.renderMapImg(t,e,i)},e._ins=null,e}(Sprite),MapLayer=function(t){function e(){this.m_nAvatarID=0,this.m_fS=NaN,this.m_cloudList=[],this.m_sAvatarRes=null,this.lastX=0,this.lastY=0,e.__super.call(this)}__class(e,"display.MutiMap.MapLayer",t);var i=e.prototype;return i.Init=function(t,e,i,n){for(var s=0;s<this.m_cloudList.length;s++)this.removeChild(this.m_cloudList[s]);this.m_cloudList.splice(0,this.m_cloudList.length);var a=e*t,r=i*t;this.m_fS=n,this.scale(1/n,1/n);for(var h,o=0;16>o;o++)h=new MapLayerCloud,h.Init(.5,a,r,"tex_地图云l"),this.m_cloudList.push(h),this.addChild(h.m_cloud);Laya.stage.addChild(this),this.zOrder=-1e5},i.OnViewChged=function(){if(0==this.lastX&&0==this.lastY)return this.lastX=GMapView.GetBk().posOffsetX,void(this.lastY=GMapView.GetBk().posOffsetY);var t=GMapView.GetBk().posOffsetX-this.lastX,e=GMapView.GetBk().posOffsetY-this.lastY;this.lastX=GMapView.GetBk().posOffsetX,this.lastY=GMapView.GetBk().posOffsetY,t/=4,e/=4,this.x+=t,this.y+=e},i.ChgMapAvatar=function(t,e){this.m_sAvatarRes=t,this.m_nAvatarID=e,gSys.staticCloud||this.Init(.6,MapIns._ins.getWidth(),MapIns._ins.getHeight(),.6)},e}(Sprite),MutiWorld=function(t){function e(){this.m_mapIns=null,this._viewChangeID=1,this.m_cenX=NaN,this.m_cenY=NaN,this.m_aniInsId=0,this.m_mdpX=0,this.m_mdpY=0,this.m_curSelAni=null,this.preClick=!1,this._isMouseDown=!1,this.m_bMoveUiH=!1,this.m_bGMSBAlphy=!1,this.m_pProgress=null,this.m_pSelectAni=null,this.m_arrPosHandler=[],this.m_mapAni=null,this.sDrawMode=!1,e.__super.call(this),this.m_daddAniIns=new Object,this.m_lastClick=new Point,this.m_sInitPt=new Point,this.m_freePt=new Point,this.m_scrRect=new Rectangle,this.m_insRect=new Rectangle,this.tvb=__newvec(8,null),this.objArr=__newvec(9,null),this.m_mapIns=new MapIns,this.addChild(this.m_mapIns),this.m_mapIns.cacheAsBitmap=!0,e.scaCenX=Browser.clientWidth/2,e.scaCenY=Browser.clientHeight/2,this.setPos(0,0),this.on("mousedown",this,this.mouseDown),this.m_scrRect.x=0,this.m_scrRect.y=0;var t=NaN,i=NaN;t=Laya.stage.width,i=Laya.stage.height,this.m_scrRect.width=t,this.m_scrRect.height=i,this.createText(),e._ins=this}__class(e,"display.MutiWorld",t);var i=e.prototype;return i.createText=function(){e.title=new Text,this.addChild(e.title),e.title.width=200,e.title.align="center",e.title.fontSize=30,e.title.color="#ffffff",e.title.stroke=1,e.title.pivot(100,0),e.title.mouseEnabled=!1},i.addPosHandler=function(t){this.m_arrPosHandler.push(t)},i.toStaticDraw=function(t,i){void 0===i&&(i=!1),this.sDrawMode=t,t&&i&&(e.m_bSelEditMode=!1,this.leaveEditMode(),this.m_curSelAni=null,e.m_bInEMode=!1),display.MutiWorld.STOP_ALLANI=t},i.delPosHandler=function(t){for(var e=0;e<this.m_arrPosHandler.length;e++)if(t==this.m_arrPosHandler[e])return this.m_arrPosHandler.splice(e,1),!0;return!1},i.runPosHandler=function(t,e){for(var i=this.m_arrPosHandler.length,n=0;i>n;n++)this.m_arrPosHandler[n].runWith([t,e])},i.SelObjToMove=function(t){null!=t?(e.m_bSelEditMode=!0,this.m_curSelAni=t,this.enterEditMode(),this.mouseUp(null)):(e.m_bSelEditMode=!1,this.leaveEditMode(),this.m_curSelAni=null,e.m_bInEMode=!1)},i.mouseMove=function(t){if(e.m_bInEMove){if(Math.abs(e.lastCX-Laya.stage.mouseX)<=3&&Math.abs(e.lastCY-Laya.stage.mouseY)<=3)return;return e.lastCX=-1e4,e.lastCY=-1e4,void(this.m_curSelAni&&this.m_curSelAni.moveWithMousePt()&&display.MutiWorld.resetGrid(this.m_curSelAni.x,this.m_curSelAni.y))}this.m_curSelAni instanceof display.MutiAni.Muti2DAniIns&&this.m_curSelAni.getGameObj()&&!this.m_curSelAni.getGameObj().m_nCanMouse||(this.m_curSelAni&&(this.preClick||this.m_curSelAni instanceof display.MutiAni.Muti2DAniIns&&this.m_curSelAni.getGameObj()instanceof game.build.GMB_MaskCloud)&&(Math.abs(this.m_mdpX-Laya.stage.mouseX)>3||Math.abs(this.m_mdpY-Laya.stage.mouseY)>3)&&this.unSelMuti(),this._isMouseDown&&MathUtil1.Vec2Dis(this.m_mdpX,this.m_mdpY,Laya.stage.mouseX,Laya.stage.mouseY)>40&&this.mainUiRemove())},i.mainUiRemove=function(){GameMain._ins.closeAllView()},i.unSelMuti=function(){this.m_curSelAni&&this.m_curSelAni.mouseOut(),this.m_curSelAni=null,e.m_insSelAni&&(e.m_insSelAni.visible=!1),e.title&&(e.title.text=""),this.removeEditUi(),Laya.timer.clear(this,this.setSysBuildAlphy)},i.getWidth=function(){return this.m_mapIns?this.m_mapIns.getWidth():0},i.getHeight=function(){return this.m_mapIns?this.m_mapIns.getHeight():0},i.getScale=function(){return e.m_scale},i.isMutiInsInView=function(t){var i=t.getClipRect(),n=e.m_scale,s=n*(i.right-i.left),a=n*(i.bottom-i.top),r=n*(i.left+t.x)+this.x,h=n*(i.top+t.y)+this.y,o=this.m_scrRect;return!(r>o.right||h>o.bottom||r+s<o.x||h+a<o.y)},i.getFreePos=function(t,e){var i=(this.m_mapIns._baseData.m_TileXnum,this.m_mapIns._baseData.m_TileYnum),n=this.m_sInitPt.x,s=this.m_sInitPt.y,a=1,r=0,h=0,o=0,l=0,u=!1,c=!1,_=!1,m=!1,d=!1,p=0;do{if(r=s-a,r>=-1e3){for(u=!1,h=n-a,l=n+a,p=h;l>=p;p++)if(this.isFreePt(p,r,t,e))return this.m_freePt}else u=!0;if(r=s+a,i>r){for(c=!1,h=n-a,l=n+a,p=h;l>=p;p++)if(this.isFreePt(p,r,t,e))return this.m_freePt}else c=!0;if(h=n-a,h>=-1e3){for(_=!0,r=s-a+1,o=s+a,p=r;o>p;p++)if(this.isFreePt(h,p,t,e))return this.m_freePt}else _=!0;if(h=n+a,1e3>h){for(_=!0,r=s-a+1,o=s+a,p=r;o>p;p++)if(this.isFreePt(h,p,t,e))return this.m_freePt}else m=!0;if(a++,d=u&&c&&_&&m,a>=60)return null}while(!d);return null},i.isFreePt=function(t,e,i,n){var s=t-Math.floor((i-1)/2),a=e+Math.floor((n-1)/2),r=0,h=0,o=this.m_mapIns;for(h=a;h>a-n;h--)for(r=s;s+i>r;r++)if(TileGrid.TransW2I(r,h,UintRef.t1,UintRef.t2),o.getCol(UintRef.t1.uid,UintRef.t2.uid))return!1;return TileGrid.TransW2I(t,e,UintRef.t1,UintRef.t2),this.m_freePt.x=UintRef.t1.uid,this.m_freePt.y=UintRef.t2.uid,TileGrid.TransI2S(this.m_freePt.x,this.m_freePt.y,UintRef.t1,UintRef.t2),UintRef.t1.uid<=0||UintRef.t2.uid<=0?!1:UintRef.t1.uid>=this.m_mapIns._baseData.m_MapWidth||UintRef.t2.uid>=this.m_mapIns._baseData.m_MapHeight?!1:!0},i.setSysBuildAlphy=function(t){t.m_disObj.setAlpha(.3),t.m_nCanMouse=0,MainIcon.isInit&&MainIcon.getInstance().showBoxHide(),this.m_bGMSBAlphy=!0},i.preEnterEM=function(){var t=this;null==this.m_pProgress&&(this.m_pProgress=new Muti2DAniIns,this.m_pProgress.createInsFromName("uiimg_up_ani"),this.addChild(this.m_pProgress)),e.transS2W(Laya.stage.mouseX,Laya.stage.mouseY,UintRef.t1,UintRef.t2);var i=UintRef.t1.uid/e.m_scale,n=UintRef.t2.uid/e.m_scale;this.m_pProgress.setPos(i,n),this.m_pProgress.zOrder=1e6,this.m_pProgress.visible=!0,this.m_pProgress.complete?(this.m_pProgress.playAniIdx(0),this.m_pProgress.PlaySpeed(1,0)):this.m_pProgress.SetOkHandler(Handler.create(this,aniset=function(){t.m_pProgress.playAniIdx(0),t.m_pProgress.PlaySpeed(1,0)}));var s=this.m_pProgress.getCurKindTime();s=0==s?800:1e3*s-50,Laya.timer.once(s,this,this.enterEditMode)},i.removeEditUi=function(){this.m_pProgress&&(this.m_pProgress.visible=!1),Laya.timer.clear(this,this.preEnterEM),Laya.timer.clear(this,this.enterEditMode)},i.enterEditMode=function(){null!=this.m_curSelAni&&(this.removeEditUi(),this.stopDrag(),e.m_bInEMode=!0,e.m_bInEMove=!0,e.m_insSelAni&&(e.m_insSelAni.visible=!1),e.title&&(e.title.text=""),this.m_curSelAni.gameObjMove(),this.mainUiRemove(),GameMain._ins.m_gameUI.showEditUI(),SelectItemShow.onMouseDown())},i.leaveEditMode=function(){e.m_bInEMove=!1,SelectItemShow.onMouseUp(),e.tGrid&&(e.tGrid.visible=!1),this.removeEditUi(),this.unSelMuti()},i.hideAllAni=function(t){void 0===t&&(t=!0);for(var e,i=this._childs.length-1;i>1;i--)e=this._childs[i],e instanceof display.MutiAni.Muti2DAniIns&&(e.visible=!t)},i.mouseDown=function(t){this.toStaticDraw(!0),this.stage.once("mouseup",this,this.mouseUp),this.stage.on("mousemove",this,this.mouseMove),this.stage.on("mouseout",this,this.mouseOut);var i=t.nativeEvent.touches,n=!i||i&&1==i.length;if(n){if(this.m_mdpX=Laya.stage.mouseX,this.m_mdpY=Laya.stage.mouseY,this._isMouseDown=!0,e.lastCX=Laya.stage.mouseX,e.lastCY=Laya.stage.mouseY,(e.m_bInEMode||e.m_bSelEditMode)&&SelectItemShow.isClickOn())return this.m_curSelAni=SelectItemShow.m_pLink.m_disObj,void this.enterEditMode();for(var s,a=null,r=this._childs.length-1;r>=1;r--)if(s=this._childs[r],s instanceof display.MutiAni.Muti2DAniIns&&s._IsPointOn()&&null!=s.getGameObj()){var h=s.getGameObj();if(!(h instanceof game.build.DisplayItem))continue;if(!h.m_nCanMouse)continue;if(e.m_bInEMode||h instanceof game.build.GMB_MaskCloud||s.mouseDown(),e.m_bSelEditMode&&SelectItemShow.m_pLink.m_disObj!=s)return;if(this.m_curSelAni=s,e.m_bInEMode&&this.m_curSelAni.gameObjMove(),SelectItemShow.m_pLink&&SelectItemShow.m_pLink.m_disObj==s)this.enterEditMode();else if(GMapView.m_nSelf){if(h instanceof game.build.GMB_MaskCloud){a=s;continue}h instanceof game.build.MapItemMove&&h.canPosMove()?Laya.timer.once(300,this,this.preEnterEM):h instanceof game.build.GMapSysBuildBase&&h.m_nCanMouse&&Laya.timer.once(2e3,this,this.setSysBuildAlphy,[h]),this.preClick=!0}return}if(null!=a){if(this.m_curSelAni instanceof display.MutiAni.Muti2DAniIns&&this.m_curSelAni.getGameObj()&&!this.m_curSelAni.getGameObj().m_nCanMouse)return;return void a.mouseDown()}this.m_curSelAni=null,e.m_insSelAni&&(e.m_insSelAni.visible=!1),e.title&&(e.title.text="")}},i.mouseOut=function(t){return e.m_bInEMode?void this.leaveEditMode():void 0},i.mouseUp=function(t){if(this.toStaticDraw(!1),this.m_bMoveUiH&&!MutiMove.getInstance().getShowMode()&&GMapView.m_nSelf&&!GMapBuyItem.m_bInBuyMode&&(MainIcon.getInstance().showAll(),this.m_bMoveUiH=!1),this.stage.off("mousemove",this,this.mouseMove),this.removeEditUi(),Laya.timer.clear(this,this.setSysBuildAlphy),this._isMouseDown=!1,GameMain._ins.closeAllView(),e.m_bInEMode)return void this.leaveEditMode();if(this.m_bGMSBAlphy)return void(this.m_bGMSBAlphy=!1);if(!(Math.abs(this.m_mdpX-Laya.stage.mouseX)>3||Math.abs(this.m_mdpY-Laya.stage.mouseY)>3)){if(this.m_curSelAni){if(this.m_curSelAni instanceof display.MutiAni.Muti2DAniIns&&this.m_curSelAni.getGameObj()&&!this.m_curSelAni.getGameObj().m_nCanMouse)return;return this.m_curSelAni.mouseUp(),void(this.preClick=!1)}var i=Laya.stage.mouseX,n=Laya.stage.mouseY,s=new UintRef,a=new UintRef;display.MutiWorld.transS2W(i,n,s,a),TileGrid.TransS2I(s.uid,a.uid,s,a),this.m_lastClick.x=s.uid,this.m_lastClick.y=a.uid,display.MutiWorld.transS2W(i,n,s,a),TileGrid.TransS2W(s.uid,a.uid,s,a),TileGrid.TransW2S(s.uid,a.uid,s,a),display.MutiWorld.resetGrid(s.uid,a.uid),e.m_insSelAni&&(e.m_insSelAni.visible=!1),e.title&&(e.title.text="")}},i.drawGrid=function(){e.m_insSelAni||(e.tGrid=new Sprite,TileGrid.TransI2S(22,48,UintRef.t1,UintRef.t2),e.tGrid.x=UintRef.t1.uid,e.tGrid.y=UintRef.t2.uid,this.addChild(e.tGrid),e.tGrid.zOrder=1e6,e.tGrid.visible=!0,e.m_insSelAni=new Muti2DAniIns,e.m_insSelAni.createInsFromName("select_ani"),this.addChild(e.m_insSelAni),e.m_insSelAni.visible=!1)},i.addAni=function(t){this.m_mapAni?this.m_mapAni.addChild(t):this.addChild(t)},i.onAniRePos=function(t){this.m_mapAni&&this.m_mapAni.onChildMove(t)},i.addAniIns=function(t){return this.m_daddAniIns[this.m_aniInsId++]=t,this.addChild(t),this.m_aniInsId-1},i.delAniIns=function(t){var e=this.m_daddAniIns[t];null!=e&&(this.removeChild(e),e.dispose(),this.m_daddAniIns[t]=null)},i.getMPMapItem=function(t,e,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),null==this.m_mapIns)return null;if(display.MutiWorld.transS2W(Laya.stage.mouseX-e,Laya.stage.mouseY-i,UintRef.t1,UintRef.t2),TileGrid.TransS2W(UintRef.t1.uid,UintRef.t2.uid,UintRef.t1,UintRef.t2),this.tvb[0]=this.tvb[1]=this.tvb[2]=this.tvb[3]=this.tvb[4]=this.tvb[5]=this.tvb[6]=this.tvb[7]=!1,0==t)return this.m_mapIns.getGridObj(UintRef.t1.uid,UintRef.t2.uid);var n=UintRef.t1.uid,s=UintRef.t2.uid;TileGrid.TransW2S(n,s,UintRef.t1,UintRef.t2);var a=UintRef.t1.uid,r=UintRef.t2.uid;return MathUtil1.Vec2Dis(a,r,a,r+32)<t&&(this.tvb[6]=this.tvb[7]=this.tvb[0]=!0),MathUtil1.Vec2Dis(a,r,a-64,r)<t&&(this.tvb[0]=this.tvb[1]=this.tvb[2]=!0),MathUtil1.Vec2Dis(a,r,a,r-32)<t&&(this.tvb[2]=this.tvb[3]=this.tvb[4]=!0),MathUtil1.Vec2Dis(a,r,a+64,r)<t&&(this.tvb[4]=this.tvb[5]=this.tvb[6]=!0),this.objArr[0]=this.m_mapIns.getGridObj(n,s),this.tvb[0]?this.objArr[1]=this.m_mapIns.getGridObj(n-1,s):this.objArr[1]=null,this.tvb[1]?this.objArr[2]=this.m_mapIns.getGridObj(n-1,s+1):this.objArr[2]=null,this.tvb[2]?this.objArr[3]=this.m_mapIns.getGridObj(n,s+1):this.objArr[3]=null,this.tvb[3]?this.objArr[4]=this.m_mapIns.getGridObj(n+1,s+1):this.objArr[4]=null,this.tvb[4]?this.objArr[5]=this.m_mapIns.getGridObj(n+1,s):this.objArr[5]=null,this.tvb[5]?this.objArr[6]=this.m_mapIns.getGridObj(n+1,s-1):this.objArr[6]=null,this.tvb[6]?this.objArr[7]=this.m_mapIns.getGridObj(n,s-1):this.objArr[7]=null,this.tvb[7]?this.objArr[8]=this.m_mapIns.getGridObj(n-1,s-1):this.objArr[8]=null,this.objArr},i.MovePos=function(t,i){(0!=t||0!=i)&&(this.x+=t,this.y+=i,e.m_posX=this._x,e.m_posY=this._y,GMapView.m_pLayer2&&GMapView.m_pLayer2.OnViewChged())},i.setPos=function(t,i){this.x=t,this.y=i,e.m_posX=t,e.m_posY=i,GMapView.m_pLayer2&&GMapView.m_pLayer2.OnViewChged()},i.GetNamedPos=function(t,e,i){var n=this.m_mapIns._mapItemList;if(null==n||n.length<=0)return!0;for(var s=0,a=n.length;a>s;s++)if(n[s].sName==t)return e.uid=n[s].x,i.uid=n[s].y,!0;return!1},i.GetFakePos=function(t,e,i){var n=this.m_mapIns._mapItemList;if(null==n||n.length<=0)return!0;for(var s=0,a=n.length;a>s;s++)if(n[s].aniName==t)return e.uid=n[s].x,i.uid=n[s].y,!0;return!1},i.getMinYItem=function(){for(var t=WSocket.m_userData.mapdata,e=1048575,i=0,n=0,s=t.length;s>n;n++)e>t[n].y&&(i=n,e=t[n].y);var a=t[i];return t.splice(i,1),a},i.setScreenCenter=function(t,i,n,s){if(void 0===n&&(n=!1),void 0===s&&(s=1e3),!e.CRI_TWEEN){Tween.clearAll(this);var a=Laya.stage.width,r=Laya.stage.height;t*=e.m_scale,i*=e.m_scale,e.m_posX=-(t-a/2),e.m_posY=-(i-r/2),n?Tween.to(this,{x:e.m_posX,y:e.m_posY},s,Ease.quintInOut):(this.x=e.m_posX,this.y=e.m_posY)}},i.setScrOffset=function(t,i,n,s){void 0===n&&(n=!1),void 0===s&&(s=800),e.CRI_TWEEN||(Tween.clearAll(this),e.m_posX=this.x,e.m_posY=this.y,n?Tween.to(this,{x:e.m_posX+t,y:e.m_posY+i},s,Ease.quintInOut):(this.x=e.m_posX+t,this.y=e.m_posY+i))},i.scaleWithCen=function(t,i,n){if(void 0===i&&(i=-1),void 0===n&&(n=-1),0>i&&(i=e.scaCenX,n=e.scaCenY),!(.5>t||t>1.5)){e.m_posX=this.x,e.m_posY=this.y;var s=(i-e.m_posX)/e.m_scale,a=(n-e.m_posY)/e.m_scale;this.scale(t,t),e.m_scale=t,GBkTile.tileScale(e.m_scale);var r=s*t,h=a*t;e.m_posX=-(r-i),e.m_posY=-(h-n),this.x=e.m_posX,this.y=e.m_posY}},i.preInitMap=function(t){this.m_mapIns.processTileGrid(t)},i.afterInitMap=function(){TileGrid.TransS2W(2688,1536,UintRef.t1,UintRef.t2),e.m_bFInit||(this.m_sInitPt.x=UintRef.t1.uid,this.m_sInitPt.y=UintRef.t2.uid,e.m_bFInit=!0),this.scaleWithCen(.51,-1,-1),this.setScreenCenter(e.m_psInitPt.x,e.m_psInitPt.y),this.drawGrid()},__getset(0,i,"titleText",null,function(t){if(t){var i=t.m_disObj.GetRect();if(i){e.title.y-=i.bottom-i.top;var n;switch(n=t.m_sName,n||(n=t.GetBuildSysName()?t.GetBuildSysName():""),n){case"牛场":e.title.y+=110;break;case"猪圈":e.title.y+=60;break;case"羊舍":e.title.y+=30;break;case"莲花池":e.title.y+=90}e.title.text=n}}}),__getset(0,i,"x",t.prototype._$get_x,function(i){if(i!=this.x){var n=this.x;t.prototype._$set_x.call(this,i),n=i-n,e.m_posX=i,this.runPosHandler(n,0),this._viewChangeID++,this._isMouseDown&&!this.m_bMoveUiH&&GMapView.m_nSelf&&(MainIcon.getInstance().hideAll(),this.m_bMoveUiH=!0)}}),__getset(0,i,"y",t.prototype._$get_y,function(i){if(this.y!=i){var n=this.y;t.prototype._$set_y.call(this,i),n=i-n,e.m_posY=i,this.runPosHandler(0,n),this._viewChangeID++,this._isMouseDown&&!this.m_bMoveUiH&&GMapView.m_nSelf&&(MainIcon.getInstance().hideAll(),this.m_bMoveUiH=!0)}}),__getset(0,i,"posOffsetX",function(){return e.m_posX}),__getset(0,i,"posOffsetY",function(){return e.m_posY}),__getset(0,i,"scCen",function(){return this.scaleX},function(t){var e=Laya.stage.width/2,i=Laya.stage.height/2;this.scaleWithCen(t,e,i)}),e.resetGrid=function(t,i,n,s,a){if(void 0===n&&(n=1),void 0===s&&(s=1),void 0===a&&(a=!1),null!=e.tGrid){e.tGrid.x=t,e.tGrid.y=i,e.tGrid.alpha=1;var r=0,h=1,o=Math.max(n,s);o>1&&(h=.7*o),n%2==0&&s%2==0&&(r=64),e.m_insSelAni.scale(h,h),e.m_insSelAni.x=t+r,e.m_insSelAni.y=i,e.title.text="",e.title.x=e.m_insSelAni.x,e.title.y=e.m_insSelAni.y,e.title.zOrder=1e8,a?(e.m_insSelAni.zOrder=e.m_insSelAni.y+9999,e._ins.updateOrder()):(e.m_insSelAni.zOrder=e.m_insSelAni.y-1,e._ins.updateOrder()),SelectItemShow.m_pLink?(e.m_insSelAni.visible=!1,e.tGrid.visible=!0):(e.m_insSelAni.visible=!0,e.tGrid.visible=!1),0==GMapView.m_nSelf?e.m_insSelAni&&(e.m_insSelAni.visible=!1):e.m_insSelAni&&(e.m_insSelAni.visible=!0)}},e.transS2W=function(t,e,i,n){i.uid=t-display.MutiWorld._ins._x,n.uid=e-display.MutiWorld._ins._y},e.transS2WF=function(t,i,n,s){n.uid=t-display.MutiWorld._ins._x,s.uid=i-display.MutiWorld._ins._y,n.uid/=e.m_scale,s.uid/=e.m_scale},e._ins=null,e.m_scale=1,e.m_posX=NaN,e.m_posY=NaN,e.scaCenX=0,e.scaCenY=0,e.STOP_ALLANI=!1,e.tGrid=null,e.m_insSelAni=null,e.title=null,e.m_bInEMode=!1,e.m_bInEMove=!1,e.m_bSelEditMode=!1,e.lastCX=0,e.lastCY=0,e.CRI_TWEEN=!1,e.m_bFInit=!1,__static(e,["m_psInitPt",function(){return this.m_psInitPt=new Point}]),e}(Sprite),PetIconMain=function(t){function e(){this.IconArr=[],this.m_pFeed=null,this.m_pWeek=null,this.iconLocation=[{x:75,y:16},{x:-18,y:70}],this.m_pLink=null,e.__super.call(this),this.init(),this.mouseEnabled=!0,this.mouseThrough=!0}__class(e,"display.Pet.PetIconMain",t);var i=e.prototype;return i.init=function(){this.m_pFeed=new PetIcon(152),DisplayTools.addTarget(this.m_pFeed,this,{x:this.iconLocation[0].x,y:this.iconLocation[0].y,visible:!0}),this.m_pWeek=new PetIcon(0),DisplayTools.addTarget(this.m_pWeek,this,{x:this.iconLocation[1].x,y:this.iconLocation[1].y,visible:!0}),this.IconArr.push(this.m_pWeek),this.IconArr.push(this.m_pFeed)},i.iconAlpha=function(t,e){void 0===e&&(e=0),this.IconArr[t].alpha=e},i.upIcon=function(t){return t?(this.m_pFeed.pos(this.iconLocation[0].x,this.iconLocation[0].y),void this.m_pWeek.pos(this.iconLocation[1].x,this.iconLocation[1].y)):void this.m_pWeek.pos(this.iconLocation[0].x,this.iconLocation[0].y)},i.CheckAll=function(){var t=this.m_pLink.GetFeedItem();this.m_pFeed.visible=!1,this.upIcon(t),t&&(this.m_pFeed.Id=t,this.m_pFeed.fillData(),this.m_pFeed.visible=!0)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(Sprite),GGiftBox=function(t){function e(){this.m_szItem=[],this.m_szNeedLucky=[],this.m_szData=[],this.giftPanel=null,this.goldTxt=null,this.expTxt=null,e.__super.call(this),this.size(460,120),this.mouseEnabled=!0,this.mouseThrough=!1,this.initTxt()}__class(e,"display.petHunt.GGiftBox",t);var i=e.prototype;return i.initTxt=function(){this.giftPanel=new Panel,this.giftPanel.width=460,this.giftPanel.height=120,this.addChild(this.giftPanel),this.giftPanel.content.mouseEnabled=!0,this.giftPanel.pos(52,52),this.giftPanel.hScrollBarSkin="reuse/vscroll.png",DisplayTools.scrollBar=this.giftPanel.hScrollBar},i.InitGift=function(t,e){this.m_szData=t,this.m_szNeedLucky=e,this.DeleteAllSub(),this.m_szItem.length=0;var i,n=0,s=0;n=0,s=0;for(var a=0;a<t.length;a++)t[a].length<3||(i=new GRateItem,i.Init(t[a][0],t[a][1],t[a][2]),i.SetPos(n,s),this.giftPanel.addChild(i),n+=t[a][0]<10?100:75,this.m_szItem.push(i))},i.DeleteAllSub=function(){this.giftPanel&&this.giftPanel.destroyChildren()},i.SetPetNum=function(t){for(var e=0;e<this.m_szItem.length;e++)this.m_szItem[e].SetNumAgv(t)},i.GetItemRate=function(t){return null},i.SetCurLucky=function(t){for(var e=220,i=0,n=0;n<this.m_szItem.length;n++)if(this.m_szItem[n].GetKind())if(this.m_szItem[n].GetKind()>=this.m_szNeedLucky.length)this.m_szItem[n].visible=!1;else{var s=100*Math.floor(1*t/this.m_szNeedLucky[this.m_szItem[n].GetKind()]);i?this.m_szItem[n].visible=!1:(100>s?(this.m_szItem[n].GetKind()>0&&(i=1),this.m_szItem[n].filters=[ColorFilter.GRAY]):this.m_szItem[n].filters=[],this.m_szItem[n].visible=!0,e+=this.m_szItem[n].GetRewardID()<10?100:75)}},e}(Sprite),GQueBox=function(t){function e(){this.m_pOpLink=null,this.m_pPutArrow=null,this.m_szQueBk=[],this.m_szQueBtn=[],this.arr=[[23,298],[171,298],[319,298]],this.container=null,e.__super.call(this),this.init()}__class(e,"display.petHunt.GQueBox",t);var i=e.prototype;return i.init=function(){this.mouseEnabled=!0,this.mouseThrough=!0,this.container=new Sprite,this.container.mouseEnabled=!0,this.addChild(this.container)},i.InitQue=function(t,e,i,n){this.m_pOpLink=t,this.DeleteAllSub(),this.m_szQueBtn.length=0,this.m_szQueBk.length=0,GPetHuntDlg.getInstance().GAddBtn.visible=!1;for(var s=0;i>s;s++){var a;if(!(n>=s)){GPetHuntDlg.getInstance().SetDef(s,n);break}a=new GQueBk,a.SetPos(this.arr[s][0],this.arr[s][1]);var r=s>=e?1:0;a.SetKind(r),a.SetNo(s),this.m_szQueBk.push(a),this.container.addChild(a)}this.m_szQueBtn=ArrOp.InitSz(this.m_szQueBk.length,null),this.m_pPutArrow=GPetHuntDlg.getInstance().PutArrow,this.m_pPutArrow.pos(this.m_szQueBk[0].GetQueXpos()-22,this.m_szQueBk[0].GetQueYpos()-124)},i.DeleteAllSub=function(){if(this.container.destroyChildren(),this.m_szQueBk)for(var t=0;t<this.m_szQueBk.length;t++)this.m_szQueBk[t].removeSelf()},i.AddItem=function(t,e,i){if(!this.IsCanAddItem())return 0;var n=this.GetFirEmptyNo();if(0>n||n>=this.m_szQueBtn.length)return 0;if(this.m_szQueBtn[n])return 0;var s,a=t.GetPetData();s=new GHuntPetBase,s.SetLinkObj(this.m_pOpLink,this);var r=0,h=0;return this.m_szQueBk[n].GetQuePt(r,h),s.SetData(a),this.container.addChild(s.m_disObj),s.m_disObj.pos(t.m_disObj.x+15,t.m_disObj.y+200),s.MoveTos(this.m_szQueBk[n].GetQueXpos(),this.m_szQueBk[n].GetQueYpos()),this.m_szQueBtn[n]=s,this.OnQueBtnChg(),1},i.DelItem=function(t){for(var e=-1,i=0;i<this.m_szQueBtn.length;i++)if(t==this.m_szQueBtn[i]){e=i;break}0>e||(DisplayItem.SafeDelObj(this.m_szQueBtn[e]),this.m_szQueBtn[e]=null,this.OnQueBtnChg())},i.GetLinkPet=function(t){return t>=this.m_szQueBtn.length?null:this.m_szQueBtn[t]},i.IsCanAddItem=function(){var t=this.GetFirEmptyNo()>=0?1:0;return t},i.GetFirEmptyNo=function(){for(var t=0;t<this.m_szQueBtn.length;t++)if(!this.m_szQueBtn[t])return t;return-1},i.GetEmptyTopPos=function(t,e){for(var i=0;i<this.m_szQueBtn.length;i++)if(!this.m_szQueBtn[i])return this.m_szQueBk[i].GetQuePt(t,e),1;return 0},i.OnQueBtnChg=function(){for(var t=-1,e=0;e<this.m_szQueBtn.length;e++)if(!this.m_szQueBtn[e]){this.m_pPutArrow.visible=!0,t=this.m_szQueBk[e].GetKind(),this.m_pPutArrow.pos(this.m_szQueBk[e].GetQueXpos()-22,this.m_szQueBk[e].GetQueYpos()-124);break}0>t&&(this.m_pPutArrow.visible=!1),GPetHuntDlg.getInstance().CheckQueChg()},i.GetHuntCheck=function(){for(var t=0,e=0,i=0,n=this.m_szQueBtn.length,s=0;s<this.m_szQueBtn.length;s++)if(this.m_szQueBk[s].GetKind()||i++,this.m_szQueBtn[s]){n--;var a=this.m_szQueBtn[s].GetHuntData();a.length>3?e++:t++}else if(!this.m_szQueBk[s].GetKind())return null;var r=0,h=0;h=1,n>0?e>0&&(r=2,h=0):(r=0,h=0),1>i&&(i=1);var o=t>=i?1:0;return[r,h,o,t+e]},i.GetHuntPet=function(){for(var t=[],e=0;e<this.m_szQueBtn.length;e++)if(this.m_szQueBtn[e])t.push(this.m_szQueBtn[e].GetHuntData());else if(!this.m_szQueBk[e].GetKind())return null;return t},i.GetHuntPetData=function(){for(var t=[],e=0;e<this.m_szQueBtn.length;e++)this.m_szQueBtn[e]&&t.push(this.m_szQueBtn[e].GetPetData());return t},e}(Sprite),InterfaceManager=function(t){function e(){if(e.__super.call(this),e.isboo)throw new Error("这是个单例类！");this.mouseEnabled=!0}__class(e,"display.reveal.InterfaceManager",t);var i=e.prototype;return i.addCtnHandler=function(t){DisplayTools.addTarget(t,this,null,-1,!0)},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(Sprite),GHireBox=function(t){function e(t){this.m_link=null,e.__super.call(this),this.m_link=t,this.init()}__class(e,"display.Tom.GHireBox",t);var i=e.prototype;return i.dispose=function(){this.m_link=null},i.init=function(){this.size(300,300)},i.InitHire=function(t,e){this.DeleteAllSub();var i,n=0;if(t.length>0)for(n=0;n<t.length;n++)i=new GHireBtn(this),i.SetDef(62+n%2*140,123+110*Math.floor(n/2),t[n][0],t[n][1],e),this.addChild(i);i=new GHireBtn(this),i.SetDef(62+n%2*140,123+110*Math.floor(n/2),0,0,0),this.addChild(i)},i.DeleteAllSub=function(){this.destroyChildren()},i.OnHire=function(t,e){this.m_link.OnHire(t,e)},e}(Sprite),GHireBtn=function(t){function e(t){this.m_link=null,this.m_pDiscount=null,this.m_nHireTime=0,this.m_pDiamond1=null,this.m_pDiamond2=null,e.__super.call(this),this.m_link=t,this.init()}__class(e,"display.Tom.GHireBtn",t);var i=e.prototype;return i.init=function(){this.m_pDiamond1=new GUI_DiamondShowSmall,this.m_pDiamond1.SetShow(0),this.addChild(this.m_pDiamond1),this.m_pDiamond1.SetScrPos(124,200,1),this.m_pDiamond2=new GUI_DiamondShowSmall,
this.m_pDiamond2.SetShow(0),this.addChild(this.m_pDiamond2),this.m_pDiamond1.SetScrPos(124,200,1)},i.SetDef=function(t,e,i,n,s){var a=this;this.m_pDiamond1.SetScrPos(t+70,e+80,1),this.m_pDiamond2.SetScrPos(t+70,e+80,1);var r;if(this.m_nHireTime=i,1>i){r="不，谢谢";var h=new GSysResBtn;h.SetDef(t,e,r,Handler.create(this,clickH=function(){a.OnHire()},null,!1),"tex_按钮_代购",128,110),h.m_pText.x=h.m_pText.x+20,h.m_pText.y=h.m_pText.y-70,this.addChildAt(h,0)}else{r="%天",r=r.replace("%",i+"");var o=new GSysResBtn;if(o.SetDef(t,e,r,Handler.create(this,clickH1=function(){a.OnHire()},null,!1),"tex_按钮_代购",128,110),this.addChildAt(o,0),n>0?(o.m_pText.x=o.m_pText.x+20,o.m_pText.y=o.m_pText.y-100,this.m_pDiamond1.Set(n),this.m_pDiamond1.SetShow(1)):(this.m_pDiamond1.Set(0),this.m_pDiamond1.SetShow(0)),s>10){this.m_pDiscount=new GDiscount,this.m_pDiscount.SetPos(10,-83),this.m_pDiscount.SetDiscount(s),this.addChild(this.m_pDiscount),this.m_pDiamond2.Set(Math.floor(n*s*1/100)),this.m_pDiamond2.SetShow(1);var l=new GObj2DImg;l.SetPos(-45,-10),l.SetSize(90,12),l.SetSrc(DataTable.getSkin("tex_素材_红道")),this.addChild(l)}}},i.OnHire=function(){var t=NaN,e=NaN;t=Laya.stage.mouseX,e=Laya.stage.mouseY,this.m_link.OnHire(this.m_nHireTime,[t,e])},e}(Sprite),GFrd_HeadNick=function(t){function e(t,i){this.m_nUid=0,this.m_pName=null,this.icon=null,this.head=null,e.__super.call(this),void 0===i&&(i=0),this.create(),this.m_nUid=t,this._Init()}__class(e,"display.tree.GFrd_HeadNick",t);var i=e.prototype;return i.dispose=function(){this.destroy()},i.create=function(){this.m_pName=new Text,DisplayTools.addTarget(this.m_pName,this,{x:-3,y:0,fontSize:21,stroke:1,color:"#ffffff",align:"center",width:121,height:28}),this.head=new Head,DisplayTools.addTarget(this.head,this,{x:14,y:20,scaleX:.7,scaleY:.7})},i._Init=function(){var t=this;this.m_pName.text="";var e=null;return DataTable.m_iFriendBar.m_szData?void SysID.FRD_GETUSERINFO(this.m_nUid,null,null,Handler.create(this,frdH=function(i){e=i,t.m_pName.text=e[1],t.head.SetInfo(e)})):void Laya.timer.once(200,this,this._Init)},e}(Sprite),GCloudMedal=function(t){function e(t){this.m_par=null,this.m_pLabel=null,this.m_pLabel1=null,e.__super.call(this),this.m_pDoc=new GObj2DMutiText,this.m_pDoc.LoadAni("tex_文字大_ani"),t.addChild(this),this.addChild(this.m_pDoc)}__class(e,"game.build.GCloudMedal",t);var i=e.prototype;return i.dispose=function(){this.m_pDoc.dispose(),this.m_pLabel&&(this.m_pLabel.destroy(),this.m_pLabel=null),this.m_pLabel1&&(this.m_pLabel1.destroy(),this.m_pLabel1=null),this.destroy()},i.Set=function(t,e){void 0===e&&(e=0);var i;i="I"+t,this.m_pDoc.SetText(i)},i.SetLock=function(t,e){this.x=-180,this.y=-80,this.m_pLabel=new Label("评价值达到"+t+"解锁"),this.m_pLabel.fontSize=30,this.addChild(this.m_pLabel);var i="Z"+Math.floor(e);this.m_pDoc.SetText(i),this.m_pDoc.SetScrPos(15,80,0),this.m_pDoc.width=85,this.m_pLabel1=new Label("提前解锁"),this.m_pLabel1.fontSize=30,this.m_pLabel1.y=this.m_pLabel.y+this.m_pLabel.height+5,this.addChild(this.m_pLabel1),DisplayTools.onCenter(this.m_pDoc,this.m_pLabel1,this.m_pLabel)},e}(Sprite),TextSV=function(t){function e(){e.__super.call(this,64),this.defines.add(64)}__class(e,"laya.webgl.shader.d2.value.TextSV",t);var i=e.prototype;return i.release=function(){e.pool[e._length++]=this,this.clear()},i.clear=function(){t.prototype.clear.call(this)},e.create=function(){return e._length?e.pool[--e._length]:new e},e.pool=[],e._length=0,e}(TextureSV),AniShader=function(t){function e(){var t="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform mat4 mmat;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*vec4(position.x,position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_texcoord = texcoord;  \n}",i="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nvoid main() {\n	vec4 t_color = texture2D(texture, v_texcoord);		\n	/** 这个操作很蛋疼，很难调试。\n	t_color.rgba = t_color.rgba * v_color.rgba;\n    gl_FragColor = vec4( t_color.rgb,t_color.a );\n	*/\n	gl_FragColor = t_color.rgba * v_color.rgba;\n}";e.__super.call(this,t,i,"AniShader");8*CONST3D2D.BYTES_PE}return __class(e,"display.MutiAni.AniShader",t),__static(e,["shader",function(){return this.shader=new e}]),e}(Shader),Star=function(t){function e(){this.sX=NaN,this.sY=NaN,this.state=0,this.currNum=36,this.pobj=null,this.dis=10,e.__super.call(this)}__class(e,"game.Star",t);var i=e.prototype;return i.setStarPos=function(t,e,i,n){void 0===i&&(i=1),this.sX=t,this.sY=e,this.state=i,this.pobj=n,this.start()},i.start=function(){1==this.state?(this.currNum=36,this.onFrame(),Laya.timer.once(500,this,this.onFrame),Laya.timer.once(1e3,this,this.onFrame),Laya.timer.once(5e3,this,this.destroyStar)):2==this.state?Laya.timer.loop(50,this,this.onFrame):3==this.state?(this.currNum=66,this.onFrame(),Laya.timer.once(800,this,this.onFrame),Laya.timer.once(1600,this,this.onFrame),Laya.timer.once(5e3,this,this.destroyStar)):4==this.state&&(this.currNum=13,Laya.timer.loop(500,this,this.onFrame),Laya.timer.once(4e3,this,this.destroyStar))},i.onFrame=function(){2==this.state&&(this.sX=this.pobj.x,this.sY=this.pobj.y);var t=this.sX,e=this.sY;1==this.state&&(t+=Math.round(Math.random())?100*Math.random():-(100*Math.random())),4==this.state&&(t+=Math.round(Math.random())?50*Math.random():-(50*Math.random()),e+=Math.round(Math.random())?100*Math.random():-(100*Math.random()));for(var i=0;i<this.currNum;i++)this.addStar(t,e)},i.destroyStar=function(){Laya.timer.clear(this,this.onFrame),this.destroyChildren(),this.removeSelf()},i.addStar=function(t,e){var i=this.create,n=5*Math.PI*Math.random(),s=this.dis/2+this.dis*Math.random(),a=t+Math.sin(n)*s*.5,r=e+Math.cos(n)*s*.5,h=t+Math.sin(n)*s*2,o=e+Math.cos(n)*s*2;i.x=a,i.y=r,1==this.state?(h=20*(h-t)+t,o=20*(o-e)+e,Tween.to(i,{x:h,y:o,scaleX:1.1,scaleY:1.1,alpha:.8},800,null,Handler.create(this,this.onCompleteH,[i]))):2==this.state?Tween.to(i,{x:h,y:o,scaleX:.1,scaleY:.1,alpha:.1},1500,Ease.strongOut,Handler.create(this,this.onCompleteH,[i])):3==this.state?(h=30*(h-t)+t,o=30*(o-e)+e,Tween.to(i,{x:h,y:o,scaleX:1.1,scaleY:1.1,alpha:.8},1200,Ease.sineIn,Handler.create(this,this.onCompleteH,[i]))):4==this.state&&(h=20*(h-t)+t,o=20*(o-e)+e,Tween.to(i,{x:h,y:o,scaleX:1.1,scaleY:1.1,alpha:.8},1500,null,Handler.create(this,this.onCompleteH,[i])))},i.onCompleteH=function(t){t.removeSelf(),2==this.state&&(this.pobj||this.destroyStar())},__getset(0,i,"create",function(){var t=new Image2;return t.skin="ui/img/star.png",this.addChild(t),t}),e}(Sprite),MutiMove=function(t){function e(){this.nY=NaN,this.nH=NaN,this.nBoo=!1,this.iconArr=[],this.m_bShow=!1,e.__super.call(this),this.init()}__class(e,"game.ui.base.MutiMove",t);var i=e.prototype;return i.scale=function(e,i){return t.prototype.scale.call(this,e,i),this.x=Laya.stage.width/2-this.width*e+40,this.y=Laya.stage.height+80*e,this},i.init=function(){var t,e=this;t=new GSysResBtn,t.SetDef(400,0,"保存",new Handler(null,btn5=function(){SelectItemShow.m_pLink instanceof game.build.GMapBuildBase&&(MutiWorld.m_bInEMode=!1,SelectItemShow.UnLinkItem()),MainIcon.getInstance().showAll(),e.isIconShow(!1)}),"btn_结束地块编辑"),t.scale(1.5,1.5),this.iconArr.push(t);for(var i=0;i<this.iconArr.length;i++)DisplayTools.addTarget(this.iconArr[i],this);this.nY=t.y,this.nH=t.height*t.scaleX,this.size(480,80),this.scale(DisplayTools.globalScale,DisplayTools.globalScale)},i.getShowMode=function(){return this.m_bShow},i.isIconShow=function(t){if(this.m_bShow==t)return!1;if(GMapBuyItem.m_bInBuyMode)return!1;this.m_bShow=t,this.nBoo=t;var e=this.nY+115+this.nH;t&&(GameMain._ins.m_gameUI.addChild(this),e=this.nY-115-this.nH);for(var i=0;i<this.iconArr.length;i++)Tween.to(this.iconArr[i],{y:e,alpha:1},500,Ease.circInOut,Handler.create(this,this.onClose,[i,t]),180*i);return!0},i.onClose=function(t,e){t!=this.iconArr.length-1||e||this.nBoo!=e||this.removeSelf()},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(Sprite),OrnamentPop=function(t){function e(){this.m_pLink=null,this.pid=null,this.m_pPutBag=null,this.m_pInfo=null,e.__super.call(this),this.create()}__class(e,"game.ui.ornament.OrnamentPop",t);var i=e.prototype;return i.create=function(){this.width=200,this.m_pInfo=new GSysResBtn,this.m_pInfo.SetDef(0,0,"信息",Handler.create(this,this.OnClickPutBag,[0],!1),"BTN_BUILDINFO"),this.addChild(this.m_pInfo),this.m_pPutBag=new GSysResBtn,this.m_pPutBag.SetDef(100,0,"收回",Handler.create(this,this.OnClickPutBag,[1],!1),"tex_收回"),this.addChild(this.m_pPutBag)},i.Init=function(t,e){this.m_pLink=t,this.pid=e,this.upBtnShow();var i=NaN,n=NaN;i=Laya.stage.width/2-100,n=Laya.stage.height,GameMain._ins.m_gameUI.container.addChild(this),this.pos(i,n)},i.upBtnShow=function(){if(this.m_pInfo.y=this.m_pPutBag.y=0,this.twwBtn(),this.m_pPutBag){var t=this.m_pLink.GetDef();this.m_pPutBag.mouseEnabled=3==t[9]}},i.twwBtn=function(t){var e=this;void 0===t&&(t=0);var i=-110;t&&(i=0,Laya.timer.once(600,this,del=function(){e.removeSelf()})),Tween.to(this.m_pInfo,{y:i},300,null,null,0,!0),GMapView.m_nSelf&&this.m_pPutBag&&Tween.to(this.m_pPutBag,{y:i},300,null,null,100,!0)},i.OnClickPutBag=function(t){void 0===t&&(t=1),t?this.m_pLink.OnPutBag():this.m_pLink.OnInfo(),this.twwBtn(1)},i.OnLoadedSkin=function(t){this.m_pPutBag.skin=t},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(Sprite),VehicleTip=function(t){function e(){this.bg=null,this.icon=null,this.contentLabel=null,this.titleLabel=null,this.timeLabel=null,this.giftLabel=null,this.aniArr=null,e.__super.call(this),this.create()}__class(e,"game.ui.VehicleTip",t);var i=e.prototype;return i.create=function(){var t=0,e=0;this.bg=new Image2,DisplayTools.addTarget(this.bg,this,{skin:"reuse/bg.png",x:t,y:e,width:380,height:270,sizeGrid:"20,20,20,20",alpha:.8}),t+=10,e+=10,this.titleLabel=new Text,DisplayTools.addTarget(this.titleLabel,this,{text:"",fontSize:32,bold:!0,color:"#000000",x:t,y:e}),e+=35,this.contentLabel=new Text,DisplayTools.addTarget(this.contentLabel,this,{text:"航运挑战可获得配方，通过车间合\n成可以得到该家具。",fontSize:22,color:"#000000",x:t,y:e}),this.timeLabel=new GObj2DMutiText,this.timeLabel.LoadAni("tex_文字小_ani"),this.addChild(this.timeLabel),this.timeLabel.SetText("4H"),this.timeLabel.SetScrPos(t,e+150,0),this.giftLabel=new GObj2DMutiText,this.giftLabel.LoadAni("tex_文字中_ani"),this.addChild(this.giftLabel),this.giftLabel.SetText("w16"),this.giftLabel.SetScrPos(t,e+190,0),this.aniArr=[];for(var i,n,s=0;4>s;s++)t=100*Math.floor(s/2)+20,e=35*(s%2)+125,i=new GMutiAniIconBase1,i.SetAniImg("tex_魔法装饰书_ani",30,30),this.addChild(i),i.pos(t,e-10),n=new GObj2DMutiText,n.LoadAni("tex_文字小_ani"),this.addChild(n),n.SetText("0/5"),n.SetScrPos(t+20,e,0),this.aniArr.push([i,n,[t,e-10]]);this.icon=new Image2,this.icon.skin="3d/tex/53f59b9f0440100f.png",this.addChild(this.icon),this.icon.pos(0,95),this.icon.scale(.7,.7)},i.fillInfo=function(t){this.titleLabel.text=t[0],this.timeLabel.SetText(t[1]);var e=t[2];this.giftLabel.SetText("w"+t[3]);var i,n=e.length,s=0,a=0,r=0;for(s=0;n>s;s++){var h=DataTable.m_iItemTab.Get(e[s][0]);i=h?h[3]:DataTable.m_iBuildTab.Get(e[s][0])[4],a=DataTable.m_iSelfUser.GetHaveItemNum(e[s][0]),r=e[s][1],this.aniArr[s][0].SetAniImg(i,30,30),this.aniArr[s][0].pos(this.aniArr[s][2][0],this.aniArr[s][2][1]),this.aniArr[s][1].SetText(a+"/"+r),0==s&&"魔法床"==this.titleLabel.text&&0==s&&this.aniArr[s][0].pos(this.aniArr[s][2][0]+10,this.aniArr[s][2][1]),this.addChild(this.aniArr[s][0])}},i.onTipMove=function(){this.x=Laya.stage.mouseX-this.bg.width/2,this.y=Laya.stage.mouseY-this.bg.height,this.x<=0&&(this.x=0),this.y<=0&&(this.y=0,this.x=Laya.stage.mouseX-this.bg.width),this.y<=0&&this.x<=0&&(this.y=Laya.stage.mouseY+50,this.x=Laya.stage.mouseX-this.bg.width/2)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(Sprite),GBuildingMan=function(t){function e(t,i){this.m_nLastPt=0,this.m_parent=null,e.__super.call(this,t),this.m_parent=i,this.OnCreate(),this.m_nCanMouse=1}__class(e,"display.Machine.GBuildingMan",t);var i=e.prototype;return i.dispose=function(){Tween.clearAll(this.m_disObj),Laya.timer.clear(this,this.OnWalk),t.prototype.dispose.call(this)},i.OnCreate=function(){this.LoadFromName("tex_建筑工人分层_ani_001",null,!1),this.m_parent.m_disObj.addChild(this.m_disObj),2==this.m_nLastPt?this.SetAniKind("侧建造"):this.SetAniKind("背建造"),this.PlayAni(),this.SetPos(0,100),Laya.timer.loop(MathUtil1.rand(3e3)+3e3,this,this.OnWalk)},i.GetNextPos=function(t,e){var i=0;i=1!=this.m_nLastPt?1:2*Math.floor(MathUtil1.rand(2)),this.m_nLastPt=i,this.m_parent.GetNamedPt("buildman"+i,t,e)},i.OnWork=function(){2==this.m_nLastPt?this.SetAniKind("侧建造"):this.SetAniKind("背建造")},i.OnWalk=function(){var t=this.m_nLastPt;this.GetNextPos(gSys.t1,gSys.t2),this.m_nLastPt>t?this.SetAniKind("反走"):this.SetAniKind("正走"),Tween.to(this.m_disObj,{x:gSys.t1.uid,y:gSys.t2.uid},1e3,null,Handler.create(this,this.OnWork))},e}(DisplayItem),GPetAni=function(t){function e(){this.CWSD1=80,this.CWSD2=160,this.CWSD3=40,this.m_pBuild=null,this.m_pLink=null,this.m_nLeftTime=0,this.m_nStatus=4096,this.m_nLinkNo=0,this.m_nLbLock=0,this.m_nEatCount=0,this.m_fSpeed=100,this.m_szPath=[],this.m_szPetItem=null,this.m_sLeadNeedOp=null,e.__super.call(this)}__class(e,"display.Pet.GPetAni",t);var i=e.prototype;return i.dispose=function(){this.m_szPetItem.length=0,Laya.timer.clearAll(this),this.m_iSelfBk&&this.m_iSelfBk.off("LeadNeedOp",this,this.NotiLeadOp),this.m_szPath.length=0,this.m_pLink=null,this.m_szPetItem.length=0,t.prototype.dispose.call(this)},i.Init=function(t,e){this.m_pLink=t,this.m_szPetItem=e,this.LoadFromName(e[2]),this.PlayAni(1,-1e3),this.SetPos(t.m_nXpos+62,t.m_nYpos+62),this.m_nMirror=10*Math.random()>4?1:0,Laya.timer.loop(1e3,this,this.CheckStatus),this.m_iSelfBk.on("LeadNeedOp",this,this.NotiLeadOp)},i.NotiLeadOp=function(t){return 2==t.length&&"宠物"==t[0]?(16|this.m_nStatus)==this.m_nStatus?(this.m_sLeadNeedOp="",void gSys.SetSignal(""+t[1]+":"+t[0])):void(this.m_sLeadNeedOp=""+t[1]+":"+t[0]):void 0},i.GetDef=function(){return this.m_szPetItem},i.IsHungry=function(){var t=(16|this.m_nStatus)==this.m_nStatus?1:0;return t},i.CheckStatus=function(t){if(void 0===t&&(t=0),!this.m_pLink.m_nSelf){var e=Math.floor(3*Math.random())+1;return this.SetWalkKind(e),void this.OnMoveEnd()}var i=this.m_nStatus;if(this.m_nLeftTime=0,this.m_nStatus=0,this.m_nLbLock>0&&this.m_nLbLock--,this.m_nEatCount>1&&this.m_nEatCount--,1==this.m_pLink.m_nHuntState&&(this.m_nStatus=16|this.m_nStatus),2==this.m_pLink.m_nHuntState&&(this.m_nStatus=1|this.m_nStatus),t||i!=this.m_nStatus||1==this.m_nEatCount){if((1|this.m_nStatus)==this.m_nStatus)return Laya.timer.clear(this,this.OnMoveEnd),this.StopMove(),void this.SetShow(0);if(this.SetShow(1),(16|this.m_nStatus)==this.m_nStatus)return this.OnWeek(),void(this.m_sLeadNeedOp&&this.m_sLeadNeedOp.length>0&&(gSys.SetSignal(this.m_sLeadNeedOp),this.m_sLeadNeedOp=""));if((16|i)==i)return this.m_nEatCount=10,Laya.timer.clear(this,this.OnMoveEnd),this.StopMove(),this.SetAniKind("eat"),void this.PlayAni(1,-1e3);if(1==this.m_nEatCount)this.m_nEatCount=0,this.SetWalkKind(2);else{var n=3*Math.floor(Math.random())+1;this.SetWalkKind(n)}this.OnMoveEnd()}},i.SetWalkKind=function(t){switch(this.SetAniKind("walk"+t),t){case 1:this.m_fSpeed=this.CWSD1;break;case 2:this.m_fSpeed=this.CWSD2;break;case 3:this.m_fSpeed=this.CWSD3}},i.OnWeek=function(){var t=this.m_pLink.m_nXpos,e=this.m_pLink.m_nYpos+10;Laya.timer.clear(this,this.OnMoveEnd),this.StopMove(),this.SetWalkKind(2),this.MoveTo(t+20,e+20,this.m_fSpeed),this.OnMoveEnd()},i.OnMoveEnd=function(){if((16|this.m_nStatus)==this.m_nStatus)return Laya.timer.clear(this,this.OnMoveEnd),this.StopMove(),this.SetAniKind("休息1"),void this.PlayAni(1,-1e3);if((256|this.m_nStatus)==this.m_nStatus)return Laya.timer.clear(this,this.OnMoveEnd),this.StopMove(),this.SetAniKind("std"),void this.PlayAni(1,-1e3);for(var t=0,e=0;this.m_szPath&&this.m_szPath.length>0;)if(t=this.m_szPath[0].x,e=this.m_szPath[0].y,this.m_szPath.length>1?this.m_szPath.splice(0,1):this.m_szPath.length=0,this.MoveTo(t,e,this.m_fSpeed))return;var i=100*Math.random()>30?1:0;this.MakePath(i)},i.MakePath=function(t){if(t){var e=0,i=0;if(e=this.m_nXpos+800*Math.random()-400,i=this.m_nYpos+400*Math.random()-200,this.m_szPath&&this.m_szPath.length>1){var n=3*Math.random()+1;return this.SetWalkKind(n),void Laya.timer.once(10,this,this.OnMoveEnd)}}this.m_szPath.length=0,this.StopMove(),this.SetAniKind("休息2");var s=5e3*Math.random()+1e3;Laya.timer.once(s,this,this.OnMoveEnd)},i.OnBack=function(){var t=this.m_pLink.m_nXpos+30,e=this.m_pLink.m_nYpos+50;if(Laya.timer.clear(this,this.OnMoveEnd),this.StopMove(),this.m_szPath&&this.m_szPath.length>1)return this.SetWalkKind(2),void Laya.timer.once(10,this,this.OnMoveEnd);this.SetPos(t,e),this.SetAniKind("eat");var i=Math.floor(3e3*Math.random())+5e3;Laya.timer.once(i,this,this.OnMoveEnd)},i.OnLBUp=function(t,e,i){if((256|this.m_nStatus)==this.m_nStatus)return void GFlyItemIcon.FlyText("我想去寻宝!");if((1|this.m_nStatus)==this.m_nStatus)return void GFlyItemIcon.FlyText("正在寻宝中!");if(!this.m_nLbLock&&(this.m_nLbLock=2,(16|this.m_nStatus)!=this.m_nStatus&&(1|this.m_nStatus)!=this.m_nStatus&&(256|this.m_nStatus)!=this.m_nStatus)){Laya.timer.clear(this,this.OnMoveEnd),this.StopMove();var n="休息2"==this.GetAniKind()?1:0;this.MakePath(n)}},e}(DisplayItem),GBasePetItem=function(t){function e(t){this.m_nPetID=0,this.m_szPetTab=null,e.__super.call(this,t)}__class(e,"display.petHunt.GBasePetItem",t);var i=e.prototype;return i.Init=function(t,e){void 0===e&&(e=128),this.m_szPetTab=DataTable.m_iPetTab.Get(t),this.m_szPetTab.length<1||(this.LoadFromName(this.m_szPetTab[2]),this.m_nPetID=t,this.m_szPetTab[2].length>0&&(this.SetAniKind("walk2"),this.PlayAni(1)))},i.GetPetID=function(){return this.m_nPetID},e}(DisplayItem),TreeHelp=function(t){function e(){this.m_nMode=0,this.m_pIcon=null,e.__super.call(this),SysID.FRD_ON("otherevaref",this,this.SetHelpIconEva)}__class(e,"display.tree.TreeHelp",t);var i=e.prototype;return i.dispose=function(){this.m_pIcon&&(this.m_pIcon.dispose(),this.m_pIcon=null),Laya.timer.clearAll(this),t.prototype.dispose.call(this)},i.HelpIcon=function(t,e,i){if(this.m_nMode=t,!t){var n=DataTable.m_iSelfUser.GetOtherEvaGold();return void this.SetHelpIconEva(n>0?1:0)}},i.SetHelpIconEva=function(t){0==this.m_nMode&&(this.LoadFromName("tex_帮助牌_ani"),t?this.SetAniKind("holp_2"):this.SetAniKind("holp_1"),this.PlayAni(),this.PlayKindEndRetrun("holp_0"))},i.OnDisappera=function(){Laya.timer.once(600,this,this.DelThis)},e}(DisplayItem),BaseQipaoIcon=function(t){function e(t,i,n,s,a){this.m_parent=null,this.m_nItemID=0,this.m_nNum=0,this.m_nbBroken=0,void 0===s&&(s=48),e.__super.call(this,a),this.m_parent=t,this.m_nNum=n,this.LoadFromName("tex_bk_qipao_ani",this),this.SetPos(-20,-30)}__class(e,"game.build.BaseQipaoIcon",t);var i=e.prototype;return i.DelThis=function(){this.m_parent=null,this.m_disObj.removeSelf()},i.dispose=function(){t.prototype.dispose.call(this),this.m_parent=null},i.IsSameIdNum=function(t,e){return this.m_nItemID!=t||this.m_nNum!=e?0:1},i.IsBroken=function(){return this.m_nbBroken},i.OnBroken=function(){},i.OnClick=function(){this.IsBroken()||this.m_parent instanceof game.build.GMB_Mac&&this.m_parent.OnHarvest()},e}(DisplayItem),CultureAni=function(t){function e(t){this.gmbCulture=null,this.m_sName=null,this.m_nStartSec=0,this.m_nLeftTime=0,this.m_nStatus=-1,this.m_nLinkNo=0,this.m_sLeadNeedOp="",e.__super.call(this),this.gmbCulture=t}__class(e,"game.build.CultureAni",t);var i=e.prototype;return i.getpid=function(){return this.gmbCulture},i.dispose=function(){Laya.timer.clearAll(this),this.gmbCulture=null,this.m_iSelfBk.off("LeadNeedOp",this,this.NotiLeadOp),t.prototype.dispose.call(this)},i.Init=function(t,e,i,n,s){void 0===s&&(s=!1),this.m_nLinkNo=t,this.m_sName=e,this.LoadFromName(i),this.m_disObj.m_gzObj=this,this.CheckStatus(),this.PlayAni(1,2*Math.random()),this.m_nMirror=MathUtil1.rand(10)>4?1:0;var a=this.gmbCulture.GetRandPt();if(s)this.SetMapPos(this.gmbCulture.m_disObj.x+a[0],this.gmbCulture.m_disObj.y+a[1]);else{var r=new UintRef,h=new UintRef;MutiWorld.transS2WF(Laya.stage.mouseX,Laya.stage.mouseY,r,h),this.SetMapPos(r.uid,h.uid)}this.AutoLayer(),this.m_iSelfBk.on("LeadNeedOp",this,this.NotiLeadOp)},i.AutoLayer=function(){this.SetLayer(this.gmbCulture.m_disObj.zOrder+this.m_disObj.y/3e3,!1)},i.posMove=function(t,e){this.StopMove(),this.m_disObj.x+=t,this.m_disObj.y+=e,this.AutoLayer()},i.SetText=function(t){},i.NotiLeadOp=function(t){return Log1.debug(1,"[NotiLeadOp]",t),t&&2==t.length&&Laya.__parseInt(t[0])==this.gmbCulture.GetBuildID()?2==this.m_nStatus?(this.m_sLeadNeedOp="",void gSys.SetSignal(""+t[1]+":"+t[0])):void(this.m_sLeadNeedOp=""+t[1]+":"+t[0]):void 0},i.AddDown=function(t,e){this.SetPos(t,e),this.m_nMirror=0},i.CheckStatus=function(){if(this.m_nLeftTime=0,this.m_nStartSec<1)return void(0!=this.m_nStatus&&(this.StopMove(),Laya.timer.clear(this,this.OnMoveEnd),this.SetAniKind("hungry"),this.PlayAni(1,Math.random()),2==this.m_nStatus&&this.PlayKindEndRetrun("cut"),this.m_nStatus=0,this.SetText(this.m_sName+":饿")));var t=this.m_nStartSec-gSys.GetCurSecAdj();return t>0?(this.m_nLeftTime=t,void(1!=this.m_nStatus&&(this.m_nStatus=1,this.SetText(this.m_sName+":"+t),this.PlayAni(1,-1e3),this.OnMoveEnd()))):void(2!=this.m_nStatus&&(Laya.timer.clear(this,this.OnMoveEnd),this.m_nStatus=2,this.SetText(this.m_sName+":产出"),this.StopMove(),this.SetAniKind("full"),this.m_disObj&&this.m_disObj.pCacheKindAni("cut"),this.PlayAni(1,-1e3),Log1.debug(1,"[SetSignal-------CheckStatus--1]",this.m_sLeadNeedOp),this.m_sLeadNeedOp.toString().length>0&&(Log1.debug(1,"[SetSignal-------CheckStatus--1]",this.m_sLeadNeedOp),gSys.SetSignal(this.m_sLeadNeedOp),this.m_sLeadNeedOp="")))},i.OnMoveEnd=function(){if(MathUtil1.rand(100)>70){var t=this.gmbCulture.GetRandPt();this.SetAniKind("walk0"),t[0]+=this.gmbCulture.m_disObj.x,t[1]+=this.gmbCulture.m_disObj.y,this.MoveTo(t[0],t[1],32),t[0]>this.m_disObj.x?this.SetMirror(1):this.SetMirror(0)}else this.StopMove(),this.SetAniKind("eat"),Laya.timer.loop(MathUtil1.rand(3e3)+1e3,this,this.OnMoveEnd,null,!0)},i.OnCheck=function(t,e,i,n){return this.CheckStatus(),this.m_nLeftTime>0&&(1>i?this.gmbCulture.m_nQuickTime=this.m_nLeftTime:this.gmbCulture.m_nQuickTime=Math.min(this.m_nLeftTime,i),this.gmbCulture.m_nMaxWaitTime=Math.max(n,this.m_nLeftTime)),this.m_nStatus<1?void this.gmbCulture.m_nCanFeed++:this.m_nStatus>1?void this.gmbCulture.m_nCanGetItemNum++:void 0},i.OnFeed=function(t){var e=this;if(0==this.m_nStatus&&t==this.gmbCulture.m_nFeedItem){var i=NaN,n=NaN;i=Laya.stage.mouseX,n=Laya.stage.mouseY;var s=[];s.push([t,-1]);var a=new MapItem;a.copyfrom(this.gmbCulture.m_szMapData);var r=Math.floor(gSys.GetCurSecAdj()+60*this.gmbCulture.m_szLinkAni[5]*DataTable.m_iSelfUser.GetNewerQuickAgv(1));a.data[this.m_nLinkNo]=r;DataTable.m_iSelfUser.GetDiamond();DataTable.m_iSelfUser.OnFeedCulture(this.gmbCulture.m_nMapDataNo,this.gmbCulture.GetBuildID(),this.m_nLinkNo,[i,n],r,Handler.create(this,onF=function(){e.m_nStartSec=r,e.gmbCulture.m_szMapData.copyfrom(a),DataTable.m_iSoundTab.OnPlay("播种"),e.CheckStatus(),e.gmbCulture.OnCheck()}))}},i.OnGetRes=function(t){var e=this;if(2==this.m_nStatus&&t==this.gmbCulture.m_nResItem){var i=NaN,n=NaN;i=Laya.stage.mouseX,n=Laya.stage.mouseY;var s=new MapItem;s.copyfrom(this.gmbCulture.m_szMapData),s.data[this.m_nLinkNo]=0,DataTable.m_iSelfUser.GetItemByBuild(OPEnum.OP_JX_SH,t,1,this.gmbCulture.m_nMapDataNo,s,2,i,n,this.m_nLinkNo,Handler.create(this,function(){DataTable.m_iSoundTab.OnPlay("收获物品0"+Math.floor(MathUtil1.rand(2)+1)),e.gmbCulture.m_szMapData.copyfrom(s),e.m_nStartSec=0,e.CheckStatus(),e.gmbCulture.OnCheck()}))}},i.SetSec=function(t){this.m_nStartSec=t,this.CheckStatus()},e}(DisplayItem),GClould_Base=function(t){function e(t){this.m_nState=0,this.m_nLXpos=0,this.m_nLYpos=0,this.m_nLastXpos=0,this.m_nLastYpos=0,this.m_nTickCount=0,this.m_pShadow=null,e.__super.call(this,t),this.m_nCanMouse=1,this.m_pShadow=null}__class(e,"game.build.GClould_Base",t);var i=e.prototype;return i.childvis=function(t){this.m_pShadow.m_disObj.visible=t},i.dispose=function(){this.m_pShadow&&this.m_pShadow.dispose(),t.prototype.dispose.call(this),Laya.timer.clearAll(this)},i.OnCreate=function(){this.m_nXpos=1200+MathUtil1.rand(3e3),this.m_nYpos=1e3+MathUtil1.rand(1e3),this.InitImg(),this.SetLayer(1e8),this.SetPos(this.m_nXpos,this.m_nYpos),this.OnMove(),this.ShowShade(1)},i.InitImg=function(){this.LoadFromName("tex_彩虹_001_ani",this)},i.OnMove=function(){this.SetState(0),this.MoveTo(7100,1e3+MathUtil1.rand(1e3),20+MathUtil1.rand(40))},i.OnMoveEnd=function(){this.m_nXpos=0,this.m_nYpos=1e3+MathUtil1.rand(1e3),this.OnMove()},i.OnLBDown=function(t,e){return 3==this.m_nState?0:(this.m_nLastXpos=this.m_nXpos,this.m_nLastYpos=this.m_nYpos,this.m_nLXpos=t,this.m_nLYpos=e,this.m_nTickCount=0,this.StopMove(),100)},i.OnLBHold=function(t,e){return 3==this.m_nState?0:(this.m_nTickCount++,this.m_nTickCount>13?(this.SetState(3),0):1==this.m_nState?100:(this.SetState(1),100))},i.OnLBUp=function(t,e){3!=this.m_nState&&(this.m_nTickCount=0,this.OnMove())},i.ShowShade=function(t){if(DisplayItem.SafeDelObj(this.m_pShadow),!(0>t)){this.m_nXpos,this.m_nYpos;this.m_pShadow=new DisplayItem,this.m_pShadow.LoadFromName("tex_彩虹_001_ani"),this.m_pShadow.SetAniKind("l4"),this.m_pShadow.PlayAni(1),this.m_disObj.addChild(this.m_pShadow.m_disObj)}},i.SetState=function(t){switch(this.m_nState=t,this.m_nState){case 0:this.SetAniKind("l3"),this.PlayAni(1);break;case 1:this.SetAniKind("l0"),this.PlayAni(1);break;case 2:this.SetAniKind("l0"),this.PlayAni(1);break;case 3:this.OnRain()}},i.CheckLinkAct=function(){},i.OnRain=function(){this.SetAniKind("l1"),this.PlayAni(1),Laya.timer.once(3e3,this,this.ReSetPos)},i.OnMouseMove=function(t,e,i){if(3!=this.m_nState){var n=MathUtil1.Vec2Dis(t,e,this.m_nLastXpos,this.m_nLastYpos);n>10&&2!=this.m_nState&&this.m_nTickCount>10&&(this.m_nLastXpos=t,this.m_nLastYpos=e,this.m_nTickCount=0,this.SetState(2)),this.SetPos(t-this.m_nLXpos,e-this.m_nLYpos)}},i.ReSetPos=function(){this.OnMoveEnd()},i.OnClose=function(){this.DelThis()},e}(DisplayItem),GDia_Gift=function(t){function e(t){this.m_nLock=0,this.m_szData=null,this.m_szRandPos=[1,3,4,5,6,8],e.__super.call(this,t),this.m_nCanMouse=1}__class(e,"game.build.GDia_Gift",t);var i=e.prototype;return i.InitGiftImg=function(t){this.LoadFromName(t,this),this.SetAniKind("std"),this.PlayAni(1),this.PlayKindEndRetrun("地面宝箱出"),this.SetLayer(1e8)},i.InitData=function(t){this.m_szData=t;var i;i="tex_雪天地上宝箱_ani",e.resBox=i,this.InitGiftImg(i);var n=Math.floor(MathUtil1.rand(this.m_szRandPos.length)),s=GameMain._ins.GmView.GetSysBuild(this.m_szRandPos[n]),a=NaN,r=NaN;s?(a=s.m_nXpos,r=s.m_nYpos):(a=MutiWorld.m_psInitPt.x,r=MutiWorld.m_psInitPt.y),this.SetMapPos(a+20+MathUtil1.rand(50),r+70+MathUtil1.rand(50))},i.SetState=function(t){},i.OnLBUp=function(t,e){if(this.m_nLock=1,!this.m_szData||this.m_szData.length<3)return gSys.GameMsg("空宝箱",!1,"提示"),this.m_nLock=0,void this.OnClose();var i=DiaGiftBoxDlg.getInstance();i.Init(this.m_szData[0],this.getScrPoint()),i.myPopup()},i.OnClose=function(){this.m_nLock=0,this.GetOut()},i.Close=function(){},i.GetOut=function(){this.PlayKindEnd("宝箱入",1,0,Handler.create(this,this.DelThis))},e.resBox=null,e}(DisplayItem),MapItemMove=function(t){function e(){this.m_nLastX=0,this.m_nLastY=0,this.m_nCanPut=0,this.m_nSelectMove=0,this.m_nLastLayer=0,e.__super.call(this),this.m_nCanMouse=1}__class(e,"game.build.MapItemMove",t);var i=e.prototype;return i.ReadyToMove=function(){this.canPosMove()&&(SelectItemShow.LinkItem(this,1),this.SetLayer(.8))},i.canPosMove=function(){return!0},i.OnPosCheck=function(){SelectItemShow.OnPosCheck()},i.SetIPos=function(e,i){t.prototype.SetIPos.call(this,e,i),this.OnPosCheck()},i.SetPos=function(e,i){t.prototype.SetPos.call(this,e,i),this.OnPosCheck()},i.SetMapPos=function(e,i,n){void 0===n&&(n=!1),t.prototype.SetMapPos.call(this,e,i),this.OnPosCheck()},e}(DisplayItem),GMapSysBuildBase=function(t){function e(){this.m_nSysBuildID=0,this.m_szData=null,this.m_szSysData=null,this.m_nSelf=0,this.m_nAvatar=0,e.__super.call(this),this.m_nCanMouse=1}__class(e,"game.build.GMapSysBuildBase",t);var i=e.prototype;return i.GetDef=function(){return this.m_szData},i.IsMapItem=function(){return 1},i.GetBuildSysName=function(){return this.m_szData[2]},i.setvis=function(t){this.m_disObj&&(this.m_disObj.visible=t)},i.GetLinkUID=function(){return 0},i.GetBuildID=function(){return this.m_nSysBuildID},i.SetBuildAni=function(t){this.LoadFromName(t,this)},i.OnSysBuildDataChged=function(){this.m_szData=DataTable.m_iSysBuildTab.Get(this.m_nSysBuildID),this.SetAvatar(this.m_nAvatar),DisplayItem.m_pBk.GetNamedPos(this.m_szData[3],gSys.t1,gSys.t2)||DisplayItem.m_pBk.GetFakePos(this.m_szData[4],gSys.t1,gSys.t2)||(gSys.t1.uid=this.m_szData[6],gSys.t2.uid=this.m_szData[7]),this.SetMapPos(gSys.t1.uid,gSys.t2.uid),TileGrid.TransS2I(gSys.t1.uid,gSys.t2.uid,UintRef.t1,UintRef.t2),this.SetIPos(UintRef.t1.uid,UintRef.t2.uid);var t=this.GetDef();this.SetPut(t[8],t[9],2),this.OnInited()},i.InitSysBuild=function(t,e,i){this.m_nSysBuildID=t,this.m_szSysData=i,this.m_nSelf=e;var n;this.m_nSelf?(n=DataTable.m_iSelfUser.GetCurBuildAvatar(t),this.m_nAvatar=n[1]):this.m_nAvatar=0,this.m_nCanMouse=e?1:0,this.OnSysBuildDataChged(),e?GLeadManager.RegArrowInterface(this,"地图_"+this.GetBuildSysName()):GLeadManager.RegArrowInterface(this,"地图_"+this.GetBuildSysName()+"_0")},i.SetSysBuildData=function(t,e){return void 0===e&&(e=1),this.m_nSelf?t==this.m_szSysData?0:(this.m_szSysData=t,DataTable.m_iSelfUser.ChgSysBuildData(this.m_nSysBuildID,t,e),1):0},i.SetAvatar=function(t){this.m_nAvatar!=t&&(this.m_nAvatar=t);var e="";if(this.m_nAvatar){var i=ArrOp.SzHalfSearch(this.m_nAvatar,this.m_szData.avatar);if(i>=0){var n=this.m_szData.avatar[i];null!=n[1]&&(e=n.mapimg)}}this.m_nAvatar&&e.length||(e=this.m_szData[4]),this.LoadFromName(e,this),this.SetBuildAni(""+e)},i.OnLBDown=function(){return this.OnMouseIn(),1e3},i.OnLBUp=function(){this.OnMouseOut(),this.OnClick()},i.FixSysBuild=function(){if(!this.m_nSelf)return 0;if(DataTable.m_iSelfUser.GetLevel()<this.m_szData[10]){var t="需要等级%才能使用";return t=t.replace("%",this.m_szData[10]),gSys.GameMsg(t,!0,"等级不够"),0}var e=[];if(this.m_szData[11]>0){var i;return i="是否花费%d金币建设?",i=i.replace("%d",""+this.m_szData[11]),gSys.PopOkCancel(Handler.create(this,this.FixSysBuildSure,[e]),Handler.create(this,this.FixSysBuildNo),Handler.create(this,this.FixSysBuildNo),i,this.m_szData[1]),0}return this.m_szSysData=gSys.GetCurSecAdj(),DataTable.m_iSelfUser.SetSysBuildData(this.m_nSysBuildID,this.m_szSysData),DataTable.m_iSelfUser.CallSvr("FixSysBuild",[this.m_nSysBuildID,e]),DataTable.m_iSelfUser.LogGameTag("建造码头",1),this.OnInited(),1},i.FixSysBuildSure=function(t){var e=this;return t.push([1,-this.m_szData[11]]),DataTable.m_iSelfUser.CheckMakeItemSz(t,0,0,Handler.create(this,function(){var i=new StringRef;return DataTable.m_iSelfUser.ChgItemSz(t,i,OPEnum.OP_JZ_XL,[50,500],0)?(e.m_szSysData=gSys.GetCurSecAdj(),DataTable.m_iSelfUser.SetSysBuildData(e.m_nSysBuildID,e.m_szSysData),DataTable.m_iSelfUser.CallSvr("FixSysBuild",[e.m_nSysBuildID,t]),DataTable.m_iSelfUser.LogGameTag("建造码头",1),e.OnInited(),1):(gSys.GameMsg(i.ustr,!0,"无法操作"),0)})),0},i.FixSysBuildNo=function(){return 0},i.OnInited=function(){},i.OnSelect=function(){},i.UnSelect=function(){},i.OnClick=function(){this.OnMouseOut()},i.UnRegLead=function(){this.m_nSelf?GLeadManager.UnRegArrowInterface("地图_"+this.GetBuildSysName()):GLeadManager.UnRegArrowInterface("地图_"+this.GetBuildSysName()+"_0")},e}(DisplayItem),GMB_MaskCloud=function(t){function e(t){this.m_nSelf=0,this.m_nbFree=0,this.m_nState=0,this.m_nUnlock=0,this.m_szCloudData=null,this.m_pInfor=null,this.m_pRewardBox=null,
this.m_nMouseEnable=0,e.__super.call(this,t),this.m_nCanMouse=1}__class(e,"game.build.GMB_MaskCloud",t);var i=e.prototype;return i.InitMask=function(e,i){this.m_nSelf=i,this.SetMapPos(e[1],e[2],!0),this.m_nPutFlag=2;var n=e[3]+4,s=e[4]+4;i&&(t.prototype.SetPut.call(this,n-4,s-4,this.m_nPutFlag),this.SetPut(n,s,this.m_nPutFlag))},i.ClearMask=function(){var e=this.m_nPutW,i=this.m_nPutH;t.prototype.SetPut.call(this,e-4,i-4),this.SetPut(e,i)},i.InitBuild=function(e,i,n){void 0===n&&(n=0),this.m_szCloudData=e,this.m_nSelf=i,this.LoadFromName(e[5],this,!0),this.m_disObj.playAni("std",gSys.staticCloud),this.SetMapPos(e[1],e[2],!0),this.m_nPutFlag=2;var s=e[3]+4,a=e[4]+4;i&&(t.prototype.SetPut.call(this,s-4,a-4,this.m_nPutFlag),this.SetPut(s,a,this.m_nPutFlag)),this.m_nCanMouse=i,this.m_nUnlock=n,this.SetLayer(1e5+Math.random()/2);var r=e[5];if(r.indexOf("Map_Cloud")>0&&this.m_disObj){var h=Muti2DAniIns.mResImage+r+".png",o=Laya.loader.getRes(h);this.m_disObj.setStaticTexture(o)}},i.SetPut=function(t,i,n){if(void 0===t&&(t=-1),void 0===i&&(i=-1),void 0===n&&(n=4294967295),0!=GMapView.m_nSelf&&(t>0?(this.m_nPutW=t,this.m_nPutH=i,this.m_nPutFlag=n):(t=this.m_nPutW,i=this.m_nPutH),TileGrid.TransI2W(this.m_nMapIX,this.m_nMapIY,UintRef.t1,UintRef.t2),null!=DisplayItem.m_pBk)){var s=UintRef.t1.uid,a=UintRef.t2.uid;s-=Math.floor((t-1)/2),a+=Math.floor((i-1)/2);var r=!0;4294967295==n&&(r=!1);for(var h=a-i,o=s+t,l=a;l>h;l--)for(var u=s;o>u;u++){TileGrid.TransW2I(u,l,UintRef.t1,UintRef.t2);var c=this.getIdxStr(UintRef.t1.uid,UintRef.t2.uid);(null==e.s_colInfo[c]||e.s_colInfo[c]<0)&&(e.s_colInfo[c]=0,DisplayItem.m_pBk.m_mapIns.getCol(UintRef.t1.uid,UintRef.t2.uid)&&(e.s_colInfo[c]=100)),r?(e.s_colInfo[c]++,DisplayItem.m_pBk.m_mapIns.tileSetCol(UintRef.t1.uid,UintRef.t2.uid,r)):(e.s_colInfo[c]--,e.s_colInfo[c]<=1&&DisplayItem.m_pBk.m_mapIns.tileSetCol(UintRef.t1.uid,UintRef.t2.uid,r))}}},i.getIdxStr=function(t,e){return t.toString()+","+e},i.dispose=function(){DisplayItem.SafeDelObj(this.m_pInfor),this.m_pInfor=null,Tween.clearAll(this.m_disObj),t.prototype.dispose.call(this)},i.OnLBDown=function(t,e){return this.m_disObj.blendMode="light",0},i.delthis=function(){var e=this.m_nPutW,i=this.m_nPutH;t.prototype.SetPut.call(this,e-4,i-4),this.SetPut(e,i),this.dispose()},i.OnLBUp=function(t,e){var i=this;if(this.m_disObj.blendMode="normal",GMapView.m_nSelf){var n=[Laya.stage.mouseX,Laya.stage.mouseY],s=Handler.create(this,sucopen=function(){Tween.to(i.m_disObj,{alpha:0},1,null,Handler.create(i,i.delthis))});return this.m_nState<=2?void gSys.PopOkCancel(Handler.create(this,openC=function(){DataTable.m_iSelfUser.OpenMaskCloudBox(i.m_szCloudData,n,i.m_nbFree,s)}),null,null,"你确定要打开当前的云宝箱?"):3==this.m_nState?void gSys.PopOkCancel(Handler.create(this,openC=function(){DataTable.m_iSelfUser.UnlockMaskCloud(i.m_szCloudData,n,s)}),null,null,"你确定要花费钻石提前解锁这个云宝箱?"):void s.clear()}},i.childvis=function(t){this.m_pInfor&&(this.m_pInfor.visible=t)},i.OnMouseOut=function(){this.m_disObj.blendMode="normal"},i.CheckShowState=function(t,e){return GMapView.m_nSelf?this.m_nUnlock?void this.SetState(2):this.m_szCloudData[6]<=t?void this.SetState(DataTable.m_iSelfUser.GetMedal()<this.m_szCloudData[7]?1:2):this.m_szCloudData[6]!=e?void this.SetState(4):void this.SetState(3):void 0},i.SetState=function(t){if(GMapView.m_nSelf&&(this.m_nState!=t||2==this.m_nMouseEnable))switch(this.m_nState=t,DisplayItem.SafeDelObj(this.m_pInfor),DisplayItem.SafeDelObj(this.m_pRewardBox),t){case 1:case 2:this.m_nMouseEnable=1,this.m_szCloudData[8]>=5e3||6==this.m_szCloudData[8]&&this.m_szCloudData[9]>=4,this.m_pInfor=new GCloudMedal(this.m_disObj),this.m_pInfor.Set(this.m_szCloudData[7],DataTable.m_iSelfUser.GetMedal()<this.m_szCloudData[7]?1:0);break;case 3:this.m_nMouseEnable=2,this.m_pInfor=new GCloudMedal(this.m_disObj),this.m_pInfor.SetLock(this.m_szCloudData[6],Math.pow(this.m_szCloudData[6]-DataTable.m_iSelfUser.GetEvalue(),1/1.1));break;case 4:this.m_nMouseEnable=0}},i.UnActShowEva=function(t){},e.s_pUpFlag=null,__static(e,["s_colInfo",function(){return this.s_colInfo=new Object}]),e}(DisplayItem),SelectItemShow=function(t){function e(t){e.__super.call(this,t)}return __class(e,"game.build.SelectItemShow",t),e.getIns=function(){return e._ins?e._ins:(e._ins=new e,e._ins.m_bCanSAni=!1,e._ins.LoadFromName("select_ani"),e.s_disObj=e._ins.m_disObj,e.s_disObj.zOrder=1e8-1,e._ins)},e.isClickOn=function(){return e._ins&&e._ins.m_disObj?e._ins.m_disObj._IsPointOn():!1},e.onMouseDown=function(){null!=e.m_pLink&&(e.m_iLegalX=e.m_pLink.IX,e.m_iLegalY=e.m_pLink.IY,e.m_pLink.SetPut(-1,-1,4294967295))},e.onMouseUp=function(){null!=e.m_pLink&&(e.m_bLegalMove?e.m_pLink.SetPut(-1,-1,e.m_pLink.m_nPutFlag):(e.m_pLink.SetIPos(e.m_iLegalX,e.m_iLegalY),e.m_pLink.SetPut(-1,-1,e.m_pLink.m_nPutFlag),e.OnPosCheck(),e.s_disObj.zOrder=1e8-1,e.SetAniMode(1),e.m_bLegalMove=!0))},e.SetAniMode=function(t){if(e.s_disObj)switch(t){case 0:e.s_disObj.playAni("std");break;case 1:e.s_disObj.playAni("move");break;case 2:e.s_disObj.playAni("moveerr")}},e.OnPosCheck=function(){if(null==e.m_pLink)return void e.Hide();var t=0,i=1,n=Math.max(e.m_pLink.m_nPutW,e.m_pLink.m_nPutH);n>1&&(i=.7*n),e.m_pLink.m_nPutW%2==0&&e.m_pLink.m_nPutH%2==0&&(t=64),e.s_disObj.scale(i,i),e.s_disObj.x=e.m_pLink.m_nXpos+t,e.s_disObj.y=e.m_pLink.m_nYpos-1,e.s_disObj.visible=!0,DisplayItem.CheckPos(e.m_pLink.IX,e.m_pLink.IY,e.m_pLink.m_nPutW,e.m_pLink.m_nPutH)?(e.SetAniMode(1),e.m_bLegalMove=!0):(e.SetAniMode(2),e.m_bLegalMove=!1)},e.LinkItem=function(t,i,n){return void 0===i&&(i=0),void 0===n&&(n=-1),e.getIns(),e.m_pLink==t?(e.SetAniMode(i),0):(null!=e.m_pLink&&e.UnLinkItem(),e.m_pLink=t,e.SetAniMode(i),e.OnPosCheck(),1)},e.UnLinkItem=function(t){if(null==t);else if(e.m_pLink!=t)return;e.m_pLink instanceof game.build.GMapBuildBase&&(DataTable.m_iSelfUser.OnMoveBuild(e.m_pLink.m_nMapDataNo,e.m_pLink.m_szMapData.itemid,e.m_pLink.IX,e.m_pLink.IY,e.m_pLink.m_szMapData.forword),e.m_pLink.AutoLayer()),e.m_pLink=null,e.Hide()},e.Hide=function(){e.s_disObj&&(e.s_disObj.visible=!1)},e._ins=null,e.m_pLink=null,e.s_disObj=null,e.m_bLegalMove=!0,e.m_iLegalX=0,e.m_iLegalY=0,e}(DisplayItem),GBasePlayerModel=function(t){function e(){this.zhanli="std",this.feixing="飞行",this.walk="走路",this.jiangluo="降落",this.gaoxing="高兴",this.xiuxi1="休息1",this.xiuxi2="休息2",this.xiuxi3="休息3",this.xiuxi4="休息4",this.xiuxi5="休息5",this.xiuxi="休息",this.duihua="对话",this.yaotang="要糖",this.touxiao="偷笑",this.tiaoqixiaoshi="tiaoqixiaoshi",this.m_pShadow=null,this.m_fRotoZ=100,this.m_fForward=-15,this.m_fPlaySpeed=.9,this.m_nCollsion=0,this.m_sResName=null,e.__super.call(this)}__class(e,"game.ui.base.GBasePlayerModel",t);var i=e.prototype;return i.dispose=function(){t.prototype.dispose.call(this),Laya.timer.clearAll(this)},i.OnMeshReady=function(){this.m_pShadow||(this.m_pShadow=new DisplayItem,this.m_pShadow.LoadFromName("tex_影子"),this.m_pShadow.SetShow(1))},i.GetLinkRes=function(){return this.m_sResName},i.OnResChged=function(t){t==this.m_sResName&&this.SetRes(t,null)},i.SetRes=function(t,e){this.m_sResName=t,this.LoadFromName(this.m_sResName,e)},e}(DisplayItem),GTomPlane=function(t){function e(t){this.m_pTom=null,this.m_pLink=null,this.m_nState=0,this.m_parent=null,e.__super.call(this),this.LoadFromName("tex_直升机_ani",this),this.m_pTom=new GTomPlayer,this.m_nCanMouse=1,this.SetLayer(.8),this.m_parent=t,this.m_disObj.m_gzObj=this}__class(e,"game.ui.buyback.GTomPlane",t);var i=e.prototype;return i.getpid=function(){return this.m_parent},i.dispose=function(){Tween.clearAll(this.m_disObj),t.prototype.dispose.call(this),this.m_pTom&&(this.m_pTom.dispose(),this.m_pTom=null,this.m_pLink=null)},i.Hide=function(t){t?(this.SetShow(0),this.m_pTom.SetShow(0)):(this.m_pLink.IsCanShowPlane()&&this.SetShow(1),this.m_pTom.SetShow(1))},i.OnLBDown=function(){this.OnMouseIn()},i.OnLBUp=function(){this.OnMouseOut(),this.m_pLink.OnClick()},i.Init=function(t){this.m_pLink=t,this.SetPos(t.m_nXpos,t.m_nYpos+5),this.m_pTom.SetInit(this),this.m_pTom.SetPos(t.m_nXpos+100,t.m_nYpos+40),this.m_pTom.PlayAction()},i.GetBuyItem=function(){return this.m_pLink.GetBuyItem()},i.IsActive=function(){return 0==this.m_nState?1:0},i.OnIdel=function(){this.SetShow(1),this.m_pTom.PlayAction()},i.OnCome=function(){3!=this.m_nState&&0!=this.m_nState&&(this.m_pTom.PlayAction(),this.m_nState=1,this.OnMove(0))},i.OnGo=function(t){void 0===t&&(t=0),this.m_pTom.PlayAction(),1!=this.m_nState&&2!=this.m_nState&&(this.m_nState=2,this.OnMove(1,t))},i.GoEnd=function(t){return void 0===t&&(t=0),t?void this.OnCome():void this.OnClose()},i.IsGo=function(){return 2==this.m_nState},i.OnClose=function(){this.SetShow(0)},i.OnDestroy=function(){DisplayItem.SafeDelObj(this.m_pTom)},i.SetMapPos=function(e,i,n){void 0===n&&(n=!1),this.m_pTom&&this.m_pTom.SetPos(this.m_pLink.m_nXpos+100,this.m_pLink.m_nYpos+40),t.prototype.SetMapPos.call(this,e,i,n)},i.OnMove=function(t,e){var i=this;void 0===e&&(e=0);var n=0,s=0,a=0,r=0;if(n=this.m_pLink.m_nXpos,s=this.m_pLink.m_nYpos,this.m_pTom.StopAction(),this.m_pTom.SetShow(0),t){this.SetAniKind("飞行"),this.PlayAni(1),this.PlayKindEndRetrun("起飞");var h=this.m_disObj.y-100;Tween.to(this.m_disObj,{y:h},1e3,Ease.sineOut,Handler.create(null,function(){a=-4e3,r=-200,Tween.to(i.m_disObj,{x:a},6e3,Ease.QuadInOut,Handler.create(null,function(){e?Tween.to(i.m_disObj,{y:r},6e3,Ease.QuadInOut,Handler.create(null,function(){i.GoEnd(1)})):Tween.to(i.m_disObj,{y:r},6e3,Ease.QuadInOut,Handler.create(null,function(){i.GoEnd(0)}))}))}))}else this.SetPos(this.m_nXpos,this.m_nYpos-100),this.SetAniKind("飞行"),this.PlayAni(),a=4e3,r=-200,this.SetPos(n,s),Tween.from(this.m_disObj,{x:a,y:r},4e3,Ease.sineIn,Handler.create(this,function(){i.SetAniKind("std"),i.StopAni(),i.PlayKindEndRetrun("降落"),i.SetPos(i.m_nXpos,i.m_nYpos+5),i.m_pTom.SetShow(1),i.m_pTom.PlayAction(),i.m_nState=0,gSys.SetSignal("arrive:plane")}))},i.goT1=function(){},e}(DisplayItem),GMutiAniIconBase=function(t){function e(t,i){this.m_nMouseEnable=1,this.m_foffX=0,this.m_foffY=0,this.scaleAni=1,this.gRect=null,void 0===i&&(i=!1),e.__super.call(this,t,i)}__class(e,"game.ui.comui.GMutiAniIconBase",t);var i=e.prototype;return i.DelThis=function(){DisplayItem.SafeDelObj(this)},i.FitSize=function(t,e){var i=0,n=0;if(this.gRect=this.m_disObj.GetRect(),!this.gRect)return void Laya.timer.once(50,this,this.FitSize,[t,e]);if(i=this.gRect.right-this.gRect.left,n=this.gRect.bottom-this.gRect.top,!(1>i||1>n)){var s=t/i,a=e/n;s>a&&(s=a),s>1.5&&(s=1.5),this.m_disObj.scale(s,s),this.m_foffX=(t-i*s)/2-this.gRect.left*s-t/2,this.m_foffY=(e-n*s)/2-this.gRect.top*s-e/2,this.SetFloatPos(this.m_foffX,this.m_foffY),this.m_disObj.visible=!0}},i.SetAPos=function(t,e){return this.gRect||this.m_disObj.visible?void this.SetFloatPos(t+this.m_foffX,e+this.m_foffY):void Laya.timer.once(50,this,this.SetAPos,[t,e])},i.SetAniImg=function(t,e,i){void 0===e&&(e=64),void 0===i&&(i=64),this.LoadFromName(t),this.SetAniKind("std"),this.m_disObj.visible=!1,this.FitSize(e,i)},i.SetFloatPos=function(t,e){this.m_disObj.pos(t,e)},e}(DisplayItem),ClnDataCal=function(t){function e(){this.isBoo=!0,this.list=[],this.sz=null,this.check=null,this.ret=0,this.data=null,this.m_szCallHd=[],this.m_nSysSec=0,this.m_nForceSvrLost=0,this.m_nLastGetTime=0,this.m_nUid=0,this.m_nBindFlag=0,this.m_nLogKey=0,this.m_sBindMail=null,this.m_nLogTimes=0,this.linkuser_sz=null,this.linkuser_trytimes=0,this.linkuser_clnsz=null,this.userData=null,this.m_nRainClouldLeft=0,this.m_szLastTime=[0,0],this.m_szCheckNum=[0,0],this.m_nOnLineSec=0,this.m_nLeaveSec=0,this.m_nFullOrderModi=0,this.RNOrder_lastsize=0,this.m_szBoatHelpBox=[],this.m_szLastWorldRankList=null,this.m_szCurAcc=null,this.m_nAccidentExp=-1,this.m_pAccTask=!1,this.m_nHelpTreeLock=0,this.m_szTvData=null,this.m_nTvRefreshT=0,this.m_nGetTvTime=0,this.m_szTradeTools=[],this.m_szTradeItems=[],this.m_nWorldTradeLock=0,this.m_nPetHuntLock=0,e.__super.call(this),this.m_szCallSz=[],this.m_szCallHd=[],Laya.timer.loop(5e3,this,this.OnTimerUpdate)}__class(e,"game.gdcal.ClnDataCal",t);var i=e.prototype;return i.OnTimerUpdate=function(){if(this.m_szData){var t,e;t=this.GetSvrLocalTime(),e=this.GetUpdateTime(),(t.getFullYear()!=e.getFullYear()||t.getMonth()!=e.getMonth()||t.getDate()!=e.getDate())&&this.CallSvrRet("OnTimerUpdate","NIL",Handler.create(this,this.OnTimerUpdateNext))}},i.OnTimerUpdateNext=function(t){return 1!=t?void gSys.Err("TimerUpdate err"):(this.ClearTag(3),this.OnQuestUpdate(),Laya.timer.once(5e3,this,this.GetLastWorldRankList,null),this.LogGameTag("get_活动_登陆次数",1),void this.SetUpdateTime())},i.GetUpdateTime=function(){var t;this.m_szData&&(t=ArrOp.GetStrVal("updatetime",this.m_szData.nameddata));var e;return"string"==typeof t&&(e=DateOp.SetDateStr(t,e)),e},i.SetUpdateTime=function(){var t;t=DateOp.GetLocalTime(t),this.m_szData.nameddata=ArrOp.SetStrVal("updatetime",this.m_szData.nameddata,DateOp.string(t))},i.resetSvr=function(t,e){this.m_sSvrName=t,this.m_nNetKey=e},i.ChgSysBuildData=function(t,e,i){if(void 0===i&&(i=1),this.SetSysBuildData(t,e),i){for(var n=0;n<e.length;n++)null==e[n]&&(e[n]="NIL");this.CallSvr("ChgSysData",[t,e])}return 1},i.GetItemByBuild=function(t,e,i,n,s,a,r,h,o,l,u){var c=this;if(void 0===o&&(o=0),0>n||n>=this.m_szData.mapdata.length)return void gSys.Err("agv err:"+n);var _=new MapItem;if(_.copyfrom(this.m_szData.mapdata[n]),_.itemid!=s.itemid)return gSys.Err("mapszno id err:"+n+s),void(u&&u.run());var m,d=e,p=0,f="GetItemByBuild";switch(a){case 0:m=DataTable.m_iFieldTab.Get(e),null!=m?p=m[5]:e=0,f="GetAllFeild";break;case 1:m=DataTable.m_iMacFormulTab.Get(e),p=m[8],d=m[6],f="GetAllItemByMac";break;case 2:m=DataTable.animaltab.getObj(s.itemid),p=m[8],f="GetAllCulture";break;case 3:m=DataTable.m_iTreeTab.Get(s.itemid),p=m[6],f="GetAllTreeItem";break;default:return gSys.Err("GetItemByBuild getkind err:"+a),void(u&&u.run())}if(0!=e){var g;g=[[4,p],[d,i]],this.CheckMakeItemSz(g,0,0,Handler.create(this,function(){var i=new StringRef;return c.ChgItemSz(g,i,t,[r,h])?(c.m_szData.mapdata[n].copyfrom(s),c.CallSvr(f,[n,s.itemid,e,o,r,h,g,s]),e>=5e3&&c.AddEvalue(e),c.CheckAccident(p,r,h),c.LogGameTag("get_"+e,1),c.LogGameTags(e,1),void(l&&l.run())):(gSys.Err("GetItemByBuild ChgItemSz"+i),void(u&&u.run()))}),Handler.create(this,no=function(){u&&u.run()}))}},i.onGetItemByBuildBack=function(t,e,i){Log1.info("~~~~~~~~[onGetItemByBuildBack]:",t)},i.OnAddLvUpBuild=function(t,e){if(!(t>=e)){var i=this.GetShopTipData();i=i||[];var n,s=0,a=0,r=0;for(a=t+1;e>=a;a++){var h,o=DataTable.m_iUserLevelTab.Get(a);if(o[9]&&!(o[9].length<1))for(s=0;s<o[9].length;s++)h=o[9][s],h[1]<1||(n=DataTable.m_iBuildTab.GetByName(h[0]),null!=n&&0!=n.length?n[14]<1||(r=ArrOp.SzSearch(n[0],n),0>r?i.push([n[0],h[1]]):i[r][1]+=h[1]):gSys.Err("itemname not find name="+h[0]))}var l=DataTable.m_iBuildTab.GetAll();for(s=0;s<l.length;s++)if(!(l[s][14]<1)){var u=l[s][1];(6==u||9==u||11==u)&&(u=0),(0==u||2==u)&&(l[s][11]<=t||l[s][11]>e||(r=ArrOp.SzSearch(l[s][0],i),i.push([l[s][0],1])))}ArrOp.SetStrVal("shoptip",this.m_szData.nameddata,i),this.CheckShopNewNum()}},i.OnAddLvUpItem=function(t,e){var i=this;if(!(t>=e)){for(var n=[],s=t+1;e>=s;s++){var a=0,r=[],h=DataTable.m_iUserLevelTab.Get(s);h[10]=h[10]||[];for(var o=0,l=h[10].length;l>o;o++)r=h[10][o],r[1]<1||(a=DataTable.m_iItemTab.GetIdByName(r[0]),a?n.push([a,r[1]]):gSys.Err("itemname not find name="+r.itemid))}n.length<1||this.CheckMakeItemSz(n,1,0,Handler.create(this,function(){var t=new StringRef;i.ChgItemSz(n,t,OPEnum.OP_SJ_ZS,[Laya.stage.mouseX,Laya.stage.mouseY],1,0,0,"","chglevitem")||gSys.Err("OnAddLvUpItem GetItemByBuild "+t)}))}},i.OnLevelUp=function(t,e){t>=e||(this.isCoolLevelUp()?(this.list.push(Handler.create(this,this.levelUp,[t,e])),Laya.timer.loop(1e3,this,this.checkIsCool,null,!0)):this.levelUp(t,e))},i.checkIsCool=function(){if(!this.isCoolLevelUp()){var t=this.list.shift();t.run()}this.list.length<=0&&Laya.timer.clear(this,this.checkIsCool)},i.levelUp=function(t,e){this.m_nBarnAllNum=this.GetBagMax(0),this.m_nWareAllNum=this.GetBagMax(1),this.OnAddLvUpBuild(t,e),this.OnAddLvUpItem(t,e),15==e&&this.FirstHireTom(),GameMain._ins.addLoading(),Laya.loader.load(Assets.levelUpResUrl,Handler.create(this,this.onComplete),null,"atlas"),gSys.SetSignal("level:"+this.m_nLevel),this.Emit("levelChg",null)},i.onComplete=function(){Assets.checkRes(Assets.levelUpResUrl)&&(LevelUpView.getInstance().Index=0,LevelUpView.getInstance().myPopupMax(!1,!0,!0,"升级"),GameMain._ins.removeLoading())},i.isCoolLevelUp=function(){var t=!1;return(KnifeView.getInstance().parent||TreeIcon.getInstance().isOk||CultureIcon.isLvl)&&(t=!0),t},i.GetPackage=function(t,e,i){return this.friendCal.GetPackage(t,e,i),!0},i.GetFriPoint=function(){return this.friendCal.GetFriPoint()},i.GetMyWorldChatDefStr=function(){return this.friendCal.GetMyWorldChatDefStr()},i.GetCheckFriPoint=function(){return this.friendCal.GetCheckFriPoint()},i.AddFriPoint=function(t){this.friendCal.AddFriPoint(t)},i.GetMyFriendMaxNum=function(){return this.friendCal.GetMyFriendMaxNum()},i.OnMoveBuild=function(t,e,i,n,s){if(0>t||t>=this.m_szData.mapdata.length)return gSys.GameMsg("OnMoveBuild mapszno err:"+t),0;var a=new MapItem;if(a.copyfrom(this.m_szData.mapdata[t]),a.itemid!=e)return gSys.Err("OnMoveBuild mapszno id err:"+t),0;DisplayItem.m_pBk.m_mapIns.delGridObj(a),a.forword=s,a.x=i,a.y=n,this.m_szData.mapdata[t].copyfrom(a);var r=gSys.GetCurSecAdj();return this.CallSvr("OnMoveBuild",[t,e,i,n,s,r]),DisplayItem.m_pBk.m_mapIns.setGridObj(a),GameMain._ins.GmView.autoLink(a.itemid),1},i.OnFinishCulBuild=function(t,e){if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("OnFinishCulBuild mapszno err:"+t),0;var i=this.m_szData.mapdata[t];return i.itemid!=e?(gSys.Err("OnFinishCulBuild mapszno id err:"+t),0):(i.forword=0,this.CallSvr("OnFinishCulBuild",[t,e,i]),this.LogGameTag("openbuild_"+e,1),1)},i.OnPlantField=function(t,e,i,n,s,a){var r=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("OnPlantField mapszno err:"+t);var h=new MapItem;if(h.copyfrom(this.m_szData.mapdata[t]),h.itemid!=e.itemid)return void gSys.Err("OnPlantField lastv.itemid!=id");if(null!=h.data&&h.data.length>0)return void gSys.Err("OnPlantField field is already planted");var o=DataTable.m_iFieldTab.Get(i);if(!o||o.length<1)return void gSys.Err("OnPlantField item not crop");var l=[];l.push([i,-1]),this.CheckMakeItemSz(l,0,1,new Handler(this,okField=function(){var h=new StringRef;return r.ChgItemSz(l,h,OPEnum.OP_ZW_ZHZ,s)?(r.m_szData.mapdata[t].copyfrom(e),r.CallSvr("OnPlantAllField",[t,e.itemid,i,n,l,e]),r.LogGameTag("make_"+i,1),r.LogGameTag("make_crop",1),void(a&&a.run())):void gSys.Err("OnPlantField ChgItemSz err="+h)}))},i.OnAddMacMake=function(t,e,i,n,s){var a=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("OnAddMacMake mapszno err:"+t);var r=new MapItem;if(r.copyfrom(this.m_szData.mapdata[t]),r.itemid!=e)return void gSys.Err("OnAddMacMake lastv.itemid!=id");if(!r.data||r.data.length<6){var h=DataTable.m_iBuildTab.Get(e).slice();if(null==h)return void gSys.Err("OnAddMacMake no build id="+e);r.data=[null,null,0,h[18],0,0]}var o=r.data[2],l=1-this.GetMacLvQuickAgvByLv(r.data[4]),u=r.data[0]?r.data[0].slice():null,c=r.data[3],_=r.data[1]?r.data[1].slice():null,m=this.GetCurMakeData(l,o,u,_);if(o=m[0],u=m[1],_=m[2],5e3>i&&_&&_.length>=30)return void gSys.GameMsg("您囤积的货物太多了，无法继续生产，清理下背包吧！");if((!u||u.length<1)&&(o=gSys.GetCurSecAdj()),u&&u.length>=c)return void gSys.Err("OnAddMacMake que reach max");var d=DataTable.m_iMacFormulTab.Get(i).slice();if(null==d)return void gSys.Err("OnAddMacMake get err;id="+i);if(d[2]!=e)return void gSys.Err("此机器无法生产物品"+i);u instanceof Array||(u=[]),u.push(i),r.data[0]=u,r.data[1]=_,r.data[2]=Math.floor(o);for(var p=[],f=d[5],g=0;f&&g<f.length;g++){if(f[g][1]<1)return void gSys.Err("OnAddMacMake formul num <0 err: id="+i);p.push([f[g][0],-1*f[g][1]])}p&&p.length>0?this.CheckMakeItemSz(p,0,0,new Handler(this,function(){var h=new StringRef;return a.ChgItemSz(p,h,OPEnum.OP_CP_TJ,n)?(a.m_szData.mapdata[t].copyfrom(r),a.CallSvr("OnAddMacMake",[t,e,i,Math.floor(o),p,r]),a.LogGameTag("make_"+i,1),a.LogGameTag("make_product",1),void s.run()):void gSys.Err("OnAddMacMake ChgItemSz err="+h)})):(this.m_szData.mapdata[t].copyfrom(r),this.CallSvr("OnAddMacMake",[t,e,i,Math.floor(o),p,r]),this.LogGameTag("make_"+i,1),this.LogGameTag("make_product",1),s.run())},i.OpenMaskCloudBox=function(t,e,i,n){var s=this;if(!i&&this.GetEvalue()<t[6]&&!this.MaskCloudIsUnlock(t[0]))return gSys.GameMsg("您的评价值不够"),0;if(t[7]<1)return gSys.GameMsg("遮罩云表格填写错误：data.needmedal<1 data.needmedal="+t[7]),0;if(!this.AddMaskCloud(t[0],0,1))return gSys.GameMsg("该云已经解锁"),1;var a=[];return i||a.push([9,-t[7]]),a.push([t[8],t[9]]),this.CheckMakeItemSz(a,0,1,Handler.create(this,getCloud=function(){var r=new StringRef;return s.ChgItemSz(a,r,OPEnum.OP_ZZ_YBX,e,1)?s.AddMaskCloud(t[0])?(s.CallSvr("OpenMaskCloudBox",[t[0],a,i]),t[8]>=5e3&&s.AddEvalue(t[8]),s.LogGameTag("get_解锁白云次数",1),void(n&&n.run())):void gSys.GameMsg("该云已经解锁"):void gSys.GameMsg("OpenMaskCloudBox ChgItemSz err="+r)}))?1:0},i.UnlockMaskCloud=function(t,e,i){var n=this;if(!this.AddMaskCloud(t[0],1,1))return gSys.GameMsg("该云已经解锁"),1;var s=[],a=Math.floor(Math.pow(t[6]-this.GetEvalue(),1/1.1));isNaN(a)&&(a=0),s.push([2,-a]);var r=Handler.create(this,crf=function(s){var a=new StringRef;return n.ChgItemSz(s,a,OPEnum.OP_ZZ_YBX,e)?n.AddMaskCloud(t[0],1)?(n.CallSvr("UnlockMaskCloud",[t[0],s]),void(i&&i.run())):void gSys.GameMsg("该云已经解锁"):void gSys.GameMsg("UnlockMaskCloud ChgItemSz err="+a)},[s]);return this.CheckMakeItemSz(s,0,0,r)?1:0},i._SendCallTick=function(){return this.m_szCallSz.length<1?1:this.m_nNetLinkOk?0==this.m_nNetKey||this.m_nSending?0:(this.sz=this.m_szCallSz,this.m_szCallSz=[],this.m_szData.power>0?csvr.call(this.m_sSvrName,"CallCheckCln",[this.m_nNetKey,this.sz],new Handler(this,this.onSendCallTickOk),new Handler(this,this.onSendCallTickFail),1):csvr.call(this.m_sSvrName,"OnCln",[this.m_nNetKey,this.sz],new Handler(this,this.onSendCallTickOk),new Handler(this,this.onSendCallTickFail),1),this.ret=0,this.ret):0},i.onSendCallTickCallBack=function(t,e){void 0===e&&(e=!0);var i=t-1,n=this.m_szCallHd[i];if(n)for(var s,a=0;a<n.length;a++)s=n[a],s&&(s.runWith(t),e&&(s.recover(),this.m_szCallHd[i]=null))},i.onSendCallTickOk=function(t){Log1.info("[onSendCallTickOk]",t),this.ret=1,this.m_nSending=0,this.onSendCallTickCallBack(t,!0)},i.onSendCallTickFail=function(t){Log1.info("[onSendCallTickFail]",t,csvr.retflag),gSys.setErr(1e3),csvr.retflag==ErrorDef.FUN_ERR_OUTTIME||csvr.retflag==ErrorDef.FUN_ERR_NOTLINK||csvr.retflag==ErrorDef.FUN_ERR_NOTFINDSVR||csvr.retflag==ErrorDef.FUN_NOTFIND||csvr.retflag==ErrorDef.FUN_RUNERR?(this.m_szCallSz.length>0&&this.sz.push(this.m_szCallSz),this.m_szCallSz=this.sz,this.sz=[]):this.m_nForceSvrLost=1,this.OnSvrLost(),this.m_nSending=0,this.onSendCallTickCallBack(this.data,!1)},i.FlushCmdQueue=function(t){if(!this.m_nNetLinkOk)return t&&t.runWith(0),0;if(this.m_szCallSz.length<1)return t&&t.runWith(1),1;var e=600;return this.m_nSending?(console.log(this.m_nSending),Laya.timer.once(100,this,this.onFlushWait,[e,t]),0):(this._SendCallTick(),t&&t.runWith(1),1)},i.onFlushWait=function(t,e){return t--,1>t?(e&&e.runWith(0),0):this.m_nSending?(Laya.timer.once(100,this,this.onFlushWait,[t,e]),0):(this._SendCallTick(),e&&e.runWith(0),0)},i.SubCallFun=function(t){var e,i,n,s=0,a=0;n=t[2],i=t[3];var r,h;switch(n){case"GetAllCulture":r=t[3][3],i[3]=null,i[3]=[],i[3].push(r),a=1;break;case"GetAllTreeItem":i.push(1),a=2;break;case"OnAllTreeAskHelp":r=t[3][0],h=t[3][1],i[0]=null,i[1]=null,i[0]=[],i[0].push(r),i[1]=[],i[1].push(h),a=3;break;case"GetAllFeild":r=t[3][0],i[0]=null,i[0]=[],i[0].push(r),a=4;break;case"OnPlantAllField":r=t[3][0],h=t[3][3],i[0]=null,i[0]=[],i[0].push(r),i[3]=null,i[3]=[],i[3].push(h),a=5;break;case"OnFeedAllCulture":r=t[3][2],h=t[3][3],i[2]=null,i[2]=[],i[2].push(r),i[3]=null,i[3]=[],i[3].push(h),a=6;break;case"GetAllItemByMac":r=t[3][2],i[2]=null,i[2]=[],i[2].push(r),a=7}if(a>0)for(s=this.m_szCallSz.length-1;s>=0&&(e=this.m_szCallSz[s],e[2]==n);s--){switch(a){case 1:if(!e[3])continue;if(e[3][0]!=i[0])continue;i[3]=i[3].concat(this.m_szCallSz[s][3][3]);break;case 2:if(!e[3])continue;if(e[3][0]!=i[0])continue;i[8]+=e[3][8];break;case 3:if(!e[3])continue;i[0]=i[0].concat(this.m_szCallSz[s][3][0]),i[1]=i[1].concat(this.m_szCallSz[s][3][1]);break;case 4:if(!e[3])continue;if(e[3][2]!=i[2])continue;i[0]=i[0].concat(this.m_szCallSz[s][3][0]);break;case 5:if(!e[3])continue;if(e[3][2]!=i[2])continue;i[0]=i[0].concat(this.m_szCallSz[s][3][0]),i[3]=i[3].concat(this.m_szCallSz[s][3][3]);break;case 6:if(!e[3])continue;if(e[3][0]!=i[0])continue;i[2]=i[2].concat(this.m_szCallSz[s][3][2]),i[3]=i[3].concat(this.m_szCallSz[s][3][3]);break;case 7:if(!e[3])continue;if(e[3][0]!=i[0])continue;i[2]=i[2].concat(this.m_szCallSz[s][3][2])}this.m_szCallSz[s][2]="",this.m_szCallSz[s][3]="NIL";var o=this.m_szCallSz[s][0],l=t[0];this.m_szCallHd[l]=ArrOp.SzLink(this.m_szCallHd[o],this.m_szCallHd[l]),this.m_szCallHd[o]=null}return t[3]=i,t},i.CallSvr=function(t,e,i){Log1.info("[CallSvr]",t,PackCoder.ArrToPack(e));var n=[this.m_szData.clnopver,gSys.GetCurSecAdj(),t,e];this.m_szCallHd[this.m_szData.clnopver]=[i],n=this.SubCallFun(n),this.m_szCallSz.push(n),this.m_szData.clnopver++,this.FlushCmdQueue()},i.CallSvrRet=function(t,e,i,n,s,a){var r=this;void 0===n&&(n=15e3),void 0===s&&(s=!0),void 0===a&&(a=0),this.FlushCmdQueue(Handler.create(this,function(s){if(!s)return void(i&&i.runWith(null));var a=[r.m_nNetKey,gSys.GetCurSecAdj(),t,e];csvr.call(r.m_sSvrName,"OnClnRet",a,new Handler(this,r.onCallSvrRetOk,[i]),new Handler(this,r.onCallSvrRetFail,[i]),n)}))},i.onCallSvrRetOk=function(t,e){Log1.info("[onCallSvrRetOk]: ",e),t&&t.runWith([e])},i.onCallSvrRetFail=function(t,e){if(Log1.info("[onCallSvrRetFail]: ",e),t&&t.runWith([e]),csvr.retflag!=ErrorDef.FUN_OKVAL){switch(csvr.retflag){case ErrorDef.FUN_ERR_OUTTIME:case ErrorDef.FUN_ERR_NOTLINK:case ErrorDef.FUN_ERR_NOTFINDSVR:case ErrorDef.FUN_NOTFIND:case ErrorDef.FUN_RUNERR:this.OnSvrLost();case ErrorDef.FUN_ABORT:}this.OnReLink()}},i.SetMyNick=function(t){var e=t.length;return 1>e||e>16?!1:(this.m_szData.nick=t,this.CallSvrRet("SetMyNick",t,null,15e3,!1),t!="guest"+this.GetUID()&&this.LogGameTag("set_nick",1),!0)},i.OnGateLinkChged=function(t){t||this.OnSvrLost()},i.OnSvrLost=function(){Log1.info("[---OnSvrLost---]"),this.m_nNetLinkOk=0,this.m_nNetKey=0,this.m_nLastGetTime=0,this.ClearReCheckStruct()},i.AutoCheckLink=function(){var t=gSys.GetSecAfter(2013);if(this.m_nNetLinkOk){if(this.m_nLastGetTime+50>t)return;gSys.setErr(0),this.OnSvrLost()}return void GameMain._ins.joinSocket()},i.onAutoCheckLinkOk=function(t){Log1.debug(1,"[onAutoCheckLinkOk]",t),this.m_nNetLinkOk||(this.m_sSvrName=t.seeksvrname,this.m_nNetKey=t.netkey,WSocket.me.onLinkuser(),this.linkuser(this.m_nBindFlag,1))},i.onAutoCheckLinkFail=function(t){return Log1.debug(1,"[onAutoCheckLinkFail]",t),csvr.retflag!=ErrorDef.FUN_OKVAL?(csvr.retflag>0,void csvr.BeginLink()):void 0},i.OnReLink=function(){this.m_nNetLinkOk=0,Laya.timer.clear(this,this._SendCallTick)},i.SvrDown=function(t,e){Log1.info("[net SvrDown]",t,e),gSys.setErr(3),this.OnSvrLost()},i.IsOnline=function(t,e){gSys.SetSecAdj(e),this.m_nNetLinkOk&&(this.m_nLastGetTime=gSys.GetSecAfter(2013))},i.gm_Ban=function(){},i.GetSvrLocalTime=function(t){void 0===t&&(t=0);var e,i=gSys.GetSecAfter(2013)+28800,n=gSys.GetCurSecAdj()-i;return e=TimeCalStyle.GetDateBySec(gSys.GetSecAfter(2013)+n,8)},i.OnSystemMsg=function(t){gSys.GameMsg(t,!0,"系统提示")},i.OnSvrWillClose=function(t){Laya.timer.clear(this,this.AutoCheckLink),Laya.timer.clear(this,this._SendCallTick),this._SendCallTick(),csvr.Send(this,this.m_sSvrName,"offline",this.m_nNetKey),this.m_nNetKey=0,gSys.GameMsg("游戏服务将关闭维护\r\n"+t,!1,"系统提示")},i.OnOtherLogin=function(t,e){var i={title:"系统提示",content:"你的账号在其他设备上登陆了\r\n"+t+"\r\n登陆IP:"+this.GetIpString(e)};MessageBox.show(22,i,null,null,null),NetPt.getInstance().OnOtherLogin(),Laya.timer.clear(this,this.AutoCheckLink)},i.GetIpString=function(t){return(255&t)+"."+(t>>>8&255)+"."+(t>>>16&255)+"."+(t>>>24&255)},i.GetLogKey=function(){return this.m_nLogKey},i.Init=function(t){this.m_sSvrName=t[0],this.m_nUid=t[1],this.m_nNetKey=t[2],this.m_nLogKey=t[8];var e=t[6];this.m_nLogTimes=t[7],PubDef.m_nUserSvrNo=t[9],PubDef.m_nFriendSvrNo=t[10],GLeadManager.Me(),this.linkuser(e)},i.linkuser=function(t,e){void 0===e&&(e=0),this.linkuser_sz=this.m_szCallSz,this.m_szCallSz=null,this.m_szCallSz=[],this.linkuser_clnsz=[];this.TRYRELINK()},i.TRYRELINK=function(){var t=new Handler(this,this.onLinkuserOk),e=new Handler(this,this.onLinkuserFail);csvr.call(this.m_sSvrName,"linkuser",[this.m_nUid,this.m_nNetKey,this.linkuser_sz,this.linkuser_clnsz],t,e,1)},i.proUserData=function(){this.userData[0];this.m_nSysSec=this.userData[1],this.m_nDiyBuildNum=this.userData[2],this.m_nDiyBuildEvalue=this.userData[3];this.userData[4];this.OnGetAllRankData(this.userData[5]),gSys.SetSecAdj(this.userData[1]-gSys.GetCurSecInt()),this.m_nNetLinkOk=1,this.m_nSending=0,DataTable.initSelfUser(WSocket.m_userData),DataTable.m_iSelfUser.resetSvr(WSocket.logdata.seeksvrname,WSocket.logdata.netkey),this.InitClnData(),this.ClearReCheckStruct(),this.InitBoxData(),this.InitMakeCloud(),this.CheckShopNewNum(),this.ClearAccData(),this.RecalMyBuildEvalue(),this.Emit("archchged",null),this.m_nLastGetTime=gSys.GetSecAfter(2013),Laya.timer.loop(1e3,this,this._SendCallTick,null,!0),Laya.timer.loop(5e3,this,this.AutoCheckLink,null,!0),this.m_nOnLineSec=gSys.GetCurSecAdj(),this.CheckNpcCome(),gSys.SetSignal("leadbeginsig"),SignalMr.Me().on("closelvupdlg",this,this.onCloselvupdlg),this.onCloselvupdlg();var t={};t.ext={},t.ext.dec="处理LinkUser信息",t.ext.act=2.4,StatManager.getInstance().send(t),this.userData=null,GMapView.m_bEnterMap&&GameMain._ins.GmView.createHomeMapView(!0)},i.onLinkuserOk=function(t){WSocket.m_userData.parseData(t);var e={};e.ext={},e.ext.dec="LinkUserOK,进入游戏",e.ext.act=1.5,StatManager.getInstance().send(e),this.userData=t,DataTable.m_bInit?this.proUserData():DataTable.linkHandler=Handler.create(this,this.proUserData)},i.onCloselvupdlg=function(){this.GetLevel()>=6&&SignalMr.Me().off("closelvupdlg",this,this.onCloselvupdlg)},i.InitBoxData=function(){var t;return t=ArrOp.GetStrVal("myboxdata",this.m_szData.nameddata),t&&4==t.length?(this.m_szLastTime[0]=t[0],this.m_szCheckNum[0]=t[1],this.m_szLastTime[1]=t[2],void(this.m_szCheckNum[1]=t[3])):(this.m_szLastTime[0]=0,this.m_szLastTime[1]=0,this.m_szCheckNum[0]=0,void(this.m_szCheckNum[1]=0))},i.GetBoxItem=function(t,e){var i=this;return this.CallSvrRet("GetBoxRandItem",t,Handler.create(this,svrback=function(n){if(n&&4==n.length){var s=i.m_szLastTime[t],a=i.m_szCheckNum[t],r=gSys.GetCurSecAdj();3600>r-s?a++:(s=r,a=1),i.m_szLastTime[t]=s,i.m_szCheckNum[t]=a,e&&e.runWith([n])}})),null},i.OnGetBoxItemByDia=function(t,e,i){var n=this,s=DataTable.m_iBoxTab.GetItemNum(t,0);switch(t){case 1:s=this.GetDiaExchgMoney(s)}var a=[];return a.push([t,s]),a.push([26,-1]),this.CheckMakeItemSz(a,1,0,Handler.create(this,sucBoxItem=function(){var s=new StringRef;return n.ChgItemSz(a,s,OPEnum.OP_DK_ZS_BX,e,1,0,0,"","chggift")?(n.CallSvr("OnGetBoxItemByDia",[t]),t>=5e3&&n.AddEvalue(t),GMapView.m_cloudMgr.delGift(0),i&&i.run(),void n.LogGameTag("get_打开收费宝箱次数",1)):void gSys.Err("OnGetBoxItemByDia ChgItemSz err="+s)}))?a:null},i.AddBoxGiftItem=function(t,e,i,n,s){var a=this,r=DataTable.m_iBoxTab.GetItemNum(t,1);switch(t){case 1:r=this.GetDiaExchgMoney(r)}var h=[];return h.push([t,r]),this.CheckMakeItemSz(h,1,0,Handler.create(this,sucBGItem=function(){var e=new StringRef;return a.ChgItemSz(h,e,OPEnum.OP_DK_MF_BX,[i,n],1)?(a.CallSvr("OnGetBoxItem",[t]),t>=5e3&&a.AddEvalue(t),GMapView.m_cloudMgr.delGift(1),s&&s.run(),void a.LogGameTag("get_打开免费宝箱次数",1)):void gSys.Err("AddBoxGiftItem ChgItemSz err="+e.ustr)}))?1:0},i.CheckCreateBox=function(t){var e=MathUtil1.rand(100);if(e>60)return 0;var i=gSys.GetCurSecAdj();
if(i-this.m_szLastTime[t]<3600){if(t&&this.m_szCheckNum[t]>=2)return 0;if(!t&&this.m_szCheckNum[t]>=10)return 0}return 1},i.InitMakeCloud=function(){var t;t=ArrOp.GetStrVal("raincloud",this.m_szData.nameddata),t&&2==t.length?this.m_nRainClouldLeft=t[1]:this.m_nRainClouldLeft=20},i.MakeRainClould=function(){return this.m_nRainClouldLeft<1?0:(this.m_nRainClouldLeft--,1)},i.ResetRainClould=function(t){this.m_nRainClouldLeft=t},i.OnSyetemClose=function(){this.m_nNetKey>0&&(this.m_nNetKey=0)},i.onLinkuserFail=function(t){if(csvr.retflag!=ErrorDef.FUN_OKVAL){if(this.linkuser_sz.length>0&&(this.m_szCallSz.length>0&&(this.linkuser_sz=this.linkuser_sz.concat(this.m_szCallSz)),this.m_szCallSz=this.linkuser_sz),this.linkuser_trytimes++,this.linkuser_trytimes<5)return void this.TRYRELINK();Log1.info("@网络断开了，请重新登录")}},i.InitClnData=function(){this.m_nShowMoney=this.m_szData.money,this.m_nShowDiamond=this.m_szData.diamond,this.m_nShowShell=this.m_szData.shell,this.m_nShowMedal=this.m_szData.medal;var t=this.GetLightData();this.m_nShowLight=t[0],this.GetLastWorldRankList(),this.LoadToolLogChg()},i.CheckSysNotiTime=function(t){var e;e=DateOp.GetLocalTime(e),e=DateOp.AdjDateSec(t,e),e.getHours()>=0&&e.getHours()<8&&(t+=3600*(8-e.getHours())),e.getHours()>=22&&(t+=3600*(32-e.getHours())),e=DateOp.GetLocalTime(),e=DateOp.AdjDateSec(t,e)},i.ReceiveCurOLGift=function(t,e){var i=this,n=this.GetCurOLGift();if(!n)return void this.CallSvrRet("ReceiveCurOLGift",[null,null]);var s=0,a=this.GetCurOLGiftSec();if(!(a>0)){var r=DataTable.m_iOnlineGiftTab.GetOnlineGift(n),h=r[2];h||(h=[]);var o,l,u=[];for(s=0;s<r[3].length;s++)if(StringOp.Compare(r[3][s][0],"活动物品")){if(u.push(null),!this.IsActivDay("2016-10-23 00:00:00","2015-12-06 23:59:59"))continue;for(var c=SysID.GetZXLBHDWP(),_=0;_<c.length;_++)c[_]=ArrOp.SzLink(c[_],r[3][s][1]);c=ArrOp.DelSz(0,c),h=ArrOp.SzLink(h,c)}else o=DataTable.m_iItemTab.GetItemVarByKind(r[3][s][0],this.m_nLevel),u.push(o[Math.floor(Math.random()*o.length)]),h.push([u[s],r[3][s][1]]);l=h.concat();var m=0;if(this.IsActivDay("2016-10-23 00:00:00","2016-10-25 23:59:59")&&this.IsVip())for(m=1,s=0;s<h.length;s++)h[s][1]*=Math.max(1,2);u.push(0),this.CheckMakeItemSz(h,1,0,Handler.create(this,function(){i.CallSvrRet("ReceiveCurOLGift",[u,h],Handler.create(this,i.onReceiveCurOLGiftBack,[n,l,m,t,e]))}))}},i.onReceiveCurOLGiftBack=function(t,e,i,n,s,a){var r=a;1==r&&(this.CheckOLGift(t+1),s.runWith([e]),gSys.WaitSignal(Handler.create(this,this.chggiftSignalBack,[e,i]),"chggift"))},i.chggiftSignalBack=function(t,e){var i=new StringRef;if(!this.ChgItemSz(t,i,OPEnum.OP_ZX_LB,[Laya.stage.mouseX,Laya.stage.mouseY],1))return void gSys.Err("Add Item ChgItemSz err="+i);if(e){var n=0;for(n=1;2>n;n++)Laya.timer.once(400*n,this,this.OLGiftVipItem,[t])}},i.OLGiftVipItem=function(t){var e=new StringRef;return this.ChgItemSz(t,e,OPEnum.OP_ZX_LB,null,1)?void 0:void gSys.Err("Add Item ChgItemSz err="+e)},i.CheckArch=function(t,e,i){void 0===i&&(i=1),this.CallSvr("CheckArch",[t,e,i])},i.CheckAchFinish=function(t,e){if(void 0===e&&(e=1),1>e)return gSys.Err("CheckAchFinish:  level err level="+e),0;Log1.debug(1,"[CheckAchFinish] ",t,e);var i=DataTable.m_iAchievementTab.Get(t);if(!i)return 0;var n=i[5];if(e>n.length)return 0;var s=this.GetAchvTagNum(i[4]);return n[e-1][0]<=s?1:0},i.CountNewArch=function(){for(var t,e,i,n=0,s=0,a=DataTable.m_iAchievementTab.GetAll(),r=0;r<a.length;r++)if(i=a[r],!(i[2].length<1)){e=this.GetAchvData(i[0]),n=this.GetAchvTagNum(i[4]),t=i[5];for(var h=0;h<t.length;h++)2!=e[h]&&t[h][0]<=n&&s++}return Log1.debug(1,"[CountNewArch]",s),s},i.GetArchPoint=function(){for(var t,e,i=0,n=0,s=DataTable.m_iAchievementTab.GetAll(),a=0;a<s.length;a++)if(e=s[a],!(e[2].length<1)){i=this.GetAchvTagNum(e[4]),t=e[5];for(var r=0;r<t.length;r++)t[r][0]<=i&&(n+=t[r][3])}return n},i.GetArchReward=function(t,e,i){var n=this;if(null!=this.m_szData.achievement&&!(1>t||0>e||e>4)){var s=this.GetAchvData(t);if(2!=s[e]){var a=DataTable.m_iAchievementTab.Get(t);if(null!=a){var r=a[5][e],h=r[0],o=this.GetAchvTagNum(a[4]);if(!(h>o)){var l=r[2],u=r[1],c=(r[3],[]);c.push([2,l]),c.push([4,u]),this.CheckMakeItemSz(c,0,0,new Handler(this,function(){var s=new StringRef;n.ChgItemSz(c,s,OPEnum.OP_CJ_JL,i)&&(n.CallSvr("GetArchReward",[t,e]),n.SetAchvData(t,e),n.m_pRefAchvTask||n.RefAchv())}))}}}}},i.ClnLogGameTag=function(t,e,i){void 0===i&&(i=1),this.CallSvr("ClnLogGameTag",[t,e,i]),this.LogGameTag(t,e,i)},i.Sign=function(t,e){var i=this;if(void 0===e&&(e=0),t!=this.GetCurSignDay(0)){if(0==e)return 0}else e=0;if(this.GetSignData(t,0))return 0;var n=[],s=[];if(e){var a=DataTable.m_iSignRewardTab.GetCost(t);n.push([2,-a,OrdinarySign.Me().GetRewardPos(t)])}s.push(t),n.push(this.GetSignReward(t,0)),n[n.length-1].push(OrdinarySign.Me().GetRewardPos(t,1));var r=DataTable.m_iSignRewardTab.GetVip(t);r<=this.GetVipLevel()&&r&&(n.push(this.GetSignReward(t,0)),n[n.length-1].push(OrdinarySign.Me().GetRewardPos(t,1)));var h=0,o=1;for(h=0;7>h;h++)this.GetSignData(h,0)&&o++;var l=0;switch(o){case 2:l=7;break;case 3:l=8;break;case 5:l=9;break;case 7:l=10}l&&(s.push(l),n.push(this.GetSignReward(l,0)),n[n.length-1].push(OrdinarySign.Me().GetRewardPos(l))),(this.GetSignData(11,0)+1)%30||(s.push(11),n.push(this.GetSignReward(11,0)),n[n.length-1].push(OrdinarySign.Me().GetRewardPos(11)));var u=n.concat();return this.CheckMakeItemSz(n,1,0,new Handler(this,function(){var a=new StringRef;if(!i.ChgItemSz(u,a,OPEnum.OP_QD_JL,null,1))return gSys.Err("Add Item ChgItemSz err="+a),this.isBoo=!1,0;for(i.SetSignData(s,0),i.CallSvr("Sign",[t,e,n]),h=0;h<n.length;h++)SysID.IsDTZSJZID(n[h][0])&&i.AddEvalue(n[h][0]);return OrdinarySign.Me().SignRewardFly(s),1})),-1},i.SuperSign=function(t,e){var i=this,n=this.GetCurSignDay(1);if(this.GetSignMoney(n)<DataTable.m_iSignRewardTab.GetNeedMoney(n))return e&&e.runWith(0),0;if(this.GetSignData(n,1))return e&&e.runWith(0),0;var s,a=this.GetSignReward(n,1);return this.CheckMakeItemSz(a,0,0,Handler.create(this,function(){var r=0;for(s=[],r=0;r<a.length;r++){s[r]=[];for(var h=0;a[r]&&h<a[r].length;h++)s[r][h]=a[r][h];s[r].push(t[Math.min(t.length-1,r)])}var o=new StringRef;if(!i.ChgItemSz(s,o,OPEnum.OP_HHQD_JL,null,1))return gSys.Err("Add Item ChgItemSz err="+o),e&&e.runWith(0),0;var l=[];for(l.push(n),i.SetSignData(l,1),i.CallSvr("SuperSign",[n,a]),r=0;r<a.length;r++)SysID.IsDTZSJZID(a[r][0])&&i.AddEvalue(a[r][0]);return i.Emit("activchg",0),e&&e.runWith(1),1}),Handler.create(this,function(){e&&e.runWith(0)})),-1},i.CheckSignData=function(t){void 0===t&&(t=0);var e;e=this.GetSvrLocalTime(),e=new Date(e.getFullYear(),e.getMonth(),e.getDate());var i,n,s,a=0;if(n=ArrOp.InsertSz(2,n,null),i=ArrOp.GetStrVal("mysign",this.m_szData.nameddata),null==i&&(i=[]),i.length<8&&(s=ArrOp.InitSz(8-i.length,null),i=ArrOp.SzLink(i,s)),!this.IsSignCurWeek(0)||t){if(s=DataTable.m_iSignRewardTab.GetCurWeekReward(0),!s||s.length<1)return void gSys.Err("sign data err"+s);a=1,i[0]=null,i[0]=DateOp.string(e),i[1]=ArrOp.InitSz(DataTable.m_iSignRewardTab.GetSignNum(0),0),i[2]=s,("number"!=typeof i[3]||Math.floor(i[3])!=i[3])&&(i[3]=0),n[0]=i[2]}if(!this.IsSignCurWeek(1)||t){if(s=DataTable.m_iSignRewardTab.GetCurWeekReward(1),!s||s.length<1)return void gSys.Err("super sign data err"+s);a=1,i[4]=null,i[4]=DateOp.string(e),i[5]=ArrOp.InitSz(DataTable.m_iSignRewardTab.GetSignNum(1),0),i[6]=s,i[7]=ArrOp.InitSz(DataTable.m_iSignRewardTab.GetSignNum(1),0),n[1]=i[6]}a&&(this.m_szData.nameddata=ArrOp.SetStrVal("mysign",this.m_szData.nameddata,i),this.CallSvr("CheckSignData",[n,t]))},i.OnOrderDataRef=function(t){gSys.SetSignal("orderdataref",t)},i.OnFullOrder=function(){this.m_nFullOrderModi||(this.m_nFullOrderModi=1,this.CallSvrRet("OnFullOrder","NULL",new Handler(this,this.OnFullOrderOk)))},i.OnFullOrderOk=function(t){var e=t;return!e||e.length<1?(GFlyItemIcon.FlyText("补足订单失败","#ff0000"),void(this.m_nFullOrderModi=0)):(this.m_szData.nameddata=ArrOp.SetStrVal("myorder",this.m_szData.nameddata,e),this.OnOrderDataRef(-1),this.m_nFullOrderModi=0,void GMSB_Balloon.Me().m_pTruck.OnLevelChg())},i.OnHandinOrder=function(t,e,i,n){var s=this;if(this.m_nFullOrderModi)return gSys.GameMsg("正在补足订单，请稍后再试"),n&&n.runWith(0),0;var a;if(a=this.GetOrderData(),a.length<9)return gSys.Err("OnHandinOrder order size err: "+a.length),n&&n.runWith(0),0;var r=0;if(r=ArrOp.SzSearch(t,a),0>r||r>=9)return gSys.Err("OnHandinOrder not curent order:  pos="+r),n&&n.runWith(0),0;if(3!=a[r].length)return gSys.Err("OnHandinOrder curorder data size err: size=:"+a[r].length),n&&n.runWith(0),0;var h;if(h=a[r][2],a[r][1]>0){var o=DataTable.m_iUserLevelTab.Get(this.m_nLevel);if(gSys.GetCurSecAdj()-a[r][1]<60*o.o_breaktime)return gSys.Err("OnHandinOrder On Delete CD"),n&&n.runWith(0),0}for(var l=[],u=0;u<h[2].length;u++){if(h[3][u]<1)return gSys.Err("OnHandinOrder 扣除物品数目错误:"+h.itemsz[u]+"="+h[3][u]),n&&n.runWith(0),0;l.push([h[2][u],-h[3][u]])}return this.CheckMakeItemSz(l,0,0,Handler.create(this,function(){var o=new StringRef;return s.ChgItemSz(l,o,OPEnum.OP_DD_TJ,[e,i])?(a.length>9?(a[r]=a[9],a=ArrOp.DelSz(9,a)):a[r]=[0,0,null],s.m_szData.nameddata=ArrOp.SetStrVal("myordertruck",s.m_szData.nameddata,[h[4],h[5]]),s.m_szData.nameddata=ArrOp.SetStrVal("myorder",s.m_szData.nameddata,a),s.CallSvr("OnHandinOrder",[t,l]),0==a[r][0]&&s.OnFullOrder(),s.LogGameTag("气球订单次数",1),n&&n.runWith(1),1):(gSys.Err("OnHandinOrder ChgItemSz "+o),n&&n.runWith(0),0)}),Handler.create(this,function(){n&&n.runWith(0)})),0},i.GetMyTruckReward=function(t,e){var i=this,n=this.GetOrderTruckData();if(!n||2!=n.length)return 0;var s=this.IsActWeekend(0),a=1,r=1;switch(s){case 1:a=2,r=2;break;case 2:a=2;break;case 3:r=2}var h=[];return h.push([1,n[0]*a]),h.push([4,n[1]*r]),this.CheckMakeItemSz(h,0,0,Handler.create(this,function(){var a=new StringRef;return i.ChgItemSz(h,a,OPEnum.OP_DD_SH,[t,e])?(i.m_szData.nameddata=ArrOp.SetStrVal("myordertruck",i.m_szData.nameddata,null),i.CallSvr("GetMyTruckReward",[n,s]),i.LogGameTag("getmoney_order",1),1):(gSys.Err("GetMyTruckReward ChgItemSz "+a),0)})),-1},i.OnDelOrder=function(t){if(this.m_nFullOrderModi)return gSys.GameMsg("正在补足订单，请稍后再试"),0;var e;if(e=this.GetOrderData(),e.length<9)return gSys.Err("OnDelOrder order size err: "+e.length),0;var i=0;return i=ArrOp.SzSearch(t,e),0>i||i>=9?(gSys.Err("OnDelOrder not curent order:  pos="+i),0):3!=e[i].length?(gSys.Err(3,"OnDelOrder curorder data size err: size=:"+e[i].length),0):e[i][1]>0?(gSys.Err(4,"OnDelOrder have been deleted"),0):(e[i]=[0,gSys.GetCurSecAdj(),null],this.m_szData.nameddata=ArrOp.SetStrVal("myorder",this.m_szData.nameddata,e),this.CallSvr("OnDelOrder",t),gSys.SetSignal("orderdataref",-1),1)},i.OnDelCdOver=function(t,e,i){var n=this;if(void 0===i&&(i=0),this.m_nFullOrderModi)return gSys.GameMsg("正在补足订单，请稍后再试"),0;var s;if(s=this.GetOrderData(),0>t||t>=9)return gSys.Err("OnDelCdOver not curent order:  pos="+t),0;if(s[t][1]<=0)return gSys.Err("OnDelCdOver not deleted"),0;if(s.length<=9)return this.OnFullOrder(),0;if(s[t]=s[9],s=ArrOp.DelSz(9,s),e>0){var a=[];return i?a.push([25,-e]):a.push([2,-e]),this.CheckMakeItemSz(a,0,0,Handler.create(this,function(){var r=new StringRef;return n.ChgItemSz(a,r,OPEnum.OP_DD_SC_CD)?(n.m_szData.nameddata=ArrOp.SetStrVal("myorder",n.m_szData.nameddata,s),n.CallSvr("OnDelCdOver",[t,e,i]),n.OnOrderDataRef(t),1):(gSys.Err("OnDelCdOver "+r),this.isBoo=!1,0)}),Handler.create(this,function(){return gSys.Err("OnDelCdOver CheckMakeItemSz err"),0})),-1}return this.m_szData.nameddata=ArrOp.SetStrVal("myorder",this.m_szData.nameddata,s),this.CallSvr("OnDelCdOver",[t,e,i]),this.OnOrderDataRef(t),1},i.OnOrderMaxChg=function(){if(this.m_nFullOrderModi)return gSys.Err("正在补足订单"),0;var t;if(t=this.GetOrderData(),t.length<9)return gSys.Err("OnOrderMaxChg order size err: "+t.length),0;for(var e=0,i=DataTable.m_iUserLevelTab.Get(this.m_nLevel),n=0;n<i[4];n++)if(0==t[n][0]&&!(t[n][1]>0)){if(t.length<=9){e=1;break}t[n]=t[9],t=ArrOp.DelSz(9,t)}return this.m_szData.nameddata=ArrOp.SetStrVal("myorder",this.m_szData.nameddata,t),this.CallSvr("OnOrderMaxChg",i[4]),this.OnFullOrder(),1},i.GetNpcRefreshT=function(){return this.m_nLevel<20?10:20},i.CheckNpcCome=function(){GMapView.m_bEnterMap?this.CheckNpcComeWait():gSys.WaitSignal(Handler.create(this,this.CheckNpcComeWait),"mapready",15e3,0)},i.CheckNpcComeWait=function(){var t=0,e=this.GetSysBuildData(7);if(e&&2==e.length||(e=[0,null]),e[0]){var i=gSys.GetCurSecAdj(),n=i-e[0];t=n>=60*this.GetNpcRefreshT()?0:60*this.GetNpcRefreshT()-n}else t=0;this.SetNpcOrderTimer(t)},i.SetNpcOrderTimer=function(t){return t>0?void Laya.timer.once(1e3*t,this,this.SetNpcOrderTimerWait):void this.SetNpcOrderTimerWait()},i.SetNpcOrderTimerWait=function(){this.RandNpcOrder(),Laya.timer.loop(6e4*this.GetNpcRefreshT(),this,this.RandNpcOrder)},i.RandNpcOrder=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=0);var i=this.GetLeadStep();if(!(31>i&&this.GetLevel()<10)){var n=this.GetSysBuildData(7);n&&2==n.length||(n=[0,null]),this.RNOrder_lastsize=0,n[1]&&(this.RNOrder_lastsize=n[1].length);var s=0;ArrOp.SzSearch(0,n[1]);if(s=this.IsActivDay("2015-11-26 00:00:00","2015-11-29 23:59:59")?3:2,!(this.RNOrder_lastsize>=s)){var a=gSys.GetCurSecAdj();a-n[0]<60*this.GetNpcRefreshT()||this.CallSvrRet("RandNpcOrder",[a,t,e],Handler.create(this,this.RandNpcOrderOk))}}},i.RandNpcOrderOk=function(t){if(!t||t.length<1)return void gSys.Err("RandNpcOrder CallSvrRet err:  "+csvr.retflag+";ret="+t);var e,i=0;e=this.GetSysBuildData(7),e&&e[1]&&(i=e[1].length),e=t,this.SetSysBuildData(7,e);for(var n=i;e[1]&&n<e[1].length;n++)DataTable.m_iNpcManager.AddNpcData(e[1][n]);DataTable.m_iNpcManager.m_szSysData=e},i.OnHandinNpcOrder=function(t,e,i,n){var s=this,a=this.GetSysBuildData(7);if(a&&2==a.length||(a=[0,null]),!a[1]||a[1].length<1)return gSys.Err("HandinNpcOrder no npc"),n&&n.runWith(0),0;var r=0;if(r=ArrOp.SzSearch(t,a[1]),0>r)return gSys.Err("HandinNpcOrder not find orderid"),n&&n.runWith(0),0;if(e&&3==e.length){var h;return h=[[4,5],[1,e[2]],[e[0],-e[1]]],this.CheckMakeItemSz(h,0,0,Handler.create(this,function(){var o=new StringRef;return s.ChgItemSz(h,o,OPEnum.OP_NPC_DD_TJ,i)?(s.LogGameTag("get_NPC出售",1),a[1]=ArrOp.DelSz(r,a[1]),s.SetSysBuildData(7,a),DataTable.m_iNpcManager.m_szSysData=a,s.CallSvr("OnHandinNpcOrder",[t,e,h]),void(n&&n.runWith(1))):(gSys.Err("HandinNpcOrder ChgItemSz err="+o.ustr),void(n&&n.runWith(0)))}),Handler.create(this,function(){n&&n.runWith(0)})),0}return a[1]=ArrOp.DelSz(r,a[1]),this.SetSysBuildData(7,a),DataTable.m_iNpcManager.m_szSysData=a,e||(e="NIL"),this.CallSvr("OnHandinNpcOrder",[t,e,"NIL"]),n&&n.runWith(1),1},i.HandInActOrder=function(t,e,i,n){var s=this,a=this.GetSysBuildData(7);if(a&&2==a.length||(a=[0,null]),!a[1]||a[1].length<1)return gSys.Err("HandinNpcOrder no npc"),n&&n.runWith(0),0;var r=0;if(r=ArrOp.SzSearch(t,a[1]),0>r)return gSys.Err("HandinNpcOrder not find orderid"),n&&n.runWith(0),0;if(i){var h=DataTable.m_iActNpcOrderTab.GetSzItem(a[1][r][2]);return this.CheckMakeItemSz(h,0,0,Handler.create(this,function(){var o=new StringRef;s.ChgItemSz(h,o,OPEnum.OP_NPC_DD_TJ,e,1)||(gSys.Err("HandinNpcOrder ChgItemSz err="+o),n&&n.runWith(0)),s.LogGameTag("get_NPC出售",1),s.Emit("actnpcorderchg",1),s.HandInActOrderStepOver(r,a,t,i,h,n)}),Handler.create(this,function(){n&&n.runWith(0)})),0}return this.Emit("actnpcorderchg",0),this.HandInActOrderStepOver(r,a,t,i,h,n),1},i.HandInActOrderStepOver=function(t,e,i,n,s,a){e[1]=ArrOp.DelSz(t,e[1]),this.SetSysBuildData(7,e),this.CallSvr("HandInActOrder",[i,n,s]);for(var r=0;r<s.length;r++)SysID.IsDTZSJZID(s[r][0])&&this.AddEvalue(s[r][0]);a&&a.runWith(1)},i.OnFinishBox=function(t,e,i,n){var s=this;this.m_nNetLinkOk||(gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),n&&n.runWith(0));var a=this.GetSysBuildData(6);null==a&&(gSys.Err("get 码头ID data nill"),n&&n.runWith(0)),a||(gSys.Err("get 码头ID data not 海运数据"+a),n&&n.runWith(0)),(0>t||t>=a[10].length)&&(gSys.Err("get 码头ID data box no err:"+t+" "+a[10]),n&&n.runWith(0));var r=1;switch(e){case 1:case 2:r=2}var h=a[10][t];0!=(1&h[0])&&n&&n.runWith(0);var o=h[2],l=(this.GetItemNum(o),[]);l=[[1,Math.floor(h[5]*r)],[4,h[4]],[o,-h[3]]],this.CheckMakeItemSz(l,0,0,Handler.create(this,function(){1==s.m_szBoatHelpBox[t]&&(gSys.GameMsg("该物品已经被装载"),n&&n.runWith(0));var r=new StringRef;s.ChgItemSz(l,r,OPEnum.OP_HYX_WC,i,0)||(gSys.GameMsg(r.ustr,!1,"无法操作"),n&&n.runWith(0)),h[0]=1|h[0],2&h[0]&&(h[1]=DataTable.m_iSelfUser.GetUID()),a[10][t]=h,s.SetSysBuildData(6,a),s.CallSvr("FinishBoatBox",[t,e,l]),s.LogGameTag("get_1_飞艇",h[5]),n&&n.runWith(1)}),Handler.create(this,function(){n&&n.runWith(0)}))},i.OnFinishOtherBox=function(t,e,i,n,s){var a=this;this.m_nNetLinkOk||(gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),s&&s.runWith(0)),0!=(1&e[0])&&s&&s.runWith(0);var r=e[2],h=(this.GetItemNum(r),[]);h=[[1,e[5]*(1+i)],[4,e[4]],[5,e[6]],[r,-e[3]]],this.CheckMakeItemSz(h,0,0,Handler.create(this,function(){var e=new StringRef;if(!a.ChgItemSz(h,e,OPEnum.OP_HYX_WC_TR,n,0,1))return gSys.GameMsg(e.ustr,!1,"无法操作"),void(s&&s.runWith(0));var r;r=[DataTable.m_iOtherUser.GetUID(),DataTable.m_iOtherUser.GetSvrName(),DataTable.m_iOtherUser.GetNick(),t,i,h],a.CallSvrRet("HelpOtherBox",r,new Handler(this,a.onHelpOtherBoxBack,[h,e,n,s]))}),Handler.create(this,function(){s&&s.runWith(0)}))},i.onHelpOtherBoxBack=function(t,e,i,n,s){var a=s;return null==a?(gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),void(n&&n.runWith(0))):1!=a?(gSys.GameMsg("已经被其他人抢先帮助啦",!1,"提示"),void(n&&n.runWith(0))):(this.ChgItemSz(t,e,OPEnum.OP_HYX_WC_TR,i,0),this.LogGameTag("帮忙航运订单",1),this.LogGameTag("get_帮助次数",1),void(n&&n.runWith(1)))},i.OnAskHelpBox=function(t){var e=this.GetSysBuildData(6);if(null==e)return 0;if(!e)return 0;if(0>t||t>=e[10].length)return 0;var i=e[10][t];return 0!=(1&i[0])||0!=(2&i[0])?0:(i[0]=2|i[0],e[10][t]=i,e[8]=1|e[8],this.SetSysBuildData(6,e),this.CallSvr("OnAskHelpBox",[t]),1)},i.CompleteSysHelp=function(){var t=this.GetSysBuildData(6);null!=t&&(t[8]=2|t[8],this.SetSysBuildData(6,t),this.CallSvr("CompleteSysHelp",null))},i.OnSysFinishBox=function(t,e){if(void 0===e&&(e=1),!this.m_nNetLinkOk)return gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),0;var i=this.GetSysBuildData(6);if(null==i)return gSys.Err("get 码头ID data nill"),0;if(!i)return gSys.Err("get 码头ID data not 海运数据"+i),0;if(0>t||t>=i[10].length)return gSys.Err("get 码头ID data box no err:"+t+" "+i[10]),0;var n=i[10][t];return 0!=(1&n[0])?0:0==(2&n[0])?0:(this.CallSvrRet("OnSysFinishBox",[t,e,i]),1)},i.OnSysFinishBoxBack=function(t,e,i,n,s){var a=t;1>a||(s[0]=1|s[0],s[1]=i,n[10][e]=s,this.SetSysBuildData(6,n))},i.GetBoatExData=function(t){var e,i=0;if(e=ArrOp.GetStrVal("wharflvex",this.m_szData.nameddata)){if(e[6]<7){i=gSys.GetCurSecAdj();var n=Math.floor(i/86400)-Math.floor(e[7]/86400);if(n>0)return void this.CallSvrRet("AutoAddBoatTimes",[i,n],Handler.create(this,this.AutoAddBoatTimesBack,[t,e,i,n]))}}else{i=gSys.GetCurSecAdj();var s;s=BoatExData.Create(),s[6]=7,s[7]=i,e=s}t&&t.runWith([e])},i.AutoAddBoatTimesBack=function(t,e,i,n,s){s>0&&(e[6]+=n,e[6]>7&&(e[6]=7),e[7]=i,this.SetBoatExData(e)),t&&t.runWith([e])},i.SetBoatExData=function(t){this.m_szData.nameddata=ArrOp.SetStrVal("wharflvex",this.m_szData.nameddata,t)},i.GetWharfLv=function(t){this.GetBoatExData(Handler.create(this,this.GetWharfLvReturn,[t]))},i.GetWharfLvReturn=function(t,e){t&&t.runWith(e[0])},i.GetBoatLv=function(t){this.GetBoatExData(Handler.create(this,this.GetBoatLvReturn,[t]))},i.GetBoatLvReturn=function(t,e){return e[2]<1?void(t&&t.runWith(0)):e[2]<=3?void(t&&t.runWith(1)):void(t&&t.runWith(2))},i.GetCurTerminiName=function(t){this.GetBoatExData(Handler.create(this,this.GetCurTerminiNameReturn,[t]))},i.GetCurTerminiNameReturn=function(t,e){var i=DataTable.m_iBoatExTab.Get(e[2]);return null==i?(t&&t.runWith(""),""):(t&&t.runWith(i[1]),i[1])},i.GetBoatExLvSz=function(t){this.GetBoatExData(Handler.create(this,this.GetBoatExLvSzReturn,[t]))},i.GetBoatExLvSzReturn=function(t,e){var i=0;return e?(e[2]>0&&(i=e[2]<=3?1:2),void(t&&t.runWith([[e[0],i]]))):void(t&&t.runWith([null]))},i.GetBoatNextTermini=function(t){this.GetBoatExData(Handler.create(this,this.GetBoatNextTerminiReturn,[t]))},i.GetBoatNextTerminiReturn=function(t,e){t&&t.runWith(e[3])},i.CheckCanBoatLv=function(t,e){this.GetBoatExData(Handler.create(this,this.CheckCanBoatLvReturn,[t,e]))},i.CheckCanBoatLvReturn=function(t,e,i){var n=0,s=0;i[4]&&(s=i[4].length);for(var a=1;s>a&&i[4][a];a++)n=a;return t>n+1?(gSys.GameMsg("当前还不能挑战这个地点的订单"),void(e&&e.runWith(0))):void(e&&e.runWith(1))},i.GetAllTerminStarNum=function(t){this.GetBoatExData(Handler.create(this,this.GetAllTerminStarNumReturn,[t]))},i.GetAllTerminStarNumReturn=function(t,e){var i=0,n=0;e[4]&&(n=e[4].length);for(var s=1;n>s;s++)i+=e[4][s];t&&t.runWith(i)},i.FinishCurTermini=function(t,e,i){this.GetBoatExData(Handler.create(this,this.FinishCurTerminiOnGetData,[t,e,i]))},i.FinishCurTerminiOnGetData=function(t,e,i,n){if(!n)return void(i&&i.runWith(0));var s=0;if(e)n[5]=[];else if(s=n[2],s>0){var a=0;if(n[4]&&(a=[4].length),s>=a)for(var r=0;s>=r;r++){var h=0;n[4]&&(h=n[4].length),h>r||(n[4]||(n[4]=[]),n[4].push(0))}t>n[4][s]&&(n[4][s]=t),n[5]=[s,0]}else n[5]=[];return n[3]>0&&n[6]--,n[2]=n[3],n[6]<0&&(n[6]=0,n[2]=0),this.SetBoatExData(n),null==n[5]?void(i&&i.runWith(0)):void this.GetAllTerminStarNum(Handler.create(this,this.FinishCurTerminiReturn,[i,n]))},i.FinishCurTerminiReturn=function(t,e,i){i>0&&this.LogGameTag("get_航运挑战总星星",i,4),this.LogGameTag("get_航运挑战次数",1),t&&t.runWith(e[5][0])},i.OnBuyChallengetime=function(t){var e=this,i=[];i.push([2,-50]),this.CheckMakeItemSz(i,0,0,Handler.create(this,function(){var n=new StringRef;return e.ChgItemSz(i,n,OPEnum.OP_GM_TZ_CS)?void e.GetBoatExData(Handler.create(this,e.OnBuyChallengetimeReturn,[t,i])):void(t&&t.runWith(0))}),Handler.create(this,this.OnBuyChallengetimeReturnFail))},i.OnBuyChallengetimeReturnFail=function(t){t&&t.runWith(0)},i.OnBuyChallengetimeReturn=function(t,e,i){i[6]+=7,this.SetBoatExData(i),this.CallSvr("OnBuyChallengetime",e),t&&t.runWith(1)},i.SelectNextTermini=function(t,e){this.CheckCanBoatLv(t,Handler.create(this,this.SelectNextTerminiReturn,[e,t]))},i.SelectNextTerminiReturn=function(t,e,i){i||t&&t.runWith(0),this.GetBoatExData(Handler.create(this,this.SelectNextTerminiReturnN,[t,e,i]))},i.SelectNextTerminiReturnN=function(t,e,i,n){return e>0&&n[6]<1?(gSys.GameMsg("您的挑战次数已用完,每天会增加一次挑战机会"),void(t&&t.runWith(0))):(n[3]=e,this.SetBoatExData(n),this.CallSvr("SelectNextTermini",[e]),void(t&&t.runWith(1)))},i.OnChgWharfVisu=function(t,e,i,n){this.GetBoatExData(Handler.create(this,this.OnChgWharfVisuReturn,[t,e,i,n]))},i.OnChgWharfVisuReturn=function(t,e,i,n,s){var a=this,r=[];if(t>0){var h=-1;if(s[1]&&(h=s[1].indexOf(t)),0>h){if(!e)return gSys.GameMsg("您还没有购买该码头"),void(n&&n.runWith(0));var o=0,l=0;s[4]&&(l=s[4].length);for(var u=0;l>u;u++)o+=s[4][u];var c=DataTable.m_iWharfVisuTab.Get(t);return null==c?(gSys.GameMsg("取码头数据错误"),void(n&&n.runWith(0))):o<c[1]?(gSys.GameMsg("您的星星不足"),void(n&&n.runWith(0))):(r.push([c[2],-c[3]]),void this.CheckMakeItemSz(r,0,0,Handler.create(this,function(){var h=new StringRef;return a.ChgItemSz(r,h,OPEnum.OP_MT_GM,i)?(s[1]||(s[1]=[]),s[1].push(t),s[0]=t,a.SetBoatExData(s),a.CallSvr("OnChgWharfVisu",[t,e,r]),void(n&&n.runWith(1))):(gSys.Err("OnChgWharfVisu ChgItemSz err="+h),void(n&&n.runWith(0)))}),Handler.create(this,function(){n&&n.runWith(0)})))}e=0}s[0]=t,this.SetBoatExData(s),this.CallSvr("OnChgWharfVisu",[t,e,r]),n&&n.runWith(1)},i.OnGetBoatBox=function(t,e,i){this.GetBoatExData(Handler.create(this,this.OnGetBoatBoxReturn,[t,e,i]))},i.OnGetBoatBoxReturn=function(t,e,i,n){if(n[5].length<1)return gSys.GameMsg("没有可领取的奖励"),void(i&&i.runWith([null]));var s=n[5][0],a=n[5][1],r=0,h=DataTable.m_iSelfUser.GetHaveItemNum(2);switch(t){case 0:r=1;break;case 1:if(r=2,15>h)return gSys.GameMsg("钻石不够不能翻牌"),void(i&&i.runWith([null]));break;case 2:if(r=4,30>h)return gSys.GameMsg("钻石不够不能翻牌"),void(i&&i.runWith([null]));break;default:return gSys.GameMsg("这个位置是空的哦"),void(i&&i.runWith([null]))}if((a|r)==a)return gSys.GameMsg("奖品已领取"),void(i&&i.runWith([null]));var o=DataTable.m_iBoatExTab.Get(s);if(null==o)return gSys.GameMsg("取宝箱数据错误"),void(i&&i.runWith([null]));if(!o[6]||o[6].length<1)return gSys.GameMsg("这一关没有可领取的奖励"),void(i&&i.runWith([null]));var l=Math.floor(1+2*Math.random());this.CallSvrRet("OnGetBoatBoxItem",[t,l,-1],Handler.create(this,this.OnGetBoatBoxItemBack,[o,e,n,a,r,t,l,i]))},i.OnGetBoatBoxItemBack=function(t,e,i,n,s,a,r,h,o){var l=this;if(!o||4!=o.length)return gSys.GameMsg("领取奖励错误"),h&&h.runWith([null]),null;var u=o[2],c=0;if(t[6]&&(c=t[6].length),0>u||u>=c)return gSys.GameMsg("领取奖励错误"),h&&h.runWith([null]),null;var _=0,m=0;_=t[6][u][0],m=t[6][u][1];var d;d=o[1],this.CheckMakeItemSz(d,1,0,Handler.create(this,function(){l.CallSvrRet("OnFinishBoatBox",[a,r,u,d],Handler.create(this,l.onFinishBoatBoxBack,[d,i,e,n,s,r,_,m,h]))}),Handler.create(this,function(){h&&h.runWith([null])}))},i.onFinishBoatBoxBack=function(t,e,i,n,s,a,r,h,o,l){if("number"!=typeof l||Math.floor(l)!=l)return gSys.GameMsg("领取奖励错误"),o&&o.runWith([null]),null;var u=new StringRef;return this.ChgItemSz(t,u,OPEnum.OP_HY_BX,i,1)?(e[5][1]=n|s,this.SetBoatExData(e),o&&o.runWith([[r,h,a]]),[r,h,a]):(gSys.Err("OnGetBoatBox ChgItemSz err="+u),o&&o.runWith([null]),null)},i.SetLeadStep=function(t){this.m_szData.nameddata=ArrOp.SetStrVal("leadstep",this.m_szData.nameddata,[t]),this.CallSvr("SetLeadStep",[t]),31==t&&this.RandNpcOrder(0,1),this.RefUnfinish()},i.GetBranchLead=function(){return this.m_szBranchLead},i.AddBranchLead=function(t){this.m_szBranchLead.push(t),this.CallSvr("AddBranchLead",[t])},i.IsBranchStepOver=function(t){return ArrOp.SzSearch(t,this.m_szBranchLead)>=0},i.InitQuestData=function(){this.LoadUnfinish(),this.OnChgOldQuestData(),this.RefUnfinish(),this.CheckOtherQuest(),this.CheckActQuest()},i.CheckQuestState=function(){if(!this.m_szQuest)return null;var t=0,e=0,i=0,n=0;this.m_szQuest&&this.m_szQuest.length>0&&(n=1,i=1);var s,a=this.m_szQuest;for(t=0;t<a.length;t++)if(s=this.GetQuestData(a[t][0]),s&&1!=s[2]){n=0;break}a=this.m_szDailyQuest;var r=0;for(a&&(r=a.length),t=0;r>t;t++)if(a[t]&&(2&i||(i+=2),s=this.GetQuestData(a[t][0]),s&&1==s[2]&&(2&n||(n+=2),!QuestCompleteAni.GetIsPlay(a[t][0])))){e=a[t][0],QuestCompleteAni.SetIsPlay(a[t][0]);break}return[n,i,e]},i.CheckActIapState=function(t){var e=DataTable.m_iActivityTab.GetActivityByID(t);if(!e||!e.length)return 0;for(var i,n,s=e[14],a=0;a<s.length;a++){if(n=DataTable.m_iQuestTab.GetQuestByID(s[a][0]),i=this.GetQuestData(s[a][0]),!i||i.length<1)return 0;if(i[4]<n[17])return 1}return 0},i.GetInviteQuest=function(){for(var t,e=DataTable.m_iActivityTab.GetActSzQuest(154),i=[],n=0;n<e.length;n++)t=this.GetQuestData(e[n][0]),i.push(t);return i},i.IsBuyInvest=function(){return this.GetGiftPickRec(3)||this.GetGiftPickRec(4)?1:0},i.CheckInvestQuest=function(t){switch(t){case 148:if(!this.GetGiftPickRec(3))return 0;break;case 149:if(!this.GetGiftPickRec(4))return 0;break;default:return 1}for(var e,i=DataTable.m_iActivityTab.GetActSzQuest(t),n=0,s=0;s<i.length;s++)e=this.GetQuestData(i[s][0]),2!=e[2]&&(n=1);return n},i.CheckActState=function(t,e){void 0===e&&(e=0);var i,n,s,a,r,h,o=(this.GetSvrLocalTime(),DataTable.m_iActivityTab.GetActivityByGroup(t)),l=0,u=0,c=0,_=0;for(u=0;u<o.length;u++)if(1==o[u][5]&&!(o[u][17]>this.m_nLevel)){switch(o[u][0]){case 148:if(!this.GetGiftPickRec(3))continue;break;case 149:if(!this.GetGiftPickRec(4))continue;break;case 154:continue}for(c=ArrOp.SzHalfSearch(o[u][0],n),n=ArrOp.InsertSz(-c-1,n,o[u][0]),_=0,a=o[u][14],l=0;l<a.length;l++)if(r=this.GetQuestData(a[l][0]),!(r.length<1)&&2!=r[2]&&(_=1,1==r[2])){if(h=DataTable.m_iQuestTab.GetQuestByID(a[l][0]),h[3]>0&&(r=this.GetQuestData(h[3]),r.length&&2!=r[2]))continue;if(c=ArrOp.SzHalfSearch(o[u][0],i),c>=0)break;if(i=ArrOp.InsertSz(-c-1,i,o[u][0]),c=ArrOp.SzHalfSearch(o[u][3],s),c>=0)break;s=ArrOp.InsertSz(-c-1,o[u][3],s);break}c=ArrOp.SzHalfSearch(o[u][0],n),_&&(n=ArrOp.DelSz(c,n))}return 0==e?[i,s]:n},i.GetNextDailyUpDateTime=function(){var t=this.GetSvrLocalTime(),e=3600*t.getHours()+60*t.getMinutes()+t.getSeconds();return e=86400-e+10,Math.floor(e)},i.OnQuestUpdate=function(){this.ActQuestUpdate()},i.RefUnfinish=function(){return this.m_szQuest&&this.m_szQuest.length?void 0:void this.GetNewQuest()},i.HandInQuest=function(t,e,i,n){var s=0,a=0;SysID.IsZXRWID(t)&&(a=0),SysID.IsRCRWID(t)&&(a=1),SysID.IsHDRWID(t)&&(a=2),SysID.IsQTRWID(t)&&(a=3);var r=[],h=[],o=[],l=[],u=0,c=0;switch(a){case 0:for(s=t,u=0;u<this.m_szQuest.length;u++)l=this.GetQuestData(this.m_szQuest[u][0]),o.push(l);c=OPEnum.OP_RW_JL;break;case 1:l=this.GetQuestData(t),o.push(l),c=OPEnum.OP_RCRW_JL;break;case 2:l=this.GetQuestData(t),o.push(l),c=OPEnum.OP_HD_RWJL;break;case 3:l=this.GetQuestData(t),o.push(l),c=OPEnum.OP_QT_RWJL}for(u=0;u<o.length;u++){if(!o[u]||o[u].length<1)return gSys.Err("QuestData err"),void(n&&n.runWith(0));if(1!=o[u][2])return gSys.Err("status err id : "+o[u].id),void(n&&n.runWith(0));h=DataTable.m_iQuestTab.GetQuestByID(o[u][0]),r.length||(r=h[21]&&h[21].length?h[21].slice():o[u][3].slice())}if(!i||i.length<1)for(u=0;u<r.length;u++)r[u].push(e[Math.min(e.length-1,u)]),r[u][2]=ArrOp.SzLink(r[u][2],1);var _=r.slice();this.CheckMakeItemSz(r,1,0,Handler.create(this,this.HandInQuestCheck,[t,e,i,n,_,r,s,c,a]),Handler.create(this,this.HandInQuestCheckFail,[n]))},i.HandInQuestCheckFail=function(t){gSys.Err("CheckMakeItemSz QuestItem err"),t&&t.runWith(0)},i.HandInQuestCheck=function(t,e,i,n,s,a,r,h,o){var l=new StringRef;if(!this.ChgItemSz(s,l,h,i,1))return gSys.Err("ChgItemSz QuestItem err="+l.ustr),void(n&&n.runWith(0));switch(o){case 0:this.AddCompleteQuest(r),this.m_szQuest=[],this.RefUnfinish();break;case 1:this.SetQuestData(t);break;case 2:this.SetQuestData(t);break;case 3:this.SetQuestData(t)}this.CallSvr("HandInQuest",[t,a]);for(var u=0,c=0;c<a.length;c++)SysID.IsDTZSJZID(a[c][0])&&this.AddEvalue(a[c][0]),1==a[c][0]&&(u=a[c][1]);this.LogGameTag("get_任务次数",1),u>0&&this.LogGameTag("get_任务金币",u),n&&n.runWith(1)},i.NotiAddInviteQuestAch=function(t){if(t&&!(t.length<1)){t=t[1];for(var e=0;e<t.length;e++)this.LogGameTag(t[e][0],t[e][1])}},i.IsHaveOkInviteQuest=function(){var t,e,i,n,s=DataTable.m_iSelfUser.GetInviteQuest(),a=0,r=0;for(a=0;a<s.length;a++)if(s[a]&&(t=DataTable.m_iQuestTab.GetQuestByID(s[a][0]),t&&2!=s[a][2])){i=t[14];var h=StringOp.GetWordM(i,",");if(n=h[0],i=h[1],"get_邀请_等级人数"==n&&(r=Laya.__parseInt(i),e=DataTable.m_iSelfUser.GetAchvTagNum(t[14]),e>=t[16]))return 1}return 0},i.GetAllCanShowActID=function(){for(var t,e,i=DataTable.m_iActivityTab.GetShowAll(-1),n=i[0],s=0,a=0;a<n.length;a++)if(t=n[a][1],!(t[17]>this.m_nLevel)){switch(t[5]){case 2:if(!this.CheckActIapState(t[0]))continue}s=e.SzHalfSearch(t[0]),s>=0||(s=-1-s,e.InsertSz(s,t[0]))}return e},i.GetLastWorldRankList=function(){this.CallSvrRet("GetLastWorldRankList","NIL",Handler.create(this,this.GetLastWorldRankListReturn))},i.GetLastWorldRankListReturn=function(t){if(t instanceof Array&&(this.m_szLastWorldRankList=t,this.m_szLastWorldRankList))for(var e=0;e<this.m_szLastWorldRankList.length;e++)LastWeekAllTopLog.isstruct(this.m_szLastWorldRankList[e])||(this.m_szLastWorldRankList=ArrOp.DelSz(e,this.m_szLastWorldRankList),e--)},i.GetMyWorldRankRewardNo=function(){var t=0;return t=ArrOp.SzSearch(this.GetUID(),this.m_szLastWorldRankList),0>t?null:this.m_szLastWorldRankList[t]},i.IsHaveWorldRankReward=function(){var t=0;return t=ArrOp.SzSearch(this.GetUID(),this.m_szLastWorldRankList),0>t?-1:this.m_szLastWorldRankList[t][2]>0?0:1},i.GetMyWorldRankReward=function(t){var e=0;if(e=ArrOp.SzSearch(this.GetUID(),this.m_szLastWorldRankList),0>e)return void(t&&t.runWith(-1));if(this.m_szLastWorldRankList[e][2]>0)return void(t&&t.runWith(0));this.m_szLastWorldRankList[e][2]=1;var i=DataTable.m_iRankAward.GetMainRankAward(7,this.m_szLastWorldRankList[e].rankno+1);return!i||i.length<1?void(t&&t.runWith(0)):void this.CheckMakeItemSz(i,0,0,Handler.create(this,this.GMWRROk,[t,i]),Handler.create(this,this.GMWRRFail,[t,i]))},i.GMWRROk=function(t,e){
var i=new StringRef;return this.ChgItemSz(e,i,OPEnum.OP_PHB_JL,null)?(this.CallSvr("GetMyWorldRankReward",e),void(t&&t.runWith(1))):(gSys.Err("ChgItemSz:"+e),void(t&&t.runWith(0)))},i.GMWRRFail=function(t,e){gSys.Err("CheckMakeItemSz:"+e),t&&t.runWith(0)},i.OnGetLastRankLv=function(t,e,i){this.m_szLaskRankLv=t,this.m_szRankAward=e,i&&i.length>0&&(this.m_szLastRankNo=i)},i.OnGetCurRankNo=function(t){this.m_szCurWeekNo=t},i.OnGetAllRankData=function(t){t&&4==t.length&&(this.m_szLastRankNo=t[0],this.m_szCurWeekNo=t[1],this.m_szLaskRankLv=t[2],this.m_szRankAward=t[3])},i.OnBuildData=function(t,e){if(5!=e.length)return void gSys.Err("OnBuildData data not MapItem:"+e);var i=new MapItem;i.parseData(e),GMapView.m_nSelf&&this.SetBuildData(t,i),DataTable.m_iSelfUser.Emit("OnBuildData",[t,i])},i.OnSupDailyQuest=function(t){this.m_szDailyQuest=t,this.m_szData&&(DataTable.m_i_QuestInfo&&DataTable.m_i_QuestInfo.Refresh(),QuestPanel.getInstance().clip_MR.visible=!0,QuestPanel.getInstance().clip_MR.mouseEnabled=!0)},i.IsActWeekend=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=0);var i,n,s=1;if(i=DateOp.SetDateStr("2015-12-03 12:00:00",i),n=DateOp.SetDateStr("2015-12-06 23:55:00",n),t>=0)switch(t){case 0:return this.getDoubleActState(0);case 1:return this.getDoubleActState(1);case 2:i=DateOp.SetDateStr("2015-12-03 12:00:00",i);break;default:return 0}e&&(n=DateOp.SetDateStr("2015-12-07 23:55:00",n));var a;a=this.GetSvrLocalTime();var r=DateOp.SubDateSec(a,i);return 0>r?0:(r=DateOp.SubDateSec(a,n),r>0?0:s)},i.getDoubleActState=function(t){var e;e=this.GetSvrLocalTime();var i;if(i=DateOp.SetDateStr("2015-10-29 00:00:00",i),DateOp.SubDateSec(e,i)<0)return 0;if(i=DateOp.SetDateStr("2030-10-29 00:00:00",i),DateOp.SubDateSec(e,i)>=0)return 0;var n=ActDef.GETACTDOUBLETIME();return e.getDay()<0||e.getDay()>=n.length?0:t>=n[e.getDay()].length?0:n[e.getDay()][t]},i.PutBagMapOut=function(t,e,i){var n=DataTable.m_iBuildTab.Get(t);return null==n?void gSys.Err("Can't get map build id="+t):void this.TryPutBagBuild(Handler.create(this,this.PutBagMapOutNext,[t,e,i]),t,e,i,1)},i.PutBagMapOutNext=function(t,e,i,n){return n?DataTable.m_iSelfView.AddBulid(n,this.m_szData.mapdata.length,null)<=0?void gSys.Err("AddBulid err:  ",n):void this.TryPutBagBuild(Handler.create(this,this.PutBagMapOutSec,[t,e,i]),t,e,i):void gSys.GameMsg("未找到该装饰物",!1,"无法放置")},i.PutBagMapOutSec=function(t,e,i,n){DataTable.m_iSelfView.OnBuildPosChged();var s=gSys.GetCurSecAdj();this.SetWholeEditCheckCode(s),this.delNewEvaSign(t),this.CallSvr("PutBagMapOut",[t,e,i,s])},i.PutSpeBagMapOut=function(t,e,i,n){var s;if(s=4==e?this.m_szData.wonderbag.itemsz:this.m_szData.macbag.itemsz,0>t||!s||t>s.length)return void gSys.Err("AddBulid err:  ",t);var a=new MapItem;if(4==e?(a.itemid=this.m_szData.wonderbag.itemsz[t][0],a.data=this.m_szData.wonderbag.itemsz[t][2]):a=this.ReturnMacToWorld(t),a.x=i,a.y=n,DataTable.m_iSelfView.AddBulid(a,this.m_szData.mapdata.length,null)<=0)return void gSys.Err("AddBulid err:  ",s);this.m_szData.mapdata.push(a),DataTable.m_iSelfView.OnBuildPosChged(),4==e?this.m_szData.wonderbag.itemsz=ArrOp.DelSz(t,this.m_szData.wonderbag.itemsz):this.m_szData.macbag.itemsz=ArrOp.DelSz(t,this.m_szData.macbag.itemsz),this.ReGetSpeBagItemNum();var r=gSys.GetCurSecAdj();this.SetWholeEditCheckCode(r),this.CallSvr("PutSpeBagMapOut",[t,e,i,n,r])},i.SetBuildData=function(t,e){return 0>t||t>=this.m_szData.mapdata.length?void gSys.Err("SetBuildData mapszno err:"+t):void(e instanceof net.MapItem&&this.m_szData.mapdata[t].copyfrom(e))},i.MutiPutBuildBag=function(t,e){var i=0,n=0,s=[],a=new MapItem;for(i=this.m_szData.mapdata.length-1;i>=0;i--)a=this.m_szData.mapdata[i],a.itemid==t&&(s.push(i),n++);if(!(1>n)){var r=[];r.push([t,n]),this.CheckMakeItemSz(r,0,0,Handler.create(this,this.MutiPutBuildBagCheck,[t,e,r,s]))}},i.MutiPutBuildBagCheck=function(t,e,i,n){var s=new StringRef;if(!this.ChgItemSz(i,s,OPEnum.OP_ZS_SQ,e))return void gSys.Err("MutiPutBuildBag "+s);for(var a=0;a<n.length;a++)this.m_szData.mapdata=ArrOp.DelSz(n[a],this.m_szData.mapdata);var r=gSys.GetCurSecAdj();this.SetWholeEditCheckCode(r),DataTable.m_iSelfView.OnMutiBuildDeleteEx(t,n),this.CallSvr("MutiPutBuildBag",[t,i,r])},i.PutBuildBag=function(t,e,i,n){if(void 0===n&&(n=0),0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("ChgMapItemData mapszno err:"+t);var s=new MapItem;if(s.copyfrom(this.m_szData.mapdata[t]),s.itemid!=e.itemid)return void gSys.Err("ChgMapItemData mapszno id err:"+t+e);var a=[];switch(n){case 0:return a.push([e.itemid,1]),void this.CheckMakeItemSz(a,0,0,Handler.create(this,this.PutBuildBagCheck,[t,e,i,n,a,!0]));case 1:this.PutMactoBag(t);break;case 2:if(this.m_szData.wonderbag.itemsz.length>=this.GetBagMax(4))return void gSys.GameMsg("奇迹仓库已满");this.m_szData.wonderbag.itemsz.push([s.itemid,1,s.data]);break;default:return}this.PutBuildBagCheck(t,e,i,n,a)},i.PutBuildBagCheck=function(t,e,i,n,s,a){if(void 0===a&&(a=!1),a){var r=new StringRef;if(!this.ChgItemSz(s,r,OPEnum.OP_ZS_SQ,i))return void gSys.Err("PutBuildBag "+r)}n>0&&this.ReGetSpeBagItemNum(),this.m_szData.mapdata=ArrOp.DelSz(t,this.m_szData.mapdata),DataTable.m_iSelfView.OnMutiBuildDeleteEx(e.itemid,t),n>0&&GFlyItemIcon.AutoFlyTo(e.itemid,1,i);var h=gSys.GetCurSecAdj();this.SetWholeEditCheckCode(h),this.CallSvr("PutBuildBag",[t,e,s,n,h])},i.GetOrEvaGold=function(t,e,i){void 0===i&&(i=1);var n=this.GetOrEvaGoldData(),s=n[0]+Math.floor(n[1]/2),a=gSys.GetCurSecAdj();if(s>a)return i&&gSys.GameMsg("还没到收获时间!"),void(t&&t.runWith([null]));var r,h=0,o=DataTable.m_iSelfView.GetCanOrGoldEva();if(h=o[0],r=o[1],1>h)return i&&gSys.GameMsg("您的地图上没有放置带有评价的建筑!"),void(t&&t.runWith([null]));var l=1*Math.min(a-n[0],n[1])/n[1],u=0,c=0;u=Math.floor(Math.max(20*Math.pow(h*this.GetEvalueLevel(),.5)*l,1)),c=Math.floor(Math.max(u/4,1));var _=[];_.push([1,u]),_.push([4,c]),this.CheckMakeItemSz(_,0,0,Handler.create(this,this.GetOrEvaGoldCheck,[t,e,n,_,h,r,a,u]),Handler.create(this,this.GetOrEvaGoldCheckFail,[t]))},i.GetOrEvaGoldCheckFail=function(t){t&&t.runWith([null])},i.GetOrEvaGoldCheck=function(t,e,i,n,s,a,r,h){var o=new StringRef;return this.ChgItemSz(n,o,OPEnum.OP_ZS_PJ_JB,e)?(i[0]=r,i[1]=this.GetOrEvaGoldCD(),this.SetOrEvaGoldData(i),this.CallSvr("GetOrEvaGold",[s,a,r,n]),void(t&&t.runWith([[a.length,h]]))):void(t&&t.runWith([null]))},i.OnGetEvaGold=function(t,e,i){if(this.m_nLevel<10)return void(i&&i.runWith(0));var n=this.GetEvalueteSz(),s=Math.max(1,Math.floor(this.m_nEvalue/10));n[2]=gSys.GetCurSecAdj();var a=[];a.push([9,s]),this.CheckMakeItemSz(a,0,0,Handler.create(this,this.OnGetEvaGoldCheck,[t,e,i,a,n,s]),Handler.create(this,this.OnGetEvaGoldCheckFail,[i]))},i.OnGetEvaGoldCheckFail=function(t){t&&t.runWith(0)},i.OnGetEvaGoldCheck=function(t,e,i,n,s,a){var r=new StringRef;return this.ChgItemSz(n,r,OPEnum.OP_PJ_SH,[t,e,1])?(this.SetEvalueSz(s),this.CallSvr("OnGetEvaGold",n),this.LogGameTag("get_展示台勋章",a),void(i&&i.runWith(a))):(gSys.Err("OnGetEvaGold ChgItemSz err="+r),void(i&&i.runWith(0)))},i.ItemFormulStatus=function(t){var e=DataTable.m_iMacFormulTab.Get(t);if(!e)return gSys.Err("OnAddMacMake get err;id="+t),0;for(var i,n=e[5],s=0,a=0,r=0,h=0,o=0;n&&o<n.length;o++){if(s=n[o][0],a=n[o][1],1>a)return gSys.Err("formul num <0 err: id="+s),0;if(s>=5e3)r=5;else{var l=DataTable.m_iItemTab.Get(s);if(!l)return gSys.Err("unkown item:"+s),0;r=l[4]}switch(r){case 1:case 6:i=this.m_szData.barn.itemsz;break;case 0:case 2:case 3:case 7:i=this.m_szData.warehouse.itemsz;break;case 4:case 5:i=this.m_szData.decoration.itemsz;break;default:return gSys.Err("not bagkind item:"+s),0}if(h=ArrOp.SzHalfSearch(s,i),0>h)return 0;if(i[h][1]<a)return 0}return 1},i.InitBuyBackData=function(){var t=this.GetBuyBackData();if(!t){var e=gSys.GetCurSecAdj(),i=BuyBackData.Create();i[0]=e,i[1]=3,i[2]=0,i[3]=0,i[4]=0,t=i}this.SetBuyBackData(t)},i.FirstHireTom=function(){var t=gSys.GetCurSecAdj(),e=BuyBackData.Create();e[0]=t,e[1]=3,e[2]=0,e[3]=0,e[4]=0,this.SetBuyBackData(e);var i=GLeadManager.GetMapBuildObj("地图_回购直升机");i&&i.CheckShow()},i.OnTomHire=function(t,e,i){var n=DataTable.m_iBuyBack.Get(),s=ArrOp.SzSearch(t,n[4]);if(0>s)return void(i&&i.runWith(0));var a=n[4][s],r=gSys.GetCurSecAdj(),h=this.GetBuyBackData(),o=a[1];h[5]>0&&(o=Math.floor(o*h[5]*1/100)),1>o&&(o=1);var l=[];l.push([2,-o]),this.CheckMakeItemSz(l,0,0,Handler.create(this,this.OnTomHireCheck,[t,e,i,l,a,r,h]))},i.OnTomHireCheckFail=function(t){gSys.Err("OnTomHire CheckMakeItemSz err"),t&&t.runWith(0)},i.OnTomHireCheck=function(t,e,i,n,s,a,r){var h=new StringRef;return this.ChgItemSz(n,h,OPEnum.OP_GY_Tom,e,0,1)?void this.CallSvrRet("OnTomHire",t,Handler.create(this,this.OnTomHireBack,[e,i,n,s,a,r])):(gSys.Err("OnTomHire ChgItemSz err="+h),void(i&&i.runWith(0)))},i.OnTomHireBack=function(t,e,i,n,s,a,r){if(null==r)return gSys.Err("OnPetHunt CallSvrRet err:  "+csvr.retflag+";ret="+r),void(e&&e.runWith(0));var h=new StringRef;return this.ChgItemSz(i,h,OPEnum.OP_GY_Tom,t)?(a[0]=s,a[1]=n[0],a[2]=0,a[3]=0,a[4]=0,a[5]=Math.floor(r),this.SetBuyBackData(a),void(e&&e.runWith(1))):(gSys.Err("OnTomHire ChgItemSz err="+h),void(e&&e.runWith(0)))},i.OnTomFind=function(t){var e=DataTable.m_iBuyBack.Get(),i=this.GetBuyBackData(),n=gSys.GetCurSecAdj(),s=Math.floor((i[2]-i[0])/86400);0>s&&(s=0);var a=Math.floor((n-i[0])/86400);return a!=s&&(i[3]=0),e[2]+this.GetVipTomFindTime()-i[3]<=0?(gSys.Err("出寻次数用完"),0):(i[2]=n,i[3]=i[3]+1,i[4]=t,this.SetBuyBackData(i),this.CallSvr("OnTomFind",t),this.LogGameTag("get_代购次数",1),1)},i.OnTomBuy=function(t,e,i,n,s,a){var r=this.GetBuyBackData();if(t>0){if(r[4]!=t)return void(a&&a.runWith(0));r[4]=t,1>n&&(n=1);var h=[];return h=[[t,e],[1,-n]],void this.CheckMakeItemSz(h,0,0,Handler.create(this,this.OnTomBuyNext,[t,e,i,n,s,a,h,r,!0]),Handler.create(this,this.OnForceTomBackCheckFail,[a]))}this.OnTomBuyNext(t,e,i,n,s,a,h,r)},i.OnTomBuyNext=function(t,e,i,n,s,a,r,h,o){if(void 0===o&&(o=!1),o){var l=new StringRef;if(!this.ChgItemSz(r,l,OPEnum.OP_HG_GM,s))return gSys.Err("OnTomBuy ChgItemSz err="+l),void(a&&a.runWith(0))}h[4]=0,this.SetBuyBackData(h),this.CallSvr("OnTomBuy",[t,e,i,n]),a&&a.runWith(1)},i.OnTomBuyCheckFail=function(t){gSys.Err("OnTomBuy CheckMakeItemSz err"),t&&t.runWith(0)},i.OnForceTomBack=function(t,e,i){var n=DataTable.m_iBuyBack.Get(),s=this.GetBuyBackData(),a=gSys.GetCurSecAdj(),r=60*n[3]+s[2]-a;if(0>r)return gSys.Err("没在休息"),void(i&&i.runWith(0));if(n[2]+this.GetVipTomFindTime()-s[3]<=0)return gSys.Err("出寻次数用完"),void(i&&i.runWith(0));var h=Math.floor(15*(1*r/(60*n[3])))+1;if(1>h)return gSys.GameMsg("直升机马上回来"),void(i&&i.runWith(0));var o=[];o=[2,-h],this.CheckMakeItemSz(o,0,0,Handler.create(this,this.OnForceTomBackCheck,[t,e,i,o,n,s,a,r]),Handler.create(this,this.OnForceTomBackCheckFail,[i]))},i.OnForceTomBackCheck=function(t,e,i,n,s,a,r,h){var o=new StringRef;return this.ChgItemSz(n,o,OPEnum.OP_ZSJ_CH,[t,e])?(a[2]=a[2]-60*s[3],this.SetBuyBackData(a),this.CallSvr("OnForceTomBack",[h,r,n]),void(i&&i.runWith(1))):(gSys.Err("OnForceTomBack ChgItemSz err="+o.ustr),void(i&&i.runWith(0)))},i.OnForceTomBackCheckFail=function(t){t&&t.runWith(0)},i.ClearAccData=function(){this.m_szCurAcc=[],this.m_nAccidentExp=-1},i.GetMyAccItems=function(t){!this.m_szCurAcc||this.m_szCurAcc.length<1?DataTable.m_iSelfUser.CallSvrRet("GetMyAccItems","NIL",Handler.create(this,this.onGetMyAccItems,[t])):t&&t.run()},i.onGetMyAccItems=function(t,e){this.m_szCurAcc=e,Log1.debug(13,"[Accident][onGetMyAccItems]",this.m_szCurAcc),t&&t.run()},i.CheckAccident=function(t,e,i){this.m_nAccidentExp<0&&(this.m_nAccidentExp=ArrOp.GetStrVal("myaccident",this.m_szData.nameddata)),this.m_nAccidentExp+=t;var n;return n=DataTable.m_iUserLevelTab.Get(this.m_nLevel),Log1.debug(13,"[Accident][CheckAccident]",t,e,i,n,"|",this.m_nAccidentExp,n[11]),this.m_nAccidentExp<n[11]?void(this.m_szData.nameddata=ArrOp.SetStrVal("myaccident",this.m_szData.nameddata,this.m_nAccidentExp)):(Log1.debug(13,"[Accident][CheckAccident]",this.m_pAccTask,t,e,i),void(this.m_pAccTask||(this.m_pAccTask=!0,this.GetAccident([e,i,1],this.m_nLevel,n[11],Handler.create(this,this.onGetAccident)))))},i.onGetAccident=function(){this.m_pAccTask=!1,Log1.debug(13,"[Accident][onGetAccident]",this.m_pAccTask)},i.GetAccident=function(t,e,i,n){Log1.debug(13,"[Accident][GetAccident]",t,e,i),this.GetMyAccItems(Handler.create(this,this.GetAccidentNext,[t,e,i,n]))},i.GetAccidentNext=function(t,e,i,n){if(!this.m_szCurAcc||this.m_szCurAcc.length<1)return gSys.Err("GetMyAccItems GetMyAccItems err:"+e+","+i),void(n&&n.run());var s=this.m_szCurAcc[0],a=[];a.push([s[0],s[1]]),this.CheckMakeItemSz(a,1,0,Handler.create(this,this.GetAccidentCheck,[t,e,i,n,a]),Handler.create(this,this.GetAccidentCheckFail,[n]))},i.GetAccidentCheck=function(t,e,i,n,s){var a=new StringRef;return this.ChgItemSz(s,a,OPEnum.OP_YW_HD,t,1)?(this.m_szCurAcc=ArrOp.DelSz(0,this.m_szCurAcc),this.m_nAccidentExp-=i,this.m_nAccidentExp<0&&(this.m_nAccidentExp=0),this.m_szData.nameddata=ArrOp.SetStrVal("myaccident",this.m_szData.nameddata,this.m_nAccidentExp),this.CallSvr("AddAccident",[s,e]),void(n&&n.run())):(gSys.Err("GetAccident "+a.ustr),void(n&&n.run()))},i.GetAccidentCheckFail=function(t){t&&t.run()},i.OnFeedCulture=function(t,e,i,n,s,a){var r=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("OnFeedCulture mapszno err:"+t);var h=new MapItem;if(h.copyfrom(this.m_szData.mapdata[t]),h.itemid!=e)return void gSys.Err("OnFeedCulture lastv.itemid!=id");if(0>i||i>=(h.data?h.data.length:0))return void gSys.Err("OnFeedCulture anipos err;anipos="+i);if(h.data[i]>0)return void gSys.Err("OnFeedCulture no need to feed");var o=DataTable.animaltab.getObj(e);if(null==o)return void gSys.Err("OnFeedCulture no animaldata;id="+e);var l=DataTable.m_iItemTab.GetIdByName(o[12]);if(!l)return void gSys.Err("OnFeedCulture not find item name="+o[12]);h.data[i]=s;var u=[];u.push([l,-1]),this.CheckMakeItemSz(u,0,0,new Handler(this,feedC=function(){var o=new StringRef;return r.ChgItemSz(u,o,OPEnum.OP_JX_WY,n)?(r.m_szData.mapdata[t].copyfrom(h),r.CallSvr("OnFeedAllCulture",[t,e,i,s,u,h]),r.LogGameTag("feed_"+e,1),r.LogGameTag("feed_animal",1),void(a&&a.run())):void gSys.Err("OnFeedCulture ChgItemSz err="+o)}))},i.OnBuyCulture=function(t,e,i,n){var s=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("OnBuyCulture mapszno err:"+t);var a=new MapItem;if(a.copyfrom(this.m_szData.mapdata[t]),a.itemid!=e)return void gSys.Err("OnBuyCulture lastv.itemid!=id");var r=DataTable.animaltab.getObj(e);if(null==r)return void gSys.Err("OnBuyCulture no animaldata;id="+e);if(a.data&&a.data.length>=r[3])return void gSys.Err("OnBuyCulture animal num reach max"+a.data.length);for(var h=0,o=0;o<this.m_szData.mapdata.length;o++){var l=this.m_szData.mapdata[o];l.itemid==e&&(h+=l.data?l.data.length:0)}var u=r[9];if(r[10]>0&&(u+=Math.floor(h/r[10])*r[11]),1>u)return void gSys.Err("OnBuyCulture shopprice err");a.data||(a.data=[]),a.data.push(0);var c=[];c.push([1,-u]),this.CheckMakeItemSz(c,0,0,new Handler(this,onbuyC=function(){var r=new StringRef;return s.ChgItemSz(c,r,OPEnum.OP_JX_GM,i)?(s.m_szData.mapdata[t].copyfrom(a),s.CallSvr("OnBuyCulture",[t,e,c,a]),s.LogGameTag("add_"+e,1),s.LogGameTag("add_animal",1),void n.run()):void gSys.Err("OnBuyCulture ChgItemSz err="+r.ustr)}))},i.BuyMapItem=function(t,e,i,n,s,a){var r=this,h=DataTable.m_iBuildTab.Get(t);if(null==h)return gSys.Err("Can't get map build id="+t),void a.run();var o=this.GetBuildHaveNum(t),l=0;if(l=h[16]>0?h[14]+Math.floor(o/h[16])*h[17]:h[14],1>l)return gSys.Err("get map build cost err id="+h.itemid),void a.run();var u=[];switch(h[15]){case 0:u.push([1,-l]);break;case 1:u.push([2,-l]);break;case 2:u.push([3,-l]);break;case 3:u.push([9,-l]);break;default:return gSys.Err("get map build costkind err id="+t),void a.run()}this.CheckMakeItemSz(u,0,0,Handler.create(this,oksz=function(){var o=new StringRef;if(!r.ChgItemSz(u,o,OPEnum.OP_SD_GM,n))return gSys.Err("OP_商店购买 ChgItemSz err="+o),void a.run();var l=gSys.GetCurSecAdj(),c=0;3==h[1]?c=h[13]<=1?20+l:60*h[13]+l:2==h[1]&&(c=l);var _=r.AddMapItem(c,t,e,i,h[1]);if(4==h[1]&&(_.forword=256),5==h[1]){var m=DataTable.m_iPetTab.Get(t),d=m[3],p=r.GetBestPet();!p||p.length<1?r.SetBestPet([t,d]):d>p[1]&&r.SetBestPet([t,d])}r.CallSvr("OnBuyBuild",[t,e,i,u,l]),r.AddEvalue(t),DataTable.m_iSelfView.AddBulid(_,r.m_szData.mapdata.length-1,null,!0),DataTable.m_iSelfView.OnBuildPosChged(),r.SetWholeEditCheckCode(l),(4530>t||t>4536)&&r.LogGameTags(t,1),r.LogGameTag("buy_"+t,1),s.run()}),Handler.create(this,nosz=function(){a.run()}))},i.IsCanGetOtherEva=function(){var t;t=this.GetEvalueteSz();var e=gSys.GetCurSecAdj();return t[3]/86400!=e/86400&&(t[6]=[]),t[6].length<3?1:0},i.GetOtherEvaGold=function(){return 0},i.OnGetOtherEvaGold=function(t,e){var i=this.GetOtherEvaGold();return 1>i?0:1},i.OnHelpOtherTree=function(t,e,i,n,s){var a=this;if(!this.m_nNetLinkOk)return gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),void(s&&(s.run(),s=null));if(this.m_nHelpTreeLock)return void(s&&(s.run(),s=null));this.m_nHelpTreeLock=1;var r=DataTable.m_iTreeTab.Get(e.itemid);if(null==r)return this.m_nHelpTreeLock=0,void(s&&(s.run(),s=null));var h=r[6],o=[];o.push([4,h]),this.CheckMakeItemSz(o,0,0,Handler.create(this,helps=function(){var e=new StringRef;if(!a.ChgItemSz(o,e,OPEnum.OP_GS_BZ,i,0,1))return gSys.GameMsg(e.ustr,!0,"无法操作"),a.m_nHelpTreeLock=0,void(s&&(s.run(),s=null));var r,h=[DataTable.m_iOtherUser.GetUID(),DataTable.m_iOtherUser.GetSvrName(),DataTable.m_iOtherUser.GetNick(),t,o];a.CallSvrRet("HelpOtherTree",h,Handler.create(a,callH=function(t){return(r=t)?1!=r?(gSys.GameMsg("这棵树已经被别人抢先帮助啦"),a.m_nHelpTreeLock=0,void(s&&(s.run(),s=null))):a.ChgItemSz(o,e,OPEnum.OP_GS_BZ,i,0)?(a.AddFriPoint(DataTable.m_iOtherUser.GetNick()),a.m_nHelpTreeLock=0,a.LogGameTag("get_帮忙复活果树",1),a.LogGameTag("get_帮助次数",1),void(n&&(n.run(),n=null))):(gSys.Err("OnHelpOtherTree ChgItemSz err="+e),a.m_nHelpTreeLock=0,void(s&&(s.run(),s=null))):(gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),void(s&&(s.run(),s=null)))}))}))},i.UpLoadMap=function(t,e,i){var n=this.GetCutMapData();if(n[3]+n[4]!=t+e)return 0;n[3]=e,n[4]=t,n[5]=i,this.SetCutMapData(n);var s=gSys.GetCurSecAdj();return this.SetWholeEditCheckCode(s),this.CallSvr("UpLoadMap",[t,e,i,s]),1},i.OnHandInActCode=function(t,e,i){var n=this;this.CallSvrRet("OnHandInActCode",t,Handler.create(this,_call=function(t){return t?2!=t.length?(gSys.GameMsg("超时",!1),void(i&&i.runWith(0))):!t[1]||t[1].length<1?(gSys.GameMsg(t[0],!1),void(i&&i.runWith(0))):(t=t[1],void n.CheckMakeItemSz(t,1,0,Handler.create(n,__c=function(){var s=new StringRef;return n.ChgItemSz(t,s,OPEnum.OP_HDM_JL,e,1)?(n.AddMulEvaBuild(t),void(i&&i.runWith(1))):void(i&&i.runWith(0))}),Handler.create(n,__f=function(){i&&i.runWith(0)}))):(gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能",!1),void(i&&i.runWith(0)))}))},i.GetInviteCode=function(t){this.CallSvrRet("GetInviteCode","NIL",Handler.create(this,_backF=function(e){return e?void t.runWith([e]):(gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),void t.runWith(null))}))},i.GetInviteReward=function(t,e,i){this.CallSvrRet("GetInviteReward",t,Handler.create(this,_backFun=function(t){return t?ErrorDef.CALLFAIL()?(ErrorDef.ERR_DLG(csvr.retflag),void i.runWith(null)):void i.runWith([t]):(gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),void i.runWith(null))}))},i.VerifyFriendStatus=function(t){csvr.Send(this,PubDef.YHFWM(t),"VerifyFriendStatus",t)},i.VipQuickCD=function(t){function e(){t&&t.runWith(!1)}function i(){if(!a)return gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),void(t&&t.runWith(!1));if(!a[0])return gSys.GameMsg("当前没有生产，无需加速"),void(t&&t.runWith(!1));for(var e=0;e<a[1].length;e++)DataTable.m_iSelfUser.OnBuildData(a[1][e][0],a[1][e][1]);var i=ArrOp.GetStrVal("vipcdusetimes",n.m_szData.nameddata);i||(i=0),i++;var s=gSys.GetCurSecAdj();n.m_szData.nameddata=ArrOp.SetStrVal("vipcddate",n.m_szData.nameddata,s),n.m_szData.nameddata=ArrOp.SetStrVal("vipcdusetimes",n.m_szData.nameddata,i),n.Emit("vipquickused",[]),t&&t.runWith(!0)}var n=this;if(!this.m_nNetLinkOk)return gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),void(t&&t.runWith(!1));if(!this.IsCanVipFunc(30002))return gSys.GameMsg("糟糕，你没有VIP权限无法使用。"),void(t&&t.runWith(!1));if(this.GetVipQuickCDTimes()<1)return gSys.GameMsg("今天已经使用过VIP加速功能了"),void(t&&t.runWith(!1));var s;s="准备就绪！\n开足马力，全力生产！";var a,r=0;this.IsCanVipFunc(60001)?(r=2,gSys.PopOkCancel(Handler.create(this,_okF=function(){n.CallSvrRet("VipQuickCD",r,Handler.create(n,_backF=function(t){a=t,i()}))}),Handler.create(this,e),Handler.create(this,e),s,"VIP加速","加速两小时")):(r=1,gSys.PopOkCancel(Handler.create(this,_okF=function(){n.CallSvrRet("VipQuickCD",r,Handler.create(n,_backF=function(t){a=t,i()}))}),Handler.create(this,e),Handler.create(this,e),s,"VIP加速","加速一小时"))},i.DoFreeVip=function(t){var e=this;this.GetIapTimes()<1&&(gSys.GameMsg("充值任意金额可免费获得3天VIP",!1),t&&t.runWith(0)),this.GetFreeVip()&&t&&t.runWith(1),this.m_szData.nameddata=ArrOp.SetStrVal("freevip",this.m_szData.nameddata,1);var i=[];i.push([8,3]),this.CheckMakeItemSz(i,0,0,Handler.create(this,_succ=function(){var n=new StringRef;return e.ChgItemSz(i,n,OPEnum.OP_FLK_ZS)?void e.CallSvrRet("DoFreeVip","NIL",Handler.create(e,___=function(e){return e?(e&&gSys.GameMsg("成功获得3天VIP资格",!1,"提示"),void(t&&t.runWith(e))):void(t&&t.runWith(0))})):(gSys.Err("DoFreeVip ChgItemSz err="+n.ustr),void(t&&t.runWith(0)))}),Handler.create(this,_fail=function(){gSys.Err("DoFreeVip CheckMakeItemSz"),t&&t.runWith(0)}))},i.OnTreeAskHelp=function(t,e){if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("TreeAskHelp mapszno err:"+t),0;var i=new MapItem;if(i.copyfrom(this.m_szData.mapdata[t]),i.itemid!=e)return gSys.Err("TreeAskHelp lastv.itemid!=id"),0;if(i.data.length<4)return gSys.Err("TreeAskHelp no data"),0;var n=i.data[0];if(n>0)return gSys.Err("TreeAskHelp state err putsec>0"),0;var s=i.data[2];return 0!=s?(gSys.Err("TreeAskHelp state err exstate!=0"),0):(i.data[2]=1,this.m_szData.mapdata[t].copyfrom(i),this.CallSvr("OnAllTreeAskHelp",[t,e,i]),1)},i.OnTreeThanks=function(t,e){if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("TreeAskHelp mapszno err:"+t),0;var i=new MapItem;if(i.copyfrom(this.m_szData.mapdata[t]),i.itemid!=e)return gSys.Err("TreeAskHelp lastv.itemid!=id"),0;if(i.data.length<4)return gSys.Err("OnTreeThanks no data"),0;var n=i.data[0];if(n>0)return gSys.Err("TreeAskHelp state err putsec>0"),0;var s=i.data[2];if(2!=s)return gSys.Err("TreeAskHelp state err exstate!=2"),0;var a=DataTable.m_iTreeTab.Get(e);return null==a?(gSys.Err("TreeAskHelp tree not find id="+e),0):(n=gSys.GetCurSecAdj(),i.data[0]=n,i.data[2]=Math.min(i.data[1]-1,2)+a[2],i.data[3]="NIL",this.m_szData.mapdata[t].copyfrom(i),this.CallSvr("OnTreeThanks",[t,e,n,i]),1)},i.GetCurCoolLen=function(t,e){var i=0;if(e>=4)i=e>13?1728e3:9>e?432e3:864e3;else{var n=DataTable.m_iTreeTab.Get(t);if(null==n)return 1728e3;i=60*n[3]}return i},i.OnQuickTree=function(t,e,i,n,s,a){var r=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("OnQuickTree mapszno err:"+t);var h=new MapItem;if(h.copyfrom(this.m_szData.mapdata[t]),h.itemid!=e)return void gSys.Err("OnQuickTree lastv.itemid!=id");if(h.data&&!(h.data.length<4)){var o=h.data[0];if(1>o)return void gSys.Err("OnQuickTree state err putsec<1");var l=h.data[1],u=gSys.GetCurSecAdj()-o,c=this.GetCurCoolLen(e,l);if(u=c-u,1>u)return void gSys.Err("OnQuickTree leftsec<1");h.data[0]-=i,h.data[3]="NIL";var _=this.GetJszsfy(i,c),m=[];s?m.push([25,-_]):m.push([2,-_]),this.CheckMakeItemSz(m,0,0,new Handler(this,function(){var o=new StringRef;return r.ChgItemSz(m,o,OPEnum.OP_GS_JS,n)?(r.m_szData.mapdata[t].copyfrom(h),r.CallSvr("OnQuickTree",[t,e,i,m,h,s]),void a.run()):void gSys.Err("OnQuickTree ChgItemSz err="+o)}))}},i.OnQuickCulture=function(t,e,i,n,s,a,r){var h=this,o=0,l=0;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("OnQuickCulture mapszno err:"+t);var u=new MapItem;if(u.copyfrom(this.m_szData.mapdata[t]),u.itemid!=e)return void gSys.Err("OnQuickCulture lastv.itemid!=id");var c=DataTable.animaltab.getObj(e);if(null==c)return void gSys.Err("OnQuickCulture no animaldata;id="+e);var _=0,m=0;for(_=0;_<i.length;_++){if(l=i[_],0>l||l>=u.data.length)return void gSys.Err("OnQuickCulture anipos err;anipos="+l);o=n[_],u.data[l]-=o,m+=this.GetJszsfy(o,60*c[5]*DataTable.m_iSelfUser.GetNewerQuickAgv(1))}i.length>1&&this.IsCanVipFunc(30005)&&(m=Math.floor(.5*m)),1>m&&(m=1);var d=[];a?d.push([25,-m]):d.push([2,-m]),this.CheckMakeItemSz(d,0,0,new Handler(this,function(){var o=new StringRef,l=OPEnum.OP_JX_JS;return i.length>1&&(l=OPEnum.OP_JX_JS_QT),h.ChgItemSz(d,o,l,s)?(h.m_szData.mapdata[t].copyfrom(u),h.CallSvr("OnQuickCulture",[t,e,i,n,d,u,a]),void r.run()):void gSys.Err("OnQuickCulture ChgItemSz err="+o)}))},i.CheckShopNewNum=function(){var t=this.GetShopTipData(),e=0;t=t||[];for(var i=0,n=t.length;n>i;i++)t[i]&&t[i]instanceof Array&&!(t[i].length<2)&&(e+=t[i][1]);e!=this.m_nShopNewNum&&(this.m_nShopNewNum=e,this.Emit("m_nShopNewNum",null))},i.ClearShopTip=function(t){if(t&&!(t.length<1)){for(var e,i=0,n=this.GetShopTipData(),s=0;s<t.length;s++)i=ArrOp.SzSearch(t[s],n),0>i||(e=n[i],e[1]--,e[1]<1?n=ArrOp.DelSz(i,n):n[i]=e);ArrOp.SetStrVal("shoptip",this.m_szData.nameddata,n),null!=n?this.CallSvr("ClearShopTip",n):this.CallSvr("ClearShopTip","NIL"),this.CheckShopNewNum()}},i.OnAddBagLvl=function(t,e){var i=this,n=0,s=[];switch(t){case 0:n=this.m_szData.barn.baglevel+1,n>50&&(n=50),s.push([10,-n]),s.push([11,-n]),s.push([12,-n]);break;case 1:n=this.m_szData.warehouse.baglevel+1,n>50&&(n=50),s.push([13,-n]),s.push([14,-n]),s.push([15,-n]);break;default:return void e.runWith(0)}this.CheckMakeItemSz(s,0,0,Handler.create(this,function(){var n=new StringRef;return i.ChgItemSz(s,n,OPEnum.OP_CK_SJ)?(i.AddBagLvl(t),i.CallSvr("OnAddBagLvl",[t,s]),i.LogGameTag("get_仓库升级次数",1),void e.runWith(1)):(gSys.Err("GetItemByBuild "+n),void e.runWith(0))}),Handler.create(this,function(){e.runWith(0)}))},i.OnQuickMacBuild=function(t,e,i,n,s,a){var r=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("OnQuickMacBuild mapszno err:"+t);var h=new MapItem;if(h.copyfrom(this.m_szData.mapdata[t]),h.itemid!=e)return void gSys.Err("OnQuickMacBuild lastv.itemid!=id");if((256|h.forword)!=h.forword)return void gSys.Err("OnQuickMacBuild build state err: forword="+h.forword);var o=h.data,l=gSys.GetCurSecAdj(),u=o-l;if(1>u)return void gSys.Err("OnQuickMacBuild no need to quick leftsec="+u);var c=DataTable.m_iBuildTab.Get(e);if(null==c)return void gSys.Err("OnQuickMacBuild buildid not find id="+e);h.data=null;var _=this.GetJszsfy(i,60*c[13]),m=[];s?m.push([25,-_]):m.push([2,-_]),this.CheckMakeItemSz(m,0,0,new Handler(this,qmb=function(){var o=new StringRef;return r.ChgItemSz(m,o,OPEnum.OP_JZ_JS,n)?(r.m_szData.mapdata[t].copyfrom(h),r.CallSvr("OnQuickMacBuild",[t,e,i,m,h,s]),void a.run()):void gSys.Err("OnQuickMacBuild ChgItemSz err="+o)}))},i.GetCurMakeData=function(t,e,i,n){var s,a=0,r=0;r=gSys.GetCurSecAdj()-e;for(var h=i?i.length:0,o=0;h>o;o++){if(s=DataTable.m_iMacFormulTab.Get(i[o]),null==s){gSys.Err("Mark->7-formul not find id="+i[o]);break}if(a=Math.floor(60*s[4]*t*DataTable.m_iSelfUser.GetNewerQuickAgv(2)),a>r)break;n||(n=[]),n.push(i[o]),r-=a,e+=a,i=ArrOp.DelSz(o,i),o--,h=i?i.length:0}return 1>h&&(e=0),[e,i,n]},i.OnQuickMacMake=function(t,e,i,n,s,a,r){var h=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("OnQuickBuild mapszno err:"+t);var o=new MapItem;if(o.copyfrom(this.m_szData.mapdata[t]),o.itemid!=e)return void gSys.Err("OnQuickBuild lastv.itemid!=id");if(o.data.length<6)return void gSys.Err("OnQuickBuild no data");var l=o.data[2],u=1-this.GetMacLvQuickAgvByLv(o.data[4]),c=o.data[0],_=(o.data[3],o.data[1]),m=this.GetCurMakeData(u,l,c,_);if(l=m[0],c=m[1],_=m[2],!c||c.length<1)return void gSys.Err("OnQuickBuild no item  to quick");var d=DataTable.m_iMacFormulTab.Get(c[0]);if(null==d)return void gSys.Err("OnQuickBuild item not find id="+c[0]);o.data[0]=c,o.data[1]=_,o.data[2]=l-i;var p=[];if(s){var f=DataTable.m_iBuildTab.Get(e);if(1!=f[20].length)return void gSys.Err("OnQuickBuild mac not ore buildid="+e);if("矿"!=f[20][0])return void gSys.Err("OnQuickBuild mac not ore buildid="+e);var g=1*i/18e3;g>Math.floor(g)&&(g+=1),p.push([18,-Math.floor(g)])}else{var S=this.GetJszsfy(i,60*d[4]*u*DataTable.m_iSelfUser.GetNewerQuickAgv(2));1>S&&(S=1),a?p.push([25,-S]):p.push([2,-S])}this.CheckMakeItemSz(p,0,0,Handler.create(this,itS=function(){var u=new StringRef;return h.ChgItemSz(p,u,OPEnum.OP_CP_JS,n)?(h.m_szData.mapdata[t].copyfrom(o),h.CallSvr("OnQuickMacMake",[t,e,l,i,p,o,s,a]),s&&h.LogGameTag("get_炸矿次数",1),void(r&&r.run())):void gSys.Err("OnQuickBuild ChgItemSz err="+u)}))},i.OnFinishMacBuild=function(t,e,i,n){var s=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("OnFinishMacBuild mapszno err:"+t);var a=new MapItem;if(a.copyfrom(this.m_szData.mapdata[t]),a.itemid!=e)return void gSys.Err("OnFinishMacBuild lastv.itemid!=id");var r=DataTable.m_iBuildTab.Get(e);if(null==r)return void gSys.Err("OnFinishMacBuild getbuild data err");var h=0;h=Math.floor(Math.pow(r[13]/60,1/1.09)),1>h&&(h=1),a.forword=0,a.data=[];var o=[];o.push([4,h]),this.CheckMakeItemSz(o,0,0,new Handler(this,fini=function(){var r=new StringRef;return s.ChgItemSz(o,r,OPEnum.OP_JZ_WG,i)?(s.m_szData.mapdata[t].copyfrom(a),s.CallSvr("OnFinishMacBuild",[t,e,o,a]),s.LogGameTag("openbuild_"+e,1),void n.run()):void gSys.Err("OnFinishMacBuild ChgItemSz err="+r)}))},i.ChgBuildDataEx=function(t,e,i,n,s,a,r){var h=this;if(0>e||e>=this.m_szData.mapdata.length)return void gSys.Err("ChgBuildDataEx mapszno err:"+e);var o=new MapItem;return o.copyfrom(this.m_szData.mapdata[e]),o.itemid!=i?void gSys.Err("ChgBuildDataEx mapszno id err:"+e+n):o==n?void gSys.Err("ChgBuildDataEx chg cancel:"+e+"="+n):s&&s.length>0?void this.CheckMakeItemSz(s,0,0,Handler.create(this,function(){var o=new StringRef;return h.ChgItemSz(s,o,t,a)?(null==n?h.m_szData.mapdata=ArrOp.DelSz(e,h.m_szData.mapdata):h.m_szData.mapdata[e].copyfrom(n),h.CallSvr("ChgBuildDataEx",[t,e,i,n,s]),void(r&&r.run())):void gSys.Err("ChgBuildDataEx ChgItemSz err = "+o)})):(null==n?this.m_szData.mapdata=ArrOp.DelSz(e,this.m_szData.mapdata):this.m_szData.mapdata[e].copyfrom(n),this.CallSvr("ChgBuildDataEx",[t,e,i,n,s]),void(r&&r.run()))},i.OnMacAddLv=function(t,e,i,n,s,a){var r=this;if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("AddMacQueMax agv err:"+t),void a.run();var h=new MapItem;if(h.copyfrom(this.m_szData.mapdata[t]),h.itemid!=e.itemid)return gSys.Err("AddMacQueMax mapszno id err:"+t+e),void a.run();if(6!=e.data.length)return gSys.Err("AddMacQueMax v.data size err:"+e.data.size()),void a.run();if(!i||i.length<1)return gSys.Err("AddMacQueMax chgsz err"),void a.run();for(var o=0;o<i.length;o++)i[o][1]*=-1;this.CheckMakeItemSz(i,0,0,new Handler(this,mcad=function(){var h=new StringRef;return r.ChgItemSz(i,h,OPEnum.OP_JQ_SJ,n)?(r.m_szData.mapdata[t].copyfrom(e),r.CallSvr("OnMacAddLv",[t,e,i]),r.LogGameTag("get_机器升级次数",1),void s.run()):(gSys.Err("OnMacAddLv "+h),void a.run())}))},i.AddMacQueMax=function(t,e,i,n){var s=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("AddMacQueMax agv err:"+t);var a=new MapItem;if(a.copyfrom(this.m_szData.mapdata[t]),a.itemid!=e.itemid)return void gSys.Err("AddMacQueMax mapszno id err:"+t+e);var r=DataTable.m_iBuildTab.Get(e.itemid);if(null==r)return void gSys.Err("AddMacQueMax buildid not find id="+e.itemid);var h=0;h=a.data&&6==a.data.length?a.data[3]:r[18];var o=e.data;if(6!=o.length)return void gSys.Err("AddMacQueMax id err:"+t+e);if(o[3]-h!=1)return void gSys.Err("AddMacQueMax addnum err:"+t+e);var l=[5,10,20,50,100,200,300,500];if(0>h-1||h-1>=l.length)return void gSys.Err("AddMacQueMax need diamond err:"+t+e);var u=l[h-1];1>u&&(u=1);var c=[];c.push([2,-u]),this.CheckMakeItemSz(c,0,0,Handler.create(this,function(){var a=new StringRef;s.ChgItemSz(c,a,OPEnum.OP_ZJ_JQ_dL,i)||gSys.Err("AddMacQueMax "+a),s.m_szData.mapdata[t].copyfrom(e),s.CallSvr("AddMacQueMax",[t,e,c]),n.run()}))},i.GetMapItemData=function(t,e){if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("agv err:"+t),
null;var i=new MapItem;return i.copyfrom(this.m_szData.mapdata[t]),i.itemid!=e?(gSys.Err("mapszno id err:"+t),null):i},i.GetBuildEvalue=function(t){if(!SysID.IsDTZSJZID(t))return 0;var e=DataTable.m_iBuildTab.Get(t);return null==e||0==e.length?0:e[8]},i.GetShopBuildEvalue=function(t){if(!SysID.IsDTJZID(t))return 0;var e=DataTable.m_iBuildTab.Get(t);return null==e||0==e.length?0:e[8]},i.GetMyOrEvaAdd=function(t){if(!SysID.IsDTZSJZID(t))return 0;var e=DataTable.m_iBuildTab.Get(t);if(null==e||0==e.length)return 0;if(e[8]<1)return 0;var i;if(i=this.GetEvalueteSz(),i[7].length<1)return e[8];var n=ArrOp.SzHalfSearch(t,i[7]);return n>=0?0:e[8]},i.RecalMyBuildEvalue=function(){var t,e=0,i=0,n=0,s=0,a=this.GetEvalueteSz(),r=[];for(e=0,i=a[7].length;i>e;e++)s=ArrOp.SzAddRef(a[7][e][0],1,r),r[s][1]>1||(t=DataTable.m_iBuildTab.Get(a[7][e][0]),null!=t&&0!=t.length&&(n+=t[8]));var h;for(h=this.GetBagItemSz(2),h||(h=[]),e=0,i=h.length;i>e;e++)2==h[e].length&&(s=ArrOp.SzAddRef(h[e][0],1,r),r[s][1]>1||(t=DataTable.m_iBuildTab.Get(h[e][0]),null!=t&&0!=t.length&&(n+=t[8])));if(a[0]!=n){a[0];if(a[0]<n){for(e=0,i=h.length;i>e;e++)2==h[e].length&&(s=ArrOp.SzHalfSearch(h[e][0],a[7]),s>=0||(s=-1-s,ArrOp.InsertSz(s,a[7],[h[e][0],0])));a[0]=n,this.SetEvalueSz(a)}}return n},i.AddMulEvaBuild=function(t,e){void 0===e&&(e=0);for(var i=0,n=this.GetEvalueteSz(),s=gSys.GetCurSecAdj(),a=0,r=t.length;r>a;a++){var h=0;if("number"==typeof t[a]&&Math.floor(t[a])==t[a])h=t[a];else if(t[a].length>=2){if(t[a][1]<1)continue;h=t[a][0]}if(SysID.IsDTZSJZID(h)){var o=ArrOp.SzHalfSearch(h,n[7]);if(!(o>=0)){var l;l=DataTable.m_iBuildTab.Get(h),null!=l&&0!=l.length&&(l[8]<1||(n[0]+=l[8],n[4]=150*Math.pow(n[0],.5),n[5]=n[4],ArrOp.InsertSz(-1-o,n[7],[h,s]),i+=l[8],this.AddMyStampBuildNumByKind(l[22])))}}}return 1>i?0:e?i:(this.SetEvalueSz(n),i)},i.GetBuildGotTime=function(t){if(!SysID.IsDTZSJZID(t))return 0;var e=this.GetEvalueteSz(),i=ArrOp.SzHalfSearch(t,e[7]);return 0>i?-1:e[7][i][1]},i.GetBuildGotTimeStr=function(t){var e=this.GetBuildGotTime(t);return 0>e?"暂未获得":1>e?"2015年11月11日":""+TimeCalStyle.GetDateBySec(e)},i.AddEvalue=function(t){SysID.IsDTZSJZID(t),!1;var e=this.GetMyOrEvaAdd(t);if(e>0){var i=0,n=0,s=this.GetEvalueteSz();if(e>0){var a=gSys.GetCurSecAdj();i=this.GetEvalueLevel(),s[0]+=e,s[4]=150*Math.pow(s.total,.5),s[5]=s[4];var r=ArrOp.SzHalfSearch(t,s[7]);if(0>r){ArrOp.InsertSz(-1-r,s[7],[t,a]);var h=DataTable.m_iBuildTab.Get(t);null!=h&&this.AddMyStampBuildNumByKind(h[22])}}return this.SetEvalueSz(s),MainIcon.getInstance().upperIcon.upDate(),e>0&&(n=this.GetEvalueLevel(),n!=i&&(DataTable.m_iFriendBar.m_szData[4][3]=n,SysID.FRD_EMIT("frdgamechged",[this.GetUID(),DataTable.m_iFriendBar.m_szData[4]]))),this.Emit("checkmaskcloud",[]),this.m_pRefAchvTask||this.RefAchv(),e}return 0},i.DelTreeData=function(t,e,i,n,s){var a=this;if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("ChgMapItemData mapszno err:"+t),void s.run();var r=new MapItem;if(r.copyfrom(this.m_szData.mapdata[t]),r.itemid!=e.itemid)return gSys.Err("ChgMapItemData mapszno id err:"+t+e),void s.run();var h=DataTable.m_iBuildTab.Get(e.itemid);if(null==h)return gSys.Err("Can't get map build id="+e.itemid),void s.run();var o=0;switch(h[9]){case 1:o=16;break;case 2:o=17;break;case 4:o=18;break;case 5:break;default:return gSys.Err("tree delmode err; delmode="+h.delmode),void s.run()}var l=[];return o>0?(4!=h[9]&&l.push([4530,1]),l.push([o,-1]),l.push([4,5]),void this.CheckMakeItemSz(l,1,0,Handler.create(this,okH=function(){var r=new StringRef;return a.ChgItemSz(l,r,OPEnum.OP_SM_KF,[i,n],1)?((4509==e.itemid||e.itemid>=4501&&e.itemid<=4503)&&a.LogGameTag("get_清除石头",1),(e.itemid>=4530&&e.itemid<=4536||e.itemid>=4504&&e.itemid<=4508)&&a.LogGameTag("get_清除野树",1),void a.DelTreeDataHandler(t,e,l)):(gSys.Err("PutBuildBag "+r),void s.run())}),Handler.create(this,noHs=function(){s.run()}))):void this.DelTreeDataHandler(t,e,l)},i.DelTreeDataHandler=function(t,e,i){this.m_szData.mapdata=ArrOp.DelSz(t,this.m_szData.mapdata),DataTable.m_iSelfView.OnMutiBuildDeleteEx(e.itemid,t);var n=gSys.GetCurSecAdj();this.SetWholeEditCheckCode(n),this.CallSvr("DelTreeData",[t,e,i,n])},i.OnGoldCoins=function(t,e){var i=this,n=this.CurDiaToGoldData(t);if(!n||!n.length)return MainIcon.getInstance().rightIcon.addInterface(1,2),gSys.GameMsg("钻石不够了!",!1,"充值购买"),void e.runWith(null);var s=[];if(n[0]instanceof Array)for(var a=0,r=n[0].length;r>a;a++)s.push(n[0][a]);var h=n[1],o=[];for(a=0;a<n[2].length;a++)o.push(n[2][a]);this.CheckMakeItemSz(s,0,0,new Handler(this,function(){var a=new StringRef;return i.ChgItemSz(s,a,OPEnum.OP_DSCJ,null,0,0,0)?(i.SetGoldCoinsData(h),i.CallSvr("OnGoldCoins",[t,o,s]),i.LogGameTag("get_点石成金次数",h),t&&i.LogGameTag("get_连续点石成金次数",1),void e.runWith([n])):void e.runWith(null)}))},i.SetGoldCoinsData=function(t){var e;if(e=this.m_szData.getStrValFromND("goldcoins"),e[3]>=50){var i=this.CallSvrRet("CheckGoldCoinsData",[]);if(!i||!i.length)return;e=i}e[0]+=t,e[3]+=t,e=this.m_szData.getStrValFromND("goldcoins"),this.LogCrit(e[3],e[1])},i.LogCrit=function(t,e){for(var i=Laya.__parseInt(t/10+""),n=t%10,s=e[i],a=0;;){if(s[0]+1>n){a=s[0]+1;break}if(s[1]+1>n){a=s[1]+1;break}if(s[2]+1>n){a=s[2]+1;break}s=e[i+1],a=s[0]+10;break}a-n==1?console.log("clnDatacal.as----LogCrit()     下次暴击"):console.log("clnDatacal.as----LogCrit()     ",a-n,"次后暴击")},i.OnDiaToItem=function(t,e,i,n){var s=this;if(void 0===i&&(i=0),StringOp.Compare(t,"c1007")){if(this.GetFirRecharge()>0)return void(n&&n.runWith(0));if(this.GetIapTotalRmb()<6)return void(n&&n.runWith(0))}if(StringOp.Compare(t,"c1011")&&this.GetGiftPickRec(2)>0)return void(n&&n.runWith(0));var a=DiamondToItem.GetItem(t);if(!a||!a.length)return void(n&&n.runWith(0));var r=a[6].slice();a[2]&&r.push([2,-a[2]]),this.CheckMakeItemSz(r,i,0,Handler.create(this,_okF=function(){var h=new StringRef,o=0;switch(a[1]){case 0:o=OPEnum.OP_SDI_GM;break;case 1:o=OPEnum.OP_YS_GM;break;case 2:o=OPEnum.OP_SC_LB;break;case 3:o=OPEnum.OP_LB_GM;break;case 4:o=OPEnum.OP_HD_LB}if(!s.ChgItemSz(r,h,o,e,i))return void(n&&n.runWith(0));s.CallSvr("OnDiaToItem",[t,r,i]);for(var l=0;l<r.length;l++)SysID.IsDTZSJZID(r[l][0])&&s.AddEvalue(r[l][0]);StringOp.Compare(t,"c1007")&&s.SetFirRecharge(),StringOp.Compare(t,"c1011")&&s.SetGiftPickRec(2),s.CheckSetActBuy(t),n&&n.runWith(1)}),Handler.create(this,_failF=function(){n&&n.runWith(0)}))},i.IsCanBagLvUp=function(t){var e=[],i=0;switch(i=DataTable.m_iSelfUser.GetBagLvl(t)+1,i>50&&(i=50),t){case 0:e.push(10),e.push(11),e.push(12);break;case 1:e.push(13),e.push(14),e.push(15);break;default:return 0}var n=0,s=0;for(n=0;n<e.length;n++)if(s=DataTable.m_iSelfUser.GetBagItemNum(1,e[n]),i>s)return 0;return 1},i.OnQuickfeildCD=function(t,e,i,n,s,a,r){var h,o,l=this,u=0,c=0;if(o=DataTable.m_iItemTab.Get(e),null==o)return void gSys.Err("not find item id="+e);var _;if(_=DataTable.m_iFieldTab.Get(e),null==_)return void gSys.Err("field not find id="+e);var m,d=0,p=0;for(d=0;d<t.length;d++)u=t[d],0>u||u>=this.m_szData.mapdata.length?(t=ArrOp.DelSz(d,t),n=ArrOp.DelSz(d,n),i=ArrOp.DelSz(d,i),d--):(h=new MapItem,h=n[d],m=this.m_szData.mapdata[u],m.itemid==h.itemid?(c=i[d],p+=this.GetJszsfy(c,Math.floor(60*_[2]*this.GetNewerQuickAgv(0)))):(t=ArrOp.DelSz(d,t),n=ArrOp.DelSz(d,n),i=ArrOp.DelSz(d,i),d--));t.length>1&&this.IsCanVipFunc(30004)&&(p=Math.floor(.5*p)),1>p&&(p=1);var f=[];a?f.push([25,-p]):f.push([2,-p]),this.CheckMakeItemSz(f,0,0,Handler.create(this,function(){var o=new StringRef,c=OPEnum.OP_ZW_JS;if(t.length>1&&(c=OPEnum.OP_ZW_JS_QT),!l.ChgItemSz(f,o,c,s))return void gSys.Err("OnQuickfeildCD "+o.ustr);for(d=0;d<t.length;d++)u=t[d],h=n[d],l.m_szData.mapdata[u].copyfrom(h);l.CallSvr("OnQuickfeildCD",[t,e,i,n,f,a]),r.run()}))},i.test_ResetTreeData=function(t,e,i){if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("OnQuickTree mapszno err:"+t),0;var n=new MapItem;if(n.copyfrom(this.m_szData.mapdata[t]),n.itemid!=e)return gSys.Err("OnQuickTree lastv.itemid!=id"),0;if(4==n.data.length)return 0;var s=DataTable.m_iTreeTab.Get(e);return null==s?(gSys.Err("Tree not find id="),0):(n.data=[i,0,s.resnum,null],this.m_szData.mapdata[t].copyfrom(n),this.CallSvr("test_ResetTreeData",[t,e,i]),1)},i.IsFirIapBuy=function(t){if("d"!=t.charAt(0))return 0;var e=ArrOp.SzAddRef(t,0,this.m_szData.sziapid=this.m_szData.sziapid||[]);return this.m_szData.sziapid[e][1]<1?1:0},i.PendingTransaction=function(t,e,i,n,s){function a(i){if(null==i||void 0==i)return void(s&&s.runWith(0));if("number"==typeof i&&Math.floor(i)==i){if(706!=i);else{var a=0;if(StringOp.CompareMax(e,"Ali_")&&a>1)return n>=3&&(t="抱歉无法验证交易,请记录订单号和网管联系.订单号:"+e,gSys.GameMsg(t,!1,"充值提示")),void(s&&s.runWith(0))}return n>=3&&(t=ErrorDef.ERR_MESSAGE(i)+"("+h[5]+")",gSys.GameMsg(t,!1,"充值提示")),void(s&&s.runWith(0))}if(2!=i.length)return n>=3&&(t="内购错误:"+i+"订单号:"+e,gSys.GameMsg(t,!1,"充值提示")),void(s&&s.runWith(0));if(!IapProduct.isstruct(i[0]))return t="内购错误返回代码错误:"+i,void(s&&s.runWith(0));t=i[0][0];var o=i[1],l=ArrOp.GetStrVal("iaptotalrmb",r.m_szData.nameddata);r.m_szData.nameddata=ArrOp.SetStrVal("iaptotalrmb",r.m_szData.nameddata,l+i[0][4]);var u=new StringRef,c=[Laya.stage.width/2,Laya.stage.height/2,0,"",5];return r.ChgItemSz(o,u,OPEnum.OP_N_GM,c,1)?(gSys.GameMsg("购买成功",!1,"充值提示"),r.CheckUserIapCal(i[0]),void(s&&s.runWith(1))):(t="ChgItemSz err:"+i,void(s&&s.runWith(0)))}var r=this,h=IOS_iap.GetProductItem(t);if(!h)return n>=3&&(t="无效产品",gSys.GameMsg(t,!1,"充值提示")),void(s&&s.runWith(0));DateOp.GetLocalTime();this.CallSvrRet("PendingIAP",[t,e],Handler.create(this,a),5e4)},i.CheckUserIapCal=function(t){this.CheckSetFirIapBuy(t[0]),this.CheckSetActBuy(t[0]),this.AddUserIapMonthLog(t[4]),this.CheckAddVipRecharge(t)},i.AddUserIapMonthLog=function(t){var e,i=DateOp.GetLocalTime();return e=ArrOp.GetStrVal("useriapmonthlog",DataTable.m_iSelfUser.m_szData.nameddata),e&&12==e.length||(e=ArrOp.InitSz(12,[i.getFullYear(),0,0])),i.getMonth()<1||i.getMonth()>12?void gSys.Err("log month err"):(e[i.getMonth()-1][0]!=i.getFullYear()&&(e[i.getMonth()-1]=[i.getFullYear(),0,0]),e[i.getMonth()-1][1]+=t,void(DataTable.m_iSelfUser.m_szData.nameddata=ArrOp.SetStrVal("useriapmonthlog",DataTable.m_iSelfUser.m_szData.nameddata,e)))},i.CompletedPurchase=function(t,e,i,n){void 0===n&&(n=!1);var s=IOS_iap.GetProductItem(e),a="商品";if(s&&IapProduct.isstruct(s)){a=s[5];var r;if(r=ArrOp.GetStrVal("iaptotalrmb",this.m_szData.nameddata),r=r?r:0,this.m_szData.nameddata=ArrOp.SetStrVal("iaptotalrmb",this.m_szData.nameddata,r+s[4]),this.CheckUserIapCal(s),!n){var h=new StringRef,o=[Laya.stage.width/2,Laya.stage.height/2,0,"",5];i&&!this.ChgItemSz(i,h,OPEnum.OP_N_GM,o,1)}}this.CallSvr("OnDelPayData",t),DataTable.m_iSelfUser.Emit("iapok"+e,[]);var l="您购买的 $ 已经发货，请查收";l=l.replace("$",a),DataTable.m_iSelfUser.Emit("SCCG",null),MessageBox.show(2,{title:"提示",content:l,closeOnlyByMe:!1,closeOther:!1})},i.DelPayData=function(){var t=ArrOp.GetStrVal("userpaydata",this.m_szData.nameddata);if(t&&t.length)for(var e=0;e<t.length;e++)this.CompletedPurchase(t[e][0],t[e][1],t[e][2],!0)},i.CheckAddVipRecharge=function(t){if(!IapProduct.isstruct(t))return void gSys.Err("CheckAddVipRecharge err");var e,i=0;switch(t[2]){case 0:e=t[7],e&&2==e.length&&(i+=e[1]);break;case 1:e=t[7],e>0&&(i+=e);break;default:i+=.68*t[3]}if(i>0){var n=0;n=ArrOp.GetStrVal("totaldiamondbuy",this.m_szData.nameddata),n=n?n:0,this.m_szData.nameddata=ArrOp.SetStrVal("totaldiamondbuy",this.m_szData.nameddata,n+i)}this.CalVipLevel()},i.CheckSetFirIapBuy=function(t){var e=ArrOp.SzAddRef(t,1,this.m_szData.sziapid);return"d"!=t.charAt(0)?0:this.m_szData.sziapid[e][1]>1?0:(this.Emit("firiapbuychg",[]),1)},i.CheckSetActBuy=function(t){if("c"!=t.charAt(0)){var e=IOS_iap.GetProductItem(t);this.SetSignMoney(e[4]),this.LogGameTag("get_活动_充值金额",e[4]),this.LogGameTag("get_活动_单笔充值",e[4],4),StringOp.Compare(t,"j1004")&&this.SetGiftPickRec(3),StringOp.Compare(t,"j1005")&&this.SetGiftPickRec(4)}var i,n=0,s=(DataTable.m_iSelfUser.GetSvrLocalTime(),DataTable.m_iQuestTab.m_szActQuest);if(s)for(var a=0;a<s.length;a++)StringOp.Compare(s[a][15],t)&&(i=this.GetQuestData(s[a][0]),!i||i.length<1?gSys.Err("iap quest data err id : "+s[a][0]):(this.SetQuestData(s[a][0]),n=1));return"c"==t.charAt(0)?1:((!this.GetFirRecharge()||n)&&gSys.SetSignal("iapchg"),1)},i.GetTvData=function(t){function e(){Log1.debug(5,"luohuantao---请求报纸数据返回错误--")}function i(e){return a=e,a.length<2?void t.runWith([[n.m_nTvRefreshT,n.m_szTvData]]):a[0].length<1?void t.runWith([[n.m_nTvRefreshT,n.m_szTvData]]):(n.m_szTvData=a[0],n.m_nTvRefreshT=a[1],void t.runWith([[n.m_nTvRefreshT,n.m_szTvData]]))}var n=this;if(!this.m_nNetLinkOk)return gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),void t.runWith([[this.m_nTvRefreshT,this.m_szTvData]]);var s=gSys.GetCurSecAdj();if(s-this.m_nGetTvTime<5)return void t.runWith([[this.m_nTvRefreshT,this.m_szTvData]]);this.m_nGetTvTime=s;var a;csvr.call(PubDef.BZFWM(this.m_nUid),"c_GetLvTvItem",[this.GetLevel(),this.m_nTvRefreshT],Handler.create(this,i),Handler.create(this,e),0)},i.GetRecTBySysSell=function(t){var e=0;return 100>t?(e=1,Math.ceil(60*e)):1e3>t?(e=t/100,Math.ceil(60*e)):1e4>t?(e=10+(t-1e3)/1e3*1.11,Math.ceil(60*e)):1e5>t?(e=20+(t-1e4)/1e4*11.11,Math.ceil(60*e)):1e6>t?(e=120+(t-1e5)/1e4*2.67,Math.ceil(60*e)):(e=360,Math.ceil(60*e))},i.GetRecTBySubSell=function(t){var e=0;return 100>t?(e=3,Math.ceil(60*e)):1e3>t?(e=t/100*3,Math.ceil(60*e)):1e4>t?(e=30+(t-1e3)/1e3*3.33,Math.ceil(60*e)):1e5>t?(e=60+(t-1e4)/1e4*33.33,Math.ceil(60*e)):1e6>t?(e=360+(t-1e5)/1e4*8,Math.ceil(60*e)):(e=1080,Math.ceil(60*e))},i.GetItemRecyCd=function(t,e,i,n,s,a){if(1>i)return 0;var r=0;r=Math.floor(e/i),1>r&&(r=1);var h;if(h=DataTable.m_iItemTab.Get(t),null==h)throw new Error("item not find id="+t);var o=3.3*h[6];if(1>o)throw new Error("GetItemRecyCd 物品价值为0 err： itemid="+t);var l=Math.floor(1*r/o),u=n-2*s;0>u&&(u=0);var c=this.GetRecTBySysSell(n)+this.GetRecTBySubSell(u);return a?c/=2:c=c/2+l*c,Math.ceil(c)},i.OnSellItem=function(t,e,i,n,s){function a(){gSys.Err("OnGetBoxItemByDia CheckMakeItemSz err")}function r(){function a(t){var n=t;return GameMain._ins.removeLoading(),n&&n.length?(o[3][n[1]]=n[2],o[2]=n[3],o[0]=n[4],o[1]=n[5],n[6]&&n[6]instanceof Array&&n[6].length>0&&(r=new StringRef,!h.ChgItemSz(n[6],r,OPEnum.OP_LBT_MC,null))?void gSys.Err("OnGetBoxItemByDia ChgItemSz err="+r):(h.SetMarketData(o),GMapView.lubiantan.OnSysBuildData(4,o),s>0&&h.LogGameTag("get_广告次数",1),h.LogGameTag("sell_路边摊_放入",i),void h.LogGameTag("sell_路边摊_放入_"+e,i))):void gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能")}var r=new StringRef;h.ChgItemSz(l,r,OPEnum.OP_LBT_MC,null,0,1)&&(GameMain._ins.addLoading(),Log1.info('GSysWait::Begin(@"努力上货呢");'),h.CallSvrRet("AddSellItem",[t,e,i,n,s,l,DataTable.m_iSelfFrd.GetVisu()],Handler.create(h,a)))}var h=this;if(!this.m_nNetLinkOk)return void gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能");if(!(1>i)){var o=this.GetMarketData();if(!o||!o.length)return void gSys.Err("get 路边摊ID data nill");if(0>t||t>=o[3].length)return void gSys.Err("get 路边摊ID data box no err:"+t+" "+o[3]);if(o[3][t]=o[3][t]||[],o[3][t].length>0)return void gSys.Err("OnAddSellItem 该位置已经有物品了: no="+t+";data="+o[3]);var l=[[e,-i]];this.CheckMakeItemSz(l,0,0,Handler.create(this,r),Handler.create(this,a))}},i.OnBuySellItem=function(t,e,i,n){function s(){n.ReEnableItem(t)}function a(){function e(t){var e=t;return!e||e.length<1?void gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"):0==e[0]?void r.ChgItemSz(u,s,n,i,0):void(8==e[0]?gSys.GameMsg("背包已满"):gSys.GameMsg("该物品已售出！"))}var n=DataTable.m_iOtherUser.GetUID()<1e3?OPEnum.OP_LBT_GM_NPC:OPEnum.OP_LBT_GM,s=new StringRef;return r.ChgItemSz(u,s,n,i,0,1)?void r.CallSvrRet("BuySellItem",[DataTable.m_iOtherUser.GetUID(),DataTable.m_iOtherUser.GetSvrName(),t,u],Handler.create(r,e),15e3,!0,1):void gSys.GameMsg(s.ustr,!0,"无法操作")}var r=this;if(!this.m_nNetLinkOk)return void gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能");if(0==e[5]){var h=e[1],o=e[2],l=e[3],u=[[1,-l],[h,o]];this.CheckMakeItemSz(u,0,0,Handler.create(this,a),Handler.create(this,s))}},i.OnGetSellMoney=function(t,e,i){var n=this,s=this.GetMarketData();if(!s||!s.length)return gSys.Err("get 路边摊ID data null"),0;if(0>t||t>=s[3].length)return gSys.Err("get 路边摊ID data box no err:"+t+" "+s[3]),0;if(s[3][t].length<1)return gSys.Err("OnGetSellMoney 没有出售的物品: no="+t+";data="+s[3]),0;var a=s[3][t];if(1!=a[5])return gSys.Err("not sell err:"+t+" "+a),0;var r=a[3],h=[];return h.push([1,r]),this.CheckMakeItemSz(h,0,0,Handler.create(this,_succ=function(){var e=new StringRef,r=OPEnum.OP_LBT_SQ;return a[7]<1e3&&(r=OPEnum.OP_LBT_SNPCQ),n.ChgItemSz(h,e,r,i)?(s[3][t]=null,n.SetMarketData(s),GMapView.lubiantan.OnSysBuildData(4,s),void n.CallSvr("GetSellMoney",[t,h])):void gSys.Err("OnGetEvaGold ChgItemSz err="+e)})),1},i.OnAddSellMax=function(t){var e=this,i=this.GetMarketData();if(!i||!i.length)return gSys.Err("get 路边摊ID data nill"),0;var n=[[2,-15]];return this.CheckMakeItemSz(n,0,0,Handler.create(this,_succ=function(){function s(s){if(r=s,!r||!r.length)return gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),0;if(0!=r[0]){var h="使用钻石最多可以扩展{d}个栏位";return h=h.replace("{d}",r[1]+""),gSys.GameMsg(h),0}return i[4]=r[1],i[3]=i[3]||[],i[3].push([]),e.SetMarketData(i),GMapView.lubiantan.OnSysBuildData(4,i),n=r[2],e.ChgItemSz(n,a,OPEnum.OP_LBT_ZJ_DL,t),1}var a=new StringRef;if(e.ChgItemSz(n,a,OPEnum.OP_LBT_ZJ_DL,t,0,1)){var r;e.CallSvrRet("AddSocketByDiamond",[],Handler.create(e,s))}})),1},i.EndAdCd=function(t,e,i){var n=this,s=this.GetMarketData();s&&s.length||(gSys.Err("get 路边摊ID data nill"),i.runWith(0));var a=gSys.GetCurSecAdj();a-s[2]>0&&(gSys.Err("EndAdCd 广告没在冷却中"),i.runWith(0));var r=[];e?r.push([25,-1]):r.push([2,-1]),this.CheckMakeItemSz(r,0,0,Handler.create(this,_succ=function(){function a(e){if(o=e,!o||!o.length)return gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),i.runWith(0),0;if(0!=o[0]){s[2]=0,n.SetMarketData(s);var a="广告尚未冷却，无需加速";return gSys.GameMsg(a),i.runWith(1),1}return r=o[2],n.ChgItemSz(r,h,OPEnum.OP_LBT_XC_CD,t),s[2]=0,n.SetMarketData(s),GMapView.lubiantan.OnSysBuildData(4,s),i.runWith(1),1}var h=new StringRef;n.ChgItemSz(r,h,OPEnum.OP_LBT_XC_CD,t,0,1)||i.runWith(0);var o;n.CallSvrRet("EndAdCd",e,Handler.create(n,a))}),Handler.create(this,_fail=function(){i.runWith(0)}))},i.AddSellAd=function(t,e,i){if(!this.m_nNetLinkOk)return gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),0;var n=this.GetMarketData();if(!n||!n.length)return gSys.Err("get 路边摊ID data nill"),0;if(0>t||t>=n[3].length)return gSys.Err("get 路边摊ID data box no err:"+t+" "+n[3]),0;if(n[3][t].length<1)return gSys.Err("AddSellAd 未找到该物品: no="+t),0;if(1==e[5])return gSys.Err("AddSellAd 该物品已售出: "+t),0;var s=gSys.GetCurSecAdj();return s-e[4]<0?(gSys.Err("AddSellAd 广告冷却中"),0):(e[4]=s+10800,e[6]=s,e[8]=this.GetItemRecyCd(e[1],e[3],e[2],n[7],n[6],1),n[2]=s+1800,n[3][t]=e,this.SetMarketData(n),GMapView.lubiantan.OnSysBuildData(4,n),this.CallSvr("AddSellAd",[t]),this.LogGameTag("get_广告次数",1),1)},i.DelSell=function(t,e,i){var n=this;if(!this.m_nNetLinkOk)return gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),0;var s=this.GetMarketData();if(!s||!s.length)return gSys.Err("get 路边摊ID data nill"),0;if(0>t||t>=s[3].length)return gSys.Err("get 路边摊ID data box no err:"+t+" "+s[3]),0;if(s[3][t].length<1)return gSys.Err("DelSell 未找到该物品: no="+t),0;if(1==e[5])return gSys.Err("DelSell 该物品已售出: "+t),0;s[3][t]=null;var a=1,r=[];return r.push([2,-a]),this.CheckMakeItemSz(r,0,0,Handler.create(this,_succ=function(){var e=new StringRef;return n.ChgItemSz(r,e,OPEnum.OP_LBT_KW,i)?(n.SetMarketData(s),GMapView.lubiantan.OnSysBuildData(4,s),void n.CallSvr("DelSell",[t,r])):void gSys.Err("DelSell ChgItemSz err="+e)})),1},i.SetTradeSvrPath=function(t){function e(t){if(3==t.length){i.m_szTradeItems=t[0],i.m_szTradeTools=t[1];for(var e=[],n=0;n<t[2].length;n++)e=t[2][n],0==e[4]?i.m_szTradeTools.push(e):i.m_szTradeItems.push(e)}}var i=this;csvr.call(t,"linkuser",this.m_nUid,Handler.create(this,e),null,0)},i.NotiTradeStgateChged=function(t){var e=0;0==t[4]?(e=ArrOp.SzSearch(t[0],this.m_szTradeTools),e>=0?this.m_szTradeTools[e]=t:this.m_szTradeTools.push(t)):(e=ArrOp.SzSearch(t[0],this.m_szTradeItems),e>=0?this.m_szTradeItems[e]=t:this.m_szTradeItems.push(t)),this.Emit("WorldTradeStgateChged",t)},i.NotiMutiTradeStgateChged=function(t){for(var e=0;e<t.length;e++)t[e]&&t[e]instanceof Array&&!(t[e].length<3)&&t[e][0]!=this.GetUID()&&this.NotiTradeStgateChged(t[e][2])},i.GetWorldTradeDataByKind=function(t){return 0==t?this.m_szTradeTools:this.m_szTradeItems},i.GetAllToolsID=function(){var t=[],e=0;for(e=10;15>=e;e++)t.push(e);for(e=19;21>=e;e++)t.push(e);return t},i.IsHaveTradeToGetByKind=function(t){var e,i=0;e=0==t?this.m_szTradeTools:this.m_szTradeItems;var n=gSys.GetCurSecAdj();for(i=0;i<e.length;i++)if(UserTradeData.isstruct(e[i])&&e[i][1]==this.GetUID()&&!(4==e[i][5]||2!=e[i][5]&&e[i][8]>=n))return 1;return 0},i.GetMyTradeCountByKind=function(t){var e;e=0==t?this.m_szTradeTools:this.m_szTradeItems;var i=0,n=0,s=0;for(n=0,s=e.length;s>n;n++)UserTradeData.isstruct(e[n])&&e[n][1]==this.GetUID()&&4!=e[n][5]&&i++;return i},i.GetMaxVipTradeFreeTimes=function(t){return 0==t?this.IsCanVipFunc(60002)?this.IsCanVipFunc(80003)?4:this.IsCanVipFunc(70003)?3:2:0:this.IsCanVipFunc(40004)?this.IsCanVipFunc(60004)?4:this.IsCanVipFunc(50002)?3:2:0},i.GetVipWorldTradeFreeTimes=function(t){var e,i,n=this.GetMaxVipTradeFreeTimes(t);if(i=0==t?"viptradetool":"viptradeitem",e=ArrOp.GetStrVal(i,this.m_szData.nameddata),!e||2!=e.length)return n;var s=0;if(s=gSys.GetCurSecAdj(),Math.round(s/86400)!=Math.round(e[0]/86400))return n;var a=n-e[1];return 0>a&&(a=0),a},i.UseVipWorldTradeFreeTime=function(t){var e,i;i=0==t?"viptradetool":"viptradeitem",e=ArrOp.GetStrVal(i,this.m_szData.nameddata);var n=0;n=gSys.GetCurSecAdj(),e=e&&2==e.length?Math.round(n/86400)!=Math.round(e[0]/86400)?[n,1]:[n,e[1]+1]:[n,1],this.m_szData.nameddata=ArrOp.SetStrVal(i,this.m_szData.nameddata,e)},i.AddVipTime=function(t,e){if(void 0===e&&(e=0),!(0>t)){var i=this.GetVipData(e),n=0;n=gSys.GetCurSecAdj(),i[VipData.endtime]<n?i[VipData.endtime]=n+24*t*3600:i[VipData.endtime]+=24*t*3600,this.SetVipData(i,e),this.Emit("addmonthdia",e)}},i.OnAskForTradeItem=function(t,e,i,n,s,a,r,h,o){function l(){DataTable.m_iSelfUser.CallSvrRet("OnAskForTradeItem",[e,i,n,s,a,r,d,o],Handler.create(u,function(i){if(!UserTradeData.isstruct(i))return-100==i&&gSys.GameMsg("队列已满,请稍后再试",!1),gSys.Err("求购失败"),u.m_nWorldTradeLock=0,void(t&&t.runWith(c));var n=new StringRef;return u.ChgItemSz(d,n,m,h)?(1>r&&u.UseVipWorldTradeFreeTime(e),u.NotiTradeStgateChged(i),c=1,u.m_nWorldTradeLock=0,void(t&&t.runWith(c))):(gSys.Err("c_OnAskForItem ChgItemSz err"),u.m_nWorldTradeLock=0,void(t&&t.runWith(c)))}))}var u=this;if(void 0===r&&(r=0),void 0===o&&(o=0),this.m_nWorldTradeLock)return gSys.GameMsg("正在处理中,请稍后...",!1),void(t&&t.runWith(0));var c=0;if(this.m_nWorldTradeLock=1,1>r&&this.GetVipWorldTradeFreeTimes(e)<=0)return gSys.GameMsg("您今天的VIP免费求购次数已用完",!1),this.m_nWorldTradeLock=0,void(t&&t.runWith(c));if(1>i||1>n||n>10)return gSys.Err("c_OnAskForItem item err:",i,n),this.m_nWorldTradeLock=0,void(t&&t.runWith(c));var _=this.GetMyTradeCountByKind(e);if(_>=5)return gSys.GameMsg("每人最多同时发布5条信息",!1),this.m_nWorldTradeLock=0,void(t&&t.runWith(c));var m=0;m=0==e?OPEnum.OP_SJJY_QG:OPEnum.OP_SJJY_QH;var d=[];d.push([s,-a]),r>0&&d.push([2,-r]),this.CheckMakeItemSz(d,0,0,Handler.create(this,l),Handler.create(this,function(){throw new Error("c_OnAskForItem CheckMakeItemSz err")}))},i.OnSellTradeItem=function(t,e,i){function n(){var n=[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],"D{"+e[9]+"}","D{"+e[10]+"}"];DataTable.m_iSelfUser.CallSvrRet("OnSellTradeItem",[n,h],Handler.create(s,function(n){if(!UserTradeData.isstruct(n))return-5==n&&(a=-5,gSys.GameMsg("该订单已过期",!1),e[5]=3,s.NotiTradeStgateChged(e)),gSys.Err("OnSellTradeItem fail"),s.m_nWorldTradeLock=0,void(t&&t.runWith(a));var o=new StringRef;return s.ChgItemSz(h,o,r,i)?(s.NotiTradeStgateChged(n),a=1,s.m_nWorldTradeLock=0,void(t&&t.runWith(a))):(gSys.Err("OnSellItem ChgItemSz err"),s.m_nWorldTradeLock=0,void(t&&t.runWith(a)))}))}var s=this;if(this.m_nWorldTradeLock)return gSys.GameMsg("正在处理中,请稍后...",!1),void(t&&t.runWith(0));var a=0;if(this.m_nWorldTradeLock=1,e[1]==this.GetUID())return gSys.GameMsg("不能购买自己的订单",!1),this.m_nWorldTradeLock=0,void(t&&t.runWith(a));var r=0;r=0==e[4]?OPEnum.OP_SJJY_HC:OPEnum.OP_SJJY_MC;var h=[];h.push([e[6][0],e[6][1]]),h.push([e[7][0],-e[7][1]]),this.CheckMakeItemSz(h,0,0,Handler.create(this,n),Handler.create(this,function(){gSys.Err("OnSellItem CheckMakeItemSz err"),s.m_nWorldTradeLock=0,t&&t.runWith(a)}))},i.GetMyTradeRec=function(t,e,i){function n(){var n=[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],"D{"+e[9]+"}","D{"+e[10]+"}"];DataTable.m_iSelfUser.CallSvrRet("GetMyTradeRec",[n,o],Handler.create(s,function(e){if(!UserTradeData.isstruct(e))return gSys.Err("GetMyTradeRec fail"),s.m_nWorldTradeLock=0,void(t&&t.runWith(r));var n=new StringRef;return s.ChgItemSz(o,n,h,i)?(s.NotiTradeStgateChged(e),r=1,s.m_nWorldTradeLock=0,void(t&&t.runWith(r))):(gSys.Err("GetMyTradeRec 取回失败"),s.m_nWorldTradeLock=0,void(t&&t.runWith(r)))}))}var s=this;if(this.m_nWorldTradeLock)return gSys.GameMsg("正在处理中,请稍后...",!1),void(t&&t.runWith(0));this.m_nWorldTradeLock=1;var a,r=0,h=0;if(e[3]>0?(a=e[7],h=0==e[4]?OPEnum.OP_SJJY_LQJH:OPEnum.OP_SJJY_LQQG):(a=e[6],h=0==e[4]?OPEnum.OP_SJJY_GQJH:OPEnum.OP_SJJY_GQQG),a.length<2)return gSys.Err("GetMyTradeRec item err",e),this.m_nWorldTradeLock=0,void(t&&t.runWith(r));var o=[];o.push([a[0],a[1]]),this.CheckMakeItemSz(o,0,0,Handler.create(this,n),Handler.create(this,function(){gSys.Err("GetMyTradeRec CheckMakeItemSz err"),s.m_nWorldTradeLock=0,t&&t.runWith(r)}))},i.OnGetGBr=function(t,e){switch(t){case"USERTRADE":this.NotiMutiTradeStgateChged(e);break;case"HORNCHAT":if(3!=e.length)return;DataTable.m_iSelfFrd.OnReciveMessage(e[0],e[2])}},i.BuyBlockByDiamond=function(t){var e=this;if(1>t||t>1e3)return void gSys.GameMsg("购买地块数量错误");var i,n=10*t;i.push([2,-n]),i.push([6,t]);var s="您确认使用钻石换取"+t+"个地块";MessageBox.show(3,{title:"确认购买",content:s,lbtn:"确认",rbtn:"取消",closeOther:!1},Handler.create(this,function(){e.CheckMakeItemSz(i,0,0,Handler.create(this,function(){var n=new StringRef,s=[200,200];return e.ChgItemSz(i,n,OPEnum.OP_SD_GM,s)?(e.CallSvr("OnBuyBlock",[t,i]),void e.LogGameTag("get_购买地块数量",t)):void gSys.Err("OP_商店购买 ChgItemSz err="+n)}))}))},i.BuyBlockFromShop=function(t){var e=this,i=this.GetBlockCountFromShop();if(i>=100)return gSys.GameMsg("勋章最多可以购买100个地块",!1,"购买地块"),void t.runWith(!1);var n,s=this.GetBlockPriceFromShop();if(this.GetMedal()<s)return n="不足%个勋章购买10个地块",n=n.replace("%",s+""),gSys.GameMsg(n,!1,"勋章不足"),void t.runWith(!1);var a=10,r=[];r.push([9,-s]),r.push([6,a]),n="您确认使用勋章换取"+a+"个地块",MessageBox.show(3,{title:"确认购买",content:n,lbtn:"确认",rbtn:"取消",closeOther:!1},Handler.create(this,function(){e.CheckMakeItemSz(r,0,0,Handler.create(this,function(){var n=new StringRef,s=[200,200];return e.ChgItemSz(r,n,OPEnum.OP_SD_GM,s)?(e.CallSvr("OnBuyBlockFromShop",[a,r]),e.SetBlockCountFromShop(i+10),e.LogGameTag("get_购买地块数量",a),void t.runWith(!0)):void gSys.Err("OP_商店购买 ChgItemSz err="+n)}))}),Handler.create(this,function(){t.runWith(!1)}))},i.GetRealUserVisit=function(t){var e=this;return this.m_nNetLinkOk?void this.CallSvrRet("GetRealUserVisit","NIL",Handler.create(this,function(i){return UserVisitData.isstruct(i)?(e.SetUserVisit(i),void t.runWith([i])):void t.runWith([e.GetUserVisit()])})):void t.runWith([this.GetUserVisit()])},i.GetFriPetHunt=function(){var t;return t=ArrOp.GetStrVal("fripethunt",this.m_szData.nameddata)},i.SetFriPetHunt=function(t){this.m_szData.nameddata=ArrOp.SetStrVal("fripethunt",this.m_szData.nameddata,t)},i.GetPetBuildData=function(t,e){if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("GetPetBuildData mapszno err:  "+t+"-"+this.m_szData.mapdata.length),null;var i=new MapItem;return i.copyfrom(this.m_szData.mapdata[t]),i.itemid!=e?(gSys.Err("GetPetBuildData mapszno id check err:  "+i.itemid+"-"+e),null):i},i.RereshHuntRndItem=function(t,e,i){var n=this;if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("mapsz err"),null;var s=new MapItem;if(s.copyfrom(this.m_szData.mapdata[t]),s.itemid!=e)return gSys.Err("mapsz id err"),null;if(s.data.length>=5){if(s.data[3].length>0)return s.data[3]}else s.data=[0,"NIL","NIL","NIL",0];return this.CallSvrRet("RereshHuntRndItem",[t,e],Handler.create(this,showHandler=function(e){var a=e;return a.length<1?void gSys.Err("Get pet rnd Item Err"):(s.data[3]=a,n.m_szData.mapdata[t].copyfrom(s),void i.runWith([a]))})),[]},i.OnPetHunt=function(t,e){var i=this;if(this.m_nPetHuntLock)return 0;this.m_nPetHuntLock=1;var n=0;if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("OnPetHunt mapszno err:  "+t+"-"+this.m_szData.mapdata.length),this.PETHUNTOVER(),1;var s=0,a=new MapItem;a.copyfrom(this.m_szData.mapdata[t]),a.data.length>=5&&(s=a.data[4]),5701==a.itemid&&(s=1);var r=DataTable.m_iPetHuntTab.Get(a.itemid);if(r.length<1)return gSys.Err("OnPetHunt huntid err:",a.itemid),this.PETHUNTOVER(),1;if(e.length<r[2])return gSys.Err("OnPetHunt petnum not enough:",e.length),this.PETHUNTOVER(),1;if(e.length>r[3]+1)return gSys.Err("OnPetHunt petnum too many:",e.length),this.PETHUNTOVER(),1;var h,o=gSys.GetCurSecAdj();h=this.GetFriPetHunt(),h&&2==h.length?Math.floor(o/86400)!=Math.floor(h[0]/86400)&&(h=[o,"NIL"]):h=[o,"NIL"];var l=0,u=0,c=new MapItem,_=0,m=0;for(l=0;l<e.length;l++)if(u=e[l][0],0>u){if(_>0)return gSys.Err("OnPetHunt only one fripet can out"),this.PETHUNTOVER(),1;_=e[l][3]}else{if(u>=this.m_szData.mapdata.length)return gSys.Err("OnPetHunt petbuild no err"),this.PETHUNTOVER(),1;if(c.copyfrom(this.m_szData.mapdata[u]),2==c.data.length&&0!=c.data[0]&&1==c.data[0])return gSys.Err("OnPetHunt petbuild hungry"),this.PETHUNTOVER(),1;m++}if(1>m)return gSys.Err("need at least one own pet"),this.PETHUNTOVER(),1;if(_>0){var d=ArrOp.SzSearch(_,h[1]);if(d>=0)return gSys.Err("OnPetHunt one fripet oneday once"),this.PETHUNTOVER(),1}return this.CallSvrRet("OnPetHunt",[t,e],Handler.create(this,retHandler=function(r){var c=r;if(!c||2!=c.length)return gSys.Err("OnPetHunt CallSvrRet err:  "+csvr.retflag+";ret="+c),void i.PETHUNTOVER();var m=[];for(l=0;l<e.length;l++)u=e[l][0],0>u||u>=i.m_szData.mapdata.length||i.m_szData.mapdata[u]instanceof net.MapItem&&(2!=i.m_szData.mapdata[u].data.length?i.m_szData.mapdata[u].data=[2,0]:i.m_szData.mapdata[u].data[0]=2,m.push(u));h[1]instanceof Array||(h[1]=[]),h[1].push(_),a.data=[o,e,c[0],c[1],s],i.SetFriPetHunt(h),GPetHuntDlg.getInstance().m_pLink.OnBuildData(t,a),DataTable.m_iSelfView.OnPetDataChged(m),n=1,i.PETHUNTOVER()})),1},i.PETHUNTOVER=function(){this.m_nPetHuntLock=0,this.LogGameTag("get_宠物寻宝次数",1)},i.PetHuntOverByDia=function(t,e,i,n,s,a){var r=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("mapsz err");var h=new MapItem;if(h.copyfrom(this.m_szData.mapdata[t]),h.itemid!=e.itemid)return void gSys.Err("mapszno id err");var o=DataTable.m_iPetHuntTab.Get(e.itemid);if(o.length<1)return void gSys.Err("PetHuntOverByDia huntid not find:"+e.itemid);if(h.data.length<5)return void gSys.Err("PetHuntOverByDia data err:"+h.data);if(h.data[2].length<1)return void gSys.Err("PetHuntOverByDia no reward can get:"+e.itemid);var l=gSys.GetCurSecAdj();if(l-h.data[0]>=o[1])return void gSys.Err("PetHuntOverByDia no need quick over:"+e.itemid);var u=0;u=this.GetJszsfy(i,o[1]);var c=[];s?c.push([25,-u]):c.push([2,-u]),this.CheckMakeItemSz(c,0,0,Handler.create(this,okk=function(){var h=new StringRef;return r.ChgItemSz(c,h,OPEnum.OP_XB_JS,n)?(r.m_szData.mapdata[t].copyfrom(e),r.CallSvr("PetHuntOverByDia",[t,e,i,c,s]),void a.run()):void gSys.Err("PetHuntOverByDia ChgItemSz err")}),Handler.create(this,noo=function(){Log1.error("PetHuntOverByDia CheckMakeItemSz err")}))},i.GetPetHuntReward=function(t,e,i,n){var s=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("mapsz err");var a=new MapItem;if(a.copyfrom(this.m_szData.mapdata[t]),a.itemid!=e.itemid)return void gSys.Err("mapszno id err");var r=DataTable.m_iPetHuntTab.Get(e.itemid);if(r.length<1)return void gSys.Err("GetPetHuntReward huntid not find:"+e.itemid);
if(a.data.length<3)return void gSys.Err("GetPetHuntReward huntid not find:"+e.itemid);if(a.data[2].length<1)return void gSys.Err("GetPetHuntReward no reward can get:"+e.itemid);var h=gSys.GetCurSecAdj();if(h-a.data[0]<r[1])return void gSys.Err("GetPetHuntReward in hunt err:"+e.itemid);var o=a.data[2];this.CheckMakeItemSz(o,0,0,Handler.create(this,okHpet=function(){var i=new StringRef;if(!s.ChgItemSz(o,i,OPEnum.OP_CW_XB,null,1,0,0,"","chggift"))return void gSys.Err("GetPetHuntReward ChgItemSz err");for(var r=new MapItem,h=[],l=a.data[1],u=0;u<l.length;u++){var c=l[u][0];if(!(0>c)){var _=0;if(c>=s.m_szData.mapdata.length?_=1:(r.copyfrom(s.m_szData.mapdata[c]),r.itemid!=l[u][1]&&(_=1)),_){var m=GMB_Pet.findPet(l[u][1]);if(!m){gSys.GameMsg("没有找到该宠物:  "+l[u][1]);continue}c=m.m_nMapDataNo,r.copyfrom(s.m_szData.mapdata[c]),l[u][0]=c}else r.copyfrom(s.m_szData.mapdata[c]);2!=r.data.length?3==r.data.length?r.data=[1,r.data[2]]:r.data=[1,0]:r.data[0]=1,s.m_szData.mapdata[c].copyfrom(r),h.push(c)}}s.AddMulEvaBuild(o),s.m_szData.mapdata[t].copyfrom(e),DataTable.m_iSelfView.OnPetDataChged(h),s.CallSvr("GetPetHuntReward",[t,e,o,l]),n.runWith([o])}))},i.OnAddHuntQueMax=function(t,e,i,n,s){var a=this;(0>t||t>=this.m_szData.mapdata.length)&&(gSys.Err("mapsz err"),s&&s.run());var r=new MapItem;r.copyfrom(this.m_szData.mapdata[t]),r.data.length<5&&(gSys.Err("mapszno id err"),s&&s.run());var h=DataTable.m_iPetHuntTab.Get(r.itemid);h.length<1&&(gSys.Err("OnAddHuntQueMax huntid not find:"+r.itemid),s&&s.run()),(1>e+1||e+1>h[3])&&(gSys.Err("OnAddHuntQueMax out of max:"+(e+1)+","+h[3]),s&&s.run());var o=10+50*e,l=[];l.push([2,-o]),this.CheckMakeItemSz(l,0,0,Handler.create(this,function(){var h=new StringRef;a.ChgItemSz(l,h,OPEnum.OP_CWM_KG,i)||(gSys.Err("OnAddHuntQueMax "+h),s&&s.run()),r.data[4]++,a.m_szData.mapdata[t].copyfrom(r),a.CallSvr("OnAddHuntQueMax",[t,e,r.itemid]),n&&n.run()}),Handler.create(this,function(){s&&s.run()}))},i.OnFeedPet=function(t,e,i,n){var s=this;if(0>t||t>=this.m_szData.mapdata.length)return void gSys.Err("OnFeedPet mapszno err:  "+t+"-"+this.m_szData.mapdata.length);var a=new MapItem;if(a.copyfrom(this.m_szData.mapdata[t]),a.itemid!=e.itemid)return void gSys.Err("mapszno id err");var r=DataTable.m_iPetTab.Get(e.itemid);if(r.length<1)return void gSys.Err("OnFeedPet pet not find:  "+e.itemid);var h=r[5];if(h.length<1)return void gSys.Err("OnFeedPet pet no food:  "+e.itemid);var o=e.data[1]%h.length,l=[];l.push([h[o][0],-h[o][1]]),this.CheckMakeItemSz(l,0,0,Handler.create(this,okFeedPet=function(){var a=new StringRef;if(!s.ChgItemSz(l,a,OPEnum.OP_CW_WY,i))return void gSys.Err("GetItemByBuild "+a);var h=0;h=s.GetPetCurLucky(r[3],r[4],e.data[1]);var o=s.GetBestPet();o.length<1?s.SetBestPet([e.itemid,h]):h>o[1]&&s.SetBestPet([e.itemid,h]),s.m_szData.mapdata[t].copyfrom(e),s.CallSvr("OnFeedPet",[t,e,l]),s.LogGameTag("feed_pet",1),n.run()}))},i.test_SetPetLucky=function(t,e){if(0>t||t>=this.m_szData.mapdata.length)return gSys.Err("test_SetPetLucky mapszno err:  "+t+"-"+this.m_szData.mapdata.length),0;var i=new MapItem;return i.copyfrom(this.m_szData.mapdata[t]),i.itemid!=e.itemid?(gSys.Err("mapszno id err"),0):(this.m_szData.mapdata[t].copyfrom(e),this.CallSvr("test_SetPetLucky",[t,e]),1)},i.test_ClearFriPetHunt=function(){return this.SetFriPetHunt(null),this.CallSvr("test_ClearFriPetHunt","NIL"),1},i.CheckGmRechargeGift=function(t){if(this.m_nLevel<=30)return void t.runWith(null);var e;this.CallSvrRet("GetPushRechargeGiftData","NIL",Handler.create(this,GetPushRech=function(i){return e=i,!e||e.length<1?void t.runWith(null):void t.runWith([e])}))},i.CheckFriIapShow=function(t,e,i){var n,s=this;this.CheckGmRechargeGift(Handler.create(this,checkGm=function(a){if(n=a,null!=n)return e=0,void i.runWith([n,e]);e=1;var r=IOS_iap.GetFirRecSz();if(s.m_nLevel<r[0][0])return void i.runWith([null,e]);for(var h=0,o=0;o<r.length;o++)if(s.m_nLevel<r[o][0]){o--;break}if(o>=r.length&&(o=r.length-1),h=r[o][0],t=r[o][1],s.GetIapTimesByID(t)>0)return void i.runWith([null,e]);var l;l=s.GetFirIapLead();var u=gSys.GetCurSecAdj(),c=0;if(l&&2==l.length)if(l[0]==h){if(u-l[1]>=21600||u-l[1]<1)return void i.runWith([null,e]);c=21600-(u-l[1])}else l=[h,u],c=21600,s.m_szData.nameddata=ArrOp.SetStrVal("firipalead",s.m_szData.nameddata,l);else l=[h,u],c=21600,s.m_szData.nameddata=ArrOp.SetStrVal("firipalead",s.m_szData.nameddata,l);s.CallSvr("CheckFriIapShow",[t,h,u]),i.runWith([[t,null,c],e])}))},i.GetIapTimesByID=function(t){var e=0;return this.m_szData.sziapid||(this.m_szData.sziapid=[]),e=ArrOp.SzAddRef(t,0,this.m_szData.sziapid),this.m_szData.sziapid[e][1]},i.MarketError=function(t){ErrorDef.ERR_DLG(t)},i.UpdateMarketData=function(t,e){var i;if(i=GMapView.m_nSelf?this.GetMarketData():DataTable.m_iOtherUser.m_szSysData_LBT,!MarketData.isstruct(i))return void gSys.Err("路边摊 data 不合法 "+i);if(t){var n=ArrOp.GetStrVal("uid",t);i[0]=n?n:i[0],n=ArrOp.GetStrVal("rectime",t),i[1]=n?n:i[1],n=ArrOp.GetStrVal("adtime",t),i[2]=n?n:i[2],n=ArrOp.GetStrVal("diamondadd",t),i[4]=n?n:i[4],n=ArrOp.GetStrVal("maxfriend",t),i[5]=n?n:i[5],n=ArrOp.GetStrVal("sellplayer",t),i[6]=n?n:i[6],n=ArrOp.GetStrVal("sellnpc",t),i[7]=n?n:i[7]}if(e){var s=0,a=0,r=0,h=0;for(a=0;a<e.length;a++)if(h=e[a][0],!(0>h)){if(i[3]||(i[3]=[]),h>=i[3].length)for(s=h-i[3].length+1,r=0;s>r;r++)i[3].push([-1,-1,-1,-1,-1,-1,-1,-1,-1]);i[3][h]=e[a][1]}if(GMapView.m_nSelf){var o=e[0][1];MarketItemData.isstruct(o)&&(this.LogGameTag("sell_路边摊_次数",1),this.LogGameTag("get_1_路边摊",o[3]))}}GMapView.m_nSelf?(this.SetMarketData(i),GMapView.lubiantan.OnSysBuildData(4,i)):(DataTable.m_iOtherUser.m_szSysData_LBT=i,GMapView.lubiantan.updataLBT())},i.OnSysBuildData=function(t,e){GMapView.m_nSelf?this.SetSysBuildData(t,e):DataTable.m_iOtherUser.sysdata=ArrOp.SetStrVal("s"+t,DataTable.m_iOtherUser.sysdata,e),GameMain._ins.GmView.OnSysBuildData(t,e)},i.GetRepayLight=function(t,e){var i=this;if(!(this.m_nLevel<10)){var n=this.GetGiftPickRec(1);if(!(n>0)){var s=[];s.push([25,-n]),this.CheckMakeItemSz(s,0,0,Handler.create(this,okk=function(){var n=new StringRef;i.ChgItemSz(s,n,OPEnum.OP_GQHD_FH,t)&&(i.SetGiftPickRec(1),i.CallSvr("GetRepayLight",s),e.run())}))}}},__getset(0,i,"m_nIsHornMode",function(){return this.friendCal.m_nIsHornMode},function(t){this.friendCal.m_nIsHornMode=t}),e}(GDataCal),GiftIcon=function(t){function e(){this.m_sProductid=null,this.m_pLeftTime=null,this._m_nLeftSec=0,this.m_szExItem=null,this.Enable=1,e.__super.call(this),DataTable.RegInterface(this,"_FirIapBtn"),this.SetShow(0),DataTable.m_iSelfUser.AddNoti("m_nLevel",this,this.OnLvChg)}__class(e,"game.ui.gmainui.GiftIcon",t);var i=e.prototype;return i.create=function(){this.LoadFromName("tex_按钮_首充提示_ani"),this.m_disObj.mouseEnabled=!0,this.m_disObj.on("click",this,this.OnClick),MainIcon.getInstance().rightIcon.addChild(this.m_disObj),this.m_disObj.pos(186,340)},i.OnLvChg=function(t){var e=this;if(!DisplayItem.m_pBk)return void Laya.timer.once(500,this,this.OnLvChg,[t],!0);if(this.create(),!(3>t)){var i=1;if(i){var n="";this.m_szExItem=[],this.m_nLeftSec=0;var s,a=0;DataTable.m_iSelfUser.CheckFriIapShow(n,a,Handler.create(this,sziap=function(t,i){if(s=t,a=i,null==s)return void e.SetShow(0);if(n=s[0],e.m_szExItem=s[1],e.m_nLeftSec=s[2],!e.visible||n!=e.m_sProductid){if(e.m_sProductid=n,e.m_nLeftSec<1)return void e.SetShow(0);e.SetAniKind("std"),e.PlayAni(),DisplayItem.SafeDelObj(e.m_pLeftTime),e.m_pLeftTime=new GUI_TextLeftTime,e.m_pLeftTime.SetScrPos(-90,-10,0),e.m_disObj.addChild(e.m_pLeftTime),Laya.timer.clear(e,e.UnShow),Laya.timer.clear(e,e.CountLeft),Laya.timer.loop(1e3,e,e.CountLeft),e.SetShow(1),Laya.timer.once(1e3*e.m_nLeftSec,e,e.UnShow),a||e.OnBuying(n)}}))}}},i.dispose=function(){t.prototype.dispose.call(this),Laya.timer.clear(this,this.UnShow),Laya.timer.clear(this,this.CountLeft)},i.CountLeft=function(){this.m_nLeftSec--,this.m_pLeftTime.Set(this.m_nLeftSec),this.m_nLeftSec%120==1&&(Laya.timer.clear(this,this.SetAniKind),this.SetAniKind("小羊羊待机"),this.PlayAni(),this.PlayKindEndRetrun("小羊羊"),Laya.timer.loop(5e3,this,this.SetAniKind,["std"])),this.m_nLeftSec>0||(Laya.timer.clear(this,this.CountLeft),this.UnShow())},i.CheckOpenDlg=function(){this.m_nShow&&this.Enable&&this.OnClick()},i.OnBuying=function(t){DataTable.m_iSelfUser.AddNoti("iapok"+t,this,this.UnShow)},i.UnShow=function(){this.m_nLeftSec=0,this.SetShow(0),Laya.timer.clear(this,this.SetAniKind),Laya.timer.clear(this,this.UnShow),Laya.timer.clear(this,this.CountLeft)},i.OnHide=function(t){if(t||!(this.m_nLeftSec<1)){var e=t?0:1;this.SetShow(e)}},i.OnClick=function(){this.Enable=0,ThlbPanel.getInstance().myPopup(),ThlbPanel.getInstance().InitData(this,this.m_sProductid,this.m_szExItem)},__getset(0,i,"m_nLeftSec",function(){return this._m_nLeftSec},function(t){this._m_nLeftSec=t,DataTable.m_iSelfUser.Emit("m_nLeftSec",this.m_nLeftSec)}),e}(DisplayItem),GLeadArrow=function(t){function e(t,i){this.m_nPosLv=0,this.m_pLink=null,this.m_sFaceName=null,this.m_nSearchMode=0,this._pid=null,this.offX=55,this.offY=50,this.m_fDegree=0,this.m_res="",this.m_commode="",this.m_nValue=0,this.m_nTopmode=0,this.m_posX=0,this.m_posY=0,this.BALLON_ARRIVE=[3,"arrive"],void 0===i&&(i=!1),e.__super.call(this,t,i)}__class(e,"game.ui.lead.GLeadArrow",t);var i=e.prototype;return i.SafeDelThis=function(){this.m_disObj&&this.m_disObj.removeSelf(),this.reset()},i.reset=function(){Laya.timer.clear(this,this.CheckNeedOp),this.m_pLink=null,this.m_nPosLv=0,this.m_sFaceName="",this.m_fDegree=0,this.m_res="",this.m_commode="",this.m_nValue=0,this.m_nSearchMode=0,this.m_nTopmode=0,this.m_posX=0,this.m_posY=0},i.Init=function(t,e,i,n,s,a,r,h,o,l,u){void 0===n&&(n=0),void 0===s&&(s=""),void 0===a&&(a=""),void 0===r&&(r=0),void 0===h&&(h=0),void 0===o&&(o=0),void 0===l&&(l=0),void 0===u&&(u=0),this.SetShow(1),(this.m_sFaceName!=i||t!=this.m_pLink)&&(this.m_pLink=t,this.m_nPosLv=e,this.m_sFaceName=i,this.m_fDegree=n,this.m_res=s,this.m_commode=a,this.m_nValue=r,this.m_nSearchMode=h,this.m_nTopmode=o,this.m_posX=l,this.m_posY=u,s&&s.length>0?(this.LoadFromName("tex_DIY建筑引导_ani",this.pid),this._pid&&(this._pid.addChild(this.m_disObj),this.m_disObj.x=l+this.offX,this.m_disObj.y=u-this.offY,this.m_disObj.rotation=n),this.SetAniKind(s),this.PlayAni(1)):(this.LoadFromName("tex_leadarrow_ani",this.pid),this._pid&&(this._pid.addChild(this.m_disObj),this.m_disObj.x=l+this.offX,this.m_disObj.y=u-this.offY,this.m_disObj.rotation=n),this.SetAniKind("std"),this.PlayAni(1)),"地图_任务板"==i?this.CheckBallonArrive():StringOp.CompareMax(i,"商店物品_"))},i.CheckBallonArrive=function(){this.SetShow(0),Laya.timer.once(200,this,this.CheckNeedOp,[this.BALLON_ARRIVE]),gSys.WaitSignal(Handler.create(this,this.SetShow,[1]),""+this.BALLON_ARRIVE[1]+":"+this.BALLON_ARRIVE[0])},i.CheckNeedOp=function(t){return GMapView.GetBk()?void GMapView.GetBk().event("LeadNeedOp",[t]):void Laya.timer.once(1e3,this,this.CheckNeedOp,[t],!0)},i.GetLinkObj=function(){return this.m_pLink},i.GetPosLv=function(){return this.m_nPosLv},i.GetFaceName=function(){return this.m_sFaceName},i.OnPrepareShow=function(){if(!this.m_pLink)return void this.SafeDelThis();if(this.m_pLink.GetNamedPt){var t=new UintRef,e=new UintRef;this.m_pLink.GetNamedPt("leadarrow",t,e),this.m_disObj.pos(t.uid,e.uid)}else this.m_pLink instanceof laya.display.Sprite},__getset(0,i,"pid",function(){return this._pid},function(t){this._pid=t,this.offX=55,this.offY=50,t instanceof game.build.DisplayItem?(this._pid=t.m_disObj,this.offX=0):t instanceof laya.display.Sprite&&(this._pid=t)}),__getset(0,i,"m_nShowMe",function(){return this.m_nShow}),e.Me=function(){return new e},e.hadInit=!1,e._me=null,e}(DisplayItem),GFlyGold=function(t){function e(){this.m_pNum=null,this.m_nWholeGold=0,this.m_nWaitAddNum=0,this.m_nFlyAddCount=0,this.m_nAniCount=0,this.m_nMouseEnable=1,this.m_pFlyto=null,this.m_eff=null,this.pt=null,e.__super.call(this),this.LoadFromName("tex_金币收割白框_ani",this),Laya.timer.loop(1e3+2*Math.random()*1e3,this,this.RndEff),this.m_pNum=new GUI_AutoChgNum("tex_文字大_ani"),this.m_pNum.SetScrPos(0,70,1),this.m_pNum.visible=!1,this.m_disObj.addChild(this.m_pNum),gSys.WaitSignal(Handler.create(this,this.AddTo),"GFlyGold:AddTo")}__class(e,"game.ui.ornament.GFlyGold",t);var i=e.prototype;return i.dispose=function(){t.prototype.dispose.call(this),this.m_disObj&&Tween.clearAll(this.m_disObj),Tween.clearAll(this.m_pNum),Tween.clearAll(this.pt),Laya.timer.clearAll(this),gSys.RemoveSignalWait("GFlyGold:AddTo",this,this.AddTo),gSys.RemoveSignalWait("orevaflyok",this,this.orevaflyokWait),this.m_eff&&(Tween.clearAll(this.m_eff),this.m_eff.removeSelf(),this.m_eff.dispose(),this.m_eff=null),this.m_pFlyto&&(this.m_pFlyto=null),this.m_pNum&&(this.m_pNum.removeSelf(),this.m_pNum.dispose())},i.IsMapGold=function(){return 1},i.JumpOut=function(){this.m_nCanMouse=1,this.m_nAniCount=Math.floor(2*Math.random()+1),this.SetAniKind("待机"+(this.m_nAniCount,1)),this.PlayAni(1),this.PlayKindEndRetrun("弹出"),this.m_nAniCount=this.m_nAniCount?0:1},i.ShowBkLight=function(){this.m_eff=new Muti2DAniIns,this.m_eff.createInsFromName("tex_彩虹_001_ani_001"),this.m_eff.blendMode="overlay",this.m_eff.playAni("l0"),this.m_eff.PlaySpeed(1,0),this.m_eff.scaleX=this.m_eff.scaleY=.5,Tween.to(this.m_eff,{scaleX:1.2,scaleY:1.2},550,Ease.sineIn),this.m_disObj&&this.m_disObj.addChildAt(this.m_eff,0)},i.RndEff=function(){this.SetAniKind("待机"+(this.m_nAniCount,1)),this.PlayAni(1),this.m_nAniCount=this.m_nAniCount?0:1},i.UpScaleShine=function(t,e){this.m_disObj.scale(3,3),this.SetLayer(1e8-100),this.SetAniKind("飞走"),this.PlayAni(1),this.m_nWaitAddNum=t,this.m_nWholeGold=e,Tween.clearAll(this.m_disObj),Laya.timer.clear(this,this.RndEff),this.SetPos(this.m_nXpos,this.m_nYpos-200-40),this.m_pNum.SetShow(1),this.m_pNum.alpha=0,Tween.to(this.m_pNum,{alpha:1},1e3,Ease.linearIn),this.ShowBkLight(),this.WaitFly()},i.WaitFly=function(){gSys.WaitSignal(Handler.create(this,this.orevaflyokWait),"orevaflyok",1e4),Laya.timer.once(4e3,this,this.FlyOver)},i.FlyOver=function(){gSys.SetSignal("orevaflyok")},i.orevaflyokWait=function(){gSys.RemoveSignalWait("orevaflyok",this,this.orevaflyokWait),this.WaitFlyNext()},i.WaitFlyNext=function(){gSys.SetSignal("orevagoldfly"),this.Clear()},i.AddTo=function(t,e,i){gSys.RemoveSignalWait("GFlyGold:AddTo",this,this.AddTo),t!=this&&(this.m_nCanMouse=0,this.SetLayer(1e8),Laya.timer.once(500,this,this.AddToNext,[t,e,i],!0))},i.AddToNext=function(t,e,i){this.SetAniKind("飞走"),this.PlayAni(1),Tween.clearAll(this.m_disObj),Laya.timer.clear(this,this.RndEff);var n=2e3;this.m_pFlyto=t,this.pt=new Point(this.m_nXpos,this.m_nYpos),Laya.timer.once(n,this,this.onTweenOver,[e,i]),Tween.to(this.pt,{x:e,y:i},n,Ease.backIn),Laya.timer.clear(this,this.frameTween),Laya.timer.frameLoop(1,this,this.frameTween,null,!0)},i.frameTween=function(){this.SetPos(this.pt.x,this.pt.y)},i.onTweenOver=function(t,e){Laya.timer.clear(this,this.frameTween),this.SetPos(t,e),this.m_pFlyto&&this.m_pFlyto.AddNum(),this.Clear()},i.DirectFlyGold=function(){this.Clear()},i.AddNum=function(){var t=Math.floor(this.m_nWholeGold/(this.m_nWaitAddNum+1));this.m_pNum.Add(t),this.m_nFlyAddCount++,this.m_nFlyAddCount>=this.m_nWaitAddNum-1&&(this.m_pNum.Set(this.m_nWholeGold),gSys.SetSignal("orevaflyok"))},i.Clear=function(){this.m_disObj&&Tween.to(this.m_disObj,{alpha:0},1e3,Ease.linearOut,Handler.create(this,this.DelThis))},i.OnLBDown=function(){this.OnClick()},i.OnClick=function(){if(this.m_nMouseEnable&&!DataTable.m_iWholeEditMovePop){this.m_nMouseEnable=0;var t=0,e=0,i=this.getCentPtOnScr();t=Math.floor(i.x),e=Math.floor(i.y),DataTable.m_iSelfUser.GetOrEvaGold(Handler.create(this,this.onGetOrEvaGold),[t-64,e-180,0,"orevagoldfly",8],1)}},i.onGetOrEvaGold=function(t){if(!t||t.length<2)return void(this.m_nCanMouse=1);if(t[0]<1)return void(this.m_nCanMouse=1);var e=this.m_nXpos,i=this.m_nYpos;this.UpScaleShine(t[0],t[1]),DataTable.m_iSelfView.ClearOrEvaGoldData(),gSys.SetSignal("GFlyGold:AddTo",[this,e,i-200])},e}(DisplayItem),GBoat=function(t){function e(){this.pid=null,e.__super.call(this),this.OnCreate()}__class(e,"game.ui.wharf.GBoat",t);var i=e.prototype;return i.dispose=function(){Tween.clearAll(this.m_disObj),t.prototype.dispose.call(this),this.pid=null},i.SetObjFather=function(t){t=t},i.OnCreate=function(){this.LoadFromName("tex_船_001_ani",this);var t,e=0;if(GMapView.m_nSelf||(t=GameMain._ins.GmView),!t)return void DataTable.m_iSelfUser.GetBoatLv(Handler.create(this,this.OnCreateNext));var i;i=t.GetWharfLvSz(),i&&2==i.length||(i=[0,0]),e=i[1],this.OnCreateNext(e)},i.OnCreateNext=function(t){switch(t){case 0:this.LoadFromName("tex_飞艇_001_ani",this);break;case 1:this.LoadFromName("tex_二级飞艇_ani",this);break;default:this.LoadFromName("tex_飞艇三级_ani",this)}this.SetAniKind("stop"),this.PlayAni(1),this.m_nCanMouse=1},i.In=function(){this.SetLayer(300),this.m_nCanMouse=0;var t=NaN,e=NaN,i=NaN,n=NaN;i=this.m_disObj.x,n=this.m_disObj.y;var s=-1e3,a=-s/5;t=i+s,e=n+a;Math.sqrt(s*s+a*a);this.SetAniKind("walk1"),this.PlayAni(1),DataTable.m_iSoundTab.OnPlay("海轮到达");this.SetShow(1),Tween.clearAll(this.m_disObj),s=i+1e3,a=n-500,this.m_disObj.pos(s,a),Tween.to(this.m_disObj,{x:i,y:n},3e3,Ease.sineOut,Handler.create(this,this.onInOver),0,!0)},i.onIn=function(){this.m_fScale=1,Laya.timer.once(100,this,this.onInOver)},i.onInOver=function(){this.SetAniKind("stop"),this.PlayAni(1),this.Emit("in",null),this.m_nCanMouse=1,this.SetLayer(0)},i.OnClick=function(){DataTable.m_iWholeEditMovePop||this.Emit("click",[null])},i.Out=function(){this.SetLayer(3),this.m_nCanMouse=0;var t=-3500,e=-t/2;Math.sqrt(t*t+e*e);this.SetAniKind("walk2"),DataTable.m_iSoundTab.OnPlay("海轮启航");this.PlayAni(.1,0),Tween.clearAll(this.m_disObj),Tween.to(this.m_disObj,{x:t,y:e},4e3,Ease.sineIn,Handler.create(this,this.onOutOver),0,!0)},i.onOutOver=function(){this.Emit("out",[null]),this.DelThis(),this.dispose()},i.OnLBUp=function(){this.m_nCanMouse&&(this.OnMouseOut(),this.OnClick())},i.OnLBDown=function(){this.m_nCanMouse&&this.OnMouseIn()},__getset(0,i,"m_fScale",null,function(t){this.m_disObj&&(this.m_disObj.scaleX=this.m_disObj.scaleY=t)}),e}(DisplayItem),MPHelp=function(t){function e(t){this.pid=null,e.__super.call(this),t=t,this.OnInit(),this.DelayLink()}__class(e,"game.ui.wharf.MPHelp",t);var i=e.prototype;return i.dispose=function(){t.prototype.dispose.call(this),Laya.timer.clearAll(this),this.pid=null},i.OnInit=function(){var t=DataTable.m_iSelfUser.GetOtherEvaGold();this.SetHelpIconEva(t>0)},i.SetHelpIconEva=function(t){t?this.LoadFromName("help_ani",this.pid):this.LoadFromName("help2_ani",this.pid),this.PlayAni(1)},i.DelayLink=function(){DataTable.m_iFriendBar?(Laya.timer.clear(this,this.DelayLink),SysID.FRD_ON("otherevaref",this,this.SetHelpIconEva)):Laya.timer.loop(500,this,this.DelayLink)},e}(DisplayItem),GFriendBar=function(t){function e(){if(e.__super.call(this),!e.bo)throw new Error("GFriendBar 是单例类，详细请看类定义")}__class(e,"game.gdcal.frd.GFriendBar",t);var i=e.prototype;return i.OnOutBox=function(t){function e(){return Laya.loader.getRes(Assets.chatResUrl)?(Laya.timer.clear(i,e),void PanelMain.getInstance().enterSendMail(t)):void Laya.timer.loop(100,i,e)}var i=this;FriendDef.IsPlayer(t)&&(MainIcon.getInstance().loadChatAssets(!1),e())},i.AddListener=function(t,i,n){e.ev.on(t,i,n)},i.Emit=function(t,i){e.ev.event(t,i)},i.hasEvent=function(t){return e.ev.hasListener(t)?1:0},i.offEvent=function(t){e.ev.offAll(t)},e.getins=function(){return null==e._getins&&(e.bo=!0,e._getins=new e,e.bo=!1),e._getins},e.bo=!1,e._getins=null,__static(e,["s_vDefGroup",function(){return this.s_vDefGroup=[[2,"好友"],[-1,"微博"],[0,"粉丝"],[1,"关注"]]},"ev",function(){return this.ev=new EventDispatcher}]),e}(GFriendCln),Input=function(t){function e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this.inputElementXAdjuster=0,this.inputElementYAdjuster=0,this.title="",e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.on("mousedown",this,this.onMouseDown),this.on("undisplay",this,this.onUnDisplay)}__class(e,"laya.display.Input",t);var i=e.prototype;return i.onStageDown=function(t){t.target!=this&&(t.target instanceof laya.display.Input?(this.focusOut(),this.removeNeedlessInputMethod()):this.focus=!1,Laya.stage.off("mousedown",this,this.onStageDown))},i.onUnDisplay=function(t){this.focus=!1},i.onMouseDown=function(t){this.focus=!0,Browser.onMobile||Laya.stage.on("mousedown",this,this.onStageDown)},i.render=function(t,e,i){laya.display.Sprite.prototype.render.call(this,t,e,i)},i.syncInputPosition=function(){var t,e=this.nativeInput.style,i=Laya.stage;t=Utils.getGlobalPosAndScale(this);var n=i._canvasTransform.a,s=i._canvasTransform.d;if(e.left=(t.x+this.padding[3]+this.inputElementXAdjuster)*i.clientScaleX*n+i.offset.x+"px",e.top=(t.y+this.padding[0]+this.inputElementYAdjuster)*i.clientScaleY*s+i.offset.y+"px",this._getVisible()||(this.focus=!1),i.transform||1!=t.width||1!=t.height){var a="scale("+i.clientScaleX*n*t.width+","+i.clientScaleY*s*t.height+")";a!=e.transform&&(e.transformOrigin="0 0",e.transform=a)}},i._getVisible=function(){for(var t=this;t;){if(t.visible===!1)return!1;t=t.parent}return!0},i.select=function(){this.nativeInput.select()},i.focusIn=function(){var t=this.nativeInput;this._focus=!0;var i=e.cssStyle;i+=";white-space:"+(this.wordWrap?"normal":"nowrap"),t.readOnly=!this._editable,t.maxLength=this._maxChars;var n=this.padding,s=this._width-n[1]-n[3],a=this._height-n[0]-n[2];i+=";width:"+s+"px",i+=";height:"+a+"px",i+=";color:"+this.color,i+=";font-size:"+this.fontSize+"px",i+=";font-family:"+this.font,i+=";line-height:"+(this.leading+this.fontSize)+"px",i+=";font-style:"+(this.italic?"italic":"normal"),i+=";font-weight:"+(this.bold?"bold":"normal"),i+=";text-align:"+this.align;var r=this._text;t.value=r,this._text="",this.typeset(),this._text=r,t.style.cssText=i,t.type=this.asPassword?"password":"input",t.focus(),Laya.stage.off("keydown",this,this.onKeyDown),Laya.stage.on("keydown",this,this.onKeyDown),Laya.stage.focus=this,this.event("focus"),Laya.timer.frameLoop(1,this,this.syncInputPosition)},i.focusOut=function(){this._focus=!1;var e=this._text||"";this._text="",t.prototype._$set_text.call(this,e),Laya.stage.off("keydown",this,this.onKeyDown),Laya.stage.focus=null,this.event("blur"),Browser.document.body.scrollTop=0,Laya.timer.clear(this,this.syncInputPosition)},i.removeNeedlessInputMethod=function(){var t=Browser.document.body;!this._multiline&&t.contains(e.input)&&t.contains(e.area)?Browser.document.body.removeChild(e.input):this._multiline&&t.contains(e.area)&&t.contains(e.input)&&Browser.document.body.removeChild(e.area)},i.onKeyDown=function(t){13===t.keyCode&&this.event("enter")},__getset(0,i,"multiline",function(){return this._multiline},function(t){this._multiline=t,this.valign=t?"top":"middle",Browser.onMobile||(t?e.area||e.initInput(e.area=Browser.createElement("textarea")):e.input||e.initInput(e.input=Browser.createElement("input")))}),__getset(0,i,"color",t.prototype._$get_color,function(e){this._focus&&(this.nativeInput.style.color=e),t.prototype._$set_color.call(this,e)}),__getset(0,i,"nativeInput",function(){return this._multiline?e.area:e.input}),__getset(0,i,"focus",function(){return this._focus},function(t){if(Browser.onMobile){if(t&&this._editable){var e=Browser.window.prompt(this.title,this._text||"");null!=e&&(this._restrictPattern&&(e=e.replace(this._restrictPattern,"")),this.text=e,this.event("input"))}}else{var i=this.nativeInput;this._focus!==t&&(laya.display.Input.isInputting=t,t?(i.target&&(i.target.focus=!1),i.target=this,Browser.document.body.appendChild(i),this.focusIn()):(i.target=null,this.focusOut(),Browser.document.body.removeChild(i)))}}),__getset(0,i,"text",function(){return this._focus?this.nativeInput.value:this._text},function(e){this._focus&&(this.nativeInput.value=e||""),t.prototype._$set_text.call(this,e)}),__getset(0,i,"maxChars",function(){return this._maxChars},function(t){0>=t&&(t=1e5),this._maxChars=t}),__getset(0,i,"restrict",function(){return this._restrictPattern.source},function(t){t?(t="[^"+t+"]",t.indexOf("^^")>-1&&(t=t.replace("^^","")),this._restrictPattern=new RegExp(t,"g")):this._restrictPattern=null}),__getset(0,i,"editable",function(){return this._editable},function(t){this._editable=t}),e.getActiveInput=function(){return Browser.document.body.contains(e.input)?e.input:Browser.document.body.contains(e.area)?e.area:null},e.initInput=function(t){var i=t.style;i.cssText=e.cssStyle,t.addEventListener("input",function(e){var i=t.target;if(i){var n=t.value;i._restrictPattern&&(n=n.replace(i._restrictPattern,""),t.value=n),i._text=n,i.event("input")}}),t.addEventListener("mousemove",e._stopEvent),t.addEventListener("mousedown",e._stopEvent),t.addEventListener("touchmove",e._stopEvent)},e._stopEvent=function(t){t.stopPropagation()},e.cssStyle="position:absolute;background-color:transparent;border:none;outline:none;resize:none;overflow:hidden;z-index:999",e.input=null,e.area=null,e.inputHeight=50,e.textAreaHeight=75,e.inputFontSize=25,e.borderStyle="3px solid orange",e.backgroundStyle="Linen",e.isInputting=!1,e}(Text),Box=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.Box",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IBox":!0}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;for(var e in t){var i=this.getChildByName(e);i?i.dataSource=t[e]:this.hasOwnProperty(e)&&(this[e]=t[e])}}),e}(Component),Button=function(t){function e(t,i){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,e.__super.call(this),this._labelColors=Styles.buttonLabelColors,this._stateNum=Styles.buttonStateNum,void 0===i&&(i=""),this.skin=t,this.label=i}__class(e,"laya.ui.Button",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.ISelect":!0}),i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(e),this._sources&&(this._sources.length=0),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},i.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap,this._text=new Text,this._text.align="center",this._text.valign="middle"},i.initialize=function(){this.on("mouseover",this,this.onMouse),this.on("mouseout",this,this.onMouse),this.on("mousedown",this,this.onMouse),this.on("mouseup",this,this.onMouse),this.on("click",this,this.onMouse)},i.onMouse=function(t){return this.toggle===!1&&this._selected||this.disabled?void 0:"click"===t.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=e.stateMap[t.type]))},i.changeClips=function(){var t=Loader.getRes(this._skin);if(!t)return void console.log("lose skin",this._skin);this._sources||(this._sources=[]),this._sources.length=0;for(var e=t.width,i=t.height/this._stateNum,n=0;n<this._stateNum;n++)this._sources.push(Texture.create(t,0,i*n,e,i));this._autoSize?(this._bitmap.width=this._text.width=this._width||e,this._bitmap.height=this._text.height=this._height||i):this._text.x=e},i.changeState=function(){this.runCallLater(this.changeClips);var t=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[t]),this.label&&(this._text.color=this._labelColors[t],this._strokeColors&&(this._text.strokeColor=this._strokeColors[t]))},__getset(0,i,"labelStrokeColor",function(){return this._text.strokeColor},function(t){this._text.strokeColor=t}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this.callLater(this.changeClips),this.callLater(this.changeState))}),__getset(0,i,"state",function(){return this._state},function(t){this._state!=t&&(this._state=t,this.callLater(this.changeState))}),__getset(0,i,"label",function(){return this._text.text},function(t){this._text.text!=t&&(t&&!this._text.displayInStage&&this.addChild(this._text),this._text.text=t,this.callLater(this.changeState))}),__getset(0,i,"stateNum",function(){return this._stateNum},function(t){this._stateNum!=t&&(this._stateNum=1>t?1:t>3?3:t,this.callLater(this.changeClips))}),__getset(0,i,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(t){this._strokeColors=UIUtils.fillArray(Styles.buttonLabelColors,t,String),this.callLater(this.changeState)}),__getset(0,i,"labelStroke",function(){return this._text.stroke},function(t){this._text.stroke=t}),__getset(0,i,"measureHeight",function(){return this.runCallLater(this.changeClips),this._bitmap.height}),__getset(0,i,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+this._text.width)}),__getset(0,i,"selected",function(){return this._selected},function(t){this._selected!=t&&(this._selected=t,this.state=this._selected?2:0,this.event("change"))}),__getset(0,i,"labelColors",function(){return this._labelColors.join(",")},function(t){this._labelColors=UIUtils.fillArray(Styles.buttonLabelColors,t,String),this.callLater(this.changeState)}),__getset(0,i,"labelPadding",function(){return this._text.padding.join(",")},function(t){this._text.padding=UIUtils.fillArray(Styles.labelPadding,t,Number)}),__getset(0,i,"labelSize",function(){return this._text.fontSize},function(t){this._text.fontSize=t}),__getset(0,i,"labelBold",function(){return this._text.bold},function(t){this._text.bold=t}),__getset(0,i,"labelAlign",function(){return this._text.align},function(t){this._text.align=t}),__getset(0,i,"labelFont",function(){return this._text.font},function(t){this._text.font=t}),__getset(0,i,"clickHandler",function(){return this._clickHandler},function(t){this._clickHandler=t}),__getset(0,i,"text",function(){return this._text}),__getset(0,i,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._autoSize&&(this._bitmap.width=e,this._text.width=e)}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._autoSize&&(this._bitmap.height=e,this._text.height=e)}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.label=e+"":t.prototype._$set_dataSource.call(this,e)}),__static(e,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),e}(Component),Clip=function(t){function e(t,i,n){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,e.__super.call(this),void 0===i&&(i=1),void 0===n&&(n=1),this._clipX=i,this._clipY=n,this.skin=t}__class(e,"laya.ui.Clip",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!1),t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},i.dispose=function(){this.destroy(!0),Laya.loader.clearRes(this._skin)},i.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap},i.initialize=function(){this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},i._onDisplay=function(t){this._isPlaying?this._displayInStage?this.play():this.stop():this._autoPlay&&this._displayInStage&&this.play()},i.changeClip=function(){var t=Loader.getRes(this._skin);t?this.loadComplete(this._skin,t):Laya.loader.load(this._skin,Handler.create(this,this.loadComplete,[this._skin]))},i.loadComplete=function(t,e){if(t===this._skin&&e){this._clipWidth||(this._clipWidth=Math.ceil(e.width/this._clipX)),this._clipHeight||(this._clipHeight=Math.ceil(e.height/this._clipY)),
this._sources||(this._sources=[]),this._sources.length=0;for(var i=0;i<this._clipY;i++)for(var n=0;n<this._clipX;n++)this._sources.push(Texture.create(e,this._clipWidth*n,this._clipHeight*i,this._clipWidth,this._clipHeight));this.index=this._index,this.event("loaded")}},i.play=function(){this._isPlaying=!0,this._index=0,Laya.timer.loop(this.interval,this,this._loop,null,!0)},i._loop=function(){this._style.visible&&(this.index=this._index,this._index++,this._index>=this._sources.length&&(this._index=0))},i.stop=function(){this._isPlaying=!1,Laya.timer.clear(this,this._loop)},__getset(0,i,"autoPlay",function(){return this._autoPlay},function(t){this._autoPlay!=t&&(this._autoPlay=t,t?this.play():this.stop())}),__getset(0,i,"clipX",function(){return this._clipX},function(t){this._clipX=t,this.callLater(this.changeClip)}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin=t,this.callLater(this.changeClip)}),__getset(0,i,"sources",function(){return this._sources},function(t){this._sources=t,this.index=this._index,this.event("loaded")}),__getset(0,i,"clipY",function(){return this._clipY},function(t){this._clipY=t,this.callLater(this.changeClip)}),__getset(0,i,"clipWidth",function(){return this._clipWidth},function(t){this._clipWidth=t,this.callLater(this.changeClip)}),__getset(0,i,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),__getset(0,i,"clipHeight",function(){return this._clipHeight},function(t){this._clipHeight=t,this.callLater(this.changeClip)}),__getset(0,i,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._bitmap.width=e}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._bitmap.height=e}),__getset(0,i,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),__getset(0,i,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,i,"index",function(){return this._index},function(t){this._index=t,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[t]),this.event("change")}),__getset(0,i,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._interval=t,this._isPlaying&&this.play())}),__getset(0,i,"isPlaying",function(){return this._isPlaying},function(t){this._isPlaying=t}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.index=Laya.__parseInt(e):t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"bitmap",function(){return this._bitmap}),e}(Component),ColorPicker=function(t){function e(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",e.__super.call(this)}__class(e,"laya.ui.ColorPicker",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._colorPanel&&this._colorPanel.destroy(e),this._colorButton&&this._colorButton.destroy(e),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},i.createChildren=function(){this.addChild(this._colorButton=new Button),this._colorPanel=new Box,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new Sprite),this._colorPanel.addChild(this._colorBlock=new Sprite),this._colorPanel.addChild(this._colorInput=new Input)},i.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},i.onPanelMouseDown=function(t){t.stopPropagation()},i.changePanel=function(){var t=this._colorPanel.graphics;t.clear(),t.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,t=this._colorTiles.graphics,t.clear();for(var e=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],i=0;12>i;i++)for(var n=0;20>n;n++){var s=0;s=0===n?e[i]:1===n?0:51*(((3*i+n/6)%3<<0)+3*(i/6<<0))<<16|n%6*51<<8|(i<<0)%6*51;var a=UIUtils.toColor(s);this._colors.push(a);var r=n*this._gridSize,h=i*this._gridSize;t.drawRect(r,h,this._gridSize,this._gridSize,a,"#000000")}},i.onColorButtonClick=function(t){this._colorPanel.parent?this.close():this.open()},i.open=function(){var t=this.localToGlobal(new Point),e=t.x+this._colorPanel.width<=Laya.stage.width?t.x:Laya.stage.width-this._colorPanel.width,i=t.y+this._colorButton.height;i=i+this._colorPanel.height<=Laya.stage.height?i:t.y-this._colorPanel.height,this._colorPanel.pos(e,i),Laya.stage.addChild(this._colorPanel),Laya.stage.on("mousedown",this,this.removeColorBox)},i.close=function(){Laya.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},i.removeColorBox=function(t){this.close()},i.onColorFieldKeyDown=function(t){13==t.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),t.stopPropagation())},i.onColorInputChange=function(t){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},i.onColorTilesClick=function(t){this.selectedColor=this.getColorByMouse(),this.close()},i.onColorTilesMouseMove=function(t){this._colorInput.focus=!1;var e=this.getColorByMouse();this._colorInput.text=e,this.drawBlock(e)},i.getColorByMouse=function(){var t=this._colorTiles.getMousePoint(),e=Math.floor(t.x/this._gridSize),i=Math.floor(t.y/this._gridSize);return this._colors[20*i+e]},i.drawBlock=function(t){var e=this._colorBlock.graphics;e.clear();var i=t?t:"#ffffff";e.drawRect(0,0,50,20,i,this._borderColor),t||e.drawLine(0,0,50,20,"#ff0000")},i.changeColor=function(){var t=this.graphics;t.clear();var e=this._selectedColor||"#000000";t.drawRect(0,0,this._colorButton.width,this._colorButton.height,e)},__getset(0,i,"borderColor",function(){return this._borderColor},function(t){this._borderColor=t,this.callLater(this.changePanel)}),__getset(0,i,"selectedColor",function(){return this._selectedColor},function(t){this._selectedColor!=t&&(this._selectedColor=this._colorInput.text=t,this.drawBlock(t),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",Event.EMPTY.setTo("change",this,this)))}),__getset(0,i,"inputBgColor",function(){return this._inputBgColor},function(t){this._inputBgColor=t,this.callLater(this.changePanel)}),__getset(0,i,"skin",function(){return this._colorButton.skin},function(t){this._colorButton.skin=t,this.changeColor()}),__getset(0,i,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,this.callLater(this.changePanel)}),__getset(0,i,"inputColor",function(){return this._inputColor},function(t){this._inputColor=t,this.callLater(this.changePanel)}),e}(Component),ComboBox=function(t){function e(t,i){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._scrollBar=null,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,e.__super.call(this),this._itemColors=Styles.comboBoxItemColors,this.skin=t,this.labels=i}__class(e,"laya.ui.ComboBox",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._button&&this._button.destroy(e),this._list&&this._list.destroy(e),this._scrollBar&&this._scrollBar.destroy(e),this._button=null,this._list=null,this._scrollBar=null,this._itemColors=null,this._labels=null,this._selectHandler=null},i.createChildren=function(){this.addChild(this._button=new Button),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},i._createList=function(){this._list=new List,this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=Handler.create(this,this.onlistItemMouse,null,!1),this._scrollBarSkin&&(this._list.addChild(this._scrollBar=new VScrollBar),this._scrollBar.skin=this._scrollBarSkin,this._scrollBar.name="scrollBar",this._scrollBar.y=1,this._scrollBar.on("mousedown",this,this.onScrollBarDown))},i.onListDown=function(t){t.stopPropagation()},i.onScrollBarDown=function(t){t.stopPropagation()},i.onButtonMouseDown=function(t){this.callLater(this.switchTo,[!this._isOpen])},i.changeList=function(){this._listChanged=!1;var t=this.width-2,e=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender={type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:t,height:this._itemHeight,fontSize:this._itemSize,color:e}}]},this._list.repeatY=this._visibleNum,this._scrollBar&&(this._scrollBar.x=this.width-this._scrollBar.width-1),this._list.refresh()},i.onlistItemMouse=function(t,e){var i=t.type;if("mouseover"===i||"mouseout"===i){var n=this._list.getCell(e);if(!n)return;var s=n.getChildByName("label");"mouseover"===i?(s.bgColor=this._itemColors[0],s.color=this._itemColors[1]):(s.bgColor=null,s.color=this._itemColors[2])}else"click"===i&&(this.selectedIndex=e,this.isOpen=!1)},i.switchTo=function(t){this.isOpen=t},i.changeOpen=function(){this.isOpen=!this._isOpen},i.changeItem=function(){this._itemChanged=!1,this.runCallLater(this.changeList),this._listHeight=this._labels.length>0?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,this._scrollBar&&(this._scrollBar.height=this._listHeight-2);var t=this._list.graphics;t.clear(),t.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3]);var e=this._list.array||[];e.length=0;for(var i=0,n=this._labels.length;n>i;i++)e.push({label:this._labels[i]});this._list.array=e},i.changeSelected=function(){this._button.label=this.selectedLabel},i.removeList=function(t){this.isOpen=!1},__getset(0,i,"labels",function(){return this._labels.join(",")},function(t){this._labels.length>0&&(this.selectedIndex=-1),t?this._labels=t.split(","):this._labels.length=0,this._itemChanged=!0}),__getset(0,i,"skin",function(){return this._button.skin},function(t){this._button.skin!=t&&(this._button.skin=t,this._listChanged=!0)}),__getset(0,i,"measureHeight",function(){return this._button.height}),__getset(0,i,"measureWidth",function(){return this._button.width}),__getset(0,i,"selectedLabel",function(){return this._selectedIndex>-1&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(t){this.selectedIndex=this._labels.indexOf(t)}),__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this._labels.length>0?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[Event.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._button.height=this._height}),__getset(0,i,"selectHandler",function(){return this._selectHandler},function(t){this._selectHandler=t}),__getset(0,i,"stateNum",function(){return this._button.stateNum},function(t){this._button.stateNum=t}),__getset(0,i,"visibleNum",function(){return this._visibleNum},function(t){this._visibleNum=t,this._listChanged=!0}),__getset(0,i,"itemColors",function(){return String(this._itemColors)},function(t){this._itemColors=UIUtils.fillArray(this._itemColors,t,String),this._listChanged=!0}),__getset(0,i,"itemSize",function(){return this._itemSize},function(t){this._itemSize=t,this._listChanged=!0}),__getset(0,i,"isOpen",function(){return this._isOpen},function(t){if(this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&this.changeList(),this._itemChanged&&this.changeItem(),Point.EMPTY.setTo(0,0);var e=this.localToGlobal(Point.EMPTY),i=e.y+this._button.height;i=i+this._listHeight<=Laya.stage.width?i:e.y-this._listHeight,this._list.pos(e.x,i),Laya.stage.addChild(this._list),Laya.stage.once("mousedown",this,this.removeList),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),__getset(0,i,"sizeGrid",function(){return this._button.sizeGrid},function(t){this._button.sizeGrid=t}),__getset(0,i,"button",function(){return this._button}),__getset(0,i,"scrollBarSkin",function(){return this._scrollBarSkin},function(t){this._scrollBarSkin=t}),__getset(0,i,"scrollBar",function(){return this._scrollBar}),__getset(0,i,"list",function(){return this._list}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.selectedIndex=Laya.__parseInt(e):e instanceof Array?this.labels=e.join(","):t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"labelColors",function(){return this._button.labelColors},function(t){this._button.labelColors=t}),__getset(0,i,"labelPadding",function(){return this._button.text.padding.join(",")},function(t){this._button.text.padding=UIUtils.fillArray(Styles.labelPadding,t,Number)}),__getset(0,i,"labelSize",function(){return this._button.text.fontSize},function(t){this._button.text.fontSize=t}),__getset(0,i,"labelBold",function(){return this._button.text.bold},function(t){this._button.text.bold=t}),__getset(0,i,"labelFont",function(){return this._button.text.font},function(t){this._button.text.font=t}),e}(Component),ScrollBar=function(t){function e(t){this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this._scrollSize=1,this._skin=null,this._upButton=null,this._downButton=null,this._slider=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,e.__super.call(this),this._showButtons=UIConfig.showButtons,this._touchScrollEnable=UIConfig.touchScrollEnable,this._mouseWheelEnable=UIConfig.mouseWheelEnable,this.skin=t,this.max=1}__class(e,"laya.ui.ScrollBar",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._upButton&&this._upButton.destroy(e),this._downButton&&this._downButton.destroy(e),this._slider&&this._slider.destroy(e),this._upButton=this._downButton=null,this._slider=null,this.changeHandler=null,this._offsets=null},i.createChildren=function(){this.addChild(this._slider=new Slider),this.addChild(this._upButton=new Button),this.addChild(this._downButton=new Button)},i.initialize=function(){this._slider.showLabel=!1,this._slider.on("change",this,this.onSliderChange),this._slider.setSlider(0,0,0),this._upButton.on("mousedown",this,this.onButtonMouseDown),this._downButton.on("mousedown",this,this.onButtonMouseDown)},i.onSliderChange=function(t){this.value=this._slider.value},i.onButtonMouseDown=function(t){var e=t.currentTarget===this._upButton;this.slide(e),Laya.timer.once(Styles.scrollBarDelayTime,this,this.startLoop,[e]),Laya.stage.once("mouseup",this,this.onStageMouseUp)},i.startLoop=function(t){Laya.timer.frameLoop(1,this,this.slide,[t])},i.slide=function(t){t?this.value-=this._scrollSize:this.value+=this._scrollSize},i.onStageMouseUp=function(t){Laya.timer.clear(this,this.startLoop),Laya.timer.clear(this,this.slide)},i.changeScrollBar=function(){this._upButton.visible=this._showButtons,this._downButton.visible=this._showButtons,this._showButtons&&(this._upButton.skin=this._skin.replace(".png","$up.png"),this._downButton.skin=this._skin.replace(".png","$down.png")),this._slider.isVertical?this._slider.y=this._showButtons?this._upButton.height:0:this._slider.x=this._showButtons?this._upButton.width:0,this.resetPositions()},i.changeSize=function(){t.prototype.changeSize.call(this),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},i.resetPositions=function(){this._slider.isVertical?this._slider.height=this.height-(this._showButtons?this._upButton.height+this._downButton.height:0):this._slider.width=this.width-(this._showButtons?this._upButton.width+this._downButton.width:0),this.resetButtonPosition()},i.resetButtonPosition=function(){this._slider.isVertical?this._downButton.y=this._slider.y+this._slider.height:this._downButton.x=this._slider.x+this._slider.width},i.setScroll=function(t,e,i){this.runCallLater(this.changeSize),this._slider.setSlider(t,e,i),this._slider.bar.visible=e>0,!this._hide&&this.autoHide&&(this.visible=!1)},i.onTargetMouseWheel=function(t){this.value-=t.delta*this._scrollSize,this.target=this._target},i.onTargetMouseDown=function(t){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new Point),this._lastPoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY),Laya.timer.clear(this,this.tweenMove),Tween.clearTween(this),Laya.stage.once("mouseup",this,this.onStageMouseUp2),Laya.stage.once("mouseout",this,this.onStageMouseUp2),Laya.timer.frameLoop(1,this,this.loop,null,!0),this.event("start")},i.loop=function(){var t=Laya.stage.mouseY,e=Laya.stage.mouseX;if(this._lastOffset=this.isVertical?t-this._lastPoint.y:e-this._lastPoint.x,this._clickOnly){if(!(Math.abs(this._lastOffset*(this.isVertical?Laya.stage._canvasTransform.getScaleY():Laya.stage._canvasTransform.getScaleX()))>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0)}this._offsets.push(this._lastOffset),this._lastPoint.x=e,this._lastPoint.y=t,0!==this._lastOffset&&(this._checkElastic||(this.elasticDistance>0?this._checkElastic||0==this._lastOffset||(this._checkElastic=!0,this._lastOffset>0&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?this._isElastic=!0:this._isElastic=!1):this._checkElastic=!0),this._checkElastic&&(this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset))},i.onStageMouseUp2=function(t){if(Laya.stage.off("mouseup",this,this.onStageMouseUp2),Laya.stage.off("mouseout",this,this.onStageMouseUp2),Laya.timer.clear(this,this.loop),!this._clickOnly)if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?Tween.to(this,{value:this.min},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver)):this._value>this.max&&Tween.to(this,{value:this.max},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver));else{this._offsets.length<1&&(this._offsets[0]=this.isVertical?Laya.stage.mouseY-this._lastPoint.y:Laya.stage.mouseX-this._lastPoint.x);for(var e=0,i=Math.min(this._offsets.length,3),n=0;i>n;n++)e+=this._offsets[this._offsets.length-1-n];if(this._lastOffset=e/i,e=Math.abs(this._lastOffset),2>e)return;e>60&&(this._lastOffset=this._lastOffset>0?60:-60),Laya.timer.frameLoop(1,this,this.tweenMove)}},i.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&Tween.to(this,{alpha:0},500)},i.tweenMove=function(){this._lastOffset*=.95,this.value-=this._lastOffset,Math.abs(this._lastOffset)<1&&(Laya.timer.clear(this,this.tweenMove),this.event("end"),!this.hide&&this.autoHide&&Tween.to(this,{alpha:0},500))},i.stopScroll=function(){this.onStageMouseUp2(null),Laya.timer.clear(this,this.tweenMove),Tween.clearTween(this)},__getset(0,i,"isVertical",function(){return this._slider.isVertical},function(t){this._slider.isVertical=t}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._slider.skin=this._skin,this.callLater(this.changeScrollBar))}),__getset(0,i,"max",function(){return this._slider.max},function(t){this._slider.max=t}),__getset(0,i,"scrollSize",function(){return this._scrollSize},function(t){this._scrollSize=t}),__getset(0,i,"measureHeight",function(){return this._slider.isVertical?100:this._slider.height}),__getset(0,i,"measureWidth",function(){return this._slider.isVertical?this._slider.width:100}),__getset(0,i,"sizeGrid",function(){return this._slider.sizeGrid},function(t){this._slider.sizeGrid=t}),__getset(0,i,"min",function(){return this._slider.min},function(t){this._slider.min=t}),__getset(0,i,"value",function(){return this._value},function(t){t!==this._value&&(this._isElastic?this._value=t:(this._slider.value=t,this._value=this._slider.value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value))}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.value=Number(e):t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"thumbPercent",function(){return this._thumbPercent},function(t){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),t=t>=1?.99:t,this._thumbPercent=t,this.scaleBar&&(this._slider.isVertical?this._slider.bar.height=Math.max(this._slider.height*t,Styles.scrollBarMinNum):this._slider.bar.width=Math.max(this._slider.width*t,Styles.scrollBarMinNum))}),__getset(0,i,"target",function(){return this._target},function(t){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),this._target=t,t&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),__getset(0,i,"hide",function(){return this._hide},function(t){this._hide=t,this.visible=!t}),__getset(0,i,"showButtons",function(){return this._showButtons},function(t){this._showButtons=t,this.callLater(this.changeScrollBar)}),__getset(0,i,"touchScrollEnable",function(){return this._touchScrollEnable},function(t){this._touchScrollEnable=t,this.target=this._target}),__getset(0,i,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(t){this._mouseWheelEnable=t}),e}(Component),Slider=function(t){function e(t){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,e.__super.call(this),this.skin=t}__class(e,"laya.ui.Slider",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(e),this._bar&&this._bar.destroy(e),this._bg=null,this._bar=null,this.changeHandler=null},i.createChildren=function(){this.addChild(this._bg=new Image2),this.addChild(this._bar=new Button)},i.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this.allowClickBack=!0},i.onBarMouseDown=function(t){this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=Laya.stage.mouseX,this._ty=Laya.stage.mouseY,Laya.stage.on("mousemove",this,this.mouseMove),Laya.stage.once("mouseup",this,this.mouseUp),this.showValueText()},i.showValueText=function(){if(this.showLabel){var t=laya.ui.Slider.label;this.addChild(t),t.textField.changeText(this._value+""),this.isVertical?(t.x=this._bar.x+20,t.y=.5*(this._bar.height-t.height)+this._bar.y):(t.y=this._bar.y-20,t.x=.5*(this._bar.width-t.width)+this._bar.x)}},i.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},i.mouseUp=function(t){Laya.stage.off("mousemove",this,this.mouseMove),this.sendChangeEvent("changed"),this.hideValueText()},i.mouseMove=function(t){var e=this._value;this.isVertical?(this._bar.y+=Laya.stage.mouseY-this._ty,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min):(this._bar.x+=Laya.stage.mouseX-this._tx,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min),this._tx=Laya.stage.mouseX,this._ty=Laya.stage.mouseY;var i=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*i)/i,this._value!=e&&this.sendChangeEvent(),this.showValueText()},i.sendChangeEvent=function(t){void 0===t&&(t="change"),this.event(t),this.changeHandler&&this.changeHandler.runWith(this._value)},i.setBarPoint=function(){this.isVertical?this._bar.x=.5*(this._bg.width-this._bar.width):this._bar.y=.5*(this._bg.height-this._bar.height)},i.changeSize=function(){t.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},i.setSlider=function(t,e,i){this._value=-1,this._min=t,this._max=e>t?e:t,this.value=t>i?t:i>e?e:i},i.changeValue=function(){var t=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t)/t,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value,this.isVertical?this._bar.y=(this._value-this._min)/(this._max-this._min)*(this.height-this._bar.height):this._bar.x=(this._value-this._min)/(this._max-this._min)*(this.width-this._bar.width)},i.onBgMouseDown=function(t){var e=this._bg.getMousePoint();this.isVertical?this.value=e.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=e.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.setBarPoint())}),__getset(0,i,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.callLater(this.changeValue))}),__getset(0,i,"bar",function(){return this._bar}),__getset(0,i,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),__getset(0,i,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),__getset(0,i,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=t,this._bar.sizeGrid=t}),__getset(0,i,"tick",function(){return this._tick},function(t){this._tick=t,this.callLater(this.changeValue)}),__getset(0,i,"min",function(){return this._min},function(t){this._min!=t&&(this._min=t,this.callLater(this.changeValue))}),__getset(0,i,"value",function(){return this._value},function(t){if(this._value!=t){var e=this._value;this._value=t,this.changeValue(),this._value!=e&&this.sendChangeEvent()}}),__getset(0,i,"allowClickBack",function(){return this._allowClickBack},function(t){this._allowClickBack!=t&&(this._allowClickBack=t,t?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.value=Number(e):t.prototype._$set_dataSource.call(this,e)}),__static(e,["label",function(){return this.label=new Label}]),e}(Component),Image2=function(t){function e(t){this._bitmap=null,this._skin=null,e.__super.call(this),this.skin=t}__class(e,"laya.ui.Image",t,"Image2");var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null},i.dispose=function(){this.destroy(!0),Laya.loader.clearRes(this._skin)},i.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap,this._bitmap.autoCacheCmd=!1},i.setSource=function(t,e){t===this._skin&&(this.source=e)},__getset(0,i,"skin",function(){return this._skin},function(t){if(this._skin!=t)if(this._skin=t,t){this._addRenderType(256);var e=Loader.getRes(t);e?this.source=e:Laya.loader.load(this._skin,Handler.create(this,this.setSource,[this._skin]),null,"image")}else this.source=null,this._removeRenderType(256),this._removeRenderType(1)}),__getset(0,i,"source",function(){return this._bitmap.source},function(t){this._bitmap&&(t?this._bitmap.source=t:this._renderType&=-2,this.event("loaded"),this.repaint())}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._bitmap.width=0==e?1e-7:e}),__getset(0,i,"measureHeight",function(){return this._bitmap.height}),__getset(0,i,"measureWidth",function(){return this._bitmap.width}),__getset(0,i,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._bitmap.height=0==e?1e-7:e}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"string"==typeof e?this.skin=e:t.prototype._$set_dataSource.call(this,e)}),e}(Component),Label=function(t){function e(t){this._tf=null,e.__super.call(this),void 0===t&&(t=""),Font.defaultColor=Styles.labelColor,this.text=t}__class(e,"laya.ui.Label",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._tf=null},i.createChildren=function(){this.addChild(this._tf=new Text)},__getset(0,i,"leading",function(){return this._tf.leading},function(t){this._tf.leading=t}),__getset(0,i,"text",function(){return this._tf.text},function(t){this._tf.text!=t&&(this._tf.text=t,this.event("change"))}),__getset(0,i,"color",function(){return this._tf.color},function(t){this._tf.color=t}),__getset(0,i,"strokeColor",function(){return this._tf.strokeColor},function(t){this._tf.strokeColor=t}),__getset(0,i,"wordWrap",function(){return this._tf.wordWrap},function(t){this._tf.wordWrap=t}),__getset(0,i,"font",function(){return this._tf.font},function(t){this._tf.font=t}),__getset(0,i,"italic",function(){return this._tf.italic},function(t){this._tf.italic=t}),__getset(0,i,"valign",function(){return this._tf.valign},function(t){this._tf.valign=t}),__getset(0,i,"align",function(){return this._tf.align},function(t){this._tf.align=t}),__getset(0,i,"bold",function(){return this._tf.bold},function(t){this._tf.bold=t}),__getset(0,i,"textField",function(){return this._tf}),__getset(0,i,"fontSize",function(){return this._tf.fontSize},function(t){this._tf.fontSize=t}),__getset(0,i,"padding",function(){return this._tf.padding.join(",")},function(t){this._tf.padding=UIUtils.fillArray(Styles.labelPadding,t,Number)}),__getset(0,i,"bgColor",function(){return this._tf.bgColor},function(t){this._tf.bgColor=t}),__getset(0,i,"measureWidth",function(){return this._tf.width}),__getset(0,i,"borderColor",function(){return this._tf.borderColor},function(t){this._tf.borderColor=t}),__getset(0,i,"stroke",function(){return this._tf.stroke},function(t){this._tf.stroke=t}),__getset(0,i,"asPassword",function(){return this._tf.asPassword},function(t){this._tf.asPassword=t}),__getset(0,i,"measureHeight",function(){
return this._tf.height}),__getset(0,i,"width",function(){return this._width||this._tf.text?t.prototype._$get_width.call(this):0},function(e){t.prototype._$set_width.call(this,e),this._tf.width=e}),__getset(0,i,"height",function(){return this._height||this._tf.text?t.prototype._$get_height.call(this):0},function(e){t.prototype._$set_height.call(this,e),this._tf.height=e}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.text=e+"":t.prototype._$set_dataSource.call(this,e)}),e}(Component),HTMLImage=function(t){function e(t){this._recreateLock=!1,this._needReleaseAgain=!1,this._source=t||new Browser.window.Image,e.__super.call(this)}__class(e,"laya.resource.HTMLImage",t);var i=e.prototype;return i.recreateResource=function(){var t=this;if(""===this._src)throw new Error("src不能为空！");if(this.startCreate(),!this._source){this._recreateLock=!0;var e=this;this._source=new Browser.window.Image,this._source.onload=function(){return e._source.onload=null,e._needReleaseAgain?(e._needReleaseAgain=!1,void(e._source=null)):(e.memorySize=t._w*t._h*4,e._recreateLock=!1,void e.compoleteCreate())},this._source.src=this._src}},i.detoryResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},i.onresize=function(){this._w=this._source.width,this._h=this._source.height},__getset(0,i,"source",function(){return this._source}),__getset(0,i,"onload",null,function(t){var e=this;this._onload=t,this._source&&(this._source.onload=null!=this._onload?function(){e.onresize(),e._onload()}:null)}),__getset(0,i,"src",t.prototype._$get_src,function(t){this._src=t,this._source&&(this._source.src=this._src)}),__getset(0,i,"onerror",null,function(t){var e=this;this._onerror=t,this._source&&(this._source.onerror=null!=this._onerror?function(){e._onerror()}:null)}),e}(FileBitmap),ProgressBar=function(t){function e(t){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,e.__super.call(this),this.skin=t}__class(e,"laya.ui.ProgressBar",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(e),this._bar&&this._bar.destroy(e),this._bg=this._bar=null,this.changeHandler=null},i.createChildren=function(){this.addChild(this._bg=new Image2),this.addChild(this._bar=new Image2),this._bar._bitmap.autoCacheCmd=!1},i.changeValue=function(){if(this.sizeGrid){var t=this.sizeGrid.split(","),e=Number(t[0]),i=Number(t[2]),n=this.width-e-i,s=n*this._value;this._bar.width=e+i+s,this._bar.visible=this._bar.width>e+i}else this._bar.width=this.width*this._value},__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),__getset(0,i,"bar",function(){return this._bar}),__getset(0,i,"measureHeight",function(){return this._bg.height}),__getset(0,i,"measureWidth",function(){return this._bg.width}),__getset(0,i,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=this._bar.sizeGrid=t}),__getset(0,i,"bg",function(){return this._bg}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._bg.height=this._height,this._bar.height=this._height}),__getset(0,i,"value",function(){return this._value},function(t){this._value!=t&&(t=t>1?1:0>t?0:t,this._value=t,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(t))}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._bg.width=this._width,this.callLater(this.changeValue)}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.value=Number(e):t.prototype._$set_dataSource.call(this,e)}),e}(Component),WebGLImage=function(t){function e(t){this._recreateLock=!1,this._needReleaseAgain=!1,this._image=null,this.repeat=!1,this.mipmap=!1,this.minFifter=0,this.magFifter=0,this.createOwnSource=!1,e.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this._image=t||new Browser.window.Image,this.createOwnSource=!0}__class(e,"laya.webgl.resource.WebGLImage",t);var i=e.prototype;return i.recreateResource=function(){if(""===this._src)throw new Error("src不能为空！");this.startCreate();Arith.isPOT(this.width,this.height);if(this._image){if(this._recreateLock)return;this.createOwnSource&&this.createWebGlTexture(),this.compoleteCreate()}else{this._recreateLock=!0;var t=this;this._image=new Browser.window.Image,this._image.onload=function(){return t._image.onload=null,t._needReleaseAgain?(t._needReleaseAgain=!1,void(t._image=null)):(t.createOwnSource&&t.createWebGlTexture(),void t.compoleteCreate())},t._image.src=this._src}},i.copyTo=function(t){var e=t;e._image=this._image,laya.resource.Bitmap.prototype.copyTo.call(this,e)},i.detoryResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this.createOwnSource&&WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.createWebGlTexture=function(){var t=WebGL.mainContext;if(!this._image)throw"create GLTextur err:no data:"+this._image;var e=this._source=t.createTexture();t.bindTexture(3553,e),t.texImage2D(3553,0,6408,6408,5121,this._image);var i=this.minFifter,n=this.magFifter,s=this.repeat?10497:33071,a=Arith.isPOT(this.width,this.height);a?(this.mipmap?-1!==i||(i=9987):-1!==i||(i=9729),-1!==n||(n=9729),t.texParameteri(3553,10240,n),t.texParameteri(3553,10241,i),t.texParameteri(3553,10242,s),t.texParameteri(3553,10243,s),this.mipmap&&t.generateMipmap(3553)):(-1!==i||(i=9729),-1!==n||(n=9729),t.texParameteri(3553,10241,i),t.texParameteri(3553,10240,n),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),t.bindTexture(3553,null),this._image=null,this.createOwnSource&&a?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._recreateLock=!1},i.onresize=function(){this._w=this._image.width,this._h=this._image.height},__getset(0,i,"image",function(){return this._image}),__getset(0,i,"onload",null,function(t){var e=this;this._onload=t,this._image&&(this._image.onload=null!=this._onload?function(){e.onresize(),e._onload()}:null)}),__getset(0,i,"src",t.prototype._$get_src,function(t){this._src=t,this._image&&(this._image.src=t)}),__getset(0,i,"onerror",null,function(t){var e=this;this._onerror=t,this._image&&(this._image.onerror=null!=this._onerror?function(){e._onerror()}:null)}),e}(FileBitmap),GObj2DMutiText=function(t){function e(){this.m_strDis="",this.m_kindName="",this.m_iLNum=0,this.m_iVerNum=0,this.m_arrIdx=null,this._vb=null,this._f32Arr=null,this.m_fXPos=NaN,this.m_fYPos=NaN,this.m_iAlign=0,this.m_okHandler=null,e.__super.call(this),this.m_clipRect=new GRect,this.m_fXPos=0,this.m_fYPos=0,this.m_iAlign=0}__class(e,"game.ui.base.GObj2DMutiText",t);var i=e.prototype;return i.LoadAni=function(e){if(this.complete)throw new Error("你确认想要重复调入字体文件吗？");t.prototype.SetOkHandler.call(this,Handler.create(this,this.updateTextDis)),this.createInsFromName(e)},i.SetOkHandler=function(t){this.m_okHandler=t},i.SetScrPos=function(t,e,i){this.m_fXPos=t,this.m_fYPos=e,this.m_iAlign=i,this.complete&&this.resetPos()},i.resetPos=function(){var t=this.m_clipRect;this.y=this.m_fYPos-t.bottom;var e=0;switch(this.m_iAlign){case 0:e=this.m_fXPos-t.left;break;case 1:e=this.m_fXPos-t.left-(t.right-t.left)/2;break;case 2:e=this.m_fXPos-t.right;break;default:throw new Error("Not supported align mode...")}this.x=e},i.dispose=function(){return t.prototype.dispose.call(this),this._vb&&(this._vb.dispose(),this._vb=null,this._f32Arr=null),!0},i.SetText=function(t){this.m_strDis=t,this.complete&&this.updateTextDis()},i.getVallidLnum=function(){this.m_arrIdx=[];for(var t=this.m_strDis.length,e=-1,i=0;t>i;i++){var n=this.m_strDis.charAt(i);e=this.m_kindName.indexOf(n),0>e||this.m_arrIdx.push(e)}return this.m_arrIdx.length},i.updateTextDis=function(){this.m_kindName=this.curKind.kindName,this.m_iLNum=this.getVallidLnum();var t=this.m_iLNum;if(0>=t){if(this.m_okHandler){var e=this.m_okHandler;this.m_okHandler=null,e.run()}}else{this.m_iVerNum=4*t*8;var i=0,n=0,s=0;this._f32Arr=new Float32Array(this.m_iVerNum);for(var a=0;t>a;a++){var r=this.curKind.getKeyData(this.m_arrIdx[a]);0==a&&(this.m_clipRect.top=r.pt[0].y,this.m_clipRect.left=r.pt[0].x,this.m_clipRect.bottom=-1e6,s=this.m_clipRect.left),n=r.pt[1].x-r.pt[0].x,this._f32Arr[i++]=s,this._f32Arr[i++]=r.pt[0].y,this._f32Arr[i++]=r.pt[0].u,this._f32Arr[i++]=r.pt[0].v,this._f32Arr[i++]=r.pt[0].r,this._f32Arr[i++]=r.pt[0].g,this._f32Arr[i++]=r.pt[0].b,this._f32Arr[i++]=r.pt[0].a,this._f32Arr[i++]=s+n,this._f32Arr[i++]=r.pt[1].y,this._f32Arr[i++]=r.pt[1].u,this._f32Arr[i++]=r.pt[1].v,this._f32Arr[i++]=r.pt[1].r,this._f32Arr[i++]=r.pt[1].g,this._f32Arr[i++]=r.pt[1].b,this._f32Arr[i++]=r.pt[1].a,this._f32Arr[i++]=s+n,this._f32Arr[i++]=r.pt[3].y,this._f32Arr[i++]=r.pt[3].u,this._f32Arr[i++]=r.pt[3].v,this._f32Arr[i++]=r.pt[3].r,this._f32Arr[i++]=r.pt[3].g,this._f32Arr[i++]=r.pt[3].b,this._f32Arr[i++]=r.pt[3].a,this._f32Arr[i++]=s,this._f32Arr[i++]=r.pt[2].y,this._f32Arr[i++]=r.pt[2].u,this._f32Arr[i++]=r.pt[2].v,this._f32Arr[i++]=r.pt[2].r,this._f32Arr[i++]=r.pt[2].g,this._f32Arr[i++]=r.pt[2].b,this._f32Arr[i++]=r.pt[2].a,s+=n,r.pt[2].y>this.m_clipRect.bottom&&(this.m_clipRect.bottom=r.pt[2].y),r.pt[0].y<this.m_clipRect.top&&(this.m_clipRect.top=r.pt[0].y)}this._vb=this._vb||new Buffer(34962),this._vb.setdata(this._f32Arr),this.m_clipRect.right=s,this.resetPos(),this.m_okHandler&&(this.m_okHandler.run(),this.m_okHandler=null)}},i.getClipRect=function(){return this.m_clipRect},i.customRender=function(t,e,i){this._vb&&(this.parent instanceof display.MutiWorld&&!this.parent.isMutiInsInView(this)||(this.transform&&this.transform.setTranslate(0,0),t.ctx.setIBVB(e,i,null,this._vb,6*this.m_iLNum,null,AniShader.shader,this.curKind.getShader(),0,0)))},i.SetShow=function(t){this.visible=!!t},e}(Muti2DAniIns),GHuntPetBase=function(t){function e(){this.m_nUid=0,this.m_nLucky=0,this.m_nMapDataNo=0,this.m_szPetData=[],this.m_pLinkBk=null,this.m_szFriInfor=null,this.m_pOpLink=null,this.m_pQueLink=null,e.__super.call(this),this.m_szFriInfor=FriendInfo.Create()}__class(e,"display.petHunt.GHuntPetBase",t);var i=e.prototype;return i.SetData=function(t){this.ClearData(),t.length<3||(this.m_nMapDataNo=t[0],this.m_szPetData=t[2],t.length>3&&(this.m_nLucky=t[3],this.m_nUid=t[4],this.m_szFriInfor=t[5]),this.Init(t[1]))},i.GetPetMapNo=function(){return this.m_nMapDataNo},i.IsSelfPet=function(){var t=this.m_nUid?0:1;return t},i.SetLinkBk=function(t){this.m_pLinkBk=t},i.Enable=function(t){},i.EnablePet=function(t,e){switch(t){case 1:if(!this.IsSelfPet())return;break;case 2:if(this.IsSelfPet())return void(e||this.Enable(1))}this.Enable(e)},i.GetHuntData=function(){return this.m_nUid>0?[this.m_nMapDataNo,this.GetPetID(),this.m_nLucky,this.m_nUid]:[this.m_nMapDataNo,this.GetPetID()]},i.GetPetData=function(){return this.m_nUid>0?[this.m_nMapDataNo,this.GetPetID(),null,this.m_nLucky,this.m_nUid,this.m_szFriInfor]:this.m_nUid>0?[this.m_nMapDataNo,this.GetPetID(),null,this.m_nLucky,this.m_nUid,this.m_szFriInfor]:[this.m_nMapDataNo,this.GetPetID(),this.m_szPetData]},i.ClearData=function(){this.m_nUid=0,this.m_nLucky=0,this.m_nMapDataNo=0,this.m_szPetData.length=0},i.SetLinkObj=function(t,e){this.m_pOpLink=t,this.m_pQueLink=e},i.MoveTos=function(t,e){Tween.to(this.m_disObj,{x:t,y:e},200)},i.OnClick=function(){this.m_pOpLink.AddItem(this.GetPetData()),this.m_pQueLink.DelItem(this)},e}(GBasePetItem),GPetShow=function(t){function e(t){this.m_img=null,e.__super.call(this,t)}__class(e,"display.petHunt.GPetShow",t);var i=e.prototype;return i.dispose=function(){this.m_img.destroy(),game.build.DisplayItem.prototype.dispose.call(this)},i.setPs=function(t,e){this.SetMapPos(t,e),this.SetLayer(1e8),this.m_img=new Image2,this.m_img.skin="3d/tex/52ac01a16aed2002.png",this.m_img.pos(-55,-70),this.m_disObj.addChild(this.m_img)},i.posMove=function(t,e){this.StopMove(),this.m_disObj.x+=t,this.m_disObj.y+=e},e}(GBasePetItem),GClould_Gift=function(t){function e(t){this.m_nBoxLock=0,this.m_szBoxData=null,this.xg=null,e.__super.call(this,t)}var i;__class(e,"game.build.GClould_Gift",t);var n=e.prototype;return n.InitImg=function(){},n.InitGiftImg=function(t){this.LoadFromName(t,this),this.SetAniKind("l1"),this.PlayAni(1)},n.InitData=function(t){this.m_szBoxData=t;var e="tex_彩虹_001_ani_001";t.length>=4&&t[3]>0&&(e="tex_彩虹_001_ani_002"),this.InitGiftImg(e),this.OnCreate()},n.OnLBUp=function(t,e){if(!this.m_nBoxLock){if(this.m_nBoxLock=1,this.m_szBoxData.length<3)return gSys.GameMsg("空宝箱",!1,"提示"),this.m_nBoxLock=0,void this.OnClose();DataTable.m_iSoundTab.OnPlay("魔法效果"),this.xg=new i,this.xg.onShow(this.m_szBoxData[0])}},n.OnClose=function(){this.m_nBoxLock=0,t.prototype.OnClose.call(this)},e.__init$=function(){i=function(t){function e(){this.p=null,this.img=null,this._itemID=0,this.po=null,e.__super.call(this),this.p=new Muti2DAniIns,this.p.createInsFromName("tex_彩虹_001_ani_001"),this.p.blendMode="overlay",this.p.playAni("l0"),this.p.PlaySpeed(1,0),this.p.scaleX=this.p.scaleY=2,this.addChild(this.p),this.img=new Image2,this.img.size(64,64),this.img.pos(-this.img.width/2,-this.img.height/2),this.addChild(this.img),this.mouseEnabled=!0,this.closeHandler=Handler.create(this,this.onCloseHandler),this.isCanCloseByOther=!1}__class(e,"",t);var i=e.prototype;return i.onShow=function(t){this._itemID=t,this.img.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(t)[3]),this.myPopup(!0),this.po=this.localToGlobal(new Point(this.img.x,this.img.y)),this.on("click",this,this.OnClose)},i.onCloseHandler=function(){DataTable.m_iSelfUser.AddBoxGiftItem(this._itemID,0,this.po.x,this.po.y,null),this.p.dispose(),this.p=null,this.img.dispose(),this.img=null},e}(MyDiaLog)},e}(GClould_Base),GClould_Rain=function(t){function e(t){e.__super.call(this,t)}__class(e,"game.build.GClould_Rain",t);var i=e.prototype;return i.OnCreate=function(){this.m_nXpos=1200+MathUtil1.rand(3e3),this.m_nYpos=1e3+MathUtil1.rand(1e3),this.InitImg(),this.SetLayer(100010),this.SetPos(this.m_nXpos,this.m_nYpos),this.OnMove(),this.ShowShade(1)},i.OnLBDown=function(e,i){return t.prototype.OnLBDown.call(this,e,i),this.OnRain(),0},i.OnRain=function(){DataTable.m_iSoundTab.OnPlay("闪电0"+(MathUtil1.rand(2)+1)),this.SetAniKind("l1"),this.PlayAni(1),Laya.timer.once(3e3,this,this.OnClose),GMapView.m_cloudMgr.delRain(this)},e}(GClould_Base),GMapBuildBase=function(t){function e(){this.m_nSelf=0,this.m_nMapDataNo=-100,this.m_szMapData=null,this.m_nMouseEnable=1,this.m_nMoveKind=0,this.m_sBuildResName=null,e.__super.call(this)}__class(e,"game.build.GMapBuildBase",t);var i=e.prototype;return i.ResetColInfo=function(){this.SetPut(-1,-1,4294967295)},i.InitBuild=function(t,e,i){void 0===i&&(i=1),this.m_nMapDataNo=e,this.m_szMapData=t,null==this.m_szMapData.data&&(this.m_szMapData.data=[]),this.m_nMirror=1&this.m_szMapData.forword,this.m_nSelf=i;var n=this.GetDef();this.m_nMoveKind=n[10],this.m_sBuildResName=n[4],this.LoadAni(n,this),this.SetIPos(t.x,t.y),(0==this.m_nXpos&&0==this.m_nYpos||this.m_nXpos<0||this.m_nYpos<0||this.m_nXpos>=6260||this.m_nYpos>=4050)&&this.SetPos(2600,1500),this.m_nPutFlag=n[7]<0?1:2,i&&this.SetPut(n[5],n[6],this.m_nPutFlag),this.OnInited(),this.AutoLayer(),i?GLeadManager.RegArrowInterface(this,"地图_"+this.GetBuildSysName()):GLeadManager.RegArrowInterface(this,"地图_"+this.GetBuildSysName()+"_0")},i.AutoLayer=function(){var t=this.GetDef();4294967295==t[7]&&this.SetLayer(this.m_disObj.y/1e3,!1)},i.getMapItem=function(){return this.m_szMapData},i.GetDef=function(){return DataTable.m_iBuildTab.Get(this.m_szMapData.itemid)},i.GetBuildID=function(){return this.m_szMapData.itemid},i.GetMapDataNo=function(){return this.m_nMapDataNo},i.GetBuildSysName=function(){var t=this.GetDef();return t?t[2]:null},i.GetSelectInfo=function(){return this.GetDef()[13]},i.OnInited=function(){},i.OnSelect=function(){},i.UnSelect=function(){},i.OnChgAniState=function(t){},i.OnClick=function(){},i.OnMutiBuildDeleteEx=function(t,e){if(!(e instanceof Array))return e>this.m_nMapDataNo?!1:e==this.m_nMapDataNo?(this.OnDelBuild(t),!0):(this.m_nMapDataNo--,!1);for(var i=!1,n=this.m_nMapDataNo,s=e.length,a=0;s>a;a++)e[a]>n||(e[a]!=n?this.m_nMapDataNo--:(this.OnDelBuild(t),i=!0));return i},i.OnDelBuild=function(t){this.UnRegLead(),this.DelBuild()},i.UnRegLead=function(){this.m_nSelf?GLeadManager.UnRegArrowInterface("地图_"+this.GetBuildSysName()):GLeadManager.UnRegArrowInterface("地图_"+this.GetBuildSysName()+"_0")},i.DelBuild=function(){DisplayItem.SafeDelObj(this)},i.setvis=function(t){this.m_disObj.visible=t},i.OnLBUp=function(){this.OnMouseOut(),this.OnClick()},i.OnLBDown=function(){if(!this.m_nMouseEnable)return-1;var t=!1;return this instanceof game.build.GMB_Field&&(t=!0),MutiWorld.resetGrid(this.m_disObj.x,this.m_disObj.y,this.m_nPutW,this.m_nPutH,t),this.m_nMoveKind<1?(this.OnMouseIn(),-1):(this.OnMouseIn(),300)},__getset(0,i,"pid",function(){return this.m_iSelfBk}),e.SetDisMapItem=function(t){e.s_pDisMouseObj=t},e.HaveDisMapItem=function(){return null!=e.s_pDisMouseObj},e.currentBuildId=-1,e.s_pDisMouseObj=null,e}(MapItemMove),GMapBuyItem=function(t){function e(){this.m_nBuildID=0,this.m_nBuildKind=0,this.m_nLDx=0,this.m_nLDy=0,this.m_pGBuyPop=null,this.m_szBuildV=null,this._$4_m_posHandler=null,e.__super.call(this)}__class(e,"game.build.GMapBuyItem",t);var i=e.prototype;return i.SetSubData=function(t,e,i){this.m_pGBuyPop.SetSubData(t,e,i)},i.GetDef=function(){return DataTable.m_iBuildTab.Get(this.m_nBuildID)},i.Init=function(t,i,n){function s(){a.m_pGBuyPop.updatePoint(a.getScrPoint())}var a=this;MainIcon.getInstance().hideAll(),this.m_nBuildID=t;var r=this.GetDef();this.m_szBuildV=r,this.LoadFromName(r[4],this),this.m_nBuildKind=r[1],this.m_nPutFlag=r[7]<0?1:2,this.SetIPos(i,n),this.SetPut(r[5],r[6],this.m_nPutFlag),this.SetLayer(.8),this.m_nCanMouse=65535,DisplayItem.m_pBk.setScreenCenter(this.m_nXpos,this.m_nYpos,!0,800),this.m_pGBuyPop=new GBuyPop,this.m_pGBuyPop.onBuyHandler=Handler.create(this,this.onBuy),this.m_pGBuyPop.onCloseHandler=Handler.create(this,this.onCancel),this.m_disObj.SetOkHandler(Handler.create(this,popuiset=function(){a.m_pGBuyPop.updatePoint(a.getScrPoint())})),DisplayTools.addTarget(this.m_pGBuyPop,GameMain._ins.m_gameUI.container),this.m_pGBuyPop.OnPop(this),this._$4_m_posHandler=new Handler(this,s),this.setMoveHandler(this._$4_m_posHandler),DisplayItem.m_pBk.addPosHandler(this._$4_m_posHandler),e.m_bInBuyMode=!0},i.GetFreePos=function(){return this.GetWorldPos(),DisplayItem.m_pBk.m_mapIns.getCol(UintRef.t1.uid,UintRef.t2.uid)?(e.m_offsetValue=-e.m_offsetValue,this.GetWorldPos(),DisplayItem.m_pBk.m_mapIns.getCol(UintRef.t1.uid,UintRef.t2.uid)?(e.m_offsetValue=-e.m_offsetValue,e.m_bDefaultX=!e.m_bDefaultX,this.GetWorldPos(),DisplayItem.m_pBk.m_mapIns.getCol(UintRef.t1.uid,UintRef.t2.uid)?(e.m_offsetValue=-e.m_offsetValue,this.GetWorldPos(),DisplayItem.m_pBk.m_mapIns.getCol(UintRef.t1.uid,UintRef.t2.uid)?!1:!0):!0):!0):!0},i.GetWorldPos=function(){TileGrid.TransI2W(this.m_nMapIX,this.m_nMapIY,UintRef.t1,UintRef.t2),e.m_bDefaultX?e.m_offsetValue>0?UintRef.t1.uid+=1:UintRef.t1.uid-=1:e.m_offsetValue>0?UintRef.t2.uid+=1:UintRef.t2.uid-=1;var t=UintRef.t1.uid,i=UintRef.t2.uid;TileGrid.TransW2I(t,i,UintRef.t1,UintRef.t2)},i.BuyGoOn=function(){var t=DataTable.m_iSelfUser.GetLevel(),i=DataTable.m_iSelfUser.GetBuildHaveNum(this.m_nBuildID),n=Math.max(1,DataTable.m_iUserLevelTab.GetLevelBuildNum(t,this.m_nBuildID));if(!(this.m_nBuildID>=4530&&this.m_nBuildID<=4536)&&i>=n)return!1;var s=DataTable.m_iBuildTab.Get(this.m_nBuildID);if(1==s[5]&&1==s[6]&&this.GetFreePos())this.SetIPos(UintRef.t1.uid,UintRef.t2.uid),DisplayItem.m_pBk.setScreenCenter(this.m_nXpos,this.m_nYpos,!0,800);else{var a=DisplayItem.m_pBk.getFreePos(s[5],s[6]);if(!a)return this.closeView(),e.notiNoFreePos(),!1;this.SetIPos(a.x,a.y),DisplayItem.m_pBk.setScreenCenter(this.m_nXpos,this.m_nYpos,!0,800)}this.m_pGBuyPop.onBuyHandler=Handler.create(this,this.onBuy),this.m_pGBuyPop.onCloseHandler=Handler.create(this,this.onCancel),this.m_pGBuyPop.updatePoint(this.getScrPoint()),DisplayTools.addTarget(this.m_pGBuyPop,GameMain._ins.m_gameUI.container);var r=this.GetDef();return this.SetPut(r[5],r[6],this.m_nPutFlag),this.m_pGBuyPop.setNewBuy(!0),!0},i.proNextPos=function(){TileGrid.TransI2W(e.m_lastX,e.m_lastY,UintRef.t1,UintRef.t2),TileGrid.TransI2W(this.IX,this.IY,gSys.t1,gSys.t2),UintRef.t1.uid==gSys.t1.uid?(e.m_bDefaultX=!1,UintRef.t2.uid>gSys.t2.uid?e.m_offsetValue=-1:e.m_offsetValue=1):(e.m_bDefaultX=!0,UintRef.t1.uid>gSys.t2.uid?e.m_offsetValue=-1:e.m_offsetValue=1)},i.isGoOnBuy=function(t){var e=DataTable.m_iSelfUser.GetBuildHaveNum(t),i=Math.max(1,DataTable.m_iUserLevelTab.GetLevelBuildNum(DataTable.m_iSelfUser.GetLevel(),t)),n=DataTable.m_iBuildTab.Get(t);if(!Build.isstruct(n))return!1;var s=n[1];return 1==i&&(0==s||6==s||2==s)&&(i=1e3),i>e?!0:!1},i.onBuy=function(){var t=this,i=(new Point,new Point);i.x=Laya.stage.mouseX,i.y=Laya.stage.mouseY,this.m_pGBuyPop.setNewBuy(!1),this.SetPut(this.m_nPutW,this.m_nPutH),1e8!=e.m_lastX&&this.proNextPos(),DataTable.m_iSelfUser.BuyMapItem(this.m_nBuildID,this.IX,this.IY,i,Handler.create(this,buyOK=function(){e.m_lastX=t.IX,e.m_lastY=t.IY,DataTable.m_iSelfUser.ClearShopTip([t.m_nBuildID]),t.isGoOnBuy(t.m_nBuildID)?t.BuyGoOn()||t.closeView():t.closeView()}),Handler.create(this,buyNo=function(){t.closeView()}))},i.onCancel=function(){SelectItemShow.UnLinkItem(),this.SetPut(this.m_nPutW,this.m_nPutH),this.closeView()},i.closeView=function(){SelectItemShow.UnLinkItem(),DisplayItem.m_pBk.delPosHandler(this._$4_m_posHandler),DisplayItem.m_pBk.SelObjToMove(null),this._$4_m_posHandler&&(this.m_posHandler.clear(),this._$4_m_posHandler=null),this.setMoveHandler(null),DisplayItem.SafeDelObj(this),e.m_lastX=1e8,e.m_lastY=1e8,MainIcon.getInstance().showAll(),e.m_bInBuyMode=!1},i.OnLBDown=function(){return MutiWorld.resetGrid(this.m_disObj.x,this.m_disObj.y,this.m_nPutW,this.m_nPutH,!1),0},e.notiNoFreePos=function(){gSys.GameMsg("场景内找不到可以摆放当前建筑的空地了。请砍树、解锁云或整理空地后再试!")},e.m_bDefaultX=!0,e.m_offsetValue=1,e.m_lastX=1e8,e.m_lastY=1e8,e.m_bInBuyMode=!1,e}(MapItemMove),GMC_Truck=function(t){function e(){this.m_sLeadNeedOp="",this.m_nDefX=0,this.m_nDefY=0,this._m_nTruckState=0,this.m_sCurAniName="",this.m_pid=null,this.m_pShadow=null,this._nAlpha=NaN,this.x1=new UintRef,this.y1=new UintRef,this.x2=new UintRef,e.__super.call(this),e._ins=this}__class(e,"game.build.GMC_Truck",t);var i=e.prototype;return i.getpid=function(){return this.m_pid},i.setPid=function(t){this.m_pid=t,this.onInit()},i.onInit=function(){this.OnCreate()},i.dispose=function(){Tween.clearAll(this.m_disObj),Laya.timer.clearAll(this),game.build.DisplayItem.prototype.dispose.call(this),this.m_pShadow&&(this.m_pShadow.dispose(),this.m_pShadow=null)},i.OnCreate=function(){var t=0;if(this.m_nCanMouse=GMapView.m_nSelf,this.m_iSelfBk.GetNamedPos("fireballoon1",gSys.t1,gSys.t2)||(gSys.t1.uid=2308,gSys.t2.uid=943),t=gSys.t2.uid,DataTable.m_iSelfUser.GetLevel()<4&&DataTable.m_iSelfUser.GetLeadStep()<35?(t=-300,this.SetShow(0)):e.m_sArrived=!0,this.SetPos(gSys.t1.uid,t),this.m_nShow&&this.ShowShade(1),this.SetLayer(.8),this.m_nCanMouse){GLeadManager.RegArrowInterface(this,"地图_热气球");var i=DataTable.m_iSelfUser.GetOrderTruckData();i&&2==i.length&&this.SetTruckState(1),this.m_iSelfBk.on("LeadNeedOp",this,this.NotiLeadOp),SignalMr.Me().on("closelvupdlg",this,this.OnLevelChg)}},i.OnLevelChg=function(){return 1!=this.m_nShow?DataTable.m_iSelfUser.GetLevel()<4?void this.SetShow(0):void this.OnBack(0):void 0},i.SetAniKind=function(t,e){void 0===e&&(e=!1),this.m_sCurAniName=t,game.build.DisplayItem.prototype.SetAniKind.call(this,t,e)},i.NotiLeadOp=function(t){return t&&2==t.length&&Laya.__parseInt(t[0])==GMSB_Order.Me().GetBuildID()?this.m_nShow&&2!=this.m_nTruckState?(this.m_sLeadNeedOp="",void gSys.SetSignal(""+t[1]+":"+t[0])):void(this.m_sLeadNeedOp=""+t[1]+":"+t[0]):void 0},i.OnGo=function(){this.SetShow(1),this.OnMove(2)},i.OnBack=function(t){void 0===t&&(t=1),this.SetShow(1),this.OnMove(3,t)},i.ShowShade=function(t){},i.OnMove=function(t,i){var n=this;void 0===i&&(i=1);var s=0;this.m_iSelfBk.GetNamedPos("fireballoon1",this.x1,this.y1)||(this.x1.uid=5532,this.y1.uid=1818),this.x2.uid=this.x1.uid,s=-300,2==t?(this.SetTruckState(2),this.PlayKindEndRetrun("装货"),Laya.timer.once(3e3,this,function(){n.ShowShade(0),Tween.to(this.m_disObj,{x:n.x2.uid,y:s},3e3),Laya.timer.once(4e3,this,this.OnBack)})):(this.SetTruckState(3,i),this.PlayAni(1,20*Math.random()),this.SetPos(this.x2.uid,s),Tween.to(this.m_disObj,{x:this.x1.uid,y:this.y1.uid,zOrder:this.y1.uid},3e3),Laya.timer.once(2e3,this,function(){n.ShowShade(1),Laya.timer.once(1e3,this,function(){n.SetTruckState(i),n.PlayKindEndRetrun("fall1"),gSys.SetSignal("arrive:balloon"),e.m_sArrived=!0,n.m_sLeadNeedOp&&n.m_sLeadNeedOp.length>0&&(gSys.SetSignal(n.m_sLeadNeedOp),n.m_sLeadNeedOp="")})}))},i.SetTruckState=function(t,e){switch(void 0===e&&(e=1),this.m_nTruckState=t,t){case 0:this.SetAniKind("stop_0"),this.PlayAni(1);break;case 1:this.SetAniKind("stop_1"),this.PlayAni(1);break;case 2:this.SetAniKind("fly_1"),this.PlayAni(1);break;case 3:e?this.SetAniKind("fall_0"):this.SetAniKind("fall_2"),this.PlayAni(1)}},i.OnMouseMove=function(t,e,i){this.m_nCanMouse&&i&&(this.isMouseOn()?this.OnMouseIn():this.OnMouseOut())},i.OnLBUp=function(){return this.m_nCanMouse?(this.OnMouseOut(),this.m_nTruckState?void this.GetReward():void GMSB_Order.Me().OnLBUp()):void 0},i.GetReward=function(){if(1!=this.m_nTruckState)return 0;var t=NaN,e=NaN;return t=Laya.stage.mouseX,e=Laya.stage.mouseY,DataTable.m_iSelfUser.GetMyTruckReward(t,e),gSys.SetSignal("get:ordermoney"),this.SetTruckState(0),1},i.OnLBDown=function(){return this.m_nCanMouse?(this.OnMouseIn(),1e3):0},i.RestoreShow=function(t){this.m_nAlpha=255,this.m_nCanMouse=t},i.OnLBHold=function(t,e){return this.m_nAlpha=100,this.m_nCanMouse=0,0},i.SetAvatar=function(t){switch(t){case 0:this.LoadFromName("tex_热气球_001_ani",this);break;case 1:this.LoadFromName("tex_森林热气球_ani",this);break;case 2:this.LoadFromName("tex_沙漠热气球_ani",this);break;case 3:this.LoadFromName("tex_万圣热气球_ani",this);break;case 4:this.LoadFromName("tex_圣诞节系热气球_ani",this)}this.m_disObj&&(this.m_disObj.m_gzObj=this),this.SetAniKind(this.m_sCurAniName),this.PlayAni(1),this.SetMapPos(this.m_nXpos,this.m_nYpos),this.ShowShade(0)},i.mm_nAlpha=function(t){this._nAlpha=t;var e=t/256;this.m_disObj.alpha=e},__getset(0,i,"m_nAlpha",null,function(t){this._nAlpha=t;var e=t/256;this.m_disObj.alpha=e}),__getset(0,i,"m_nTruckState",function(){return this._m_nTruckState},function(t){this._m_nTruckState=t,GOrderDlg.hadInit&&GOrderDlg.Me().OnTrackStateChg(t)}),e.Me=function(){return e._ins?e._ins:(new e,e._ins)},e._ins=null,e.m_sArrived=!1,e}(GMapSysBuildBase),GMSB_Balloon=function(t){function e(){this._m_pTruck=null,e.__super.call(this),this.onInit()}__class(e,"game.build.GMSB_Balloon",t);var i=e.prototype;return i.onInit=function(){},i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),this._m_pTruck&&(this._m_pTruck.dispose(),this._m_pTruck=null)},i.OnInited=function(){t.prototype.OnInited.call(this),this.m_nCanMouse=1,this.m_pTruck=GMC_Truck.Me(),this.m_pTruck.setPid(this),this.ChgAvatar()},i.setvis=function(e){t.prototype.setvis.call(this,e),this._m_pTruck&&this._m_pTruck.m_disObj&&(this._m_pTruck.m_disObj.visible=e)},i.OnLBUp=function(){if(GMapView.m_nSelf&&!GMapBuildBase.s_pDisMouseObj){if(this.OnMouseOut(),DataTable.m_iSelfUser.GetLevel()<this.m_szData.needlvl)return void gSys.GameAdNoti({title:"订单板",content:"4级开放，可以完成订单",img:"_img_订单板插图"});var t=this.GetDef()[16];t&&t.length>0&&SoundManager.playSound(DataTable.getSkin(t)),this.OnClick()}},i.OnClick=function(){t.prototype.OnClick.call(this)},i.ChgAvatar=function(){this.m_pTruck&&this.m_pTruck.SetAvatar(this.m_nAvatar)},__getset(0,i,"m_pTruck",function(){return this._m_pTruck},function(t){this._m_pTruck=t}),e.Me=function(){return null==e._me&&(e._me=new e),e._me},e._me=null,e}(GMapSysBuildBase),GMSB_Home=function(t){function e(){this.m_nFlowerAdd=0,this.m_pFlyFlower=null,e.__super.call(this)}__class(e,"game.build.GMSB_Home",t);var i=e.prototype;return i.OnInited=function(){var t=this;this.linkGameObj(this),DataTable.m_iSelfUser.CheckAddFreeFlower(Handler.create(this,_a=function(e){t.m_nFlowerAdd=e}))},i.ShowFriThanks=function(t,e){},i.OnClick=function(){this.m_nSelf&&MainIcon.getInstance().upperIcon.addInterface(0,0)},e}(GMapSysBuildBase),GMSB_LBT=function(t){function e(){this.m_nNpcWaitCheck=0,e.__super.call(this)}__class(e,"game.build.GMSB_LBT",t);var i=e.prototype;return i.OnInited=function(){if(this.m_szSysData){this.SetState(this.GetSoldState());var t=this.GetUID();FriendDef.IsLocalPlayer(t)&&DataTable.m_iSelfUser.AddNoti("m_nLevel",this,this.OnLvChg),DataTable.m_iSelfUser.GetLevel()<10&&1==t,this.m_nCanMouse=1}},i.OnLvChg=function(t){Laya.timer.clear(this,this.CheckNpcBuy),Laya.timer.loop(5e3,this,this.CheckNpcBuy)},i.OnSysBuildData=function(t,e){t==this.m_nSysBuildID&&(this.m_szSysData=e,this.SetState(this.GetSoldState()),this.updataLBT())},i.CheckNpcBuy=function(){var t=this.m_szSysData;if(t&&t.length&&MarketData.isstruct(t)){var e=t[3].slice();if(!(e.length<1)){for(var i=gSys.GetCurSecAdj(),n=i-t[1],s=n,a=0,r=e.length;r>a;a++)MarketItemData.isstruct(e[a])||(e[a]=[-1,-1,-1,-1,-1,-1,-1,-1,-1]);e=ArrOp.SzSortEx(e,8,0);for(var h=0,o=0,l=e.length;l>o;o++)if(!(e[o].length<1)&&MarketItemData.isstruct(e[o])&&0==e[o][5]&&(h++,n=e[o][6]+e[o][8]-i,!(n>0))){if(!e[o][4]){if(s-e[o][8]<0)continue;return void DataTable.m_iSelfUser.CallSvr("CheckNpcBuy","NIL")}if(-10>n){if(this.m_nNpcWaitCheck>0)return void this.m_nNpcWaitCheck--;this.m_nNpcWaitCheck=24}return void DataTable.m_iSelfUser.CallSvr("CheckNpcBuy","NIL")}}}},i.GetSoldState=function(){if(!MarketData.isstruct(this.m_szSysData))return 0;for(var t=this.m_szSysData[3],e=0,i=0,n=0,s=t.length;s>n;n++)if(t[n]=t[n]||[],!(t[n].length<1))if(1==t[n][5]){if(e=1,16==i)break}else if(0==t[n][5]&&(i=16,1==e))break;return e|=i},i.SetState=function(t){this.m_nSelf&&(1|t)==t?this.SetAniKind("l3"):(16|t)==t?this.SetAniKind("l1"):this.SetAniKind("l2"),this.PlayAni(1)},i.OnLBUp=function(){if(!GMapBuildBase.s_pDisMouseObj){if(this.OnMouseOut(),this.m_nSelf&&DataTable.m_iSelfUser.GetLevel()<this.m_szData[10])return void gSys.GameAdNoti({title:"路边摊",content:"7级开放，可以出售物品",img:"tex_插图_路边摊开放"});var t=this.GetDef()[16];t&&t.length>0&&SoundManager.playSound(DataTable.getSkin(t)),this.OnClick()}},i.GetFriendNumAdd=function(t,e){if(t>=e)return 0;var i=[1,3,5,10,16,23,32,42,55,75,100,125,150,175,200],n=0,s=0;return n=ArrOp.SzHalfSearch(t,i),0>n&&(n=-1-n),s=ArrOp.SzHalfSearch(e,i),0>s&&(s=-1-s),s-n},i.OnClick=function(){var t=this.GetUID();if(1==t&&gSys.SetSignal("openmarket:1"),GMapView.m_nSelf){var e=DataTable.m_iSelfFrd.GetFriendNum(),i=this.GetFriendNumAdd(this.m_szSysData[5],e);i>0&&DataTable.m_iSelfUser.CallSvr("NotiCheckFriMax",[])}GameMain._ins.addLoading(),Laya.loader.load("assets/roadShop.json",Handler.create(this,this.onComplete,[t,GMapView.m_nSelf]),null,"atlas")},i.onComplete=function(t,e){Assets.checkRes("assets/roadShop.json")&&(RoadShopView.getInstance().SetMaster(t,e),RoadShopView.getInstance().myPopup(!0),GameMain._ins.removeLoading())},i.updataLBT=function(){Laya.loader.getRes("assets/roadShop.json")&&RoadShopView.getInstance().displayInStage&&RoadShopView.getInstance().SetMaster(this.GetUID(),GMapView.m_nSelf)},e}(GMapSysBuildBase),GMSB_NPC=function(t){function e(){this.m_nCustomerMoveNo=0,this.m_szNpcObj=[],this.m_szLeadNpc=[],this.pid=null,e.__super.call(this),DataTable.m_iNpcManager=this}__class(e,"game.build.GMSB_NPC",t);var i=e.prototype;return i.OnSysBuildDataChged=function(){
this.m_szData=DataTable.m_iSysBuildTab.Get(this.m_nSysBuildID),this.OnInited()},i.InitSysBuild=function(t,e,i){this.m_nSelf=e,this.m_nSysBuildID=t,this.m_szSysData=i,this.OnSysBuildDataChged(),e&&(DataTable.m_iNpcManager=this)},i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this);for(var t=0;t<this.m_szNpcObj.length;t++)this.m_szNpcObj[t].dispose();for(this.m_szNpcObj.splice(0,this.m_szNpcObj.length),t=0;t<this.m_szLeadNpc.length;t++)this.m_szLeadNpc[t][2].dispose();this.m_szLeadNpc.splice(0,this.m_szLeadNpc.length),Laya.timer.clearAll(this)},i.OnInited=function(){(!this.m_szSysData||this.m_szSysData.length<1)&&(this.m_szSysData=[0,null]);var t=this.m_szSysData[1];if(this.m_nSelf&&t&&!(t.length<1)){for(var e,i,n=0;n<t.length;n++)e=t[n],e&&(i=0==e[1]?new GMC_ActivNpc:new GMC_Customer,i.OnInitedMe(this,this.m_nSelf,e[1],this.m_szNpcObj.length,e),this.m_szNpcObj||(this.m_szNpcObj=[]),this.m_szNpcObj.push(i));Laya.timer.loop(5e3,this,this.CheckCustomerMove)}},i.GetCustomerMoveNo=function(){return this.m_nCustomerMoveNo},i.CheckCustomerMove=function(){if(this.m_szNpcObj&&!(this.m_szNpcObj.length<1)){for(var t=0;t<this.m_szNpcObj.length;t++)if(this.m_szNpcObj[t]&&!this.m_szNpcObj[t].NeedFindPath())return;this.m_nCustomerMoveNo++,this.m_nCustomerMoveNo>100&&(this.m_nCustomerMoveNo=0)}},i.CheckLeadNpc=function(t,e,i,n,s,a){void 0===n&&(n=1),void 0===a&&(a=0);var r,h,o=0,l=0,u=[],c=0;if(t&&(c=t.length),Log1.debug(10,"[CheckLeadNpc]",t,e,i,n,s,a),e.indexOf("田地里的麦子")>=0){var _={};_.ext={},_.ext.dec="弹出收麦的引导",_.ext.act=2.8,StatManager.getInstance().send(_)}for(o=0;c>o;o++){if(r=null,u.push([t[o][0],t[o][1]]),l=ArrOp.SzSearchArr(u,this.m_szLeadNpc),l>=0&&(r=this.m_szLeadNpc[l][2],r||(this.m_szLeadNpc=ArrOp.DelSz(l,this.m_szLeadNpc))),r)r.OnInited(this.m_nSelf,t[o][0],t[o][1],e,i,n);else{if(!s)return null;200==t[o][0]?(r=new GScarecrow,a&&r.SetBtnName("试用三天")):r=new GMC_LeadNpc,r.OnInited(this,this.m_nSelf,t[o][0],t[o][1],e,i,n),this.m_szLeadNpc.push([t[o][0],t[o][1],r])}o||(h=r)}return r?(2==i&&r.WaitPopTalk(),6!=i&&r.ShowTalk(),h):null},i.ClearLeadNpc=function(t,e,i){if(void 0===e&&(e=""),void 0===i&&(i=0),Log1.debug(10,"[GMSB_NPC]ClearLeadNpc ",this.m_szLeadNpc.length),this.m_szLeadNpc&&!(this.m_szLeadNpc.length<1))for(var n=0;n<this.m_szLeadNpc.length;n++){var s=[];s.push(this.m_szLeadNpc[n][0],this.m_szLeadNpc[n][1]),ArrOp.SzSearchArr(s,t)<0||(this.m_szLeadNpc[n][2].OnLeave(),this.m_szLeadNpc=ArrOp.DelSz(n,this.m_szLeadNpc),n--)}},i.AddNpcData=function(t){if(this.m_nSelf&&this.m_szSysData&&2==this.m_szSysData.length&&t){var e=this.m_szSysData;e[1]||(e[1]=[]),e[1].push(t);var i;i=0==t[1]?new GMC_ActivNpc:new GMC_Customer,i.OnInitedMe(this,this.m_nSelf,t[1],this.m_szNpcObj.length,t),this.m_szNpcObj.push(i),this.m_szSysData=e}},i.HandInOrder=function(t,e,i){if(this.m_nSelf&&this.m_szSysData&&2==this.m_szSysData.length){var n=this.m_szSysData,s=ArrOp.SzSearch(t,n[1]);0>s||DataTable.m_iSelfUser.OnHandinNpcOrder(t,e,i,Handler.create(this,this.HandInOrderRe,[s,e]))}},i.HandInOrderRe=function(t,e,i){if(i){var n;e&&e.length>0&&(n="高兴"),this.m_szNpcObj[t]&&this.m_szNpcObj[t].OnLeave(n),this.m_szNpcObj=ArrOp.DelSz(t,this.m_szNpcObj)}},i.HandInActOrder=function(t,e,i){var n=this;if(void 0===i&&(i=0),this.m_nSelf&&this.m_szSysData&&2==this.m_szSysData.length){var s=this.m_szSysData,a=ArrOp.SzSearch(t,s[1]);0>a||DataTable.m_iSelfUser.HandInActOrder(t,e,i,Handler.create(this,function(t){if(t){var e;i&&(e="高兴"),n.m_szNpcObj[a].OnLeave(e),n.m_szNpcObj=ArrOp.DelSz(a,n.m_szNpcObj),s[1]=ArrOp.DelSz(a,s[1]),n.m_szSysData=s}}))}},e.AddHelper=function(t,i){void 0===i&&(i="地图_家"),e.s_pHelper||(e.s_pHelper=new GMC_Helper,e.s_pHelper.Init(t,i,GMapView.m_nSelf))},e.RemoveHelper=function(){e.s_pHelper&&(e.s_pHelper.m_pTalkBubble.SafeDelObj(),DisplayItem.SafeDelObj(e.s_pHelper),e.s_pHelper=null)},e.pid=null,e.s_pHelper=null,e}(GMapSysBuildBase),GMSB_Order=function(t){function e(){this.m_nCoolCD=-1,this.m_nLastSelect=0,this._m_szCanDo=null,this._m_szOrder=null,this.m_szNote=[],this.m_nLastLevel=-1,this.m_szWantList=null,e.__super.call(this),this.m_notes=new Sprite}__class(e,"game.build.GMSB_Order",t);var i=e.prototype;return i.OnInited=function(){t.prototype.OnInited.call(this),this.m_notes=new Sprite,this.m_notes.x=0,this.m_notes.y=0,GMapView.m_nSelf&&(this.m_disObj.addChild(this.m_notes),this.m_disObj.complete?this.initOrder():this.m_disObj.SetOkHandler(Handler.create(this,this.initOrder)))},i.initOrder=function(){if(this.m_nCanMouse)this.WaitTaskDataChg(),this.WaitBagChg(),Laya.timer.loop(1e3,this,this.CheckOrderDelT),this.OrderDlgCheck();else{var t,e=DataTable.m_iSelfUser.GetLevel(),i=DataTable.m_iUserLevelTab.Get(e);t=ArrOp.InitSz(i[4],null),this.SetNoteData(t)}},i.OrderDlgCheck=function(){GOrderDlg.hadInit&&GOrderDlg.Me().ReaddparamchgNoti()},i.OnLBUp=function(){if(this.OnMouseOut(),this.m_nSelf&&!GMapBuildBase.s_pDisMouseObj){if(DataTable.m_iSelfUser.GetLevel()<this.m_szData[10])return void gSys.GameAdNoti({title:"订单板",content:"4级开放，可以完成订单",img:"_img_订单板插图"});var t=this.GetDef()[16];t&&t.length>0&&SoundManager.playSound(DataTable.getSkin(t)),this.OnClick()}},i.OnClick=function(){var t=GMSB_Balloon.Me().m_pTruck;return t?void(t.GetReward()||DlgManager.Me().showOrderDlg()):void gSys.Err("热气球丢失")},i.SetLastSelect=function(t){this.m_nLastSelect=t},i.GetLastSelect=function(){return this.m_nLastSelect},i.SetNoteByPos=function(t,e){if(!(t>=this.m_szNote.length)){var i=this.m_szOrder;if(i[t]=e,this.m_szOrder=i,3!=e.length)return void this.OnClear(t);this.m_szNote[t].SetData(e);this.CheckOrderCanDo()}},i.SetNoteData=function(t){if(this.m_szOrder=t,!t||t.length<1)return void this.OnClear();for(var e,i=NaN,n=NaN,s=0;s<t.length&&!(s>=9);s++){if(s>=this.m_szNote.length){e=new GTaskNote,i=s%4*20,n=10*-(s%4)+20*Math.floor(s/4);this.GetNamedPt(s.toString(),gSys.t1,gSys.t2);e.pos(gSys.t1.uid,gSys.t2.uid),this.m_szNote.push(e),this.m_notes.addChild(e)}this.m_szNote[s].SetData(t[s])}this.CheckOrderCanDo()},i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),this.m_notes.destroy(),this.m_szNote.length=0,Laya.timer.clearAll(this)},i.OnUserLvCheck=function(t){if(this.m_nLastLevel!=t){this.m_nCoolCD>=0&&DataTable.m_iSelfUser.OnOrderMaxChg();var e=DataTable.m_iUserLevelTab.Get(t);this.m_nCoolCD=60*e[3],this.m_nLastLevel=t}},i.CheckOrderDelT=function(){this.OnUserLvCheck(DataTable.m_iSelfUser.GetLevel());for(var t=0,e=gSys.GetCurSecAdj(),i=0;i<this.m_szNote.length;i++)t=this.m_szNote[i].GetDelTime(),t&&(e-t<this.m_nCoolCD||DataTable.m_iSelfUser.OnDelCdOver(i,0))},i.WaitTaskDataChg=function(t){void 0===t&&(t=-1);var e;0>t?(e=DataTable.m_iSelfUser.GetOrderData(),this.SetNoteData(e)):(e=DataTable.m_iSelfUser.GetOrderDataByPos(t),this.SetNoteByPos(t,e)),gSys.WaitSignal(new Handler(this,this.orderdatarefWait),"orderdataref")},i.orderdatarefWait=function(t){this.WaitTaskDataChg(t)},i.WaitBagChg=function(){gSys.WaitSignal(new Handler(this,this.bagdatarefWait),"bagdataref")},i.bagdatarefWait=function(t){return Log1.debug(10,"[WaitBagChg: bagdatarefWait]  n=",t),"number"!=typeof t||Math.floor(t)!=t?void this.WaitBagChg():2==t?void this.WaitBagChg():(Laya.timer.once(1e3,this,this.CheckOrderCanDo),void this.WaitBagChg())},i.CheckOrderCanDo=function(){Log1.debug(10,"[CheckOrderCanDo]"),this.m_szWantList=[];var t=NaN,e=0,i=0,n=0,s=[],a=[],r=0,h=0;for(r=0;r<this.m_szNote.length;r++){if(e=0,i=0,s=this.m_szNote[r].GetMats(),s&&2==s.length)for(h=0;h<s[0].length;h++)n=DataTable.m_iSelfUser.GetBagItemNum(DataTable.m_iSelfUser.FindItemBagKind(s[0][h]),s[0][h]),e+=Math.min(n,s[1][h]),i+=s[1][h],ArrOp.SzAddRef(s[0][h],s[1][h],this.m_szWantList);1>i?(t=0,this.m_szNote[r].SetCanDo(0),a.push(t)):(t=i>0?1*(i-e)/i:-1,t=e>=i?1:0,this.m_szNote[r].SetCanDo(e>=i),a.push(t))}for(this.m_szCanDo=a,r=0;r<this.m_szWantList.length;r++)n=DataTable.m_iSelfUser.GetBagItemNum(DataTable.m_iSelfUser.FindItemBagKind(this.m_szWantList[r][0]),this.m_szWantList[r][0]),n>=this.m_szWantList[r][1]?(this.m_szWantList=ArrOp.DelSz(r,this.m_szWantList,1),r--):this.m_szWantList[r]=this.m_szWantList[r][0]},i.OnClear=function(t){void 0===t&&(t=-1),0>t||t>=this.m_szNote.length||this.m_szNote[t].Clear()},i.DoYouWant=function(t){return ArrOp.SzSearch(t,this.m_szWantList)>-1},__getset(0,i,"m_szCanDo",function(){return this._m_szCanDo},function(t){this._m_szCanDo=t,GOrderDlg.hadInit&&GOrderDlg.Me().OnCanDoChg(this._m_szCanDo)}),__getset(0,i,"m_szOrder",function(){return this._m_szOrder},function(t){this._m_szOrder=t,GOrderDlg.hadInit&&GOrderDlg.Me().OnChg(this._m_szOrder)}),e.Me=function(){return null==e._me&&(e._me=new e),e._me},e._me=null,e}(GMapSysBuildBase),GMSB_Tv=function(t){function e(){e.__super.call(this)}__class(e,"game.build.GMSB_Tv",t);var i=e.prototype;return i.OnInited=function(){this.m_nCanMouse=1,DataTable.m_iSelfUser.GetLevel()<this.m_szData[10]||this.SetAniKind("work")},i.OnLBUp=function(){if(!GMapBuildBase.s_pDisMouseObj){if(this.OnMouseOut(),DataTable.m_iSelfUser.GetLevel()<this.m_szData[10])return void gSys.GameAdNoti({title:"报纸",content:"7级开放，可以选购物品",img:"tex_插图_报纸开放"});var t=this.GetDef()[16];t&&t.length>0&&SoundManager.playSound(DataTable.getSkin(t)),this.OnClick()}},i.OnClick=function(){this.m_nSelf&&gSys.SetSignal("opentv:self"),GameMain._ins.addLoading(),Laya.loader.load("assets/tv.json",Handler.create(this,this.onComplete),null,"atlas")},i.onComplete=function(){Assets.checkRes("assets/tv.json")&&DataTable.m_iSelfUser.GetTvData(Handler.create(this,function(t){PaperView.getInstance().myPopupMax(!1,!1,!1,"报纸tv"),PaperView.getInstance().onInit(t),GameMain._ins.removeLoading()}))},e}(GMapSysBuildBase),GMSB_wharf=function(t){function e(){this.m_pBoat=null,this.m_nLeftSec=0,this.m_pHelp=null,this.m_iOtherView=null,this.pid=null,this.m_pBoatDlg=null,this.m_pSysHelpTask=null,this.m_nStatus=0,e.__super.call(this),this.OnInit()}__class(e,"game.build.GMSB_wharf",t);var i=e.prototype;return i.OnInit=function(){},i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),this.m_pBoat&&(this.m_pBoat.dispose(),this.m_pBoat=null),this.m_pHelp&&(this.m_pHelp.dispose(),this.m_pHelp=null),Laya.timer.clearAll(this)},i.SpawnBoat=function(){this.m_pBoat||(this.m_pBoat=new GBoat,this.m_pBoat.SetObjFather(this.pid),this.m_pBoat.SetPos(this.m_nXpos-210-25,this.m_nYpos-130-35),this.m_pBoat.AddNoti("click",this,this.OnClick),this.m_pHelp=new MPHelp(this),this.m_pHelp.SetMapPos(this.m_nXpos-210+80,this.m_nYpos-130-50),this.m_pHelp.SetLayer(1e3))},i.SetBuildAni=function(t){var e,i=this,n=0;if(this.m_nSelf||(e=GameMain._ins.GmView),!e)return void DataTable.m_iSelfUser.GetWharfLv(Handler.create(this,function(t){i.SetBuildAniStepNext(t)}));var s=e.GetWharfLvSz();s&&2==s.length||(s=[0,0]),n=s[0],this.SetBuildAniStepNext(n)},i.LoadFromName=function(t,e,i){void 0===i&&(i=!0),game.build.DisplayItem.prototype.LoadFromName.call(this,t,e,i)},i.SetBuildAniStepNext=function(t){var e=DataTable.m_iWharfVisuTab.Get(t);this.LoadFromName(e[4],this),this.SetAniKind("l1"),this.PlayAni(1,20*Math.random())},i.OnWharfChgVisu=function(){this.SetBuildAni("")},i.OnInitedMe=function(){this.OnInited()},i.destory=function(){DataTable.m_i_Wharf=null,DataTable.m_i_WharfMT=null},i.OnInited=function(){if(this.m_pHelp&&this.m_pHelp.SetShow(0),DataTable.m_i_WharfMT=this,DataTable.m_i_Wharf=null,this.m_nSelf&&(DataTable.m_i_Wharf=this),this.SetAniKind("l0"),this.m_nStatus=0,1==DataTable.m_iSelfUser.GetUID())return DisplayItem.delObjModel(this.m_pBoat),this.SpawnBoat(),this.m_pBoat.m_nCanMouse=0,this.m_nCanMouse=0,this.SetAniKind("l1"),void this.PlayAni(1);if(Laya.timer.clear(this,this.Check),Laya.timer.loop(1e3,this,this.Check),"number"==typeof this.m_szSysData&&Math.floor(this.m_szSysData)==this.m_szSysData)return this.SetAniKind("building"),this.PlayAni(1),this.m_nStatus=1,void DataTable.m_iSelfUser.Emit("wharfisfix",null);if(!this.m_szSysData)return this.SetAniKind("l0"),void(this.m_nStatus=0);DataTable.m_iSelfUser.Emit("wharfisfix",null),this.SetAniKind("l1"),this.PlayAni(1),this.m_nCanMouse=1;var t=0;if(1==this.m_szSysData[1])if(t=gSys.GetCurSecAdj()-this.m_szSysData[4],52200>t)this.m_nStatus=4,this.m_pBoat||(this.SpawnBoat(),12>t&&(this.m_nStatus=3,this.m_pBoat.AddNoti("in",this,this.OnBoatIn,1),this.m_pBoat.m_nCanMouse=0,this.m_pBoat.In()));else{if(this.m_nStatus=5,this.m_nSelf){this.m_nStatus=4,t-=52200,15e3>t?(this.m_nStatus=2,DisplayItem.SafeDelObj(this.m_pBoat)):this.m_nStatus=4;for(var e=0,i=0;i<this.m_szSysData[10].length;i++)this.m_szSysData[10][i]&&0==(1&this.m_szSysData[10][i][0])&&(e=-2e3);return this.m_pBoatDlg&&this.m_pBoatDlg.OnClose(),void this.NextBoat(e,!0)}this.m_nStatus=5,DisplayItem.SafeDelObj(this.m_pBoat),this.m_nCanMouse=0,this.CheckOtherHelp()}else this.m_nStatus=2,this.m_pBoat&&(this.m_pBoat.Out(),this.m_pBoat.m_nCanMouse=0,this.m_pBoat.DelNoti("click",this,this.OnClick),this.m_pBoat.DelNoti("in",this,this.OnBoatIn),this.m_pBoat=null);this.RefHelpStatus()},i.CheckOtherHelp=function(){var t},i.OnBoatIn=function(){this.m_nStatus=4,this.m_pBoat&&(this.m_pBoat.m_nCanMouse=1)},i.OnSysBuildData=function(t,e){t==this.m_nSysBuildID&&(this.m_szSysData=e,this.OnInited(),this.m_pBoatDlg&&(4!=this.m_nStatus?this.m_pBoatDlg.OnClose():this.m_pBoatDlg.RefData()))},i.ShowFinishEff=function(){var t=new DisplayItem;t.SetPos(this.m_nXpos,this.m_nYpos),t.LoadFromName("tex_building_2_2_ani",this),t.SetAniKind("l2"),t.PlayAni(),Laya.timer.once(2e3,this,this.EffDelThis,[t])},i.EffDelThis=function(t){DisplayItem.delObjModel(t),this.StopAni(),this.OnInited()},i.OnQuickFix=function(t){var e=this;if("number"==typeof this.m_szSysData&&Math.floor(this.m_szSysData)==this.m_szSysData){var i=86400-(gSys.GetCurSecAdj()-this.m_szSysData),n=Math.floor(i/600+1),s=[];t?s.push([25,-n]):s.push([2,-n]),DataTable.m_iSelfUser.CheckMakeItemSz(s,0,0,Handler.create(this,function(){var n=new StringRef;if(!DataTable.m_iSelfUser.ChgItemSz(s,n,OPEnum.OP_JZ_JS,null,0))return void gSys.GameMsg(n.ustr,!1,"无法操作");var a=WharfData.Create();if(a[0]=1,e.SetSysBuildData(a.concat(),1)){for(var r=0;r<a.length;r++)null==a[r]&&(a[r]="NIL");DataTable.m_iSelfUser.CallSvrRet("OnQuickFix",[e.m_nSysBuildID,a,i,s,t]),e.ShowFinishEff()}}))}},i.Check=function(){var t=0;if(this.m_nSelf)switch(this.m_nStatus){case 1:if(t=gSys.GetCurSecAdj()-Laya.__parseInt(this.m_szSysData),t>86400){var e=WharfData.Create();e[0]=1,this.SetSysBuildData(e,1)&&(this.StopAni(),this.OnInited())}else this.m_nLeftSec=86400-t;break;case 2:if(t=gSys.GetCurSecAdj()-this.m_szSysData[4],t>15e3)return Laya.timer.clear(this,this.Check),void DataTable.m_iSelfUser.CallSvrRet("OnBoatIn",Math.max(15e3-t,0),Handler.create(this,this.OnBoatInBack));break;case 4:t=gSys.GetCurSecAdj()-this.m_szSysData[4],t>52200&&(this.m_nStatus=5,this.m_pBoatDlg&&this.m_pBoatDlg.OnClose(),this.NextBoat(-2e3));break;case 3:}else 4==this.m_nStatus&&(t=gSys.GetCurSecAdj()-this.m_szSysData[4],t>52200&&(this.m_nStatus=5,this.m_pBoatDlg&&this.m_pBoatDlg.OnClose(),this.m_pBoat&&(this.m_pBoat.Out(),this.m_pBoat.m_nCanMouse=0,this.m_pBoat.DelNoti("click",this,this.OnClick),this.m_pBoat.DelNoti("in",this,this.OnBoatIn))));this.CheckSysHelpTime()},i.OnBoatInBack=function(t){null==t?gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"):"number"==typeof t&&Math.floor(t)==t?gSys.GameMsg("data err:"+t,!1,"船无法操作"):(this.SetSysBuildData(t,0),this.OnInited()),this.CheckSysHelpTime()},i.OnPerSysNoti=function(){var t,e=0;switch(this.m_nStatus){case 0:return;case 1:e=gSys.GetCurSecAdj()-this.m_szSysData,e=86400-e,t="空港建筑好了,可以开始货运了!";break;case 2:e=gSys.GetCurSecAdj()-this.m_szSysData[4],e=15e3-e,t="飞艇已经到港,可以开始货运了!";break;case 4:e=gSys.GetCurSecAdj()-this.m_szSysData[4],e=52200-e-3600,e>0&&(t="飞艇快要离港了,抓紧时间啊!");break;case 3:e=48600,t="飞艇快要离港了,抓紧时间啊!"}DataTable.m_iSelfUser.CheckSysNotiTime(e)},i.GetBoatInLeft=function(){if(2!=this.m_nStatus)return 0;var t=gSys.GetCurSecAdj()-this.m_szSysData[4];return 15e3-t},i.GetBoatOutLeft=function(){if(4!=this.m_nStatus)return 0;var t=gSys.GetCurSecAdj()-this.m_szSysData[4];return 52200-t},i.GetBoatData=function(){return this.m_szSysData},i.OnLBUp=function(){if(!GMapBuildBase.s_pDisMouseObj){this.OnMouseOut();var t=this.GetDef()[16];t.length>0&&SoundManager.playSound(DataTable.getSkin(t)),this.OnClick()}},i.OnClick=function(){if(this.m_nSelf){var t;if(DataTable.m_iSelfUser.GetLevel()<this.m_szData[10])return t="16级可修建码头，预计修理费用%d金币",t=t.replace("%d",""+this.m_szData[11]),void gSys.GameAdNoti({title:"航运码头",content:t,img:"tex_插图_航运开放"});switch(this.m_nStatus){case 0:this.FixSysBuild();break;case 1:var e=new FastBuildPop;e.SetLinkObj(this),e.Init(this.m_nLeftSec),e.show();break;case 2:case 3:DlgManager.Me().showWharfDlg(1);break;case 4:DataTable.m_iSelfUser.m_nNetLinkOk?DlgManager.Me().showWharfDlg():gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能");break;case 5:}}else 4==this.m_nStatus&&DlgManager.Me().showWharfDlg()},i.NextBoat=function(t,e,i,n){var s=this;void 0===e&&(e=!1),void 0===i&&(i=0),t=Math.floor(t);var a=this.m_nStatus;if(this.m_nStatus=5,t>=0){var r=1;switch(i){case 1:case 3:r=2}var h=[];return DataTable.m_iSoundTab.OnPlay("等级提升"),h=[[5,this.m_szSysData[5]+t],[4,this.m_szSysData[6]],[3,Math.floor(this.m_szSysData[7]*r)]],void DataTable.m_iSelfUser.CheckMakeItemSz(h,0,0,Handler.create(this,function(){var r=new StringRef;DataTable.m_iSelfUser.ChgItemSz(h,r,OPEnum.OP_HY_KC,null,0),DataTable.m_iSelfUser.CallSvrRet("NextBoat",[t,i],Handler.create(this,s.onNextBoatBack,[t,i,a,e,n]))}),Handler.create(this,function(){s.m_nStatus=a,n&&n.runWith(0)}))}DataTable.m_iSelfUser.CallSvrRet("NextBoat",[t,i],Handler.create(this,this.onNextBoatBack,[t,i,a,e,n]))},i.onNextBoatBack=function(t,e,i,n,s,a){var r=this;if(!a)return this.m_nStatus=i,void(s&&s.runWith(0));var h=0;if(t>0){var o=gSys.GetCurSecAdj()-this.m_szSysData[4],l=1*o/3600;h=2>l?3:4>l?2:1,DataTable.m_iSelfUser.LogGameTag("连续航运",1)}else{DataTable.m_iSelfUser.CheckQuestWharfData();var u=DataTable.m_iSelfUser.GetSysBuildData(6);u&&u.continuation<10?DataTable.m_iSelfUser.LogGameTag("连续航运",-u.continuation):DataTable.m_iSelfUser.LogGameTag("连续航运",-10),DataTable.m_iSelfUser.CheckQuestWharfData()}DataTable.m_iSelfUser.FinishCurTermini(h,0>t?1:0,Handler.create(this,function(t){t>0&&(GBoatBoxDlg.Me().Init(t,o,h),GBoatBoxDlg.Me().myPopup()),r.SetSysBuildData(a,0),r.m_nStatus=5,n||(r.m_pBoat&&r.m_pBoat.Out(),r.m_pBoat=null),r.OnInited(),s&&s.runWith(1)}))},i.CalHelpStatus=function(){if(4!=this.m_nStatus)return 0;for(var t=this.m_szSysData[10],e=0;e<t.length;e++)if(t[e]&&0!=(2&t[e][0])&&0==(1&t[e][0]))return this.StartSysHelp(),1;return 0},i.RefHelpStatus=function(){this.m_pHelp&&this.m_pHelp.SetShow(this.CalHelpStatus())},i.DoYouWant=function(t){if(!this.m_szSysData)return!1;if(ArrOp.SzSearch(t,this.m_szSysData[9])<0)return!1;for(var e=0;e<this.m_szSysData[10].length;e++)if(this.m_szSysData.ordersz[e][2]==t&&0==(1&this.m_szSysData[10][e][0]))return!0;return!1},i.StartSysHelp=function(){this.CheckSysHelpTime()&&(2&this.m_szSysData[8]||this.OnSysFinishBox())},i.OnSysFinishBox=function(){for(var t=this.m_szSysData[10],e=[],i=0;i<t.length;i++)t[i]&&0!=(2&t[i][0])&&0==(1&t[i][0])&&e.push(i);e.length&&DataTable.m_iSelfUser.OnSysFinishBox(e[Math.random()*e.length])&&DataTable.m_iSelfUser.CompleteSysHelp()},i.CheckSysHelpTime=function(){for(var t=SysID.getBZCHDSJ(),e=0;e<t.length;e++)if(DataTable.m_iSelfUser.IsActivDay(t[e][0],t[e][1],1))return DataTable.m_iSelfUser.m_nLevel>16&&GMSB_NPC.AddHelper(200,"地图_码头"),1;return GMSB_NPC.RemoveHelper(),0},e}(GMapSysBuildBase),GTomPlayer=function(t){function e(){this.m_pLink=null,e.__super.call(this),this.SetRes("飞行员_001",this)}__class(e,"game.ui.buyback.GTomPlayer",t);var i=e.prototype;return i.SetInit=function(t){this.m_pLink=t},i.PlayAction=function(){return this.m_pLink.m_nShow?(Laya.timer.clear(this,this.ShowSleepTxt),this.SetAniKind("zhanli"),this.PlayKindEndRetrun("gaoxing"),void Laya.timer.loop(5e3,this,this.RndAction)):void this.OnSleepAction()},i.OnSleepAction=function(){this.SetAniKind("shuijiao"),Laya.timer.loop(6e3,this,this.ShowSleepTxt,null,!0)},i.ShowSleepTxt=function(){this.m_pLink.m_nShow&&Laya.timer.clear(this,this.ShowSleepTxt);var t=new Muti2DAniIns;t.createInsFromName("z_ani"),t.PlaySpeed(1,0),Laya.timer.once(5e3,t,t.removeSelf)},i.StopAction=function(){Laya.timer.clear(this,this.RndAction)},i.RndAction=function(){if(this.IsAniKind("zhanli")){var t=(this.m_pLink.GetBuyItem(),Math.floor(3*Math.random()));switch(t){case 1:this.PlayKindEndRetrun("xiuxi1");break;case 2:this.PlayKindEndRetrun("xiuxi2")}}},e}(GBasePlayerModel),CMC_NpcBase=function(t){function e(){this._m_nState=0,this.m_nNpcID=0,this.m_nNpcNo=0,this.m_pBubble=null,this.m_szNpcData=null,this.m_nDlgMode=0,this.m_szPath=[],this.m_szRelax=[],this.m_nStateEx=0,this.m_nSelf=0,this.m_pLink=null,this.m_pTalkBubble=null,this.m_nNeedFindPath=0,this.m_sDlgBtnName=null,this.m_fSpeed=70,this.m_pFlyBall=null,this.pid=null,this.f_moveEnd=null,this.m_bOutState=!1,this.regName="",e.__super.call(this),this.f_moveEnd=Handler.create(this,this.OnMoveEnd,null,!1)}__class(e,"game.ui.lead.npc.CMC_NpcBase",t);var i=e.prototype;return i.dispose=function(){this.m_pFlyBall&&(this.m_pFlyBall.dispose(),this.m_pFlyBall=null),this.m_pBubble&&(this.m_pBubble=null),this.m_pTalkBubble&&(this.m_pTalkBubble.SafeDelObj(),this.m_pTalkBubble=null),Tween.clearTween(this.m_disObj),t.prototype.dispose.call(this)},i.childvis=function(t){this.m_pBubble&&(this.m_pBubble.visible=t),this.m_pTalkBubble&&(this.m_pTalkBubble.visible=t),this.m_pFlyBall&&(this.m_pFlyBall.m_disObj.visible=t)},i.DelThis=function(){game.build.DisplayItem.prototype.DelThis.call(this),this.regName&&this.regName.length>0&&GLeadManager.UnRegArrowInterface(this.regName)},i.OnInitedMe=function(t,e,i,n,s){this.m_pLink=t,this.m_nNpcID=i,this.m_nNpcNo=n,this.m_szNpcData=s,this.m_nCanMouse=e?1:0,this.m_nSelf=e;var a;if(a=DataTable.m_iNpcTab.Get(i),0!=this.m_nNpcID&&(this.regName="地图_"+a[1],GLeadManager.RegArrowInterface(this,"地图_"+a[1])),!a||a.length<1)return gSys.Err("缺少NPC数据：npcid="+i),void this.DelThis();var r=new UintRef,h=new UintRef;if(this.SetRes(a[4],this),this.m_disObj.SetOkHandler(Handler.create(this,this.OnMeshReady)),this.GetStayPos(r,h),this.SetPos(r.uid,h.uid),s){var o=gSys.GetCurSecAdj();if(o-s[0]>20)return void this.MoveAround()}this.OnMove(0)},i.OnMeshReady=function(){t.prototype.OnMeshReady.call(this),this.GetAniRelax()},i.GetAniRelax=function(){var t,e=this.m_disObj.GetAniKindSz(),i=0;for(this.m_szRelax=[],i=0;i<e.length;i++)t=e[i],t.indexOf(this.xiuxi)<0&&t.indexOf(this.gaoxing)<0||(this.m_szRelax||(this.m_szRelax=[]),this.m_szRelax.push(e[i]))},i.OnRBDown=function(t,e){},i.GetNamedPt=function(t,e,i){return"leadarrow"==t&&(i.uid=-100,e.uid=0),!0},i.IsMapItem=function(){return 1},i.GetBtnName=function(){return this.m_sDlgBtnName},i.GetState=function(){return this.m_nState},i.GetNpcNo=function(){return this.m_nNpcNo},i.MoveAround=function(){this.SetState(2),this.OnMoveEnd()},i.WalkTo=function(t,e,i){return this.MoveTo(t,e,i,!0,this.f_moveEnd)?(.9!=this.m_fPlaySpeed&&(this.m_fPlaySpeed=.9),this.SetAniKind(this.walk)&&this.PlayAni(this.m_fPlaySpeed),1):0},i.SetState=function(t){if(!this.m_bOutState){if(1==this.m_nState&&1!=t)throw new Error("Error state...");switch(this.m_nState=t,this.m_nNeedFindPath=0,DisplayItem.SafeDelObj(this.m_pBubble),Laya.timer.clear(this,this.OnMoveEnd),t){case 0:this.SetAniKind(this.feixing),this.PlayAni(this.m_fPlaySpeed);break;case 1:this.SetAniKind(this.feixing),this.PlayAni(this.m_fPlaySpeed);break;case 2:this.OnMoveEnd()}}},i.OnMoveEnd=function(){var t=this;if(this.m_nNeedFindPath=0,DisplayItem.SafeDelObj(this.m_pBubble),!this.m_bOutState){switch(this.m_nState){case 0:return void(1==this.m_nStateEx?(this.SetAniKind(this.zhanli),this.PlayKindEndRetrun(this.jiangluo),this.SetAniKind(this.walk),this.PlayAni(this.m_fPlaySpeed),this.GetStayPos(UintRef.t1,UintRef.t2),this.WalkTo(UintRef.t1.uid,UintRef.t2.uid,100),this.m_nStateEx=2):2==this.m_nStateEx&&(this.SetState(2),this.m_nCanMouse=this.m_nSelf?1:0));case 1:return DisplayItem.SafeDelObj(this.m_pShadow),this.m_fForward=-15,this.m_bOutState=!0,this.SetAniKind(this.feixing),this.PlayAni(this.m_fPlaySpeed),this.SetLayer(1e5),this.MoveTo(this.m_disObj.x,this.m_nYpos-2e3,500),void Laya.timer.once(3e3,this,this.DelThis)}this.m_szPath=[],this.StopMove(),this.m_fForward=-15;var e=this.GetAniKind();if(e.indexOf(this.xiuxi)<0&&this.m_szRelax.length>0&&(this.SetAniKind("std"),this.PlayKindEndRetrun(this.m_szRelax[Math.floor(Math.random()*this.m_szRelax.length)])),this.SetAniKind("std")&&this.PlayAni(this.m_fPlaySpeed),!(2*Math.random()>1)&&this.m_szNpcData){this.m_pBubble?this.m_pBubble.init(this.m_szNpcData[2]):this.m_pBubble=new GItemBubble(this.m_szNpcData[2]);var i=this.m_disObj.GetRect();i?this.m_pBubble.SetY(-(i.bottom-i.top)):this.m_disObj.SetOkHandler(Handler.create(this,function(){var e=this.m_disObj.GetRect();t.m_pBubble&&t.m_pBubble.SetY(-(e.bottom-e.top))})),this.m_disObj.addChild(this.m_pBubble)}}},i.GetStayPos=function(t,e){this.m_iSelfBk.GetNamedPos("npc_04",t,e)||(t.uid=2631,e.uid=1217)},i.FindNewWay=function(){return},i.OnLeave=function(t){var e=this;return void 0===t&&(t=""),this.SetState(1),this.m_pTalkBubble&&this.m_pTalkBubble.SafeDelObj(),DisplayItem.SafeDelObj(this.m_pTalkBubble),t.length>0?(this.StopMove(),this.SetAniKind(this.zhanli),this.PlayKindEndRetrun(t),Log1.info(10,"OnLeave called..."),void Laya.timer.once(2e3,this,function(){e.OnMove(1)})):void this.OnMove(1)},i.NpcIn=function(){this.m_pFlyBall||(this.m_pFlyBall=new DisplayItem,this.m_pFlyBall.LoadFromName("tex_NPC气球_ani",this)),this.m_pFlyBall.m_disObj.visible=!0,this.m_pFlyBall.SetAniKind("std"),this.m_pFlyBall.SetPos(-20,-120),this.m_nStateEx=1,this.m_nCanMouse=0;var t=new UintRef,e=new UintRef;this.m_iSelfBk.GetNamedPos("npc_01",t,e)||(t.uid=1070,e.uid=1538),this.SetPos(t.uid,e.uid),this.m_iSelfBk.GetNamedPos("npc_02",t,e)||(t.uid=1840,e.uid=1036),t.uid+=100*Math.random(),e.uid+=100*Math.random(),this.m_fForward=-15,this.SetAniKind(this.feixing),this.PlayAni(this.m_fPlaySpeed),this.SetLayer(1e5),this.MoveTo(t.uid,e.uid,100,!1,this.f_moveEnd),this.m_bOutState=!1},i.NpcOut=function(){},i.OnMove=function(t){if(Log1.debug(10,"CMC_NpcBase [OnMove]  mode=",t),this.SetState(t),t){var e=new UintRef,i=new UintRef;this.m_iSelfBk.GetNamedPos("npc_02",e,i)||(e.uid=1840,i.uid=1036),this.SetAniKind(this.walk),this.PlayAni(2.5*this.m_fPlaySpeed),this.m_nXpos==e.uid&&this.m_nYpos==i.uid?this.OnMoveEnd():this.WalkTo(e.uid,i.uid,60)}else this.NpcIn()},i.GetDef=function(){return DataTable.m_iNpcTab.Get(this.GetNpcID())},i.GetNpcID=function(){return this.m_nNpcID},i.GetNpcData=function(){return this.m_szNpcData},i.GetDlgData=function(){return[this.m_nNpcID,this.m_nDlgMode,this.m_szNpcData]},i.OnLBDown=function(t,e){2!=this.m_nState},i.OnMouseOut=function(){2!=this.m_nState},i.OnLBUp=function(t,e){if(2==this.m_nState){this.OnMouseOut();var i=this.GetDef()[5];i&&i.length>0&&SoundManager.playSound(DataTable.getSkin(i)),this.OnClick()}},i.WaitPopTalk=function(){},i.OnHarvest=function(){},i.OnClick=function(){},__getset(0,i,"m_nState",function(){return this._m_nState},function(t){this instanceof game.ui.lead.npc.GMC_Customer&&Log1.debug(10,"set[m_nState]",t),this._m_nState=t}),e.NPCSTATE_COME=0,e.NPCSTATE_GO=1,e.NPCSTATE_STAY=2,e.NPCSTATE_END=3,e}(GBasePlayerModel),GMC_Helper=function(t){function e(){this.m_nNpcID=0,this.m_sTalkMem=null,this.m_pTalkBubble=null,this.m_nEnable=1,e.__super.call(this)}__class(e,"game.ui.lead.npc.GMC_Helper",t);var i=e.prototype;return i.Init=function(t,e,i){this.m_nNpcID=t,this.m_nCanMouse=i?1:0;var n;if(n=DataTable.m_iNpcTab.Get(t),n.length<1)return gSys.Err("缺少NPC数据：npcid="+t),void this.DelThis();this.SetRes(n[4],this);var s=GLeadManager.GetMapBuildObj(e),a=0,r=0;if(s){var h=s.GetDef();switch(h.putx){case 1:case 2:a=s.m_nXpos+200;break;case 3:a=s.m_nXpos+210;break;default:a=s.m_nXpos+380}r=s.m_nYpos}else a=1672,r=1184;this.SetPos(a,r),this.m_sTalkMem="小伙伴们只要在每天的12:30和21:00请求普通航运帮助，我就会帮助小伙伴们，持续30分钟。",this.m_pTalkBubble?this.m_pTalkBubble.SetData(this.m_sTalkMem,this):this.m_pTalkBubble=new GTalkBubble(this.m_sTalkMem,this)},i.GetDef=function(){return DataTable.m_iNpcTab.Get(this.m_nNpcID)},i.OnLBDown=function(t,e){this.m_nEnable&&Tween.to(this,{scaleX:1.02,scaleY:1.02},150,Ease.sineIn)},i.childvis=function(t){this.m_pTalkBubble&&(this.m_pTalkBubble.visible=t)},i.OnMouseOut=function(){Tween.to(this,{scaleX:1,scaleY:1},150,Ease.sineOut)},i.OnLBUp=function(t,e){if(this.m_nEnable&&!DataTable.m_iWholeEditMovePop){this.OnMouseOut();var i=this.GetDef()[5];i.length>0&&SoundManager.playSound(DataTable.getSkin(i)),this.OnClick()}},i.OnClick=function(){this.m_pTalkBubble&&(this.m_pTalkBubble.SetData(this.m_sTalkMem,this),this.m_pTalkBubble.ShowNotice())},e}(GBasePlayerModel),GScarecrow=function(t){function e(){this.m_nNpcID=0,this.m_pLink=null,this.m_nDlgMode=0,this.m_szNpcData=null,this.m_pTalkBubble=null,this.m_nShowDlg=0,this.regName="",this.m_sDlgBtnName="",this.m_pMovie=null,e.__super.call(this),DataTable.m_iScarecrow=this}__class(e,"game.ui.lead.npc.GScarecrow",t);var i=e.prototype;return i.dispose=function(){t.prototype.dispose.call(this),this.m_pTalkBubble&&this.m_pTalkBubble.SafeDelObj()},i.childvis=function(t){this.m_pTalkBubble&&(this.m_pTalkBubble.visible=t)},i.DelThis=function(){game.build.DisplayItem.prototype.DelThis.call(this),this.regName&&this.regName.length>0&&GLeadManager.UnRegArrowInterface(this.regName)},i.OnInited=function(t,e,i,n,s,a,r){Log1.debug(1,"[GScarecrow] OnInited: ",this.m_pLink,e,i,n,s,a,r),this.m_pTalkBubble&&this.m_pTalkBubble.SafeDelObj(),DisplayItem.SafeDelObj(this.m_pTalkBubble);this.m_nNpcID;this.m_nNpcID=i,this.m_pLink=t,this.m_szNpcData=s,this.m_nDlgMode=a,this.m_nCanMouse=1;var h;if(h=DataTable.m_iNpcTab.Get(i),this.regName="地图_"+h[1],GLeadManager.RegArrowInterface(this,"地图_"+h[1]),!h||h.length<1)return gSys.Err("缺少NPC数据：npcid="+i),void this.DelThis();var o=new UintRef,l=new UintRef;if(this.SetRes(h[4],this),n.indexOf("地图_")<0&&n.indexOf("地图_")<0)this.m_iSelfBk.GetNamedPos(n,o,l)||(o.uid=2751,l.uid=1420);else{var u=GLeadManager.GetMapBuildObj(n);if(u){var c=u.GetDef();switch(o.uid=u.m_nXpos,c[5]){case 1:case 2:l.uid=u.m_nYpos-130;break;case 3:l.uid=u.m_nYpos-130;break;default:l.uid=u.m_nYpos-300}}else o.uid=2751,l.uid=1420}this.SetAniKind(this.zhanli),r?this.PlayKindEndRetrun(this.gaoxing):this.PlayAni(this.m_fPlaySpeed),Laya.timer.loop(4e3,this,this.OnT,null,!0),this.SetPos(o.uid,l.uid)},i.OnT=function(){if(this.IsAniKind(this.zhanli)){var t=[this.xiuxi1,this.xiuxi2,this.xiuxi3],e=Math.random()*t.length;this.PlayKindEndRetrun(t[e])}},i.GetDef=function(){return DataTable.m_iNpcTab.Get(this.GetNpcID())},i.GetNpcID=function(){return this.m_nNpcID},i.GetDlgData=function(){return[this.m_nNpcID,this.m_nDlgMode,this.m_szNpcData]},i.WaitPopTalk=function(t){var e=this;Log1.debug(10,"[WaitPopTalk]","closenpcdlg:"+this.m_nNpcID),gSys.WaitSignal(Handler.create(this,function(){Log1.debug(1,"GScarecrow[WaitPopTalk]---------WaitSignal--","closenpcdlg:"+e.m_nNpcID),e.OnClick(),t&&t.run()}),"closenpcdlg:"+this.m_nNpcID)},i.SetBtnName=function(t){this.m_sDlgBtnName=t},i.GetBtnName=function(){return this.m_sDlgBtnName},i.ShowTalk=function(t){if(void 0===t&&(t=1),Log1.debug(10,"[GScarecrow] ShowTalk  n= ",t),this.m_nShowDlg=t,!t)return void(this.m_pTalkBubble&&this.m_pTalkBubble.ShowNotice());switch(this.m_nDlgMode){case 0:case 6:this.m_pTalkBubble?this.m_pTalkBubble.SetData(this.m_szNpcData.toString(),this):this.m_pTalkBubble=new GTalkBubble(this.m_szNpcData.toString(),this),this.m_pTalkBubble.ShowNotice();break;case 1:GNpcDlg.Me().pid=this,GNpcDlg.Me().myPopup(!0);break;case 2:this.m_nShowDlg=0,GNpcDlg.Me().pid=this,GNpcDlg.Me().myPopup();break;case 4:GHomeNickDlg.Me().Index=0,GHomeNickDlg.Me().myPopup();break;case 5:var e,i;i=this.m_szNpcData.toString();var n=StringOp.GetWordM(i,"-");e=n[0],i=n[1],this.DelyShowMove(e,i)}},i.DelyShowMove=function(t,e,i){void 0===i&&(i=0),Log1.debug(1,"[GScarecrow] DelyShowMove ",t,e,i),this.m_nShowDlg=0,
DisplayItem.SafeDelObj(this.m_pMovie),this.m_pTalkBubble&&this.m_pTalkBubble.UnShowTalk(),this.m_pMovie=new PlayMovie(t,e,i),this.m_pMovie.myPopup(!0)},i.OnLBUp=function(t,e){this.OnMouseOut();var i=this.GetDef()[5];i&&i.length>0&&SoundManager.playSound(DataTable.getSkin(i)),this.OnClick()},i.OnLeave=function(t){void 0===t&&(t=""),Log1.debug(10,"[GScarecrow] OnLeave  leaveani=",t),this.m_pTalkBubble&&this.m_pTalkBubble.SafeDelObj(),this.DelThis()},i.OnClick=function(){var t=0;t=this.m_nDlgMode&&2!=this.m_nDlgMode&&6!=this.m_nDlgMode?1:1-this.m_nShowDlg,2==this.m_nDlgMode&&(this.m_nDlgMode=0),this.ShowTalk(t)},i.MoveAround=function(){},e}(GBasePlayerModel),Man=function(t){function e(t){this.m_szRelax=[],this.m_nIsJimi=0,this.pid=null,e.__super.call(this),this.pid=t}__class(e,"game.ui.lead.npc.Man",t);var i=e.prototype;return i.InitRes=function(t){this.LoadFromName(t,this.pid,!1),this.m_fForward=15,this.SetAniKind(this.zhanli)},i.InitJimi=function(t){this.LoadFromName(t,this.pid,!1),this.m_fForward=15,this.m_nIsJimi=1,this.SetAniKind(this.zhanli),this.PlayKindEndRetrun(this.duihua)},i.InitSorceress=function(t){this.LoadFromName(t,this.pid,!1),this.m_fForward=-15,this.SetAniKind(this.zhanli),Laya.timer.loop(5e3,this.pid,this.pid.OnT)},i.OnMeshReady=function(){this.GetAniRelax(),Laya.timer.loop(5e3,this,this.OnT)},i.GetAniRelax=function(){var t,e,i=0;if(this.m_szRelax=[],this.m_nIsJimi)return void this.m_szRelax.push(this.duihua);for(i=0;i<t.length;i++)e=t[i],e.indexOf(this.xiuxi)<0||this.m_szRelax.push(t[i])},i.OnT=function(){if(!(10*Math.random()<8)&&this.IsAniKind(this.zhanli)){var t=Math.random()*this.m_szRelax.length;this.SetAniKind(this.zhanli),this.PlayKindEndRetrun(this.m_szRelax[t])}},e}(GBasePlayerModel),CheckBox=function(t){function e(t,i){void 0===i&&(i=""),e.__super.call(this,t,i)}__class(e,"laya.ui.CheckBox",t);var i=e.prototype;return i.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},i.initialize=function(){t.prototype.initialize.call(this),this._text.align="left",this._text.valign="top",this._text.width=0},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"boolean"==typeof e?this.selected=e:"string"==typeof e?this.selected="true"===e:t.prototype._$set_dataSource.call(this,e)}),e}(Button),View=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.View",t);var i=e.prototype;return i.createView=function(t){e.createComp(t,this,this)},i.loadUI=function(t){var i=e.uiMap[t];i&&this.createView(i)},e.createComp=function(t,i,n){i=i||e.getCompInstance(t);var s=t.child;if(s)for(var a=0,r=s.length;r>a;a++){var h=s[a];i.hasOwnProperty("itemRender")&&"render"==h.props.name?i.itemRender=h:i.addChild(e.createComp(h,null,n))}var o=t.props;for(var l in o){var u=o[l];e.setCompValue(i,l,u,n)}return i.initItems&&i.initItems(),i},e.setCompValue=function(t,e,i,n){"var"===e&&n?n[i]=t:"width"===e||"height"===e||"x"===e||"y"===e||"pivotX"===e||"pivotY"===e||"number"==typeof t[e]?t[e]=Number(i):t[e]="true"===i?!0:"false"===i?!1:i},e.getCompInstance=function(t){var i=t.props?t.props.runtime:"",n=i?e.viewClassMap[i]||Laya.__classmap[i]:e.uiClassMap[t.type];return n?new n:null},e.regComponent=function(t,i){e.uiClassMap[t]=i},e.regViewRuntime=function(t,i){e.viewClassMap[t]=i},e.uiMap={},e.viewClassMap={},__static(e,["uiClassMap",function(){return this.uiClassMap={ViewStack:ViewStack,LinkButton:Button,TextArea:TextArea,ColorPicker:ColorPicker,Box:Box,Button:Button,CheckBox:CheckBox,Clip:Clip,ComboBox:ComboBox,Component:Component,HScrollBar:HScrollBar,HSlider:HSlider,Image:Image2,Label:Label,List:List,Panel:Panel,ProgressBar:ProgressBar,Radio:Radio,RadioGroup:RadioGroup,ScrollBar:ScrollBar,Slider:Slider,Tab:Tab,TextInput:TextInput,View:e,VScrollBar:VScrollBar,VSlider:VSlider,Tree:Tree,HBox:HBox,VBox:VBox}}]),e}(Box),Group=function(t){function e(t,i){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,e.__super.call(this),this.skin=i,this.labels=t}__class(e,"laya.ui.Group",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IItem":!0}),i.preinitialize=function(){this.mouseEnabled=!0},i.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},i.addItem=function(t,e){void 0===e&&(e=!0);var i=t,n=this._items.length;if(i.name="item"+n,this.addChild(i),this.initItems(),e&&n>0){var s=this._items[n-1];"horizontal"==this._direction?i.x=s.x+s.width+this._space:i.y=s.y+s.height+this._space}else e&&(i.x=0,i.y=0);return n},i.delItem=function(t,e){void 0===e&&(e=!0);var i=this._items.indexOf(t);if(-1!=i){var n=t;this.removeChild(n);for(var s=i+1,a=this._items.length;a>s;s++){var r=this._items[s];r.name="item"+(s-1),e&&("horizontal"==this._direction?r.x-=n.width+this._space:r.y-=n.height+this._space)}if(this.initItems(),this._selectedIndex>-1){var h=0;h=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=h}}},i.initItems=function(){this._items||(this._items=[]),this._items.length=0;for(var t=0;1e4>t;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.selected=t===this._selectedIndex,e.clickHandler=Handler.create(this,this.itemClick,[t],!1)}},i.itemClick=function(t){this.selectedIndex=t},i.setSelect=function(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].selected=e)},i.createItem=function(t,e){return null},i.changeLabels=function(){if(this._items)for(var t=0,e=0,i=this._items.length;i>e;e++){var n=this._items[e];this._skin&&(n.skin=this._skin),this._labelColors&&(n.labelColors=this._labelColors),this._labelSize&&(n.labelSize=this._labelSize),this._labelStroke&&(n.labelStroke=this._labelStroke),this._labelStrokeColor&&(n.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(n.strokeColors=this._strokeColors),this._labelBold&&(n.labelBold=this._labelBold),this._labelPadding&&(n.labelPadding=this._labelPadding),this._labelAlign&&(n.labelAlign=this._labelAlign),this._stateNum&&(n.stateNum=this._stateNum),"horizontal"===this._direction?(n.y=0,n.x=t,t+=n.width+this._space):(n.x=0,n.y=t,t+=n.height+this._space)}this.changeSize()},i.commitMeasure=function(){this.runCallLater(this.changeLabels)},__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(t,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),__getset(0,i,"labelStrokeColor",function(){return this._labelStrokeColor},function(t){this._labelStrokeColor!=t&&(this._labelStrokeColor=t,this.callLater(this.changeLabels))}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this.callLater(this.changeLabels))}),__getset(0,i,"labels",function(){return this._labels},function(t){if(this._labels!=t){if(this._labels=t,this.removeChildren(),this.callLater(this.changeLabels),this._labels)for(var e=this._labels.split(","),i=0,n=e.length;n>i;i++){var s=this.createItem(this._skin,e[i]);s.name="item"+i,this.addChild(s)}this.initItems()}}),__getset(0,i,"labelColors",function(){return this._labelColors},function(t){this._labelColors!=t&&(this._labelColors=t,this.callLater(this.changeLabels))}),__getset(0,i,"labelStroke",function(){return this._labelStroke},function(t){this._labelStroke!=t&&(this._labelStroke=t,this.callLater(this.changeLabels))}),__getset(0,i,"stateNum",function(){return this._stateNum},function(t){this._stateNum!=t&&(this._stateNum=t,this.callLater(this.changeLabels))}),__getset(0,i,"strokeColors",function(){return this._strokeColors},function(t){this._strokeColors!=t&&(this._strokeColors=t,this.callLater(this.changeLabels))}),__getset(0,i,"labelSize",function(){return this._labelSize},function(t){this._labelSize!=t&&(this._labelSize=t,this.callLater(this.changeLabels))}),__getset(0,i,"space",function(){return this._space},function(t){this._space=t,this.callLater(this.changeLabels)}),__getset(0,i,"labelBold",function(){return this._labelBold},function(t){this._labelBold!=t&&(this._labelBold=t,this.callLater(this.changeLabels))}),__getset(0,i,"labelPadding",function(){return this._labelPadding},function(t){this._labelPadding!=t&&(this._labelPadding=t,this.callLater(this.changeLabels))}),__getset(0,i,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),__getset(0,i,"direction",function(){return this._direction},function(t){this._direction=t,this.callLater(this.changeLabels)}),__getset(0,i,"items",function(){return this._items}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.selectedIndex=int(e):e instanceof Array?this.labels=e.join(","):t.prototype._$set_dataSource.call(this,e)}),e}(Box),LayoutBox=function(t){function e(){this._space=0,this._align="none",e.__super.call(this)}__class(e,"laya.ui.LayoutBox",t);var i=e.prototype;return i.addChild=function(t){return t.on("resize",this,this.onResize),this.callLater(this.changeItems),laya.display.Node.prototype.addChild.call(this,t)},i.onResize=function(t){this.callLater(this.changeItems)},i.addChildAt=function(t,e){return t.on("resize",this,this.onResize),this.callLater(this.changeItems),laya.display.Node.prototype.addChildAt.call(this,t,e)},i.removeChild=function(t){return t.off("resize",this,this.onResize),this.callLater(this.changeItems),laya.display.Node.prototype.removeChild.call(this,t)},i.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this.callLater(this.changeItems),laya.display.Node.prototype.removeChildAt.call(this,t)},i.refresh=function(){this.callLater(this.changeItems)},i.changeItems=function(){},i.sortItem=function(t){t&&t.sort(function(t,e){return t.y>e.y?1:-1})},__getset(0,i,"space",function(){return this._space},function(t){this._space=t,this.callLater(this.changeItems)}),__getset(0,i,"align",function(){return this._align},function(t){this._align=t,this.callLater(this.changeItems)}),e}(Box),List=function(t){function e(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._cacheBox=null,this.cacheContent=!1,e.__super.call(this),this._cells=[]}__class(e,"laya.ui.List",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IItem":!0,"laya.ui.IRender":!0}),i.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._content&&this._content.destroy(t),this._scrollBar&&this._scrollBar.destroy(t),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},i.createChildren=function(){this.addChild(this._content=new Box)},i.onMouseDown=function(){t.prototype._$set_cacheAsBitmap.call(this,!1),this._scrollBar&&this._scrollBar.once("end",this,this.onScrollEnd)},i.onScrollEnd=function(){t.prototype._$set_cacheAsBitmap.call(this,!0)},i.changeCells=function(){if(this._itemRender){for(var t=this._cells.length-1;t>-1;t--)this._cells[t].destroy();this._cells.length=0,this.scrollBar=this.getChildByName("scrollBar");var e=this.createItem(),i=e.width+this._spaceX,n=e.height+this._spaceY;this._width>0&&(this._repeatX2=this._isVertical?Math.round(this._width/i):Math.ceil(this._width/i)),this._height>0&&(this._repeatY2=this._isVertical?Math.ceil(this._height/n):Math.round(this._height/n));var s=this._width?this._width:i*this.repeatX-this._spaceX,a=this._height?this._height:n*this.repeatY-this._spaceY;this._cellSize=this._isVertical?n:i,this._cellOffset=this._isVertical?n*Math.max(this._repeatY2,this._repeatY)-a-this._spaceY:i*Math.max(this._repeatX2,this._repeatX)-s-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=a:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=s),this.setContentSize(s,a);var r=this._isVertical?this.repeatX:this.repeatY,h=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,r,h),this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},i._createItems=function(t,e,i){var n=this._content;this.cacheContent&&(this._cacheBox||(this._content.addChild(this._cacheBox=new Box),this._cacheBox.cacheAsBitmap=!0),n=this._cacheBox);for(var s=t;i>s;s++)for(var a=0;e>a;a++){var r=this.createItem();r.x=(this._isVertical?a:s)*(r.width+this._spaceX),r.y=(this._isVertical?s:a)*(r.height+this._spaceY),r.name="item"+(s*e+a),n.addChild(r),this.addCell(r)}},i.createItem=function(){return"function"==typeof this._itemRender?new this._itemRender:View.createComp(this._itemRender)},i.addCell=function(t){t.on("click",this,this.onCellMouse),t.on("rightclick",this,this.onCellMouse),t.on("mouseover",this,this.onCellMouse),t.on("mouseout",this,this.onCellMouse),t.on("mousedown",this,this.onCellMouse),t.on("mouseup",this,this.onCellMouse),this._cells.push(t)},i.initItems=function(){if(!this._itemRender)for(var t=0;1e4>t;t++){var e=this.getChildByName("item"+t);{if(!e)break;this.addCell(e)}}},i.setContentSize=function(t,e){this._content.width=t,this._content.height=e,this._scrollBar&&(this._content.scrollRect||(this._content.scrollRect=new Rectangle),this._content.scrollRect.setTo(0,0,t,e),this.event("resize"))},i.onCellMouse=function(t){"mousedown"===t.type&&(this._isMoved=!1);var e=t.currentTarget,i=this._startIndex+this._cells.indexOf(e);0>i||("click"===t.type||"rightclick"===t.type?this.selectEnable&&!this._isMoved?this.selectedIndex=i:this.changeCellState(e,!0,0):"mouseover"!==t.type&&"mouseout"!==t.type||this._selectedIndex===i||this.changeCellState(e,"mouseover"===t.type,0),this.mouseHandler&&this.mouseHandler.runWith([t,i]))},i.changeCellState=function(t,e,i){var n=t.getChildByName("selectBox");n&&(this.selectEnable=!0,n.visible=e,n.index=i)},i.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this._scrollBar&&Laya.timer.once(10,this,this.onScrollBarChange)},i.onScrollBarChange=function(t){this.runCallLater(this.changeCells);var e=this._scrollBar.value;if(!this.cacheContent){var i=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,s=Math.floor(e/this._cellSize)*i;if(s>this._startIndex){var a=s-this._startIndex,r=!0,h=this._startIndex+i*(n+1);this._isMoved=!0}else s<this._startIndex&&(a=this._startIndex-s,r=!1,h=this._startIndex-1,this._isMoved=!0);for(var o=0;a>o;o++){if(r){var l=this._cells.shift();this._cells[this._cells.length]=l;var u=h+o}else l=this._cells.pop(),this._cells.unshift(l),u=h-o;var c=Math.floor(u/i)*this._cellSize;this._isVertical?l.y=c:l.x=c,this.renderItem(l,u)}this._startIndex=s}this._isVertical?this._content.scrollRect.y=e:this._content.scrollRect.x=e,this.repaint()},i.posCell=function(t,e){if(this._scrollBar){var i=this._isVertical?this.repeatX:this.repeatY,n=(this._isVertical?this.repeatY:this.repeatX,Math.floor(e/i)*this._cellSize);this._isVertical?t.y=n:t.x=n}},i.changeSelectStatus=function(){for(var t=0,e=this._cells.length;e>t;t++)this.changeCellState(this._cells[t],this._selectedIndex===this._startIndex+t,1)},i.renderItems=function(){for(var t=0,e=this._cells.length;e>t;t++)this.renderItem(this._cells[t],this._startIndex+t);this.changeSelectStatus()},i.renderItem=function(t,e){e>=0&&e<this._array.length?(t.visible=!0,t.dataSource=this._array[e],this.posCell(t,e)):(t.visible=!1,t.dataSource=null),this.event("render",[t,e]),this.renderHandler&&this.renderHandler.runWith([t,e])},i.refresh=function(){this.array=this._array},i.getItem=function(t){return t>-1&&t<this._array.length?this._array[t]:null},i.changeItem=function(t,e){t>-1&&t<this._array.length&&(this._array[t]=e,t>=this._startIndex&&t<this._startIndex+this._cells.length&&this.renderItem(this.getCell(t),t))},i.addItem=function(t){this._array.push(t),this.array=this._array},i.addItemAt=function(t,e){this._array.splice(e,0,t),this.array=this._array},i.deleteItem=function(t){this._array.splice(t,1),this.array=this._array},i.getCell=function(t){return this.runCallLater(this.changeCells),t>-1&&this._cells?this._cells[(t-this._startIndex)%this._cells.length]:null},i.scrollTo=function(t){if(this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(t/e)*this._cellSize}else this.startIndex=t},i.tweenTo=function(t,e){if(void 0===e&&(e=200),this._scrollBar){var i=this._isVertical?this.repeatX:this.repeatY;Tween.to(this._scrollBar,{value:Math.floor(t/i)*this._cellSize},e,null,null,0,!0)}else this.startIndex=t},__getset(0,i,"cacheAsBitmap",t.prototype._$get_cacheAsBitmap,function(e){t.prototype._$set_cacheAsBitmap.call(this,e),this._scrollBar&&(e?this.on("mousedown",this,this.onMouseDown):this.off("mousedown",this,this.onMouseDown))}),__getset(0,i,"scrollBar",function(){return this._scrollBar},function(t){this._scrollBar!=t&&(this._scrollBar=t,t&&(this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange),this._isVertical=this._scrollBar.isVertical))}),__getset(0,i,"itemRender",function(){return this._itemRender},function(t){this._itemRender=t,this.callLater(this.changeCells)}),__getset(0,i,"content",function(){return this._content}),__getset(0,i,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this.removeChildByName("scrollBar");var e=new HScrollBar;e.name="scrollBar",e.bottom=0,e.skin=t,this.scrollBar=e,this.addChild(e),this.callLater(this.changeCells)}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this.callLater(this.changeCells)}),__getset(0,i,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this.removeChildByName("scrollBar");var e=new VScrollBar;e.name="scrollBar",e.right=0,e.skin=t,this.scrollBar=e,this.addChild(e),this.callLater(this.changeCells)}),__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){if(this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(t)),this.selectEnable&&this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;(t<this._startIndex||t+e>this._startIndex+this.repeatX*this.repeatY)&&this.scrollTo(t)}}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this.callLater(this.changeCells)}),__getset(0,i,"repeatX",function(){return this._repeatX>0?this._repeatX:this._repeatX2>0?this._repeatX2:1},function(t){this._repeatX=t,this.callLater(this.changeCells)}),__getset(0,i,"repeatY",function(){return this._repeatY>0?this._repeatY:this._repeatY2>0?this._repeatY2:1},function(t){this._repeatY=t,this.callLater(this.changeCells)}),__getset(0,i,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,this.callLater(this.changeCells)}),__getset(0,i,"array",function(){return this._array},function(t){if(this.runCallLater(this.changeCells),this._array=t||[],this.cacheContent&&t.length>this._cells.length){var e=this._isVertical?this.repeatX:this.repeatY,i=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0),n=Math.ceil(t.length/e);this._createItems(i,e,n)}var s=this._array.length;if(this.totalPage=Math.ceil(s/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<s?this._selectedIndex:s-1,this.startIndex=this._startIndex,this._scrollBar){var a=this._isVertical?this.repeatX:this.repeatY,r=this._isVertical?this.repeatY:this.repeatX,h=Math.ceil(s/a),o=this._cellOffset>0?this.totalPage+1:this.totalPage;o>1?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=r/h,this._scrollBar.setScroll(0,(h-r)*this._cellSize+this._cellOffset,this._isVertical?this._content.scrollRect.y:this._content.scrollRect.x),this._scrollBar.target=this._content):(this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)}}),__getset(0,i,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,this.callLater(this.changeCells)}),__getset(0,i,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(t){this.selectedIndex=this._array.indexOf(t)}),__getset(0,i,"selection",function(){return this.getCell(this._selectedIndex)},function(t){this.selectedIndex=this._startIndex+this._cells.indexOf(t)}),__getset(0,i,"startIndex",function(){return this._startIndex},function(t){this._startIndex=t>0?t:0,this.callLater(this.renderItems)}),__getset(0,i,"page",function(){return this._page},function(t){this._page=t,this._array&&(this._page=t>0?t:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),__getset(0,i,"length",function(){return this._array.length}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.selectedIndex=Laya.__parseInt(e):e instanceof Array?this.array=e:t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),e}(Box),Panel=function(t){function e(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,e.__super.call(this),this.width=this.height=100,this._content.optimizeFloat=!0}__class(e,"laya.ui.Panel",t);var i=e.prototype;return i.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._content&&this._content.destroy(t),this._vScrollBar&&this._vScrollBar.destroy(t),this._hScrollBar&&this._hScrollBar.destroy(t),this._vScrollBar=null,this._hScrollBar=null,this._content=null},i.destroyChildren=function(){this._content.destroyChildren()},i.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new Box)},i.addChild=function(t){return t.on("resize",this,this.onResize),this.callLater(this.changeScroll),this._content.addChild(t)},i.onResize=function(t){this.callLater(this.changeScroll)},i.addChildAt=function(t,e){return t.on("resize",this,this.onResize),this.callLater(this.changeScroll),this._content.addChildAt(t,e)},i.removeChild=function(t){return t.off("resize",this,this.onResize),this.callLater(this.changeScroll),this._content.removeChild(t)},i.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this.callLater(this.changeScroll),this._content.removeChildAt(t)},i.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=2147483647);for(var i=this._content.numChildren-1;i>-1;i--)this._content.removeChildAt(i);return this.callLater(this.changeScroll),this},i.getChildAt=function(t){return this._content.getChildAt(t)},i.getChildByName=function(t){return this._content.getChildByName(t)},i.getChildIndex=function(t){return this._content.getChildIndex(t)},i.changeScroll=function(){var t=this.contentWidth,e=this.contentHeight,i=this._vScrollBar,n=this._hScrollBar,s=i&&e>this._height,a=n&&t>this._width,r=s?this._width-i.width:this._width,h=a?this._height-n.height:this._height;this.setContentSize(this._width,this._height),i&&(i.x=this._width-i.width,i.y=0,i.height=this._height-(a?n.height:0),i.scrollSize=Math.max(.033*this._height,1),i.thumbPercent=h/e,i.setScroll(0,e-h,i.value)),n&&(n.x=0,n.y=this._height-n.height,n.width=this._width-(s?i.width:0),n.scrollSize=Math.max(.033*this._width,1),n.thumbPercent=r/t,n.setScroll(0,t-r,n.value))},i.setContentSize=function(t,e){var i=this._content;i.width=t,i.height=e,i.scrollRect||(i.scrollRect=new Rectangle),i.scrollRect.setTo(0,0,t,e)},i.onScrollBarChange=function(t,e){var i=this._content.scrollRect;if(i){var n=Math.round(t.value);t.isVertical?i.y=n:i.x=n}},i.scrollTo=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.vScrollBar&&(this.vScrollBar.value=e),this.hScrollBar&&(this.hScrollBar.value=t)},i.refresh=function(){this.changeScroll()},i.onMouseDown=function(){t.prototype._$set_cacheAsBitmap.call(this,!1),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},i.onScrollEnd=function(){t.prototype._$set_cacheAsBitmap.call(this,!0)},__getset(0,i,"numChildren",function(){return this._content.numChildren}),__getset(0,i,"contentWidth",function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i.x+i.width*i.scaleX,t)}return t}),__getset(0,i,"contentHeight",function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i.y+i.height*i.scaleY,t)}return t}),__getset(0,i,"vScrollBar",function(){return this._vScrollBar}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this.callLater(this.changeScroll)}),__getset(0,i,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new HScrollBar),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this.callLater(this.changeScroll)),this._hScrollBar.skin=t}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this.callLater(this.changeScroll)}),__getset(0,i,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new VScrollBar),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this.callLater(this.changeScroll)),this._vScrollBar.skin=t}),__getset(0,i,"hScrollBar",function(){return this._hScrollBar}),__getset(0,i,"content",function(){return this._content}),__getset(0,i,"cacheAsBitmap",t.prototype._$get_cacheAsBitmap,function(e){t.prototype._$set_cacheAsBitmap.call(this,e),e?this.on("mousedown",this,this.onMouseDown):this.off("mousedown",this,this.onMouseDown)}),e}(Box),HScrollBar=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.HScrollBar",t);var i=e.prototype;return i.initialize=function(){t.prototype.initialize.call(this),this._slider.isVertical=!1},e}(ScrollBar),Radio=function(t){function e(t,i){this._value=null,void 0===i&&(i=""),e.__super.call(this,t,i)}__class(e,"laya.ui.Radio",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._value=null},i.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},i.initialize=function(){t.prototype.initialize.call(this),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},i.onClick=function(t){this.selected=!0},__getset(0,i,"value",function(){return null!=this._value?this._value:this.label},function(t){this._value=t}),e}(Button),HSlider=function(t){function e(t){e.__super.call(this,t),this.isVertical=!1}return __class(e,"laya.ui.HSlider",t),e}(Slider),Tree=function(t){function e(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,e.__super.call(this),this.width=this.height=200}__class(e,"laya.ui.Tree",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IRender":!0}),i.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._list&&this._list.destroy(t),this._list=null,this._source=null,this._renderHandler=null},i.createChildren=function(){this.addChild(this._list=new List),this._list.renderHandler=Handler.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},i.onListChange=function(t){this.event("change")},i.getArray=function(){var t,e=[];for(var i in this._source)t=this._source[i],this.getParentOpenStatus(t)&&(t.x=this._spaceLeft*this.getDepth(t),e.push(t));return e},i.getDepth=function(t,e){return void 0===e&&(e=0),null==t.nodeParent?e:this.getDepth(t.nodeParent,e+1)},i.getParentOpenStatus=function(t){var e=t.nodeParent;return null==e?!0:e.isOpen?null!=e.nodeParent?this.getParentOpenStatus(e):!0:!1},i.renderItem=function(t,e){var i=t.dataSource;if(i){t.left=i.x;var n=t.getChildByName("arrow");n&&(i.hasChild?(n.visible=!0,n.index=i.isOpen?1:0,n.tag=e,n.off("click",this,this.onArrowClick),n.on("click",this,this.onArrowClick)):n.visible=!1);var s=t.getChildByName("folder");s&&(2==s.clipY?s.index=i.isDirectory?0:1:s.index=i.isDirectory?i.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([t,e])}},i.onArrowClick=function(t){var e=t.currentTarget,i=e.tag;this._list.array[i].isOpen=!this._list.array[i].isOpen,this._list.array=this.getArray()},i.setItemState=function(t,e){this._list.array[t]&&(this._list.array[t].isOpen=e,this._list.array=this.getArray())},i.fresh=function(){this._list.array=this.getArray(),this.repaint()},i.parseXml=function(t,e,i,n){var s,a=t.childNodes,r=a.length;if(!n){s={};var h,o=t.attributes;for(var l in o){h=o[l];var u=h.nodeName,c=h.nodeValue;s[u]="true"==c?!0:"false"==c?!1:c}s.nodeParent=i,r>0&&(s.isDirectory=!0),s.hasChild=r>0,e.push(s)}for(var _=0;r>_;_++){var m=a[_];this.parseXml(m,e,s,!1)}},i.parseOpenStatus=function(t,e){for(var i=0,n=e.length;n>i;i++){var s=e[i];if(s.isDirectory)for(var a=0,r=t.length;r>a;a++){var h=t[a];if(h.isDirectory&&this.isSameParent(h,s)&&s.label==h.label){s.isOpen=h.isOpen;break}}}},i.isSameParent=function(t,e){return null==t.nodeParent&&null==e.nodeParent?!0:null==t.nodeParent||null==e.nodeParent?!1:t.nodeParent.label==e.nodeParent.label?this.isSameParent(t.nodeParent,e.nodeParent):!1},i.filter=function(t){if(Boolean(t)){var e=[];this.getFilterSource(this._source,e,t),this._list.array=e}else this._list.array=this.getArray()},i.getFilterSource=function(t,e,i){i=i.toLocaleLowerCase();var n;for(var s in t)n=t[s],!n.isDirectory&&String(n.label).toLowerCase().indexOf(i)>-1&&(n.x=0,e.push(n)),n.child&&n.child.length>0&&this.getFilterSource(n.child,e,i)},__getset(0,i,"keepStatus",function(){return this._keepStatus},function(t){this._keepStatus=t}),__getset(0,i,"list",function(){return this._list}),__getset(0,i,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(t){this._list.vScrollBarSkin=t}),__getset(0,i,"array",function(){return this._list.array},function(t){this._keepStatus&&this._list.array&&t&&this.parseOpenStatus(this._list.array,t),this._source=t,this._list.array=this.getArray()}),__getset(0,i,"selectedItem",function(){return this._list.selectedItem},function(t){this._list.selectedItem=t}),__getset(0,i,"source",function(){return this._source}),__getset(0,i,"itemRender",function(){return this._list.itemRender},function(t){this._list.itemRender=t}),__getset(0,i,"scrollBar",function(){return this._list.scrollBar}),__getset(0,i,"mouseHandler",function(){return this._list.mouseHandler},function(t){this._list.mouseHandler=t}),__getset(0,i,"renderHandler",function(){return this._renderHandler},function(t){this._renderHandler=t}),__getset(0,i,"spaceLeft",function(){return this._spaceLeft},function(t){this._spaceLeft=t}),__getset(0,i,"spaceBottom",function(){return this._list.spaceY},function(t){this._list.spaceY=t}),__getset(0,i,"selectedIndex",function(){return this._list.selectedIndex},function(t){this._list.selectedIndex=t;
}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._list.width=e}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._list.height=e}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,Laya.__typeof(e,laya.ui.XmlDom)?this.xml=e:t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"xml",null,function(t){var e=[];this.parseXml(t.childNodes[0],e,null,!0),this.array=e}),__getset(0,i,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),e}(Box),ViewStack=function(t){function e(){this._items=null,this._selectedIndex=0,e.__super.call(this),this._setIndexHandler=Handler.create(this,this.setIndex,null,!1)}__class(e,"laya.ui.ViewStack",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IItem":!0}),i.setItems=function(t){this.removeChildren();for(var e=0,i=0,n=t.length;n>i;i++){var s=t[i];s&&(s.name="item"+e,this.addChild(s),e++)}this.initItems()},i.addItem=function(t){t.name="item"+this._items.length,this.addChild(t),this.initItems()},i.initItems=function(){this._items=[];for(var t=0;1e4>t;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.visible=t==this._selectedIndex}},i.setSelect=function(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].visible=e)},i.setIndex=function(t){this.selectedIndex=t},__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(this._selectedIndex,!0))}),__getset(0,i,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),__getset(0,i,"setIndexHandler",function(){return this._setIndexHandler},function(t){this._setIndexHandler=t}),__getset(0,i,"items",function(){return this._items}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t)this.selectedIndex=int(t);else for(var e in this._dataSource)this.hasOwnProperty(e)&&(this[e]=this._dataSource[e])}),e}(Box),VScrollBar=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.VScrollBar",t),e}(ScrollBar),TextInput=function(t){function e(t){this._bg=null,this._skin=null,e.__super.call(this),void 0===t&&(t=""),this.text=t,this.skin=this.skin}__class(e,"laya.ui.TextInput",t);var i=e.prototype;return i.preinitialize=function(){this.mouseEnabled=!0},i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(),this._bg=null},i.createChildren=function(){this.addChild(this._tf=new Input),this._tf.padding=Styles.inputLabelPadding,this._tf.on("input",this,this.onInput),this._tf.on("enter",this,this.onEnter),this._tf.on("blur",this,this.onBlur),this._tf.on("focus",this,this.onFocus)},i.onFocus=function(t){this.event("focus",this)},i.onBlur=function(t){this.event("blur",this)},i.onInput=function(t){this.event("input",this)},i.onEnter=function(t){this.event("enter",this)},i.initialize=function(){this.width=128,this.height=22},i.select=function(){this._tf.select()},__getset(0,i,"bg",function(){return this._bg},function(t){this.graphics=this._bg=t}),__getset(0,i,"editable",function(){return this._tf.editable},function(t){this._tf.editable=t}),__getset(0,i,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(t){this._tf.inputElementYAdjuster=t}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._bg&&(this._bg.height=e)}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._bg||(this.graphics=this._bg=new AutoBitmap),this._bg.source=Loader.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),__getset(0,i,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(t){this._bg||(this.graphics=this._bg=new AutoBitmap),this._bg.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,i,"title",function(){return this._tf.title},function(t){this._tf.title=t}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._bg&&(this._bg.width=e)}),__getset(0,i,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(t){this._tf.inputElementXAdjuster=t}),__getset(0,i,"multiline",function(){return this._tf.multiline},function(t){this._tf.multiline=t}),__getset(0,i,"restrict",function(){return this._tf.restrict},function(t){this._tf.restrict=t}),__getset(0,i,"maxChars",function(){return this._tf.maxChars},function(t){this._tf.maxChars=t}),e}(Label),VSlider=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.VSlider",t),e}(Slider),CropTools=function(t){function e(t,i,n,s){this.xt=0,this.yt=0,this.typeV=0,this.txts=null,this.count=0,this.box=null,void 0===i&&(i=!0),void 0===n&&(n=1),void 0===s&&(s="-1"),e.__super.call(this,t),this.typeV=n,this.txts=new GObj2DMutiText,this.txts.LoadAni("tex_文字大_ani"),this.addChild(this.txts),0==this.width&&(this.width=60),0==this.height&&(this.height=60),this.txts.SetScrPos(this.width+20,this.height/2-6,1),this.txts.SetText(s),i?(this.txts.scale(1.3,1.3),Tween.to(this,{alpha:.1,scaleX:.3,scaleY:.3},500,null,new Handler(this,this.onDispose))):(n&&(this.txts.scale(1.5,1.5),this.scale(.5,.5)),Laya.timer.frameOnce(1,this,this.onFrame))}__class(e,"display.crop.CropTools",t);var i=e.prototype;return i.onFrame=function(){var t,e=0;t=new Bezier;var i,n;this.typeV<4?(this.box=MainIcon.getInstance().upperIcon.upperContainer.getChildByName("item"+this.typeV),this.xt=this.box.x,this.yt=MainIcon.getInstance().upperIcon.upperContainer.y,e=this.x-180,n=[this.x,this.y,this.x-40,this.y+80,this.x-80,this.y+80,this.x-120,this.y+80,this.x-150,this.y+40,this.x-180,this.y],n.push(this.getTargetPoint(e,.125)[0],this.getTargetPoint(e,.125)[1]),n.push(this.getTargetPoint(e,.25)[0],this.getTargetPoint(e,.25)[1]),n.push(this.getTargetPoint(e,.375)[0],this.getTargetPoint(e,.375)[1]),n.push(this.getTargetPoint(e,.5)[0],this.getTargetPoint(e,.5)[1]),n.push(this.xt,this.yt),i=t.getBezierPoints(n,200,2)):(this.box=MainIcon.getInstance().rightIcon.rightContainer.getChildByName("item"+this.typeV),this.xt=MainIcon.getInstance().rightIcon.x+100,this.yt=this.box.y,e=this.x+180,n=[this.x,this.y,this.x+40,this.y+80,this.x+80,this.y+80,this.x+120,this.y+80,this.x+150,this.y+40,this.x+180,this.y],n.push(this.getTargetPoint(e,.125)[0],this.getTargetPoint(e,.125)[1]),n.push(this.getTargetPoint(e,.25)[0],this.getTargetPoint(e,.25)[1]),n.push(this.getTargetPoint(e,.375)[0],this.getTargetPoint(e,.375)[1]),n.push(this.getTargetPoint(e,.5)[0],this.getTargetPoint(e,.5)[1]),n.push(this.xt,this.yt),i=t.getBezierPoints(n,200,2)),Laya.timer.loop(1,this,this.movehandler,[i])},i.getTargetPoint=function(t,e){void 0===e&&(e=.5);var i=Math.floor(t>this.xt?t-Math.abs(this.xt-t)*e:t+Math.abs(this.xt-t)*e),n=Math.floor(this.y>this.yt?this.y-Math.abs(this.yt-this.y)*e:this.y+Math.abs(this.yt-this.y)*e);return[i,n]},i.movehandler=function(t){t[this.count+1]?(this.x=t[this.count],this.y=t[this.count+1]):(Laya.timer.clear(this,this.movehandler),this.onDispose()),this.count+=2},i.onDispose=function(){this.txts.dispose(),this.removeChildren(),this.removeSelf(),this.destroy()},e}(Image2),Box_HIDE=function(t){function e(){this.img=null,e.__super.call(this),this.init()}__class(e,"display.mainIcon.Box_HIDE",t);var i=e.prototype;return i.init=function(){this.size(MainIcon.getInstance().box_2.viewWidth,MainIcon.getInstance().box_2.viewHeight),this.img=new Image2(DataTable.getSkin("BTN_HIDE")),this.img.size(MainIcon.getInstance().img_2.viewWidth,MainIcon.getInstance().img_2.viewHeight),this.addChild(this.img),this.on("click",this,this.onClick)},i.onClick=function(){GameMain._ins.GmView.showAllSysBuild(),Tween.clearAll(this),Laya.timer.clear(this,this.TweenAni),this.removeSelf()},i.onShow=function(){MainIcon.getInstance().addChild(this),this.updateXY(),this.TweenAni(this.img),Laya.timer.loop(1e3,this,this.TweenAni,[this.img])},i.TweenAni=function(t){Tween.to(t,{alpha:.5},500,Ease.sineInOut,null,0,!0),Tween.to(t,{alpha:1},500,null,null,500)},i.updateXY=function(){this.displayInStage&&(this.scale(DisplayTools.globalScale+.4,DisplayTools.globalScale+.4),this.x=(Laya.stage.width-this.viewWidth)/2,this.y=Laya.stage.height-this.viewHeight-15)},__getset(0,i,"visible",function(){return t.prototype._$get_visible.call(this)},function(e){t.prototype._$set_visible.call(this,e)}),e}(Box),PetTip=function(t){function e(t){this.title=null,this.lucky=null,this.content=null,this.append=null,void 0===t&&(t="reuse/bg.png"),e.__super.call(this,t),this.init()}__class(e,"display.kit.PetTip",t);var i=e.prototype;return i.init=function(){this.sizeGrid="20,20,20,20",this.alpha=.9,this.size(435,275),this.title=new Text,this.title.fontSize=32,this.title.color="#000000",this.title.text="斗牛犬",this.title.bold=!0,this.title.pos(7,10),this.lucky=new Text,this.lucky.fontSize=24,this.lucky.color="#000000",this.lucky.text="幸运值：325",this.lucky.pos(7,60),this.content=new Text,this.content.fontSize=24,this.content.color="#002020",this.content.width=415,this.content.wordWrap=!0,this.content.text="通过喂养可以提升幸运值，商店购买获得。雪拉瑞的幸运值最高可到400,达到最高值后继续喂养，幸运值还可缓慢提升。",this.content.pos(7,130),this.append=new Text,this.append.fontSize=26,this.append.color="#FF0000",this.append.text="饿了需要喂养",this.append.pos(7,this.height-45),this.addChild(this.title),this.addChild(this.lucky),this.addChild(this.content),this.addChild(this.append)},i.upinit=function(){this.title.text="",this.lucky.text="",this.content.text="",this.append.text="",this.size(435,250)},i.SetPetTipsStr=function(t,e,i,n){void 0===n&&(n=""),this.upinit();var s=DataTable.m_iPetTab.Get(t);s.length<1&&gSys.Err("没有找到宠物");var a;a=n.length>0?n+"的"+s[1]:s[1],this.title.text=a,this.lucky.text="幸运值："+e,this.content.text=s[7]+s[6],1==i?(this.append.text="宠物饿了，需要吃点东西",this.size(435,275)):2==i&&(this.append.text="正在寻宝中",this.size(435,275))},i.onTipMove=function(){this.x=Laya.stage.mouseX-this.width/2,this.y=Laya.stage.mouseY-this.height,this.x<=0&&(this.x=0),this.y<=0&&(this.y=0,this.x=Laya.stage.mouseX-this.width),this.y<=0&&this.x<=0&&(this.y=Laya.stage.mouseY+50,this.x=Laya.stage.mouseX-this.width/2)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(Image2),GItemIconBase=function(t){function e(){this.m_nItemID=0,this.url=null,this.txt=null,e.__super.call(this),this.mouseEnabled=!1,this.mouseThrough=!1}__class(e,"display.Machine.GItemIconBase",t);var i=e.prototype;return i.Init=function(t,e){if(e>1?(this.txt||(this.txt=new GObj2DMutiText,this.txt.LoadAni("tex_文字小_ani"),this.txt.SetScrPos(40,52,0)),this.addChild(this.txt),this.txt.SetText(e+"")):this.txt&&this.txt.SetText(""),this.width=50,this.height=50,this.m_nItemID=t,!SysID.IsDTJZID(t)){var i=DataTable.m_iItemTab.Get(t);null==i?this.url=DataTable.getSkin("tex_图标_未知物品"):SysID.IsJZPFID(t)?this.url=DataTable.getSkin("tex_角标_配方"):this.url=DataTable.getSkin(i[3])}if(null==this.url){var n=DataTable.m_iBuildTab.Get(t);n&&(this.url=Assets.BuildUrl(n[4]))}this.skin=this.url},i.mouseMove=function(){},i.mouseDown=function(){},i.OnClick=function(){},e}(Image2),GPetOpBk=function(t){function e(){this.m_pTired=null,this.m_pText3=null,this.m_pFriHead=null,this.m_szData=[],e.__super.call(this),this.init(),this.mouseEnabled=!0}__class(e,"display.petHunt.GPetOpBk",t);var i=e.prototype;return i.init=function(){this.skin=DataTable.getSkin("tex_素材_寻宝sub"),this.m_pTired=new Image2,this.m_pTired.skin=DataTable.getSkin("tex_沙漏"),this.m_pTired.size(49,49),this.m_pTired.pos(60,25),this.m_pTired.visible=!1,this.addChild(this.m_pTired),this.m_pText3=new GObj2DMutiText,this.m_pText3.LoadAni("tex_文字小_ani"),this.addChild(this.m_pText3),this.m_pText3.SetScrPos(120,116,2),this.m_pText3.SetText("l\r 55")},i.SetData=function(t){this.m_szData!=t&&(this.m_szData=t,this.m_pText3.SetText("l\r "+t[0]),this.m_pTired.visible=!!t[1],t[2]>0?(this.m_pFriHead=this.GetPetFriHead(t[3]),this.m_pFriHead.scale(.75,.75),this.m_pFriHead.pos(110,3),this.size(160,116),this.addChild(this.m_pFriHead)):this.size(135,116))},i.GetPetFriHead=function(t){var e=new Image2;if(1!=t.uid){e.skin=DataTable.getSkin("tex_素材_寻宝头像框");var i=new Image2;return i.skin=DataTable.getSkin("tex_face"+t[3]),i.size(59,59),i.addChild(e),e.pos(-2,-2),i}return e.skin=DataTable.getSkin("DEFUSER_NPC"),e},e}(Image2),GObj2DImg=function(t){function e(){e.__super.call(this)}__class(e,"game.ui.base.GObj2DImg",t);var i=e.prototype;return i.SetSrc=function(t){this.skin=t},i.SetDef=function(t,e,i){this.pos(t,e),this.skin=i},i.SetSize=function(t,e){this.size(t,e)},i.SetPos=function(t,e){this.pos(t,e)},e}(Image2),GItemIconShow=function(t){function e(){this.ICONLAYERNO=2,this.m_vTips=null,this.m_pFormulaIconSign=null,this.m_nCurItemWidth=0,this.m_nItemID=0,this.m_pBuildIcon=null,e.__super.call(this)}__class(e,"game.ui.comui.GItemIconShow",t);var i=e.prototype;return i.GetItemID=function(){return this.m_nItemID},i.SafeDelObj=function(t){t instanceof laya.display.Sprite?t.removeSelf():DisplayItem.SafeDelObj(t)},i.SetImg=function(t,e){this.skin=e},i.onReset=function(){this.skin=null,this.SafeDelObj(this.m_pBuildIcon),this.SafeDelObj(this.m_pFormulaIconSign)},i.InitMe=function(t,e){void 0===e&&(e=0),this.m_vTips=["item",t],this.m_nItemID=t,1>e&&(e=this.m_nCurItemWidth>0?this.m_nCurItemWidth:80),this.m_nCurItemWidth=e;var i;if(this.skin=null,this.SafeDelObj(this.m_pBuildIcon),this.SafeDelObj(this.m_pFormulaIconSign),SysID.IsDTJZID(t))this.ChgToBuildIcon(t,e,e);else if(t){var n=DataTable.m_iItemTab.Get(t);if(null==n)return void gSys.Err("item not find id="+t);n[3].length>0?SysID.IsJZPFID(t)?(this.m_pFormulaIconSign=new GObj2DImg,this.addChild(this.m_pFormulaIconSign),this.m_pFormulaIconSign.SetDef(0,0,DataTable.getSkin("tex_角标_配方")),this.m_pFormulaIconSign.SetSize(Math.floor(32*e/80),Math.floor(32*e/80)),this.ChgToFormulaIcon(n[3],e,e)):this.SetImg(this.ICONLAYERNO,DataTable.getSkin(n[3])):(i=new GObj2DText,i.SetAlign(1,1),i.SetText(n[2]),this.addChild(i))}else this.SetImg(this.ICONLAYERNO,DataTable.getSkin("tex_图标_未知物品"));this.SetRect(0,0,e,e)},i.SetRect=function(t,e,i,n){this.pivot(t,e),this.size(i,n)},i.ChgToFormulaIcon=function(t,e,i){this.SafeDelObj(this.m_pBuildIcon),this.skin=Assets.BuildUrl(t)},i.ChgToBuildIcon=function(t,e,i){this.SafeDelObj(this.m_pBuildIcon),this.m_pBuildIcon=new GBuildIconBase,this.m_pBuildIcon.Init(t,e,i),this.addChild(this.m_pBuildIcon)},i.OnLBUp=function(t,e){(SysID.IsDTZSJZID(this.m_nItemID)||SysID.IsJZPFID(this.m_nItemID))&&console.log("layer_装饰物_详细说明"+this.m_nItemID)},i.SetPos=function(t,e){this.pos(t,e)},i.SetShow=function(t){this.visible=!!t},e}(Image2),GRechargeBtn=function(t){function e(t,i){this.m_nDiamond=0,this.m_pIcon=null,this.m_nIconNameMode=0,this.m_sIconName="",void 0===i&&(i=""),e.__super.call(this,t,i),this.labelSize=22,this.labelBold=!0,this.labelAlign="left",this.labelStrokeColor="#000000",this.labelPadding="0,0,0,110",this.labelColors="#ffffff,#ffffff,#ffffff"}__class(e,"game.ui.comui.btn.GRechargeBtn",t);var i=e.prototype;return i.SetDef=function(t,e,i,n,s,a,r,h,o){void 0===a&&(a=""),void 0===r&&(r=256),void 0===h&&(h=64),void 0===o&&(o=1),this.InitIcon(h),this.pos(t,e);var l=DataTable.getSkin(a);this.label=i,this.clickHandler=s,this.size(r,h),this.Set(n),Laya.loader.load(l,new Handler(this,this.onLoadSkin,[l]),null,"image")},i.onLoadSkin=function(t){this.skin=t,this.stateNum=1},i.InitIcon=function(t){this.m_pIcon||this.m_sIconName.length<1||(this.m_pIcon=this.getObj(this.m_sIconName),this.m_pIcon&&(this.m_pIcon.SetScrPos(100,t/2+12,2),this.addChild(this.m_pIcon)))},i.getObj=function(t){switch(t){case"GUI_MoneyShowSmall":return new GUI_MoneyShowSmall;case"GUI_DiamondShowSmall":return new GUI_DiamondShowSmall;case"GUI_ShellShowSmall":return new GUI_ShellShowSmall;case"GUI_MedalShowSmall":return new GUI_MedalShowSmall;case"GUI_LightShowSmall":return new GUI_LightShowSmall;default:return null}},i.OnIconNameModeChged=function(){switch(this.m_nIconNameMode){case 0:this.m_sIconName="GUI_MoneyShowSmall";break;case 1:this.m_sIconName="GUI_DiamondShowSmall";break;case 2:this.m_sIconName="GUI_ShellShowSmall";break;case 3:this.m_sIconName="GUI_MedalShowSmall"}this.InitIcon(this.height),this.Set(this.m_nDiamond)},i.Set=function(t){if(this.m_nDiamond=t,this.m_pIcon.Set(t),t!=this.m_pIcon.m_nCur)if(t>0){var e=0,i=this.m_pIcon.getClipRect();if(i){var n=this.text.textWidth;this.text.padding&&(n-=this.text.padding[3]);var s=i.right-i.left,a=Math.floor(this.width-(n+s+e))/2,r=a+s-i.left,h=a+s+e;this.m_pIcon.SetScrPos(r,this.height/2+12,2),this.labelPadding="0,0,0,"+h}this.m_pIcon.SetShow(1)}else this.m_pIcon.SetShow(0)},e}(Button),GDiamondBtn1=function(t){function e(){this.m_nDiamond=0,this.m_pIcon=null,this.m_nIconNameMode=0,this.m_sIconName=null,e.__super.call(this)}__class(e,"game.ui.comui.GDiamondBtn",t,"GDiamondBtn1");var i=e.prototype;return i.SetDef=function(t,e,i,n,s,a,r,h,o){void 0===a&&(a=""),void 0===r&&(r=256),void 0===h&&(h=64),void 0===o&&(o=1),this.InitIcon(),this.pos(t,e),this.skin=DataTable.getSkin(a),this.label=i,this.clickHandler=s,this.Set(n)},i.InitIcon=function(){this.m_pIcon||this.m_sIconName.length<1||(this.m_pIcon=new GUI_DiamondShowSmall,this.m_pIcon.pos(-5,0),this.addChild(this.m_pIcon))},i.OnIconNameModeChged=function(){switch(this.m_nIconNameMode){case 0:this.m_sIconName="GUI_MoneyShowSmall";break;case 1:this.m_sIconName="GUI_DiamondShowSmall";break;case 2:this.m_sIconName="GUI_ShellShowSmall";break;case 3:this.m_sIconName="GUI_MedalShowSmall"}this.InitIcon(),this.Set(this.m_nDiamond)},i.Set=function(t){if(this.m_nDiamond=t,this.m_pIcon.Set(t),t>0){15*t.toString().length+20;this.m_pIcon.SetShow(1),this.m_pIcon.pos(0,0)}else this.m_pIcon.SetShow(0)},e}(Button),GSysResBtn=function(t){function e(t){this.m_sSysName=null,this.m_szDataExt=null,this.m_vTips=null,this.m_vFun=null,this.m_pText=null,e.__super.call(this,t)}__class(e,"game.ui.base.GSysResBtn",t);var i=e.prototype;return i.SetText=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.m_pText||(this.m_pText=new Text,this.addChild(this.m_pText)),this.m_pText.text=t,DisplayTools.setObject(this.m_pText,{x:-35,width:150,height:30,color:"#ffffff",stroke:1,y:i,fontSize:20,align:"center"})},i.SetTips=function(t){this.m_vTips=["doc",t]},i.SetDef=function(t,e,i,n,s,a,r){void 0===s&&(s=""),void 0===a&&(a=80),void 0===r&&(r=80),this.m_vFun=n,(s.length<1||s.length>0)&&i.length>0&&(r>a&&(r=a),1>r&&(r=80),this.SetText(i,r,r)),this.skin=DataTable.getSkin(s),this.size(a,r),this.pos(t,e),this.on("click",this,this.onClick)},i.onClick=function(){this.m_vFun&&this.m_vFun.run()},e}(Image2),GObj2DText=function(t){function e(){e.__super.call(this)}__class(e,"game.ui.base.GObj2DText",t);var i=e.prototype;return i.SetAlign=function(t,e){},i.SetText=function(t){this.text=t},e}(Label),GDrawStars=function(t){function e(){this.m_nAnchorX=0,this.m_nAnchorY=0,e.__super.call(this)}__class(e,"game.ui.comui.GDrawStars",t);var i=e.prototype;return i.SetAnchorPos=function(t,e){this.m_nAnchorX=t,this.m_nAnchorY=e},i.SetNum=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.DeleteAllSub(),!(1>t)){for(var n=0;t>n;n++){var s=new GObj2DImg;s.SetPos(32*n+5,0),s.SetSrc(DataTable.getSkin("tex_icon_小星星")),this.addChild(s)}switch(e){case 0:this.pos(this.m_nAnchorX,this.m_nAnchorY-16);break;case 1:this.pos(this.m_nAnchorX-32*n/2,this.m_nAnchorY-16);break;case 2:this.pos(this.m_nAnchorX-32*n,this.m_nAnchorY-16)}this.size(32*n+10,32),i&&(this.skin=DataTable.getSkin("tex_星星底框"))}},i.DeleteAllSub=function(){this.removeChildren()},e}(Image2),MyPopMenuItem=function(t){function e(t,i){this.m_data=null,void 0===i&&(i=""),e.__super.call(this,t,i)}__class(e,"game.ui.comui.menu.MyPopMenuItem",t);var i=e.prototype;return i.OnClick=function(t){t&&t.run(),GPopMenu.Close()},i.SetDef=function(t,e,i,n,s,a,r){void 0===i&&(i=""),void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===r&&(r=0),this.label=t,this.labelSize=18,this.labelColors="#ffffff,#ffffff,#ffffff,#ffffff",this.labelStroke=1,this.clickHandler=Handler.create(this,this.OnClick,[e]),this.size(n,s),this.pivot(n/2,s/2);var h=i;Laya.loader.load(h,Handler.create(this,this.onLoadSkin,[h]),null,"image"),this.labelBold=!0,!r},i.onLoadSkin=function(t){this.skin=t,this.stateNum=1},i.Data=function(t){this.m_data=t},e}(Button),GObj2DDocx=function(t){function e(){e.__super.call(this),this.wordWrap=!0}__class(e,"game.ui.comui.GObj2DDocx",t);var i=e.prototype;return i.SetText=function(t){this.text=t},i.AddNormalLine=function(t){this.text=this.text+t},i.SetShow=function(t){this.visible=!!t},i.GetWidth=function(){return this.textField.textWidth},i.GetHeight=function(){return this.textField.textHeight},e}(Label),GMutiAniIconBase1=function(t){function e(){this.m_w=64,this.m_h=64,e.__super.call(this,this.skin)}__class(e,"game.ui.comui.icon.GMutiAniIconBase",t,"GMutiAniIconBase1");var i=e.prototype;return i.SetAniImg=function(t,e,i){void 0===e&&(e=64),void 0===i&&(i=64),this.m_w=e,this.m_h=i,this.skin=Assets.BuildUrl(t);var n=e>i?i:e;this.size(n,n),this.pivot(n/2,n/2)},e}(Image2),FirstFlush=function(t){function e(t){e.__super.call(this,t),this.create()}__class(e,"game.ui.gmainui.FirstFlush",t);var i=e.prototype;return i.create=function(){this.skin="ui/img/free.png",this.on("click",this,this.onClickHandler);var t=new Muti2DAniIns;t.createInsFromName("uiimg_运营活动按钮宝箱_ani"),this.addChild(t),t.pos(10,8),DataTable.m_iSelfUser.AddNoti("SCCGLQ",this,this.destruction)},i.onClickHandler=function(){DataTable.m_iSoundTab.playButton(),DlgManager.Me().showActivityDlg(1)},i.destruction=function(){DataTable.m_iSelfUser.DelNoti("SCCGLQ",this,this.destruction),MainIcon.getInstance().firstFlush&&(MainIcon.getInstance().firstFlush.removeSelf(),MainIcon.getInstance().firstFlush=null)},e}(Image2),RepayLightBtn=function(t){function e(){this.m_iMem=null,this.m_iNum=null,this.m_iIcon=null,e.__super.call(this),DataTable.m_i_RepayLightBtn=this,this.OnInitEnd()}__class(e,"game.ui.gmainui.RepayLightBtn",t);var i=e.prototype;return i.OnInitEnd=function(){this.create(),DataTable.m_iSelfUser.m_nLevel<10&&(DataTable.m_iSelfUser.AddNoti("m_nLevel",this,this.levH),DataTable.m_iSelfUser.AddNoti("giftpicknumchg",this,this.Refresh)),this.Refresh()},i.levH=function(){10==DataTable.m_iSelfUser.m_nLevel&&this.Refresh()},i.create=function(){this.skin=DataTable.getSkin("uiimg_闪电返还"),this.width=160,this.m_iMem=new Text,this.m_iMem.color="#ffffff",this.m_iMem.fontSize=18,this.addChild(this.m_iMem),this.m_iMem.pos(10,7),this.m_iMem.text="10级返还：",this.m_iNum=new GObj2DMutiText,this.m_iNum.LoadAni("tex_文字中_ani"),this.addChild(this.m_iNum),this.m_iNum.SetScrPos(88,45,2),this.m_iIcon=new Muti2DAniIns,this.m_iIcon.createInsFromName("uiimg_闪电返还0_ani"),this.addChild(this.m_iIcon),this.m_iIcon.scale(.6,.6),this.m_iIcon.playAni("s"),this.m_iIcon.pos(108,44),this.on("click",this,this.OnClick)},i.Refresh=function(){var t=DataTable.m_iSelfUser.GetGiftPickRec(1);this.m_iNum.SetText((-t).toString()),DataTable.m_iSelfUser.m_nLevel<10?(this.PlayAni(),Laya.timer.loop(5e3,this,this.PlayAni,null,!0),this.SetShow(1),this.m_iMem.text="10级返还："):(t>=0&&(Laya.timer.clear(this,this.PlayAni),this.SetShow(0),this.destroyChildren(),this.removeSelf(),DataTable.m_i_RepayLightBtn=null),this.m_iMem.text="可领取：",DataTable.m_iSelfUser.DelNoti("m_nLevel",this,this.levH),DataTable.m_iSelfUser.DelNoti("repaylightchg",this,this.Refresh)),GameMain._ins.m_gameUI.OnPlaceTempButton()},i.SetShow=function(t){this.visible=!!t},i.OnClick=function(){RepayLight.getIns().Init(),RepayLight.getIns().myPopup()},i.PlayAni=function(){this.m_iIcon.PlayKindEnd("s",1,1)},e}(Image2),VIPInfo=function(t){function e(t){e.__super.call(this,t),this.create()}__class(e,"game.ui.gmainui.VIPInfo",t);var i=e.prototype;return i.create=function(){this.size(77,77),this.skin="ui/icon/537ef26337b35002.png",this.on("click",this,this.onClickHandler),DataTable.m_iSelfUser.AddNoti("SCCG",this,this.destruction)},i.destruction=function(){DataTable.m_iSelfUser.DelNoti("SCCG",this,this.destruction),MainIcon.getInstance().vipI&&(MainIcon.getInstance().vipI.removeSelf(),MainIcon.getInstance().vipI=null)},i.onClickHandler=function(){MainIcon.getInstance().rightIcon.addInterface(2,1)},e}(Image2),GChgSign=function(t){function e(t){this.pnum=null,e.__super.call(this,t),this.pnum=new GUI_SmallNum,this.pnum.SetScrPos(15,50,1),this.addChild(this.pnum)}__class(e,"game.ui.rank.GChgSign",t);var i=e.prototype;return i.Set=function(t){return t?void(t>0?(this.skin=DataTable.getSkin("tex_符号_上升"),this.pnum.SetText("+"+t)):(this.skin=DataTable.getSkin("tex_符号_下降"),this.pnum.SetText(" "+t))):void(this.skin=DataTable.getSkin("tex_符号_等号"))},e}(Image2),GPlace=function(t){function e(){this.m_nNo=0,this.m_pCur=null,this.m_pStarLv=null,this.pid=null,this.m_enable=0,e.__super.call(this),this.m_pStarLv=new GDrawStars,this.m_pStarLv.SetAnchorPos(58,118),this.addChild(this.m_pStarLv),this.on("click",this,this.onSelThis)}__class(e,"game.ui.wharf.termini.GPlace",t);var i=e.prototype;return i.dispose=function(){this.pid=null,this.m_pCur&&this.m_pCur.dispose(),this.destroy()},i.onReset=function(){this.m_nNo=0,this.pid=null,this.m_pCur&&(this.m_pCur.visible=!1)},i.Init=function(t){this.onReset(),this.pid=t},i.onSelThis=function(){this.m_enable&&this.pid.OnSel(this.m_nNo)},i.OnInit=function(t,e,i,n,s,a){this.m_nNo=t,this.skin=DataTable.getSkin(i),this.m_pStarLv.SetNum(n,1,1),this.CheckCur(s),this.m_enable=a,a||(this.filters=[ColorFilter.GRAY])},i.CheckCur=function(t){this.m_pCur&&(this.m_pCur.visible=!1),t==this.m_nNo&&(this.m_pCur||(this.m_pCur=new Muti2DAniIns,this.m_pCur.createInsFromName("tex_leadarrow_ani"),this.m_pCur.PlaySpeed(1,1),this.m_pCur.pos(64,50),this.m_pCur.scaleX=this.m_pCur.scaleY=.5,this.addChild(this.m_pCur)),this.m_pCur.visible=!0)},e}(Image2),GUI_AutoChgNum=function(t){function e(t){this._m_nCur=0,this.m_nCurValue=0,this.m_fTime=1e3,void 0===t&&(t="tex_文字小_ani"),e.__super.call(this),this.LoadAni(t)}__class(e,"game.ui.comui.GUI_AutoChgNum",t);var i=e.prototype;return i.Set=function(t){this.m_nCurValue=t,this.m_nCur=this.m_nCurValue},i.Add=function(t){this.Set(this.m_nCurValue+t)},i.SetNum=function(t){this.SetText(t+"")},i.Get=function(){return this.m_nCurValue},__getset(0,i,"m_nCur",function(){return this._m_nCur},function(t){Math.floor(t)!=this._m_nCur&&(this._m_nCur=Math.floor(t),this.SetNum(t))}),e}(GObj2DMutiText),GUI_ConNumText=function(t){function e(){this.m_nNum1=0,this.m_nNum2=0,e.__super.call(this),this.LoadAni("tex_文字小_ani")}__class(e,"game.ui.comui.GUI_ConNumText",t);var i=e.prototype;return i.Set=function(t,e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=""),this.m_nNum1=t,this.m_nNum2=e,2==i)return void(1>t?this.SetText(n+t+"/"+e):this.SetText(n+t+"/"+e));var s=!1;s=0>i?!1:i?t>=e:e>t,s?this.SetText(n+t+"/"+e):this.SetText(n+""+t+"/"+e)},i.Get=function(){return[this.m_nNum1,this.m_nNum2]},e}(GObj2DMutiText),GUI_MoneyShow=function(t){function e(){this.m_nCur=0,e.__super.call(this),this.LoadAni("tex_文字大_ani")}__class(e,"game.ui.comui.GUI_MoneyShow",t);var i=e.prototype;return i.Set=function(t){this.m_nCur=t,this.SetText(t.toString()+"$")},i.Get=function(){return this.m_nCur},e}(GObj2DMutiText),GUI_SmallNum=function(t){function e(){this.m_nCur=0,this.m_sAddString="",e.__super.call(this),this.LoadAni("tex_文字中_ani")}__class(e,"game.ui.comui.GUI_SmallNum",t);var i=e.prototype;return i.Set=function(t,e,i,n){void 0===e&&(e=""),void 0===i&&(i=""),void 0===n&&(n=0),this.m_nCur=t,i.length>0&&(this.m_sAddString=i),n?this.SetText(e+""+this.m_sAddString):this.SetText(e+t+""+this.m_sAddString)},i.Get=function(){return this.m_nCur},e}(GObj2DMutiText),GUI_TextItemNum=function(t){function e(){e.__super.call(this),this.LoadAni("tex_文字小_ani")}__class(e,"game.ui.comui.GUI_TextItemNum",t);var i=e.prototype;return i.Set=function(t){1>t?this.SetText(" "+t):this.SetText(t.toString())},i.SetMoney=function(t){0>t?this.SetText(t+"$"):this.SetText(t+"$")},e}(GObj2DMutiText),GUI_TextLeftTime=function(t){function e(){e.__super.call(this),this.LoadAni("tex_文字小_ani")}__class(e,"game.ui.comui.GUI_TextLeftTime",t);var i=e.prototype;return i.Set=function(t){var e=Math.floor(t/86400);t=Math.floor(t%86400);var i=Math.floor(t/3600);t=Math.floor(t%3600);var n=Math.floor(t/60);return t=Math.floor(t%60),e>0?void(i>0?this.SetText(""+e+"D"+i+"H"):this.SetText(""+e+"D")):i>0?void(n>0?this.SetText(""+i+"H"+n+"M"):this.SetText(""+i+"H")):n>0?void(t>0?this.SetText(""+n+"M"+t+"S"):this.SetText(""+n+"M")):void this.SetText(""+t+"S")},e}(GObj2DMutiText),GUI_MoneyShow1=function(t){function e(){this.m_nCur=0,e.__super.call(this),this.LoadAni("tex_文字大_ani")}__class(e,"game.ui.comui.text.GUI_MoneyShow",t,"GUI_MoneyShow1");var i=e.prototype;return i.Set=function(t){this.m_nCur=t,this.SetText(t+"$")},i.Get=function(){return this.m_nCur},e}(GObj2DMutiText),GUI_TradeShow=function(t){function e(){this.m_nCur=0,e.__super.call(this),this.LoadAni("tex_文字大_ani")}__class(e,"game.ui.comui.text.GUI_TradeShow",t);var i=e.prototype;return i.Set=function(t){this.m_nCur=t,this.SetText(t+"T")},i.Get=function(){return this.m_nCur},e}(GObj2DMutiText),MyHeadEvalue=function(t){function e(){e.__super.call(this),this.init()}__class(e,"game.ui.comui.text.MyHeadEvalue",t);var i=e.prototype;return i.init=function(){this.LoadAni("ani_frd_评价符号"),this.SetScrPos(60,40,0),SysID.FRD_ON("frdgamechged",this,this.Refresh)},i.Set=function(t){this.SetText(EvaLevel.GetLevelStr(t))},i.Refresh=function(t,e){t==DataTable.m_iSelfUser.m_nUid&&this.Set(e[3])},e}(GObj2DMutiText),GPetItem=function(t){function e(){this.m_vTips=null,this.m_nHuntEndT=0,this.m_nTired=0,e.__super.call(this)}__class(e,"display.petHunt.GPetItem",t);var i=e.prototype;return i.SetData=function(e){if(t.prototype.SetData.call(this,e),this.m_nHuntEndT=0,!(e.length<3)){var i="",n=0,s=this.m_szPetData;s&&2==s.length?(this.m_nTired=s[0],n=s[1]):s&&3==s.length?(this.m_nTired=0,n=s[2]):(this.m_nTired=0,n=0),this.m_szPetData=[this.m_nTired,n];var a=(gSys.GetCurSecAdj(),DataTable.m_iPetTab.Get(e[1]));e[0]<0&&(i=e[5][2]);var r=0;switch(r=e[0]<0?e[3]:DataTable.m_iSelfUser.GetPetCurLucky(a[3],a[4],n),this.m_vTips=["peticon",e[1],r,this.m_nTired,i],this.m_nLucky=r,this.m_nTired){case 0:this.SetAniKind("休息2");break;case 1:this.SetAniKind("休息1");break;default:this.SetAniKind("walk2")}this.PlayAni(1)}},i.GetBkData=function(){return[this.m_nLucky,this.m_nTired,this.m_nUid,this.m_szFriInfor]},i.IsHunting=function(){return 2!=this.m_szPetData.length?0:this.m_szPetData[0]?this.m_szPetData[0]:0},i.sHuntCd=function(){return this.m_nTired},i.GetPetTipsStr=function(t,e,i,n){void 0===n&&(n="");var s,a,r,h,o,l=DataTable.m_iPetTab.Get(t);return l.length<1?(gSys.Err("没有找到宠物"),""):(a=n.length>0?n+"的"+l[1]:l[1],1==i?o="宠物饿了，需要吃点东西":2==i&&(o="正在寻宝中"),r="幸运值："+e,h=l[7]+l[6],s)},i.SetTipsDoc=function(t){},e}(GHuntPetBase),GMB_BuyBack=function(t){function e(){this.m_nMode=-1,this.m_pPlane=null,this.m_nItemID=0,this.m_nBackTime=0,this.m_nLeftTime=0,this.m_nDiscount=0,this.m_nRefreshTime=0,this.m_nLastLevel=0,this.m_checkOtherNun=0,e.__super.call(this)}__class(e,"game.build.GMB_BuyBack",t);var i=e.prototype;return i.OnInited=function(){this.m_nSelf?(DataTable.m_iSelfUser.on("m_nLevel",this,this.OnLvChg),this.OnLvChg(DataTable.m_iSelfUser.m_nLevel),GLeadManager.RegArrowInterface(this,"地图_回购直升机")):(this.m_checkOtherNun=0,Laya.timer.once(500,this,this.CheckOtherUserLv))},i.dispose=function(){this.m_pPlane&&(this.m_pPlane.dispose(),this.m_pPlane=null),game.build.DisplayItem.prototype.dispose.call(this),Laya.timer.clearAll(this),GTomHireDlg.m_pLink=null,GTomBuyDlg.m_pLink=null,GTomHarvestDlg.m_pLink=null,this.m_nSelf&&DataTable.m_iSelfUser.off("m_nLevel",this,this.OnLvChg);
},i.SetMapPos=function(t,e,i){void 0===i&&(i=!1),game.build.MapItemMove.prototype.SetMapPos.call(this,t,e,i),this.m_pPlane&&this.m_pPlane.SetMapPos(this.m_nXpos,this.m_nYpos)},i.OnLBDown=function(){return t.prototype.OnLBDown.call(this)},i.OnLBUp=function(){t.prototype.OnLBUp.call(this),this.m_pPlane&&this.m_pPlane.SetMapPos(this.m_nXpos,this.m_nYpos)},i.CheckOtherUserLv=function(){if(this.m_checkOtherNun++,!(this.m_checkOtherNun>=5)){Laya.timer.once(500,this,this.CheckOtherUserLv);var t;t=DataTable.m_iOtherUser,t&&(Laya.timer.clear(this,this.CheckOtherUserLv),t.GetLevel()<15||this.showPleane())}},i.showPleane=function(){this.m_pPlane||(this.m_pPlane=new GTomPlane(this),this.m_pPlane.Init(this)),this.m_pPlane.SetShow(1)},i.LeadPlaneCome=function(){return this.m_pPlane||(this.m_pPlane=new GTomPlane(this),this.m_pPlane.SetShow(0),this.m_pPlane.Init(this)),this.m_pPlane.m_nState=-1,this.m_pPlane.OnCome(),this.m_pPlane.SetShow(1),this.m_pPlane},i.OnLvChg=function(t){t>=15&&(this.off("m_nLevel",this,this.OnLvChg),this.CheckShow(),Laya.timer.loop(2e4,this,this.CheckShow)),this.m_nLastLevel=t},i.IsNoPlane=function(){var t=0;return this.m_pPlane&&this.m_pPlane.GetShow()?this.m_pPlane.IsActive()||(t=1):t=1,t},i.IsCanShowPlane=function(){return DataTable.m_iSelfUser.GetLevel()<15?0:this.m_nMode>2?0:1},i.OnClick=function(){if(this.m_nMouseEnable&&this.m_nSelf){if(DataTable.m_iSelfUser.GetLevel()<15)return void gSys.GameAdNoti({title:"直升机代购",content:"15级后，我能帮您购买一些物品",img:"tex_插图_直升机开放"});if(this.IsNoPlane()){var t;if(this.m_nRefreshTime>0)return t="今天的直升机代购次数已用完,刷新时间剩余：",t+=TimeCalStyle.GetLongTimeText(this.m_nRefreshTime),void gSys.GameMsg(t);if(this.m_nBackTime>0){var e=gSys.GetCurSecAdj(),i=this.m_nBackTime-e;if(i>0){if(t="飞行员还在途中,返航时间剩余：",t+=TimeCalStyle.GetLongTimeText(i)+"",t+="今天还可以为您服务：%次",t=t.replace("%",this.m_nLeftTime),DataTable.m_iSelfUser.IsCanVipFunc(90001)){var n=DataTable.m_iBuyBack.Get(),s=Math.floor(15*(1*i/(60*n[3])))+1;return void gSys.PopOkCancel(Handler.create(this,this.OnBackNow),null,null,t,"直升机信息","立刻回来","取消",!1,s)}return void gSys.GameMsg(t)}}return void gSys.GameMsg("直升机正在路上,马上回来!")}switch(this.m_nSelf&&gSys.SetSignal("opentom:self"),this.m_nMode){case 0:return GTomHireDlg.m_pLink=this,void GTomHireDlg.Me().myPopup();case 1:return GTomBuyDlg.m_pLink=this,void DlgManager.Me().showTomBuyDlg();case 2:return GTomHarvestDlg.m_pLink=this,void GTomHarvestDlg.Me().myPopup()}}},i.OnBackNow=function(){var t=this.getCentPtOnScr();DataTable.m_iSelfUser.OnForceTomBack(t.x,t.y,Handler.create(this,this.OnForceTomBack))},i.OnForceTomBack=function(){this.CheckShow()},i.SetMode=function(t){this.m_nMode=t},i.GetBuyItem=function(){return this.m_nItemID},i.CheckMode=function(){this.m_nItemID=0,this.m_nBackTime=0,this.m_nRefreshTime=0,this.m_nLeftTime=0,this.m_nDiscount=0;var t=DataTable.m_iBuyBack.Get();if(!t)return gSys.Err("回购表获取错误"),this.m_nMode;var e=gSys.GetCurSecAdj(),i=DataTable.m_iSelfUser.GetBuyBackData();this.m_nDiscount=i[5];this.m_nLeftTime=Math.floor(t[2]+DataTable.m_iSelfUser.GetVipTomFindTime()-i[3]);var n=Math.floor((i[2]-i[0])/86400);0>n&&(n=0);var s=Math.floor((e-i[0])/86400);if(s!=n&&(this.m_nLeftTime=t[2]+DataTable.m_iSelfUser.GetVipTomFindTime()),this.m_nItemID=i[4],i[4]>0)return this.SetMode(2),this.m_nMode;this.m_nBackTime=Math.floor(60*t[3]+i[2]);var a=this.m_nBackTime-e;return a>0&&this.m_nLeftTime>0?(this.SetMode(3),this.m_nMode):e-i[0]>24*i[1]*60*60?(this.SetMode(0),this.m_nMode):this.m_nLeftTime<1?(this.m_nRefreshTime=Math.floor(86400-(e-i[0])%86400),this.SetMode(4),this.m_nMode):(this.SetMode(1),this.m_nMode)},i.CheckShow=function(){var t=DataTable.m_iSelfUser.GetLevel();if(t>=15){this.m_pPlane||(this.m_pPlane=new GTomPlane(this),this.m_pPlane.SetShow(0),this.m_pPlane.Init(this));var e=this.m_nMode;if(this.CheckMode(),e==this.m_nMode)return;if(this.m_nMode<=2){if(this.m_pPlane.IsGo())return this.m_pPlane.OnCome(),void this.m_pPlane.SetShow(1);if(15==t&&DataTable.m_iSelfUser.GetLeadStep()<=53)return;(e>0||0!=this.m_nLastLevel&&this.m_nLastLevel<15)&&DataTable.m_iSelfUser.GetLeadStep()>=53&&(this.m_pPlane.m_nState=-1,this.m_pPlane.OnCome(),this.m_pPlane.SetShow(1)),this.m_pPlane.OnIdel()}else{if(!this.m_pPlane||this.m_pPlane.GetShow())return;this.m_pPlane.OnGo()}}},i.OnPlaneGo=function(t){void 0===t&&(t=0),this.m_pPlane&&this.m_pPlane.GetShow()&&this.m_pPlane.OnGo(t)},e}(GMapBuildBase),GMB_Culture=function(t){function e(){this.m_szAniObjs=[],this.m_nRandW=0,this.m_nCanGetItemNum=0,this.m_nCanFeed=0,this.m_nQuickTime=0,this.m_nMaxWaitTime=0,this.m_nResItem=0,this.m_nFeedItem=0,this.m_szLinkAni=null,this.IsMouse=!0,e.__super.call(this),DataTable.m_iSelfUser.AddNoti("OnBuildData",this,this.OnBuildData)}__class(e,"game.build.GMB_Culture",t);var i=e.prototype;return i.setvis=function(e){t.prototype.setvis.call(this,e);for(var i=0;i<this.m_szAniObjs.length;i++)this.m_szAniObjs[i].m_disObj.visible=e},i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this);for(var t=this.m_szAniObjs.length,e=0;t>e;e++)this.m_szAniObjs[e].dispose();this.m_szAniObjs.splice(0,t),Laya.timer.clearAll(this),DataTable.m_iSelfUser.DelNoti("OnBuildData",this,this.OnBuildData)},i.DeleteAllSub=function(){for(var t,e=this.m_szAniObjs.length,i=0;e>i;i++)t=this.m_szAniObjs[i],t&&(t.dispose(),this.m_szAniObjs[i]=null,t=null);this.m_szAniObjs.splice(0,e),this.m_szAniObjs.length=0},i.OnInited=function(){this.DeleteAllSub(),this.m_nRandW=32*this.m_nPutW+4,this.m_szLinkAni=DataTable.animaltab.getObj(this.GetBuildID()),null==this.m_szLinkAni&&gSys.Err("GMB_Culture id err:"+this.GetBuildID()),this.m_nResItem=DataTable.m_iItemTab.GetIdByName(this.m_szLinkAni[4]),this.m_nResItem||gSys.Err("itemname not find name="+this.m_szLinkAni[4]),this.m_nFeedItem=DataTable.m_iItemTab.GetIdByName(this.m_szLinkAni[12]),this.m_nFeedItem||gSys.Err("itemname not find name="+this.m_szLinkAni.feeditemname);for(var t=null==this.m_szMapData.data?0:this.m_szMapData.data.length,e=0;t>e;e++)this.AddAni(e,this.m_szMapData.data[e],!0);if(GCultureLoader.getIns().cultureName(this.GetAniName(),t),(4096|this.m_szMapData.forword)==this.m_szMapData.forword){var i=this.m_disObj.x,n=this.m_disObj.y;this.LoadFromName("tex_building_3_3_ani",this),this.SetAniKind("l1"),this.SetMapPos(i,n)}else if((256|this.m_szMapData.forword)==this.m_szMapData.forword){this.m_szMapData.forword=0;var s=this.GetDef();this.LoadFromName(s[4],this),DataTable.m_iSoundTab.OnPlay("建造建筑"),this.m_szMapData.forword=0,this.SetMapPos(this.m_nXpos,this.m_nYpos),this.PlayKindEndRetrun("walk"),Laya.timer.once(1800,this,this.OnBuildOk)}Laya.timer.loop(1e3,this,this.OnCheck),this.setMoveHandler(new Handler(this,this.posMove))},i.posMove=function(t,e){for(var i=this.m_szAniObjs.length;--i>-1;)this.m_szAniObjs[i].posMove(t,e)},i.GetRandPt=function(){var t=0;4==this.m_nPutW&&(t+=65);var e=0,i=0,n=0,s=0;return e=Math.floor(MathUtil1.rand(this.m_nRandW)),i=Math.floor(MathUtil1.rand(this.m_nRandW)),n=e-i+t,s=(e+i-this.m_nRandW)/2,[n,s]},i.AddAni=function(t,e,i){void 0===i&&(i=!1),this.m_szLinkAni=DataTable.animaltab.getObj(this.GetBuildID());var n;return n=new CultureAni(this),n.Init(t,this.m_szLinkAni[1],this.m_szLinkAni[6],this.m_szLinkAni[5],i),n.SetSec(e),n.CheckStatus(),this.m_szAniObjs.push(n),DataTable.m_iSelfUser.SetAllSubObj(this.GetAniName()),n},i.GetAniImgName=function(){return this.m_szLinkAni[6]},i.GetResIconName=function(){if(this.m_szLinkAni[2].length>0)return this.m_szLinkAni[2];var t=DataTable.itemtab.getObj(this.m_nResItem);return null==t?"":"res:"+t[3]},i.OnCheck=function(){var t;this.m_nCanGetItemNum;this.m_nCanGetItemNum=0,this.m_nCanFeed=0,this.m_nQuickTime=0,this.m_nMaxWaitTime=0;for(var e=0;e<this.m_szAniObjs.length;e++)t=this.m_szAniObjs[e],t.OnCheck(this.m_nCanGetItemNum,this.m_nCanFeed,this.m_nQuickTime,this.m_nMaxWaitTime)},i.OnPerSysNoti=function(){this.OnCheck(),this.m_nMaxWaitTime>10},i.OnBuildData=function(t,e){t==this.m_nMapDataNo&&(this.m_szMapData=e,this.OnInited())},i.PlayVipQuickCDAnimation=function(t,e){},i.OnBuildOk=function(){this.SetAniKind("std")},i.OnLBHold=function(t,e){return 0},i.ShowFinishEff=function(){DisplayItem.delObjModel(this);var t=new DisplayItem;t.LoadFromName("tex_building_3_3_ani"),t.SetAniKind("l2"),t.SetMapPos(this.m_disObj.x,this.m_disObj.y),Laya.timer.once(1e3*t._playTime-50,this,this.delThis,[t])},i.delThis=function(t){DisplayItem.delObjModel(t),GLeadManager.RegArrowInterface(this,"地图_"+this.GetBuildSysName())},i.addAni=function(){var t=this.m_disObj.x,e=this.m_disObj.y;this.OnAddAni(t,e,!0),this.OnAddAni(t-10,e-10,!0),this.OnAddAni(t-5,e-5,!0),this.OnAddAni(t+10,e+10,!0),this.OnAddAni(t+5,e+5,!0),this.IsMouse=!0},i.OnClick=function(){var e=this;if(t.prototype.OnClick.call(this),this.m_nSelf&&this.IsMouse){if((4096|this.m_szMapData.forword)==this.m_szMapData.forword){if(!DataTable.m_iSelfUser.OnFinishCulBuild(this.m_nMapDataNo,this.m_szMapData.itemid))return;this.ShowFinishEff();var i=1e3*this._playTime/3,n=this;return void Laya.timer.once(i,this,function(){DisplayItem.delObjModel(n),e.m_szMapData.forword=256,e.OnInited(),e.IsMouse=!1,Laya.timer.once(1e3,this,e.addAni)})}DisplayItem.m_pBk.titleText=this,this.CulturePop()}},i.CulturePop=function(){CultureIconMain.getInstance().culture=null,CultureIconMain.getInstance().culture=this;var t=CultureIconMain.getInstance().upIcon(),e=this.getCentPtOnScr(),i=306,n=350,s=0,a=0,r=900;switch(n-150>e.y&&(e.y+=n-150-e.y,a=e.y-this.getCentPtOnScr().y),t[0]){case 1:i=150,n=150,r=800;break;case 2:i=236,n=200,r=800;break;case 3:i=306,n=350,r=900}t[1]&&(r=900,n=350),i-40>e.x&&(e.x+=i-40-e.x,s=e.x-this.getCentPtOnScr().x),i=t[1]?210:66,i+=e.x,n+=e.y,i>Laya.stage.width&&(e.x-=i-Laya.stage.width,s=-(this.getCentPtOnScr().x-e.x)),n>r&&(e.y-=n-r,a=-(this.getCentPtOnScr().y-e.y)),(0!=s||0!=a)&&DisplayItem.m_pBk.setScrOffset(s,a,!0,200),DisplayTools.addTarget(CultureIconMain.getInstance(),GameMain._ins.m_gameUI.incontainer,{x:e.x,y:e.y-70,alpha:.2,scaleX:.2,scaleY:.2}),Tween.to(CultureIconMain.getInstance(),{x:e.x-185,y:e.y-225,alpha:1,scaleX:1,scaleY:1},200,Ease.circOut,null,0,!0)},i.GetCurAniNum=function(){return this.m_szMapData.data.length},i.GetFeedNum=function(){return this.m_nCanFeed},i.GetAniNum=function(t){return t!=this.m_szLinkAni[0]?0:this.m_szMapData.data?this.m_szMapData.data.length:0},i.GetMaxAniNum=function(){return this.m_szLinkAni[3]},i.GetTotalNum=function(){return DataTable.m_iSelfUser.GetAllSubObj(this.GetAniName())},i.GetAddPrice=function(){if(this.m_szMapData.data&&this.m_szMapData.data.length>=this.m_szLinkAni[3])return-1;var t=this.m_szLinkAni[9];return this.m_szLinkAni[10]>0&&(t+=Math.floor(this.GetTotalNum()/this.m_szLinkAni[10])*this.m_szLinkAni[11]),t},i.OnAddAni=function(t,e,i){var n=this;if(void 0===i&&(i=!1),!(this.m_szMapData.data&&this.m_szMapData.data.length>=this.m_szLinkAni[3])){var s=this.m_szLinkAni[9];this.m_szLinkAni[10]>0&&(s+=Math.floor(this.GetTotalNum()/this.m_szLinkAni[10]*this.m_szLinkAni[11]));DataTable.m_iSelfUser.OnBuyCulture(this.m_nMapDataNo,this.m_szMapData.itemid,[t,e],Handler.create(this,addAni=function(){DataTable.m_iSoundTab.OnPlay("购买动物");var s=(n.AddAni(n.m_szMapData.data.length-1,0,i),NaN),a=NaN;s=t,a=e,n.OnCheck()}))}},i.GetAniName=function(){return this.m_szLinkAni[1]},i.OnQuick=function(t,e){var i,n=this,s=[],a=[],r=[],h=0,o=0,l=0;for(h=0;h<this.m_szAniObjs.length;h++)i=this.m_szAniObjs[h],i.m_nLeftTime>0&&s.push([i.m_nLeftTime,h]);if(!(s.length<1)){s=ArrOp.SzSort(s);var u=new MapItem;for(u.copyfrom(this.m_szMapData),h=0;h<s.length&&(i=this.m_szAniObjs[s[h][1]],o=i.m_nLeftTime,u.data[s[h][1]]=i.m_nStartSec-o,r.push(o),a.push(s[h][1]),e);h++);var c=DataTable.m_iItemTab.Get(this.m_nFeedItem);if(null==c)return void gSys.Err("item not find id="+this.m_nFeedItem);var _=NaN,m=NaN;_=Laya.stage.mouseX,m=Laya.stage.mouseY;var d=[];d.push([2,-l]),DataTable.m_iSelfUser.OnQuickCulture(this.m_nMapDataNo,u.itemid,a,r,[_,m],t,Handler.create(this,qnQH=function(){for(h=0;h<s.length&&(i=n.m_szAniObjs[s[h][1]],i.m_nStartSec-=i.m_nLeftTime,e);h++);n.m_szMapData.copyfrom(u),n.OnCheck(),CultureIconMain.getInstance().GetAllFeedTime()[0]<1&&CountDown.getInstance().removeSelf()}))}},e}(GMapBuildBase),GMB_CWJT=function(t){function e(){this.m_pPetShow=null,this.m_pPetShowOther=null,this.m_pPetShowOtherTwo=null,this.m_pRewardShow=null,this.m_nLeftSec=0,this.m_nLastHuntT=0,this.m_szHuntPet=[],this.m_szHuntReward=[],this.m_szShowItem=[],this.m_nUnlockNo=0,this.m_nState=0,this.m_nHuntCD=0,this.m_nLastShowPet=0,e.__super.call(this)}__class(e,"game.build.GMB_CWJT",t);var i=e.prototype;return i.OnInited=function(){var t=DataTable.m_iPetHuntTab.Get(this.GetBuildID());this.m_nHuntCD=t[1],5!=this.m_szMapData.data.length?(this.m_nLastHuntT=0,this.m_szHuntPet=[],this.m_szHuntReward=[],this.m_szShowItem=[],this.m_nUnlockNo=0):(this.m_nLastHuntT=this.m_szMapData.data[0],this.m_szHuntPet=this.m_szMapData.data[1],this.m_szHuntReward=this.m_szMapData.data[2],this.m_szShowItem=this.m_szMapData.data[3],this.m_nUnlockNo=this.m_szMapData.data[4]),this.m_nSelf&&(this.OnChged(),Laya.timer.loop(1e3,this,this.OnChged,null,!0)),this.m_nSelf&&DataTable.RegInterface(this,"_PETHUNT"+this.GetBuildID()),this.setMoveHandler(new Handler(this,this.posMove))},i.posMove=function(t,e){this.m_pPetShow&&this.m_pPetShow.posMove(t,e),this.m_pPetShowOther&&this.m_pPetShowOther.posMove(t,e),this.m_pPetShowOtherTwo&&this.m_pPetShowOtherTwo.posMove(t,e)},i.IsPetOnHunting=function(t){if(this.m_szHuntPet.length<1)return 0;for(var e=0;e<this.m_szHuntPet.length;e++)if(!(this.m_szHuntPet[e][0]<0)&&this.m_szHuntPet[e][1]==t)return 1;return 0},i.GetUnlockNo=function(){return this.m_nUnlockNo},i.SetUnlockNo=function(t){this.m_nUnlockNo=t},i.GetShowItem=function(t){var e=this;return this.m_szShowItem.length>0&&this.m_szShowItem[0].length>0?(t.runWith([this.m_szShowItem.slice()]),void(t=null)):void DataTable.m_iSelfUser.RereshHuntRndItem(this.m_nMapDataNo,this.GetBuildID(),Handler.create(this,okH=function(i){e.m_szShowItem=i,t.runWith([e.m_szShowItem.slice()]),t=null}))},i.OnIdle=function(){},i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),this.m_nSelf&&DataTable.DelInterface(this,"_PETHUNT"+this.GetBuildID()),Laya.timer.clearAll(this),this.m_pPetShow&&(this.m_pPetShow.dispose(),this.m_pPetShow=null),this.m_pPetShowOther&&(this.m_pPetShowOther.dispose(),this.m_pPetShowOther=null),this.m_pPetShowOtherTwo&&(this.m_pPetShowOtherTwo.dispose(),this.m_pPetShowOtherTwo=null)},i.OnBuildData=function(t,e){t==this.m_nMapDataNo&&(this.m_szMapData.copyfrom(e),this.OnInited())},i.createPetShow=function(){var t=new GPetShow;return t.Init(this.m_szHuntPet[this.m_nLastShowPet][1]),t.setPs(this.m_disObj.x,this.m_disObj.y-115),t},i.OnChged=function(){var t=this.m_nState,e=gSys.GetCurSecAdj(),i=e-this.m_nLastHuntT;if(i>=0&&i<this.m_nHuntCD){if(this.m_nLeftSec=this.m_nHuntCD-i,this.m_szHuntPet&&this.m_szHuntPet.length>0){this.m_nState=1;if(this.m_pPetShow){if(this.m_szHuntPet.length>1&&Math.floor(10*Math.random())<2)switch(this.m_nLastShowPet++,this.m_nLastShowPet>=this.m_szHuntPet.length&&(this.m_nLastShowPet=0),this.m_nLastShowPet){case 0:this.m_pPetShowOther&&this.m_pPetShowOther.SetShow(0),this.m_pPetShowOtherTwo&&this.m_pPetShowOtherTwo.SetShow(0),this.m_pPetShow.SetShow(1);break;case 1:this.m_pPetShow.SetShow(0),this.m_pPetShowOtherTwo&&this.m_pPetShowOtherTwo.SetShow(0),this.m_pPetShowOther||(this.m_pPetShowOther=this.createPetShow()),this.m_pPetShowOther.SetShow(1);break;case 2:this.m_pPetShowOther.SetShow(0),this.m_pPetShow.SetShow(0),this.m_pPetShowOtherTwo||(this.m_pPetShowOtherTwo=this.createPetShow()),this.m_pPetShowOtherTwo.SetShow(1)}}else this.m_nLastShowPet=0,this.m_pPetShow=this.createPetShow()}return void this.CHECKSTATE(t)}return this.m_nState=0,DisplayItem.SafeDelObj(this.m_pPetShow),DisplayItem.SafeDelObj(this.m_pPetShowOther),DisplayItem.SafeDelObj(this.m_pPetShowOtherTwo),this.m_pPetShow=null,this.m_pPetShowOther=null,this.m_pPetShowOtherTwo=null,this.m_nLeftSec=0,!this.m_szHuntReward||this.m_szHuntReward.length<1?(this.m_pRewardShow&&(DisplayItem.SafeDelObj(this.m_pRewardShow),this.m_pRewardShow=null),void this.CHECKSTATE(t)):(this.m_nState=2,this.m_pRewardShow?void this.CHECKSTATE(t):(this.m_pRewardShow=new DisplayItem,this.m_pRewardShow.LoadFromName("tex_宠物寻宝宝箱_ani"),this.m_pRewardShow.SetAniKind("std"),this.m_pRewardShow.PlayAni(),this.m_disObj.addChild(this.m_pRewardShow.m_disObj),void this.CHECKSTATE(t)))},i.CHECKSTATE=function(t){t!=this.m_nState&&(this.m_nState?this.SetAniKind("work"):this.SetAniKind("std"))},i.OnQuickOver=function(t){var e=this,i=gSys.GetCurSecAdj(),n=new MapItem;n.copyfrom(this.m_szMapData);var s=NaN,a=NaN;s=Laya.stage.mouseX,a=Laya.stage.mouseY,n.data=[i-this.m_nHuntCD,this.m_szHuntPet,this.m_szHuntReward,this.m_szShowItem,this.m_nUnlockNo],DataTable.m_iSelfUser.PetHuntOverByDia(this.m_nMapDataNo,n,this.m_nLeftSec,[s,a],t,Handler.create(this,ooko=function(){e.m_szMapData.copyfrom(n),e.OnInited()}))},i.GetQuickDiamond=function(t){var e=0;return e=DataTable.m_iSelfUser.GetJszsfy(t,this.m_nHuntCD)},i.OnClick=function(){if(this.m_nSelf){if(DataTable.m_iSelfUser.GetLevel()<13)return void gSys.GameAdNoti({title:"宠物寻宝",content:"13级开放，购买宠物后可寻找宝藏",img:"_img_宠物寻宝插图"});if(!DataTable.m_iSelfUser.m_nNetLinkOk)return void gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能");if(this.m_nLeftSec>0)return void this.MidHuntPop();if(this.m_pRewardShow){var t=NaN,e=NaN;return t=Laya.stage.mouseX,e=Laya.stage.mouseY,void this.GetHuntReward(t,e)}Laya.loader.load("assets/pet.json",Handler.create(this,this.GPetHuntDlgHandler),null,"atlas"),this.m_nSelf&&gSys.SetSignal("openpethunt:self")}},i.GetHuntReward=function(t,e){var i=this,n=(gSys.GetCurSecAdj(),new MapItem);n.copyfrom(this.m_szMapData),n.data=[this.m_nLastHuntT,null,null,this.m_szShowItem,this.m_nUnlockNo];var s=null;DataTable.m_iSelfUser.GetPetHuntReward(this.m_nMapDataNo,n,null,Handler.create(this,okHhunt=function(t){s=t,s&&s.length&&(i.m_pRewardShow&&DisplayItem.SafeDelObj(i.m_pRewardShow),i.m_szMapData.copyfrom(n),i.OnInited(),OpenGift.getInstance().myPopup(),OpenGift.getInstance().onStart(s))}))},i.MidHuntPop=function(){CountDown.getInstance().sdClick=Handler.create(this,this.TimeHandler),DisplayTools.addTarget(CountDown.getInstance(),GameMain._ins.m_gameUI.container,{x:this.getScrPoint().x-130,y:this.getScrPoint().y}),CountDown.getInstance().Init(this.m_nHuntCD,this.m_nLeftSec,1,this)},i.GetNeedDiamond=function(t){return this.GetQuickDiamond(t)},i.TimeHandler=function(t,e){CountDown.getInstance().removeSelf(),this.OnQuickOver(t)},i.GPetHuntDlgHandler=function(){var t=this.getScrPoint(),e=0,i=0;t.x>570&&(e=-(t.x-570)),t.y>460&&(i=-(t.y-460)),t.x<570&&(e=570-t.x),t.y<460&&(i=460-t.y),(0!=e||0!=i)&&DisplayItem.m_pBk.setScrOffset(e,i,!0,200),GPetHuntDlg.getInstance().m_pLink=this,DisplayTools.addTarget(GPetHuntDlg.getInstance(),GameMain._ins.m_gameUI.container,{x:GameMain._ins.m_gameUI.container.width/2,y:GameMain._ins.m_gameUI.container.height/2}),GPetHuntDlg.getInstance().OnCreate()},e}(GMapBuildBase),GMB_Ornament=function(t){function e(){this.m_flyGold=null,this.m_sName=null,e.__super.call(this)}__class(e,"game.build.GMB_Ornament",t);var i=e.prototype;return i.OnInited=function(){t.prototype.OnInited.call(this);var e=this.GetDef();null!=e&&(this.m_sName=e[3],e[21].length<1||"0"==e[21])},i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),this.m_flyGold&&(this.m_flyGold.dispose(),this.m_flyGold=null)},i.GetOrEvalue=function(){var t=this.GetDef();return null==t?0:t[8]},i.ShowGold=function(){var t=this.GetDef();return null==t?0:(this.m_flyGold=new GFlyGold,this.m_flyGold.SetPos(this.m_nXpos,this.m_nYpos+1),this.m_flyGold.SetLayer(this.m_nLastLayer),this.m_flyGold.JumpOut(),1)},i.OnPutBag=function(){var t=NaN,e=NaN,i=this.getCentPtOnScr();t=i.x,e=i.y,i=null,DataTable.m_iSelfUser.PutBuildBag(this.m_nMapDataNo,this.m_szMapData,[t,e])},i.OnInfo=function(){GameMain._ins.addLoading(),Laya.loader.load([{url:Assets.trophyResUrl,type:"atlas"}],Handler.create(this,this.onLoadInfo))},i.onLoadInfo=function(){GameMain._ins.removeLoading(),Assets.checkRes(Assets.trophyResUrl)&&DlgManager.Me().showOrnamentInfo(this.GetBuildID(),this)},i.OnDrop=function(){DataTable.m_iSelfUser.ChgBuildDataEx(OPEnum.OP_JZ_SC,this.m_nMapDataNo,this.m_szMapData.itemid,null,null,null,Handler.create(this,this.OnDropNext))},i.OnDropNext=function(t){t&&(SelectItemShow.UnLinkItem(this),this.SetPut(-1,-1,0),DataTable.m_iSelfView.OnBuildPosChged(),this.DelThis())},i.OnLBDown=function(){return t.prototype.OnLBDown.call(this)},i.OnLBUp=function(){DisplayItem.m_pBk.titleText=this,t.prototype.OnLBUp.call(this),this.OnPreClick()},i.OnPreClick=function(){var t=OrnamentPop.Me();t.Init(this,this)},i.OnClick=function(){t.prototype.OnClick.call(this)},e}(GMapBuildBase),GMB_Field=function(t){function e(){this.m_nLinkItemID=0,this.m_nEndSec=0,this.m_nLeftSec=0,this.m_sName=null,this.m_szLinkField=null,this.m_pPlant=null,this.m_nCdMode=0,this.currTime=NaN,this.maxTime=NaN,e.__super.call(this),this.m_pPlant=null,e._ins=this,DataTable.m_iSelfUser.AddNoti("OnBuildData",this,this.OnBuildData)}__class(e,"game.build.GMB_Field",t);var i=e.prototype;return i.IsCropOnFarm=function(t){return this.m_nLinkItemID==t},i.setvis=function(e){t.prototype.setvis.call(this,e),this.m_pPlant&&this.m_pPlant.setvis(e)},i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),this.m_pPlant&&this.m_pPlant.dispose(),Laya.timer.clearAll(this),DataTable.m_iSelfUser.DelNoti("OnBuildData",this,this.OnBuildData)},i.posMove=function(t,e){this.m_pPlant&&this.m_pPlant.posMove(t,e)},i.OnInited=function(){if(this.m_nMirror=this.m_nMapIY%2,null==this.m_szMapData.data||2!=this.m_szMapData.data.length)this.m_nLinkItemID=0,this.m_nEndSec=0,this.m_nLeftSec=0,DisplayItem.SafeDelObj(this.m_pPlant);else if(this.m_nLinkItemID=this.m_szMapData.data[0],this.m_nEndSec=this.m_szMapData.data[1],this.m_nLinkItemID>0){null==this.m_pPlant&&(this.m_pPlant=new PlantAni);var t=DataTable.m_iItemTab.Get(this.m_nLinkItemID);if(null==t)return void gSys.Err("item not find id="+this.m_nLinkItemID);this.m_sName=t[2],this.m_szLinkField=DataTable.m_iFieldTab.Get(this.m_nLinkItemID),this.m_pPlant.Init(this.m_nLinkItemID,this.m_szMapData)}else DisplayItem.SafeDelObj(this.m_pPlant);this.OnChged(),Laya.timer.loop(1e3,this,this.OnChged,null,!0),this.setMoveHandler(new Handler(this,this.posMove)),this.AutoLayer()},i.AutoLayer=function(){this.SetLayer(this.m_disObj.y/800,!1),this.m_pPlant&&this.m_pPlant.AutoLayer()},i.OnChged=function(){if(this.m_nLinkItemID<1)return DisplayItem.SafeDelObj(this.m_pPlant),void(this.m_pPlant=null);var t=gSys.GetCurSecAdj();this.m_nLeftSec=this.m_nEndSec-t;var e=DataTable.m_iSelfUser.GetNewerQuickAgv(0),i=Math.floor(60*this.m_szLinkField[2]*e),n=i-this.m_nLeftSec;this.m_nLeftSec<=0&&(this.m_nLeftSec=0),this.m_pPlant.SetLife(n,i),this.currTime=n,this.maxTime=i,n>i&&Laya.timer.clear(this,this.OnChged)},i.OnClick=function(){var t=this.getCentPtOnScr();e._target&&e._target.parent&&(e._target.removeSelf(),e._target=null),this.m_nSelf&&(Log1.debug(1,"[GMB_Field] OnClick"),DisplayItem.m_pBk.titleText=this,this.m_nLinkItemID<1?(t=this.setOffset(590,430),e._target=IconCrop.getInstance(),DisplayTools.addTarget(e._target,GameMain._ins.m_gameUI.incontainer,{x:t.x,y:t.y,alpha:.2,scaleX:.2,scaleY:.2}),Tween.to(e._target,{x:t.x-186,y:t.y-185,alpha:1,scaleX:1,scaleY:1},200,Ease.circOut,null,0,!0)):this.m_nLeftSec>0?(t=this.setOffset(300,100,2),e._target=CountDown.getInstance(),CountDown.getInstance().Init(this.maxTime,this.maxTime-this.currTime,1,this),CountDown.getInstance().sdClick=new Handler(this,this.OnCDOver),DisplayTools.addTarget(e._target,GameMain._ins.m_gameUI.incontainer,{x:t.x-70,y:t.y+10,scaleX:DisplayTools.globalScale+.2,scaleY:DisplayTools.globalScale+.2}),CountDown.getInstance().RegLeadArrow("田_加速")):(t=this.setOffset(200,200,0),e._target=KnifeView.getInstance(),DisplayTools.addTarget(e._target,GameMain._ins.m_gameUI.incontainer,{x:t.x,y:t.y,alpha:.2,scaleX:.2,scaleY:.2}),Tween.to(e._target,{x:t.x-110,y:t.y-175,alpha:1,scaleX:1,scaleY:1},200,Ease.circOut,null,0,!0)),this.OnMouseIn())},i.setOffset=function(t,e,i){void 0===i&&(i=1),1==i&&(DataTable.m_iSelfUser.GetLevel()>=29?(t=530,e=250):DataTable.m_iSelfUser.GetLevel()>=23?(t=530,e=250):DataTable.m_iSelfUser.GetLevel()>=13?(t=530,e=250):DataTable.m_iSelfUser.GetLevel()>=9?(t=460,e=250):DataTable.m_iSelfUser.GetLevel()>=7?(t=350,e=250):DataTable.m_iSelfUser.GetLevel()>=5?(t=250,e=220):DataTable.m_iSelfUser.GetLevel()>=2?(t=250,e=130):DataTable.m_iSelfUser.GetLevel()>=1&&(t=250,e=10));var n=this.getCentPtOnScr(),s=t+n.x,a=e+n.y,r=0,h=0;return 2==i?(s-80>Laya.stage.width&&(n.x-=s-80-Laya.stage.width,r=-(this.getCentPtOnScr().x-n.x)),n.x<70&&(n.x=70,r=n.x-this.getCentPtOnScr().x),n.y>580&&(n.y=580,h=n.y-this.getCentPtOnScr().y)):1==i?(s-250>Laya.stage.width&&(n.x-=s-Laya.stage.width-250,r=-(this.getCentPtOnScr().x-n.x)),a>Laya.stage.height&&(n.y-=a-Laya.stage.height,h=-(this.getCentPtOnScr().y-n.y)),n.x<t-60&&(t>250&&(t=250),n.x<t-60&&(n.x+=t-60-n.x,r=n.x-this.getCentPtOnScr().x)),n.y<e+160&&(DataTable.m_iSelfUser.GetLevel()<23?e=10:DataTable.m_iSelfUser.GetLevel()>=23&&(e=150,DataTable.m_iSelfUser.GetLevel()<29&&(e=90)),n.y<e+160&&(n.y+=e+160-n.y,h=n.y-this.getCentPtOnScr().y))):(s-130>Laya.stage.width&&(n.x-=s-Laya.stage.width-130,r=-(this.getCentPtOnScr().x-n.x)),310>s&&(n.x+=310-s,r=n.x-this.getCentPtOnScr().x),360>a&&(n.y=170,h=n.y-this.getCentPtOnScr().y)),(0!=r||0!=h)&&DisplayItem.m_pBk.setScrOffset(r,h,!0,200),n},i.OnHarvest=function(){var t=this;if(this.m_nLinkItemID&&!(this.m_nLeftSec>0)&&null!=this.m_szMapData.data){var e=this.m_szMapData.data.slice();this.m_szMapData.data=null;var i=NaN,n=NaN;i=Math.floor(Laya.stage.mouseX),n=Math.floor(Laya.stage.mouseY);var s=DataTable.m_iSelfUser;s.GetItemByBuild(OPEnum.OP_ZW_SH,this.m_nLinkItemID,2,this.m_nMapDataNo,this.m_szMapData,0,i,n,0,Handler.create(this,function(){t.m_nLinkItemID=0,t.m_pPlant.OnCut(),t.m_pPlant=null,game.build.GMB_Field.isHide=!0,this.m_sName=" ",DisplayItem.m_pBk.titleText=this,this.m_sName="田"}),Handler.create(this,function(){t.m_szMapData.data=e}))}},i.OnPut=function(t,e){var i=this;if(!(this.m_nLinkItemID>0)){var n=DataTable.m_iFieldTab;if(this.m_szLinkField=n.Get(t),null!=this.m_szLinkField){var s=0,a=0;s=Laya.stage.mouseX,a=Laya.stage.mouseY;var r=[];r.push([t,-1]);var h=new MapItem;h.copyfrom(this.m_szMapData);var o=DataTable.m_iSelfUser,l=gSys.GetCurSecAdj()+60*this.m_szLinkField[2]*o.GetNewerQuickAgv(0);l=Math.floor(l),h.data=[t,l],o.OnPlantField(this.m_nMapDataNo,h,t,l,[s,a],Handler.create(this,okHandler=function(){i.m_sName=" ",DisplayItem.m_pBk.titleText=i,DataTable.m_iSoundTab.OnPlay("播种"),i.m_nLinkItemID=t,i.m_szMapData.data=h.data,i.OnInited(),game.build.GMB_Field.isHide=!0}))}}},i.OnQuickOver=function(t,e){var i=this;if(this.m_nLinkItemID&&!(this.m_nLeftSec<1)){var n=NaN,s=NaN;n=Laya.stage.mouseX,s=Laya.stage.mouseY;var a=[],r=[],h=[],o=[];e?a=DataTable.m_iSelfView.OnFindBulitByid(this.m_szMapData.itemid):a.push(this);var l,u,c=0;for(c=0;c<a.length;c++)u=a[c],u&&this.m_nLinkItemID==u.m_nLinkItemID?u.m_nLeftSec<1?(a=ArrOp.DelSz(c,a),c--):(l=new MapItem,l.copyfrom(u.m_szMapData),l.data=[this.m_nLinkItemID,u.m_nEndSec-u.m_nLeftSec],r.push(l),h.push(u.m_nMapDataNo),o.push(u.m_nLeftSec)):(a=ArrOp.DelSz(c,a),c--);DataTable.m_iSelfUser.OnQuickfeildCD(h.slice(),this.m_nLinkItemID,o.slice(),r.slice(),[n,s],t,Handler.create(this,okH=function(){for(c=0;c<a.length;c++)u=a[c],u.m_nEndSec-=u.m_nLeftSec,u.m_szMapData.data=[i.m_nLinkItemID,u.m_nEndSec],u.OnInited()}))}},i.SetQuickOver=function(){!this.m_nLinkItemID||this.m_nLeftSec<1||(this.m_nEndSec-=this.m_nLeftSec,this.m_szMapData.data=[this.m_nLinkItemID,this.m_nEndSec],this.OnInited())},i.OnCDOver=function(t,e){return this.m_nCdMode=t,DataTable.m_iSelfUser.m_nLevel<5?void this.OnSelectKind(0):(Quick.getInstance().myPopup(),Quick.getInstance().m_pLink=this,Quick.getInstance().OnSetTime(this.GetNeedDiamond(this.m_nLeftSec),this.GetAllNeedDia(),this.m_pPlant.m_szLinkField[3]),void CountDown.getInstance().removeSelf())},i.OnSelectKind=function(t){this.OnQuickOver(this.m_nCdMode,t),CountDown.getInstance().removeSelf()},i.GetAllNeedDia=function(){var t,e,i=0,n=0,s=0;for(e=DataTable.m_iSelfView.OnFindBulitByid(this.m_szMapData.itemid),i=0;i<e.length;i++)t=e[i],t&&this.m_nLinkItemID==t.m_nLinkItemID&&(t.m_nLeftSec<1||(n+=this.GetNeedDiamond(t.m_nLeftSec),s++));return[s,n]},i.GetNeedDiamond=function(t){var e=DataTable.m_iFieldTab.Get(this.m_nLinkItemID),i=DataTable.m_iSelfUser.GetJszsfy(t,60*e[2]*DataTable.m_iSelfUser.GetNewerQuickAgv(0));return i},i.OnBuildData=function(t,e){t==this.m_nMapDataNo&&(this.m_szMapData=e,this.OnInited())},e._ins=null,e.isHide=!1,e._target=null,e}(GMapBuildBase),GMB_Mac=function(t){function e(){this.m_nPutSec=0,this.m_nLeftSec=0,this._m_nMaxQue=0,this.m_nBuildState=-1,this._m_szWaitQueData=[],this.m_szQueBtn=[],this.m_sName=null,this.m_szQueItem=null,this.m_szMakeUp=null,this.m_pStateCheck=null,this.m_nAllWorkTime=0,this.m_nMacLevel=0,this.m_pSt=null,this.img=null,this.m_nBagFullShow=0,this.m_sLeadNeedOp="",this.m_pBuildMan=null,this.m_nbOre=0,this.m_nbNewObj=0,this.m_nNeedTime=0,this.m_nLevelCheck=0,this.m_nWorkState=0,this.m_szTempV=[],this.gbottomBtn=null,this.pp=null,this.n=-1,e.__super.call(this),DataTable.m_iSelfUser.AddNoti("OnBuildData",this,this.OnBuildData)}__class(e,"game.build.GMB_Mac",t);var i=e.prototype;return i.addManu=function(){Assets.checkRes("assets/manufacture.json")&&(this.gbottomBtn=new GBottomBtnView,this.OnInited())},i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),this.m_pBuildMan&&(this.m_pBuildMan.dispose(),this.m_pBuildMan=null),Laya.timer.clearAll(this),this.m_iSelfBk.off("LeadNeedOp",this,this.NotiLeadOp),this.m_pSt&&(this.m_pSt.dispose(),this.m_pSt=null),DataTable.m_iSelfUser.DelNoti("OnBuildData",this,this.OnBuildData)},i.OnInited=function(){if(!this.gbottomBtn)return void Laya.loader.load("assets/manufacture.json",new Handler(this,this.addManu),null,"atlas");this.m_nLevelCheck=DataTable.m_iSelfUser.GetLevel();var t;t=this.GetDef(),this.m_sName=t[3],1==t[20].length&&(this.m_nbOre="矿"==t[20][0]),(256|this.m_szMapData.forword)==this.m_szMapData.forword?this.m_nBuildState=-1:(this.m_szMapData.data&&6==this.m_szMapData.data.length?(this.m_szQueItem=this.m_szMapData.data[0],this.m_szMakeUp=this.m_szMapData.data[1],this.m_szMakeUp||(this.m_szMakeUp=[]),this.m_nPutSec=this.m_szMapData.data[2],this.m_nMaxQue=this.m_szMapData.data[3],this.m_nMacLevel=this.m_szMapData.data[4],this.m_nAllWorkTime=this.m_szMapData.data[5]):(this.m_szQueItem=[],this.m_szMakeUp=[],this.m_nPutSec=0,this.m_nLeftSec=0,this.m_nMaxQue=t[18],this.m_nMacLevel=0,this.m_nAllWorkTime=0),this.SetBuildState(2),GLeadManager.RegArrowInterface(this,"地图_"+this.GetBuildSysName(),0,50,-100),Laya.timer.loop(1e4,this,this.OnIdle,null,!0)),this.OnChged(),this.m_nCanMouse=1,this.m_nCanMouse&&Laya.timer.loop(50,this,this.OnChged,null,!0),this.m_iSelfBk.on("LeadNeedOp",this,this.NotiLeadOp),this.m_nbNewObj||(this.m_nbNewObj=1,this.OnObjReset())},i.OnObjReset=function(){return-100},i.GetNeedDiamond=function(t){var e=DataTable.m_iSelfUser.GetJszsfy(t,this.m_nNeedTime);return 1>e&&(e=1),e},i.OnWaitQueRef=function(t){if(this.m_szQueItem.length<1&&CountDown.getInstance().displayInStage&&CountDown.getInstance().removeSelf(),!ArrOp.sameArr(t,this.m_szTempV)){this.m_szTempV=t,this.m_szQueBtn=[];var e,i,n=DataTable.m_iSelfUser.GetLevel(),s=0;this.m_nNeedTime=0;for(var a=this.m_nLeftSec,r=0,h=0;h<t.length;h++)if(SysID.IsDTJZID(t[h])?(i=DataTable.m_iBuildTab.Get(t[h]),r=11):(i=DataTable.m_iItemTab.Get(t[h]),r=5),null!=i){if(s=i[r]>n?1:0,0==h){var o;if(o=DataTable.m_iMacFormulTab.Get(t[h]),null==o){gSys.Err("Mark->1-formul not find id="+t[h]);continue}this.m_nNeedTime=60*o[4]*this.GetQuickAgv()*DataTable.m_iSelfUser.GetNewerQuickAgv(2),this.m_nNeedTime=Math.floor(this.m_nNeedTime),a>0&&this.getCentPtOnScr()&&this.gbottomBtn.manus.displayInStage&&(CountDown.getInstance().Init(this.m_nNeedTime,a,1,this),
CountDown.getInstance().sdClick=new Handler(this,this.quickOver),CountDown.getInstance().displayInStage||DisplayTools.addTarget(CountDown.getInstance(),ManuFacture.getInstance(),{x:19,y:this.m_nMaxQue>=5?356:286,scaleX:DisplayTools.globalScale+.4,scaleY:DisplayTools.globalScale+.4}),CountDown.getInstance().RegLeadArrow("机器_生产加速"),CountDown.getInstance().targetName="挖掘机")}if(e=new Object,"车间"==this.GetBuildSysName()){var l=DataTable.m_iBuildTab.Get(t[h])[4];e.image=GVar.mutiAniDic[l][1].replace(".png","s.png")}else e.image=DataTable.getSkin(DataTable.m_iItemTab.Get(t[h])[3]);this.m_szQueBtn.push(e)}else gSys.Err("item not find id="+t[h]);this.gbottomBtn.manus&&this.gbottomBtn.manus.fillcurrent(this.m_szQueBtn,this.GetBuildID())}},i.Clear=function(){for(var t=0;t<this.m_szQueBtn.length;t++)this.m_szQueBtn[t].image="";this.m_szQueBtn=[],this.gbottomBtn.manus&&this.gbottomBtn.manus.fillcurrent(this.m_szQueBtn,this.GetBuildID())},i.OnBuildData=function(t,e){t==this.m_nMapDataNo&&(this.m_szMapData=e,this.OnInited())},i.PlayVipQuickCDAnimation=function(t,e){t!=this.m_nMapDataNo},i.NotiLeadOp=function(t){return t&&2==t.length&&Math.floor(t[0])==this.GetBuildID()?this.m_szMakeUp.length>0?(this.m_sLeadNeedOp="",void gSys.SetSignal(""+t[1]+":"+t[0])):void(this.m_sLeadNeedOp=""+t[1]+":"+t[0]):void 0},i.test_ZJGZSJ=function(t,e){var i=this;if(this.GetBuildID()==t){var n=(this.GetDef(),new MapItem);n.copyfrom(this.m_szMapData),n.data=[this.m_szQueItem,this.m_szMakeUp,this.m_nPutSec,this.m_nMaxQue,this.m_nMacLevel,this.m_nAllWorkTime+3600*e],DataTable.m_iSelfUser.ChgBuildDataEx(OPEnum.OP_CE_JJQ_SJ,this.m_nMapDataNo,n.itemid,n,null,null,Handler.create(this,function(){i.m_szMapData.copyfrom(n),i.OnInited()}))}},i.GetQuickAgv=function(){for(var t=0,e=0;e<this.m_nMacLevel;e++)t+=4>e?.01:.02;return 1-t},i.GetAllWorkData=function(){return[this.m_nMacLevel,this.m_nAllWorkTime]},i.IsOre=function(){return this.m_nbOre},i.GetQueMax=function(){return this.m_nMaxQue},i.OnIdle=function(){var t=this;this.m_szQueItem&&this.m_szQueItem.length<1&&(this.pp?this.pp.m_disObj.visible=!0:(this.pp=new DisplayItem,this.pp.LoadFromName("z_ani",this.pp),this.GetNamedPt("res",gSys.t1,gSys.t2),this.pp.SetPos(gSys.t1.uid-70,gSys.t2.uid+80),this.m_disObj.addChild(this.pp.m_disObj)),Laya.timer.once(5e3,this,function(){t.pp.m_disObj.visible=!1}))},i.ShowMakeTip=function(t,e){if(this.n!=e){if(this.n=e,this.m_pSt&&this.m_pSt.m_disObj.displayInStage){if(this.m_pSt.IsSameIdNum(t,e))return;this.m_pSt.IsBroken()||(this.img&&(this.img.skin=""),this.m_pSt.DelThis())}1>e||(this.m_disObj._arrLT?this.qipaoH(t,e):Laya.timer.once(30,this,this.qipaoH,[t,e]),this.m_sLeadNeedOp.length>0&&(Log1.debug(1,"lead-------------SetSignal-------生产完成品在机器上的显示---1----",this.m_sLeadNeedOp),gSys.SetSignal(this.m_sLeadNeedOp),this.m_sLeadNeedOp=""))}},i.qipaoH=function(t,e){if(!this.m_disObj._arrLT)return void Laya.timer.once(30,this,this.qipaoH,[t,e]);var i=DataTable.m_iMacFormulTab.Get(t);null==this.m_pSt&&(this.m_pSt=new BaseQipaoIcon(this,i.resitemid,e)),this.m_disObj.addChild(this.m_pSt.m_disObj),this.img||(this.img=new GItemIconBase),this.img.Init(i[6],e),DisplayTools.addTarget(this.img,this.m_pSt.m_disObj,{x:-23,y:-25})},i.GetCurMakeData=function(){var t,e,i,n=0,s=0,a=0;if(e=this.m_szQueItem.slice(),i=this.m_szMakeUp.slice(),e.length<1)return this.m_nPutSec=0,void(this.m_nLeftSec=0);s=gSys.GetCurSecAdj(),a=s-this.m_nPutSec;for(var r=0;r<e.length;r++){if(t=DataTable.m_iMacFormulTab.Get(e[r]),null==t){gSys.Err("Mark->2-formul not find id="+e[r]);break}if(n=60*t[4]*this.GetQuickAgv()*DataTable.m_iSelfUser.GetNewerQuickAgv(2),n=Math.floor(n),n>a)break;i.push(e[r]),a-=n,this.m_nPutSec+=n,e=ArrOp.DelSz(r,e),r--}e.length<1?(this.m_nPutSec=0,this.m_nLeftSec=0):this.m_nLeftSec=n-a,this.m_szQueItem=e,this.m_szMakeUp=i},i.ShowFinishEff=function(t){},i.SetBuildState=function(t){if(t!=this.m_nBuildState){var e,i=this.GetDef(),n=[i[5],i[6]];switch(e=3==n[0]&&3==n[1]?"tex_building_3_3_ani":2==n[0]&&2==n[1]?"tex_building_2_2_ani":2==n[0]&&3==n[1]?"tex_building_2_3_ani":"tex_building_3_2_ani",t){case 0:i[13]-this.m_nLeftSec>0?(this.LoadFromName(e,this),this.SetAniKind("std"),this.PlayAni(1)):(DataTable.m_iSoundTab.OnPlay("建造建筑"),this.LoadFromName(e,this),this.SetAniKind("std"),this.PlayKindEndRetrun("l0")),this.m_pBuildMan||(this.m_pBuildMan=new GBuildingMan(null,this));break;case 1:DisplayItem.SafeDelObj(this.m_pBuildMan),this.LoadFromName(e,this),this.SetAniKind("l1"),this.PlayAni(1);break;case 2:DisplayItem.SafeDelObj(this.m_pBuildMan),(0==this.m_nBuildState||1==this.m_nBuildState)&&(this.ShowFinishEff(e),this.m_nMoveKind=i[10],this.LoadFromName(i[4],this)),this.SetAniKind("std"),this.PlayAni(1)}this.SetIPos(this.m_szMapData.x,this.m_szMapData.y),this.m_nBuildState=t}},i.OnChged=function(){if(this.m_nBuildState<2){var t=this.m_szMapData.data,e=gSys.GetCurSecAdj();this.m_nLeftSec=t-e;var i=this.m_nLeftSec<=0?1:0;this.SetBuildState(i),this.m_nBuildState&&Laya.timer.clear(this,this.OnChged)}else{if(!this.m_szMakeUp||!this.m_szQueItem)return;if(this.m_szMakeUp.length<1&&this.m_szQueItem.length<1)return this.m_szWaitQueData=[],this.ShowMakeTip(0,0),void Laya.timer.clear(this,this.OnChged);this.GetCurMakeData(),this.m_szMakeUp.length>0?this.ShowMakeTip(this.m_szMakeUp[0],this.m_szMakeUp.length):this.ShowMakeTip(0,0),this.m_szQueItem.length<1&&Laya.timer.clear(this,this.OnChged),this.m_nSelf?this.m_szWaitQueData.length<1&&this.m_szQueItem.length>0?this.SetWorkState(1):this.m_szWaitQueData.length>0&&this.m_szQueItem.length<1&&this.SetWorkState(0):this.SetWorkState(1),this.m_szWaitQueData=this.m_szQueItem}},i.SetWorkState=function(t){this.m_nWorkState!=t&&(this.m_nWorkState=t,t?this.SetAniKind("work"):this.SetAniKind("std"))},i.GetPopItem=function(){for(var t,e=[],i=0,n=DataTable.m_iSelfUser.GetLevel(),s=DataTable.m_iMacFormulTab.GetBulidFormul(this.GetBuildID()),a=0;a<s.length;a++)if(!SysID.IsHDCPID(s[a][0])||DataTable.m_iSelfUser.IsActivDay("2015-11-26 00:00:00","2015-11-29 23:59:59")){if(SysID.IsDTJZID(s[a][0])){if(t=DataTable.m_iBuildTab.Get(s[a][0]),null==t)continue;i=t[11]}else{if(t=DataTable.m_iItemTab.Get(s[a][0]),null==t)continue;i=t[5]}var r=DataTable.m_iSelfUser.GetHaveItemNum(s[a][0]);if((s[a][9]||SysID.IsDTZSJZID(s[a][0]))&&(e.push([s[a][0],r,i>n?i:0]),i>n))break}return e},i.OnPerSysNoti=function(){if(this.m_szQueItem&&!(this.m_szQueItem.length<1)){var t=0;if(1==this.m_szQueItem.length)t=this.m_nLeftSec;else{for(var e=1;e<this.m_szQueItem.length;e++){var i;i=DataTable.m_iMacFormulTab.Get(this.m_szQueItem[e]),null!=i?t+=Math.floor(60*i[4]*this.GetQuickAgv()*DataTable.m_iSelfUser.GetNewerQuickAgv(2)):gSys.Err("Mark->3-formul not find id="+this.m_szQueItem[e])}t+=this.m_nLeftSec}}},i.OnClick=function(){function e(){MainIcon.getInstance().upperIcon.addInterface(2,1)}if(t.prototype.OnClick.call(this),CountDown.getInstance().removeSelf(),GMapBuildBase.currentBuildId=this.GetBuildID(),this.m_nSelf)switch(this.m_nBuildState){case 0:OnBuildPop.getInstance().gmbMac=this,OnBuildPop.getInstance().OnCreate();break;case 1:this.GetFinishBuild();break;case 2:if(this.m_szMakeUp.length>0&&this.m_szMakeUp[0]>=5e3){this.OnHarvest();break}var i=DataTable.m_iSelfUser.IsBagFull(1);if(this.m_szMakeUp.length<1||i)if(i)if(!this.m_nBagFullShow&&this.m_szMakeUp.length>0){var n={title:"提示",content:"货仓满了!",lbtn:"升级货仓",rbtn:"取消"};MessageBox.show(1,n,Handler.create(this,e)),this.m_nBagFullShow=1}else this.m_nBagFullShow=0,this.OnSwitchWnd();else this.m_nBagFullShow=0,this.OnSwitchWnd();else this.OnHarvest()}},i.OnSwitchWnd=function(){this.m_szTempV=[],this.gbottomBtn.Gmb=this,this.gbottomBtn.show()},i.GetFinishBuild=function(){var t=this,e=new MapItem;e.copyfrom(this.m_szMapData),e.forword=0,e.data=null;var i=this.GetDef(),n=0;n=Math.pow(i[13]/60,1/1.09),1>n&&(n=1);var s=NaN,a=NaN;s=Laya.stage.mouseX,a=Laya.stage.mouseY;var r=[];r.push([4,n]),DataTable.m_iSelfUser.OnFinishMacBuild(this.m_nMapDataNo,e.itemid,[s,a],Handler.create(this,getF=function(){t.m_szMapData.copyfrom(e),GLeadManager.RegArrowInterface(t,"地图_"+t.GetBuildSysName()),t.OnInited()}))},i.OnPut=function(t){var e=this;if(this.m_nSelf){if(this.GetCurMakeData(),this.m_szMakeUp.length>0&&((!DataTable.m_iSelfUser.IsBagFull(1)||t>=5e3)&&this.OnHarvest(),5e3>t&&this.m_szMakeUp.length>=30))return void gSys.GameMsg("您囤积的货物太多了，无法继续生产，清理下背包吧！");if(this.m_szQueItem.length>=this.m_nMaxQue)return void gSys.GameMsg("加工队列已满");var i=DataTable.m_iMacFormulTab.Get(t);if(null==i)return void gSys.Err("MacFormulTab get err;id="+t);if(i[2]!=this.GetBuildID())return void gSys.Err("checkmac err;id="+i.buildid+";"+this.GetBuildID());for(var n=[],s=i[5],a=0;s&&a<s.length;a++){if(s[a][1]<0)return void gSys.Err("formul err: id="+t);n.push([s[a][0],-1*s[a][1]])}var r=new MapItem;r.copyfrom(this.m_szMapData);var h=NaN,o=NaN;h=Laya.stage.mouseX,o=Laya.stage.mouseY,DataTable.m_iSelfUser.OnAddMacMake(this.m_nMapDataNo,r.itemid,t,[h,o],Handler.create(this,okmacH=function(){var i=e.m_szQueItem.slice(),n=e.m_nPutSec;i.length<1&&(n=gSys.GetCurSecAdj()),i.push(t),r.data=[i,e.m_szMakeUp,n,e.m_nMaxQue,e.m_nMacLevel,e.m_nAllWorkTime],e.m_szQueItem=i.slice(),e.m_nPutSec=n,e.m_szMapData.data=r.data.slice(),e.OnInited(),e.m_nLevelCheck=DataTable.m_iSelfUser.GetLevel()}))}},i.OnHarvest=function(){var t=this;if(this.m_nSelf){if(this.m_nLevelCheck<20&&this.m_nLevelCheck!=DataTable.m_iSelfUser.GetLevel())return this.m_nLevelCheck=DataTable.m_iSelfUser.GetLevel(),this.m_szMapData=DataTable.m_iSelfUser.GetMapItemData(this.m_nMapDataNo,this.m_szMapData.itemid),void this.OnInited();if(this.m_nLevelCheck=DataTable.m_iSelfUser.GetLevel(),this.GetCurMakeData(),this.m_szMakeUp.length<1)return void gSys.Err("No res to get");var e;if(e=DataTable.m_iMacFormulTab.Get(this.m_szMakeUp[0]),null==e)return void gSys.Err("Mark->4-formul not find id="+this.m_szMakeUp[0]);var i=this.m_szMakeUp[0],n=new MapItem;n.copyfrom(this.m_szMapData);var s=Math.floor(this.m_nAllWorkTime+60*e[4]*this.GetQuickAgv()*DataTable.m_iSelfUser.GetNewerQuickAgv(2)),a=this.m_szMakeUp.slice(),r=this.m_nPutSec,h=Math.floor(60*e[4]*this.GetQuickAgv()*DataTable.m_iSelfUser.GetNewerQuickAgv(2));h=Math.floor(h),a=ArrOp.DelSz(0,a),n.data=[this.m_szQueItem,a,r,this.m_nMaxQue,this.m_nMacLevel,Math.floor(s)];var o=NaN,l=NaN;o=Laya.stage.mouseX,l=Laya.stage.mouseY,DataTable.m_iSelfUser.GetItemByBuild(OPEnum.OP_CP_SH,i,e[7],this.m_nMapDataNo,n,1,o,l,0,Handler.create(this,function(){DataTable.m_iSoundTab.OnPlay("收获物品0"+Math.floor(2*Math.random()+1)),t.m_szMapData.copyfrom(n),t.OnInited()}))}},i.OnAddQueMax=function(){var t=this;if(this.m_nSelf){if(this.m_nMaxQue>=9)return void gSys.GameMsg("加工队列数已达上限");var e=NaN,i=NaN;e=Laya.stage.mouseX,i=Laya.stage.mouseY;var n=new MapItem;n.copyfrom(this.m_szMapData),n.data=[this.m_szQueItem,this.m_szMakeUp,this.m_nPutSec,this.m_nMaxQue+1,this.m_nMacLevel,this.m_nAllWorkTime],DataTable.m_iSelfUser.AddMacQueMax(this.m_nMapDataNo,n,[e,i],Handler.create(this,okHandler=function(){t.m_nMaxQue++,t.m_szMapData.data=[t.m_szQueItem,t.m_szMakeUp,t.m_nPutSec,t.m_nMaxQue,t.m_nMacLevel,t.m_nAllWorkTime],t.OnInited()}))}},i.quickOver=function(t,e){this.OnQuickOver(0,t)},i.OnQuickOver=function(t,e,i){var n=this;if(this.m_nSelf){if(t&&this.m_szQueItem.length<1)return void GFlyItemIcon.FlyText("请先选择一个矿进行生产","#ff0000");if(this.GetCurMakeData(),!(this.m_nLeftSec<1)){var s=NaN,a=NaN;s=Laya.stage.mouseX,a=Laya.stage.mouseY;var r=new MapItem;r.copyfrom(this.m_szMapData),r.data=[this.m_szQueItem,this.m_szMakeUp,this.m_nPutSec-this.m_nLeftSec,this.m_nMaxQue,this.m_nMacLevel,this.m_nAllWorkTime],DataTable.m_iSelfUser.OnQuickMacMake(this.m_nMapDataNo,this.m_szMapData.itemid,Math.floor(this.m_nLeftSec),[s,a],t,e,Handler.create(this,function(){n.m_nPutSec-=n.m_nLeftSec,n.m_szMapData.data=[n.m_szQueItem,n.m_szMakeUp,n.m_nPutSec,n.m_nMaxQue,n.m_nMacLevel,n.m_nAllWorkTime],n.OnInited(),n.m_szQueItem.length<1&&CountDown.getInstance().removeSelf(),i&&i.run()}))}}},i.EndBuildByDia=function(t,e){var i=this;if(this.m_nSelf){var n=new MapItem;n.copyfrom(this.m_szMapData),n.data=null;var s=NaN,a=NaN;s=Laya.stage.mouseX,a=Laya.stage.mouseY,DataTable.m_iSelfUser.OnQuickMacBuild(this.m_nMapDataNo,n.itemid,t,[s,a],e,Handler.create(this,qkm=function(){i.m_szMapData.copyfrom(n),i.OnInited(),CountDown.getInstance().removeSelf()}))}},i.OnMacLvUp=function(t,e,i,n){var s=this;if(!this.m_nSelf)return void n.run();var a=new MapItem;a.copyfrom(this.m_szMapData),a.data=[this.m_szQueItem,this.m_szMakeUp,this.m_nPutSec,this.m_nMaxQue,this.m_nMacLevel+1,this.m_nAllWorkTime],DataTable.m_iSelfUser.OnMacAddLv(this.m_nMapDataNo,a,t,e,Handler.create(this,oks=function(){s.m_szMapData.data=[s.m_szQueItem,s.m_szMakeUp,s.m_nPutSec,s.m_nMaxQue,s.m_nMacLevel+1,s.m_nAllWorkTime],s.OnInited(),i.run()}),Handler.create(this,nos=function(){n.run()}))},i.OnPutBag=function(){var t;if(!DataTable.m_iSelfUser.IsCanVipFunc(40002))return t="机器仓库为VIP4专属，是否查看VIP会员功能？",void gSys.PopOkCancel(Handler.create(this,this.LookInfo),null,null,t,"机器仓库提示","查看","以后再说");t="%收入仓库后将停止生产，当您从仓库再取出%后，%会接着工作，您确认要收回吗？";var e=this.GetDef();t=t.replace(/%/g,e[3]),gSys.PopOkCancel(Handler.create(this,this.onPackUpOk),null,null,t,"收起提示","确认收起","以后再说")},i.onPackUpOk=function(){var t=NaN,e=NaN;t=Laya.stage.mouseX,e=Laya.stage.mouseY,DataTable.m_iSelfUser.PutBuildBag(this.m_nMapDataNo,this.m_szMapData,[t,e],1)},i.LookInfo=function(){},__getset(0,i,"m_nMaxQue",function(){return this._m_nMaxQue},function(t){this._m_nMaxQue=t,this.gbottomBtn.manus&&this.gbottomBtn.manus.fillNumber(this._m_nMaxQue,this.GetBuildID())}),__getset(0,i,"m_szWaitQueData",function(){return this._m_szWaitQueData},function(t){this._m_szWaitQueData=t,this.OnWaitQueRef(this._m_szWaitQueData.slice())}),e}(GMapBuildBase),GMB_Pet=function(t){function e(){this.m_nHuntState=0,this.m_nFeedNum=0,this.m_pPet=null,e.__super.call(this)}__class(e,"game.build.GMB_Pet",t);var i=e.prototype;return i.init=function(){DataTable.FindInterface(this.m_nMapDataNo)||DataTable.RegInterface(this,this.m_nMapDataNo)},i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),this.m_pPet.dispose(),DataTable.DelInterface(this,this.m_nMapDataNo),e.petArr.length=0},i.OnInited=function(){e.petArr.push(this),this.init(),2!=this.m_szMapData.data.length?3==this.m_szMapData.data.length?(this.m_nHuntState=0,this.m_nFeedNum=this.m_szMapData.data[2]):(this.m_nHuntState=0,this.m_nFeedNum=0):(this.m_nHuntState=this.m_szMapData.data[0],this.m_nFeedNum=this.m_szMapData.data[1]);var t=(this.GetDef(),DataTable.m_iPetTab.Get(this.GetBuildID()));return null==t?void gSys.Err("宠物 表缺:"+this.GetBuildID()):(this.m_pPet||(this.m_pPet=new GPetAni,this.m_pPet.Init(this,t)),this.m_pPet.CheckStatus(1),void(this.m_nSelf&&DataTable.RegInterface(this,"_PET"+this.GetBuildID())))},i.Test_SZCW_WYCS=function(t,e){if(!(t>0&&this.GetBuildID()!=t)){var i=new MapItem;i.copyfrom(this.m_szMapData),i.data=[this.m_nHuntState,e];var n=NaN,s=NaN;n=Laya.stage.mouseX,s=Laya.stage.mouseY,DataTable.m_iSelfUser.test_SetPetLucky(this.m_nMapDataNo,i)&&(this.m_szMapData.copyfrom(i),this.OnInited())}},i.GetFeedItem=function(){if(!this.m_pPet.IsHungry())return 0;var t=this.m_pPet.GetDef();if(t[5].length<1)return 0;var e=(this.m_nFeedNum+1)%t[5].length;return t[5][e][0]},i.NotiPetDataChg=function(t){if(t.length<1){if(0!=this.m_nMapDataNo)return}else{for(var e=-1,i=0;i<t.length;i++)t[i]==this.m_nMapDataNo&&(e=i);if(0>e)return}var n=DataTable.m_iSelfUser.GetPetBuildData(this.m_nMapDataNo,this.m_szMapData.itemid);n.data.length<1||(this.m_szMapData.copyfrom(n),this.OnInited())},i.OnFeed=function(){var t=this,e=new MapItem;e.copyfrom(this.m_szMapData),e.data=[0,this.m_nFeedNum+1];var i=NaN,n=NaN;i=Laya.stage.mouseX,n=Laya.stage.mouseY,DataTable.m_iSelfUser.OnFeedPet(this.m_nMapDataNo,e,[i,n],Handler.create(this,OKHandler=function(){t.m_szMapData.copyfrom(e),t.OnInited()}))},i.OnBack=function(){this.m_pPet.OnBack()},i.OnClick=function(){if(t.prototype.OnClick.call(this),this.m_nSelf){var e=this.getCentPtOnScr(),i=0,n=0;this.getCentPtOnScr().x+100>Laya.stage.width&&(i=-(this.getCentPtOnScr().x+100-Laya.stage.width),e.x+=i),this.getCentPtOnScr().x<200&&(i=200-this.getCentPtOnScr().x,e.x+=i),this.getCentPtOnScr().y<208&&(n=208,n-=this.getCentPtOnScr().y,e.y+=n),this.getCentPtOnScr().y>570&&(n=570,n=-(this.getCentPtOnScr().y-570),e.y+=n),(0!=i||0!=n)&&DisplayItem.m_pBk.setScrOffset(i,n,!0,200),PetIconMain.getInstance().m_pLink=this,PetIconMain.getInstance().CheckAll(),DisplayTools.addTarget(PetIconMain.getInstance(),GameMain._ins.m_gameUI.incontainer,{x:e.x,y:e.y-70,alpha:.2,scaleX:.2,scaleY:.2}),Tween.to(PetIconMain.getInstance(),{x:e.x-185,y:e.y-225,alpha:1,scaleX:1,scaleY:1},200,Ease.circOut,null,0,!0)}},e.findPet=function(t){for(var i=0;i<e.petArr.length;i++)if(e.petArr[i].m_szMapData.itemid==t)return e.petArr[i];return null},e.petArr=[],e}(GMapBuildBase),GMB_Totem=function(t){function e(){this.m_nPutTime=0,this._m_nLeftSec=0,this.m_nShowGold=-1,this.m_nEvalue=0,this.m_nLastAniLv=0,this.m_pGold=null,e.__super.call(this)}__class(e,"game.build.GMB_Totem",t);var i=e.prototype;return i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),Laya.timer.clearAll(this)},i.OnInited=function(){t.prototype.OnInited.call(this),this.m_nCanMouse=1,this.m_nMouseEnable=1,this.SetAniKind("l1"),this.PlayAni(),this.m_nSelf&&(this.OnData(),Laya.timer.clear(this,this.CheckOrnMoney),Laya.timer.loop(1e4,this,this.CheckOrnMoney))},i.OnData=function(){if(this.m_nSelf){var t=DataTable.m_iSelfUser.GetEvalueteSz();this.m_nPutTime=t[2],Laya.timer.clear(this,this.OnChged),Laya.timer.loop(5e3,this,this.OnChged),this.OnChged()}},i.OnChged=function(){if(DataTable.m_iSelfUser.GetLevel()>=10){var t=DataTable.m_iSelfUser.GetEvalue(),e=0,i=gSys.GetCurSecAdj(),n=Math.floor(i/86400),s=Math.floor(this.m_nPutTime/86400);n!=s?(this.m_nLeftSec=0,e=1):this.m_nLeftSec=Math.floor(86400-i%86400);var a=0;if(a=1,e==this.m_nShowGold&&a==this.m_nLastAniLv)return;if(this.m_nLastAniLv=a,this.m_nShowGold=e,this.m_nEvalue!=t&&(this.m_nEvalue=t,t>=580&&(this.SetAniKind("l"+a),this.PlayAni())),e){var r=NaN,h=NaN;r=0,h=-130,e=Math.max(1,Math.floor(t/10)),this.m_pGold=new DisplayItem,this.m_pGold.LoadFromName("tex_奖章_ani",this),this.m_disObj.addChild(this.m_pGold.m_disObj),this.m_pGold.m_disObj.pos(r,h),1>=e?this.m_pGold.SetAniKind("待机1"):5>=e?this.m_pGold.SetAniKind("待机2"):this.m_pGold.SetAniKind("待机3"),this.m_pGold.PlayAni()}}},i.OnGetEvaGold=function(t){var e=0,i=0;DataTable.m_iSelfUser.OnGetEvaGold(e,i-140,Handler.create(this,this.OnGetEvaGoldNext,[t]))},i.OnGetEvaGoldNext=function(t,e){return 1>e?void(t&&t.runWith(0)):(this.OnData(),void(t&&t.runWith(e)))},i.OnClick=function(){if(DataTable.m_iSelfUser.GetLevel()<10)return void gSys.GameAdNoti({title:"奖杯",content:"10级后每天可以领取勋章",img:"tex_插图_奖杯开放"});if(this.m_nSelf){if(this.m_nShowGold)return void this.OnGetEvaGold(Handler.create(this,this.OnGetEvaGoldBack,[]))}else;},i.OnGetEvaGoldBack=function(t){return t>0?void(1>=t?this.m_pGold.PlayKindEnd("弹出1",1,0,Handler.create(DisplayItem,DisplayItem.SafeDelObj,[this.m_pGold])):5>=t?this.m_pGold.PlayKindEnd("弹出2",1,0,Handler.create(DisplayItem,DisplayItem.SafeDelObj,[this.m_pGold])):this.m_pGold.PlayKindEnd("弹出3",1,0,Handler.create(DisplayItem,DisplayItem.SafeDelObj,[this.m_pGold]))):void 0},i.CheckOrnMoney=function(){var t=DataTable.m_iSelfView.GetCanOrGoldEva();if(!(t&&t.length>0||DataTable.m_iSelfUser.GetLevel()<6)){var e=DataTable.m_iSelfUser.GetOrEvaGoldData(),i=e[0]+Math.floor(e[1]/2),n=gSys.GetCurSecAdj();i>n||DataTable.m_iSelfView.ShowMapBuildTopEva()}},__getset(0,i,"m_nLeftSec",function(){return this._m_nLeftSec},function(t){this._m_nLeftSec=t,this.event("m_nLeftSec",t)}),e}(GMapBuildBase),GMB_Tree=function(t){function e(){this.m_nPutSec=0,this.m_nLeftSec=0,this.m_nPickTime=0,this.m_nExState=0,this.m_nShowState=0,this.m_nPlayChg=0,this.m_nOpState=-1,this.m_nDelMode=0,this.m_nbDel=0,this.m_pSt=null,this.m_szHelper=null,this.m_sName=null,this.m_nPreCutState=0,this.m_nHelpMode=-1,e.__super.call(this),DataTable.m_iSelfUser.AddNoti("OnBuildData",this,this.OnBuildData)}__class(e,"game.build.GMB_Tree",t);var i=e.prototype;return i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),Laya.timer.clearAll(this),DataTable.m_iSelfUser.DelNoti("OnBuildData",this,this.OnBuildData),this.m_pSt&&(this.m_pSt.dispose(),this.m_pSt=null)},i.OnInited=function(){var t=this.GetDef();if(this.StopAni(),this.m_sName=t[3],this.m_nDelMode=t[9],this.m_pSt&&this.m_pSt.m_disObj&&DisplayItem.SafeDelObj(this.m_pSt),4!=this.m_szMapData.data.length){var e=DataTable.m_iTreeTab.Get(this.GetBuildID());null==e&&gSys.Err("Tree not find id="+this.GetBuildID()),this.m_nPutSec=gSys.GetCurSecAdj(),this.m_nPickTime=0,this.m_nExState=e[2],this.m_szHelper=null,this.m_nSelf&&this.test_ResetTreeData()}else this.m_nPutSec=this.m_szMapData.data[0],this.m_nPickTime=this.m_szMapData.data[1],this.m_nExState=this.m_szMapData.data[2],this.m_szHelper=this.m_szMapData.data[3];this.m_nSelf&&(this.m_nCanMouse=1,this.m_nMouseEnable=1,Laya.timer.loop(1e3,this,this.OnChged)),this.SetLayer(Math.random()/3),this.OnChged()},i.OnBuildData=function(t,e){t==this.m_nMapDataNo&&(this.m_szMapData.copyfrom(e),this.OnInited())},i.test_ResetTreeData=function(){DataTable.m_iSelfUser.test_ResetTreeData(this.m_nMapDataNo,this.GetBuildID(),this.m_nPutSec)&&(this.m_szMapData.data=[this.m_nPutSec,this.m_nPickTime,this.m_nExState,this.m_szHelper])},i.OnClick=function(){if(DisplayItem.m_pBk.titleText=this,this.m_nSelf)switch(this.m_nOpState){case 0:TreePop.getInstance().gmb=this,TreePop.getInstance().CheckAll();break;case 1:TreePop.getInstance().gmb=this,TreePop.getInstance().CheckAll();break;case 2:TreePop.getInstance().gmb=this,TreePop.getInstance().CheckAll();break;case 3:this.AllSendThanks();break;case 4:TreePop.getInstance().gmb=this,TreePop.getInstance().CheckAll();break;case 5:}else 2==this.m_nOpState&&this.OnHelpUser()},i.OnCut=function(){var t=this;this.m_nPreCutState=this.m_nOpState,this.m_nOpState=5,this.m_nCanMouse=0;var e=NaN,i=NaN;e=Laya.stage.mouseX,i=Laya.stage.mouseY,DataTable.m_iSelfUser.DelTreeData(this.m_nMapDataNo,this.m_szMapData,e,i,Handler.create(this,noH=function(){t.m_nOpState=t.m_nPreCutState,t.m_nCanMouse=1}))},i.canPosMove=function(){return this.m_szMapData&&this.m_szMapData.itemid>=4510?!0:!1},i.DelBuild=function(){this.m_nbDel||(this.m_nbDel=1,4==this.m_nDelMode&&DataTable.m_iSoundTab.OnPlay("爆破"),Laya.timer.clear(this,this.OnChged),0==this.m_nPreCutState||4==this.m_nPreCutState?this.SetAniKind("cut1"):this.SetAniKind("cut2"),this.PlayAni(1),this.m_pSt&&this.m_pSt.m_disObj&&DisplayItem.SafeDelObj(this.m_pSt),Laya.timer.once(1e3*this.m_disObj.getCurKindTime()*.6,this,this.OnAniEnd))},i.OnAniEnd=function(){DisplayItem.SafeDelObj(this)},i.GetCurCoolLen=function(){var t=0;if(this.m_nPickTime>=4)t=this.m_nPickTime>13?1728e3:this.m_nPickTime<9?432e3:864e3;else{var e=DataTable.m_iTreeTab.Get(this.GetBuildID());if(null==e)return 1728e3;t=60*e[3]}return t},i.SetState=function(t,e){if(void 0===e&&(e=0),this.m_nOpState!=t||this.m_nShowState!=e){switch(this.m_nOpState=t,this.m_nShowState=e,t){case 0:this.SetAniKind("l"+Math.floor(e/10)+"_"+e%10,gSys.staticTree),Laya.timer.clear(this,this.OnChged);break;case 4:this.m_nPickTime?this.m_nPickTime>=3?this.SetAniKind("l3_1"):this.SetAniKind("l"+(this.m_nPickTime+1)+"_"+e):(this.SetAniKind("l"+e+"_"+e),"l"+e+"_"+e=="l0_0"&&this.SetAniKind("l2_"+e));break;case 1:this.SetAniKind("droop");break;case 2:this.SetAniKind("droop"),this.ShowHelp(0);break;case 3:this.m_nSelf?this.SetAniKind("droop"):this.SetAniKind("l3_1"),this.ShowHelp(1)}this.m_nPlayChg&&(this.m_nPlayChg=0,this.PlayKindEndRetrun("chg"))}},i.OnChged=function(){if(5!=this.m_nOpState)if(this.m_nPutSec>0){var t=DataTable.m_iTreeTab.Get(this.GetBuildID());if(null==t)return void gSys.Err("tree not find id="+this.GetBuildID());var e=gSys.GetCurSecAdj()-this.m_nPutSec,i=this.GetCurCoolLen();this.m_nLeftSec=i-e;var n=0;if(this.m_nLeftSec<=0){var s=0,a=0;this.m_nExState>0?this.m_nPickTime>=3?(s=3,a=2):(s=this.m_nPickTime+1,a=2):this.m_nPickTime>=3?(s=3,a=1):(s=3,a=0),n=10*s+a,this.SetState(0,n)}else n=i/2>e?0:1,this.SetState(4,n)}else switch(this.m_nLeftSec=0,this.m_nExState){case 0:this.SetState(1);break;case 1:this.SetState(2);break;case 2:this.SetState(3)}},i.ShowHelp=function(t){if(t!=this.m_nHelpMode){switch(this.m_nHelpMode=t,t){case 1:if(!this.m_nSelf)return;break;case 2:if(this.m_nExState<1)return}this.m_pSt&&this.m_pSt.m_disObj&&DisplayItem.SafeDelObj(this.m_pSt),1==t?(this.m_pSt=new GFrd_HeadNick(this.m_szHelper),this.m_disObj.addChild(this.m_pSt),this.m_pSt.pos(-60,-60)):(this.m_pSt=new TreeHelp,this.m_pSt.HelpIcon(t,this.m_szHelper,this.m_nSelf),this.m_disObj.addChild(this.m_pSt.m_disObj))}},i.GetPickNum=function(){return 0!=this.m_nOpState?0:this.m_nExState},i.OnHarvest=function(t,e){var i=this;void 0===t&&(t=0);var n=DataTable.m_iTreeTab.Get(this.GetBuildID());if(null==n)return void gSys.Err("tree not find id="+n);if(!(0!=t&&n[1]!=t||this.GetPickNum()<1)){var s=gSys.GetCurSecAdj(),a=new MapItem;a.copyfrom(this.m_szMapData),a.data=[this.m_nPutSec,this.m_nPickTime,this.m_nExState,this.m_szHelper],a.data[3]||(a.data[3]="NIL"),this.m_nExState>1?a.data[2]-=1:this.m_nPickTime<2?(a.data[0]=s,a.data[1]+=1,a.data[2]=a.data[1]+n[2],a.data[3]="NIL"):(a.data[0]=0,a.data[1]+=1,a.data[2]=0,a.data[3]="NIL");var r=NaN,h=NaN;r=Laya.stage.mouseX,h=Laya.stage.mouseY,DataTable.m_iSelfUser.GetItemByBuild(OPEnum.OP_GS_SH,n[1],1,this.m_nMapDataNo,a,3,r,h,s,Handler.create(this,function(){i.m_szMapData.copyfrom(a),i.OnInited();var t=i.GetDef();return 5==t[9]&&i.GetPickNum()<1?void i.OnCut():void e.run()}))}},i.AskHelp=function(){if(1!=this.m_nOpState)return 0;var t=new MapItem;return t.copyfrom(this.m_szMapData),t.data=[this.m_nPutSec,this.m_nPickTime,this.m_nExState,this.m_szHelper],t.data[2]=1,t.data[3]||(t.data[3]="NIL"),DataTable.m_iSelfUser.OnTreeAskHelp(this.m_nMapDataNo,t.itemid)?(this.m_szMapData.copyfrom(t),this.OnInited(),1):0},i.AllSendThanks=function(){this.SendThanks()},i.SendThanks=function(){var t=this;if(3==this.m_nOpState){var e=new MapItem;e.copyfrom(this.m_szMapData);var i=DataTable.m_iTreeTab.Get(this.GetBuildID());if(null==i)return void gSys.Err("tree not find id="+this.GetBuildID());e.data=[this.m_nPutSec,this.m_nPickTime,this.m_nExState,this.m_szHelper],e.data[0]=gSys.GetCurSecAdj(),e.data[2]=Math.min(this.m_nPickTime-1,2)+i[2],e.data[3]="NIL",DataTable.m_iSelfUser.OnTreeThanks(this.m_nMapDataNo,e.itemid)&&(Tween.to(this.m_pSt,{y:this.m_pSt.y-60,alpha:0},300,null,Handler.create(this,del=function(){t.m_pSt.removeSelf(),t.m_pSt=null})),this.m_nPlayChg=1,this.m_szMapData.copyfrom(e),this.OnInited())}},i.OnBroad=function(){console.log("广播")},i.QuickRipe=function(t,e){var i=this;if(!(this.m_nLeftSec<1)){var n=new MapItem;n.copyfrom(this.m_szMapData),n.data=[this.m_nPutSec,this.m_nPickTime,this.m_nExState,this.m_szHelper];var s=DataTable.m_iTreeTab.Get(this.GetBuildID());if(null==s)return void gSys.Err("tree not find id="+this.GetBuildID());n.data[0]-=this.m_nLeftSec,n.data[3]||(n.data[3]="NIL");var a=NaN,r=NaN;a=Laya.stage.mouseX,r=Laya.stage.mouseY,DataTable.m_iSelfUser.OnQuickTree(this.m_nMapDataNo,n.itemid,this.m_nLeftSec,[a,r],e,Handler.create(this,function(){i.m_szMapData.copyfrom(n),i.OnInited()}))}},i.OnHelpUser=function(){var t=this;DataTable.m_itree=this;var e=NaN,i=NaN;e=Laya.stage.mouseX,i=Laya.stage.mouseY,this.m_nPlayChg=1,DataTable.m_iSelfUser.OnHelpOtherTree(this.m_nMapDataNo,this.m_szMapData,[e,i,0,"",2],Handler.create(this,okTree=function(){DataTable.m_iSelfUser.OnGetOtherEvaGold(e,i);var t=["有你的帮助我的生活变得轻松有趣！非常感谢！","没有你的帮助，我将寸步难行！多谢我的朋友！","你的帮助真是雪中送炭啊！","合作愉快，你真是帮了我的大忙！","多谢了！下次有事儿记得过来找我！","大恩不言谢，咱们的情谊没齿不忘！"];GFlyItemIcon.FlyText(t[Math.floor(Math.random()*t.length)])}),Handler.create(this,noTree=function(){t.m_nPlayChg=0}))},e}(GMapBuildBase),PlantAni=function(t){function e(t){this.m_nLinkItemID=0,this.m_nEndSec=0,this.m_nLeftSec=0,this.m_sName=null,this.m_pSt=null,this.m_szLinkField=null,this.m_fPer=NaN,e.__super.call(this),this.m_nCanMouse=3}__class(e,"game.build.PlantAni",t);var i=e.prototype;return i.dispose=function(){game.build.DisplayItem.prototype.dispose.call(this),Laya.timer.clearAll(this)},i.Init=function(t,e){this.m_szLinkField=DataTable.m_iFieldTab.Get(t),this.LoadFromName(this.m_szLinkField[3]),this.PlayAni(1,3*Math.random()),this.SetIPos(e.x,e.y),this.linkGameObj(null)},i.AutoLayer=function(){this.SetLayer(this.m_disObj.y+.95,!1)},i.posMove=function(t,e){this.m_disObj.x+=t,this.m_disObj.y+=e,this.AutoLayer()},i.SetLife=function(t,e){return t>=e?(this.SetAniKind("l1",gSys.staticPlant),void(this.m_disObj&&this.m_disObj.pCacheKindAni("cut"))):(this.StopAni(),void(this.m_fPer>0?this.SetAniKind("std",gSys.staticPlant):t>=e/2?this.SetAniKind("l0",gSys.staticPlant):this.SetAniKind("std",gSys.staticPlant)))},i.DelThis=function(){DisplayItem.SafeDelObj(this)},i.IsKind=function(t){return this.m_disObj&&this.m_disObj.isKindName(t)?!0:!1},i.OnCut=function(){DataTable.m_iSoundTab.OnPlay("收获作物0"+Math.ceil(2*Math.random())),this.IsKind("cut")?(this.SetAniKind("cut"),Laya.timer.once(1e3,this,this.DelThis)):this.DelThis()},e}(GMapBuildBase),GBagOrnament=function(t){function e(){e.__super.call(this)}__class(e,"game.ui.ornament.totem.GBagOrnament",t);var i=e.prototype;return i.onBuy=function(){DataTable.m_iSelfUser.PutBagMapOut(this.m_nBuildID,this.IX,this.IY),this.closeView()},e}(GMapBuyItem),GSpeBagOrnament=function(t){function e(){this.m_nBuiltPos=0,this.m_nSpeBuiltKind=0,e.__super.call(this)}__class(e,"game.ui.ornament.totem.GSpeBagOrnament",t);var i=e.prototype;return i.InitMe=function(t,e,i,n,s){this.m_nBuiltPos=n,this.m_nSpeBuiltKind=s,this.Init(t,e,i)},i.onBuy=function(){DataTable.m_iSelfUser.PutSpeBagMapOut(this.m_nBuiltPos,this.m_nSpeBuiltKind,this.IX,this.IY),this.closeView()},e}(GMapBuyItem),GMC_Customer=function(t){function e(){e.__super.call(this),this.m_nDlgMode=3}__class(e,"game.ui.lead.npc.GMC_Customer",t);var i=e.prototype;return i.ShowTalk=function(){GNpcDlg.Me().pid=this,GNpcDlg.Me().myPopup(!0)},i.GetStayPos=function(t,e){var i=this.m_pLink.GetCustomerMoveNo(),n=(i+this.GetNpcNo())%3+2;this.m_iSelfBk.GetNamedPos("npc_0"+n,t,e)||(t.uid=2631,e.uid=1217)},i.NeedFindPath=function(){return this.m_nNeedFindPath},i.FindNewWay=function(){t.prototype.FindNewWay.call(this)},i.VisitorsPathfinding=function(){var t,e;this.GetStayPos(t,e),(t.uid!=this.m_nXpos||e.uid!=this.m_nYpos)&&(this.m_szPath=this.pid.FindWalkPath(this.m_nXpos,this.m_nYpos,t,e),this.m_szPath.length>1&&(this.m_fSpeed=80,Laya.timer.once(10,this,this.OnMoveEnd)))},i.OnHarvest=function(){GNpcDlg.Me().pid=this,GNpcDlg.Me().myPopup(!0)},i.OnClick=function(){this.m_nNeedFindPath=0,this.StopMove(),this.SetAniKind(this.zhanli),this.PlayKindEndRetrun(this.xiuxi+(3*Math.random()+1)),this.OnHarvest()},e}(CMC_NpcBase),GMC_LeadNpc=function(t){function e(){this.m_nShowDlg=0,this.m_nTalkQue=0,e.__super.call(this)}__class(e,"game.ui.lead.npc.GMC_LeadNpc",t);var i=e.prototype;return i.OnInited=function(t,e,i,n,s,a,r){this.m_pTalkBubble&&this.m_pTalkBubble.SafeDelObj(),DisplayItem.SafeDelObj(this.m_pTalkBubble);var h=this.m_nNpcID;this.m_nNpcID=i,this.m_pLink=t,this.m_szNpcData=s,this.m_nDlgMode=a,this.m_nCanMouse=e?1:0;var o;if(o=DataTable.m_iNpcTab.Get(i),!o||o.length<1)return gSys.Err("缺少NPC数据：npcid="+i),void this.DelThis();var l=0,u=0;if(this.LoadFromName(o[4]),n.indexOf("地图_")<0&&n.indexOf("地图_")<0);else{var c=GLeadManager.GetMapBuildObj(n);if(c){var _=c.GetDef();switch(_[5]){case 1:case 2:l=c.m_nXpos+150;break;case 3:l=c.m_nXpos+210;break;default:l=c.m_nXpos+380}u=c.m_nYpos}else l=2751,u=1420}this.SetPos(l,u),r&&200>i&&!h?this.OnMove(0):(this.SetState(2),this.m_pTalkBubble||(Log1.debug(1,"m_pTalkBubble=new GTalkBubble()"),this.m_pTalkBubble=new GTalkBubble,this.m_pTalkBubble.UnShowTalk()),this.m_nCanMouse=1)},i.SetState=function(e){t.prototype.SetState.call(this,e),this.m_nTalkQue&&2==e&&(this.m_nTalkQue=0,this.ShowTalk());
},i.WaitPopTalk=function(){gSys.WaitSignal(Handler.create(this,this.onWaitPopTalk),"closenpcdlg:"+this.m_nNpcID)},i.onWaitPopTalk=function(){Log1.debug(1,"GMC_LeadNpc[WaitPopTalk]---------WaitSignal--","closenpcdlg:"+this.m_nNpcID),this.OnClick()},i.ShowTalk=function(t){if(void 0===t&&(t=1),Log1.debug(10,"[GMC_LeadNpc]ShowTalk ",t),this.GetNpcID()<200&&2!=this.m_nState)return void(this.m_nTalkQue=1);if(this.m_nShowDlg=t,!t)return void(this.m_pTalkBubble&&this.m_pTalkBubble.UnShowTalk());switch(this.m_pTalkBubble&&this.m_pTalkBubble.SafeDelObj(),DisplayItem.SafeDelObj(this.m_pTalkBubble),this.m_nDlgMode){case 0:case 6:this.m_pTalkBubble?this.m_pTalkBubble.SetData(this.m_szNpcData.toString(),this):this.m_pTalkBubble=new GTalkBubble(this.m_szNpcData.toString(),this),this.m_pTalkBubble.ShowNotice();break;case 1:GNpcDlg.Me().pid=this;break;case 2:this.m_nShowDlg=0,GNpcDlg.Me().pid=this;break;case 4:GHomeNickDlg.Me().Index=0}},i.OnT=function(){DisplayItem.SafeDelObj(this.m_pBubble),this.IsAniKind(this.zhanli)&&(12*Math.random()>1||!this.m_szRelax||this.m_szRelax.length<1||this.PlayKindEndRetrun(this.m_szRelax[Math.random()*this.m_szRelax.length]))},i.OnClick=function(){var t=0;t=this.m_nDlgMode&&2!=this.m_nDlgMode&&6!=this.m_nDlgMode?1:1-this.m_nShowDlg,2==this.m_nDlgMode&&(this.m_nDlgMode=0),this.ShowTalk(t),this.StopMove();var e=[this.xiuxi3,this.xiuxi4];this.SetAniKind(e[Math.random()*e.length]),this.PlayAni(this.m_fPlaySpeed),Laya.timer.clear(this,this.OnMoveEnd),Laya.timer.loop(5e3,this,this.OnMoveEnd),gSys.SetSignal("clicknpc:"+this.GetNpcID())},i.OnMoveEnd=function(){return this.m_pTalkBubble&&!this.m_pTalkBubble.m_pBkHelp.visible?(Laya.timer.clear(this,this.OnMoveEnd),void Laya.timer.loop(5e3,this,this.OnMoveEnd)):void 0},e}(CMC_NpcBase),Dialog=function(t){function e(){this.popupCenter=!0,this.closeHandler=null,this._dragArea=null,e.__super.call(this)}var i;__class(e,"laya.ui.Dialog",t);var n=e.prototype;return n.initialize=function(){var t=this.getChildByName("drag");t&&(this.dragArea=t.x+","+t.y+","+t.width+","+t.height,t.removeSelf()),this.on("click",this,this.onClick)},n.onClick=function(t){var e=t.target;if(e)switch(e.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(e.name)}},n.show=function(t){void 0===t&&(t=!1),e.manager.show(this,t)},n.popup=function(t){void 0===t&&(t=!1),e.manager.popup(this,t)},n.close=function(t){e.manager.close(this),this.closeHandler&&this.closeHandler.runWith(t)},n.onMouseDown=function(t){var e=this.getMousePoint();this._dragArea.contains(e.x,e.y)?this.startDrag():this.stopDrag()},__getset(0,n,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(t){if(t){var e=UIUtils.fillArray([0,0,0,0],t,Number);this._dragArea=new Rectangle(e[0],e[1],e[2],e[3]),this.on("mousedown",this,this.onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this.onMouseDown)}),__getset(0,n,"isPopup",function(){return null!=this.parent}),__getset(1,e,"manager",function(){return e._manager||(e._manager=new i)},laya.ui.View._$SET_manager),e.closeAll=function(){e.manager.closeAll()},e.CLOSE="close",e.CANCEL="cancel",e.SURE="sure",e.NO="no",e.OK="ok",e.YES="yes",e._manager=null,e.__init$=function(){i=function(t){function e(){this._stage=null,e.__super.call(this),this.dialogLayer=new Sprite,this.modalLayer=new Sprite,this.mouseEnabled=this.dialogLayer.mouseEnabled=this.modalLayer.mouseEnabled=!0,this.addChild(this.dialogLayer),this._stage=Laya.stage,this._stage.addChild(this),this._stage.on("resize",this,this.onResize),this.onResize(null)}__class(e,"",t);var i=e.prototype;return i.onResize=function(t){var e=this.modalLayer.width=this._stage.width,i=this.modalLayer.height=this._stage.height;this.modalLayer.graphics.clear(),this.modalLayer.graphics.alpha(UIConfig.popupBgAlpha),this.modalLayer.graphics.drawRect(0,0,e,i,UIConfig.popupBgColor),this.modalLayer.graphics.alpha(1);for(var n=this.dialogLayer.numChildren-1;n>-1;n--){var s=this.dialogLayer.getChildAt(n);s.popupCenter&&(s.x=.5*(e-s.width),s.y=.5*(i-s.height))}for(n=this.modalLayer.numChildren-1;n>-1;n--)s=this.modalLayer.getChildAt(n),s.isPopup&&s.popupCenter&&(s.x=.5*(e-s.width),s.y=.5*(i-s.height))},i.show=function(t,e){void 0===e&&(e=!1),e&&this.dialogLayer.removeChildren(),t.popupCenter&&(t.x=.5*(this._stage.width-t.width),t.y=.5*(this._stage.height-t.height)),this.dialogLayer.addChild(t),this.event("open")},i.popup=function(t,e){void 0===e&&(e=!1),e&&this.modalLayer.removeChildren(),t.popupCenter&&(t.x=.5*(this._stage.width-t.width),t.y=.5*(this._stage.height-t.height)),this.modalLayer.addChild(t),this.addChild(this.modalLayer),this.event("open")},i.close=function(t){t.removeSelf(),0===this.modalLayer.numChildren?this.modalLayer.removeSelf():this.showFirst(),this.event("close")},i.showFirst=function(){for(var t=0,e=this.modalLayer.numChildren-1;e>=t;t++)this.modalLayer.getChildAt(t).visible=t===e},i.closeAll=function(){this.dialogLayer.removeChildren(),this.modalLayer.removeChildren(),this.modalLayer.removeSelf(),this.event("close")},e}(Sprite)},e}(View),HBox=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.HBox",t);var i=e.prototype;return i.sortItem=function(t){t&&t.sort(function(t,e){return t.x>e.x?1:-1})},i.changeItems=function(){for(var t=[],e=0,i=0,n=this.numChildren;n>i;i++){var s=this.getChildAt(i);s&&(t.push(s),e=Math.max(e,s.displayHeight))}this.sortItem(t);var a,r=0;for(a in t)s=t[a],s.x=r,r+=s.displayWidth+this._space,"top"==this._align?s.y=0:"middle"==this._align?s.y=.5*(e-s.displayHeight):"bottom"==this._align&&(s.y=e-s.displayHeight);this.changeSize()},e.NONE="none",e.TOP="top",e.MIDDLE="middle",e.BOTTOM="bottom",e}(LayoutBox),RadioGroup=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.RadioGroup",t);var i=e.prototype;return i.createItem=function(t,e){return new Radio(t,e)},e}(Group),Tab=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.Tab",t);var i=e.prototype;return i.createItem=function(t,e){return new Button(t,e)},e}(Group),VBox=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.VBox",t);var i=e.prototype;return i.changeItems=function(){for(var t=[],e=0,i=0,n=this.numChildren;n>i;i++){var s=this.getChildAt(i);s&&(t.push(s),e=Math.max(e,s.displayWidth))}this.sortItem(t);var a,r=0;for(a in t)s=t[a],s.y=r,r+=s.displayHeight+this._space,"left"==this._align?s.x=0:"center"==this._align?s.x=.5*(e-s.displayWidth):"right"==this._align&&(s.x=e-s.displayWidth);this.changeSize()},e.NONE="none",e.LEFT="left",e.CENTER="center",e.RIGHT="right",e}(LayoutBox),TextArea=function(t){function e(t){void 0===t&&(t=""),e.__super.call(this,t),this.multiline=!0}return __class(e,"laya.ui.TextArea",t),e}(TextInput),Activity_fristChargeUI=function(t){function e(){this.img_bj=null,this.box_qiqiu=null,this.image_qiqiu=null,this.item0=null,this.btn_go_charge=null,this.item1=null,this.item2=null,this.item3=null,this.item4=null,this.item5=null,this.item6=null,this.item7=null,this.item8=null,this.item9=null,this.item10=null,this.item11=null,this.item12=null,e.__super.call(this)}__class(e,"game.ui.activity_list.Activity_fristChargeUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",width:"575",height:"472",skin:"activity/new_bj.png",sizeGrid:"20,20,20,20",x:"0.5"}},{type:"Image",props:{height:"415",y:"16","var":"img_bj",width:"541",x:"17.5"}},{type:"Box",props:{height:"115",y:"25","var":"box_qiqiu",width:"115",x:"29"}},{type:"Image",props:{y:"115","var":"image_qiqiu",skin:"activity/dddddd_06.png",x:"45"}},{type:"Box",props:{y:"146","var":"item0",width:"78",height:"64",name:"item0",x:"56"}},{type:"Button",props:{y:"400","var":"btn_go_charge",labelSize:"34",width:"332",stateNum:"1",labelBold:"true",height:"85",labelColors:"#ffffff,#ffffff,#ffffff",skin:"reuse/btn_5270caa6b30a1013.png",label:"去充值",x:"122"}},{type:"Box",props:{y:"146","var":"item1",width:"78",height:"64",name:"item1",x:"150"}},{type:"Box",props:{y:"146","var":"item2",width:"78",height:"64",name:"item2",x:"245"}},{type:"Box",props:{y:"146","var":"item3",width:"78",height:"64",name:"item3",x:"340"}},{type:"Box",props:{y:"146","var":"item4",width:"78",height:"64",name:"item4",x:"434"}},{type:"Box",props:{y:"230","var":"item5",width:"78",height:"64",name:"item5",x:"56"}},{type:"Box",props:{y:"230","var":"item6",width:"78",height:"64",name:"item6",x:"150"}},{type:"Box",props:{y:"230","var":"item7",width:"78",height:"64",name:"item7",x:"244"}},{type:"Box",props:{y:"230","var":"item8",width:"78",height:"64",name:"item8",x:"340"}},{type:"Box",props:{y:"316","var":"item9",width:"78",height:"64",name:"item9",x:"56"}},{type:"Box",props:{y:"316","var":"item10",width:"78",height:"64",name:"item10",x:"150"}},{type:"Box",props:{y:"316","var":"item11",width:"78",height:"64",name:"item11",x:"244"}},{type:"Box",props:{y:"316","var":"item12",width:"78",height:"64",name:"item12",x:"340"}}],props:{height:"472",width:"575"}}}]),e}(View),Activity_OnlineLbUI=function(t){function e(){this.getrewardBtn=null,this.timeBox=null,this.leaveTime=null,e.__super.call(this)}__class(e,"game.ui.activity_list.Activity_OnlineLbUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",sizeGrid:"20,20,20,20",height:"470",skin:"activity/bg_cjth.png",width:"559",x:"0"}},{type:"Button",props:{y:"374","var":"getrewardBtn",labelSize:"34",width:"293",stateNum:"1",height:"65",labelColors:"#ffffff,#ffffff,#ffffff",labelStroke:"1",skin:"reuse/btn_common.png",label:"领取礼包",x:"137"}},{type:"Box",child:[{type:"Image",props:{skin:"activity/53850137f96d3009.png"}},{type:"Label",props:{y:"7",strokeColor:"#000000",text:"剩余时间:",width:"100",align:"left",height:"35",color:"#ffffff",fontSize:"20",bold:"true",stroke:"1",x:"59"}},{type:"Label",props:{strokeColor:"#000000",text:"55秒",color:"#ffffff",fontSize:"20",x:"59",y:"35","var":"leaveTime",width:"100",align:"left",height:"35",bold:"true",stroke:"1"}}],props:{y:"381","var":"timeBox",x:"215"}}]}}]),e}(View),Activity_zmhdUI=function(t){function e(){this.time=null,this.content=null,this.goBtn=null,e.__super.call(this)}__class(e,"game.ui.activity_list.Activity_zmhdUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"3",sizeGrid:"60,60,60,60",height:"470",skin:"activity/img_content_bg.png",width:"560",x:"2"}},{type:"Image",props:{rotation:"-20",y:"-1",skin:"activity/img_content_icon.png",x:"-5"}},{type:"Label",props:{y:"88","var":"time",text:"★活动时间：长期有效",width:"467",height:"32",color:"#663333",fontSize:"20",bold:"true",x:"49"}},{type:"Label",props:{y:"145",text:"★活动内容：",width:"122",height:"32",color:"#663333",fontSize:"20",bold:"true",x:"49"}},{type:"Label",props:{y:"146",wordWrap:"true","var":"content",text:"每天可以签到一次，连续次数越多，奖励越好。成为VIP可获得更多签到奖品。",width:"285",height:"131",color:"#663333",fontSize:"20",bold:"true",leading:"8",x:"171"}},{type:"Button",props:{y:"357","var":"goBtn",labelSize:"34",width:"206",stateNum:"1",height:"70",labelColors:"#ffffff,#ffffff,#ffffff",labelStroke:"1",skin:"reuse/btn_common.png",label:"前往",x:"182"}},{type:"Image",props:{y:"362",skin:"activity/lalala.png",x:"435"}}],props:{height:"470",width:"560"}}}]),e}(View),GetRewardAniUI=function(t){function e(){this.sureBtn=null,e.__super.call(this)}__class(e,"game.ui.activity_list.GetRewardAniUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Button",props:{y:"105","var":"sureBtn",labelSize:"34",width:"206",stateNum:"1",height:"70",labelColors:"#ffffff,#ffffff,#ffffff",labelStroke:"1",skin:"reuse/btn_common.png",label:"确定",x:"2"}}]}}]),e}(View),chatsUI=function(t){function e(){this.chatList=null,this.roomBtn=null,this.box_wordChat=null,this.clip_wordChat=null,this.phizSprite=null,this.count=null,this.lengque=null,this.boxContainer=null,this.hornBtn=null,this.btn_qd=null,this.bq=null,this.btn_buy=null,this.lab_buy=null,this.inputText=null,e.__super.call(this)}__class(e,"game.ui.chat.chatsUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.kit.CountDown"]=CountDown,View.viewClassMap["display.mainIcon.chat .PhizView"]=PhizView,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"List",child:[{type:"Box",child:[{type:"Image",props:{y:"38",mouseThrough:"false",width:"82",mouseEnabled:"false",height:"33",name:"chatBg",skin:"chat/textBg.png",sizeGrid:"5,5,5,5",x:"115"}},{type:"Label",props:{y:"38",wordWrap:"true",cacheAsBitmap:"false",text:"你们好",width:"352",align:"left",height:"60",name:"content",asPassword:"false",fontSize:"25",x:"120"}},{type:"Image",props:{y:"47",name:"paojiao",skin:"chat/sanjiao.png",x:"103"}},{type:"Label",props:{name:"daming",text:"小明的藏宝箱    五分钟",width:"245",height:"25",y:"10",color:"#999999",fontSize:"18",x:"115"}},{type:"Box",child:[{type:"Image",props:{skin:"reuse/jia.png"}}],props:{name:"container",y:"38",x:"120"}},{type:"Box",child:[{type:"Image",props:{scaleX:"0.6",y:"10",scaleY:"0.6",width:"128",mouseEnabled:"false",mouseThrough:"true",height:"128",name:"touxiang",skin:"reuse/tou0.jpg",x:"13"}},{type:"Image",props:{scaleX:"0.8",height:"128",scaleY:"0.8",skin:"reuse/528077F963A9A01F.png",width:"128"}}],props:{name:"headBox",y:"1",x:"0"}}],props:{y:"0",mouseThrough:"true",width:"723",mouseEnabled:"true",height:"100",name:"render",x:"0"}}],props:{height:"391",y:"57",repeatX:"1",vScrollBarSkin:"reuse/vscroll.png",width:"733",mouseEnabled:"true",spaceX:"0",mouseThrough:"true","var":"chatList",spaceY:"5",x:"-2"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"20",label:"频道11-沙敦府",labelBold:"true",x:"0",scaleX:"1",y:"-0.5",scaleY:"1","var":"roomBtn",stateNum:"1",height:"59",labelStroke:"1",labelStrokeColor:"#000000",skin:"reuse/btn_Qd.png",width:"204"}},{type:"Box",child:[{type:"Label",props:{y:"9",text:"世界聊天开关：",align:"right",color:"#000000",fontSize:"25",bold:"true",x:"0"}},{type:"Clip",props:{y:"6","var":"clip_wordChat",width:"40",clipX:"2",height:"40",index:"1",skin:"reuse/clip_duigou.png",x:"176"}}],props:{height:"52",y:"6","var":"box_wordChat",width:"238",x:"466"}},{type:"phiz",props:{runtime:"display.mainIcon.chat .PhizView",y:"439","var":"phizSprite",x:"0"}},{type:"countDown",props:{y:"465",runtime:"display.kit.CountDown","var":"count",x:"432"}},{type:"Label",props:{y:"472","var":"lengque",text:"世界聊天冷却时间",width:"289",align:"left",height:"45",color:"#ffffff",fontSize:"30",x:"79"}},{type:"Box",child:[{type:"Image",props:{scaleX:"1",y:"3",scaleY:"1","var":"hornBtn",width:"64",height:"64"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"25",label:"发送",labelBold:"true",x:"594",scaleX:"1",scaleY:"1","var":"btn_qd",stateNum:"1",height:"70",labelStroke:"1",labelStrokeColor:"#000000",skin:"reuse/btn_Qd.png",width:"116.33333333333331"}},{type:"Clip",props:{scaleX:"1",visible:"false",y:"11",scaleY:"1","var":"bq",index:"0",mouseEnabled:"true",autoPlay:"false",clipY:"2",skin:"chat/clip_pang.png",x:"529"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"25",label:"购买",labelBold:"true",x:"544",scaleX:"1",scaleY:"1","var":"btn_buy",stateNum:"1",height:"70",labelStroke:"1",labelStrokeColor:"#000000",skin:"reuse/btn_Qd.png",width:"140.33333333333331"}},{type:"Label",props:{y:"21","var":"lab_buy",text:"目前使用喇叭的玩家较多,请稍后再来试试吧!",width:"436",align:"center",height:"33",color:"#ffffff",fontSize:"20",bold:"true",x:"92"}}],props:{mouseEnabled:"true",y:"457",mouseThrough:"false","var":"boxContainer",x:"14"}},{type:"TextInput",props:{y:"463",wordWrap:"true","var":"inputText",width:"521",sizeGrid:"5,5,5,5",align:"left",height:"57",fontSize:"30",skin:"chat/png1.png",padding:"5,1,1,5",x:"80"}}],props:{mouseThrough:"true",name:"daming"}}}]),e}(View),GChatRoomSelUI=function(t){function e(){this.list_=null,e.__super.call(this)}__class(e,"game.ui.chat.GChatRoomSelUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",width:"500",height:"500",skin:"chat/52A67C1FB27C6003.png",sizeGrid:"30,30,30,30",x:"0"}},{type:"List",child:[{type:"Box",child:[{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",y:"0",labelSize:"20",sizeGrid:"5,30,5,30",stateNum:"1",labelBold:"true",x:"0",name:"btn",labelStrokeColor:"#000000",label:"频道7-双子真  (流畅)",height:"60",labelStroke:"2",skin:"reuse/btn_5270caa6b30a1013.png",width:"230"}},{type:"Image",props:{height:"36",name:"duigou",y:"12",width:"42",x:"160"}}],props:{y:"-1",name:"render",x:"0"}}],props:{spaceX:"0",y:"19",repeatX:"2",vScrollBarSkin:"reuse/vscroll.png","var":"list_",width:"463",height:"460",spaceY:"0",repeatY:"10",x:"19"}}],props:{height:"500",width:"500"}}}]),e}(View),HornMsgUI=function(t){function e(){this.img_bj=null,this.panel_=null,this.label_=null,e.__super.call(this)}__class(e,"game.ui.chat.HornMsgUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0","var":"img_bj",width:"700",height:"64",sizeGrid:"20,20,20,20",x:"0"}},{type:"Panel",child:[{type:"Label",props:{y:"14","var":"label_",text:"asjdflkaj拉动加速拉升",align:"left",color:"#ffffff",fontSize:"30",bold:"true",x:"115"}}],props:{height:"64",y:"0","var":"panel_",width:"700",x:"0"}}],props:{height:"64",width:"700"}}}]),e}(View),mailContentItemUI=function(t){function e(){this.contentLabel=null,this.butoom=null,this.timeLabel=null,this.nameLabel=null,this.getrewardBtn=null,e.__super.call(this)}__class(e,"game.ui.chat.mailContentItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Label",props:{y:"10",wordWrap:"true","var":"contentLabel",text:"亲爱的庄主大人：\\n      最近地产大亨在浮空岛发现一处含有大量砖石原石的矿脉，先发起众筹，庄主们可以进行投资了呦！高达5~7倍的返利等着你。\\n\r  [砖石矿投资一本万利]\\n活动时间：永久\\n活动内容：投资理财，一本万利！\\n投资￥18浮空岛初级理财（可累计获得1070砖！）；\\n投资￥98浮空岛高级理财（可累计获得7028砖！）；\\n另注：两者理财产品只可选其一购买",width:"727",align:"left",fontSize:"30",bold:"true",leading:"5",x:"0"}},{type:"Image",props:{height:"1",y:"0",skin:"chat/528077d263a9a009.png",width:"700",x:"10"}},{type:"Box",child:[{type:"Label",props:{y:"63","var":"timeLabel",text:"3天前",width:"110",align:"right",height:"30",fontSize:"18",x:"13"}},{type:"Label",props:{y:"93","var":"nameLabel",text:"梦幻家园",width:"110",align:"right",height:"30",fontSize:"18",x:"13"}},{type:"Button",props:{labelColors:"#ffffff","var":"getrewardBtn",labelSize:"25",stateNum:"1",width:"134",labelBold:"true",height:"61",labelStroke:"#000000",skin:"reuse/btn_5270caa6b30a1013.png",label:"领取",mouseEnabled:"true"}}],props:{mouseEnabled:"true",y:"114","var":"butoom",x:"573"}}],props:{mouseEnabled:"true"}}}]),e}(View),mailUI=function(t){function e(){this.mailList=null,this.tipTxt=null,this.contentBox=null,this.mailtype=null,this.backBtn=null,this.contentList=null,e.__super.call(this)}__class(e,"game.ui.chat.mailUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Panel",child:[{type:"List",child:[{type:"Box",child:[{type:"Image",props:{y:"10",width:"67",height:"67",name:"headimg",skin:"reuse/527cc2532399b007.png",x:"13"}},{type:"Label",props:{y:"17",text:"系统邮件",width:"152",align:"left",height:"34",name:"typeTxt",fontSize:"18",bold:"true",x:"103"}},{type:"Image",props:{height:"2",y:"85",skin:"chat/528077d263a9a009.png",width:"600"}},{type:"Label",props:{y:"65",text:"1天前",width:"86",align:"right",height:"21",name:"m_pTime",color:"#666666",fontSize:"14",bold:"true",x:"502"}},{type:"Label",props:{y:"51",wordWrap:"false",text:"【2016-1-14更新内容】  数量的房间阿斯顿飞阿斯顿理",width:"408",align:"left",height:"30",name:"content",color:"#666666",fontSize:"16",bold:"true",x:"103"}},{type:"Image",props:{height:"87",y:"2",skin:"reuse/528077F963A9A01F.png",width:"87",x:"3"}},{type:"Image",props:{name:"m_pNewsTip_bg",skin:"reuse/51eccbe925770005.png",x:"61"}},{type:"Label",props:{y:"6",text:"12",width:"32",align:"center",height:"26",name:"m_pNewsTip",color:"#ffffff",fontSize:"18",bold:"true",x:"61"}}],props:{name:"render",y:"-2",x:"-8"}}],props:{y:"9","var":"mailList",width:"727",height:"426",vScrollBarSkin:"reuse/vscroll.png",x:"7"}},{type:"Label",props:{y:"182","var":"tipTxt",text:"暂时没有任何可阅读的邮件",width:"345",align:"center",height:"50",color:"#000000",fontSize:"25",bold:"true",x:"138"}},{type:"Box",child:[{type:"Label",props:{y:"9","var":"mailtype",text:"邮件  -  系统邮件",fontSize:"24",bold:"true",x:"182"}},{type:"Box",child:[{type:"Image",props:{y:"0","var":"backBtn",sizeGrid:"10,50,100,75",height:"64",width:"175",x:"0"}},{type:"Label",props:{y:"6",text:"返回",width:"131",mouseEnabled:"false",align:"center",height:"33",color:"#ffffff",fontSize:"30",bold:"true",x:"20"}}],props:{y:"0",x:"0"}},{type:"Panel",props:{y:"45","var":"contentList",width:"727",mouseEnabled:"true",height:"400",vScrollBarSkin:"reuse/vscroll.png",x:"0"}}],props:{y:"0","var":"contentBox",x:"0"}}],props:{height:"520",y:"112",name:"maskPanel",width:"734",x:"14"}}],props:{mouseThrough:"true"}}}]),e}(View),panelMainUI=function(t){function e(){this.btn_kg=null,this.btn_container=null,e.__super.call(this)}__class(e,"game.ui.chat.panelMainUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Clip",props:{y:"257","var":"btn_kg",width:"64",x:"756",index:"0",skin:"chat/clip_kg.png",clipX:"2"}},{type:"Image",props:{y:"-10",width:"781",mouseEnabled:"true",height:"665",mouseThrough:"false",skin:"reuse/528077f163a9a019.png",sizeGrid:"130,30,30,30",x:"-14"}},{type:"Box",child:[{type:"Clip",props:{scaleX:"1",name:"item1",scaleY:"1",clipY:"2",mouseEnabled:"true",index:"1",skin:"chat/clip_liaotian.png",x:"114"}},{type:"Clip",props:{scaleX:"1",name:"item3",scaleY:"1",clipY:"2",mouseEnabled:"true",index:"0",skin:"chat/clip_gongju.png",x:"342"}},{type:"Clip",props:{scaleX:"1",name:"item2",scaleY:"1",clipY:"2",mouseEnabled:"true",index:"0",skin:"chat/clip_shangcheng.png",x:"228"}},{type:"Clip",props:{scaleX:"1",name:"item4",scaleY:"1",clipY:"2",mouseEnabled:"true",index:"0",skin:"chat/clip_bangzhu.png",x:"456"}},{type:"Clip",props:{scaleX:"1",name:"item0",scaleY:"1",index:"0",mouseEnabled:"true",clipY:"2",skin:"chat/clip_youjian.png"}}],props:{y:"28","var":"btn_container",x:"38"}},{type:"Image",props:{height:"64",y:"568",skin:"chat/533e629334ea0002.png",width:"741",x:"7"}}],props:{height:"642",mouseThrough:"true",width:"756",mouseEnabled:"true"}}}]),e}(View),phizUI=function(t){function e(){this.btn_ls=null,this.btn_bq=null,this.phizList=null,e.__super.call(this)}__class(e,"game.ui.chat.phizUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Clip",props:{y:"257","var":"btn_ls",index:"0",clipY:"2",skin:"chat/clip_ls.png",x:"88"}},{type:"Clip",props:{y:"257","var":"btn_bq",clipY:"2",index:"1",skin:"chat/clip_bq.png",x:"14"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{height:"40",name:"image",skin:"chat/sanjiao.png",width:"40"}}],props:{mouseEnabled:"true",name:"render",y:"0",x:"0"}}],props:{y:"89","var":"phizList",hScrollBarSkin:"reuse/vscroll.png",mouseEnabled:"true",spaceX:"10",spaceY:"10",x:"1"}},{type:"Image",props:{y:"22",skin:"chat/533e63e031391004.png",width:"741",x:"0"}}],props:{mouseThrough:"true"}}}]),e}(View),buyCanvasUI=function(t){function e(){this.numselect=null,this.ladk=null,this.mygoods=null,this.m_iAskBtn=null,this.m_iLeftTimeLable=null,this.m_iAddPriceBtn=null,this.m_iInforLable=null,this.zhekou=null,this.titleBox=null,this.viplimit=null,this.returnBtn=null,this.wareList=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.buyCanvasUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.chat.trade.viplimitUI"]=viplimitUI,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{y:"2","var":"ladk",width:"425",height:"412",skin:"chat/5270cb26b30a1032.png",sizeGrid:"20,20,20,20",x:"2"}},{type:"Label",props:{name:"label",text:"求购数量",width:"114",mouseEnabled:"false",align:"center",height:"30",y:"24",color:"#000000",fontSize:"22",bold:"true",x:"147"}},{type:"Image",props:{y:"58","var":"mygoods",width:"64",height:"64",skin:"reuse/527cc2532399b007.png",x:"31"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"22",sizeGrid:"20,40,20,40",label:"求购",labelBold:"true",skin:"reuse/button_527cbad72a3e402b.png",x:"139",y:"317","var":"m_iAskBtn",width:"159",height:"53",labelStroke:"1",labelMargin:"30,20,35,20",stateNum:"1"}},{type:"Label",props:{strokeColor:"#000000",text:"求购持续3小时",mouseEnabled:"false",color:"#ffffff",fontSize:"20",x:"86",y:"288",width:"265",align:"center",height:"35",bold:"true",stroke:"2"}},{type:"Label",props:{strokeColor:"#000000",text:"今日还可免费求购:2次",mouseEnabled:"false",color:"#ffffff",fontSize:"20",x:"79",y:"371","var":"m_iLeftTimeLable",width:"275",align:"center",height:"37",bold:"true",stroke:"1"}},{type:"Label",props:{y:"132",text:"求购金额",width:"114",mouseEnabled:"false",align:"center",height:"30",color:"#000000",fontSize:"22",bold:"true",x:"147"}},{type:"Image",props:{height:"56",y:"168",skin:"reuse/527cc2532399b007.png",width:"56",x:"180"}},{type:"Box",child:[{type:"Image",props:{height:"50",skin:"chat/5600c56394584006.png",width:"100"}},{type:"Label",props:{y:"9","var":"m_iInforLable",text:"加倍",width:"64",mouseEnabled:"false",align:"center",height:"30",color:"#000000",fontSize:"20",bold:"true",x:"18"}}],props:{y:"233","var":"m_iAddPriceBtn",x:"162"}},{type:"Clip",props:{clipWidth:"70","var":"zhekou",skin:"chat/clip_55ffd8a77fea6013.png",clipX:"3"}}],props:{y:"52","var":"numselect",x:"305"}},{type:"Box",child:[{type:"viplimit",props:{runtime:"game.ui.chat.trade.viplimitUI","var":"viplimit",x:"153"}},{type:"Box",child:[{type:"Image",props:{height:"60",y:"0",skin:"chat/531403756c7b2007.png",width:"128",x:"0"}},{type:"Label",props:{y:"8",text:"返回",width:"59",mouseEnabled:"false",align:"left",height:"31",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"43"}}],props:{height:"38",y:"6","var":"returnBtn",width:"128",x:"0"}}],props:{y:"1","var":"titleBox",x:"2"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{height:"60",name:"image",skin:"reuse/527cc2532399b007.png",width:"60"}}],props:{name:"render",y:"10",width:"127",mouseEnabled:"true",height:"85",mouseThrough:"false",x:"40"}}],props:{height:"408",y:"57",repeatX:"2","var":"wareList",repeatY:"6",mouseEnabled:"true",spaceX:"10",vScrollBarSkin:"reuse/vscroll.png",spaceY:"0",width:"256",x:"44"}}]}}]),e}(View),exchangeCanvasUI=function(t){function e(){this.numselect=null,this.ladk=null,this.mygoods=null,this.targoods=null,this.m_iAskBtn=null,this.m_iLeftTimeLable=null,this.titleBox=null,this.returnBtn=null,this.wareList=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.exchangeCanvasUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.chat.trade.viplimitUI"]=viplimitUI,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{y:"0","var":"ladk",width:"425",height:"412",skin:"chat/5270cb26b30a1032.png",sizeGrid:"20,20,20,20",x:"13"}},{type:"Label",props:{name:"label",text:"交换数量",width:"114",mouseEnabled:"false",align:"center",height:"30",y:"27",color:"#000000",fontSize:"22",bold:"true",x:"251"}},{type:"Image",props:{y:"77","var":"mygoods",width:"64",height:"64",skin:"reuse/527cc2532399b007.png",x:"103"}},{type:"Image",props:{y:"178","var":"targoods",width:"64",height:"64",skin:"reuse/527cc2532399b007.png",x:"103"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"22",sizeGrid:"20,40,20,40",label:"求换",labelBold:"true",skin:"reuse/button_527cbad72a3e402b.png",x:"150",y:"315","var":"m_iAskBtn",width:"159",height:"53",labelStroke:"1",labelMargin:"30,20,30,20",stateNum:"1"}},{type:"Label",props:{y:"285",text:"交换信息持续3小时",width:"265",mouseEnabled:"false",align:"center",height:"35",color:"#ffffff",fontSize:"20",bold:"true",stroke:"2",x:"95"}},{type:"Label",props:{text:"今日还可免费求购:2次",mouseEnabled:"false",color:"#ffffff",fontSize:"20",x:"90",y:"369","var":"m_iLeftTimeLable",width:"275",align:"center",height:"37",bold:"true",stroke:"1"}},{type:"Image",props:{height:"128",y:"105",skin:"chat/55506d317c18000e.png",width:"128",x:"0"}}],props:{height:"412",y:"52","var":"numselect",width:"438",x:"294"}},{type:"Box",child:[{type:"viplimit",props:{runtime:"game.ui.chat.trade.viplimitUI",x:"153"}},{type:"Box",child:[{type:"Image",props:{height:"60",y:"0",skin:"chat/531403756c7b2007.png",width:"128",x:"0"}},{type:"Label",props:{y:"8",text:"返回",width:"59",mouseEnabled:"false",align:"left",height:"31",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"43"}}],props:{height:"38",y:"6","var":"returnBtn",width:"128",x:"0"}}],props:{y:"1","var":"titleBox",x:"2"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{height:"60",name:"image",skin:"reuse/527cc2532399b007.png",width:"60"}}],props:{name:"render",y:"10",width:"127",mouseEnabled:"true",height:"85",mouseThrough:"false",x:"40"}}],props:{height:"408",y:"55",repeatX:"2","var":"wareList",repeatY:"6",mouseEnabled:"true",spaceX:"10",vScrollBarSkin:"reuse/vscroll.png",spaceY:"0",width:"256",x:"44"}}]}}]),e}(View),goodsSelectUI=function(t){function e(){this.gridbox=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.goodsSelectUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",width:"188",height:"79",alpha:"0.8",skin:"chat/5263a9b9e8646010.png",sizeGrid:"20,20,20,20",x:"0"}},{type:"Box",child:[{type:"Image",props:{skin:"chat/53f594ee0440100d.png"}},{type:"Image",props:{skin:"chat/53f594ee0440100d.png",x:"57"}},{type:"Image",props:{skin:"chat/53f594ee0440100d.png",x:"114"}}],props:{y:"7","var":"gridbox",x:"6"}}]}}]),e}(View),NumSelectUI=function(t){function e(){this.saleNumBg=null,this.saleNum=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.NumSelectUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0","var":"saleNumBg",skin:"chat/5270ef8bbcaf3004.png",x:"0"}},{type:"Image",props:{y:"0","var":"saleNum",width:"50",height:"50",skin:"chat/5270ef88bcaf3002.png",sizeGrid:"5,5,5,5",x:"0"}}],props:{height:"52",width:"212"}}}]),e}(View),otherInfoItemUI=function(t){function e(){this.headimg=null,this.buyBox=null,this.zhekou=null,this.buyitem=null,
this.exchange=null,this.havegoods=null,this.targoods=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.otherInfoItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"3",sizeGrid:"40,45,15,20",height:"92",skin:"chat/528df9142ded8004.png",width:"544",x:"99"}},{type:"Image",props:{scaleX:"0.6",y:"10",scaleY:"0.6","var":"headimg",width:"128",mouseEnabled:"false",height:"128",mouseThrough:"true",skin:"reuse/tou0.jpg",x:"13"}},{type:"Image",props:{scaleX:"0.8",y:"0",scaleY:"0.8",width:"128",height:"128",skin:"reuse/528077F963A9A01F.png",x:"0"}},{type:"Box",child:[{type:"Label",props:{y:"15",text:"求购",width:"71",mouseEnabled:"false",align:"center",height:"35",color:"#ffffff",fontSize:"30",bold:"true",stroke:"1",x:"10"}},{type:"Clip",props:{y:"-16","var":"zhekou",clipX:"3",rotation:"90",clipWidth:"70",skin:"chat/clip_55ffd8a77fea6013.png",x:"515"}},{type:"Image",props:{height:"58",y:"4",skin:"reuse/527cc2532399b007.png",width:"58",x:"405"}},{type:"Image",props:{y:"3","var":"buyitem",width:"64",height:"64",skin:"reuse/527cc2532399b007.png",x:"113"}}],props:{height:"75",y:"17","var":"buyBox",width:"492",x:"129"}},{type:"Box",child:[{type:"Image",props:{height:"64",y:"1","var":"havegoods",skin:"reuse/527cc2532399b007.png",width:"64"}},{type:"Image",props:{height:"64","var":"targoods",skin:"reuse/527cc2532399b007.png",width:"64",x:"370"}},{type:"Label",props:{y:"18",text:"换",width:"57",mouseEnabled:"false",align:"center",height:"35",color:"#ffffff",fontSize:"28",bold:"true",stroke:"1",x:"165"}}],props:{y:"18","var":"exchange",x:"135"}}]}}]),e}(View),ReceiveTradeItemUI=function(t){function e(){this.m_iStateLable=null,this.m_iItemCon=null,this.getBtn=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.ReceiveTradeItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Label",props:{y:"28","var":"m_iStateLable",text:"交易成功",width:"147",mouseEnabled:"false",align:"center",height:"35",color:"#000000",fontSize:"25",bold:"true",x:"20"}},{type:"Image",props:{y:"9","var":"m_iItemCon",width:"64",height:"64",skin:"reuse/527cc2532399b007.png",x:"253"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"22",sizeGrid:"20,40,20,40",label:"收取",labelBold:"true",skin:"reuse/button_527cbad72a3e402b.png",x:"433",y:"14","var":"getBtn",width:"117",height:"51",labelStroke:"1",labelMargin:"30,20,35,20",stateNum:"1"}}]}}]),e}(View),selfInfoItemUI=function(t){function e(){this.headimg=null,this.buyBox=null,this.zhekou=null,this.buyitem=null,this.exchange=null,this.havegoods=null,this.targoods=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.selfInfoItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{scaleX:"0.6",y:"10",scaleY:"0.6","var":"headimg",width:"128",mouseEnabled:"false",height:"128",mouseThrough:"true",skin:"reuse/tou0.jpg",x:"649"}},{type:"Image",props:{scaleX:"0.8",y:"0",scaleY:"0.8",width:"128",height:"128",skin:"reuse/528077F963A9A01F.png",x:"636"}},{type:"Image",props:{y:"0",width:"544",height:"96",skin:"chat/528df9182ded8006.png",sizeGrid:"15,45,40,20",x:"98"}},{type:"Box",child:[{type:"Label",props:{y:"25",text:"求购",width:"71",mouseEnabled:"false",align:"center",height:"35",color:"#ffffff",fontSize:"30",bold:"true",stroke:"1",x:"37"}},{type:"Clip",props:{clipWidth:"70","var":"zhekou",skin:"chat/clip_55ffd8a77fea6013.png",clipX:"3"}},{type:"Image",props:{height:"58",y:"3",skin:"reuse/527cc2532399b007.png",width:"58",x:"431"}},{type:"Image",props:{y:"3","var":"buyitem",width:"64",height:"64",skin:"reuse/527cc2532399b007.png",x:"142"}}],props:{height:"75",y:"11","var":"buyBox",width:"492",x:"104"}},{type:"Box",child:[{type:"Image",props:{height:"64",y:"1","var":"havegoods",skin:"reuse/527cc2532399b007.png",width:"64"}},{type:"Image",props:{height:"64","var":"targoods",skin:"reuse/527cc2532399b007.png",width:"64",x:"370"}},{type:"Label",props:{y:"18",text:"换",width:"57",mouseEnabled:"false",align:"center",height:"35",color:"#ffffff",fontSize:"28",bold:"true",stroke:"1",x:"165"}}],props:{y:"18","var":"exchange",x:"135"}}]}}]),e}(View),tabSelectBoxUI=function(t){function e(){this.wp_box=null,this.wp_bg=null,this.wp_bg2=null,this.ls_box=null,this.ls_bg=null,this.ls_bg2=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.tabSelectBoxUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{y:"59",scaleY:"-1","var":"wp_bg",width:"70",height:"70",skin:"chat/528077FE63A9A023.png"}},{type:"Image",props:{y:"0","var":"wp_bg2",width:"64",height:"64",skin:"chat/527cba862a3e4002.png",x:"3"}},{type:"Image",props:{height:"50",y:"1",skin:"reuse/51d5747328781011.png",width:"50",x:"11"}}],props:{y:"13","var":"wp_box",x:"77"}},{type:"Box",child:[{type:"Image",props:{y:"59",scaleY:"-1","var":"ls_bg",width:"70",height:"70",skin:"chat/528077FE63A9A023.png"}},{type:"Image",props:{y:"0","var":"ls_bg2",width:"64",height:"64",skin:"chat/527cba862a3e4002.png",x:"3"}},{type:"Image",props:{height:"50",y:"1",skin:"reuse/51D569FE2878100C.png",width:"50",x:"10"}}],props:{y:"13","var":"ls_box",x:"0"}}]}}]),e}(View),tipTxtUI=function(t){function e(){this.tipTxt=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.tipTxtUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Label",props:{y:"0","var":"tipTxt",text:"暂时没有可交易的物品",width:"345",align:"center",height:"50",color:"#000000",fontSize:"28",bold:"true",x:"0"}}]}}]),e}(View),viplimitUI=function(t){function e(){this.vipTxt=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.viplimitUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",skin:"chat/542645050f5f7002.png",sizeGrid:"20,200,20,200",x:"0"}},{type:"Image",props:{y:"13",width:"184",height:"31",alpha:"0.6",skin:"chat/528077ca63a9a005.png",sizeGrid:"20,5,20,5",x:"161"}},{type:"Label",props:{strokeColor:"#000000",text:"VIP6可发布工具交换",color:"#ffffff",fontSize:"18",x:"134",y:"16","var":"vipTxt",width:"241",align:"center",height:"34",bold:"true",stroke:"1"}}]}}]),e}(View),WorldBuyUI=function(t){function e(){this.contenPanel=null,this.dataPanel=null,this.viplimit=null,this.switchTab=null,this.startBtn=null,this.startBtnLabel=null,this.receivePanel=null,this.receivePanelCon=null,this.ReciverreturnBtn=null,e.__super.call(this)}__class(e,"game.ui.chat.WorldBuyUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.chat.trade.tabSelectBoxUI"]=tabSelectBoxUI,View.viewClassMap["game.ui.chat.trade.viplimitUI"]=viplimitUI,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Panel",child:[{type:"Panel",props:{y:"1","var":"dataPanel",width:"730",mouseEnabled:"true",height:"461",vScrollBarSkin:"reuse/vscroll.png",x:"0"}},{type:"viplimit",props:{y:"472",runtime:"game.ui.chat.trade.viplimitUI","var":"viplimit",x:"106"}},{type:"tabSelectBox",props:{y:"460",runtime:"game.ui.chat.trade.tabSelectBoxUI","var":"switchTab",x:"44"}},{type:"Box",child:[{type:"Button",props:{labelBold:"true",labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"22",width:"159",sizeGrid:"20,40,20,40",labelMargin:"30,20,35,20",height:"53",labelStroke:"1",skin:"reuse/button_527cbad72a3e402b.png",stateNum:"1"}},{type:"Label",props:{strokeColor:"#000000",text:"发起求购",color:"#ffffff",fontSize:"20",x:"33",y:"16","var":"startBtnLabel",width:"98",align:"center",height:"32",bold:"true",stroke:"1"}}],props:{y:"472","var":"startBtn",x:"562"}},{type:"Box",child:[{type:"Panel",props:{y:"40",vScrollBarSkin:"reuse/vscroll.png",width:"730",mouseEnabled:"true",height:"419","var":"receivePanelCon"}},{type:"Box",child:[{type:"Image",props:{height:"60",y:"0",skin:"chat/531403756c7b2007.png",width:"128",x:"0"}},{type:"Label",props:{y:"8",text:"返回",width:"59",mouseEnabled:"false",align:"left",height:"31",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"43"}}],props:{height:"38","var":"ReciverreturnBtn",width:"128",x:"1"}}],props:{y:"3","var":"receivePanel",x:"0"}}],props:{y:"2","var":"contenPanel",width:"730",mouseEnabled:"true",height:"537",x:"1"}}]}}]),e}(View),WorldTradeUI=function(t){function e(){this.contenPanel=null,this.dataPanel=null,this.receivePanel=null,this.receivePanelCon=null,this.ReciverreturnBtn=null,this.viplimit=null,this.startBtn=null,this.startBtnLabel=null,e.__super.call(this)}__class(e,"game.ui.chat.WorldTradeUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.chat.trade.viplimitUI"]=viplimitUI,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Panel",child:[{type:"Panel",props:{y:"3","var":"dataPanel",width:"730",mouseEnabled:"true",height:"461",vScrollBarSkin:"reuse/vscroll.png",x:"0"}},{type:"Box",child:[{type:"Panel",props:{y:"40",vScrollBarSkin:"reuse/vscroll.png",width:"730",mouseEnabled:"true",height:"419","var":"receivePanelCon"}},{type:"Box",child:[{type:"Image",props:{height:"60",y:"0",skin:"chat/531403756c7b2007.png",width:"128",x:"0"}},{type:"Label",props:{y:"8",text:"返回",width:"59",mouseEnabled:"false",align:"left",height:"31",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"43"}}],props:{height:"38","var":"ReciverreturnBtn",width:"128",x:"1"}}],props:{y:"3","var":"receivePanel",x:"0"}},{type:"viplimit",props:{y:"472",runtime:"game.ui.chat.trade.viplimitUI","var":"viplimit",x:"106"}},{type:"Box",child:[{type:"Button",props:{labelBold:"true",labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"22",width:"159",sizeGrid:"20,40,20,40",labelMargin:"30,20,35,20",height:"53",labelStroke:"1",skin:"reuse/button_527cbad72a3e402b.png",stateNum:"1"}},{type:"Label",props:{strokeColor:"#000000",text:"发起交换",color:"#ffffff",fontSize:"20",x:"33",y:"16","var":"startBtnLabel",width:"98",align:"center",height:"32",bold:"true",stroke:"1"}}],props:{y:"472","var":"startBtn",x:"562"}}],props:{y:"1","var":"contenPanel",width:"730",mouseEnabled:"true",height:"537",x:"1"}}]}}]),e}(View),comboBoxUI=function(t){function e(){this.clip_0=null,this.clip_1=null,this.clip_2=null,e.__super.call(this)}__class(e,"game.ui.comboBoxUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Label",props:{y:"17",strokeColor:"#000000",text:"仅显示地表",width:"132",height:"31",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"2"}},{type:"Clip",props:{y:"0","var":"clip_0",x:"149",index:"0",skin:"reuse/clip_select.png",clipX:"2"}},{type:"Label",props:{y:"17",strokeColor:"#000000",text:"关闭动画",width:"106",height:"31",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"228"}},{type:"Clip",props:{y:"0","var":"clip_1",x:"349",index:"0",skin:"reuse/clip_select.png",clipX:"2"}},{type:"Label",props:{y:"17",strokeColor:"#000000",text:"动画优化",width:"106",height:"31",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"428"}},{type:"Clip",props:{y:"0","var":"clip_2",x:"549",index:"0",skin:"reuse/clip_select.png",clipX:"2"}}],props:{height:"65",width:"615"}}}]),e}(View),GFastTimeProUI=function(t){function e(){this.m_pProgress=null,this.m_pLeftSec=null,this.m_pCDOver=null,this.m_pCDneed=null,e.__super.call(this)}__class(e,"game.ui.comui.GFastTimeProUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"ProgressBar",props:{value:"0",mouseThrough:"false","var":"m_pProgress",width:"152",mouseEnabled:"false",height:"30",y:"20",skin:"reuse/progress_s.png",sizeGrid:"9,0,9,0",x:"0"}},{type:"Image",props:{y:"20",skin:"reuse/parog_sBG.png",x:"-1"}},{type:"Label",props:{strokeColor:"#000000",text:"6M5S",color:"#ffffff",fontSize:"15",x:"2",y:"25","var":"m_pLeftSec",width:"147",align:"center",height:"18",name:"m_pLeftSec",bold:"true",stroke:"1"}},{type:"Box",child:[{type:"Image",props:{mouseEnabled:"false",y:"0",skin:"reuse/5290B489B214B017.png",x:"-54"}},{type:"Image",props:{scaleX:"0.5",y:"15",scaleY:"0.5",skin:"reuse/S45418E8D.png",x:"110"}},{type:"Label",props:{y:"20","var":"m_pCDneed",text:"1",width:"52",align:"right",height:"18",fontSize:"15",x:"51"}}],props:{height:"58",y:"43","var":"m_pCDOver",width:"151",x:"0"}}],props:{height:"100",width:"150"}}}]),e}(View),countDownUI=function(t){function e(){this.progress_s=null,this.box_btn=null,e.__super.call(this)}__class(e,"game.ui.countDownUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"ProgressBar",props:{value:"0",mouseThrough:"false","var":"progress_s",width:"152",mouseEnabled:"false",height:"30",y:"15",skin:"reuse/progress_s.png",sizeGrid:"0,9,0,9",x:"1"}},{type:"Image",props:{y:"16",skin:"reuse/parog_sBG.png",x:"0"}},{type:"Box",child:[{type:"Image",props:{skin:"reuse/5290B489B214B017.png"}},{type:"Image",props:{scaleX:"0.5",y:"13",scaleY:"0.5",skin:"reuse/S45418E8D.png",x:"165"}}],props:{y:"30","var":"box_btn",pivotX:"50",pivotY:"30",mouseEnabled:"true",x:"141"}}],props:{height:"77",width:"349"}}}]),e}(View),cropIconUI=function(t){function e(){this.cropBox=null,e.__super.call(this)}__class(e,"game.ui.cropIconUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{mouseEnabled:"false",y:"0",name:"cropBg",skin:"reuse/5284c074a4be702f.png",x:"0"}},{type:"Image",props:{scaleX:"0.9",name:"cropIcon",scaleY:"0.9",width:"128",mouseEnabled:"false",height:"128",y:"6",skin:"reuse/53850295f96d3011.png",x:"5"}},{type:"Label",props:{strokeColor:"#000000",text:"label",mouseEnabled:"false",color:"#ffffff",fontSize:"20",x:"40",y:"83",width:"50",align:"center",height:"30",name:"cropText",bold:"true",stroke:"1"}},{type:"Image",props:{mouseEnabled:"false",name:"jiantou",y:"52",x:"93"}},{type:"Image",props:{scaleX:"0.7",y:"39",scaleY:"0.7",mouseEnabled:"false",name:"jinbi",skin:"reuse/527cc2532399b007.png",x:"56"}},{type:"Label",props:{strokeColor:"#000000",text:"10",mouseEnabled:"false",color:"#ffffff",fontSize:"20",x:"9",y:"47",width:"50",align:"right",height:"30",name:"jinbiText",bold:"true",stroke:"1"}}],props:{scaleX:"1",y:"0",scaleY:"1","var":"cropBox",width:"128",mouseEnabled:"true",height:"128",x:"0"}}]}}]),e}(View),DingdanItemUI=function(t){function e(){this.image_bg=null,this.jiazi=null,this.duigou=null,this.daojishi=null,this.box_dingdan_yes=null,this.label_jingyan=null,this.label_jinbi=null,e.__super.call(this)}__class(e,"game.ui.dingdan.DingdanItemUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.kit.CountDown"]=CountDown,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"11","var":"image_bg",width:"174",height:"148",skin:"dingdan/img_r_bg.png",x:"0"}},{type:"Image",props:{y:"0",name:"jiazi","var":"jiazi",skin:"dingdan/img_w_zs.png",x:"55"}},{type:"Label",props:{strokeColor:"#000000",text:"Bartley",color:"#ffffff",fontSize:"20",x:"9",y:"30",width:"156",left:"10",align:"center",height:"27",right:"10",stroke:"1"}},{type:"Image",props:{name:"duigou","var":"duigou",width:"49",height:"47",y:"0",skin:"dingdan/img_duigou.png",x:"127"}},{type:"CountDown",props:{runtime:"display.kit.CountDown","var":"daojishi",width:"155",height:"80",y:"54",x:"9"}},{type:"Box",child:[{type:"Image",props:{height:"32",y:"35",skin:"mainIcon/527cbab92a3e4016.png",width:"32"}},{type:"Image",props:{height:"32",skin:"reuse/527cc2532399b007.png",width:"32"}},{type:"Label",props:{strokeColor:"#000000",text:"18",color:"#ffffff",fontSize:"15",x:"34",y:"38","var":"label_jingyan",width:"59",align:"left",height:"25",bold:"true",stroke:"1"}},{type:"Label",props:{strokeColor:"#000000",text:"30",color:"#ffffff",fontSize:"15",x:"34",y:"3","var":"label_jinbi",width:"59",align:"left",height:"25",bold:"true",stroke:"1"}}],props:{y:"71","var":"box_dingdan_yes",x:"37"}}]}}]),e}(View),gameNoticeUI=function(t){function e(){this.txtPanel=null,this.txt=null,this.btn_close=null,this.btn_ok=null,e.__super.call(this)}__class(e,"game.ui.gameNoticeUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"5",width:"860",height:"636",skin:"reuse/528077ed63a9a016.png",sizeGrid:"60,20,20,20",x:"26"}},{type:"Panel",child:[{type:"Label",props:{y:"2",wordWrap:"true","var":"txt",text:"欢迎进入庄园，快快让庄园更漂亮吧。",width:"771",align:"left",fontSize:"35",bold:"true",x:"0"}}],props:{y:"154",vScrollBarSkin:"reuse/vscroll.png",width:"775",height:"379","var":"txtPanel",x:"82"}},{type:"Label",props:{y:"35",text:"游戏公告",align:"center",color:"#ffffff",fontSize:"53",bold:"true",stroke:"1",x:"346"}},{type:"Button",props:{scaleX:"0.5",y:"0",scaleY:"0.5","var":"btn_close",stateNum:"1",mouseEnabled:"true",height:"138",skin:"reuse/btn_close.png",width:"142",x:"814"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"35",mouseEnabled:"true",labelBold:"true",x:"320",label:"知道了",y:"550","var":"btn_ok",width:"272",height:"69",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",stateNum:"1"}}],props:{height:"643",width:"930"}}}]),e}(View),helpUI=function(t){function e(){this.m_text=null,e.__super.call(this)}__class(e,"game.ui.helpUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Label",props:{y:"140",wordWrap:"true","var":"m_text",width:"700",align:"left",height:"227",fontSize:"33",bold:"true",leading:"10",x:"23"}}],props:{height:"461",width:"741"}}}]),e}(View),LevelUpRewardItemUI=function(t){function e(){this.image=null,this.lable=null,this.isnew=null,e.__super.call(this)}__class(e,"game.ui.levelUp.LevelUpRewardItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{height:"85",y:"0","var":"image",width:"85",x:"0"}},{type:"Label",props:{y:"52","var":"lable",text:"20",width:"59",mouseEnabled:"false",align:"left",height:"30",color:"#000000",fontSize:"25",bold:"true",x:"89"}},{type:"Label",props:{y:"54","var":"isnew",text:"20",width:"59",mouseEnabled:"false",align:"center",height:"30",color:"#ff0000",fontSize:"25",bold:"true",x:"17"}}],props:{height:"110",width:"120"}}}]),e}(View),LoadingUI=function(t){function e(){this.boxContainer=null,this.boxx=null,this.loadProgress=null,this.loadText=null,this.label2=null,this.diangan=null,this.label1=null,e.__super.call(this)}__class(e,"game.ui.LoadingUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{y:"99",skin:"loading/loading10.png",x:"90"}},{type:"Image",props:{height:"64",y:"44",skin:"loading/rainbow.png",width:"414",x:"130"}},{type:"Box",props:{height:"21",y:"45","var":"boxx",width:"81",x:"21"}},{type:"ProgressBar",props:{value:"0.5",y:"112","var":"loadProgress",width:"409",height:"29",skin:"loading/progress.png",sizeGrid:"0,12,0,12",x:"103"}},{type:"Label",props:{y:"117","var":"loadText",text:"label",width:"60",align:"center",height:"22",fontSize:"15",x:"521"}},{type:"Label",props:{y:"161","var":"label2",text:"把粉丝加为好友，你的朋友会越来越多",width:"650",align:"center",height:"30",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",strokeColor:"#000000"}},{type:"Image",props:{y:"5","var":"diangan",skin:"loading/light.png",x:"104"}},{type:"Label",props:{"var":"label1",text:"等待连接...",width:"359",align:"center",height:"30",strokeColor:"#000000",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"143"}}],props:{y:"567","var":"boxContainer",x:"348"}}],props:{height:"768",width:"1330"}}}]),e}(View),achievementUI=function(t){function e(){this.achieveList=null,this.idLabel=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.figureInfoPanel.achievementUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"List",child:[{type:"Box",child:[{type:"Image",props:{height:"175",y:"6",skin:"figureInfo/529eddf13c41b004.png",width:"685"}},{type:"Image",props:{height:"114",skin:"figureInfo/55922d59a579500a.png",width:"416",x:"58"}},{type:"Label",props:{y:"60",visible:"false",text:"10",align:"left",name:"m_nDiamon",color:"#ffff33",fontSize:"30",bold:"true",x:"580"}},{type:"Label",props:{y:"111",visible:"false",text:"500",align:"left",name:"m_nExp",color:"#ffff33",fontSize:"30",bold:"true",x:"586"}},{type:"Label",props:{y:"28",text:"奖励",align:"left",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"556"}},{type:"Label",props:{y:"20",wordWrap:"true",text:"完成100次热气球订单完成100次热气球订单",width:"455",align:"center",name:"names",color:"#ffffff",fontSize:"31",stroke:"1",x:"38.5"}},{type:"Box",child:[{type:"Image",props:{height:"34",skin:"reuse/parog_sBG.png",width:"224"}},{type:"ProgressBar",props:{value:"1",name:"m_gpro",width:"220",height:"30",y:"2",skin:"reuse/progress_s.png",sizeGrid:"10,5,10,5",x:"2"}},{type:"Label",props:{name:"progressLabel",text:"0/1",width:"220",align:"center",height:"28",y:"3",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"2"}}],props:{name:"box_progress",y:"113",x:"153"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"25",label:"领取奖励",labelBold:"true",labelStroke:"1",x:"138",y:"103",stateNum:"1",height:"50",name:"btn_lingjiang",skin:"reuse/btn_5270caa6b30a1013.png",width:"256"}}],props:{name:"render",width:"685",mouseEnabled:"true",height:"165",y:"3",x:"0"}}],props:{y:"221",vScrollBarSkin:"reuse/vscroll.png",width:"685",mouseEnabled:"true",height:"400","var":"achieveList",repeatY:"3",x:"1"}},{type:"Label",props:{text:"成就",mouseEnabled:"false",strock:"1",fontSize:"36",strockColor:"#000000",y:"131",color:"#ffffff","var":"idLabel",width:"280",x:"1",align:"center",height:"41",bold:"true",stroke:"1"}},{type:"Image",props:{height:"64",y:"170",skin:"figureInfo/52a079f156811003.png",width:"686",x:"0"}},{type:"Label",props:{y:"180",text:"总成就点:",align:"left",color:"#ffcc00",fontSize:"31",bold:"true",stroke:"1",x:"178"}}],props:{height:"621",mouseThrough:"true",width:"703"}}}]),e}(View),figureUI=function(t){function e(){this.idLabel=null,this.box_geren=null,this.btn_geren=null,this.figurePanel=null,this.box_view=null,this.box_right=null,this.box_left=null,this.img_touxiang=null,this.names=null,this.chenghao=null,this.qianming=null,this.vip=null,this.label_fangwen=null,this.youqing=null,this.btn_shezhi=null,this.m_quitGame=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.figureInfoPanel.figureUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Label",props:{strokeColor:"#000000",text:"人物ID:   128008",color:"#ffffff",fontSize:"25",x:"0",y:"135","var":"idLabel",width:"263",align:"center",height:"32",bold:"true",stroke:"1"}},{type:"Box",child:[{type:"Image",props:{height:"50",y:"0","var":"btn_geren",width:"128",x:"0"}},{type:"Label",props:{y:"5",text:"个人信息",mouseEnabled:"false",align:"center",color:"#666666",fontSize:"20",bold:"true",x:"20"}}],props:{height:"35",y:"135","var":"box_geren",width:"128",x:"13"}},{type:"Panel",child:[{type:"Box",child:[{type:"Box",props:{y:"0","var":"box_right",width:"705",mouseEnabled:"true",height:"449",x:"670"}},{type:"Box",child:[{type:"Box",child:[{type:"Label",props:{y:"49.5",text:"点击更换头像",width:"121",align:"left",height:"25",name:"label1",color:"#999999",fontSize:"18",x:"251"}},{type:"Image",props:{y:"13","var":"img_touxiang",width:"96",height:"96",name:"img",skin:"reuse/tou0.jpg",x:"522"}},{type:"Image",props:{y:"0",name:"imgBg",skin:"reuse/528077F963A9A01F.png",x:"506"}},{type:"Image",props:{y:"5",visible:"false",width:"660",height:"118",name:"white",alpha:"0.2",skin:"reuse/white.png",sizeGrid:"3,3,3,3",x:"0"}},{type:"Label",props:{y:"45",text:"头像",align:"left",name:"title",fontSize:"25",bold:"true",x:"2"}},{type:"Label",props:{y:"45",fontSize:"25",text:">",bold:"true",x:"641"}},{type:"Image",props:{bottom:"0",height:"3",y:"124",skin:"figureInfo/xian.png",width:"660"}}],props:{height:"128",y:"0",name:"render",width:"660",x:"0"}},{type:"Box",child:[{type:"Label",props:{name:"title",text:"昵称",align:"left",y:"22",fontSize:"25",bold:"true",x:"2"}},{type:"Label",props:{y:"22",fontSize:"25",text:">",bold:"true",x:"641"}},{type:"Image",props:{y:"54",skin:"figureInfo/xian.png",width:"660",height:"3",bottom:"0",x:"0"}},{type:"Image",props:{name:"white",visible:"false",sizeGrid:"3,3,3,3",height:"72",y:"5",alpha:"0.2",skin:"reuse/white.png",width:"660",x:"0"}},{type:"Label",props:{y:"24.5","var":"names",text:"小胖子",width:"479",align:"right",height:"29",color:"#999999",fontSize:"23",x:"144"}}],props:{height:"82",y:"128",name:"render",width:"660",x:"0"}},{type:"Box",child:[{type:"Label",props:{y:"24.5","var":"chenghao",width:"388",align:"right",height:"29",color:"#999999",fontSize:"23",x:"235"}},{type:"Image",props:{y:"54",skin:"figureInfo/xian.png",width:"660",height:"3",bottom:"0",x:"0"}},{type:"Image",props:{name:"white",visible:"false",sizeGrid:"3,3,3,3",height:"72",y:"5",alpha:"0.2",skin:"reuse/white.png",width:"660",x:"0"}},{type:"Label",props:{name:"title",text:"我的称号",align:"left",y:"22",fontSize:"25",bold:"true",x:"2"}},{type:"Label",props:{y:"22",text:">",width:"19",height:"34",fontSize:"25",bold:"true",x:"641"}}],props:{height:"82",y:"210",name:"render",width:"660",x:"0"}},{type:"Box",child:[{type:"Label",props:{y:"24.5","var":"qianming",text:"这家伙很懒，什么都没有留下",width:"539",align:"right",height:"29",color:"#999999",fontSize:"23",x:"84"}},{type:"Image",props:{y:"54",skin:"figureInfo/xian.png",width:"660",height:"3",bottom:"0",x:"0"}},{type:"Image",props:{name:"white",visible:"false",sizeGrid:"3,3,3,3",height:"72",y:"5",alpha:"0.2",skin:"reuse/white.png",width:"660",x:"0"}},{type:"Label",props:{name:"title",text:"签名",align:"left",y:"22",fontSize:"25",bold:"true",x:"2"}},{type:"Label",props:{y:"22",fontSize:"25",text:">",bold:"true",x:"641"}}],props:{height:"82",y:"292",name:"render",width:"660",x:"0"}},{type:"Box",child:[{type:"Image",props:{bottom:"0",height:"3",y:"72",skin:"figureInfo/xian.png",width:"660"}},{type:"Image",props:{y:"2","var":"vip",width:"78",height:"78",skin:"figureInfo/537ef26337b35002.png",x:"553"}},{type:"Image",props:{name:"white",visible:"false",sizeGrid:"3,3,3,3",height:"72",y:"5",alpha:"0.2",skin:"reuse/white.png",width:"660",x:"0"}},{type:"Label",props:{name:"title",text:"VIP",align:"left",y:"24",fontSize:"25",bold:"true",x:"2"}},{type:"Label",props:{y:"24",fontSize:"25",text:">",bold:"true",x:"641"}}],props:{height:"82",y:"374",name:"render",width:"660",x:"0"}},{type:"Box",child:[{type:"Image",props:{bottom:"0",height:"3",y:"54",skin:"figureInfo/xian.png",width:"660"}},{type:"Image",props:{name:"white",visible:"false",sizeGrid:"3,3,3,3",height:"72",y:"5",alpha:"0.2",skin:"reuse/white.png",width:"660",x:"0"}},{type:"Label",props:{name:"title",text:"点赞花信息",align:"left",y:"24",fontSize:"25",bold:"true",x:"2"}},{type:"Label",props:{y:"24",fontSize:"25",text:">",bold:"true",x:"641"}}],props:{height:"82",y:"456",name:"render",width:"660",x:"0"}},{type:"Box",child:[{type:"Image",props:{bottom:"0",height:"3",y:"54",skin:"figureInfo/xian.png",width:"660"}},{type:"Label",props:{y:"26","var":"label_fangwen",text:"50",width:"372",align:"right",height:"34",fontSize:"25",bold:"true",x:"260"}},{type:"Image",props:{name:"white",visible:"false",sizeGrid:"3,3,3,3",height:"72",y:"5",alpha:"0.2",skin:"reuse/white.png",width:"660",x:"0"}},{type:"Label",props:{name:"title",text:"最高访问量",align:"left",y:"26",fontSize:"25",bold:"true",x:"2"}},{type:"Label",props:{y:"26",fontSize:"25",text:">",bold:"true",x:"641"}}],props:{height:"82",y:"538",name:"render",width:"660",x:"0"}},{type:"Box",child:[{type:"Image",props:{height:"3",y:"54",skin:"figureInfo/xian.png",bottom:"0",width:"660"}},{type:"Label",props:{y:"25","var":"youqing",text:"50",width:"88",align:"right",height:"34",fontSize:"25",bold:"true",x:"527"}},{type:"Image",props:{height:"32",y:"26",skin:"figureInfo/53354f60a2d57002.png",width:"32",x:"612"}},{type:"Label",props:{name:"title",text:"友情点",align:"left",y:"25",fontSize:"25",bold:"true",x:"2"}}],props:{height:"82",y:"620",width:"660",x:"0"}},{type:"Image",props:{y:"706","var":"btn_shezhi",skin:"figureInfo/527cbacf2a3e4023.png",x:"0"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"25",sizeGrid:"30,10,30,10",width:"150",labelBold:"true",x:"267",y:"706",labelStrokeColor:"#000000","var":"m_quitGame",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/button_527cbad72a3e402b.png",label:"登出游戏"}}],props:{height:"777",y:"0","var":"box_left",width:"660",x:"0"}}],props:{y:"0","var":"box_view",width:"1330",x:"10"}}],props:{y:"172",vScrollBarSkin:"reuse/vscroll.png",width:"680",height:"449","var":"figurePanel",x:"1"}}],props:{height:"621",mouseThrough:"true",width:"700"}}}]),e}(View),MyHeadPageUI=function(t){function e(){this.img_touxiang=null,this.imgBg=null,this.list_=null,this.box_fanye=null,this.image_paizhao=null,this.image_bendi=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.figureInfoPanel.MyHeadPageUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"25","var":"img_touxiang",width:"160",height:"160",skin:"reuse/tou0.jpg",x:"45"}},{type:"Image",props:{y:"12","var":"imgBg",sizeGrid:"40,40,40,40",height:"192",skin:"reuse/528077F963A9A01F.png",width:"192",x:"29"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{y:"14",width:"80",height:"80",name:"img",skin:"reuse/tou0.jpg",x:"15"}},{type:"Image",props:{name:"imgBg",width:"110",mouseEnabled:"true",height:"110",skin:"reuse/528077F963A9A01F.png",sizeGrid:"40,40,40,40"}}],props:{name:"render",mouseEnabled:"true"}}],props:{y:"200",repeatX:"6","var":"list_",repeatY:"2",hScrollBarSkin:"reuse/vscroll.png",mouseEnabled:"true",spaceX:"-10",spaceY:"-10",x:"39"}},{type:"Box",props:{y:"421","var":"box_fanye",x:"289"}},{type:"Image",props:{y:"32",
"var":"image_paizhao",width:"64",height:"64",skin:"reuse/tou0.jpg",x:"246"}},{type:"Image",props:{y:"117","var":"image_bendi",width:"64",height:"64",skin:"reuse/tou0.jpg",x:"248"}},{type:"Label",props:{y:"50",text:"拍照（即将开启）",align:"left",fontSize:"23",bold:"true",x:"328"}},{type:"Label",props:{y:"133.5",text:"从照片中选择（即将开启）",align:"left",fontSize:"23",bold:"true",x:"328"}}],props:{height:"452",width:"688"}}}]),e}(View),MyLabelPageUI=function(t){function e(){this.img_inputBj=null,this.m_pEdit=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.figureInfoPanel.MyLabelPageUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"61","var":"img_inputBj",sizeGrid:"10,30,10,30",height:"98",width:"626",x:"30"}},{type:"Label",props:{y:"16",text:"签名：",align:"left",fontSize:"25",bold:"true",x:"36"}},{type:"TextArea",props:{y:"70",wordWrap:"true","var":"m_pEdit",text:"取名名名",width:"605",height:"80",fontSize:"30",bold:"true",x:"40.5"}}],props:{height:"452",width:"688"}}}]),e}(View),MyNickPageUI=function(t){function e(){this.btn_=null,this.img_inputBj=null,this.m_pInputNick=null,this.m_pFilterInfo=null,this.box_num=null,this.m_pMem=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.figureInfoPanel.MyNickPageUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"41","var":"btn_",width:"90",height:"90",skin:"reuse/bg.png",x:"555"}},{type:"Image",props:{y:"61","var":"img_inputBj",sizeGrid:"10,30,10,30",height:"50",width:"480",x:"30"}},{type:"TextInput",props:{strokeColor:"#000000",text:"给自己的庄园取个名字",color:"#ffffff",fontSize:"25",x:"41.5",y:"67.5","var":"m_pInputNick",width:"457",align:"left",height:"37",bold:"true",stroke:"1"}},{type:"Label",props:{y:"16",text:"昵称：",align:"left",fontSize:"25",bold:"true",x:"36"}},{type:"Label",props:{y:"14","var":"m_pFilterInfo",text:"昵称中有敏感文字,请重新输入",width:"380",align:"center",height:"38",color:"#ff3300",fontSize:"25",bold:"true",x:"117"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"30",text:"（免费改名剩余次数：2次）",bold:"true","var":"m_pMem"}}],props:{y:"125","var":"box_num",width:"480",x:"30"}}],props:{height:"452",width:"688"}}}]),e}(View),MyPraisePageUI=function(t){function e(){this.list_=null,this.img_hua0=null,this.img_hua1=null,this.img_hua2=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.figureInfoPanel.MyPraisePageUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Label",props:{y:"23",text:"拥有点赞花：",align:"left",fontSize:"30",bold:"true",x:"27"}},{type:"Image",props:{height:"3",y:"80",skin:"figureInfo/xian.png",width:"660",x:"13"}},{type:"Label",props:{y:"100",text:"本周被赠送点赞花次数：",align:"left",fontSize:"30",bold:"true",x:"27"}},{type:"Image",props:{height:"3",y:"158",skin:"figureInfo/xian.png",width:"660",x:"13"}},{type:"Label",props:{y:"176.5",text:"被赠送点赞花的总次数：",align:"left",fontSize:"30",bold:"true",x:"27"}},{type:"Image",props:{height:"3",y:"236",skin:"figureInfo/xian.png",width:"660",x:"13"}},{type:"Label",props:{y:"254",text:"最近送过我点赞花的人：",align:"left",fontSize:"30",bold:"true",x:"27"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{y:"12",width:"70",height:"70",name:"img",skin:"reuse/tou0.jpg",x:"15"}},{type:"Image",props:{name:"imgBg",width:"100",mouseEnabled:"true",height:"100",y:"0",skin:"reuse/528077F963A9A01F.png",sizeGrid:"40,40,40,40",x:"0"}},{type:"Label",props:{y:"87",text:"名字名字",align:"center",name:"nick",color:"#ffffff",fontSize:"20",stroke:"1",x:"8"}}],props:{name:"render",mouseEnabled:"true"}}],props:{y:"302",repeatX:"5","var":"list_",repeatY:"1",mouseEnabled:"true",spaceX:"10",x:"73"}},{type:"Image",props:{height:"40",y:"20","var":"img_hua0",width:"40",x:"626"}},{type:"Image",props:{height:"40",y:"98","var":"img_hua1",width:"40",x:"626"}},{type:"Image",props:{height:"40",y:"176","var":"img_hua2",width:"40",x:"626"}}],props:{height:"452",width:"688"}}}]),e}(View),MyUVPageUI=function(t){function e(){this.item0=null,this.list_=null,this.item1=null,this.item2=null,this.item3=null,this.item4=null,this.item5=null,this.item6=null,this.num0=null,this.num1=null,this.num2=null,this.num3=null,this.num4=null,this.num5=null,this.num6=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.figureInfoPanel.MyUVPageUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Label",props:{y:"14","var":"item0",text:"今日",align:"left",name:"item0",fontSize:"25",bold:"true",x:"18"}},{type:"Image",props:{height:"3",y:"280",skin:"figureInfo/xian.png",width:"660",x:"13"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{y:"12",width:"70",height:"70",name:"img",skin:"reuse/tou0.jpg",x:"15"}},{type:"Image",props:{name:"imgBg",width:"100",mouseEnabled:"true",height:"100",y:"0",skin:"reuse/528077F963A9A01F.png",sizeGrid:"40,40,40,40",x:"0"}},{type:"Label",props:{y:"87",text:"名字名字",align:"center",name:"nick",color:"#ffffff",fontSize:"20",stroke:"1",x:"8"}}],props:{name:"render",mouseEnabled:"true"}}],props:{y:"322",repeatX:"5","var":"list_",repeatY:"1",mouseEnabled:"true",spaceX:"10",x:"73"}},{type:"Label",props:{y:"53","var":"item1",text:"今日",align:"left",name:"item1",fontSize:"25",bold:"true",x:"18"}},{type:"Label",props:{y:"92","var":"item2",text:"今日",align:"left",name:"item2",fontSize:"25",bold:"true",x:"18"}},{type:"Label",props:{y:"131","var":"item3",text:"今日",align:"left",name:"item3",fontSize:"25",bold:"true",x:"18"}},{type:"Label",props:{y:"170","var":"item4",text:"今日",align:"left",name:"item4",fontSize:"25",bold:"true",x:"18"}},{type:"Label",props:{y:"209","var":"item5",text:"今日",align:"left",name:"item5",fontSize:"25",bold:"true",x:"18"}},{type:"Label",props:{y:"248","var":"item6",text:"今日",align:"left",name:"item6",fontSize:"25",bold:"true",x:"18"}},{type:"Label",props:{y:"14","var":"num0",text:"0",width:"275",align:"right",height:"33",name:"item0",fontSize:"25",bold:"true",x:"389"}},{type:"Label",props:{y:"52","var":"num1",text:"0",width:"275",align:"right",height:"33",name:"item1",fontSize:"25",bold:"true",x:"389"}},{type:"Label",props:{y:"90","var":"num2",text:"0",width:"275",align:"right",height:"33",name:"item2",fontSize:"25",bold:"true",x:"389"}},{type:"Label",props:{y:"128","var":"num3",text:"0",width:"275",align:"right",height:"33",name:"item3",fontSize:"25",bold:"true",x:"389"}},{type:"Label",props:{y:"166","var":"num4",text:"0",width:"275",align:"right",height:"33",name:"item4",fontSize:"25",bold:"true",x:"389"}},{type:"Label",props:{y:"204","var":"num5",text:"0",width:"275",align:"right",height:"33",name:"item5",fontSize:"25",bold:"true",x:"389"}},{type:"Label",props:{y:"242","var":"num6",text:"0",width:"275",align:"right",height:"33",name:"item6",fontSize:"25",bold:"true",x:"389"}},{type:"Label",props:{y:"285",text:"最近帮助我的人：",align:"left",fontSize:"25",bold:"true",x:"18"}}],props:{height:"452",width:"688"}}}]),e}(View),FrdHeadUI=function(t){function e(){this.img_touxiang=null,this.img_=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.FrdHeadUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{scaleX:"0.9",y:"9",scaleY:"0.9","var":"img_touxiang",width:"128",height:"128",skin:"reuse/tou0.jpg",x:"11"}},{type:"Image",props:{y:"0","var":"img_",sizeGrid:"30,30,80,30",height:"155",skin:"friendPanel/52d63a79b2606004.png",width:"138",x:"0"}}],props:{height:"155",width:"138"}}}]),e}(View),frdItemUI=function(t){function e(){this.img_Yaoqing=null,this.box_frd=null,this.label_wait=null,this.box_shang=null,this.head=null,this.label_name=null,this.btn_Add=null,this.box_exp=null,this.img_help=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.frdItemUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.friendInfoPanel.FrdHead"]=FrdHead,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"15","var":"img_Yaoqing",skin:"friendPanel/55d6f34ef7bc0017.png",x:"0"}},{type:"Box",child:[{type:"Image",props:{y:"15",width:"145",height:"209",skin:"friendPanel/txBg.png",sizeGrid:"10,10,10,10",x:"12.5"}},{type:"Image",props:{y:"49",skin:"friendPanel/55d2e1f6b3f03024.png",x:"57"}},{type:"Label",props:{y:"132",text:"添加关注",width:"143",align:"center",height:"34",name:"names",color:"#ffffff",fontSize:"20",bold:"true",x:"13.5"}},{type:"Label",props:{y:"188","var":"label_wait",text:"等待回复...",width:"144",align:"center",height:"34",color:"#000000",fontSize:"20",bold:"true",x:"13"}},{type:"Box",child:[{type:"FrdHead",props:{y:"12",runtime:"display.mainIcon.friendInfoPanel.FrdHead","var":"head",x:"17"}},{type:"Label",props:{y:"157","var":"label_name",text:"小八",color:"#ffffff",fontSize:"20",bold:"true",x:"24.5"}},{type:"Image",props:{y:"183","var":"btn_Add",width:"106",height:"39",skin:"reuse/52a55dd2a31c9004.png",x:"32"}},{type:"Box",child:[{type:"Image",props:{name:"levelBg",width:"64",height:"64",y:"0",skin:"reuse/527cbab92a3e4016.png",x:"0"}}],props:{height:"64",y:"0","var":"box_exp",width:"64",x:"0"}}],props:{"var":"box_shang"}}],props:{"var":"box_frd"}},{type:"Image",props:{scaleX:"0.8",y:"0",scaleY:"0.8","var":"img_help",skin:"friendPanel/52bad0abfb1dd002.png",x:"126"}}],props:{height:"226",width:"158"}}}]),e}(View),frdS_itemUI=function(t){function e(){this.head=null,this.label_name=null,this.img_hengxian=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.frdsearch.frdS_itemUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.Head"]=Head,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Head",props:{scaleX:"0.8",runtime:"display.mainIcon.Head",scaleY:"0.8","var":"head",width:"100",height:"100",y:"0",x:"0"}},{type:"Label",props:{y:"30.5",strokeColor:"#000000",text:"名字名字",width:"400",align:"left",height:"40","var":"label_name",color:"#ffffff",fontSize:"30",stroke:"1",x:"115"}},{type:"Image",props:{y:"105","var":"img_hengxian",right:"10",width:"580",left:"10",height:"2",skin:"friendPanel/txBg.png",x:"10"}}],props:{height:"110",width:"600",mouseEnabled:"true"}}}]),e}(View),frdS_viewUI=function(t){function e(){this.list_=null,this.box_noFind=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.frdsearch.frdS_viewUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.friendInfoPanel.frdsearch.frdS_item"]=frdS_item,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",sizeGrid:"3,3,3,3",height:"480",skin:"friendPanel/bj.png",width:"1058",x:"0"}},{type:"List",child:[{type:"frdS_item",props:{y:"0",runtime:"display.mainIcon.friendInfoPanel.frdsearch.frdS_item",name:"render",width:"960",x:"0"}}],props:{y:"7",repeatX:"1",vScrollBarSkin:"reuse/vscroll.png",width:"960",height:"464","var":"list_",repeatY:"5",x:"36"}},{type:"Box",child:[{type:"Image",props:{y:"0",sizeGrid:"3,3,3,3",height:"480",skin:"friendPanel/txBg1.png",width:"1058",x:"0"}},{type:"Label",props:{y:"220.5",text:"没有找到此好友",align:"left",color:"#ffffff",fontSize:"30",bold:"true",x:"418.5"}}],props:{"var":"box_noFind",visible:"false"}}],props:{height:"478",width:"1058"}}}]),e}(View),Frd_ApplyItemUI=function(t){function e(){this.img_bj0=null,this.img_bj=null,this.label=null,this.list_=null,this.btn_lingqu=null,this.img_yilingqu=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.Frd_ApplyItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0","var":"img_bj0",sizeGrid:"40,20,40,20",height:"117",width:"379",x:"0"}},{type:"Image",props:{y:"53","var":"img_bj",width:"87",height:"39",skin:"friendPanel/55d1c54ca089802e.png",x:"282"}},{type:"Label",props:{y:"17","var":"label",text:"邀请1位小伙伴升到7级奖励",fontSize:"20",bold:"true",x:"9"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{name:"img",width:"32",height:"32",y:"0",skin:"reuse/527cc25d2399b00b.png",x:"0"}}],props:{height:"43",y:"0",name:"render",width:"50",x:"0"}}],props:{y:"49",repeatX:"5","var":"list_",x:"13"}},{type:"Button",props:{y:"42","var":"btn_lingqu",labelSize:"28",stateNum:"1",label:"领取",labelBold:"true",height:"50",labelColors:"#000000,#000000,#000000",skin:"reuse/btn_Qd.png",width:"104",x:"269"}},{type:"Image",props:{height:"64",y:"38","var":"img_yilingqu",width:"128",x:"270"}}],props:{height:"117",width:"379"}}}]),e}(View),gropSelectUI=function(t){function e(){this.image_auto=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.gropSelectUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0","var":"image_auto",sizeGrid:"30,30,30,30",height:"482",skin:"chat/52A67C1FB27C6003.png",width:"167",x:"0"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item0",labelSize:"20",sizeGrid:"10,30,10,30",width:"139",labelBold:"true",x:"15",y:"16",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item1",labelSize:"20",sizeGrid:"10,30,10,30",width:"139",labelBold:"true",x:"15",y:"80",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item2",labelSize:"20",sizeGrid:"10,30,10,30",width:"139",labelBold:"true",x:"15",y:"144",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item3",labelSize:"20",sizeGrid:"10,30,10,30",width:"139",labelBold:"true",x:"15",y:"208",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item4",labelSize:"20",sizeGrid:"10,30,10,30",width:"139",labelBold:"true",x:"15",y:"272",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item5",labelSize:"20",sizeGrid:"10,30,10,30",width:"139",labelBold:"true",x:"15",y:"336",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item6",labelSize:"20",sizeGrid:"10,30,10,30",width:"139",labelBold:"true",x:"15",y:"400",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}}],props:{height:"482",width:"167",mouseEnabled:"true"}}}]),e}(View),HeadClickUI=function(t){function e(){this.box_Tip=null,this.bj=null,this.btn_jubao=null,this.label_name=null,this.box_grop=null,this.jiantou=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.HeadClickUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{y:"0","var":"bj",sizeGrid:"30,30,30,30",height:"324",skin:"chat/52A67C1FB27C6003.png",width:"160",x:"0"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"HeadClickItem",labelSize:"25",sizeGrid:"10,30,10,30",width:"128",labelBold:"true",x:"17",y:"244",labelStrokeColor:"#000000","var":"btn_jubao",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"举报"}},{type:"Image",props:{visible:"false",y:"50",name:"jiao",skin:"chat/52A55E44A31C9006.png",x:"17"}},{type:"Image",props:{y:"178",visible:"false",skin:"chat/52A55DD2A31C9004.png",x:"17"}},{type:"Image",props:{visible:"false",y:"114",name:"cha",skin:"chat/531050D5A624F048.png",x:"17"}},{type:"Label",props:{name:"ming","var":"label_name",text:"清幽谷",width:"126",align:"center",height:"28",y:"21",fontSize:"18",bold:"true",x:"17"}}],props:{y:"0","var":"box_Tip",x:"40"}},{type:"Box",child:[{type:"Image",props:{height:"482",skin:"chat/52A67C1FB27C6003.png",sizeGrid:"30,30,30,30",width:"184"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item0",labelSize:"20",sizeGrid:"10,30,10,30",width:"155",labelBold:"true",x:"15",y:"16",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item1",labelSize:"20",sizeGrid:"10,30,10,30",width:"155",labelBold:"true",x:"15",y:"80",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item2",labelSize:"20",sizeGrid:"10,30,10,30",width:"155",labelBold:"true",x:"15",y:"144",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item3",labelSize:"20",sizeGrid:"10,30,10,30",width:"155",labelBold:"true",x:"15",y:"208",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item4",labelSize:"20",sizeGrid:"10,30,10,30",width:"155",labelBold:"true",x:"15",y:"272",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item5",labelSize:"20",sizeGrid:"10,30,10,30",width:"155",labelBold:"true",x:"15",y:"336",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item6",labelSize:"20",sizeGrid:"10,30,10,30",width:"155",labelBold:"true",x:"15",y:"400",labelStrokeColor:"#000000",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"好友"}},{type:"Image",props:{height:"36",name:"duigou",y:"30",width:"42",x:"115"}}],props:{mouseEnabled:"true",y:"0","var":"box_grop",x:"40"}},{type:"Image",props:{scaleX:"0.8",y:"130",scaleY:"0.6","var":"jiantou",width:"64",height:"64",skin:"chat/52A67BFEB27C6002.png",x:"0"}}]}}]),e}(View),HeadUI=function(t){function e(){this.img_touxiang=null,this.img_=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.HeadUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"13","var":"img_touxiang",width:"96",height:"96",name:"img",skin:"reuse/tou0.jpg",x:"16"}},{type:"Image",props:{y:"0","var":"img_",width:"128",height:"128",skin:"reuse/528077F963A9A01F.png",x:"0"}}],props:{height:"128",width:"128"}}}]),e}(View),mainIconUI=function(t){function e(){this.box_0=null,this.m_rankIcon=null,this.box_2=null,this.img_2=null,this.tipLogo_box2=null,this.box_activity=null,this.box_ani=null,this.activity_timeBox=null,this.image_gan=null,this.box_3=null,this.tipLogo_market3=null,this.box_1=null,this.btn_chat=null,this.tipLogo_chat=null,this.rightIcon=null,this.upperIcon=null,this.upp_=null,this.right_=null,this.box_uppEff=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.mainIconUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.RightIcon"]=RightIcon,View.viewClassMap["display.mainIcon.UpperIcon"]=UpperIcon,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{y:"0","var":"m_rankIcon",width:"77",height:"77",skin:"mainIcon/527CBACC2A3E4020.png",x:"0"}}],props:{x:"2",y:"536","var":"box_0",mouseEnabled:"true",bottom:"122",left:"5"}},{type:"Box",child:[{type:"Image",props:{y:"0","var":"img_2",width:"77",height:"77",skin:"mainIcon/5602496aa909b006.png",x:"0"}},{type:"Image",props:{y:"37","var":"tipLogo_box2",skin:"mainIcon/52aab804f337e00a.png",x:"48"}}],props:{y:"536","var":"box_2",bottom:"122",mouseEnabled:"true",right:"5",x:"926"}},{type:"Box",child:[{type:"Image",props:{height:"77",y:"15",skin:"mainIcon/55c16d049e7a7008.png",width:"77",x:"6"}},{type:"Box",props:{height:"51",y:"0","var":"box_ani",width:"51",x:"0"}},{type:"Box",child:[{type:"Image",props:{y:"-8",width:"105",height:"64",skin:"mainIcon/55c3483ab69e002c.png",sizeGrid:"30,5,30,50",x:"0"}}],props:{height:"51",y:"0","var":"activity_timeBox",width:"81",x:"0"}},{type:"Image",props:{y:"57","var":"image_gan",width:"34",height:"34",visible:"false",skin:"mainIcon/52aab804f337e00a.png",x:"52"}}],props:{"var":"box_activity",y:"150"}},{type:"Box",child:[{type:"Image",props:{height:"128",y:"0",skin:"mainIcon/527cba962a3e4006.png",width:"128",x:"0"}},{type:"Image",props:{y:"30",name:"gan","var":"tipLogo_market3",skin:"mainIcon/52aab804f337e00a.png",x:"25"}}],props:{y:"607","var":"box_3",bottom:"-1",mouseEnabled:"true",right:"5",x:"881"}},{type:"Box",child:[{type:"Image",props:{height:"128",y:"0",skin:"mainIcon/527cbaa02a3e400b.png",width:"128",x:"0"}},{type:"Image",props:{visible:"false",y:"66",name:"gan",skin:"mainIcon/52aab804f337e00a.png",x:"97"}}],props:{x:"126",y:"-24","var":"box_1",mouseEnabled:"true",bottom:"-3",left:"5"}},{type:"Box",child:[{type:"Clip",props:{width:"64",clipX:"2",height:"126",index:"0",skin:"mainIcon/clip_kg.png",x:"0"}},{type:"Image",props:{y:"82","var":"tipLogo_chat",skin:"mainIcon/52aab804f337e00a.png",x:"19"}}],props:{y:"358","var":"btn_chat",pivotX:"0",pivotY:"64",mouseEnabled:"true",height:"126",width:"64",x:"0"}},{type:"rightIcon",props:{runtime:"display.mainIcon.RightIcon","var":"rightIcon",width:"178",mouseEnabled:"true",height:"185",top:"5",right:"5"}},{type:"upperIcon",props:{mouseEnabled:"true",top:"5",runtime:"display.mainIcon.UpperIcon","var":"upperIcon",left:"5"}},{type:"Box",props:{height:"64",top:"5","var":"upp_",width:"671",left:"5"}},{type:"Box",props:{height:"185",top:"5","var":"right_",right:"5",width:"178"}},{type:"Box",props:{height:"64",top:"5","var":"box_uppEff",width:"671",left:"5"}}],props:{mouseThrough:"true"}}}]),e}(View),OtherGameShowUI=function(t){function e(){this.image_goHome=null,this.image_photo=null,this.box_up=null,this.head=null,this.img_xingxing=null,this.img_add=null,this.img_mail=null,this.img_Zan=null,this.img_del=null,this.box_name=null,this.label_name=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.OtherGameShowUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.friendInfoPanel.FrdHead"]=FrdHead,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"477","var":"image_goHome",width:"128",height:"128",skin:"mainOther/5214a5fe1b71500e.png",x:"361"}},{type:"Image",props:{y:"392","var":"image_photo",width:"77",height:"77",skin:"mainOther/560225faa6541009.png",x:"415"}},{type:"Box",child:[{type:"Image",props:{height:"128",y:"0",skin:"mainOther/52a1a89e4adc7004.png",width:"290",x:"0"}},{type:"FrdHead",props:{scaleX:"0.6",y:"24",scaleY:"0.6","var":"head",width:"130",height:"150",runtime:"display.mainIcon.friendInfoPanel.FrdHead",x:"9"}},{type:"Image",props:{y:"14","var":"img_xingxing",width:"50",height:"50",skin:"mainOther/527cbab92a3e4016.png",x:"91"}},{type:"Image",props:{y:"58","var":"img_add",width:"64",height:"64",skin:"mainOther/52a2e370dbcda006.png",x:"86"}},{type:"Image",props:{y:"58","var":"img_mail",skin:"mainOther/52a2e32edbcda003.png",x:"147"}},{type:"Image",props:{y:"58","var":"img_Zan",skin:"mainOther/55e6a18ef1811012.png",x:"208"}},{type:"Image",props:{y:"58","var":"img_del",width:"64",height:"64",skin:"mainOther/52a2e374dbcda009.png",x:"86"}},{type:"Box",child:[{type:"Label",props:{strokeColor:"#000000",text:"名字名字名字",align:"left",color:"#ffffff",fontSize:"18",bold:"true",stroke:"1","var":"label_name"}}],props:{height:"30",y:"26","var":"box_name",width:"140",x:"138"}}],props:{mouseEnabled:"true",y:"0","var":"box_up",x:"38"}}],props:{height:"600",width:"500",mouseEnabled:"true"}}}]),e}(View),rightIconUI=function(t){function e(){this.rightContainer=null,this.item4=null,this.item5=null,this.item6=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.rightIconUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Box",child:[{type:"Image",props:{y:"19",width:"31",height:"28",name:"image1",skin:"mainIcon/jia.png",x:"5"}},{type:"Image",props:{scaleX:"-1",y:"4",width:"173",height:"57",skin:"mainIcon/parog_aBG.png",sizeGrid:"0,0,30,80",x:"173"}},{type:"Image",props:{y:"0",width:"64",height:"64",name:"image",skin:"mainIcon/527cc2532399b007.png",x:"113"}}],props:{name:"item4","var":"item4",width:"169",mouseEnabled:"true",height:"54",y:"0",x:"1"}},{type:"Box",child:[{type:"Image",props:{y:"19",width:"31",height:"28",name:"image1",skin:"mainIcon/jia.png",x:"5"}},{type:"Image",props:{scaleX:"-1",y:"4",width:"173",height:"57",skin:"mainIcon/parog_aBG.png",sizeGrid:"0,0,30,80",x:"173"}},{type:"Image",props:{y:"0",width:"64",height:"64",name:"image",skin:"mainIcon/527cc2592399b009.png",x:"113"}}],props:{name:"item5","var":"item5",width:"169",mouseEnabled:"true",height:"54",y:"62",x:"0"}},{type:"Box",child:[{type:"Image",props:{y:"19",width:"31",height:"28",name:"image1",skin:"mainIcon/jia.png",x:"5"}},{type:"Image",props:{scaleX:"-1",y:"4",width:"173",height:"57",skin:"mainIcon/parog_aBG.png",sizeGrid:"0,0,30,80",x:"173"}},{type:"Image",props:{y:"0",width:"64",height:"64",name:"image",skin:"mainIcon/5590dbd596c32014.png",x:"113"}}],props:{name:"item6","var":"item6",width:"169",mouseEnabled:"true",height:"54",y:"121",x:"1"}}],props:{y:"0","var":"rightContainer",x:"0"}}]}}]),e}(View),decorateUI=function(t){function e(){this.decorateList=null,this.bjt=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.trophyInfoPanel.decorateUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"List",child:[{type:"Box",child:[{type:"Image",props:{height:"106",y:"9",skin:"trophy/52a2bfc2d3253002.png",width:"263"}},{type:"Image",props:{scaleX:".3",y:"20",scaleY:".3",mouseThrough:"true",name:"icon",x:"28"}},{type:"Image",props:{scaleX:"0.7",scaleY:"0.7",width:"96.8571428571429",height:"121.14285714285721",skin:"trophy/527cbab02a3e4012.png",x:"130"}},{type:"Label",props:{y:"81",text:"储存： 1个",width:"105",align:"left",height:"25",name:"num",color:"#000000",fontSize:"18",bold:"true",x:"141"}}],props:{name:"render"}}],props:{y:"119","var":"decorateList",vScrollBarSkin:"reuse/vscroll.png",width:"790",height:"329",spaceY:"-10",x:"8"}},{type:"Box",child:[{type:"Image",props:{height:"127","var":"bjt",width:"800"}},{type:"Image",props:{height:"57",y:"30",skin:"trophy/52de56172ea47003.png",width:"70",x:"105"}},{type:"Label",props:{y:"10",text:"总评价:",width:"114",align:"left",height:"40",color:"#ffff00",fontSize:"33",bold:"true",stroke:"1",x:"180"}},{type:"Label",props:{y:"30",text:"每天可领取额外奖励:",width:"225",align:"left",height:"28",color:"#ffff00",fontSize:"20",bold:"true",x:"507"}},{type:"Clip",props:{scaleX:"0.5",y:"91",scaleY:"0.5",index:"2",width:"31",x:"208",height:"31",clipY:"3",skin:"reuse/clip_52d63a9fb2606005.png",clipX:"4"}},{type:"Clip",props:{scaleX:"0.5",y:"91",scaleY:"0.5",index:"2",width:"31",x:"223",height:"31",clipY:"3",skin:"reuse/clip_52d63a9fb2606005.png",clipX:"4"}},{type:"Clip",props:{scaleX:"0.5",y:"91",scaleY:"0.5",width:"31",x:"238",height:"31",clipY:"3",skin:"reuse/clip_52d63a9fb2606005.png",clipX:"4"}},{type:"Clip",props:{scaleX:"0.5",y:"91",scaleY:"0.5",width:"31",x:"253",height:"31",clipY:"3",skin:"reuse/clip_52d63a9fb2606005.png",clipX:"4"}},{type:"Clip",props:{scaleX:"0.5",y:"91",scaleY:"0.5",width:"31",x:"268",height:"31",clipY:"3",skin:"reuse/clip_52d63a9fb2606005.png",clipX:"4"}}],props:{y:"0",x:"2"}}],props:{height:"450",mouseThrough:"true",width:"800"}}}]),e}(View),machineUI=function(t){function e(){this.macList=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.trophyInfoPanel.machineUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"List",child:[{type:"Box",child:[{type:"Image",props:{y:"0",width:"399",height:"157",skin:"trophy/52a2bfc2d3253002.png",sizeGrid:"20,0,20,0",x:"0"}},{type:"Label",props:{y:"30",text:"乳品机",width:"181",align:"center",height:"50",name:"tit",fontSize:"35",bold:"true",x:"202"}}],props:{name:"render"}}],props:{y:"1",vScrollBarSkin:"reuse/vscroll.png",width:"812",height:"434","var":"macList",x:"0"}}],props:{height:"450",width:"820"}}}]),e}(View),upperIconUI=function(t){function e(){this.upperContainer=null,this.item0=null,this.item1=null,this.item2=null,this.item3=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.upperIconUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Box",child:[{type:"ProgressBar",props:{value:"0",y:"14",name:"progress",width:"103",mouseEnabled:"false",mouseThrough:"false",skin:"mainIcon/progress.png",sizeGrid:"12,0,12,0",x:"53"}},{type:"Image",props:{y:"3",skin:"mainIcon/parog_aBG.png",x:"2"}},{type:"Image",props:{name:"image",width:"64",height:"64",y:"0",skin:"mainIcon/527cbab92a3e4016.png",x:"0"}}],props:{name:"item0","var":"item0",mouseEnabled:"true"}},{type:"Box",child:[{type:"ProgressBar",props:{value:"0",y:"14",name:"progress",width:"103",mouseEnabled:"false",mouseThrough:"false",skin:"mainIcon/progress.png",sizeGrid:"12,0,12,0",x:"53"}},{type:"Image",props:{y:"3",skin:"mainIcon/parog_aBG.png",x:"2"}},{type:"Image",props:{scaleX:"1",name:"image",scaleY:"1",width:"64",height:"64",y:"0",skin:"mainIcon/51d569fe2878100c.png",x:"0"}}],props:{mouseEnabled:"true",name:"item1","var":"item1",x:"170"}},{type:"Box",child:[{type:"ProgressBar",props:{value:"0",y:"14",name:"progress",width:"103",mouseEnabled:"false",mouseThrough:"false",skin:"mainIcon/progress.png",sizeGrid:"12,0,12,0",x:"53"}},{type:"Image",props:{y:"3",skin:"mainIcon/parog_aBG.png",x:"2"}},{type:"Image",props:{scaleX:"1",name:"image",scaleY:"1",width:"64",height:"64",
y:"0",skin:"mainIcon/51d5747328781011.png",x:"0"}}],props:{mouseEnabled:"true",name:"item2","var":"item2",x:"342"}},{type:"Box",child:[{type:"ProgressBar",props:{value:"0",y:"14",name:"progress",width:"103",mouseEnabled:"false",mouseThrough:"false",skin:"mainIcon/progress.png",sizeGrid:"12,0,12,0",x:"53"}},{type:"Image",props:{y:"3",skin:"mainIcon/parog_aBG.png",x:"2"}},{type:"Image",props:{scaleX:"1",name:"image",scaleY:"1",width:"64",height:"64",y:"0",skin:"mainIcon/527cbab02a3e4012.png",x:"0"}}],props:{mouseEnabled:"true",name:"item3","var":"item3",x:"511"}}],props:{mouseEnabled:"true",y:"0","var":"upperContainer",x:"0"}}]}}]),e}(View),shengjiItemUI=function(t){function e(){this.image=null,this.label=null,this.box_zuanshi=null,this.label_zuanshi=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.warehouse.shengjiItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{name:"image","var":"image",width:"85",height:"85",y:"0",skin:"reuse/527cc2532399b007.png",x:"0"}},{type:"Label",props:{strokeColor:"#000000",text:"50/50",mouseEnabled:"false",color:"#ffffff",fontSize:"25",x:"109",y:"30","var":"label",width:"68",align:"center",height:"30",name:"label",bold:"true",stroke:"1"}},{type:"Box",child:[{type:"Image",props:{height:"32",skin:"reuse/527cc2592399b009.png",width:"32",x:"59"}},{type:"Label",props:{strokeColor:"#000000",text:"120",mouseEnabled:"false",color:"#ffffff",fontSize:"25",y:"1","var":"label_zuanshi",width:"59",align:"right",height:"30",bold:"true",stroke:"1"}}],props:{y:"29","var":"box_zuanshi",x:"192"}}]}}]),e}(View),manufactureUI=function(t){function e(){this.title=null,this.wuList=null,this.add=null,this.baiBox=null,this.moxing=null,this.m_pOreBtn=null,e.__super.call(this)}__class(e,"game.ui.manufactureUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Label",props:{y:"136",mouseThrough:"true","var":"title",text:"榨汁机",mouseEnabled:"false",strokeColor:"#000000",color:"#ffffff",fontSize:"45",bold:"true",stroke:"1",x:"105"}},{type:"Image",props:{mouseEnabled:"false",y:"0",mouseThrough:"true",skin:"manufacture/5284c059a4be7021.png",x:"0"}},{type:"List",child:[{type:"Box",child:[{type:"Label",props:{visible:"false",y:"10",name:"id",text:"label",x:"10"}},{type:"Image",props:{height:"108",name:"imageBg",skin:"manufacture/5284c048a4be7013.png",width:"108",mouseEnabled:"false"}},{type:"Box",child:[{type:"Image",props:{height:"75",name:"image",skin:"reuse/53850295f96d3011.png",width:"75"}},{type:"Label",props:{name:"label",text:"33",width:"42",mouseEnabled:"false",align:"center",height:"24",y:"55",color:"#ffffff",fontSize:"18",bold:"true",x:"40"}}],props:{name:"ibox",pivotX:"37",pivotY:"37",height:"75",y:"14",width:"74",x:"14"}}],props:{height:"97",y:"0",name:"render",width:"101",x:"0"}}],props:{spaceX:"15",y:"8","var":"wuList",width:"461",hScrollBarSkin:"reuse/vscroll.png",mouseEnabled:"true",height:"106",repeatY:"1",x:"16"}},{type:"Box",child:[{type:"Image",props:{skin:"manufacture/5284c052a4be701c.png"}}],props:{y:"212","var":"add",x:"400"}},{type:"Box",child:[{type:"Box",child:[{type:"Image",props:{height:"85",skin:"manufacture/5284be26a4be700d.png",width:"85"}},{type:"Image",props:{height:"75",y:"5",name:"image",width:"75",x:"4"}}],props:{scaleX:"0.8",mouseThrough:"false",y:"266",width:"87",mouseEnabled:"true",height:"85",name:"item7",scaleY:"0.8",x:"236"}},{type:"Box",child:[{type:"Image",props:{height:"85",skin:"manufacture/5284be26a4be700d.png",width:"85"}},{type:"Image",props:{height:"75",y:"5",name:"image",width:"75",x:"4"}}],props:{scaleX:"0.8",mouseThrough:"false",y:"266",width:"87",mouseEnabled:"true",height:"85",name:"item8",scaleY:"0.8",x:"308"}},{type:"Box",child:[{type:"Image",props:{height:"85",skin:"manufacture/5284be26a4be700d.png",width:"85"}},{type:"Image",props:{height:"75",y:"5",name:"image",width:"75",x:"4"}}],props:{scaleX:"0.8",mouseThrough:"false",y:"266",width:"87",mouseEnabled:"true",height:"85",name:"item5",scaleY:"0.8",x:"92"}},{type:"Box",child:[{type:"Image",props:{height:"85",skin:"manufacture/5284be26a4be700d.png",width:"85"}},{type:"Image",props:{height:"75",y:"5",name:"image",width:"75",x:"4"}}],props:{scaleX:"0.8",mouseThrough:"false",y:"266",width:"87",mouseEnabled:"true",height:"85",name:"item6",scaleY:"0.8",x:"164"}},{type:"Box",child:[{type:"Image",props:{height:"85",skin:"manufacture/5284be26a4be700d.png",width:"85"}},{type:"Image",props:{height:"75",y:"5",name:"image",width:"75",x:"4"}}],props:{scaleX:"1",mouseThrough:"false",scaleY:"1",width:"87",mouseEnabled:"true",height:"85",name:"item0",y:"170"}},{type:"Box",child:[{type:"Image",props:{height:"85",skin:"manufacture/5284be26a4be700d.png",width:"85"}},{type:"Image",props:{height:"75",y:"5",name:"image",width:"75",x:"4"}}],props:{scaleX:"0.8",mouseThrough:"false",y:"188",width:"87",mouseEnabled:"true",height:"85",name:"item1",scaleY:"0.8",x:"92"}},{type:"Box",child:[{type:"Image",props:{height:"85",skin:"manufacture/5284be26a4be700d.png",width:"85"}},{type:"Image",props:{height:"75",y:"5",name:"image",width:"75",x:"4"}}],props:{scaleX:"0.8",mouseThrough:"false",y:"188",width:"87",mouseEnabled:"true",height:"85",name:"item2",scaleY:"0.8",x:"164"}},{type:"Box",child:[{type:"Image",props:{height:"85",skin:"manufacture/5284be26a4be700d.png",width:"85"}},{type:"Image",props:{height:"75",y:"5",name:"image",width:"75",x:"4"}}],props:{scaleX:"0.8",mouseThrough:"false",y:"188",width:"87",mouseEnabled:"true",height:"85",name:"item3",scaleY:"0.8",x:"236"}},{type:"Box",child:[{type:"Image",props:{height:"85",skin:"manufacture/5284be26a4be700d.png",width:"85"}},{type:"Image",props:{height:"75",y:"5",name:"image",width:"75",x:"4"}}],props:{scaleX:"0.8",mouseThrough:"false",y:"188",width:"87",mouseEnabled:"true",height:"85",name:"item4",scaleY:"0.8",x:"308"}},{type:"Box",child:[{type:"Image",props:{height:"75",name:"image",skin:"reuse/53850295f96d3011.png",width:"75"}},{type:"Label",props:{y:"55",text:"33",width:"42",align:"center",height:"24",name:"label",color:"#ffffff",fontSize:"18",bold:"true",x:"40"}}],props:{mouseEnabled:"false",visible:"false","var":"moxing",x:"11"}}],props:{y:"22","var":"baiBox",x:"20"}},{type:"Image",props:{y:"16","var":"m_pOreBtn",width:"75",height:"75",visible:"false",skin:"reuse/53850295f96d3011.png",x:"-99"}}],props:{height:"295",mouseThrough:"true",width:"490",mouseEnabled:"true"}}}]),e}(View),MarketItemUI=function(t){function e(){this.box_scalc=null,this.box_item=null,this.Image_new=null,this.box_name=null,this.txt_title=null,this.image_name=null,this.box_icon=null,this.image_icon=null,this.box_shoujia=null,this.image_shoujia=null,this.label_weikaiqi_yigoumai=null,e.__super.call(this)}__class(e,"game.ui.market.MarketItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Box",props:{height:"128",y:"0","var":"box_item",width:"128",x:"0"}},{type:"Image",props:{y:"1","var":"Image_new",width:"64",height:"64",skin:"market/img_shop_new.png",x:"0"}},{type:"Box",child:[{type:"Label",props:{name:"txt_title","var":"txt_title",text:"鸡舍",strokeColor:"#000000",y:"2",color:"#ffffff",fontSize:"23",bold:"true",stroke:"1",x:"19"}},{type:"Image",props:{height:"21",y:"5","var":"image_name",skin:"reuse/5284c06ea4be702b.png",width:"21"}}],props:{y:"157","var":"box_name",width:"128",x:"0"}},{type:"Box",child:[{type:"Image",props:{y:"0","var":"image_icon",width:"28",height:"28",skin:"reuse/527cc2532399b007.png",x:"60"}}],props:{y:"207","var":"box_icon",width:"128",x:"0"}},{type:"Box",child:[{type:"Image",props:{height:"23",y:"2",skin:"market/img_shop_grid.png",width:"128"}},{type:"Image",props:{y:"0","var":"image_shoujia",width:"28",height:"28",skin:"reuse/527cc2532399b007.png",x:"75"}}],props:{y:"184","var":"box_shoujia",width:"128",x:"1"}},{type:"Label",props:{name:"item1","var":"label_weikaiqi_yigoumai",text:"99级开启",width:"128",align:"center",height:"30",y:"181",color:"#666666",fontSize:"23",bold:"true",x:"0"}}],props:{height:"235",y:"0","var":"box_scalc",width:"128",x:"0"}}],props:{height:"235",width:"128",mouseEnabled:"true"}}}]),e}(View),GBoardNoteUI=function(t){function e(){this.img_0=null,this.img_1=null,this.m_pName=null,this.m_pCanDo=null,this.m_pFastPro=null,e.__super.call(this)}__class(e,"game.ui.order.GBoardNoteUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.comui.GFastTimePro"]=GFastTimePro,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"2","var":"img_0",width:"160",rotation:"0",height:"138",skin:"dingdan/img_r_bg.png",sizeGrid:"30,30,30,30",x:"0"}},{type:"Image",props:{y:"-8",visible:"true","var":"img_1",skin:"dingdan/img_w_zs.png",x:"48"}},{type:"Label",props:{y:"21","var":"m_pName",text:"Adava",width:"154",align:"center",height:"30",color:"#ffffff",fontSize:"20",stroke:"1",x:"3"}},{type:"Image",props:{y:"-8","var":"m_pCanDo",width:"44",height:"44",name:"m_pCanDo",skin:"dingdan/img_duigou.png",x:"118"}},{type:"GFastTimePro",props:{y:"35",name:"m_pFastPro","var":"m_pFastPro",runtime:"game.ui.comui.GFastTimePro",x:"3"}}],props:{pivotY:"0",height:"140",width:"160",pivotX:"80"}}}]),e}(View),NoteMaItemUI=function(t){function e(){this.m_item=null,e.__super.call(this)}__class(e,"game.ui.order.NoteMaItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{name:"image","var":"m_item",width:"64",height:"64",y:"0",skin:"reuse/51D569FE2878100C.png",x:"0"}}],props:{height:"90",width:"64"}}}]),e}(View),PetPanelUI=function(t){function e(){this.PutArrow=null,this.buyContainer=null,this.buyButton=null,this.m_pStartBtn=null,this.xbIcon=null,this.GAddBtn=null,e.__super.call(this)}__class(e,"game.ui.pet.PetPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Label",props:{y:"45",text:"总幸运值：",color:"#ffffff",fontSize:"26",stroke:"1",x:"44"}},{type:"Image",props:{y:"237","var":"PutArrow",skin:"pet/52a1c1d0cab47002.png",x:"73"}},{type:"Box",child:[{type:"Label",props:{y:"13",color:"#ffffff",fontSize:"30",text:"去商店购买一只宠物吧！"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff","var":"buyButton",labelSize:"20",stateNum:"1",label:"前往购买",height:"64",labelStroke:"1",skin:"reuse/btn_Qd.png",width:"159",x:"358"}}],props:{y:"142","var":"buyContainer",x:"182"}},{type:"Box",child:[{type:"Image",props:{height:"128","var":"xbIcon",skin:"pet/52a72096192b3006.png",width:"128"}},{type:"Label",props:{y:"123",text:"开始寻宝",color:"#ffffff",fontSize:"20",stroke:"1",x:"25"}}],props:{y:"282","var":"m_pStartBtn",x:"460"}},{type:"Box",child:[{type:"Image",props:{skin:"pet/5284c052a4be701c.png"}}],props:{y:"332","var":"GAddBtn",x:"322"}}],props:{height:"500",mouseThrough:"true",width:"820"}}}]),e}(View),QuestMeiRiUI=function(t){function e(){this.meiriList=null,e.__super.call(this)}__class(e,"game.ui.quest.QuestMeiRiUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",width:"547",height:"382",skin:"quest/563346f5bf0fd008.png",sizeGrid:"30,30,30,30",x:"61"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{height:"138",skin:"quest/img_content_item_bg.png",sizeGrid:"55,55,55,55",width:"519"}},{type:"Image",props:{y:"13",width:"470",height:"69",skin:"quest/img_item_content_bg.png",sizeGrid:"20,17,20,17",x:"24"}},{type:"Label",props:{name:"m_iMem",text:"收获作物(三)",width:"486",height:"41",y:"71",color:"#990000",fontSize:"32",bold:"true",x:"37"}},{type:"Image",props:{y:"38",name:"m_iComplete",skin:"quest/55c48995ce8eb008.png",x:"390"}},{type:"Box",child:[{type:"Image",props:{scaleX:"0.62",name:"icon",scaleY:"0.62",width:"64",height:"64",skin:"reuse/S45418E8D.png"}}],props:{y:"29",name:"reward0",x:"39"}},{type:"Box",child:[{type:"Image",props:{scaleX:"0.62",name:"icon",scaleY:"0.62",width:"64",height:"64",skin:"reuse/S45418E8D.png"}}],props:{y:"29",name:"reward1",x:"168"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"35",labelStroke:"1",x:"377",scaleX:"1",y:"57",scaleY:"1",stateNum:"1",name:"m_iBtn",labelStrokeColor:"#000000",skin:"reuse/btn_Qd.png",label:"领取"}},{type:"Box",child:[{type:"Image",props:{name:"ibg",sizeGrid:"15,15,15,15",height:"34",alpha:"0.4",skin:"quest/5270efe1bcaf3012.png",width:"80",x:"31"}},{type:"Label",props:{name:"curr",strokeColor:"#000000",width:"65",align:"right",height:"35",y:"4",color:"#ff0000",fontSize:"20",bold:"true",stroke:"1",x:"0"}},{type:"Label",props:{name:"need",strokeColor:"#000000",width:"39",height:"34",y:"4",color:"#ffffff",fontSize:"20",bold:"true",stroke:"1",x:"66"}}],props:{name:"m_iNum",y:"77",x:"376"}}],props:{name:"render"}}],props:{y:"10",vScrollBarSkin:"reuse/vscroll.png","var":"meiriList",width:"519",height:"367",spaceY:"-10",enableRenderMerge:"true",x:"78"}},{type:"Label",props:{name:"label",text:"已完成的日常任务跨天后会刷新",y:"442",color:"#ffffff",fontSize:"35",bold:"true",stroke:"1",x:"0"}}],props:{height:"486",width:"608"}}}]),e}(View),QuestZhuXianUI=function(t){function e(){this.contentLabel=null,this.zhuList=null,this.btn_lq=null,e.__super.call(this)}__class(e,"game.ui.quest.QuestZhuXianUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",sizeGrid:"20,20,20,20",height:"122",skin:"quest/renwu_bg_shuoming.png",width:"550",x:"111"}},{type:"Label",props:{y:"10",wordWrap:"true","var":"contentLabel",text:"H0！~ 更多的耕地，更快的生产。 听说路边摊出售东西赚钱最快了，快试试！",width:"534",align:"left",height:"107",fontSize:"28",bold:"true",x:"120"}},{type:"Box",child:[{type:"Image",props:{y:"8",width:"116",height:"36",alpha:"0.3",skin:"quest/5270efe1bcaf3012.png",sizeGrid:"17,15,17,15",x:"19"}},{type:"Image",props:{scaleX:"0.8",name:"icon",scaleY:"0.8",skin:"reuse/S45418E8D.png"}}],props:{name:"item2",y:"431",x:"496"}},{type:"Label",props:{y:"435",text:"任务奖励:",color:"#ffffff",fontSize:"31",bold:"true",stroke:"1",x:"0"}},{type:"Box",child:[{type:"Image",props:{y:"8",width:"116",height:"36",alpha:"0.3",skin:"quest/5270efe1bcaf3012.png",sizeGrid:"15,15,15,15",x:"19"}},{type:"Image",props:{scaleX:"0.8",name:"icon",scaleY:"0.8",skin:"reuse/S45418E8D.png"}}],props:{name:"item0",y:"432",x:"150"}},{type:"Box",child:[{type:"Image",props:{y:"8",width:"116",height:"36",alpha:"0.3",skin:"quest/5270efe1bcaf3012.png",sizeGrid:"15,15,15,15",x:"19"}},{type:"Image",props:{scaleX:"0.8",name:"icon",scaleY:"0.8",skin:"reuse/S45418E8D.png"}}],props:{name:"item1",y:"432",x:"304"}},{type:"Box",child:[{type:"Box",child:[{type:"Image",props:{height:"77",skin:"quest/555a9ad82fe07006.png",width:"514",x:"30"}},{type:"Image",props:{y:"8",name:"icon",skin:"reuse/51D569FE2878100C.png"}},{type:"Image",props:{scaleX:"1.12",y:"22",scaleY:"1.12",name:"image",skin:"mainIcon/5284c06ea4be702b.png",x:"487"}},{type:"Image",props:{y:"22",sizeGrid:"15,15,15,15",height:"34",alpha:"0.4",skin:"quest/5270efe1bcaf3012.png",width:"136",x:"84"}},{type:"Label",props:{y:"22",text:"购买缝纫机",name:"title",fontSize:"28",bold:"true",x:"228"}}],props:{name:"item0"}},{type:"Box",child:[{type:"Image",props:{height:"77",skin:"quest/555a9ad82fe07006.png",width:"514",x:"30"}},{type:"Image",props:{y:"8",name:"icon",skin:"reuse/51D569FE2878100C.png"}},{type:"Image",props:{scaleX:"1.12",y:"22",scaleY:"1.12",name:"image",skin:"mainIcon/5284c06ea4be702b.png",x:"487"}},{type:"Image",props:{y:"22",sizeGrid:"15,15,15,15",height:"34",alpha:"0.4",skin:"quest/5270efe1bcaf3012.png",width:"136",x:"84"}},{type:"Label",props:{y:"22",text:"购买缝纫机",name:"title",fontSize:"28",bold:"true",x:"228"}}],props:{y:"85",name:"item1",x:"0"}},{type:"Box",child:[{type:"Image",props:{height:"77",skin:"quest/555a9ad82fe07006.png",width:"514",x:"30"}},{type:"Image",props:{y:"8",name:"icon",skin:"reuse/51D569FE2878100C.png"}},{type:"Image",props:{scaleX:"1.12",y:"22",scaleY:"1.12",name:"image",skin:"mainIcon/5284c06ea4be702b.png",x:"487"}},{type:"Image",props:{y:"22",sizeGrid:"15,15,15,15",height:"34",alpha:"0.4",skin:"quest/5270efe1bcaf3012.png",width:"136",x:"84"}},{type:"Label",props:{y:"22",text:"购买缝纫机",name:"title",fontSize:"28",bold:"true",x:"228"}}],props:{y:"170",name:"item2",x:"0"}}],props:{y:"137",name:"777","var":"zhuList",x:"118"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"35",sizeGrid:"20,40,20,40",label:"引导",labelBold:"true",skin:"reuse/button_527cbad72a3e402b.png",x:"484",y:"423","var":"btn_lq",width:"174",height:"71",labelStroke:"#000000",labelMargin:"30,20,35,20",stateNum:"1"}}],props:{height:"496",width:"662"}}}]),e}(View),RandsItemUI=function(t){function e(){this.m_pBg=null,this.m_pNoIcon=null,this.m_pName=null,e.__super.call(this)}__class(e,"game.ui.rank.RandsItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{height:"64","var":"m_pBg",skin:"ranking/5270aad9b2a0600d.png",sizeGrid:"10,10,8,10",width:"736"}},{type:"Image",props:{y:"0","var":"m_pNoIcon",width:"64",height:"64",skin:"ranking/5270acfbb2a06028.png",x:"4"}},{type:"Label",props:{text:"-",color:"#ffffcc",fontSize:"25",x:"193",y:"12","var":"m_pName",width:"370",align:"left",height:"41",name:"m_pName",bold:"true",stroke:"1"}}],props:{height:"64",width:"736"}}}]),e}(View),RankAwardViewUI=function(t){function e(){this.m_pTitle=null,this.m_iAward1=null,this.m_iAward0=null,this.m_iAward2=null,this.m_iAward3=null,this.m_iAward4=null,this.m_iAward5=null,this.m_iAward6=null,this.m_iAward7=null,this.m_iAward8=null,this.m_iAward9=null,this.m_iAward10=null,this.m_iCurAward=null,this.m_iCur=null,this.m_iLast=null,this.m_iGetAward=null,this.m_iCurGet=null,e.__super.call(this)}__class(e,"game.ui.rank.RankAwardViewUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.rank.award.SubAward"]=SubAward,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{height:"128",y:"26",skin:"ranking/55c3481ab69e0025.png",width:"531",x:"5"}},{type:"Image",props:{y:"142",sizeGrid:"20,20,20,20",height:"472",visible:"true",skin:"ranking/55c347cdb69e0012.png",width:"898",x:"0"}},{type:"Image",props:{y:"12",width:"366",height:"124",visible:"true",skin:"ranking/55c347cdb69e0012.png",sizeGrid:"20,20,20,20",x:"531"}},{type:"Image",props:{y:"-9",skin:"ranking/55d17c12990ba007.png",x:"5"}},{type:"Label",props:{visible:"true",strokeColor:"#ff6600",text:"领取上周排行榜奖励！",mouseEnabled:"false",color:"#ffffff",fontSize:"36",x:"96",y:"58",wordWrap:"true","var":"m_pTitle",width:"424",align:"left",height:"50",bold:"true",stroke:"1"}},{type:"SubAward",props:{y:"161",runtime:"game.ui.rank.award.SubAward","var":"m_iAward1",x:"466"}},{type:"SubAward",props:{runtime:"game.ui.rank.award.SubAward",y:"161","var":"m_iAward0",x:"22"}},{type:"SubAward",props:{runtime:"game.ui.rank.award.SubAward",y:"160","var":"m_iAward2",x:"683"}},{type:"SubAward",props:{y:"309",runtime:"game.ui.rank.award.SubAward","var":"m_iAward3",x:"20"}},{type:"SubAward",props:{y:"309",runtime:"game.ui.rank.award.SubAward","var":"m_iAward4",x:"243"}},{type:"SubAward",props:{y:"309",runtime:"game.ui.rank.award.SubAward","var":"m_iAward5",x:"466"}},{type:"SubAward",props:{y:"309",runtime:"game.ui.rank.award.SubAward","var":"m_iAward6",x:"683"}},{type:"SubAward",props:{y:"463",runtime:"game.ui.rank.award.SubAward","var":"m_iAward7",x:"20"}},{type:"SubAward",props:{y:"463",runtime:"game.ui.rank.award.SubAward","var":"m_iAward8",x:"243"}},{type:"SubAward",props:{y:"463",runtime:"game.ui.rank.award.SubAward","var":"m_iAward9",x:"466"}},{type:"SubAward",props:{y:"463",runtime:"game.ui.rank.award.SubAward","var":"m_iAward10",x:"683"}},{type:"Image",props:{y:"179",skin:"ranking/5270acfbb2a06028.png",x:"95"}},{type:"Box",child:[{type:"Label",props:{y:"1",wordWrap:"true",text:"当前奖品",width:"116",mouseEnabled:"false",align:"left",height:"28",visible:"true",color:"#000000",fontSize:"24",bold:"true"}},{type:"Label",props:{y:"48",wordWrap:"true",text:"下档奖品",width:"116",mouseEnabled:"false",align:"left",height:"28",visible:"true",color:"#000000",fontSize:"24",bold:"true"}},{type:"Label",props:{visible:"true",text:"排名",mouseEnabled:"false",color:"#ffffff",fontSize:"24",x:"111",wordWrap:"true","var":"m_iCur",width:"187",align:"left",height:"39",bold:"true",stroke:"1"}},{type:"Label",props:{visible:"true",text:"排名",mouseEnabled:"false",color:"#ffffff",fontSize:"24",x:"114",y:"46",wordWrap:"true","var":"m_iLast",width:"185",align:"left",height:"41",bold:"true",stroke:"1"}}],props:{height:"87",y:"40","var":"m_iCurAward",width:"338",x:"548"}},{type:"Box",child:[{type:"Label",props:{y:"1",wordWrap:"true",text:"当前奖品",width:"116",mouseEnabled:"false",align:"left",height:"28",visible:"true",color:"#000000",fontSize:"24",bold:"true"}},{type:"Label",props:{visible:"true",text:"排名",mouseEnabled:"false",color:"#ffffff",fontSize:"24",x:"111",wordWrap:"true","var":"m_iCurGet",width:"187",align:"left",height:"39",bold:"true"}}],props:{height:"87",y:"40","var":"m_iGetAward",width:"338",x:"548"}}],props:{height:"614",width:"898"}}}]),e}(View),RankGroupViewUI=function(t){function e(){e.__super.call(this)}__class(e,"game.ui.rank.RankGroupViewUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",sizeGrid:"20,20,20,20",height:"457",skin:"ranking/55c347cdb69e0012.png",width:"967",x:"0"}},{type:"Label",props:{y:"52",text:"晋级杯段可提高奖励！",width:"366",align:"left",height:"53",color:"#990000",fontSize:"34",bold:"true",x:"306"}},{type:"Image",props:{y:"20",skin:"ranking/55d3f5e5c61e900f.png",x:"67"}}],props:{height:"458",width:"968"}}}]),e}(View),SubActUI=function(t){function e(){this.m_pBg=null,this.m_iRankInfoLable=null,this.m_iInforLable=null,this.m_iTimeLable=null,this.m_iGetRewardBtn=null,this.m_iGotShow=null,e.__super.call(this)}__class(e,"game.ui.rank.SubActUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"-25","var":"m_pBg",sizeGrid:"10,0,10,0",mouseEnabled:"false",height:"212",skin:"ranking/564ab97930e4f014.png",width:"850",x:"0"}},{type:"Label",props:{visible:"true",text:"本周活动全球榜第1名",mouseEnabled:"false",color:"#660000",fontSize:"36",x:"320",y:"6",wordWrap:"true","var":"m_iRankInfoLable",width:"429",align:"left",height:"49",bold:"true"}},{type:"Label",props:{visible:"true",text:"通过路边摊销售的商品出现在报纸中时，广告信息将被置顶显示。",mouseEnabled:"false",color:"#000000",fontSize:"24",x:"331",y:"90",wordWrap:"true","var":"m_iInforLable",width:"439",align:"left",height:"70",bold:"true"}},{type:"Label",props:{visible:"true",text:"尊享7天",mouseEnabled:"false",color:"#0099ff",fontSize:"24",x:"331",y:"53",wordWrap:"true","var":"m_iTimeLable",width:"298",align:"left",height:"33",bold:"true"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"26",label:"领取",labelBold:"true",visible:"false",x:"729",y:"103","var":"m_iGetRewardBtn",stateNum:"1",height:"53",labelStroke:"1",skin:"reuse/btn_Qd.png",width:"119"}},{type:"Box",child:[{type:"Label",props:{visible:"true",text:"Got",mouseEnabled:"false",color:"#0099ff",fontSize:"24",x:"18",y:"8",wordWrap:"true",width:"97",align:"center",height:"62",bold:"true"}}],props:{y:"9","var":"m_iGotShow",width:"119",height:"75",visible:"false",x:"721"}}],props:{height:"164",width:"850"}}}]),e}(View),SubAwardUI=function(t){function e(){this.m_pbk=null,this.m_iText=null,e.__super.call(this)}__class(e,"game.ui.rank.SubAwardUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0","var":"m_pbk",width:"198",height:"137",skin:"ranking/55d2aee6aee9e011.png",sizeGrid:"10,10,10,10",x:"0"}},{type:"Label",props:{visible:"true",text:"排名",color:"#ffffff",fontSize:"24",x:"8",y:"18",wordWrap:"true","var":"m_iText",width:"180",align:"center",height:"28",bold:"true",stroke:"1"}}],props:{height:"137",width:"198"}}}]),e}(View),SubGroupUI=function(t){function e(){this.m_pCup=null,this.m_title=null,this.m_pLev=null,this.m_iChgBk=null,e.__super.call(this)}__class(e,"game.ui.rank.SubGroupUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Label",props:{visible:"true",text:"奖品",mouseEnabled:"false",color:"#ffffff",fontSize:"24",x:"0",y:"32",wordWrap:"true","var":"m_title",width:"112",align:"center",height:"28",bold:"true"}}],props:{height:"145",y:"193","var":"m_pCup",width:"112",x:"10"}},{type:"Box",child:[{type:"Image",props:{y:"13",sizeGrid:"5,10,5,10",height:"30",skin:"ranking/528077ca63a9a005.png",width:"132",x:"23"}},{type:"Image",props:{scaleX:".6",y:"8",scaleY:".6",width:"70",height:"70",skin:"reuse/527cbab92a3e4016.png",x:"0"}}],props:{height:"55",y:"310","var":"m_pLev",width:"159",x:"-21"}},{type:"Box",child:[{type:"Image",props:{height:"128",skin:"ranking/55d3f65bc61e9014.png",width:"134"}}],props:{y:"226","var":"m_iChgBk",x:"0"}}],props:{height:"446",width:"134"}}}]),e}(View),GLvlockUI=function(t){function e(){this.locktxt=null,e.__super.call(this)}__class(e,"game.ui.roadShop.GLvlockUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"4",width:"104",height:"34",alpha:"1",skin:"reuse/white.png",x:"2"}},{type:"Label",props:{y:"10","var":"locktxt",text:"12级解锁",width:"99",align:"center",height:"28",visible:"true",color:"#000000",fontSize:"19",bold:"true",x:"3"}}]}}]),e}(View),GoldSwitchUI=function(t){function e(){this.totalPriceIcoBg=null,this.totalPriceIco=null,e.__super.call(this)}__class(e,"game.ui.roadShop.GoldSwitchUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0","var":"totalPriceIcoBg",skin:"roadShop/52d3cc73ea762002.png",x:"0"}},{type:"Image",props:{y:"1","var":"totalPriceIco",width:"50",height:"50",skin:"roadShop/5270ef88bcaf3002.png",sizeGrid:"5,5,5,5",x:"0"}}],props:{height:"52",width:"212"}}}]),e}(View),NumSwitchUI=function(t){function e(){this.saleNumBg=null,this.saleNum=null,e.__super.call(this)}__class(e,"game.ui.roadShop.NumSwitchUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0","var":"saleNumBg",skin:"roadShop/5270ef8bbcaf3004.png",x:"0"}},{type:"Image",props:{y:"0","var":"saleNum",width:"50",height:"50",skin:"roadShop/5270ef88bcaf3002.png",sizeGrid:"5,5,5,5",x:"0"}}],props:{height:"52",width:"212"}}}]),e}(View),RoadShopItemUI=function(t){function e(){this.goodsbox=null,this.priceBg=null,this.discount=null,this.stateTxt=null,this.m_pNick=null,this.goldimg=null,this.m_pAd=null,this.haveSell=null,e.__super.call(this)}__class(e,"game.ui.roadShop.RoadShopItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"15","var":"goodsbox",skin:"roadShop/5270efdcbcaf300d.png",x:"4"}},{type:"Image",props:{y:"100","var":"priceBg",width:"100",height:"27",skin:"roadShop/5270efdfbcaf3010.png",sizeGrid:"40,10,40,10",x:"18"}},{type:"Clip",props:{x:"-3",y:"18","var":"discount",skin:"reuse/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Label",props:{y:"38","var":"stateTxt",text:"空闲",width:"56",align:"center",height:"32",color:"#333333",fontSize:"25",bold:"true",x:"39"}},{type:"Label",props:{y:"-6","var":"m_pNick",text:"士大夫",width:"130",align:"center",height:"28",color:"#ffffff",fontSize:"20",bold:"true",stroke:"1",x:"0"}},{type:"Image",props:{y:"96","var":"goldimg",width:"36",height:"36",skin:"reuse/527cc2532399b007.png",x:"64"}},{type:"Image",props:{y:"23","var":"m_pAd",skin:"roadShop/5270efe4bcaf3014.png",x:"89"}},{type:"Label",props:{visible:"false",text:"已售出",color:"#ffffff",fontSize:"20",x:"31",y:"103","var":"haveSell",width:"78",align:"center",height:"28",bold:"true",stroke:"1"}}],props:{mouseEnabled:"true"}}}]),e}(View),RoadShopLockItemUI=function(t){function e(){this.goodsbox=null,this.friendtxt=null,this.goldbox=null,e.__super.call(this)}__class(e,"game.ui.roadShop.RoadShopLockItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"15","var":"goodsbox",skin:"roadShop/5270efdcbcaf300d.png",x:"7"}},{type:"Image",props:{height:"45",y:"93",skin:"roadShop/5270efcabcaf3006.png",width:"45",x:"48"}},{type:"Label",props:{text:"还需要2个好友解锁！",color:"#cccccc",fontSize:"15",x:"25",y:"38",wordWrap:"true","var":"friendtxt",width:"91",align:"center",height:"58",bold:"true",stroke:"1"}},{type:"Box",child:[{type:"Image",props:{height:"24",y:"2",skin:"roadShop/5270efe1bcaf3012.png",sizeGrid:"20,10,20,10",width:"76"}},{type:"Image",props:{height:"26",skin:"reuse/527cc2592399b009.png",width:"27",x:"42"}}],props:{y:"44","var":"goldbox",x:"30"}}]}}]),e}(View),AccRewardUI=function(t){function e(){this.m_item=null,this.m_iComplete=null,this.m_iText=null,this.m_iNum=null,e.__super.call(this)}__class(e,"game.ui.sign.AccRewardUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",skin:"sign/555d6a045d23a005.png",x:"0"}},{type:"Image",props:{height:"60",y:"35","var":"m_item",width:"60",x:"34"}},{type:"Label",props:{strokeColor:"#ff0000",text:"已领",color:"#ffffff",fontSize:"18",x:"30",y:"23","var":"m_iComplete",width:"74",align:"center",height:"28",bold:"true",stroke:"1"}},{type:"Label",props:{text:"累计2天",mouseEnabled:"false",color:"#ffffff",fontSize:"20",x:"19",y:"98","var":"m_iText",width:"91",align:"center",height:"28",bold:"true",stroke:"1"}},{type:"Label",props:{strokeColor:"#993300",text:"10000",color:"#ffffff",fontSize:"18",x:"47",y:"79","var":"m_iNum",width:"74",align:"center",height:"28",bold:"true",stroke:"1"}}],props:{height:"130",width:"128"}}}]),e}(View),OrdinarySignUI=function(t){
function e(){this.m_iTotal=null,this.m_iNum=null,this.m_sign1=null,this.m_sign2=null,this.m_sign3=null,this.m_sign4=null,this.m_sign5=null,this.m_sign0=null,this.m_sign6=null,this.m_acc2=null,this.m_acc3=null,this.m_acc5=null,this.m_acc7=null,e.__super.call(this)}__class(e,"game.ui.sign.OrdinarySignUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.sign.AccReward"]=AccReward,View.viewClassMap["game.ui.sign.SignReward"]=SignReward,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"163",sizeGrid:"30,40,30,30",height:"290",skin:"sign/555d6bcf5d23a009.png",width:"670",x:"10"}},{type:"Box",child:[{type:"Image",props:{skin:"sign/555d798c5d23a026.png",y:"0"}},{type:"Image",props:{y:"0",skin:"sign/555d798c5d23a026.png",x:"110"}},{type:"Image",props:{y:"0",skin:"sign/555d798c5d23a026.png",x:"220"}},{type:"Image",props:{y:"0",skin:"sign/555d798c5d23a026.png",x:"330"}},{type:"Image",props:{y:"0",skin:"sign/555d798c5d23a026.png",x:"440"}}],props:{y:"167",x:"61"}},{type:"Box",child:[{type:"Image",props:{height:"32",y:"116",skin:"sign/524bcf8669721003.png",width:"145",x:"11"}},{type:"Image",props:{skin:"sign/555d787a5d23a022.png",x:"3"}},{type:"Label",props:{y:"119","var":"m_iNum",text:"总签到1/30天",width:"167",align:"center",height:"28",color:"#ffffff",fontSize:"20",bold:"true",stroke:"1",strokeColor:"#993300"}}],props:{y:"12","var":"m_iTotal",x:"512"}},{type:"SignReward",props:{y:"195",runtime:"game.ui.sign.SignReward","var":"m_sign1",x:"110"}},{type:"SignReward",props:{y:"195",runtime:"game.ui.sign.SignReward","var":"m_sign2",x:"197"}},{type:"SignReward",props:{y:"195",runtime:"game.ui.sign.SignReward","var":"m_sign3",x:"284"}},{type:"SignReward",props:{y:"195",runtime:"game.ui.sign.SignReward","var":"m_sign4",x:"371"}},{type:"SignReward",props:{y:"195",runtime:"game.ui.sign.SignReward","var":"m_sign5",x:"458"}},{type:"SignReward",props:{y:"195",runtime:"game.ui.sign.SignReward","var":"m_sign0",x:"23"}},{type:"SignReward",props:{y:"195",runtime:"game.ui.sign.SignReward","var":"m_sign6",x:"546"}},{type:"AccReward",props:{y:"13",runtime:"game.ui.sign.AccReward","var":"m_acc2",x:"17"}},{type:"AccReward",props:{y:"13",runtime:"game.ui.sign.AccReward","var":"m_acc3",x:"135"}},{type:"AccReward",props:{y:"13",runtime:"game.ui.sign.AccReward","var":"m_acc5",x:"253"}},{type:"AccReward",props:{y:"13",runtime:"game.ui.sign.AccReward","var":"m_acc7",x:"371"}}]}}]),e}(View),SignRewardUI=function(t){function e(){this.m_iFK=null,this.img_L=null,this.img_C=null,this.img_R=null,this.m_iText=null,this.m_iVip=null,this.m_iRetroactive=null,this.m_item=null,this.m_iComplete=null,this.m_iNum=null,e.__super.call(this)}__class(e,"game.ui.sign.SignRewardUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{y:"0",visible:"false","var":"img_L",skin:"sign/555d6e265d23a019.png",x:"0"}},{type:"Image",props:{y:"0",visible:"true","var":"img_C",skin:"sign/555d6e3c5d23a01d.png",x:"0"}},{type:"Image",props:{y:"0",visible:"false","var":"img_R",skin:"sign/555d6de25d23a015.png",x:"0"}}],props:{height:"128",y:"28","var":"m_iFK",width:"128",x:"0"}},{type:"Label",props:{strokeColor:"#000000",text:"第1天",mouseEnabled:"false",color:"#ffff00",fontSize:"20",x:"20",y:"37","var":"m_iText",width:"84",align:"center",height:"28",bold:"true",stroke:"1"}},{type:"Label",props:{strokeColor:"#000000",text:"V1双倍",mouseEnabled:"false",color:"#69cf9f",fontSize:"23",x:"15",y:"0","var":"m_iVip",width:"88",align:"center",height:"28",bold:"true",stroke:"1"}},{type:"Button",props:{y:"168","var":"m_iRetroactive",labelSize:"24",stateNum:"2",labelBold:"true",labelColors:"#F3DC14,#F3DC14,#F3DC14",labelStroke:"#df864c",skin:"sign/btn_signUp.png",label:"签到",x:"16.5"}},{type:"Image",props:{height:"60",y:"64","var":"m_item",width:"60",x:"34"}},{type:"Label",props:{strokeColor:"#ff0000",text:"已领",color:"#ffffff",fontSize:"26",x:"27",y:"78","var":"m_iComplete",width:"74",align:"center",height:"33",bold:"true",stroke:"1"}},{type:"Label",props:{strokeColor:"#000000",text:"0",color:"#ffff66",fontSize:"18",x:"22",y:"127","var":"m_iNum",width:"74",align:"center",height:"25",bold:"true",stroke:"1"}}],props:{height:"250",width:"128"}}}]),e}(View),SuperSignUI=function(t){function e(){this.signList=null,this.m_iTitle=null,this.m_iBtn=null,this.m_iComplete=null,this.m_iStatus=null,this.m_item=null,this.m_title=null,e.__super.call(this)}__class(e,"game.ui.sign.SuperSignUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{height:"412",y:"60",skin:"reuse/564048ae8879302f.png",sizeGrid:"10,10,10,10",width:"667"}},{type:"Image",props:{x:"6",height:"64",skin:"sign/56407a6d8b35003e.png",sizeGrid:"30,30,30,30",width:"651"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{y:"-9",sizeGrid:"10,20,10,20",height:"122",skin:"sign/5641a62ea4e37010.png",width:"653",x:"5"}},{type:"Label",props:{strokeColor:"#000000",text:"第1天",color:"#ffffff",fontSize:"31",x:"13",y:"28","var":"m_iTitle",width:"124",align:"center",height:"41",name:"m_iTitle",bold:"true",stroke:"1"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"30",label:"充值",labelBold:"true",labelStroke:"1",x:"517",y:"23","var":"m_iBtn",stateNum:"1",height:"53",name:"m_iBtn",skin:"reuse/btn_Qd.png",width:"119"}},{type:"Image",props:{y:"20",name:"m_iComplete","var":"m_iComplete",skin:"sign/55c48995ce8eb008.png",x:"527"}},{type:"Image",props:{y:"8",name:"m_iStatus","var":"m_iStatus",skin:"sign/5641a61da4e3700c.png",x:"508"}},{type:"Box",child:[{type:"Image",props:{height:"60",name:"m_item","var":"m_item",width:"60"}},{type:"Label",props:{y:"37",visible:"false",text:"0",width:"97",align:"center",height:"28",name:"m_iNum",color:"#cc6600",fontSize:"18",bold:"true",x:"35"}}],props:{y:"15",name:"item0",x:"162"}},{type:"Box",child:[{type:"Image",props:{height:"60",name:"m_item",width:"60"}},{type:"Label",props:{y:"37",visible:"false",text:"0",width:"97",align:"center",height:"28",name:"m_iNum",color:"#cc6600",fontSize:"18",bold:"true",x:"35"}}],props:{y:"15",name:"item1",x:"302"}}],props:{height:"106",name:"render",width:"660"}}],props:{y:"73",vScrollBarSkin:"reuse/vscroll.png",width:"660",height:"396","var":"signList",x:"1"}},{type:"Label",props:{y:"19","var":"m_title",text:"每日充值6元以上，即可领取豪华奖励！",width:"617",height:"29",fontSize:"20",bold:"true",x:"19"}}],props:{y:"-4",x:"22"}}]}}]),e}(View),toolTipUI=function(t){function e(){this.boxs=null,this.bg=null,e.__super.call(this)}__class(e,"game.ui.toolTipUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{name:"image","var":"bg",width:"128",height:"156",alpha:"0.9",skin:"reuse/bg.png",sizeGrid:"15,15,15,20"}},{type:"Label",props:{y:"10",mouseThrough:"true",text:"小麦",mouseEnabled:"false",name:"label1",fontSize:"32",bold:"true",x:"7"}},{type:"Label",props:{y:"51",wordWrap:"true",width:"319",align:"left",height:"77",name:"label2",fontSize:"25",x:"7"}},{type:"Label",props:{y:"86",strokeColor:"#000000",text:"5M",align:"left",name:"label3",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"7"}},{type:"Box",child:[{type:"Image",props:{height:"33",name:"icon",skin:"reuse/51D569FE2878100C.png",width:"33"}}],props:{name:"item0",y:"48",x:"7"}},{type:"Box",child:[{type:"Image",props:{name:"icon",width:"33",height:"33",y:"0",skin:"reuse/51D569FE2878100C.png",x:"0"}}],props:{name:"item1",y:"48",x:"114"}},{type:"Box",child:[{type:"Image",props:{height:"33",name:"icon",skin:"reuse/51D569FE2878100C.png",width:"33"}}],props:{name:"item2",y:"85",x:"7"}},{type:"Box",child:[{type:"Image",props:{height:"33",name:"icon",skin:"reuse/51D569FE2878100C.png",width:"33"}}],props:{name:"item3",y:"85",x:"114"}}],props:{mouseEnabled:"false",y:"0",mouseThrough:"true","var":"boxs",x:"0"}}],props:{mouseEnabled:"false"}}}]),e}(View),EvaItemUI=function(t){function e(){this.m_iNum=null,e.__super.call(this)}__class(e,"game.ui.totem.EvaItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{height:"106",y:"2",skin:"trophy/52a2bfc2d3253002.png",width:"263",x:"0"}},{type:"Label",props:{y:"74","var":"m_iNum",text:"储存： 1个",width:"122",align:"left",height:"25",color:"#000000",fontSize:"18",bold:"true",x:"129"}}],props:{height:"110",width:"263"}}}]),e}(View),PaperCloseUI=function(t){function e(){this.button_close=null,e.__super.call(this)}__class(e,"game.ui.tv.PaperCloseUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Button",props:{scaleX:".7",y:"0",scaleY:".7","var":"button_close",stateNum:"1",height:"86",name:"close",skin:"reuse/btn_close.png",width:"86",x:"0"}}]}}]),e}(View),PaperCoverUI=function(t){function e(){e.__super.call(this)}__class(e,"game.ui.tv.PaperCoverUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{height:"512",y:"0",skin:"tv/52707539f26f100b.png",width:"512",x:"0"}}],props:{height:"512",width:"512"}}}]),e}(View),PaperDesItemUI=function(t){function e(){this.cubTxt=null,this.moneyTxt=null,this.nicheng=null,this.headIco=null,this.diyBtn=null,e.__super.call(this)}__class(e,"game.ui.tv.PaperDesItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{height:"49",y:"17",skin:"reuse/527cbab02a3e4012.png",width:"49",x:"3"}},{type:"Label",props:{y:"31","var":"cubTxt",text:"+12",width:"81",align:"left",height:"35",color:"#ff9933",fontSize:"30",bold:"true",stroke:"1",x:"49"}},{type:"Label",props:{y:"376","var":"moneyTxt",text:"5",width:"70",align:"right",height:"33",color:"#ff9933",fontSize:"25",bold:"true",stroke:"1",x:"0"}},{type:"Image",props:{height:"30",y:"376",skin:"reuse/527cc2532399b007.png",width:"30",x:"68"}},{type:"Label",props:{y:"360","var":"nicheng",text:"哈德良是否",width:"166",align:"right",height:"33",color:"#006666",fontSize:"20",bold:"true",stroke:"1",x:"206"}},{type:"Image",props:{y:"330","var":"headIco",width:"75",height:"78",skin:"tv/52a2e789d6558002.png",x:"375"}},{type:"Label",props:{y:"2",text:"精品图纸推荐",width:"166",align:"center",height:"33",color:"#000066",fontSize:"25",bold:"true",x:"104"}},{type:"Image",props:{height:"90","var":"diyBtn",skin:"tv/53ceb06b949b000e.png",width:"90",x:"341"}}],props:{y:"0",x:"0"}}]}}]),e}(View),PaperItemUI=function(t){function e(){this.goodsImg=null,this.head=null,this.headBg=null,this.discount=null,this.helpstatus=null,this.homeName=null,e.__super.call(this)}__class(e,"game.ui.tv.PaperItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{height:"63",y:"14","var":"goodsImg",width:"75",x:"30"}},{type:"Image",props:{height:"61",y:"57","var":"head",width:"62",x:"151"}},{type:"Image",props:{y:"7",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"9"}},{type:"Image",props:{y:"57","var":"headBg",skin:"tv/52707551f26f1013.png",x:"150"}},{type:"Clip",props:{x:"-2",y:"0","var":"discount",skin:"reuse/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"36","var":"helpstatus",width:"30",height:"30",visible:"false",skin:"reuse/52bad0abfb1dd002.png",x:"203"}},{type:"Label",props:{y:"14","var":"homeName",text:"梦幻家园",width:"109",align:"center",height:"37",fontSize:"25",bold:"true",x:"101"}}]}}]),e}(View),PaperLeftUI=function(t){function e(){this.bg0=null,this.bg1=null,this.bg2=null,this.bg3=null,this.bg4=null,this.bg5=null,this.goodsImg0=null,this.head0=null,this.goodsImg1=null,this.head1=null,this.goodsImg3=null,this.head3=null,this.goodsImg2=null,this.head2=null,this.goodsImg5=null,this.head5=null,this.goodsImg4=null,this.head4=null,this.headBg0=null,this.discount0=null,this.helpstatus0=null,this.headBg1=null,this.discount1=null,this.helpstatus1=null,this.headBg3=null,this.discount3=null,this.helpstatus3=null,this.headBg2=null,this.discount2=null,this.helpstatus2=null,this.headBg5=null,this.discount5=null,this.helpstatus5=null,this.headBg4=null,this.discount4=null,this.helpstatus4=null,this.leftpagetxt=null,this.boxName0=null,this.homeName0=null,this.boxName1=null,this.homeName1=null,this.boxName2=null,this.homeName2=null,this.boxName3=null,this.homeName3=null,this.boxName4=null,this.homeName4=null,this.boxName5=null,this.homeName5=null,e.__super.call(this)}__class(e,"game.ui.tv.PaperLeftUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{scaleX:"-1",y:"0",width:"512",height:"512",skin:"tv/52707543f26f100e.png",x:"512"}},{type:"Image",props:{y:"52","var":"bg0",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"36"}},{type:"Image",props:{y:"52","var":"bg1",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"279"}},{type:"Image",props:{y:"193","var":"bg2",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"36"}},{type:"Image",props:{y:"195","var":"bg3",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"279"}},{type:"Image",props:{y:"332","var":"bg4",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"36"}},{type:"Image",props:{y:"332","var":"bg5",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"279"}},{type:"Image",props:{height:"63",y:"59","var":"goodsImg0",width:"75",x:"57"}},{type:"Image",props:{height:"61",y:"102","var":"head0",width:"62",x:"178"}},{type:"Image",props:{height:"63",y:"59","var":"goodsImg1",width:"75",x:"300"}},{type:"Image",props:{height:"61",y:"102","var":"head1",width:"62",x:"421"}},{type:"Image",props:{height:"63",y:"202","var":"goodsImg3",width:"75",x:"300"}},{type:"Image",props:{height:"61",y:"245","var":"head3",width:"62",x:"421"}},{type:"Image",props:{height:"63",y:"200","var":"goodsImg2",width:"75",x:"57"}},{type:"Image",props:{height:"61",y:"243","var":"head2",width:"62",x:"178"}},{type:"Image",props:{height:"63",y:"339","var":"goodsImg5",width:"75",x:"300"}},{type:"Image",props:{height:"61",y:"382","var":"head5",width:"62",x:"421"}},{type:"Image",props:{height:"63",y:"339","var":"goodsImg4",width:"75",x:"57"}},{type:"Image",props:{height:"61",y:"382","var":"head4",width:"62",x:"178"}},{type:"Image",props:{y:"101","var":"headBg0",width:"64",height:"64",skin:"tv/52707551f26f1013.png",x:"177"}},{type:"Clip",props:{x:"25",y:"45","var":"discount0",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"81","var":"helpstatus0",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"230"}},{type:"Image",props:{y:"102","var":"headBg1",width:"64",height:"64",skin:"tv/52707551f26f1013.png",x:"421"}},{type:"Clip",props:{x:"268",y:"45","var":"discount1",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"81","var":"helpstatus1",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"473"}},{type:"Image",props:{y:"245","var":"headBg3",width:"64",height:"64",skin:"tv/52707551f26f1013.png",x:"422"}},{type:"Clip",props:{x:"268",y:"188","var":"discount3",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"224","var":"helpstatus3",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"473"}},{type:"Image",props:{y:"243","var":"headBg2",width:"64",height:"64",skin:"tv/52707551f26f1013.png",x:"177"}},{type:"Clip",props:{x:"25",y:"186","var":"discount2",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"222","var":"helpstatus2",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"230"}},{type:"Image",props:{y:"381","var":"headBg5",width:"64",height:"65",skin:"tv/52707551f26f1013.png",x:"420"}},{type:"Clip",props:{x:"268",y:"325","var":"discount5",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"361","var":"helpstatus5",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"473"}},{type:"Image",props:{y:"382","var":"headBg4",width:"64",height:"64",skin:"tv/52707551f26f1013.png",x:"178"}},{type:"Clip",props:{x:"25",y:"325","var":"discount4",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"361","var":"helpstatus4",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"230"}},{type:"Label",props:{y:"460","var":"leftpagetxt",text:"1",width:"37",align:"center",height:"23",fontSize:"16",x:"251"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName0"}}],props:{height:"40",y:"59","var":"boxName0",width:"128",x:"128"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName1"}}],props:{height:"40",y:"59","var":"boxName1",width:"128",x:"371"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName2"}}],props:{height:"40",y:"200","var":"boxName2",width:"128",x:"128"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName3"}}],props:{height:"40",y:"202","var":"boxName3",width:"128",x:"371"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName4"}}],props:{height:"40",y:"339","var":"boxName4",width:"128",x:"128"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName5"}}],props:{height:"40",y:"339","var":"boxName5",width:"128",x:"371"}}],props:{height:"512",width:"512"}}}]),e}(View),PaperRightUI=function(t){function e(){this.bg0=null,this.bg1=null,this.bg2=null,this.bg3=null,this.bg4=null,this.bg5=null,this.goodsImg0=null,this.head0=null,this.goodsImg1=null,this.head1=null,this.goodsImg3=null,this.head3=null,this.goodsImg2=null,this.head2=null,this.goodsImg5=null,this.head5=null,this.goodsImg4=null,this.head4=null,this.headBg0=null,this.discount0=null,this.helpstatus0=null,this.headBg1=null,this.discount1=null,this.helpstatus1=null,this.headBg3=null,this.discount3=null,this.helpstatus3=null,this.headBg2=null,this.discount2=null,this.helpstatus2=null,this.headBg5=null,this.discount5=null,this.helpstatus5=null,this.headBg4=null,this.discount4=null,this.helpstatus4=null,this.rightpagetxt=null,this.boxName0=null,this.homeName0=null,this.boxName1=null,this.homeName1=null,this.boxName2=null,this.homeName2=null,this.boxName3=null,this.homeName3=null,this.boxName4=null,this.homeName4=null,this.boxName5=null,this.homeName5=null,e.__super.call(this)}__class(e,"game.ui.tv.PaperRightUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{height:"512",y:"0",skin:"tv/52707543f26f100e.png",width:"512",x:"0"}},{type:"Image",props:{y:"52","var":"bg0",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"9"}},{type:"Image",props:{y:"52","var":"bg1",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"252"}},{type:"Image",props:{y:"193","var":"bg2",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"9"}},{type:"Image",props:{y:"195","var":"bg3",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"252"}},{type:"Image",props:{y:"332","var":"bg4",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"9"}},{type:"Image",props:{y:"332","var":"bg5",sizeGrid:"50,50,50,50",height:"128",skin:"tv/5270754cf26f1011.png",width:"221",x:"252"}},{type:"Image",props:{height:"63",y:"59","var":"goodsImg0",width:"75",x:"30"}},{type:"Image",props:{height:"61",y:"102","var":"head0",width:"62",x:"151"}},{type:"Image",props:{height:"63",y:"59","var":"goodsImg1",width:"75",x:"273"}},{type:"Image",props:{height:"61",y:"102","var":"head1",width:"62",x:"394"}},{type:"Image",props:{height:"63",y:"202","var":"goodsImg3",width:"75",x:"273"}},{type:"Image",props:{height:"61",y:"245","var":"head3",width:"62",x:"394"}},{type:"Image",props:{height:"63",y:"200","var":"goodsImg2",width:"75",x:"30"}},{type:"Image",props:{height:"61",y:"243","var":"head2",width:"62",x:"151"}},{type:"Image",props:{height:"63",y:"339","var":"goodsImg5",width:"75",x:"273"}},{type:"Image",props:{height:"61",y:"382","var":"head5",width:"62",x:"394"}},{type:"Image",props:{height:"63",y:"339","var":"goodsImg4",width:"75",x:"30"}},{type:"Image",props:{height:"61",y:"382","var":"head4",width:"62",x:"151"}},{type:"Image",props:{y:"101","var":"headBg0",width:"64",height:"64",skin:"tv/52707551f26f1013.png",x:"150"}},{type:"Clip",props:{x:"-2",y:"45","var":"discount0",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"81","var":"helpstatus0",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"203"}},{type:"Image",props:{y:"102","var":"headBg1",width:"64",height:"64",skin:"tv/52707551f26f1013.png",x:"394"}},{type:"Clip",props:{x:"241",y:"45","var":"discount1",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"81","var":"helpstatus1",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"446"}},{type:"Image",props:{y:"245","var":"headBg3",width:"64",height:"64",skin:"tv/52707551f26f1013.png",x:"395"}},{type:"Clip",props:{x:"241",y:"188","var":"discount3",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"224","var":"helpstatus3",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"446"}},{type:"Image",props:{y:"243","var":"headBg2",width:"64",height:"64",skin:"tv/52707551f26f1013.png",x:"150"}},{type:"Clip",props:{x:"-2",y:"186","var":"discount2",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"222","var":"helpstatus2",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"203"}},{type:"Image",props:{y:"381","var":"headBg5",width:"64",height:"65",skin:"tv/52707551f26f1013.png",x:"393"}},{type:"Clip",props:{x:"241",y:"325","var":"discount5",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"361","var":"helpstatus5",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"446"}},{type:"Image",props:{y:"382","var":"headBg4",width:"64",height:"64",skin:"tv/52707551f26f1013.png",x:"151"}},{type:"Clip",props:{x:"-2",y:"325","var":"discount4",skin:"tv/clip_52cbb4dd05219002.png",clipX:"4"}},{type:"Image",props:{y:"361","var":"helpstatus4",width:"30",height:"30",visible:"false",skin:"tv/52bad0abfb1dd002.png",x:"203"}},{type:"Label",props:{y:"460","var":"rightpagetxt",text:"1",width:"37",align:"center",height:"23",fontSize:"16",x:"222"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName0"}}],props:{height:"40",y:"59","var":"boxName0",width:"128",x:"101"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName1"}}],props:{height:"40",y:"59","var":"boxName1",width:"128",x:"344"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName2"}}],props:{height:"40",y:"200","var":"boxName2",width:"128",x:"101"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName3"}}],props:{height:"40",y:"202","var":"boxName3",width:"128",x:"344"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName4"}}],props:{height:"40",y:"339","var":"boxName4",width:"128",x:"101"}},{type:"Box",child:[{type:"Label",props:{align:"center",fontSize:"25",text:"梦幻家园",bold:"true","var":"homeName5"}}],props:{height:"40",y:"339","var":"boxName5",width:"128",x:"344"}}],props:{height:"512",width:"512"}}}]),e}(View),VipItems_1UI=function(t){function e(){this.box_double=null,this.image_last=null,this.label_last=null,this.box_xiao=null,this.image_cur=null,this.label_cur=null,this.image_hengxian=null,this.image_icon=null,this.iamge_zuanshi_1=null,this.shuangbei=null,this.label_lingzeng=null,this.label_1=null,this.list_=null,this.label_d_1=null,this.btn_buy=null,e.__super.call(this)}__class(e,"game.ui.vipprivilegespree.VipItems_1UI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"4",sizeGrid:"30,10,30,30",height:"437",skin:"VIPprivilegespree/bg_dw.png",width:"196",x:"6"}},{type:"Box",child:[{type:"Button",props:{y:"-5",labelSize:"34",stateNum:"1",height:"80",labelColors:"#ffffff,#ffffff,#ffffff",skin:"reuse/btn_common.png",width:"206",x:"0"}},{type:"Image",props:{y:"27","var":"image_last",width:"46",height:"47",skin:"reuse/527cc2592399b009.png",x:"64"}},{type:"Label",props:{y:"34","var":"label_last",text:"60",align:"left",color:"#ffffff",fontSize:"25",bold:"true",x:"110"}},{type:"Box",child:[{type:"Image",props:{y:"0","var":"image_cur",width:"30",height:"30",skin:"reuse/527cc2592399b009.png",x:"70"}},{type:"Label",props:{y:"1","var":"label_cur",text:"60",align:"left",color:"#ffffff",fontSize:"20",bold:"true",x:"100"}}],props:{height:"30",y:"7","var":"box_xiao",width:"206",x:"0"}},{type:"Image",props:{y:"22","var":"image_hengxian",skin:"VIPprivilegespree/528077d263a9a009.png",width:"60",x:"70"}}],props:{y:"359","var":"box_double",width:"206",mouseEnabled:"true",height:"76",x:"0"}},{type:"Image",props:{y:"26",name:"image_icon","var":"image_icon",skin:"VIPprivilegespree/img_zuanshi_duo.png",x:"40"}},{type:"Image",props:{y:"151","var":"iamge_zuanshi_1",width:"46",height:"47",name:"iamge_zuanshi_1",skin:"reuse/527cc2592399b009.png",x:"59"}},{type:"Image",props:{y:"0",name:"shuangbei","var":"shuangbei",skin:"VIPprivilegespree/55ff667080f5e003.png",x:"0"}},{type:"Image",props:{y:"212",skin:"VIPprivilegespree/528077d263a9a009.png",x:"40"}},{type:"Label",props:{y:"198","var":"label_lingzeng",text:"每天另赠",width:"83",align:"left",height:"27",name:"label_lingzeng",color:"#ff9900",fontSize:"18",bold:"true",x:"21"}},{type:"Label",props:{y:"160","var":"label_1",text:"60",align:"left",name:"label_1",color:"#ffffff",fontSize:"25",bold:"true",x:"105"}},{type:"List",child:[{type:"Box",child:[{type:"Label",props:{y:"7",text:"60",align:"left",name:"label_2",color:"#ffffff",fontSize:"25",bold:"true",x:"84"}},{type:"Clip",props:{y:"-3",width:"40",x:"44",height:"80",name:"clip_",index:"1",skin:"VIPprivilegespree/clip_55966fa8e96fd010.png",clipX:"4"}}],props:{height:"47",name:"render",width:"173"}}],props:{y:"224",spaceY:"0","var":"list_",repeatY:"3",x:"17"}},{type:"Label",props:{y:"234","var":"label_d_1",text:"好多钻石",width:"173",align:"center",height:"33",name:"label_d_1",color:"#ffcc00",fontSize:"25",bold:"true",x:"17"}},{type:"Button",props:{y:"363",labelColors:"#ffffff,#ffffff,#ffffff","var":"btn_buy",labelSize:"34",width:"206",stateNum:"1",height:"70",name:"btn_buy",skin:"reuse/btn_common.png",label:"￥6",x:"0"}}],props:{height:"441",width:"206"}}}]),e}(View),VIPdangweiPsItemUI=function(t){function e(){this.label=null,e.__super.call(this)}__class(e,"game.ui.vipprivilegespree.vippschildren.VIPdangweiPsItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"3",skin:"VIPprivilegespree/img_vipicon.png",x:"0"}},{type:"Label",props:{y:"0",wordWrap:"true","var":"label",text:"累计充值1元即可享受该特权",width:"455",color:"#ffffff",fontSize:"30",bold:"true",x:"46"}}],props:{width:"501"}}}]),e}(View),VIPdangweiPsUI=function(t){function e(){this.panel_dw=null,e.__super.call(this)}__class(e,"game.ui.vipprivilegespree.vippschildren.VIPdangweiPsUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",width:"545",height:"389",skin:"VIPprivilegespree/bg_dw.png",sizeGrid:"30,30,30,30",x:"0.5"}},{type:"Panel",props:{y:"21",vScrollBarSkin:"reuse/vscroll.png",width:"504",height:"348",name:"panel_dw","var":"panel_dw",enableRenderMerge:"true",x:"21"}}],props:{height:"389",width:"545"}}}]),e}(View),VIPyuekaPsItemUI=function(t){function e(){this.m_iKindIcon=null,this.box0=null,this.img_lock=null,this.box2=null,this.box_day=null,this.label_Day=null,this.label_leftTime=null,this.box1=null,this.box_btn_buy_l=null,this.btn_label=null,e.__super.call(this)}__class(e,"game.ui.vipprivilegespree.vippschildren.VIPyuekaPsItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0",width:"217",height:"396",skin:"VIPprivilegespree/bg_dw.png",sizeGrid:"30,30,30,30",x:"4"}},{type:"Image",props:{y:"6","var":"m_iKindIcon",width:"193",height:"196",skin:"VIPprivilegespree/img_czyk.png",x:"16"}},{type:"Box",child:[{type:"Clip",props:{y:"-3",width:"32",x:"14",height:"64",name:"clip_",index:"1",skin:"VIPprivilegespree/clip_55966fa8e96fd010.png",clipX:"4"}}],props:{height:"47",y:"212","var":"box0",width:"173",x:"19"}},{type:"Image",props:{y:"59","var":"img_lock",width:"181",height:"72",skin:"VIPprivilegespree/img_lock.png",x:"24"}},{type:"Box",child:[{type:"Clip",props:{y:"-3",width:"32",x:"14",height:"64",name:"clip_",index:"1",skin:"VIPprivilegespree/clip_55966fa8e96fd010.png",clipX:"4"}}],props:{height:"47",y:"314","var":"box2",width:"173",x:"19"}},{type:"Box",child:[{type:"Image",props:{height:"45",skin:"VIPprivilegespree/img_jiage.png",width:"86"}},{type:"Label",props:{y:"2","var":"label_Day",text:"30天",width:"74",height:"42",color:"#ffffff",fontSize:"35",x:"6"}}],props:{y:"149","var":"box_day",x:"132"}},{type:"Label",props:{y:"139","var":"label_leftTime",width:"202",align:"center",height:"26",color:"#000000",fontSize:"20",bold:"true",x:"9"}},{type:"Box",child:[{type:"Clip",props:{y:"-3",width:"32",x:"14",height:"64",name:"clip_",index:"1",skin:"VIPprivilegespree/clip_55966fa8e96fd010.png",clipX:"4"}}],props:{height:"47",y:"272","var":"box1",width:"173",x:"19"}},{type:"Box",child:[{type:"Button",props:{height:"64",skin:"reuse/btn_common.png",stateNum:"1",width:"221"}},{type:"Label",props:{y:"14","var":"btn_label",text:"购买￥28",width:"157",height:"42",color:"#ffffff",fontSize:"35",x:"37"}}],props:{mouseEnabled:"true",y:"339",name:"box_btn_buy_l","var":"box_btn_buy_l",x:"0"}}],props:{height:"403",width:"221"}};
}]),e}(View),VIPyuekaPsUI=function(t){function e(){this.box_cjth=null,this.view_one=null,this.view_two=null,e.__super.call(this)}__class(e,"game.ui.vipprivilegespree.vippschildren.VIPyuekaPsUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.vipps.tequanchildren.VIPyuekaPSItem"]=VIPyuekaPSItem,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Box",child:[{type:"Image",props:{height:"388",skin:"VIPprivilegespree/bg_cjth.png",sizeGrid:"30,30,30,30",width:"227"}},{type:"Image",props:{y:"19",skin:"VIPprivilegespree/img_cjth.png",x:"51"}},{type:"Label",props:{y:"59",wordWrap:"true",text:"1.购买月卡、季卡即送大量钻石（多买多送）。\\n2.同时购买月卡、季卡后，每日专享钻石可叠加领取；加速特权不可叠加，享受最高15%的加速。",width:"191",height:"267",name:"txt_content",color:"#663333",fontSize:"20",x:"19"}},{type:"Image",props:{y:"313",skin:"VIPprivilegespree/lalala.png",x:"101"}}],props:{y:"5","var":"box_cjth",x:"3"}},{type:"VIPyuekaPsItem",props:{y:"1",runtime:"display.mainIcon.vipps.tequanchildren.VIPyuekaPSItem","var":"view_one",x:"236"}},{type:"VIPyuekaPsItem",props:{y:"1",runtime:"display.mainIcon.vipps.tequanchildren.VIPyuekaPSItem","var":"view_two",x:"464"}}],props:{height:"405",width:"685"}}}]),e}(View),VIPpsDaojuUI=function(t){function e(){this.list_daoju=null,e.__super.call(this)}__class(e,"game.ui.vipprivilegespree.VIPpsDaojuUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.vipps.VipItem_1"]=VipItem_1,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"-0.5",width:"848",height:"475",skin:"VIPprivilegespree/bg_cjth.png",sizeGrid:"30,30,30,30",x:"0"}},{type:"List",child:[{type:"VipItems_1",props:{mouseEnabled:"true",name:"render",y:"0",runtime:"display.mainIcon.vipps.VipItem_1",x:"0"}}],props:{y:"15","var":"list_daoju",width:"825",hScrollBarSkin:"reuse/vscroll.png",height:"444",name:"list_daoju",enableRenderMerge:"true",repeatY:"1",x:"11.5"}}],props:{height:"475",width:"848"}}}]),e}(View),VIPpsTequanUI=function(t){function e(){this.panel_item=null,this.txt_cur_title=null,this.box_prev=null,this.box_next=null,this.box_noMaxVip=null,this.prog_progressbar=null,this.txt_zcz=null,this.label_maxVip=null,e.__super.call(this)}__class(e,"game.ui.vipprivilegespree.VIPpsTequanUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"1",sizeGrid:"10,30,10,30",height:"47",alpha:"0.7",skin:"VIPprivilegespree/bg_img.png",width:"873",x:"1"}},{type:"Panel",props:{y:"104","var":"panel_item",width:"817",mouseEnabled:"true",height:"432",enableRenderMerge:"true",x:"28"}},{type:"Image",props:{height:"64",y:"41",skin:"VIPprivilegespree/img_red.png",width:"873",x:"1"}},{type:"Image",props:{height:"40",y:"51",skin:"VIPprivilegespree/viplevel.png",width:"132",x:"372"}},{type:"Label",props:{y:"57","var":"txt_cur_title",text:"月卡",width:"122",align:"center",height:"29",name:"txt_cur_title",color:"#ffffff",fontSize:"25",x:"377"}},{type:"Box",child:[{type:"Button",props:{scaleX:"-1",y:"49",width:"101",mouseEnabled:"true",height:"43",skin:"VIPprivilegespree/btn_chakan.png",stateNum:"1",x:"82"}},{type:"Image",props:{name:"img_vip_prev",y:"59",alpha:"1",skin:"VIPprivilegespree/vip_img.png"}},{type:"Label",props:{y:"0",color:"#000000",fontSize:"25",text:"查看",x:"0"}},{type:"Label",props:{y:"51",text:"月卡",width:"70",align:"right",height:"34",name:"txt_check_l",color:"#ffff00",fontSize:"30",bold:"true",x:"0"}}],props:{mouseEnabled:"true",y:"207",name:"box_prev","var":"box_prev",x:"60"}},{type:"Box",child:[{type:"Button",props:{height:"43",y:"49",skin:"VIPprivilegespree/btn_chakan.png",stateNum:"1",width:"101"}},{type:"Image",props:{y:"59",alpha:"1",skin:"VIPprivilegespree/vip_img.png",x:"10"}},{type:"Label",props:{y:"0",text:"查看",width:"83",height:"29",color:"#000000",fontSize:"25",bold:"true",x:"36"}},{type:"Label",props:{y:"51",text:"1",width:"22",height:"34",name:"txt_check_r",color:"#ffff00",fontSize:"30",bold:"true",x:"63"}}],props:{mouseEnabled:"true",y:"207",name:"box_next","var":"box_next",x:"728"}},{type:"Image",props:{y:"13",skin:"VIPprivilegespree/vip_img.png",x:"84"}},{type:"Box",child:[{type:"ProgressBar",props:{value:"1",y:"2","var":"prog_progressbar",width:"238",height:"30",skin:"reuse/progress_s.png",sizeGrid:"20,20,20,20",x:"2"}},{type:"Image",props:{height:"32",y:"1",skin:"reuse/parog_sBG.png",width:"240"}},{type:"Image",props:{y:"5",skin:"VIPprivilegespree/vip_img.png",x:"566"}},{type:"Label",props:{text:"再充值",width:"96",align:"center",height:"34",color:"#ffffff",fontSize:"28",x:"252"}},{type:"Label",props:{y:"1","var":"txt_zcz",text:"￥1000",width:"105",align:"left",height:"33",color:"#ffffff",fontSize:"28",x:"348"}},{type:"Label",props:{y:"1",text:"即可成为",width:"114",align:"center",height:"34",color:"#ffffff",fontSize:"28",x:"450"}}],props:{y:"8","var":"box_noMaxVip",x:"170"}},{type:"Label",props:{y:"7","var":"label_maxVip",text:"当前已达到VIP最高等级",align:"right",visible:"false",color:"#ffffff",fontSize:"28",x:"533"}}],props:{height:"526",width:"873"}}}]),e}(View),GCardItemUI=function(t){function e(){this.m_pshadow=null,this.m_pbk=null,e.__super.call(this)}__class(e,"game.ui.wharf.GCardItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0","var":"m_pshadow",sizeGrid:"10,10,10,10",height:"136",skin:"rndGift/5297f79e2c042002.png",width:"112",x:"0"}},{type:"Image",props:{y:"7","var":"m_pbk",sizeGrid:"4,4,4,4",height:"120",skin:"rndGift/526656ef113e200d.png",width:"96",x:"8"}}],props:{height:"136",width:"112"}}}]),e}(View),GSubVisuUI=function(t){function e(){this.m_bg=null,e.__super.call(this)}__class(e,"game.ui.wharf.GSubVisuUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"0","var":"m_bg",sizeGrid:"4,4,80,4",height:"386",name:"m_bg",skin:"wharf/53ceb03a949b0009.png",width:"268",x:"0"}}],props:{height:"386",width:"268"}}}]),e}(View),SelectOrderUI=function(t){function e(){this.m_subBox=null,this.m_pT=null,this.m_pMake=null,this.m_pAskHelp=null,this.m_pArrow=null,e.__super.call(this)}__class(e,"game.ui.wharf.SelectOrderUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{type:"Image",props:{y:"143",skin:"wharf/528077d263a9a009.png",x:"107"}},{type:"Label",props:{y:"167","var":"m_pT",text:"货物信息：",width:"309",align:"left",height:"28",color:"#666666",fontSize:"20",bold:"true",x:"13"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"24",label:"装货",labelBold:"true",x:"247",y:"199","var":"m_pMake",stateNum:"1",height:"53",labelStroke:"#000000",skin:"reuse/btn_Qd.png",width:"83"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"22",sizeGrid:"20,20,20,20",label:"请求帮助（1/3）",labelBold:"true",x:"32",y:"295","var":"m_pAskHelp",stateNum:"1",height:"65",labelStroke:"#000000",skin:"reuse/btn_5270caa6b30a1013.png",width:"283"}},{type:"Image",props:{y:"212","var":"m_pArrow",width:"42",height:"36",skin:"wharf/5270cb20b30a102d.png",x:"84"}}],props:{height:"380",visible:"false","var":"m_subBox",width:"342"}}}]),e}(View),GItemIconBase1=function(t){function e(){this.m_text=null,this.m_pBaseImg=null,this.m_nItemID=0,this.m_vTips=null,this.m_nLXpos=0,this.m_nLYpos=0,this.m_nTipMode=0,this.m_pFormulaIcon=null,this.m_pFormulaIconSign=null,this.m_nMouseEnable=1,this.m_nMoveEnable=1,this.m_pBuildIcon=null,e.__super.call(this),this.m_pBaseImg=new Image2,this.addChild(this.m_pBaseImg)}__class(e,"game.ui.comui.GItemIconBase",t,"GItemIconBase1");var i=e.prototype;return i.SetImg=function(t,e){this.m_pBaseImg.skin=e},i.Init=function(t,e){if(void 0===e&&(e=80),this.m_nItemID=t,this.m_pBaseImg.skin=null,this.SafeDelObj(this.m_text),this.SafeDelObj(this.m_pBuildIcon),this.SafeDelObj(this.m_pFormulaIcon),this.SafeDelObj(this.m_pFormulaIconSign),SysID.IsDTJZID(t))this.SetImg(1,""),this.ChgToBuildIcon(t,e,e);else{var i=DataTable.m_iItemTab.Get(t);null==i?this.SetImg(1,DataTable.getSkin("tex_图标_未知物品")):SysID.IsJZPFID(t)?(this.m_pFormulaIconSign=new GObj2DImg,this.m_pFormulaIconSign.SetDef(Math.floor(-e/2),Math.floor(-e/2),DataTable.getSkin("tex_角标_配方")),this.m_pFormulaIconSign.SetSize(Math.floor(32*e/80),Math.floor(32*e/80)),this.addChild(this.m_pFormulaIconSign),this.ChgToFormulaIcon(i[3],e,e)):this.SetIconImg(DataTable.getSkin(i[3]),i[2])}this.SetRect(0,0,e,e),this.m_pBaseImg.size(e,e),this.m_pBaseImg.pivot(e/2,e/2),this.hitArea=new Rectangle(-(e/2),-(e/2),e,e),t&&(this.m_vTips=["item",t])},i.SetRect=function(t,e,i,n){this.pivot(t,e),this.size(i,n)},i.ChgToFormulaIcon=function(t,e,i){this.SafeDelObj(this.m_pBuildIcon),this.SetImg(1,Assets.BuildUrl(t))},i.SafeDelObj=function(t){DisplayItem.SafeDelObj(t)},i.ChgToBuildIcon=function(t,e,i){this.SafeDelObj(this.m_pBuildIcon),this.m_pBuildIcon=new GBuildIconBase,this.m_pBuildIcon.Init(t,e,i),this.m_pBuildIcon.pivot(e/2,i/2),this.addChild(this.m_pBuildIcon)},i.SetIconImg=function(t,e){this.SafeDelObj(this.m_pBuildIcon),t.length>0?this.SetImg(1,""+t):(this.SetImg(1,"SYSIMGDEF_SYSBTN"),this.m_text=new Label,this.m_text.text=e,this.addChild(this.m_text))},i.SetIconAni=function(t,e){if(t.length>0)this.SetImg(1,""),this.m_pBuildIcon||(this.m_pBuildIcon=new GBuildIconBase),this.m_pBuildIcon.SetAniImg(t,this.width,this.height),this.addChild(this.m_pBuildIcon);else{this.SetImg(1,"SYSIMGDEF_SYSBTN");var i=new Label;i.text=e}},i.Enable=function(t){void 0===t&&(t=1),this.mouseEnabled=!!t,this.m_nMouseEnable,this.m_pBuildIcon},i.MoveAble=function(t){},i.OnShowTips=function(t){void 0===t&&(t=""),this.m_nTipMode<0},i.UnShowTips=function(){},i.OnLBDown=function(){this.m_nMouseEnable&&(Laya.stage.once("mouseup",this,this.OnLBUp),Tween.to(this,{scaleX:1.2,scaleY:1.2},100,Ease.circIn))},i.OnMouseOut=function(){Tween.to(this,{scaleX:1,scaleY:1},150,Ease.circIn)},i.OnClick=function(){if(SysID.IsDTZSJZID(this.m_nItemID)||SysID.IsJZPFID(this.m_nItemID)){return void Log1.debug(1,"弹出： layer_装饰物_详细说明")}},i.OnLBUp=function(t,e){this.OnMouseOut(),this.m_nMouseEnable&&this.OnClick()},i.SetPos=function(t,e){this.pos(t,e)},e}(View),GObjDragBox=function(t){function e(){this.m_pLink=null,this.m_szBkFrame=[],this.m_szOpBtn=[],this.bjEvt=[],this.m_nOpBtnX=0,this.m_nOpBtnW=0,this.m_nDelMode=0,this.m_sOpBtnClass=null,this.container=null,this.isMouse=!0,this.isH=!0,this.stX=NaN,this.stY=NaN,this.mY=NaN,this.leng=0,this.m_pQueLink=null,this.m_pDefObjFather=null,this.m_nDraging=0,this.m_nLX=0,this.m_nLY=0,this.m_nOX=0,this.m_nOY=0,this.m_nTopLX=0,this.m_nTopLY=0,this.m_nViewMapWidth=0,this.m_nViewWidth=0,this.m_nLvX=0,this.m_nLvY=0,this.m_pTraceBK=null,this.m_nAutoViewMode=0,this.m_nMoveState=0,this.m_nUnLeadArrow=0,this.queX=0,e.__super.call(this),this.tip=PetTip.getInstance(),this.mouseEnabled=!0,this.size(735,327),this.content.mouseThrough=!0,this.hScrollBarSkin="reuse/vscroll.png",DisplayTools.scrollBar=this.hScrollBar,this.init()}__class(e,"display.petHunt.GObjDragBox",t);var i=e.prototype;return i.init=function(){this.container=new Sprite,this.addChild(this.container)},i.OnInit=function(t,e,i,n,s,a,r){void 0===r&&(r=0),this.m_pLink=t,this.m_sOpBtnClass=e,this.m_nOpBtnX=s,this.m_nOpBtnW=a,this.m_nDelMode=r,this.x=s-60,this.y=a-10},i.SetOpBtn=function(t){if(!(t.length<1)){GPetHuntDlg.getInstance().buyContainer.removeSelf(),this.removePet();for(var e,i=0;i<t.length;i++){e=new GPetOpBk,e.size(130,116),this.m_szBkFrame.push(e),this.container.addChild(e),e=new GPetItem,e.SetData(t[i]),this.m_szOpBtn.push(e),this.container.addChild(e.m_disObj);var n=new Sprite;n.size(130,115),this.container.addChild(n),this.bjEvt.push(n),n.on("mousedown",this,this.OnLBDown,[e])}this.leng=t.length,this.m_szOpBtn.length>5?this.container.width=this.m_szOpBtn.length*(this.m_nOpBtnX+80):this.container.width=900,this.hScrollBar.value=0,this.ResetPos()}},i.removePet=function(){this.container.destroyChildren(),this.m_szBkFrame.length=0,this.m_szOpBtn.length=0,this.bjEvt.length=0,this.leng=0},i.GotoBuyFirPet=function(){var t;t="主界面_商店:270/商店物品_宠物01:90";var e=GLeadManager.SeprateLeadStr(t);DataTable.m_i_QuestInfo.RunHelp(e),this.parent.removeSelf()},i.AddItem=function(t){var e;e=new GPetOpBk,e.size(130,116),this.m_szBkFrame.push(e),this.container.addChild(e),e=new GPetItem,e.SetData(t),this.m_szOpBtn.push(e),this.container.addChild(e.m_disObj);var i=new Sprite;i.size(130,115),this.container.addChild(i),this.bjEvt.push(i),i.on("mousedown",this,this.OnLBDown,[e]),this.ResetPos()},i.DelItem=function(t){var e=this.Search(t,this.m_szOpBtn);0>e||(this.m_szBkFrame[e].removeSelf(),this.m_szBkFrame.splice(e,1),DisplayItem.SafeDelObj(this.m_szOpBtn[e]),this.m_szOpBtn.splice(e,1),this.bjEvt[e].removeSelf(),this.bjEvt.splice(e,1),this.ResetPos())},i.Search=function(t,e){for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1},i.ResetPos=function(){for(var t=0;t<this.m_szOpBtn.length;t++)this.m_szBkFrame[t].pos(t*(this.m_nOpBtnW+20)+this.m_nOpBtnX-65,7),this.m_szOpBtn[t].m_disObj.pos(t*(this.m_nOpBtnW+20)+this.m_nOpBtnX,90),this.bjEvt[t].pos(t*(this.m_nOpBtnW+20)+this.m_nOpBtnX-65,7)},i.OnLBDown=function(t,e){this.m_nUnLeadArrow=1,this.m_nAutoViewMode=0,this.m_nDraging=1,this.m_nOX=t.m_disObj.x,this.m_nOY=t.m_disObj.y,this.stX=this.stage.mouseX,this.stY=this.stage.mouseY,this.isMouse=!0,this.isH=!0,this.mY=0,this.queX=0,DisplayTools.addTarget(this.tip,GameMain._ins.m_gameUI.container),this.tip.SetPetTipsStr(t.m_vTips[1],t.m_vTips[2],t.m_vTips[3],t.m_vTips[4]),this.tip.onTipMove(),GameMain._ins.m_gameUI.isShow=!1,this.stage.on("mousemove",this,this.OnMouseMove,[t.m_disObj,this.m_pLink.m_szQueBk[this.m_pLink.GetFirEmptyNo()]?this.m_pLink.m_szQueBk[this.m_pLink.GetFirEmptyNo()].GetQueXpos():0,t.m_nTired]),this.stage.once("mouseup",this,this.upHandler,[t,t.m_nTired])},i.OnMouseMove=function(t,e,i,n){this.queX<e&&(this.queX=e);var s=257;if(this.tip.onTipMove(),this.leng<6&&(this.hScrollBar.stopScroll(),this.isMouse=!1),this.isMouse)return void(this.stX>this.stage.mouseX+30&&this.isMouse||this.stX<this.stage.mouseX-30&&this.isMouse?this.isH=!1:this.stY+10<this.stage.mouseY&&this.isH&&(this.isMouse=!1,this.hScrollBar.stopScroll(),this.queX+=this.hScrollBar.value));if(!(!this.m_nDraging||i||this.m_pLink.GetFirEmptyNo()<0)){var a=0,r=0;a=t.x,r=t.y;var h=DisplayTools.getNum(this.m_nOY,257,1,.5,r);t.scale(h,h),this.stage.mouseY-20>this.stY&&this.stage.mouseY>this.mY?t.y>=s||this.stage.mouseY>this.stY+s?t.y=s:t.y+=10:this.stage.mouseY<this.stY+s&&this.stage.mouseY<this.mY&&(t.y<=this.m_nOY||this.stage.mouseY<=this.stY?t.y=this.m_nOY:t.y-=10);var o=DisplayTools.getNum(this.m_nOY+65,s,this.m_nOX,this.queX,t.y);t.y>this.m_nOY+65?t.x=o:t.x=this.m_nOX,this.mY=this.stage.mouseY}},i.upHandler=function(t,e){this.tip.removeSelf(),this.stage.off("mousemove",this,this.OnMouseMove),GameMain._ins.m_gameUI.isShow=!0,e||this.m_pLink.GetFirEmptyNo()<0||(t.m_disObj.y>this.m_nOY+65?(this.m_nUnLeadArrow=0,this.ResetPoss(t)):Tween.to(t.m_disObj,{x:this.m_nOX,y:this.m_nOY},200))},i.CheckLeadArrow=function(){return this.m_nUnLeadArrow},i.ResetPoss=function(t){if(this.m_nDraging){this.m_nAutoViewMode=0,this.m_nDraging=0,t.m_disObj.scale(1,1),t.m_disObj.pos(this.m_nOX,this.m_nOY);var e=Laya.stage.mouseX,i=Laya.stage.mouseY;this.m_pLink.AddItem(t,e,i)&&this.m_nDelMode&&this.DelItem(t)}},e}(Panel),GSlicStarLv=function(t){function e(){this.m_nSlicNum=3,this.m_nMaxLv=9,this.m_nMaxNum=3,this.m_szStars=null,e.__super.call(this)}__class(e,"game.ui.comui.GSlicStarLv",t);var i=e.prototype;return i.SetMaxStar=function(t){this.m_nMaxNum=t},i.SetLevel=function(t,e){void 0===e&&(e=64),this.removeChildren(),this.m_szStars=[];var i=0,n=0;i=t/this.m_nSlicNum,n=t%this.m_nSlicNum;for(var s=0;s<this.m_nMaxNum;s++){var a;if(a=new Image2,a.pos((e+2)*s+e/2,e/2),a.skin=DataTable.getSkin("tex_素材_星星_空"),a.size(e,e),i>s)a.skin=DataTable.getSkin("tex_素材_星星_满");else if(s==i&&n>0){var r=0;switch(n){case 1:r=27;break;default:r=37}a.skin=DataTable.getSkin("tex_素材_星星_满");this.GetSlicRight(e,r,n)}this.m_szStars.push(a)}this.size(e+6,e)},i.GetSlicRight=function(t,e,i){return-t/2-(t-e)},i.OnSparkStar=function(t,e){void 0===e&&(e=0),0>t||t>=this.m_szStars.length||e>0&&(this.m_szStars[t].m_nAlpha=100)},e}(View),GUI_NumberTip=function(t){function e(){this.label=null,e.__super.call(this),this.mouseEnabled=!1;var t=new Image2;t.skin=DataTable.getSkin("tex_new"),t.pivot(16,16),this.addChild(t),this.label=new Label,this.label.fontSize=20,this.label.color="#ffffff",this.label.align="center",this.label.valign="middle",this.label.bold=!0,this.label.size(40,40),this.label.pivot(20,20),this.addChild(this.label)}__class(e,"game.ui.comui.GUI_NumberTip",t);var i=e.prototype;return i.Set=function(t){if(1>t)return void this.SetShow(0);this.SetShow(1),this.SetText(t.toString());var e=this.y,i=e-10;Tween.to(this,{y:i},200,Ease.elasticIn),Tween.to(this,{y:e},200,Ease.elasticOut,null,200)},i.SetText=function(t){this.label.text=t},i.SetShow=function(t){this.visible=1==t},e}(View),GMU_sec_fsArch=function(t){function e(){this.res="ui/img/52aab7a8f337e005.png",this.m_icon=null,this.m_pTip=null,e.__super.call(this),this.m_icon=new GObj2DImg,this.m_icon.skin=this.res,this.m_icon.scale(.6,.6),this.addChild(this.m_icon),this.m_pTip=new SparkTips,this.m_pTip.SetPos(46,46),this.addChild(this.m_pTip),this.on("click",this,this.onClickIcon),this.DelayLink()}__class(e,"game.ui.gmainui.GMU_sec_fsArch",t);var i=e.prototype;return i.onClickIcon=function(){MainIcon.getInstance().upperIcon.addInterface(0,1)},i.getResTag=function(t){if(null==GVar.texDic)return"";for(var e in GVar.texDic)if(GVar.texDic[e]==t)return e;return""},i.Refresh=function(t){void 0===t&&(t=0);var e=DataTable.m_iSelfUser.CountNewArch();Log1.debug(1,"[Refresh] 刷新成就数",e),this.SetShow(e>0?1:0),this.m_pTip.Set(e),t},i.DelayLink=function(){DataTable.m_iSelfUser.m_szData&&DataTable.m_iSelfUser.m_szData.achievement?(DataTable.m_iSelfUser.AddNoti("archchged",this,this.Refresh),this.Refresh(1)):Laya.timer.once(500,this,this.DelayLink,null)},i.SetShow=function(t){this.visible=t>0,GameMain._ins.m_gameUI.OnPlaceTempButton()},e}(View),GMU_sec_fsVipQuick=function(t){function e(){this.m_icon=null,e.__super.call(this),this.m_icon=new GObj2DImg,this.m_icon.skin=DataTable.getSkin("tex_按钮_vip加速"),this.m_icon.scale(.6,.6),this.addChild(this.m_icon),this.on("click",this,this.OnClick),this.DelayLink()}__class(e,"game.ui.gmainui.GMU_sec_fsVipQuick",t);var i=e.prototype;return i.Refresh=function(t){var e=this;void 0===t&&(t=1);var i=DataTable.m_iSelfUser.GetVipQuickCDTimes();this.visible=i>0,t||(this.disabled=!0,DataTable.m_iSelfUser.VipQuickCD(Handler.create(this,_a_=function(t){t?i--:e.disabled=!1,e.visible=i>0,GameMain._ins.m_gameUI.OnPlaceTempButton()})))},i.DelayLink=function(){DataTable.m_iSelfUser.m_szData?(DataTable.m_iSelfUser.AddNoti("vipquickused",this,this.Refresh),this.Refresh(1),Laya.timer.clear(this,this.DelayLink)):Laya.timer.loop(500,this,this.DelayLink)},i.OnClick=function(){GameMain._ins.closeAllView(),this.Refresh(0)},e}(View),GMU_sec_ranks=function(t){function e(t){this.m_icon=null,this.m_pTip=null,this.m_szLastNo=null,this.m_szAwardData=null,this.m_nCanAward=0,this.old=0,e.__super.call(this),this.m_icon=t,this.m_pTip=new SparkTips,this.m_pTip.SetPos(46,46),this.m_pTip.visible=!1,this.m_icon.addChild(this.m_pTip),DataTable.m_iSelfUser.on("m_szLastRankNo",this,this.OnGetLastRankNo),DataTable.m_iSelfUser.on("m_szRankAward",this,this.OnGetAwardData),this.OnGetLastRankNo(DataTable.m_iSelfUser.m_szLastRankNo),this.OnGetAwardData(DataTable.m_iSelfUser.m_szRankAward),this.OnCountTime()}__class(e,"game.ui.gmainui.GMU_sec_ranks",t);var i=e.prototype;return i.OnGetLastRankNo=function(t){this.m_szLastNo=t,this.CheckAllAward()},i.OnGetAwardData=function(t){this.m_szAwardData=t,this.CheckAllAward()},i.OnCheckAwardState=function(t){if(!this.m_szLastNo)return 0;if(t>=this.m_szLastNo.length)return 0;var e,i=this.m_szLastNo[t]%1e4-1,n=0>i?0:1,s=DataTable.m_iSelfUser.GetSvrLocalTime();if(!this.m_szAwardData)return 0;if(t>=this.m_szAwardData.length)return 0;var a=this.m_szAwardData[t];e=DateOp.SetDateStr(a,e);var r=s.getDay();return 0==r&&(r=7),r>1&&(s=DateOp.AdjDateDay(-r+1,s)),a=DateOp.GetYMD(s)+" 05:00:00",s=DateOp.SetDateStr(a,s),DateOp.SubDateSec(e,s)>=0&&(n=0),n&&(n=this.m_nCanAward),n},i.CheckAllAward=function(){Laya.timer.clear(this,this.CheckAllAwardNext),Laya.timer.once(300,this,this.CheckAllAwardNext)},i.CheckAllAwardNext=function(){var t=0,e=0;for(t=0;8>t&&(7==t&&!DataTable.m_iSelfUser.IsActWeekend(-1,1)||!(e=this.OnCheckAwardState(t)));t++);return Laya.timer.clear(this,this.OnWaitMove),t>=8||!e?void this.m_pTip.OnStop():void Laya.timer.loop(2e3,this,this.OnWaitMove)},i.OnWaitMove=function(){this.m_pTip.OnSpark()},i.OnCountTime=function(){this.old=0,Laya.timer.clear(this,this.OnCoutTimer),Laya.timer.loop(1e4,this,this.OnCoutTimer)},i.OnCoutTimer=function(){var t,e,i,n=0,s=0;t=DataTable.m_iSelfUser.GetSvrLocalTime(),e=DataTable.m_iSelfUser.GetSvrLocalTime(),s=e.getDay(),0==s&&(s=7),s>1&&(e=DateOp.AdjDateDay(-s+1,e)),i=DateOp.GetYMD(e)+" 05:00:00",e=DateOp.SetDateStr(i,e),n=DateOp.SubDateSec(t,e),0>n?this.m_nCanAward=0:this.m_nCanAward=1,this.old<0&&n>=0&&this.CheckAllAward(),this.old=n},e}(View),GItemBubble=function(t){function e(t){this.itemIcon=null,this.m_pIns=null,e.__super.call(this);var i=new Muti2DAniIns;i.createInsFromName("tex_bk_qipao_ani"),this.addChildAt(i,0),i.pos(25,0),this.itemIcon=new GItemIconBase1,this.addChild(this.itemIcon),this.itemIcon.Init(t,50),this.itemIcon.pos(30,0),this.x=-25,this.y=-190,this.visible=!1,this.m_pIns=i}__class(e,"game.ui.lead.npc.GItemBubble",t);var i=e.prototype;return i.init=function(t){this.itemIcon.Init(t,50)},i.SetY=function(t){this.y=t+5,this.scale(.1,.1),this.visible=!0,Tween.to(this,{scaleX:1,scaleY:1},1200,Ease.sineIn),Tween.to(this,{y:this.y-6},600,Ease.elasticIn),Tween.to(this,{y:this.y},600,Ease.elasticOut,null,600)},e}(View),GNeedItemBox=function(t){function e(){this.m_pBkBubble=null,this.m_pTalk=null,e.__super.call(this),this.m_pBkBubble=new Image2,this.m_pBkBubble.skin="3d/tex/51f9cee9fb2d6002.png",this.addChild(this.m_pBkBubble),this.m_pBkBubble.size(500,430),this.m_pBkBubble.pos(-145,-149),this.m_pTalk=new GObj2DDocx,this.m_pTalk.size(280,155),this.m_pTalk.fontSize=28,this.m_pTalk.bold=!0,this.m_pTalk.SetText("我什么也不需要"),this.addChild(this.m_pTalk),this.m_pTalk.pos(-35,-10)}__class(e,"game.ui.lead.npc.GNeedItemBox",t);var i=e.prototype;return i.OnLBClickLink=function(t,e){var i,n=StringOp.GetWordM(t,"-");i=n[0],t=n[1],i.length<1||t.length<1},i.CheckTalkStr=function(t){t=t.replace("<红色>","");var e=t.indexOf("[");if(0>e)return t;var i=t.indexOf("]");if(0>i)return t;if(e+1>i)return t;var n=t.substring(e+1,i);return n.length<1?t:t=t.replace("["+n+"]","")},i.SetNeedData=function(t,e,i,n,s){if(t=this.CheckTalkStr(t),this.m_pTalk.fontSize=30,this.m_pTalk.SetText(""),this.m_pTalk.AddNormalLine(t),!e){var a=0,r=0;return a=this.m_pTalk.GetWidth(),r=this.m_pTalk.GetHeight(),void(this.m_pTalk.height<r&&(this.m_pTalk.fontSize=24,a=this.m_pTalk.GetWidth(),r=this.m_pTalk.GetHeight()))}return},i.SetNeedDataEx=function(t,e,i,n,s){if(t=this.CheckTalkStr(t),this.m_pTalk.fontSize=30,this.m_pTalk.SetText(""),this.m_pTalk.AddNormalLine(t),!e){var a=0,r=0;return a=this.m_pTalk.GetWidth(),r=this.m_pTalk.GetHeight(),void(this.m_pTalk.GetHeight()<r&&(this.m_pTalk.fontSize=24,a=this.m_pTalk.GetWidth(),r=this.m_pTalk.GetHeight()))}var h=new GItemIconBase1;h.SetPos(45,65),h.Init(e,64),this.addChild(h);var o=new GUI_TextItemNum;o.SetScrPos(10,72,2),o.Set(-i),this.addChild(o);var l=new GObj2DImg;l.SetPos(80,50),l.SetSrc("tex_素材_箭头_右"),this.addChild(l);var u=new GItemIconBase1;u.SetPos(210,65),u.Init(s[0],64),this.addChild(u);var c=new GUI_TextItemNum;c.SetScrPos(175,72,2),c.Set(s[1]),this.addChild(c);var _=new Label;_.pos(10,100),_.text="（您有：             ）",this.addChild(_);var m=new GItemIconBase1;m.pos(150,105),m.Init(e),this.addChild(m);var d=new GUI_TextItemNum;d.SetScrPos(130,108,2),this.addChild(d),0>n+i?d.SetText(" "+n):d.SetText(""+n)},e}(View),GTalkBubble=function(t){function e(t,i,n){this.m_pLink=null,this.m_nMode=0,this.m_pBcontainer=null,this.m_pBkHelp=null,this.poffx=0,this.poffy=0,this.movie="",this.m_talk="",e.__super.call(this),void 0===t&&(t=""),void 0===n&&(n=1),this.onInit(),this.SetData(t,i,n)}__class(e,"game.ui.lead.npc.GTalkBubble",t);var i=e.prototype;return i.onInit=function(){this.m_pBcontainer=new Sprite,this.addChild(this.m_pBcontainer),this.m_pBkHelp=new Muti2DAniIns,this.m_pBkHelp.createInsFromName("help_ani"),this.m_pBcontainer.addChildAt(this.m_pBkHelp,0),this.m_pBkHelp.PlaySpeed(1,0)},i.SafeDelObj=function(){this.removeSelf()},i.OnLBClickLink=function(){if(!(this.movie.length<=0)){var t,e=this.movie,i=StringOp.GetWordM(e,"-");t=i[0],e=i[1],t.length<1||e.length<1||this.m_pLink.DelyShowMove(t,e,1)}},i.CheckTalkStr=function(t){this.movie="",t=t.replace("<红色>","");var e=t.indexOf("[");if(0>e)return t;var i=t.indexOf("]");return 0>i?t:e+1>i?t:(this.movie=t.substring(e+1,i),this.movie.length<1?t:t=t.replace("["+this.movie+"]",""))},i.SetData=function(t,e,i){void 0===t&&(t=""),void 0===i&&(i=1),Log1.debug(10,"[GTalkBubble]",t,e,i),e&&(this.movie="",this.m_nMode=0,this.m_pLink=e,this.m_talk=this.CheckTalkStr(t),this.SetObjFather(this.m_pLink),this.m_pBkHelp.visible=!0,this.pos(0,-170))},i.SetObjFather=function(t){var e;t instanceof game.build.DisplayItem&&(e=t.m_disObj),t instanceof laya.display.Sprite&&(e=t),null!=e&&(this.removeSelf(),e.addChild(this),e.mouseEnabled=!0)},i.SetShow=function(t){this.visible=!!t},i.ShowNotice=function(){this.m_nMode=0,GNpcDlg.Me().parent||this.m_pLink&&this.m_pLink.m_nNpcID&&(GNpcDlg.Me().flag=!0,GNpcDlg.Me().SetTalk(this.m_pLink.m_nNpcID,0,this.m_talk),GNpcDlg.Me().myPopup())},i.UnShowTalk=function(){this.m_nMode=1,1==GNpcDlg.Me().flag&&GNpcDlg.Me().Close()},e}(View),GameLogin=function(t){function e(){this.img=null,this.markImg=null,this.boxContainer=null,this.m_login=null,this.m_qqHead=null,this.m_wxHead=null,this.m_qq_txt=null,this.m_wx_txt=null,this.m_wx=null,this.m_qq=null,this.m_switch=null,this.m_logout=null,this.m_entergame=null,this.qq_wx_hd=null,this.logOutHd=null,this.enterGameHd=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.login.GameLogin",t);var i=e.prototype;return i.show=function(){Laya.stage.addChild(this),this.onResizeMe(),Laya.stage.off("resize",this,this.onResizeMe),Laya.stage.on("resize",this,this.onResizeMe)},i.onResizeMe=function(){this.width=Laya.stage.width,this.height=Laya.stage.height;var t=Laya.stage.width/1024,e=Laya.stage.height/768,i=t>e?t:e;this.img.width=1024*i,this.img.height=768*i,this.img.pivot(this.img.width/2,this.img.height/2),this.img.pos(this.width/2,this.height/2),this.markImg.right=50,this.markImg.top=50,this.m_login.centerX=0,this.m_login.bottom=100,this.m_switch.centerX=0,this.m_switch.bottom=100},i.Close=function(){Laya.stage.off("resize",this,this.onResizeMe),this.removeSelf(),this.destroy(),e._me=null},i.onInit=function(){this.size(1024,768),this.mouseEnabled=!0,this.img=new Image2,this.img.skin="ui/img/loadingBg.jpg",this.addChildAt(this.img,0),this.markImg=new Image2,this.markImg.skin="images/cp_logo.png",this.addChild(this.markImg),this.m_login=new Box,this.addChild(this.m_login),this.m_qqHead=new Image2,this.m_qqHead.skin="",this.m_qqHead.size(100,100),this.m_qqHead.pos(91,0),this.m_login.addChild(this.m_qqHead),this.m_qq_txt=new Label,this.m_qq_txt.size(264,45),this.m_qq_txt.pos(9,119),this.m_qq_txt.fontSize=26,this.m_qq_txt.color="#ffffff",this.m_qq_txt.stroke=1,this.m_qq_txt.align="center",this.m_qq_txt.text="QQ一键登录",this.m_login.addChild(this.m_qq_txt),this.m_qq=new Image2,this.m_qq.skin="assets/login/qq_enter.png",this.m_qq.pos(0,151),this.m_login.addChild(this.m_qq),this.m_wxHead=new Image2,this.m_wxHead.skin="",this.m_wxHead.size(100,100),this.m_wxHead.pos(509,0),this.m_login.addChild(this.m_wxHead),this.m_wx_txt=new Label,this.m_wx_txt.size(264,45),this.m_wx_txt.pos(427,119),this.m_wx_txt.fontSize=26,this.m_wx_txt.color="#ffffff",this.m_wx_txt.stroke=1,this.m_wx_txt.align="center",this.m_wx_txt.text="微信一键登录",this.m_login.addChild(this.m_wx_txt),this.m_wx=new Image2,this.m_wx.skin="assets/login/wx_enter.png",this.m_wx.pos(418,151),this.m_login.addChild(this.m_wx),this.m_switch=new Box,this.addChild(this.m_switch),this.m_logout=new Image2,this.m_logout.skin="assets/login/switch_user.png",this.m_logout.pos(0,0),this.m_switch.addChild(this.m_logout),this.m_entergame=new Image2,this.m_entergame.skin="assets/login/enter_game.png",this.m_entergame.pos(423,-3),this.m_switch.addChild(this.m_entergame),this.m_login.size(699,235),this.m_switch.size(623,97),this.m_login.autoSize=!0,this.m_switch.autoSize=!0,this.m_login.visible=!1,this.m_switch.visible=!1,this.m_logout.on("click",this,this.onSwitch),this.m_entergame.on("click",this,this.onEnterGame),this.m_qq.on("click",this,this.onEnter,["qq"]),this.m_wx.on("click",this,this.onEnter,["wx"]),this.onResizeMe()},i.onEnterGame=function(){this.enterGameHd&&(console.log("点击进入游戏"),this.enterGameHd.run())},i.showQQ_WX=function(t,e){if(this.qq_wx_hd=t,this.m_login.visible=!0,this.m_switch.visible=!1,this.m_wx.mouseEnabled=!0,this.m_qq.mouseEnabled=!0,this.m_login.mouseEnabled=!0,e&&0==e.result&&e.loginTypes)for(var i=e.loginTypes.length,n=0;i>n;n++){var s=e.loginTypes[n].accInfo,a=e.loginTypes[n].loginType;s&&"qq"==a&&(this.m_qqHead.skin=s.avatarUrl),s&&"wx"==a&&(this.m_wxHead.skin=s.avatarUrl)}this.show()},i.onEnter=function(t){this.qq_wx_hd&&(console.log("点击登陆："+t),this.qq_wx_hd.runWith(t))},i.showLogout=function(t,e){this.logOutHd=t,this.enterGameHd=e,this.m_login.visible=!1,this.m_switch.visible=!0,this.mouseEnabled=!0,this.m_switch.mouseEnabled=!0,this.m_logout.mouseEnabled=!0,this.m_entergame.mouseEnabled=!0,this.show()},i.onSwitch=function(){this.logOutHd&&(console.log("点击切换"),this.logOutHd.run())},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(View),GNoteMat=function(t){function e(){this.m_szMat=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.order.GNoteMat",t);var i=e.prototype;return i.onInit=function(){},i.OnMoveDisappear=function(t){for(var e=0,i=this.m_szMat.length,n=0;i>n;n++)this.m_szMat[n].OnMoveDisappear(t);t&&(e=5),1>e||!t||(e=200*e)},i.OnChged=function(t){if(this.DeleteAllSub(),this.m_szMat=[],t){var e=0,i=0,n=0,s=t.GetData();if(3==s.length&&s[0]&&!(s[1]>0)){i=0,n=10;var a=0,r=s[2];for(e=0;e<r[2].length;e++){var h=new NoteMaItem;a=DataTable.m_iSelfUser.GetBagItemNum(DataTable.m_iSelfUser.FindItemBagKind(r[2][e]),r[2][e]),h.Init(r[2][e],a,r[3][e],e,r[2].length-1),h.pos(i,n),i+=86,this.m_szMat.push(h),this.addChild(h)}}}},i.DeleteAllSub=function(){if(this.m_szMat&&!(this.m_szMat.length<1))for(var t,e=0;e<this.m_szMat.length;e++)t=this.m_szMat[e],t.removeSelf(),t=null},e}(View),GTaskNote=function(t){function e(){this.res_ani="ORDER_PAPER",this.m_ani=null,this.m_pDone=null,this.m_szData=[],e.__super.call(this),this.m_ani=new Muti2DAniIns,this.m_ani.createInsFromName(this.res_ani),this.addChild(this.m_ani)}__class(e,"game.ui.order.GTaskNote",t);var i=e.prototype;return i.SetState=function(t){this.visible=t},i.SetData=function(t){var e=0;return 3==this.m_szData.length&&t[1]!=this.m_szData[1]&&(t[1]>0?e=1:0==t[1]&&(e=-1)),3==t.length&&this.SetState(0!=t[0]),this.m_szData=t,e},
i.SetCanDo=function(t){t?this.m_ani.playAni("ok"):this.m_ani.playAni("std")},i.GetMats=function(){if(!this.m_szData)return null;if(3!=this.m_szData.length)return null;if(0==this.m_szData[0])return null;if(this.m_szData[1]>0)return null;var t=this.m_szData[2];return[t[2],t[3]]},i.GetDelTime=function(){return 3!=this.m_szData.length?0:0==this.m_szData[1]?0:this.m_szData[1]},i.Clear=function(){this.m_szData=null,this.visible=!1},e}(View),OrnamentItem=function(t){function e(){this.m_nID=0,this.m_nNum=0,this.m_nKind=0,this.m_nFormulStatus=0,this.m_szFormulData=null,this.m_name="",this.m_mem="",this.m_pIcon=null,this.m_iEva=null,this.m_iNum=null,this.m_iMem=null,this.m_pLinkObj=null,e.__super.call(this),this.m_iNum=new GObj2DMutiText,this.m_iNum.LoadAni("tex_文字中_ani"),this.m_iNum.SetScrPos(80,0,0),this.addChild(this.m_iNum),this.m_iEva=new GObj2DMutiText,this.m_iEva.LoadAni("tex_文字中_ani"),this.m_iEva.SetScrPos(80,-80,0),this.addChild(this.m_iEva),this.m_iMem=new GObj2DMutiText,this.m_iMem.LoadAni("tex_文字中_ani"),this.m_iMem.SetScrPos(80,50,0),this.addChild(this.m_iMem),this.OnInitEnd()}__class(e,"game.ui.ornament.OrnamentItem",t);var i=e.prototype;return i.OnInitEnd=function(){this.mouseEnabled=!1},i.Init=function(t,e,i){void 0===e&&(e=26),void 0===i&&(i=0),this.m_nID=t,SysID.IsDTZSJZID(t)&&(this.m_szFormulData=DataTable.m_iMacFormulTab.Get(t),this.m_szFormulData&&this.m_szFormulData.length>0?(this.m_nKind=1,this.UpdateFormulStatus()):this.m_nKind=0),SysID.IsJZPFID(t)&&(this.m_nKind=2);var n,s="",a="",r="",h=0;switch(this.m_nKind){case 2:n=DataTable.m_iItemTab.Get(t),a=n[2],s=n[10],h=n[9],r=n[3];break;default:n=DataTable.m_iBuildTab.Get(t),a=n[3],s=n[12],h=n[8],r=n[4]}!n||n.length<1||(this.m_pIcon&&this.m_pIcon.dispose(),this.m_pIcon=new GMutiAniIconBase,this.m_pIcon.SetAniImg(r,220,220),this.addChild(this.m_pIcon.m_disObj),h>0?this.m_iEva.SetText("w"+h):this.m_iEva.SetText(""),1&e?this.mouseEnabled=!0:this.mouseEnabled=!1,2&e?this.m_iMem.SetShow(1):this.m_iMem.SetShow(0),4&e?this.m_iNum.SetShow(1):this.m_iNum.SetShow(0),8&e&&(this.m_name=a),this.m_iMem.SetShow(0),this.m_iNum.SetShow(0),this.m_nNum=DataTable.m_iSelfUser.GetBuildHaveNum(t),this.m_nNum<i?this.m_iNum.SetText("("+this.m_nNum+"/"+i+")"):this.m_iNum.SetText("("+this.m_nNum+"/"+i+")"),this.SetMem(s,a,i))},i.SetMem=function(t,e,i){return i>0?(this.m_mem="",void this.m_iMem.SetText("")):(this.m_iNum.SetText(""),(!t||t.length<1)&&(t=e),void(this.m_mem=t))},i.UpdateFormulStatus=function(){this.m_nFormulStatus=DataTable.m_iSelfUser.ItemFormulStatus(this.m_nID)},i.OnClick=function(){},i.FlyEvalue=function(){var t,e=0;switch(this.m_nKind){case 2:t=DataTable.m_iItemTab.Get(this.m_nID),e=t[9];break;default:t=DataTable.m_iBuildTab.Get(this.m_nID),e=t[8]}var i=NaN,n=NaN;return i=this.stage.mouseX,n=this.stage.mouseY,1},e}(View),GBuyPop=function(t){function e(){this.onCloseHandler=null,this.onBuyHandler=null,this.m_nSetNum=0,this.m_nCostKind=0,this.m_nCost=0,this.m_pLink=null,this.m_p0=null,this.m_pBuy=null,this.m_pMoney=null,this.m_nLastX=-1,this.m_nLastY=-1,this.m_nAutoFindMode=3,this.m_pGoOn=!1,e.__super.call(this),this.m_p0=new Button;var t=DataTable.getSkin("tex_cacel");Laya.loader.load(t,Handler.create(this,this.OnLoadCloseSkin,[t]),null,"image"),this.m_p0.pos(0,0),this.addChild(this.m_p0),this.m_p0.on("click",this,this.onClose),this.m_pBuy=new Button;var i=DataTable.getSkin("btn_buy");Laya.loader.load(i,Handler.create(this,this.OnLoadBuySkin,[i]),null,"image"),this.m_pBuy.pos(110,0),this.m_pBuy.width=160,this.addChild(this.m_pBuy),this.m_pBuy.on("click",this,this.OnBuy),this.pivot(this.width/2,0),this.on("added",this,this.addHandler),this.on("removed",this,this.removeHandler)}__class(e,"game.ui.shop.GBuyPop",t);var i=e.prototype;return i.addHandler=function(){GameMain._ins.m_gameUI.isShow=!1},i.removeHandler=function(){GameMain._ins.m_gameUI.isShow=!0},i.Buy_SetCost=function(t,e){switch(this.m_pMoney&&this.m_pMoney.removeSelf(),this.m_pMoney=null,t){case 0:this.m_pMoney=new GUI_MoneyShowSmall;break;case 1:this.m_pMoney=new GUI_DiamondShowSmall;break;case 2:this.m_pMoney=new GUI_ShellShowSmall;break;case 3:this.m_pMoney=new GUI_MedalShowSmall}this.m_pMoney.SetScrPos(80,100,1),this.m_pMoney.Set(e),this.m_pBuy.addChild(this.m_pMoney)},i.Buy_SetPutLeft=function(t){1>t||(this.SetResImg(this.m_pBuy,"uiimg_安装"),this.m_pMoney&&this.m_pMoney.removeSelf(),this.m_pMoney=null,this.m_pMoney=new GUI_SmallNum,this.m_pMoney.SetScrPos(80,100,1),this.m_pMoney.SetText(t.toString()),this.m_pBuy.addChild(this.m_pMoney))},i.SetResImg=function(t,e){var i=DataTable.getSkin(e);Laya.loader.load(i,Handler.create(this,this.OnLoadImg,[t,i]),null,"image")},i.OnLoadImg=function(t,e){t.skin=e,t.stateNum=1},i.OnLoadCloseSkin=function(t){this.m_p0.skin=t,this.m_p0.stateNum=1},i.OnLoadBuySkin=function(t){this.m_pBuy.skin=t,this.m_pBuy.stateNum=1},i.onClose=function(){this.removeSelf(),this.onCloseHandler&&this.onCloseHandler.run(),this.onCloseHandler=null,this.onBuyHandler=null},i.SetSubData=function(t,e,i){this.m_nSetNum=t,this.m_nCostKind=e,this.m_nCost=i,i>0?this.Buy_SetCost(this.m_nCostKind,this.m_nCost):this.Buy_SetPutLeft(t)},i.SetCost=function(t,e){this.m_nCostKind=t,this.m_nCost=e,e>0&&this.Buy_SetCost(this.m_nCostKind,this.m_nCost)},i.OnBuy=function(){this.removeSelf(),this.onBuyHandler&&this.onBuyHandler.run(),this.m_pGoOn||(this.onBuyHandler=null,this.onCloseHandler=null)},i.OnPop=function(t){this.m_pLink=t},i.EnableBuy=function(t){this.m_pBuy.mouseEnabled=!!t},i.SetLinkMove=function(t,e){},i.updatePoint=function(t){this.x=t.x,this.y=t.y},i.setNewBuy=function(t){this.m_pGoOn=t},e}(View),GGiftItem=function(t){function e(){this.m_szItem=null,this.m_vTips=null,this.m_icon=null,this.m_pNum=null,this.m_pOk=null,e.__super.call(this),this.mouseEnabled=!0,this.m_icon=new GItemIconShow,this.m_icon.pos(20,15),this.addChild(this.m_icon),this.m_pNum=new GUI_TextItemNum,this.m_pNum.SetScrPos(56,120,1),this.addChild(this.m_pNum),this.m_pOk=new Image2,this.m_pOk.skin="dingdan/img_duigou.png",this.m_pOk.pos(5,-12),this.addChild(this.m_pOk),this.m_pOk.visible=!1}__class(e,"game.ui.wharf.ex.GGiftItem",t);var i=e.prototype;return i.onReset=function(){this.m_pOk.visible=!1,this.m_icon.onReset(),this.m_pNum.visible=!1},i.dispose=function(){this.destroy(),this.m_szItem=null,this.m_vTips=null},i.Init=function(t,e){this.m_szItem=[t,e],this.m_vTips=["item",t],this.m_icon.InitMe(t,64),this.m_pNum.SetText("X"+e),this.m_pNum.visible=!0},i.IsSelect=function(){return this.m_pOk.visible?1:0},i.OnSelect=function(){this.m_pOk.visible=!0},i.GetItemData=function(){return this.m_szItem},i.OnDisAppear=function(){Tween.to(this.m_pOk,{alpha:0},1e3,Ease.linearNone),Tween.to(this.m_pNum,{alpha:0},1e3,Ease.linearNone),Tween.to(this,{alpha:0},1e3,Ease.linearNone)},e}(View),GResultStar=function(t){function e(){this.m_szNote=[],e.__super.call(this),this.size(350,150)}__class(e,"game.ui.wharf.ex.GResultStar",t);var i=e.prototype;return i.dispose=function(){for(var t,e=0;e<this.m_szNote.length;e++)t=this.m_szNote[e],t&&t instanceof display.MutiAni.Muti2DAniIns?(t.dispose(),this.m_szNote[e]=null,t=null):t&&t instanceof game.ui.base.GObj2DImg&&(t.removeSelf(),t.destroy(),this.m_szNote[e]=null,t=null);this.m_szNote=null},i.onReset=function(){for(var t,e=0;e<this.m_szNote.length;e++)t=this.m_szNote[e],t&&t instanceof display.MutiAni.Muti2DAniIns?(t.dispose(),this.m_szNote[e]=null,t=null):t&&t instanceof game.ui.base.GObj2DImg&&(t.removeSelf(),t.destroy(),this.m_szNote[e]=null,t=null);this.m_szNote.length=0},i.SetStarNum=function(t){for(var e=0;3>e;e++){var i;switch(t>e?(i=new Muti2DAniIns,i.createInsFromName("tex_航运挑战星星_ani"),i.PlayKindEndRetrun("onshow"),1!=e&&(i.scaleX=i.scaleY=.7),this.addChild(i),this.m_szNote.push(i)):(i=new GObj2DImg,i.SetSrc(DataTable.getSkin("tex_航运挑战_大星星_灰")),1!=e&&i.SetSize(94,94),i.alpha=0,Tween.to(i,{alpha:1},500,Ease.linearIn),this.addChild(i),this.m_szNote.push(i)),e){case 0:i.pos(0,10);break;case 1:i.pos(94,0);break;case 2:i.pos(228,10)}}},e}(View),GStarTxt=function(t){function e(){this.m_pSmallStars=null,this.m_pText=null,e.__super.call(this),this.size(140,40),this.onInit()}__class(e,"game.ui.wharf.ex.GStarTxt",t);var i=e.prototype;return i.onInit=function(){this.m_pSmallStars=new GDrawStars,this.m_pSmallStars.SetAnchorPos(0,0),this.addChild(this.m_pSmallStars),this.m_pText=new Label,this.m_pText.pos(0,-8),this.m_pText.color="#ffffff",this.m_pText.bold=!0,this.m_pText.fontSize=18,this.addChild(this.m_pText)},i.SetDef=function(t,e,i,n){this.pos(t,e),this.m_pSmallStars.SetNum(i,2),this.m_pText.text=n},e}(View),GOrderBox=function(t){function e(t){this.m_pIcon=null,this.m_pNum=null,this.ani=null,this.m_nNo=0,this.m_nSt=0,this.m_pHelpHead=null,this.pid=null,e.__super.call(this),this.pid=t,this.onInit()}__class(e,"game.ui.wharf.GOrderBox",t);var i=e.prototype;return i.onReset=function(){this.m_pHelpHead&&this.m_pHelpHead.removeSelf()},i.onInit=function(){var t=100;this.hitArea=new Rectangle(-t/2,-t/2,t,t),this.ani=new Muti2DAniIns,this.ani.mouseEnabled=!0,this.ani.createInsFromName("ani_box2"),this.addChildAt(this.ani,0),this.m_pIcon=new GItemIconBase1,this.addChild(this.m_pIcon),this.m_pNum=new GUI_TextItemNum,this.m_pNum.SetScrPos(22,22,0),this.addChild(this.m_pNum),this.on("click",this,this.OnClick),this.on("mousedown",this,this.OnMouseIn)},i.OnMouseIn=function(){this.stage.once("mouseup",this,this.OnMouseOut),Tween.to(this,{scaleX:1.1,scaleY:1.1},100,Ease.circIn)},i.OnMouseOut=function(){Tween.to(this,{scaleX:1,scaleY:1},150,Ease.circIn)},i.Init=function(t,e,i){this.onReset(),this.m_nNo=t,this.pos(e,i+70),this.m_nSt=-1,this.m_pIcon.visible=!1,this.m_pIcon.mouseEnabled=!1,this.m_pNum.visible=!1,this.mouseEnabled=!0},i.SetStatus=function(t){var e=t[0];if(e!=this.m_nSt){var i=(1&e?"close_":"open_")+(2&e?1:0);this.ani.playAni(i),this.ani.PlaySpeed(1,0);var n=0;1&e?(this.m_pIcon.visible=!1,this.m_pNum.visible=!1,0==this.m_nSt&&this.PlayCloseAni(),2&e&&"number"==typeof t[1]&&Math.floor(t[1])==t[1]&&(n=1)):(this.m_pIcon.visible=!0,this.m_pNum.visible=!0,this.m_pIcon.Init(t[2],48),this.m_pNum.SetText(""+t[3])),n?this.m_pHelpHead=this.AddHelp(t[1]):this.SafeDelObj(this.m_pHelpHead),this.m_nSt=e}},i.Ref=function(){this.SetStatus(this.pid.GetOrderNo(this.m_nNo))},i.OnClick=function(){this.pid.m_pSelect.OnSelect(this.m_nNo)},i.PlayCloseAni=function(){this.m_nSt=1|this.m_nSt,this.m_pIcon.visible=!1,this.m_pNum.visible=!1,this.ani.playAni("close_"+(2&this.m_nSt?1:0)),this.ani.PlayKindEndRetrun("c_"+(2&this.m_nSt?1:0)),DataTable.m_iSoundTab.OnPlay("海轮装箱")},i.OnFinishBox=function(t,e){var i=this,n=NaN,s=NaN;n=this.stage.mouseX,s=this.stage.mouseY;var a=new Point;this.localToGlobal(a),n=a.x,s=a.y,this.pid.m_nSelf?DataTable.m_iSelfUser.OnFinishBox(this.m_nNo,t,[n,s],Handler.create(this,function(t){t&&i.PlayCloseAni(),e&&e.runWith(t)})):DataTable.m_iSelfUser.OnFinishOtherBox(this.m_nNo,this.pid.GetOrderNo(this.m_nNo),t,[n,s,0,"",2],Handler.create(this,function(t){if(t){var a=["有你的帮助我的生活变得轻松有趣！非常感谢！","没有你的帮助，我将寸步难行！多谢我的朋友！","你的帮助真是雪中送炭啊！","合作愉快，你真是帮了我的大忙！","多谢了！下次有事儿记得过来找我！","大恩不言谢，咱们的情谊没齿不忘！"];GFlyItemIcon.FlyText(a[Math.floor(Math.random()*a.length)]),DataTable.m_iSelfUser.OnGetOtherEvaGold(n,s),i.PlayCloseAni(),e&&e.runWith(1)}else e&&e.runWith(0)}))},i.AddHelp=function(t){return new Image2},i.SafeDelObj=function(t){t instanceof laya.display.Sprite?t.removeSelf():t instanceof game.build.DisplayItem&&DisplayItem.SafeDelObj(t)},e}(View),GNauticalChart=function(t){function e(){this.m_pLink=null,this.m_szData=null,this.m_nLeftTime=0,this.m_szPlace=[],this.m_nTabNo=0,e.__super.call(this)}__class(e,"game.ui.wharf.termini.GNauticalChart",t);var i=e.prototype;return i.onReset=function(){for(var t,e=0;e<this.m_szPlace.length;e++)t=this.m_szPlace[e],t&&(t.visible=!1);this.m_pLink=null,this.m_nTabNo=0,this.m_nLeftTime=0,this.m_szData=null},i.GetTabNo=function(){return this.m_nTabNo},i.InitMap=function(t,e){this.onReset(),this.m_pLink=t,this.m_nTabNo=e,DataTable.m_iSelfUser.GetBoatExData(Handler.create(this,this.onGetBoatExData))},i.onGetBoatExData=function(t){this.m_szData=t;var e=DataTable.m_iBoatExTab.GetAll();e=e.concat(),e=ArrOp.InsertSz(-1,e,null);var i=0,n=1,s=0,a=0;for(this.m_nTabNo>0&&(t[4]&&(a=t[4].length),6*this.m_nTabNo>a&&(n=0)),i=6*this.m_nTabNo+1;i<e.length;i++){var r;if(s>=this.m_szPlace.length?(r=new GPlace,this.addChild(r),this.m_szPlace.push(r)):r=this.m_szPlace[s],r.Init(this),r.pos(e[i][3],e[i][4]),t[4]&&(a=t[4].length),i>=a?(r.OnInit(i,e[i][1],e[i][2],0,this.m_szData[3],n),n=0):(r.OnInit(i,e[i][1],e[i][2],this.m_szData[4][i],this.m_szData[3],n),this.m_szData[4][i]<1&&(n=0)),r.visible=!0,s++,s>=6)break}this.m_szData[6]<1},i.onSure=function(){DataTable.m_iSelfUser.OnBuyChallengetime(null)},i.OnBegin=function(){this.OnSel(0)},i.OnSel=function(t){GTerminiDlg.Me().Init(this.m_pLink,t),GTerminiDlg.Me().myPopup()},e}(View),MarketCtr=function(t){function e(){this.markt=null,this.loginResult=null,e.__super.call(this)}__class(e,"net.MarketCtr",t);var i=e.prototype;return i.BeginLogin=function(){Laya.timer.loop(100,this,this.Login),this.Login()},i.Login=function(){this.markt=window.LayaBoxMarket&&window.LayaBoxMarket.getInstance(),this.markt&&this.markt.loginResult&&(Laya.timer.clear(this,this.Login),this.loginResult=this.markt.loginResult,this.setLoginResult(this.loginResult))},i.setLoginResult=function(t){this.loginResult=t;var e=this.loginResult.result;0==e?this.markt.canLogout()?this.LogOutShow():this.EnterGame():1e3==e?this.QQ_WX_LoginShow():this.ShowErr()},i.LogOutShow=function(){GameLogin.Me().showLogout(Handler.create(this,this.onLogOut),Handler.create(this,this.EnterGame))},i.onLogOut=function(){var t=this;console.log("登出"),this.markt.logout("",function(e){var i=JSON.parse(e);0==i.result&&2==t.loginResult.loginType&&t.QQ_WX_LoginShow()})},i.QQ_WX_LoginShow=function(){var t=this.loginResult.availableData;GameLogin.Me().showQQ_WX(Handler.create(this,this.QQ_WX_Login),t)},i.QQ_WX_Login=function(t){var e=this;console.log("登陆方式："+t),this.markt.login(t,function(t){e.loginResult=JSON.parse(t);var i=e.loginResult.result;0==i?e.markt.canLogout()?e.LogOutShow():e.EnterGame():e.onLogOut()})},i.EnterGame=function(){console.log("进入游戏。"),GameLogin.Me().Close();var t=this.loginResult.data;GameMarket.spFname=t.spFname,GameMarket.isIOS=t.isIOS,GameMarket.userid=t.unionUserId,GameMarket.userInfo={userId:GameMarket.userid,spId:t.sp,accessToken:t.accessToken},GameMarket.isShare=this.markt.canShareAndFeed&&this.markt.canShareAndFeed()?!0:!1,GameMarket.market=this.markt,WSocket.me.callIp_devlogin()},i.ShowErr=function(){Assets.checkRes(Assets.reuseUrl)?this.alertErr():Laya.loader.load(Assets.reuseUrl,Handler.create(this,this.alertErr),null,"atlas",0)},i.alertErr=function(){confirm("登陆出错，请刷新重试！")&&window.location.reload()},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(View),GQueBk=function(t){function e(){this.m_nNo=0,this.m_nKind=0,e.__super.call(this),this.SetSrc(DataTable.getSkin("tex_素材_寻宝小岛")),this.SetSize(137,138)}__class(e,"display.petHunt.GQueBk",t);var i=e.prototype;return i.GetKind=function(){return this.m_nKind},i.SetKind=function(t){this.m_nKind=t},i.SetNo=function(t){this.m_nNo=t},i.GetQuePt=function(t,e){t+=70,e+=63},i.GetQueXpos=function(){return this.x+70},i.GetQueYpos=function(){return this.y+63},i.OnLBUp=function(t,e,i){},e}(GObj2DImg),GRateItem=function(t){function e(){this.m_nKind=0,this.m_nDefNum=0,this.m_pNum=null,e.__super.call(this),this.mouseEnabled=!0,this.initTxt()}__class(e,"display.petHunt.GRateItem",t);var i=e.prototype;return i.initTxt=function(){this.m_pNum=new GObj2DMutiText,this.m_pNum.LoadAni("tex_文字中_ani"),this.addChild(this.m_pNum),this.m_pNum.SetScrPos(48,38,0)},i.Init=function(t,e,i){this.m_nItemID=t,this.m_nDefNum=e,this.m_nKind=i,this.InitMe(t,52),1>t||t>5||this.m_pNum.SetText(""+e)},i.GetKind=function(){return this.m_nKind},i.GetRewardID=function(){return this.m_nItemID},i.SetNumAgv=function(t){this.m_nKind>0||(1>t&&(t=1),this.m_pNum.SetText(""+this.m_nDefNum*t))},i.SetRate=function(t,e,i){},e}(GItemIconShow),GDiscount=function(t){function e(){this.m_pDiscount=null,e.__super.call(this),this.init()}__class(e,"display.Tom.GDiscount",t);var i=e.prototype;return i.init=function(){this.skin=DataTable.getSkin("tex_素材_打折底板"),this.size(72,72),this.pos(36,36),this.m_pDiscount=new Text,this.m_pDiscount.color="#ffffff",this.m_pDiscount.fontSize=16,this.m_pDiscount.pos(36,36),this.addChild(this.m_pDiscount)},i.SetDiscount=function(t){var e="-n%";e=e.replace("n",100-t),this.m_pDiscount.text="s"},e}(GObj2DImg),GItemNumIcon=function(t){function e(){this.m_pNum=null,this.m_nBuildPlayAni=0,this.m_pEvalue=null,this.m_szNum=0,e.__super.call(this),this.m_pNum=new GUI_ConNumText,this.addChild(this.m_pNum),this.m_pNum.visible=!1}__class(e,"game.ui.comui.GItemNumIcon",t);var i=e.prototype;return i.GetNum=function(){return this.m_szNum},i.Init=function(t,e,i,n,s,a,r){if(void 0===i&&(i=80),void 0===n&&(n=""),void 0===s&&(s=2),void 0===a&&(a=1),void 0===r&&(r=0),this.SafeDelObj(this.m_pEvalue),this.InitMe(t,i),SysID.IsDTJZID(t)&&r){var h=DataTable.m_iBuildTab.Get(t);this.m_pEvalue=new GUI_EvalueSmall,this.m_pEvalue.SetScrPos(i/2,i+20,0),this.m_pEvalue.Set(h[8])}this.SetRect(0,0,i,i),this.SetNum(e,n,s,a,i)},i.SetNum=function(t,e,i,n,s){void 0===e&&(e=""),void 0===i&&(i=2),void 0===n&&(n=1),void 0===s&&(s=80);var a=0;if(this.m_szNum=t,null!=t&&("number"==typeof t&&Math.floor(t)==t?(n>0?a=1:n||Laya.__parseInt(t)>1&&(a=1),a>0&&(this.m_pNum.SetText(e+t.toString()),this.m_pNum.SetShow(1))):"number"==typeof t?(this.m_pNum.SetText(e+Math.floor(10*t)/10),this.m_pNum.SetShow(1),a=1):2==t.length&&(this.m_pNum.Set(t[0],t[1]),this.m_pNum.SetShow(1),a=1)),a)switch(i){case 0:this.m_pNum.SetScrPos(-10,s/2,2);break;case 1:this.m_pNum.SetScrPos(s/2,0,1);break;case 2:this.m_pNum.SetScrPos(s+5,s/2,0);break;case 3:this.m_pNum.SetScrPos(s/2,s+20,1);break;default:this.m_pNum.SetScrPos(s-10,s/2+20,0)}},e}(GItemIconShow),GFlyItemIcon=function(t){function e(){this.m_pNum=null,this.m_itemid=0,e.__super.call(this),this.m_pNum=new GObj2DMutiText,this.m_pNum.LoadAni("tex_文字大_ani"),this.addChild(this.m_pNum)}__class(e,"game.ui.comui.icon.GFlyItemIcon",t);var i=e.prototype;return i.dispose=function(){Tween.clearAll(this),Laya.timer.clearAll(this),this.scale(1,1),this.skin="",this.m_pNum.SetText(" "),this.alpha=1,this.numChildren>1&&(this.getChildAt(1).graphics.clear(),this.getChildAt(1).removeSelf()),this.graphics.clear(),this.removeSelf(),e.poolManager.push(this)},i.FlyDown=function(t,e,i){var n=this;void 0===i&&(i=0),this.m_itemid=t,this.InitMe(t,64),this.m_pNum.SetText(e+""),this.m_pNum.SetScrPos(32,32,0),this.m_pNum.scaleX=this.m_pNum.scaleY=.8,i>0&&(this.visible=!1,Laya.timer.once(i,this,delayH=function(){n.visible=!0})),Tween.to(this,{alpha:.1,scaleX:.3,scaleY:.3},500,null,null,i),this.timer.once(i+510,this,this.dispose)},i.FlyTo=function(t,i,n){void 0===n&&(n=0);var s=this.GetFlyToObj(t,i,e.m_s,e.m_tp);this.OnFly(s,e.m_tp.x,e.m_tp.y,e.m_s.ustr),this.m_itemid=t},i.OnFly=function(t,e,i,n,s){void 0===n&&(n=""),void 0===s&&(s=1e3),Tween.to(this,{x:e},s-100,Ease.circIn),Tween.to(this,{y:i},s-10,Ease.backIn),this.timer.once(s,this,this.onFlyOver,[t,n])},i.onFlyOver=function(t,e){void 0===e&&(e=""),t&&t instanceof laya.display.Sprite&&(Tween.to(t,{scaleX:1.1,scaleY:1.1},100,Ease.circOut,null),Tween.to(t,{scaleX:1,scaleY:1},100,Ease.circOut,null,100)),this.dispose()},i.GetFlyToObj=function(t,i,n,s){n.ustr="",e.m_tp.x=0,e.m_tp.y=0;var a;switch(t){case 1:this.m_pNum.SetText("+$"+i),a=MainIcon.getInstance().getIconByName("m_i金币显示",s),n.ustr="获得金币0"+(2*Math.random()>1?2:1);break;case 2:this.m_pNum.SetText("+Z"+i),a=MainIcon.getInstance().getIconByName("m_i钻石显示",s),n.ustr="获得经验";break;case 4:a=MainIcon.getInstance().getIconByName("m_iExpShow",s),this.m_pNum.SetText("+E"+i),n.ustr="获得经验";break;case 5:this.m_pNum.SetText("+T"+i),n.ustr="获得经验";break;case 7:this.m_pNum.SetText("+F"+i),n.ustr="获得友情点";break;case 25:this.m_pNum.SetText("+^"+i),a=MainIcon.getInstance().getIconByName("m_i闪电显示",s),n.ustr="获得闪电";break;case-1:this.m_pNum.SetText("w"+i),a=MainIcon.getInstance().getIconByName("m_iDecBagShow",s);break;default:if(n.ustr="仓库进货",5e3>t){var r=DataTable.m_iItemTab.Get(t);if(null==r){gSys.Err("item not find id="+t);break}a=1==r[4]||6==r[4]?MainIcon.getInstance().getIconByName("m_iCropBagShow",s):MainIcon.getInstance().getIconByName("m_iItemBagShow",s)}else a=SysID.IsDTZSJZID(t)?MainIcon.getInstance().getIconByName("m_iDecBagShow",s):MainIcon.getInstance().getIconByName("m_iItemBagShow",s);switch(this.InitMe(t,64),t){case 8:case 23:case 24:case 29:case 30:case 40:a=MainIcon.getInstance().getIconByName("m_i钻石显示",s)}i>1&&(this.m_pNum.SetText("+"+i),this.m_pNum.SetScrPos(32,32,0),this.m_pNum.scaleX=this.m_pNum.scaleY=.8)}return a},e.initOPool=function(){for(var t=0;40>t;t++)e.poolManager.push(new e)},e.AutoFlyTo=function(t,i,n,s){void 0===s&&(s=0);var a;a=e.poolManager.length?e.poolManager.shift():new e,!n||n.length<2?a.pos(Laya.stage.mouseX,Laya.stage.mouseY):(n[0]||(n[0]=Laya.stage.mouseX),n[1]||(n[1]=Laya.stage.mouseY),a.pos(n[0],n[1])),a.scale(1,1),a.skin="",a.alpha=1,a.FlyTo(t,i,s),Laya.stage.addChild(a),a=null},e.FlyDownItem=function(t,i,n,s){t=t;var a;a=e.poolManager.length?e.poolManager.shift():new e,!s||s.length<2?a.pos(Laya.stage.mouseX,Laya.stage.mouseY):(s[0]||(s[0]=Laya.stage.mouseX),s[1]||(s[1]=Laya.stage.mouseY),a.pos(s[0],s[1])),a.scale(1,1),a.skin="",a.alpha=1,a.FlyDown(t,i,n),Laya.stage.addChild(a),a=null},e.FlyText=function(t,i){void 0===i&&(i="#ffffff");var n=NaN,s=new Text;DisplayTools.addTarget(s,Laya.stage,{text:t,fontSize:30,stroke:2,color:i},-1,!0),n=s.y-120,Tween.to(s,{y:n},800,Ease.circOut),Tween.to(s,{alpha:.1},300,Ease.circOut,Handler.create(e,des=function(){s.removeSelf(),s=null}),1e3)},e.INIT_NUMBER=40,e.poolManager=[],__static(e,["m_tp",function(){return this.m_tp=new Point},"m_s",function(){return this.m_s=new StringRef}]),e}(GItemIconShow),SparkTips=function(t){function e(){this.m_nStarPos=0,this.m_nEndPos=-10,e.__super.call(this),this.SetSrc("mainIcon/52aab804f337e00a.png"),this.size(34,34)}__class(e,"game.ui.comui.SparkTips",t);var i=e.prototype;return i.SetPos=function(e,i){t.prototype.SetPos.call(this,e,i),this.m_nStarPos=this.y,this.m_nEndPos=this.y-10},i.OnSpark=function(){this.SetShow(1),Tween.clearTween(this),Tween.to(this,{y:this.m_nEndPos},600,Ease.elasticIn),Tween.to(this,{y:this.m_nStarPos},600,Ease.elasticOut,null,600)},i.OnStop=function(){this.SetShow(0),Tween.clearTween(this),this.y=this.m_nStarPos},i.Set=function(t){t?(this.OnSpark(),Laya.timer.loop(6e3,this,this.OnSpark,null,!0)):(this.OnStop(),Laya.timer.clear(this,this.OnSpark))},i.SetShow=function(t){this.visible=1==t},e}(GObj2DImg),GDiamondBtn=function(t){function e(t,i){void 0===i&&(i=""),e.__super.call(this,t,i),this.m_sIconName="GUI_DiamondShowSmall"}return __class(e,"game.ui.comui.btn.GDiamondBtn",t),e}(GRechargeBtn),GLightBtn=function(t){function e(t,i){void 0===i&&(i=""),e.__super.call(this,t,i),this.m_sIconName="GUI_LightShowSmall"}return __class(e,"game.ui.comui.btn.GLightBtn",t),e}(GRechargeBtn),GBuildIconBase=function(t){function e(){this.m_nBuildID=0,this.m_pDiy=null,e.__super.call(this)}__class(e,"game.ui.comui.icon.GBuildIconBase",t);var i=e.prototype;return i.Init=function(t,e,i){if(void 0===e&&(e=64),void 0===i&&(i=64),this.m_nBuildID=t,6==t){var n=DataTable.m_iItemTab.Get(this.m_nBuildID);if(!n)return;return this.skin=Assets.BuildUrl("tex_购买地块_ani"),void this.size(e,i)}var s=DataTable.m_iBuildTab.Get(this.m_nBuildID);return s?(13==s[1],this.skin=Assets.BuildUrl(s[4]),this.size(e,i),void(7==s[1])):void gSys.Err("找不到建筑： ID="+this.m_nBuildID)},e}(GMutiAniIconBase1),GUI_DiamondShowSmall=function(t){function e(){e.__super.call(this),this.m_sAddString="Z"}return __class(e,"game.ui.comui.small.GUI_DiamondShowSmall",t),e}(GUI_SmallNum),GUI_EvalueSmall=function(t){function e(){e.__super.call(this),this.m_sAddString="w"}return __class(e,"game.ui.comui.small.GUI_EvalueSmall",t),e}(GUI_SmallNum),GUI_LightShowSmall=function(t){function e(){e.__super.call(this),this.m_sAddString="^"}return __class(e,"game.ui.comui.small.GUI_LightShowSmall",t),e}(GUI_SmallNum),GUI_MedalShowSmall=function(t){function e(){e.__super.call(this),this.m_sAddString="I"}return __class(e,"game.ui.comui.small.GUI_MedalShowSmall",t),e}(GUI_SmallNum),GUI_MoneyShowSmall=function(t){function e(){e.__super.call(this),this.m_sAddString="$"}return __class(e,"game.ui.comui.small.GUI_MoneyShowSmall",t),e}(GUI_SmallNum),GUI_ShellShowSmall=function(t){function e(){e.__super.call(this),this.m_sAddString="B"}return __class(e,"game.ui.comui.small.GUI_ShellShowSmall",t),e}(GUI_SmallNum),GUI_StarShowSmall=function(t){function e(){e.__super.call(this),this.m_sAddString="X"}return __class(e,"game.ui.comui.small.GUI_StarShowSmall",t),e}(GUI_SmallNum),GMB_Fence=function(t){function e(){e.__super.call(this)}__class(e,"game.build.GMB_Fence",t);var i=e.prototype;return i.AutoLinkOther=function(){},e}(GMB_Ornament),GMC_ActivNpc=function(t){function e(){this.m_szNeed=null,this.m_szAward=null,e.__super.call(this),DataTable.m_iSelfUser.AddNoti("actnpcorderchg",this,this.PlaySound)}__class(e,"game.ui.lead.npc.GMC_ActivNpc",t);var i=e.prototype;return i.OnInited=function(t,e,i,n,s){this.OnInitedMe(t,e,i,n,s);var a=DataTable.m_iActNpcOrderTab.GetSzItem(this.m_szNpcData[2]);this.m_szNeed=[a[0][0],Math.min(-a[0][1],a[0][1])],this.m_szAward=a[1]},i.SetState=function(t){switch(this.m_nState=t,this.m_nNeedFindPath=0,DisplayItem.SafeDelObj(this.m_pBubble),t){case 0:Laya.timer.clear(this,this.OnMoveEnd);break;case 1:Laya.timer.clear(this,this.OnMoveEnd);break;case 2:this.SetAniKind(this.zhanli),this.PlayAni(this.m_fPlaySpeed),Laya.timer.loop(1e4,this,this.OnMoveEnd,null,!0)}},i.OnMoveEnd=function(){var t=this;if(DisplayItem.SafeDelObj(this.m_pBubble),this.IsAniKind(this.zhanli)){var e=[this.yaotang,this.xiuxi];if(this.PlayKindEndRetrun(e[Math.random()*e.length]),2*Math.random()&&this.m_szNpcData){this.m_pBubble&&this.m_pBubble.removeSelf(),this.m_pBubble=new GItemBubble(this.m_szNeed[0]);var i=this.m_disObj.GetRect();i?this.m_pBubble.SetY(-(i.bottom-i.top)):this.m_disObj.SetOkHandler(Handler.create(this,function(){var e=this.m_disObj.GetRect();t.m_pBubble&&t.m_pBubble.SetY(-(e.bottom-e.top))})),this.m_disObj.addChild(this.m_pBubble),this.m_disObj.addChild(this.m_pBubble)}}},i.OnMove=function(t){this.SetState(t);var e;t?(Laya.timer.clear(this,this.OnMoveEnd),this.PlayKindEndRetrun(this.touxiao),this.PlayKindEndRetrun(this.tiaoqixiaoshi),e=new DisplayItem,e.LoadFromName("tex_万圣节消失烟雾1_ani"),e.SetPos(this.m_nXpos,this.m_nYpos),e.PlayKindEnd("std",2,0,Handler.create(this,this.DelThis,null,!1)),this.DelThis()):(this.SetShow(0),e=new DisplayItem,e.LoadFromName("tex_万圣节消失烟雾1_ani"),e.SetPos(this.m_nXpos,this.m_nYpos),e.PlayKindEnd("std",2,0,Handler.create(this,this.DelThis,null,!1)),Laya.timer.once(400,this,this.SetShow,[1]),this.SetAniKind(this.zhanli),this.PlayAni(this.m_fPlaySpeed),this.SetState(2))},i.PlaySound=function(t){},i.MoveAround=function(){this.SetState(2)},i.OnHarvest=function(){GNpcDlg.Me().pid=this,GNpcDlg.Me().myPopup(!0)},i.NeedFindPath=function(){return 1},e}(GMC_Customer),MyDiaLog=function(t){function e(){this.isCanCloseByOther=!0,this.isCanClickMaskToDel=!0,this._tween=null,this._black_bj=null,this.selfData=null,e.__super.call(this),e._myMask.hasListener("click")||(e._myMask.mouseEnabled=!0,e._myMask.on("click",this,this.onMaskClick)),Laya.stage.on("resize",this,this.onSize),this.pivot(this.width/2,this.height/2)}__class(e,"display.mydialog.MyDiaLog",t);var i=e.prototype;return i.onSize=function(){this.popupCenter&&(this.x=Laya.stage.width/2,this.y=Laya.stage.height/2),e._myMask.parent&&(e._myMask.size(Laya.stage.width,Laya.stage.height),e._myMask.graphics.clear(),e._myMask.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,UIConfig.popupBgColor)),this.scale(DisplayTools.globalScale,DisplayTools.globalScale),this._black_bj&&this._black_bj.size(Laya.stage.width,Laya.stage.height)},i.onMaskClick=function(t){if(!Input.isInputting){var i=Dialog.manager.dialogLayer.getChildAt(Dialog.manager.dialogLayer.numChildren-1);i&&i.isCanClickMaskToDel&&(i instanceof display.mydialog.MyDiaLog?i.close("MyDiaLog._mask"):e.closeAll())}},i.myShow=function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!0),GameMain._ins.m_gameUI.disposeIcon(),t&&e.closeAll(),this.popupCenter&&(this.x=Laya.stage.width/2,this.y=Laya.stage.height/2),this.staticCache=!0,Dialog.manager.dialogLayer.addChild(this),i&&Browser.onIOS?void(this._tween=TweenTool.getInstance().interfaceTween(this,null,Handler.create(this,this.onTweenComp))):(this.scale(DisplayTools.globalScale,DisplayTools.globalScale),void this.onTweenComp())},i.onTweenComp=function(){this.staticCache=!1,this._tween&&(Tween.clear(this._tween),this._tween=null)},i.bkWorldShow=function(t){t?(GMapView.GetBk().visible=!0,MainIcon.getInstance().showAll(),GMapView.m_fillBkImg.visible=!0):(GMapView.GetBk().visible=!1,MainIcon.getInstance().hideAll(),GMapView.m_fillBkImg.visible=!1)},i.myPopup=function(t,i,n){if(void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===n&&(n=!0),GameMain._ins.m_gameUI.dispose(),i?this instanceof game.ui.lead.npc.GNpcDlg||GMapView.GetBk().toStaticDraw(!0,!0):this.bkWorldShow(!1),(e._myMask.width!=Laya.stage.width||e._myMask.height!=Laya.stage.height)&&(e._myMask.size(Laya.stage.width,Laya.stage.height),e._myMask.graphics.clear(),e._myMask.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,UIConfig.popupBgColor)),this.staticCache=!0,this.myShow(t,n),Dialog.manager.dialogLayer.numChildren>2)for(var s=0;s<Dialog.manager.dialogLayer.numChildren;s++)Dialog.manager.dialogLayer.getChildAt(s)instanceof display.mainIcon.levelUp.LevelUpView&&Dialog.manager.dialogLayer.addChild(Dialog.manager.dialogLayer.getChildAt(s));this.showMask(),Dialog.manager.dialogLayer.numChildren>2||(i||this.onBlackBj(),Browser.onIOS?(Tween.clearTween(e._myMask),e._myMask.alpha=0,Tween.to(e._myMask,{alpha:UIConfig.popupBgAlpha},200)):e._myMask.alpha=UIConfig.popupBgAlpha)},i.myPopupMax=function(t,e,i,n){var s=this;void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n="升级"),this.myPopup(t,e,i),Laya.timer.once(50,this,_theMax=function(){var t=NaN,e=NaN;s.scale(1,1),"升级"==n?(t=Laya.stage.width/525,e=Laya.stage.height/650):"活动界面"==n?(t=Laya.stage.width/s.displayWidth,e=Laya.stage.height/(s.displayHeight+70)):"MessageBox0_3"==n?(t=Laya.stage.width/(1.5*s.displayWidth),e=Laya.stage.height/(1.5*s.displayHeight)):(t=Laya.stage.width/s.displayWidth,e=Laya.stage.height/s.displayHeight);var i=t>e?e:t;s.scale(i,i)}),this.onTweenComp()},i.showMask=function(){var t=Dialog.manager.dialogLayer.numChildren-2;t=0>t?0:t,Dialog.manager.dialogLayer.addChildAt(e._myMask,t)},i.showInStage=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),this.myPopup(t,e,i),Laya.stage.addChild(this)},i.onBlackBj=function(){this._black_bj=new Image2("assets/other/2.jpg"),this._black_bj.mouseEnabled=!0,this._black_bj.size(Laya.stage.width,Laya.stage.height),Dialog.manager.dialogLayer.numChildren>=2?Dialog.manager.dialogLayer.addChildAt(this._black_bj,1):Dialog.manager.dialogLayer.addChild(this._black_bj)},i.onClick=function(t){var e=t.target;if(e)switch(e.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":DataTable.m_iSoundTab.playButton(),this.close(e.name)}},i.removeSelf=function(){if(!this.parent)return null;if(this.bkWorldShow(!0),this instanceof game.ui.lead.npc.GNpcDlg||GMapView.GetBk().toStaticDraw(!1),TweenTool.getInstance().clearTween(this),this._black_bj&&this._black_bj.parent&&(this._black_bj.destroy(),this._black_bj=null),Dialog.manager.dialogLayer.numChildren>2){var t=laya.display.Node.prototype.removeSelf.call(this);return this.showMask(),t}return Browser.onIOS?(0!=e._myMask.alpha||e._myMask.parent)&&Tween.to(e._myMask,{alpha:0},200,null,Handler.create(this,this.onComplete)):this.onComplete(),
laya.display.Node.prototype.removeSelf.call(this)},i.close=function(e){this.parent&&t.prototype.close.call(this,e)},i.onComplete=function(){e._myMask.removeSelf()},i.OnClose=function(){this.close()},__getset(0,i,"Index",null,function(t){}),__getset(1,e,"DialogManager",function(){return Dialog.manager},laya.ui.Dialog._$SET_DialogManager),e.OnlyUiPop=function(t){return Dialog.manager.dialogLayer.numChildren>t+1},e.closeAll=function(){for(var t=Dialog.manager.dialogLayer.numChildren,e=0;t>e;e++)Dialog.manager.dialogLayer.getChildAt(e)instanceof display.mydialog.MyDiaLog&&Dialog.manager.dialogLayer.getChildAt(e).isCanCloseByOther&&Dialog.manager.dialogLayer.getChildAt(e).close();1==Dialog.manager.dialogLayer.numChildren&&Dialog.manager.dialogLayer.getChildAt(0)==display.mydialog.MyDiaLog._myMask&&display.mydialog.MyDiaLog._myMask.removeSelf()},__static(e,["_myMask",function(){return this._myMask=new Sprite}]),e}(Dialog),logUI=function(t){function e(){this.panel_=null,this.txt=null,e.__super.call(this)}__class(e,"game.ui.logUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"Dialog",child:[{type:"Image",props:{y:"0",sizeGrid:"80,30,30,30",height:"480",skin:"reuse/528077ed63a9a016.png",width:"600",x:"0"}},{type:"Image",props:{y:"1",width:"600",height:"80",name:"drag",alpha:"0.5",skin:"reuse/white.png",x:"0"}},{type:"Button",props:{y:"7",width:"64",height:"64",name:"close",skin:"reuse/btn_close.png",stateNum:"1",x:"523"}},{type:"Panel",child:[{type:"Label",props:{y:"0",wordWrap:"true","var":"txt",text:"算法：当数据量很大适宜采用该方法。采用二分法查找时，数据需是排好序的。主要思想是：（设查找的数组区间为array[low, high]）（1）确定该期间的中间位置K（2）将查找的值T与array[k]比较。若相等，查找成功返回此位置；否则确定新的查找区域，继续二分查找。区域确定如下：a.array[k]>T 由数组的有序性可知array[k,k+1,……,high]>T;故新的区间为array[low,……，K-1]b.array[k]<T 类似上面查找区间为array[k+1,……，high]。每一次查找与中间值比较，可以确定是否查找成功，不成功当前查找区间缩小一半。递归找，即可，时间复杂度:O(log2n)。算法：当数据量很大适宜采用该方法。采用二分法查找时，数据需是排好序的。主要思想是：（设查找的数组区间为array[low, high]）（1）确定该期间的中间位置K（2）将查找的值T与array[k]比较。若相等，查找成功返回此位置；否则确定新的查找区域，继续二分查找。区域确定如下：a.array[k]>T 由数组的有序性可知array[k,k+1,……,high]>T;故新的区间为array[low,……，K-1]b.array[k]<T 类似上面查找区间为array[k+1,……，high]。每一次查找与中间值比较，可以确定是否查找成功，不成功当前查找区间缩小一半。递归找，即可，时间复杂度:O(log2n)。",width:"561",align:"left",fontSize:"20",bold:"true",x:"0"}}],props:{y:"87",vScrollBarSkin:"reuse/vscroll.png",width:"564",height:"374","var":"panel_",x:"20"}}],props:{height:"480",width:"600"}}}]),e}(Dialog),CropView=function(t){function e(){this.mutiText=null,this.mutiText1=null,this.cX=NaN,this.cY=NaN,this.scaleN=.83,this.scaleM=.9,this.tooltip=null,this.Id=888,this.isK=!0,e.__super.call(this),this.init(),this.mouseEnabled=!0,this.mouseThrough=!0}__class(e,"display.crop.CropView",t);var i=e.prototype;return i.fillData=function(t,e){void 0===e&&(e=!0),t.jinbiText?(this.mutiText.SetText(t.jinbiText+"$"),t.jinbi={visible:!1},t.jinbiText=""):this.mutiText.SetText(""),t.cropText?("object"==typeof t.cropText?this.mutiText1.SetText(t.cropText.text+""):this.mutiText1.SetText(t.cropText+""),t.cropText=""):this.mutiText1.SetText(""),this.cropBox.dataSource=t,e&&(this.cX=this.cropBox.x,this.cY=this.cropBox.y,GLeadManager.RegArrowInterface(this,"田_种植",0,75,100))},i.init=function(){this.cropBox.dataSource={scaleX:this.scaleN,scaleY:this.scaleN,jinbi:{visible:!1}},this.cX=this.cropBox.x,this.cY=this.cropBox.y,this.tooltip=Tooltip.getInstance(),this.cropBox.on("mousedown",this,this.onMouseDown),this.addAniText()},i.addAniText=function(){this.mutiText=new GObj2DMutiText,this.mutiText.LoadAni("tex_文字小_ani"),this.mutiText.SetScrPos(35,72,0),this.cropBox.addChild(this.mutiText),this.mutiText.scale(1.1,1.1),this.mutiText1=new GObj2DMutiText,this.mutiText1.LoadAni("tex_文字小_ani"),this.mutiText1.SetScrPos(65,103,1),this.cropBox.addChild(this.mutiText1),this.mutiText1.scale(1.1,1.1)},i.addTip=function(t){this.tooltip.init(),DisplayTools.addTarget(this.tooltip,GameMain._ins.m_gameUI.incontainer),t&&(this.tooltip.TipContent=t),this.tooltip.upWidth(),this.tooltip.onTipMove()},i.onMouseDown=function(){if(this.stage.once("mouseup",this,this.onMouseUp),this.stage.once("mousemove",this,this.onMouseMove),0==CropInfo.getInstance().cropdata[this.Id].jiesuo&&this.Id==CropInfo.getInstance().cropNum-1){this.isK=!1;var t={};return DisplayTools.setObject(t,CropInfo.getInstance().cropInfos[this.Id]),t.label2=CropInfo.getInstance().getCropLevel(t.label1)+"级解锁",t.label3="",void this.addTip(t)}this.addTip(CropInfo.getInstance().cropInfos[this.Id]),Tween.to(this.cropBox,{scaleX:this.scaleM,scaleY:this.scaleM},100,Ease.expoInOut,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:.3}},this.cropBox.startDrag(),this.isK=!0},i.onMouseMove=function(){this.removeTip()},i.onMouseUp=function(){this.removeTip(),this.cropBox.stopDrag(),Tween.to(this.cropBox,{x:this.cX,y:this.cY,scaleX:this.scaleN,scaleY:this.scaleN},100,null,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:1}}},i.removeTip=function(){this.tooltip.displayInStage&&this.tooltip.removeSelf()},e}(cropIconUI),CultureIcon=function(t){function e(t){this.cX=NaN,this.cY=NaN,this.scaleN=.83,this.scaleM=.9,this.tooltip=null,this.Id=888,this.isOk=!0,this.price=0,this.money=null,this.cultureAni=null,this.culArr=null,e.__super.call(this),this.Id=t,this.init(),this.mouseEnabled=!0,this.mouseThrough=!0}__class(e,"display.culture.CultureIcon",t);var i=e.prototype;return i.fillData=function(t){void 0===t&&(t=!0),this.cropBox.dataSource.cropText="";var e=this.getNum(DataTable.m_iItemTab.GetIdByName(DataTable.animaltab.getObj(CultureIconMain.getInstance().culture.m_szMapData.itemid)[12]));0==this.Id&&this.money.SetText(e+""),this.cropBox.filters=[],this.isOk||(this.cropBox.filters=[ColorFilter.GRAY],this.cropBox.dataSource={jiantou:""})},i.getNum=function(t){var e=0;return e=DataTable.m_iSelfUser.GetItemNum(t)},i.init=function(){var t="";switch(this.Id){case 0:t=GVar.texDic[DataTable.m_iItemTab.Get(CultureIconMain.getInstance().culture.m_nFeedItem)[3]],GLeadManager.RegArrowInterface(this,"家畜_喂养",0,0,80),this.money||(this.money=new GObj2DMutiText,this.money.LoadAni("tex_文字小_ani"));break;case 1:t=GVar.texDic[CultureIconMain.getInstance().culture.GetResIconName()],GLeadManager.RegArrowInterface(this,"家畜_收获",0,0,80);break;case 2:this.cultureAni||(this.cultureAni=new Muti2DAniIns),this.cultureAni.createInsFromName(CultureIconMain.getInstance().culture.GetAniImgName()),DisplayTools.addTarget(this.cultureAni,this.cropBox,{x:64,y:85},2),GLeadManager.RegArrowInterface(this,"家畜_购买",0,0,80),this.money||(this.money=new GObj2DMutiText,this.money.LoadAni("tex_文字中_ani"))}this.money&&(this.cropBox.addChild(this.money),this.money.SetScrPos(68,106,1)),this.cropBox.dataSource={cropIcon:t,jiantou:"3d/tex/5284c06ba4be7029.png",jinbi:{visible:!1},jinbiText:"",cropText:"",scaleX:this.scaleN,scaleY:this.scaleN},2==this.Id&&(this.price=CultureIconMain.getInstance().culture.GetAddPrice(),this.cropBox.dataSource={jinbi:{visible:!1},jinbiText:{text:""}},this.money.SetText(this.price+"$")),this.cX=0,this.cY=0,this.tooltip=Tooltip.getInstance(),this.cropBox.on("mousedown",this,this.onMouseDown)},i.CheckAll=function(){this.price=CultureIconMain.getInstance().culture.GetAddPrice();var t="",e=this.cX,i=this.cY,n={label1:"",label2:"",label3:""};switch(this.Id){case 0:t="喂养"+CultureIconMain.getInstance().culture.GetAniName(),this.tooltip.init(128,74),t.length>3&&this.tooltip.init(148,74),n.label1=t,i-=70;break;case 1:this.tooltip.init(128,74);var s=DataTable.m_iItemTab.Get(CultureIconMain.getInstance().culture.m_nResItem);n.label1="收获"+s[2],i-=70;break;case 2:this.tooltip.init(158,130),n.label1="购买"+CultureIconMain.getInstance().culture.GetAniName(),n.label2="花费"+this.price+"金币",n.label3=CultureIconMain.getInstance().culture.GetCurAniNum()+"/"+CultureIconMain.getInstance().culture.GetMaxAniNum(),e-=10,i-=130}this.tooltip.TipContent=n,DisplayTools.addTarget(this.tooltip,this,{x:e,y:i,mouseEnabled:!1,mouseThrough:!0})},i.onMouseDown=function(){if(e.isLvl=!0,this.tooltip&&this.tooltip.displayInStage&&this.tooltip.removeSelf(),this.CheckAll(),this.stage.once("mouseup",this,this.onMouseUp),this.isOk&&!(this.cropBox.filters&&this.cropBox.filters.length>=1)){switch(Tween.to(this.cropBox,{scaleX:this.scaleM,scaleY:this.scaleM},100,Ease.expoInOut,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:.3},jiantou:""},this.cropBox.startDrag(),this.Id){case 0:CultureIconMain.getInstance().iconAlpha(1,.5),CultureIconMain.getInstance().iconAlpha(2,.5);break;case 1:CultureIconMain.getInstance().iconAlpha(0,.5),CultureIconMain.getInstance().iconAlpha(2,.5);break;case 2:CultureIconMain.getInstance().iconAlpha(0,.5),CultureIconMain.getInstance().iconAlpha(1,.5)}this.culArr=CultureIconMain.getInstance().culture.m_szAniObjs,this.stage.on("mousemove",this,this.onMouseMove)}},i.onMouseMove=function(t){switch(this.Id){case 0:CultureIconMain.getInstance().iconAlpha(1,0),CultureIconMain.getInstance().iconAlpha(2,0);break;case 1:CultureIconMain.getInstance().iconAlpha(0,0),CultureIconMain.getInstance().iconAlpha(2,0);break;case 2:CultureIconMain.getInstance().iconAlpha(0,0),CultureIconMain.getInstance().iconAlpha(1,0)}for(var e=0;e<this.culArr.length;e++)0==this.culArr[e].m_nStatus&&0==this.Id&&this.OnItemPutTo(this.culArr[e]),2==this.culArr[e].m_nStatus&&1==this.Id&&this.getEgg(this.culArr[e]);this.removeTip()},i.onMouseUp=function(){switch(e.isLvl=!1,this.removeTip(),this.stage.off("mousemove",this,this.onMouseMove),this.cropBox.stopDrag(),this.Id){case 0:CultureIconMain.getInstance().iconAlpha(1,1),CultureIconMain.getInstance().iconAlpha(2,1);break;case 1:CultureIconMain.getInstance().iconAlpha(0,1),CultureIconMain.getInstance().iconAlpha(2,1);break;case 2:CultureIconMain.getInstance().iconAlpha(0,1),CultureIconMain.getInstance().iconAlpha(1,1)}Tween.to(this.cropBox,{x:this.cX,y:this.cY,scaleX:this.scaleN,scaleY:this.scaleN},100,null,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:1},jiantou:"3d/tex/5284c06ba4be7029.png"},CultureIconMain.getInstance().culture.GetCurAniNum()<5&&2==this.Id&&this.trybuy(),CultureIconMain.getInstance().upIcon()},i.getEgg=function(t){t.isMouseOn()&&GameMain._ins.m_gameUI.mouseBoolean&&t.OnGetRes(CultureIconMain.getInstance().culture.m_nResItem)},i.trybuy=function(){var t=0,e=0,i=0;CultureIconMain.getInstance().culture.isMouseOn()&&(i=1),i&&(t=Laya.stage.mouseX,e=Laya.stage.mouseY,CultureIconMain.getInstance().culture.OnAddAni(t,e))},i.OnItemPutTo=function(t){if(t.isMouseOn()&&GameMain._ins.m_gameUI.mouseBoolean){var e=DataTable.m_iItemTab.GetIdByName(DataTable.animaltab.getObj(CultureIconMain.getInstance().culture.m_szMapData.itemid)[12]);t.OnFeed(e),this.fillData()}},i.removeTip=function(){this.tooltip&&this.tooltip.removeSelf()},e.isLvl=!1,e}(cropIconUI),Activity_fristChargeView=function(t){function e(){if(this.bjAni=null,this.carAni=null,this.moneyAni=null,this.tip=new Tooltip,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.activityviews.Activity_fristChargeView",t);var i=e.prototype;return i.init=function(){this.btn_go_charge.on("click",this,this.onMouse),this.img_bj.skin=Assets.actFirstUrl,this.on("removed",this,this._$7_onRemoved)},i._$7_onRemoved=function(){this.box_qiqiu.offAll();for(var t=0;13>t;t++)this["item"+t].offAll()},i.onInit=function(t){if(t&&t.length){var e=DiamondToItem.GetItem(t[16]);if(!DiaToItemData.isstruct(e))return void gSys.Err("data err");this.btn_go_charge.visible=!1,this.btn_go_charge&&!DataTable.m_iSelfUser.GetFirRecharge()&&(this.btn_go_charge.visible=!0),DataTable.m_iSelfUser.GetIapTotalRmb()<6?this.btn_go_charge.label="去充值":this.btn_go_charge.label="领取礼包",e=e[6];for(var i,n=0;n<e.length;n++){i={},i.id=e[n][0],i.num=e[n][1];var s=ItemFeild.getInstance().getItemArr(i.id);if(s?(i.itemName="Item",i.id>4e3&&i.itemid<4012?i.info={label1:s[2],label2:s[10],label3:TimerTools.conversion(60*s[13])}:i.info={label1:s[2],label2:s[10]}):i.itemName="Build",0==n)this["item"+n].on("mousedown",this,this.onMouseHandler,[i]),this["item"+n].on("mouseout",this,this.onMouseHandler,[i]),this["item"+n].on("mouseup",this,this.onMouseHandler,[i]);else if(1==n){if(!this.carAni){this.carAni=new Muti2DAniIns,this.carAni.SetOkHandler(Handler.create(this,this.setAni,[this.carAni,this.box_qiqiu.width,this.box_qiqiu.height,this.box_qiqiu,1]));var a=DataTable.m_iBuildTab.Get(i.id);if(null==a)return void gSys.Err("Activity_fristChargeView--找不到建筑： ID="+i.id);this.carAni.createInsFromName(a[4])}this.box_qiqiu.on("mousedown",this,this.onMouseHandler,[i]),this.box_qiqiu.on("mouseout",this,this.onMouseHandler,[i]),this.box_qiqiu.on("mouseup",this,this.onMouseHandler,[i])}else{if(!this["item"+(n-1)])continue;this["item"+(n-1)].on("mousedown",this,this.onMouseHandler,[i]),this["item"+(n-1)].on("mouseout",this,this.onMouseHandler,[i]),this["item"+(n-1)].on("mouseup",this,this.onMouseHandler,[i])}}}},i.setAni=function(t,e,i,n,s){var a=t.GetRect(),r=0,h=0;if(r=a.right-a.left,h=a.bottom-a.top,!(1>r||1>h)){var o=e/r,l=i/h;o>l&&(o=l),o>1&&(o=1),t.scale(o,o),t.x=(e-r*o)/2-a.left*o,t.y=(i-h*o)/2-a.top*o,n.numChildren<=s?n.addChild(t):n.addChildAt(t,s)}},i.onMouseHandler=function(t,e){if("mousedown"==e.type)if("Build"==t.itemName)DlgManager.Me().showOrnamentInfo(t.id,null);else if("Item"==t.itemName){this.tip.init(),this.tip.TipContent=t.info,this.tip.upWidth(),this.addChild(this.tip);var i=this.globalToLocal(new Point(this.stage.mouseX,this.stage.mouseY-25));this.tip.x=i.x-this.tip.width/2.5,this.tip.y=i.y-this.tip.height-20}("mouseout"==e.type||"mouseup"==e.type)&&this.tip.removeSelf()},i.onMouse=function(t){if("去充值"==this.btn_go_charge.label)ActivityMainView.getInstance().OnClose(),Laya.timer.frameOnce(1,null,display.mainIcon.activityviews.Activity_fristChargeView.openDiaUI);else if("领取礼包"==this.btn_go_charge.label){if(DataTable.m_iSelfUser.GetFirRecharge())return;DataTable.m_iSelfUser.OnDiaToItem("c1007",[Laya.stage.mouseX,Laya.stage.mouseY,1,"",5],1),DataTable.m_iSelfUser.Emit("SCCGLQ",null)}},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.openDiaUI=function(){MainIcon.getInstance().rightIcon.addInterface(1,2,"d1008")},e.isboo=!0,e.instance=null,e}(Activity_fristChargeUI),Activity_OnlineLbView=function(t){function e(){if(this.rewardBox=null,this.hengtiao=null,this.time=0,this.getrewardAni=null,this.aniCon=null,this.m_loopHandler=null,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.activityviews.Activity_OnlineLbView",t);var i=e.prototype;return i.init=function(){var t=new Muti2DAniIns;t.createInsFromName("tex_首冲人物336_ani"),t.scale(.69,.69),DisplayTools.addTarget(t,this,{x:160,y:270}),this.rewardBox=new Muti2DAniIns,this.rewardBox.createInsFromName("tex_运营活动界面宝箱_ani"),this.rewardBox.scale(1.2,1.2),DisplayTools.addTarget(this.rewardBox,this,{x:300,y:300}),this.getrewardBtn.on("click",this,this.onMouse),this.on("display",this,this.OninitData)},i.OninitData=function(){this.time=DataTable.m_iSelfUser.GetCurOLGiftSec(),this.time>0?(this.timeBox.visible=!0,this.getrewardBtn.visible=!1,this.leaveTime.text=DateOp.getTimeFormat(this.time),Laya.timer.loop(1e3,this,this.loopHandler,null,!0)):(this.timeBox.visible=!1,this.getrewardBtn.visible=!0),MainIcon.getInstance().onCheckActivityOnline()},i.loopHandler=function(){this.time>0?(this.time--,this.leaveTime.text=DateOp.getTimeFormat(this.time)):(Laya.timer.clear(this,this.loopHandler),this.OninitData())},i.onMouse=function(t){ActivityMainView.getInstance().close(),DataTable.m_iSelfUser.ReceiveCurOLGift([Laya.stage.mouseX,Laya.stage.mouseY],Handler.create(this,this.playAni))},i.playAni=function(t){function e(){i.getrewardAni.playAni("开启后"),n.visible=!0,s.visible=!0}var i=this;this.aniCon||(this.aniCon=new Sprite),this.aniCon.mouseEnabled=!0,this.getrewardAni=new Muti2DAniIns,this.getrewardAni.mouseEnabled=!0;var n=new Sprite;n.visible=!1;var s=new GetRewardAniUI;s.visible=!1,this.getrewardAni.SetOkHandler(Handler.create(this,function(){var e=i.getrewardAni.GetRect();e&&(i.getrewardAni.x=(e.right-e.left)/2,i.getrewardAni.width=e.right-e.left),i.aniCon.addChild(i.getrewardAni);for(var a=0;a<t.length;a++){var r=new Image2;r.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(t[a][0])[3]),r.x=100*a,r.size(60,60),n.addChild(r);var h=new Label;h.text=t[a][1]+"",h.fontSize=20,h.color="#ffffff",h.stroke=2,h.strokeColor="#000000",h.bold=!0,h.x=r.x+r.width,h.y=20,n.addChild(h)}n.y=80,i.aniCon.addChild(n),i.aniCon.addChild(s),s.x=(i.getrewardAni.width-s.width)/2,s.y=35,n.x=(i.getrewardAni.width-100*t.length)/2+10,s.mouseEnabled=!0,s.sureBtn.on("click",this,i.onRewardAniSure),i.aniCon.scale(DisplayTools.globalScale,DisplayTools.globalScale),DisplayTools.addTarget(i.aniCon,Laya.stage,{x:(Laya.stage.width-s.width)/2,y:(Laya.stage.height-i.aniCon.viewHeight)/2})})),this.getrewardAni.createInsFromName("tex_运营活动界面宝箱_ani"),this.getrewardAni.PlayKindEnd("开启",1,0,Handler.create(this,e))},i.onRewardAniSure=function(){gSys.SetSignal("chggift",null),this.getrewardAni=null,this.aniCon.destroyChildren(),this.aniCon.removeSelf(),this.aniCon=null,MainIcon.getInstance().onCheckActivityOnline()},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(Activity_OnlineLbUI),Activity_zmhdView=function(t){function e(){if(this.selfData=null,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.activityviews.Activity_zmhdView",t);var i=e.prototype;return i.init=function(){this.pivot(0,0),this.goBtn.on("click",this,this.onMouse)},i.onMouse=function(t){switch(this.selfData){case 0:DlgManager.Me().showSignDlg();break;case 3:break;case 4:var e=new Activity_hdm;e.closeHandler=Handler.create(this,this.hdmViewClose,[e]),e.myPopup()}},i.hdmViewClose=function(t){t=null},__getset(0,i,"Index",null,function(t){switch(this.selfData=t,this.selfData){case 0:this.time.text="★活动时间：长期有效",this.content.text="每天可以签到一次，连续次数越多，奖励越好。成为VIP可获得更多签到奖品。",this.goBtn.visible=!0;break;case 1:this.time.text="★活动时间：长期有效",this.content.text="小伙伴们只要在活动期间每天的12：30和21：00请求普通航运帮助，我就会帮助小伙伴们，持续30分钟。",this.goBtn.visible=!1;break;case 2:this.time.text="★活动时间：长期有效",this.content.text="每周一、三、五订单金币奖励双倍，每周二、四、六航运贝壳奖励双倍，周日订单金币和航运贝壳全部双倍！小伙伴们快为策划蜀黍点赞吧！",this.goBtn.visible=!1;break;case 3:this.time.text="★活动时间：长期有效",this.content.text="关注游戏最新消息，发现更有趣的状元活动！更多意想不到的奖品等你来拿哦！",this.goBtn.visible=!0;break;case 4:this.time.text="★活动时间：长期有效",this.content.text="关注“梦幻家园”微信账号和微博，我们会不间断的举办活动发放活动码。",this.goBtn.visible=!0,PreloadManager.getInstance().loadImg([{url:DataTable.getSkin("tex_素材_输入框"),type:"image"}],null,0)}}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(Activity_zmhdUI),Chat=function(t){function e(){if(this.exp=null,this.inputTextIcon=null,this.chatInfoArray=[],this.MAX=15,this.chatForWorld="chatForWorld",this.chatForHorn="chatForHorn",this.aniHornNum=null,this.m_nLockHorn=0,this.m_nLastHornNum=0,this.pointXY=new Point,e.__super.call(this),e.isboo)throw new Error("请用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.chat.Chat",t);var i=e.prototype;return i.init=function(){this.exp=IconItemChat.getInstance(),this.count.visible=!1,this.isShowPhiz(),this.addInputText(),this.chatList.renderHandler=new Handler(this,this.listHandler),this.btn_qd.on("click",this,this.onSendMessage),this.roomBtn.on("click",this,this.onRoomChange),DataTable.m_iSelfUser.GetWorldChatLeftCD()>0&&this.isShowInputText(!1),this.clip_wordChat.index=worldchatstyle.s_nWorldChatSwitch,this.box_wordChat.on("click",this,this.onClickWordChat),this.hornBtn.on("click",this,this.onHornClick),this.hornBtn.name=this.chatForWorld,this.btn_buy.clickHandler=new Handler(this,this.OnBuyHorn),DataTable.m_iSelfUser.AddNoti("m_nHornNum",this,this.SetHornNum),this.InitHorn()},i.OnBuyHorn=function(){GameMain._ins.closeAllView(),MainIcon.getInstance().rightIcon.addInterface(1,3,"c1010")},i.onHornClick=function(){var t=DataTable.m_iSelfUser.GetHorn();this.hornBtn.name==this.chatForWorld?(this.hornBtn.name=this.chatForHorn,this.aniHornNum||(this.aniHornNum=new GObj2DMutiText,this.aniHornNum.LoadAni("tex_文字小_ani"),this.aniHornNum.SetScrPos(this.hornBtn.x+this.hornBtn.width/4*3,this.hornBtn.y+this.hornBtn.height,1),this.boxContainer.addChild(this.aniHornNum)),this.aniHornNum.visible=!0,this.hornBtn.skin=DataTable.getSkin("uiimg_喇叭"),DataTable.m_iSelfUser.m_nIsHornMode=1,this.NotiLockChg(DataTable.m_iFriendBar.m_nLockMarkPos,1),this.SetHornNum(t)):(this.hornBtn.name=this.chatForWorld,this.aniHornNum&&(this.aniHornNum.visible=!1),this.hornBtn.skin=DataTable.getSkin("IMG_聊天"),DataTable.m_iSelfUser.m_nIsHornMode=0,this.showWordChat()),this.inputText.text=DataTable.m_iSelfUser.GetMyWorldChatDefStr()},i.showWordChat=function(){this.btn_qd.visible=!0,this.inputText.skin="chat/png1.png",this.inputText.visible=!0,this.btn_buy.visible=!1,this.lab_buy.visible=!1,DataTable.m_iSelfUser.GetWorldChatLeftCD()>0&&this.isShowInputText(!1)},i.showHornChat=function(t,e){void 0===e&&(e=0),t?(this.btn_qd.visible=!0,this.inputText.visible=!0,this.btn_buy.visible=!1,this.lab_buy.visible=e?!0:!1,DataTable.m_iSelfUser.GetWorldChatLeftCD()>0&&this.isShowInputText(!1)):(this.btn_qd.visible=!1,this.inputText.visible=!1,this.btn_buy.visible=!0,this.lab_buy.visible=!0)},i.hideHornChat=function(){this.btn_buy.visible=!1,this.lab_buy.visible=!1,this.aniHornNum&&(this.aniHornNum.visible=!1)},i.addInputText=function(){this.lengque.text=" ",this.inputText.text="",this.inputText.skin="chat/png1.png",this.inputText.on("focus",this,this.onFocus),this.inputText.on("blur",this,this.onBlur)},i.onRoomChange=function(t){var e=GChatRoomSel.getInstance();e.parent?e.removeSelf():DisplayTools.addTarget(e,this,{x:0,y:35})},i.onBqClickHandler=function(t){0==t.target.index?t.target.index=1:t.target.index=0,this.isShowPhiz(t.target.index)},i.isShowPhiz=function(t){void 0===t&&(t=0),this.bq.index=t,0==t&&this.chatList.refresh()},i.updateChatMessage=function(t,e){if(void 0===e&&(e=0),e&&(DataTable.m_iSelfUser.m_nIsHornMode=0,this.inputText.text=DataTable.m_iSelfUser.GetMyWorldChatDefStr(),this.hornBtn.name=this.chatForHorn,this.onHornClick()),this.chatInfoArray.length=0,t&&t.length>0)for(var i,n=t,s=0;s<n.length;s++)i=new Object,i.sender=n[s][0],i.content=n[s][2],"string"==typeof n[s][3]?i.daming=inbox.TimeToString(DateOp.SetDateStr(n[s][3])):n[s][3]instanceof Date&&(i.daming=inbox.TimeToString(n[s][3])),i.nameLabel="梦幻家园",i.m_package=n[s][5],i.m_sCert=n[s][6],this.chatInfoArray.push(i);else this.chatList.array=[];this.chatList.array=this.chatInfoArray,this.upData()},i.upData=function(){this.chatList.refresh(),this.chatList.array=this.chatInfoArray,this.chatList.scrollTo(1e6),this.chatList.scrollBar.hide=!0},i.setInputText=function(t){var e=this.inputText.textField;e.text+=t,console.log(t,"路径")},i.onFocus=function(){this.inputText.text==DataTable.m_iSelfUser.GetMyWorldChatDefStr()&&(this.inputText.text="")},i.onBlur=function(){""==this.inputText.text&&(this.inputText.text=DataTable.m_iSelfUser.GetMyWorldChatDefStr())},i.onSendMessage=function(t){if(!DataTable.m_iSelfUser.m_nNetLinkOk)return void gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能");if(!this.onChange){if(DataTable.m_iSelfUser.GetLevel()<6)return void gSys.GameMsg("世界聊天功能6级开放",!1);var e=this.inputText.text,i=DataTable.m_iSelfUser.GetMyWorldChatDefStr();if(e=e.replace(/\x20/g,""),e=e.replace("<系统消息>",""),""==e||e==i||e.length>30)return void gSys.GameMsg("消息内容不能为空，长度不能超过30字",!1);this.phizSprite&&this.isShowPhiz(0),e=inbox.CAST_EMO_TEXT(e);var n=MessageManger.getInstance().m_nCurrent;if(n>=0){if(1e3!=DataTable.m_iSelfUser.GetUID()&&1e3!=n&&!DataTable.m_iFriendBar.IsFriend(n))return void gSys.GameMsg("只有好友之间才可以发送邮件",!1)}else{var s=[];if(DataTable.m_iSelfUser.m_nIsHornMode)n=-101,s.push([27,-1]);else if(-100==n){if(SysID.m_nIsForbidWorldChat)return void ErrorDef.ERR_DLGMODAL(810);worldchatstyle.s_nWorldChatSwitch||(GFlyItemIcon.FlyText("已自动为您打开世界聊天!"),this.clip_wordChat.index=1,DataTable.m_iFriendBar.OnWorldChatSwitch(1));var a=DataTable.m_iSelfUser.GetWorldChatLeftCD();if(a>0)return void gSys.GameMsg("世界聊天冷却中",!1)}}this.inputText.text="",DataTable.m_iFriendBar.SendMessage(n,e,this,s,[Laya.stage.mouseX,Laya.stage.mouseY])}},i.listClickHandler=function(t,e){},i.isShowInputText=function(t){if(void 0===t&&(t=!1),t)this.lengque.text="",this.boxContainer.visible=!0,this.count.visible=!1,this.inputText.visible=!0,this.inputText.skin="chat/png1.png";else{var e=DataTable.m_iSelfUser.GetWorldChatLeftCD();e&&(this.lengque.text="世界聊天冷却时间",this.count.visible=!0,this.count.sdClick=new Handler(this,this.EndAdCd),this.count.onComplete=new Handler(this,this.onCompleteHandler),this.count.Init(600,e,1,this,!1),this.boxContainer.visible=!1,this.inputText.visible=!1)}},i.EndAdCd=function(){function t(t){t&&e.isShowInputText(!0)}var e=this,i=DataTable.m_iSelfUser.GetWorldChatLeftCD(),n=NaN,s=NaN;n=Laya.stage.mouseX,s=Laya.stage.mouseY;var a=[];if(a.push([25,-this.GetNeedDiamond(i)]),DataTable.m_iSelfUser.CheckMakeItemSz(a)){var r=new StringRef;DataTable.m_iSelfUser.ChgItemSz(a,r,OPEnum.OP_SJLT_XLQ,[n,s])&&(DataTable.m_iSelfUser.SetLastWorldChatTime(0),DataTable.m_iSelfUser.CallSvr("OnWorldChatUseLight",[i,a],new Handler(this,t)))}},i.GetNeedDiamond=function(t){var e=DataTable.m_iSelfUser.GetJszsfy(t,600);return 1>e&&(e=1),e},i.onCompleteHandler=function(){this.isShowInputText(!0)},i.listHandler=function(t,e){if(t.dataSource){var i=t.getChildByName("headBox"),n=t.getChildByName("daming"),s=i.getChildByName("touxiang"),a=t.getChildByName("chatBg"),r=t.getChildByName("content"),h=t.getChildByName("paojiao"),o=t.dataSource.daming,l=DataTable.m_iSelfUser.GetUID()==Math.abs(t.dataSource.sender);l?(n.text=o+"    我",n.align="right",s.skin=DataTable.getSkin("tex_face"+DataTable.m_iSelfUser.m_szData.visu),i.x=t.viewWidth-i.viewWidth):SysID.FRD_GETUSERINFO(Math.abs(t.dataSource.sender),null,null,Handler.create(this,function(t){n.text=t[1]+"    "+o,s.skin=DataTable.getSkin("tex_face"+t[2])}));var u=t.getChildByName("container"),c=t.getChildByName("content").textField;u.getChildAt(0).visible=!1;for(var _=1,m=u.numChildren;m>_;_++)this.exp.dispose(u.removeChildAt(1)),console.log("删除表情",u.numChildren);var d=c.textWidth,p=c.textHeight;a.width=d+25,a.height=p+18,this.exp.setIcon(c,u),l?(a.x=i.x-a.width-10,r.x=a.x+10,n.x=i.x-n.width,h.scaleX=-1,h.x=a.x+a.width+10):(n.align="left",i.x=0,a.x=115,r.x=120,n.x=115,h.scaleX=1,h.x=103),u=null,c=null}},i.onClickWordChat=function(){var t=this.clip_wordChat.index;t=t?0:1,this.clip_wordChat.index=t,DataTable.m_iFriendBar.OnWorldChatSwitch(t)},i.InitHorn=function(){DataTable.m_iFriendBar.AddListener("m_nLockMarkPos",this,this.NotiLockChg)},i.NotiLockChg=function(t,e){void 0===e&&(e=0);var i=t>=0?1:0;if(this.m_nLockHorn!=i||e)return this.m_nLockHorn=i,DataTable.m_iSelfUser.m_nIsHornMode?void(i?(this.SetHornNum(this.m_nLastHornNum,1),Laya.timer.loop(1e3,this,this.SetHornNum,[this.m_nLastHornNum,1])):(Laya.timer.clear(this,this.SetHornNum),this.SetHornNum(this.m_nLastHornNum,1))):void this.SetHornNum(this.m_nLastHornNum,1)},i.SetHornNum=function(t,e){void 0===e&&(e=0),this.displayInStage&&(t!=this.m_nLastHornNum||e)&&(this.m_nLastHornNum=t,this.aniHornNum.SetText(t+""),1>t?(this.lab_buy.text="喇叭不够了!快前往购买吧!",this.showHornChat(t,1)):this.m_nLockHorn?(this.lab_buy.text="目前使用喇叭的玩家较多,请稍后再来试试吧!",this.showHornChat(t,1)):this.showHornChat(t,0))},__getset(0,i,"onChange",function(){var t=this.inputText.text;return t.indexOf("@startdebug#")>-1?(Laya.stage.addChild(LogDebug.I),!0):t.indexOf("@stopdebug#")>-1?(ComboBox1.ins.isShow(!1),this.inputText.text="",!0):t.indexOf("@startsound#")>-1?(DataTable.m_iSoundTab.isSoundValue=!0,this.inputText.text="",!0):t.indexOf("@stopsound#")>-1?(DataTable.m_iSoundTab.isSoundValue=!1,this.inputText.text="",!0):t.indexOf("@reload#")>=0?(GameMain._ins.GmView.createHomeMapView(),this.inputText.text="",!0):t.indexOf("@clear#")>=0?(GameMain._ins.GmView.clearMapBuild(),this.inputText.text="",!0):t.indexOf("@iddebug")>-1?(this.inputText.text="",alert("SLF后期记得删除----------本机账号"+GameMarket.userid),!0):t.indexOf("@showstat#")>-1?(LocalStorage.setItem("stat","1"),Stat.show(Math.floor(20*Math.random()),10),this.inputText.text="",!0):t.indexOf("@hidestat#")>-1?(LocalStorage.setItem("stat","0"),Stat.hide(),this.inputText.text="",!0):t.indexOf("@version#")>-1?(gSys.GameMsg(GameMain._ins.VERSION,!0,"当前版本号"),this.inputText.text="",!0):!1}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e}(chatsUI),CountDown=function(t){function e(){this.targetName="",this.timeMax=0,this.timeNum=0,this.currentTime=0,this.m_pLink=null,this.interval=0,this.currentHandler=null,this.completeHandler=null,this._isV=!1,this.clickHandler=null,this.kind=1,this.usediamond=0,this.cdText=null,this.needText=null,this.isRemoveMyself=!0,this.ulname="",e.__super.call(this),this.initText(),this.on("removed",this,this.onDis),this.box_btn.on("click",this,this.onCLickHandler),this.box_btn.on("mousedown",this,this.onDownHandler)}__class(e,"display.kit.CountDown",t);var i=e.prototype;return i.onDownHandler=function(){TweenTool.getInstance().buttonTween(this.box_btn)},i.initText=function(){this.cdText=new GObj2DMutiText,this.cdText.LoadAni("tex_文字小_ani"),this.cdText.SetText("2M30S"),this.addChild(this.cdText),this.cdText.SetScrPos(78,40,1),this.needText=new GObj2DMutiText,this.needText.LoadAni("tex_文字小_ani"),this.needText.SetText("3"),this.box_btn.addChild(this.needText),this.needText.SetScrPos(170,40,2)},i.onCLickHandler=function(t){this.clickHandler&&this.clickHandler.runWith([this.kind,this.usediamond])},i.RegLeadArrow=function(t){this.ulname=t,GLeadManager.RegArrowInterface(this.box_btn,this.ulname,0,80,80)},i.removeLead=function(){this.ulname.length>1&&GLeadManager.UnRegArrowInterface(this.ulname)},i.onDis=function(){this.targetName="",this.removeLead(),this.scale(DisplayTools.globalScale+.3,DisplayTools.globalScale+.3),Laya.timer.clear(this,this.SetLeftSec),Laya.timer.clear(this,this.timerHandler)},i.reset=function(){this.timeMax=0,this.timeNum=0,this.currentTime=0,this.currentHandler=null,this.completeHandler=null,Laya.timer.clear(this,this.timerHandler)},i.GetLeftTime=function(){return this.currentTime},i.Init=function(t,e,i,n,s){return void 0===i&&(i=1),void 0===s&&(s=!0),this.m_pLink=n,this.currentTime=e,this.isRemoveMyself=s,this.timeMax=t,1>e?void Laya.timer.clear(this,this.SetLeftSec):(this.SetLeftSec(),void Laya.timer.loop(1e3,this,this.SetLeftSec,null,!0))},i.SetLeftSec=function(){var t=this.currentTime;if(1>=t)return Laya.timer.clear(this,this.SetLeftSec),this.isRemoveMyself&&this.removeSelf(),void(this.completeHandler&&this.completeHandler.run());if(!(this.timeMax<1)){var e=1*(this.timeMax-t)/this.timeMax;.1>e&&(e=.1),this.m_pLink&&(this.usediamond=this.m_pLink.GetNeedDiamond(t)),this.needText.SetText(this.usediamond+""),this.progress_s.value=e,this.cdText.SetText(TimerTools.conversion(this.currentTime)),this.currentTime--,"挖掘机"==this.targetName&&ManuFacture.getInstance().CheckBombNeed(0,this.currentTime)}},i.setTime=function(t,e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=0),this.removeLead(),this.reset(),this.timeMax=t,this.timeNum=t,this.timeNum-=e,this.currentTime=e,this.interval=i,this.progress_s.value=0,this.currentHandler=n,this.completeHandler=s,this.needText.SetText(Math.ceil(this.timeNum/60).toString()),this.timerHandler(),Laya.timer.loop(100,this,this.timerHandler,null,!0)},i.setTimeValue=function(t,e){this.reset(),this.timeMax=t,this.timeNum=t,this.timeNum-=e,this.currentTime=e,this.timerHandler()},i.incream=function(t,e){return(10*t+10*e)/10},i.timerHandler=function(){this.timeNum-=.1,this.currentTime=this.incream(this.currentTime,.1),this.currentTime<=0||(0!=this.interval&&this.currentTime%this.interval==0&&this.currentHandler&&this.currentHandler.run(),
this.currentTime>=this.timeMax-.3&&(Laya.timer.clear(this,this.timerHandler),this.removeSelf(),this.completeHandler&&this.completeHandler.run()),this.needText.SetText(Math.ceil(this.timeNum/60).toString()),this.progress_s.value=this.currentTime/this.timeMax,this.cdText.SetText(TimerTools.conversion(this.timeNum)))},__getset(0,i,"sdClick",null,function(t){this.clickHandler=t}),__getset(0,i,"onComplete",null,function(t){this.completeHandler=t}),__getset(0,i,"Time",function(){return[this.timeMax,this.currentTime]}),__getset(0,i,"isV",null,function(t){this._isV!=t&&(this._isV=t,this._isV?(this.box_btn.x=-51,this.box_btn.y=40):(this.box_btn.x=93,this.box_btn.y=0))}),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(countDownUI),GChatRoomSel=function(t){function e(){if(this.m_szAllBtn=null,this.m_nOnChg=0,e.__super.call(this),e.isboo)throw new Error("请用 getInstance()来获取实例");this.on("added",this,this.OnGetRoomUer),this.list_.scrollBar.hide=!0,this.list_.renderHandler=new Handler(this,this.listRender),this.list_.mouseHandler=new Handler(this,this.listMouseHandler),SysID.FRD_ON("chgchatroom",this,this.OnGetRoomUer),this.OnInit()}__class(e,"display.mainIcon.chat.GChatRoomSel",t);var i=e.prototype;return i.OnInit=function(){var t;t=16,this.m_szAllBtn=[];for(var e=0;t>e;e++){var i={};i.btn=PubDef.GetChatRoomName(e),this.m_szAllBtn.push(i)}this.OnGetRoomUer()},i.onStageClick=function(t){t.target instanceof laya.ui.Button||t.currentTarget==this.list_||(this.removeSelf(),Laya.stage.off("click",this,this.onStageClick))},i.OnGetRoomUer=function(){function t(t){var i,n=0,s=0;for(n=0;n<e.m_szAllBtn.length&&(t instanceof Array&&!(n>=t.length));n++){switch(e.m_szAllBtn[n].btn=PubDef.GetChatRoomName(n),s=0,t[n]<1e3&&(s=1),t[n]<350&&(s=2),s){case 0:i="(爆满)";break;case 1:i="(拥挤)";break;case 2:i="(流畅)"}e.m_szAllBtn[n].btn=e.m_szAllBtn[n].btn+"  "+i,DataTable.m_iFriendBar.m_nMyChatRoom==n?e.m_szAllBtn[n].duigou=DataTable.getSkin("tex_素材_对勾"):e.m_szAllBtn[n].duigou=""}e.list_.array=e.m_szAllBtn}var e=this;Laya.stage.on("click",this,this.onStageClick),csvr.call("roomchatsvr","c_OnGetAllRoomNum",[],Handler.create(this,t),null,0)},i.listRender=function(t,e){!t.dataSource},i.listMouseHandler=function(t,e){if("click"===t.type||"rightclick"===t.type){if(this.m_nOnChg)return;if(this.m_nOnChg=1,0>e||e>this.list_.array.length)return void(this.m_nOnChg=0);DataTable.m_iFriendBar.OnUserChgRoomChat(e),this.m_nOnChg=0,this.removeSelf()}},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e}(GChatRoomSelUI),HornMsg=function(t){function e(){if(this.m_nIsShowing=0,this.oneTime=20,this.moveW=0,this.oneMove=0,e.__super.call(this),e.isboo)throw new Error("请用 getInstance()来获取实例");this.img_bj.skin=DataTable.getSkin("uiimg_跑马灯底板"),SysID.FRD_ON("hornadd",this,this.Check),this.mouseEnabled=!1}__class(e,"display.mainIcon.chat.HornMsg",t);var i=e.prototype;return i.Check=function(){if(!this.m_nIsShowing&&DataTable.m_iFriendBar){this.m_nIsShowing=1;for(var t;;){var e=DataTable.m_iSelfUser.GetSvrLocalTime(),i=DataTable.m_iFriendBar.PopHornMsg();if(!FriendMessageData.isstruct(i))break;t=i;var n=0;return"string"==typeof t[3]?n=DateOp.SubDateSec(e,DateOp.SetDateStr(t[3])):t[3]instanceof Date&&(n=DateOp.SubDateSec(e,t[3])),n=0>n?20:20>n?20-n:20,void this.ShowMessage(t,n)}this.m_nIsShowing=0,this.alpha,Tween.to(this,{alpha:0},500,null,Handler.create(this,this.removeThis1))}},i.ShowMessage=function(t,e){function i(){h+=n.length?n+":":"",h+=t[2].replace(/<.*?>/g,""),h=inbox.CAST_TPL_MESSAGE(h,r,!0),a.SetHornMsg(t[0],h,e);var i=Math.abs(t[0]);i!=DataTable.m_iSelfUser.GetUID()&&i>=1e3&&(DataTable.m_iFriendBar.OnAddWorldMsgList(t),DataTable.m_iFriendBar.PushMsgData(t,1)),a.Open()}var n,s,a=this,r=[],h="";if(1==t[0])n="系统消息",s="系统消息";else{if(2!=t[0])return void SysID.FRD_GETUSERINFO(Math.abs(t[0]),null,null,Handler.create(this,aa_=function(t){n=t[1],s="白色",i()}));n="",s=""}i()},i.Open=function(){this.parent||(this.scale(1,1),this.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.x=(Laya.stage.width-this.displayWidth)/2,this.y=(Laya.stage.width-this.displayWidth)/4,Laya.stage.addChild(this),this.alpha=0,Tween.to(this,{alpha:1},500))},i.SetHornMsg=function(t,e,i){Math.abs(t);e=inbox.CAST_EMO_MESSAGE(e,!0,!0),e=e.replace("<CR>",""),this.label_.text=e,e.length<=0||this.OnStartMove(i)},i.OnStartMove=function(t){var e=1e3*t;this.moveW=this.displayWidth+this.label_.displayWidth,this.oneMove=this.moveW/(e/this.oneTime),this.label_.x=this.displayWidth,Laya.timer.loop(this.oneTime,this,this.moveLabel)},i.moveLabel=function(){this.label_.x-=this.oneMove,this.label_.x<-this.label_.displayWidth&&(Laya.timer.clear(this,this.moveLabel),this.m_nIsShowing=0,this.Check())},i.onLabelClick=function(){},i.removeThis1=function(){this.removeSelf()},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e}(HornMsgUI),Mail=function(t){function e(){if(this.mailArr=[],this.leftP=0,this.m_szData=[],this.curSelectGroup=-9999,this.startY=0,e.__super.call(this),e.isboo)throw new Error("调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.chat.Mail",t);var i=e.prototype;return i.init=function(){this.leftP=this.mailList.x,this.contentBox.visible=!1,DisplayTools.scrollBar=this.mailList.scrollBar,this.mailList.renderHandler=new Handler(this,this.onMailListRender),this.mailList.mouseHandler=new Handler(this,this.onMailListMouse),this.backBtn.on("click",this,this.onMouse),this.backBtn.skin=DataTable.getSkin("tex_backbtn"),this.contentList.vScrollBar.visible=!1,this.contentList.content.mouseEnabled=!0},i.onMouse=function(t){var e=this;Tween.to(this.mailList,{x:this.leftP},200,Ease.circOut),Tween.to(this.contentBox,{x:this.leftP+this.mailList.width},200,Ease.circOut,Handler.create(this,function(){e.contentBox.visible=!1})),this.curSelectGroup=-9999,this.setMailData(MessageManger.getInstance().m_szData),this.mailList.scrollTo(0)},i.onMailListRender=function(t,e){if(t&&t.dataSource){var i=t.getChildByName("m_pNewsTip_bg"),n=t.getChildByName("m_pNewsTip"),s=DataTable.m_iFriendBar.CountNewMessage(t.dataSource.group);s>0?(i.visible=!0,n.text=s+""):(i.visible=!1,n.text="")}},i.onMailListMouse=function(t,e){if("click"==t.type){Tween.to(this.mailList,{x:this.leftP-this.mailList.width},200,Ease.circOut),this.contentBox.visible=!0,this.contentBox.x=this.leftP+this.mailList.width;var i=this.mailList.array[e].group;this.updateCurGroupMail(i)}},i.updateCurGroupMail=function(t,e){var i=this;void 0===e&&(e=!1);var n=ArrOp.SzSearch(t,this.m_szData);if(-1!=n||e){if(FriendDef.IsPlayer(t)){this.contentBox.contains(Chat.getInstance())||(this.contentBox.addChild(Chat.getInstance()),Chat.getInstance().y=-5,Chat.getInstance().x=-14),Chat.getInstance().roomBtn.visible=!1,Chat.getInstance().hornBtn.visible=!1,Chat.getInstance().isShowInputText(!0),Chat.getInstance().bq.visible=!1,Chat.getInstance().box_wordChat.visible=!1,Chat.getInstance().hideHornChat();var s=-1==n?[]:this.m_szData[n][1];Chat.getInstance().updateChatMessage(s),Chat.getInstance().inputText.text="",this.contentList.visible=!1,e&&(this.contentBox.visible=!0,this.mailList.visible=!1,this.tipTxt.visible=!1),DataTable.m_iFriendBar.CheckoutMessage(t)}else{var a=this.contentList.vScrollBar.value;this.contentList.destroyChildren(),this.contentList.visible=!0;var r,h=this.m_szData[n][1];this.startY=0;for(var o=0;o<h.length;o++){r=new Object;var l=[],u=h[o][2];u=inbox.CAST_TPL_MESSAGE(u,l,!0),u=inbox.CAST_EMO_MESSAGE(u,!0,!1),u=inbox.GET_AUDIO_MESSAGE(FriendDef.IsLocalPlayer(Math.abs(h[o][0]))?1:0,u),r.contentLabel=u,"string"==typeof h[o][3]?r.timeLabel=inbox.TimeToString(DateOp.SetDateStr(h[o][3])):h[o][3]instanceof Date&&(r.daming=inbox.TimeToString(h[o][3])),r.nameLabel="梦幻家园",r.m_package=h[o][5],r.m_sCert=h[o][6],r.inGroup=t;var c=new MailcontentItem;c.setData(r),c.pos(0,this.startY),this.startY+=c.getViewHeight(),this.contentList.addChild(c)}Laya.timer.once(100,this,__=function(){a?i.contentList.vScrollBar.value=a+1:i.contentList.vScrollBar.value=i.contentList.vScrollBar.max}),this.contentBox.contains(Chat.getInstance())&&this.contentBox.removeChild(Chat.getInstance())}this.mailList.visible=!1,this.mailtype.text="邮件-"+this.getMailTypeByGroup(t),MessageManger.getInstance().m_nCurrent=t,Tween.to(this.contentBox,{x:this.leftP},200,Ease.circOut),this.curSelectGroup=t}},i.setMailData=function(t){if(this.m_szData=t,this.m_szData){var e;this.mailArr=[];for(var i=0;i<this.m_szData.length;i++){e=new Object;var n=this.m_szData[i][1][this.m_szData[i][1].length-1];if(FriendMessageData.isstruct(n)){var s=this.m_szData[i][0],a=this.getMailTypeByGroup(s);if(!(0>s)){e.typeTxt=a,e.group=s,"string"==typeof n[3]?e.timeLabel=inbox.TimeToString(DateOp.SetDateStr(n[3])):n[3]instanceof Date&&(e.daming=inbox.TimeToString(n[3]));var r,h=[];r=inbox.CAST_TPL_MESSAGE(n[2],h,!1),r=inbox.CAST_EMO_MESSAGE(r,!1),r=r.replace("\r\n"," "),r=r.replace("<CR>"," "),0==s?n[7]?e.content="【"+n[7][1]+"】  "+r:e.content="【系统邮件】  "+r:e.content=r;var o=Math.abs(s);1e3>o&&(o=1),o=FriendDef.IsSystemUid(o)?1:o,SysID.FRD_GETUSERINFO(o,null,null,Handler.create(this,function(t){return FriendDef.IsUncleJamie(t[0])?void(e.headimg=DataTable.getSkin("DEFUSER_NPC")):(e.headimg=DataTable.getSkin("tex_face"+t[2]),void(FriendDef.IsPlayer(s)&&(e.typeTxt=t[1])))})),e.m_pNewsTip=DataTable.m_iFriendBar.CountNewMessage(s),this.mailArr.push(e)}}}MainIcon.isInit&&MainIcon.getInstance().CheckWorldTradeStgateChged(),this.mailList.array=this.mailArr,0==this.mailArr.length?(this.mailList.visible=!1,this.tipTxt.visible=!0):(this.mailList.visible=!0,this.tipTxt.visible=!1),-9999!=this.curSelectGroup&&this.updateCurGroupMail(this.curSelectGroup)}},i.getMailTypeByGroup=function(t){var e;return e=0>t?"世界聊天信息":FriendDef.IsPlayer(t)?"游客"+t:"系统邮件"},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(mailUI),MailcontentItem=function(t){function e(){this.m_szData=null,this.packetWight=0,this.packetHeight=0,this.everyOneW=150,this.everyOneH=90,this.oneWayNum=4,this.imgWH=70,e.__super.call(this),this.mouseEnabled=!0,this.getrewardBtn.on("click",this,this.onGetPackage)}__class(e,"display.mainIcon.chat.MailcontentItem",t);var i=e.prototype;return i.setData=function(t){if(this.m_szData=t,this.contentLabel.text=t.contentLabel,this.timeLabel.text=t.timeLabel,this.nameLabel.text=t.nameLabel,t.m_package){var e=this.getChildByName("addgoodsCon");if(e){for(var i=0;i<e.numChildren;i++)e.getChildAt(i)instanceof display.MutiAni.Muti2DAniIns&&e.getChildAt(i).dispose();e.removeSelf(),e.destroy()}DataTable.m_iFriendBar.CheckoutMessage(t.inGroup);var n=new Sprite;n.name="addgoodsCon",this.addChildAt(n,0);for(var s=t.m_package,a=0;a<s.length;a++){var r=ItemFeild.getInstance().getItemArr(s[a][0]);if(r){var h=new Image2;h.skin=DataTable.getSkin(r[3]),h.x=a%this.oneWayNum*this.everyOneW,h.y=Math.floor(a/this.oneWayNum)*this.everyOneH,h.size(this.imgWH,this.imgWH),n.addChild(h);var o=new GObj2DMutiText;o.LoadAni("tex_文字小_ani"),o.SetScrPos(h.x+h.width,h.y+.6*this.imgWH,0),n.addChild(o),o.SetText(s[a][1]+"")}else{var l=DataTable.m_iBuildTab.Get(s[a][0]);if(null==l){gSys.Err("mail--找不到建筑： ID="+s[a][0]);break}var u=new Image2;u.skin=Assets.BuildUrl(l[4]),u.x=a%this.oneWayNum*this.everyOneW,u.y=Math.floor(a/this.oneWayNum)*this.everyOneH,u.size(this.imgWH,this.imgWH),n.addChild(u);var c=new GObj2DMutiText;c.LoadAni("tex_文字小_ani"),c.SetScrPos(u.x+u.width,u.y+.6*this.imgWH,0),n.addChild(c),c.SetText(s[a][1]+"")}}s.length>=this.oneWayNum?this.packetWight=this.oneWayNum*this.everyOneW:this.packetWight=a*this.everyOneW,this.packetHeight=a>0?(Math.floor(a/this.oneWayNum)+1)*this.everyOneH:0,n.pos((this.width-this.packetWight)/2,this.contentLabel.height+this.oneWayNum),""==t.m_sCert?(this.getrewardBtn.visible=!1,this.setButoomH(!1)):(this.getrewardBtn.visible=!0,this.setButoomH(!0))}else this.getrewardBtn.visible=!1,this.setButoomH(!1)},i.setButoomH=function(t){t?(this.butoom.height=this.getrewardBtn.height+this.timeLabel.height+this.nameLabel.height,this.timeLabel.y=this.getrewardBtn.y+this.getrewardBtn.height,this.nameLabel.y=this.timeLabel.y+this.timeLabel.height):(this.butoom.height=this.timeLabel.height+this.nameLabel.height,this.timeLabel.y=0,this.nameLabel.y=this.timeLabel.y+this.timeLabel.height)},i.onGetPackage=function(t){var e=this.m_szData.m_sCert,i=this.m_szData.m_package;DataTable.m_iSelfUser.GetPackage(e,i,[Laya.stage.mouseX,Laya.stage.mouseY,0,"",6])&&(this.getrewardBtn.visible=!1,PanelMain.getInstance().refreshTradeTip())},i.getViewHeight=function(){return this.butoom.y=this.packetHeight+this.contentLabel.height+10,this.packetHeight+this.contentLabel.height+10+this.butoom.height},e}(mailContentItemUI),PanelMain=function(t){function e(){if(this.spritePanel=null,this.panelName="",this.m_pTip_buy=null,this.m_pTip_exchange=null,this.m_pTip_mail=null,e.__super.call(this),e.isboo)throw new Error("请用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.chat.PanelMain",t);var i=e.prototype;return i.init=function(){this.mouseEnabled=!0,this.addEvent(),this.showPanel(),this.m_pTip_buy=new SparkTips,this.m_pTip_buy.SetPos(290,42),this.btn_container.addChild(this.m_pTip_buy),this.m_pTip_exchange=new SparkTips,this.m_pTip_exchange.SetPos(407,42),this.btn_container.addChild(this.m_pTip_exchange),this.m_pTip_mail=new SparkTips,this.m_pTip_mail.SetPos(65,42),this.btn_container.addChild(this.m_pTip_mail),GLeadManager.RegArrowInterface(this.btn_container.getChildByName("item0"),"主界面_收件箱");var t=new Sprite;t.graphics.drawRect(15,108,727,526,"#ffffff"),Laya.stage.on("resize",this,this.onResize),e.isInit=!0},i.onResize=function(){this.displayInStage&&(this.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.y=Laya.stage.height-this.viewHeight)},i.addEvent=function(){this.btn_kg.on("click",this,this.onCkClick),this.btn_container.on("click",this,this.onContainerClick)},i.refreshTradeTip=function(){DataTable.m_iSelfUser.IsHaveTradeToGetByKind(0)?this.m_pTip_exchange.visible=!0:this.m_pTip_exchange.visible=!1,DataTable.m_iSelfUser.IsHaveTradeToGetByKind(1)?this.m_pTip_buy.visible=!0:this.m_pTip_buy.visible=!1,0!=DataTable.m_iFriendBar.CountNewMessage()?this.m_pTip_mail.visible=!0:this.m_pTip_mail.visible=!1,MainIcon.isInit&&MainIcon.getInstance().CheckWorldTradeStgateChged()},i.onCkClick=function(t,e){var i=this;void 0===e&&(e=!1),this.x<0||e?Tween.to(this,{x:0},500,Ease.circOut):Tween.to(this,{x:-this.width},300,Ease.circOut,Handler.create(this,_remove=function(){i.removeSelf(),MainIcon.getInstance().btn_chat.visible=!0})),0==this.btn_kg.index?this.btn_kg.index=1:this.btn_kg.index=0,GameMain._ins.m_gameUI.dispose(),this.refreshTradeTip()},i.onContainerClick=function(t){this.panelName!=t.target.name&&this.showPanel(t.target.name)},i.showPanel=function(t){if(void 0===t&&(t="item0"),this.panelName=t,""!=this.panelName){this.stateHandler(this.panelName),this.spritePanel&&this.spritePanel.removeSelf();var e=new Object;switch(this.panelName){case"item0":this.spritePanel=Mail.getInstance(),e.x=0,e.y=0,Mail.getInstance().setMailData(MessageManger.getInstance().m_szData);break;case"item1":this.spritePanel=Chat.getInstance(),e.x=7,e.y=108,MessageManger.getInstance().m_nCurrent=-100;var i=ArrOp.SzSearch(-100,MessageManger.getInstance().m_szData);-1!=i?Chat.getInstance().updateChatMessage(MessageManger.getInstance().m_szData[i][1],1):Chat.getInstance().updateChatMessage([],1),Chat.getInstance().roomBtn.visible=!0,Chat.getInstance().hornBtn.visible=!0,SysID.FRD_EMIT("chgchatroom",DataTable.m_iFriendBar.m_nMyChatRoom);break;case"item2":this.spritePanel=null,this.spritePanel=WorldBuyView.getInstance(),e.x=7,e.y=102,WorldBuyView.getInstance().onInit();break;case"item3":this.spritePanel=null,this.spritePanel=WorldTradeView.getInstance(),e.x=7,e.y=102,WorldTradeView.getInstance().onInit();break;case"item4":this.spritePanel=Help.getInstance(),e.x=7,e.y=106}DisplayTools.addTarget(this.spritePanel,this,e),e=null}},i.stateHandler=function(t){for(var e=0,i=this.btn_container.numChildren;i>e;e++)t==this.btn_container.getChildAt(e).name?this.btn_container.getChildAt(e).index=1:this.btn_container.getChildAt(e).index=0},i.enterSendMail=function(t){this.showPanel("item0"),Mail.getInstance().updateCurGroupMail(t,!0)},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e.isInit=!1,e}(panelMainUI),PhizView=function(t){function e(){this.dataArr=[],this.num=0,this.index=1,this.arr=["/:qq","/:ww","/:ee","/:rr","/:tt","/:yy","/:uu","/:ii","/:oo","/:pp","/:aa","/:ss","/:dd","/:ff","/:gg","/:hh","/:jj","/:kk","/:ll","/:zz"],e.__super.call(this),this.init()}__class(e,"display.mainIcon.chat.PhizView",t);var i=e.prototype;return i.init=function(){var t;this.dataArr[0]=this.dataArr[0]||[],this.dataArr[1]=this.dataArr[1]||[],this.btn_bq.index=1;for(var e=0;108>e;e++)t=new Object,t.image="ui/icon/51bac0067bad500b.png",t.url=this.arr[e%20],e>76&&(t.image=""),t.info=e+"信息",this.dataArr[0].push(t),t=null,t=new Object,t.image="ui/icon/51b9378bc5e1600f.png",t.url=this.arr[e%20],e>76&&(t.image=""),this.dataArr[1].push(t),t=null;this.upData(),this.addEvent()},i.addEvent=function(){this.phizList.mouseHandler=new Handler(this,this.onListDownHandler),this.btn_bq.on("click",this,this.onBqClickHandler),this.btn_ls.on("click",this,this.onBqClickHandler)},i.removeEvent=function(){this.phizList.renderHandler=null,this.btn_bq.off("click",this,this.onBqClickHandler),this.btn_ls.off("click",this,this.onBqClickHandler)},i.onMove=function(t){console.log("移除list鼠标事件"),this.phizList.mouseHandler=null},i.onListDownHandler=function(t,e){"mousedown"==t.type?(this.phizList.on("mousemove",this,this.onMove),this.stage.on("mouseup",this,this.onMouseUp)):"click"==t.type},i.onMouseUp=function(t){if(this.phizList.off("mousemove",this,this.onMove),this.stage.off("mouseup",this,this.onMouseUp),this.phizList.mouseHandler=new Handler(this,this.onListDownHandler),this.phizList.scrollBar.value>150&&this.phizList.scrollBar.value<=492){if(2==this.index&&this.phizList.scrollBar.value<=300)return this.index=1,void(this.phizList.scrollBar.value=0);this.index=2,this.phizList.scrollBar.value=492}else if(this.phizList.scrollBar.value>492&&this.phizList.scrollBar.value<=984){if(3==this.index&&this.phizList.scrollBar.value<=800)return this.index=2,void(this.phizList.scrollBar.value=492);this.index=3,this.phizList.scrollBar.value=984}else this.index=1,this.phizList.scrollBar.value=0},i.onBqClickHandler=function(t){t.target==this.btn_bq?(this.btn_bq.index=1,this.btn_ls.index=0,this.num=0):t.target==this.btn_ls&&(this.btn_bq.index=0,this.btn_ls.index=1,this.num=1),this.upData()},i.upData=function(){this.phizList.array=this.dataArr[this.num],this.phizList.refresh(),this.phizList.scrollBar.visible=!1},i.dispose=function(){this.removeEvent(),this.dataArr=[],this.arr=[],this.removeSelf()},e}(phizUI),BuyCanvas=function(t){function e(){this.mygoodsNum=null,this.targoodsNum=null,this.num_switch=null,this.m_nBuyItemID=0,this.m_nBuyNum=0,this.m_nSellItemID=0,this.m_nSellNum=0,this.diamond=0,this.m_nTradeKind=0,this.m_nPriceMultiple=0,this.m_nPerPrice=0,this.m_nMinMutiPrice=0,this.m_nModiSIg=0,this.txt_zs_num=null,this.img_zs=null,this.item=ItemFeild.getInstance(),e.__super.call(this),this.init()}__class(e,"display.mainIcon.chat.trade.BuyCanvas",t);var i=e.prototype;return i.init=function(){this.mygoodsNum=new GObj2DMutiText,this.mygoodsNum.LoadAni("tex_文字小_ani"),this.mygoodsNum.SetScrPos(95,120,0),this.numselect.addChild(this.mygoodsNum),this.mygoodsNum.SetText("1"),this.targoodsNum=new GObj2DMutiText,this.targoodsNum.LoadAni("tex_文字小_ani"),this.targoodsNum.SetScrPos(232,220,0),this.numselect.addChild(this.targoodsNum),this.num_switch=new NumSelectItem,this.num_switch.pos(140,60),this.num_switch.on("dragChange",this,this.ReCal),this.numselect.addChildAt(this.num_switch,this.numselect.numChildren-1),this.zhekou.visible=!1,this.viplimit.vipTxt.text="VIP4可发布世界求购",DisplayTools.scrollBar=this.wareList.scrollBar,this.returnBtn.on("click",this,this.onBackHandler),this.wareList.renderHandler=new Handler(this,this.wareRenderHandler),this.wareList.mouseHandler=new Handler(this,this.wareListMouseHandler),this.m_iAskBtn.on("click",this,this.AskForItem),this.m_iAddPriceBtn.on("click",this,this.AddPrice),gSys.WaitSignal(new Handler(this,this.bagdatarefWait),"bagdataref",null,0,!1)},i.bagdatarefWait=function(t){(0==t||1==t)&&this.upData(t)},i.onshow=function(){this.mygoodsNum&&this.mygoodsNum.SetText("1"),this.OnInitSelItem()},i.setMygoods=function(t){this.wareList.array[t]&&(this.mygoods.skin=DataTable.getSkin(this.item.getItemArr(this.wareList.array[t].itemid)[3]),this.num_switch.SetMinMax(1,10),this.m_nSellItemID=1,this.m_nBuyItemID=this.wareList.array[t].itemid,this.m_nBuyNum=1,this.UpDataSelf(),this.ReCal())},i.OnInitSelItem=function(){if(this.m_nMinMutiPrice=this.GetMinMutlv(),this.m_nPriceMultiple=this.m_nMinMutiPrice,!(this.m_nMinMutiPrice<1)){var t,e=SysID.GetTradeItemCostAgv(this.m_nMinMutiPrice);switch(this.m_nMinMutiPrice){case 1:t="繁忙";break;case 2:t="拥挤";break;default:t="爆满"}var i="市场处于%1，求购最低需要#倍！";i.replace("%1",t),i.replace("#",""+e),this.m_nMinMutiPrice>=3&&(this.m_iAddPriceBtn.mouseEnabled=!1)}},i.GetMinMutlv=function(){if(0==this.m_nTradeKind)return 0;var t=this.wareList.array.length,e=0,i=[30,50,70];return e=t<i[0]?0:t<i[1]?1:t<i[2]?2:3},i.AddPrice=function(){this.m_nPriceMultiple+1>=4?this.m_nPriceMultiple=this.m_nMinMutiPrice:this.m_nPriceMultiple=this.m_nPriceMultiple+1,this.m_nPriceMultiple>=3?this.m_iInforLable.text="还原":this.m_iInforLable.text="加倍",this.m_nPriceMultiple<=0?this.zhekou.visible=!1:(this.zhekou.visible=!0,this.zhekou.index=this.m_nPriceMultiple-1),this.UpDataSelf()},i.UpDataSelf=function(){var t,e=SysID.GetTradeItemCostAgv(this.m_nPriceMultiple);t=DataTable.m_iItemTab.Get(this.m_nBuyItemID),this.m_nPerPrice=Math.floor(3.3*t[6])*e,this.m_nPriceMultiple<1,this.m_nSellNum=this.m_nPerPrice*this.m_nBuyNum,this.targoodsNum.SetText(this.m_nSellNum+"")},i.wareRenderHandler=function(t,e){if(t.dataSource){var i=t.getChildByName("renderNumLabel");i||(i=new GObj2DMutiText,i.LoadAni("tex_文字小_ani"),i.SetScrPos(70,60,0),i.name="renderNumLabel",t.addChildAt(i,t.numChildren-1)),i.SetText(t.dataSource.label+"")}},i.wareListMouseHandler=function(t,e){"click"==t.type&&this.setMygoods(e)},i.ReCal=function(){var t=this.num_switch.curNum?this.num_switch.curNum:1;this.mygoodsNum.SetText(t+""),this.m_nBuyNum=t,this.UpDataSelf()},i.onBackHandler=function(t){Tween.to(this,{x:this.width},200,Ease.circOut,Handler.create(this,this.onComplete));var e=WorldBuyView.getInstance().dataPanel;Tween.to(e,{x:0},200,Ease.circOut),WorldBuyView.getInstance().switchTab.visible=!1,WorldBuyView.getInstance().startBtn.visible=!0},i.onComplete=function(){this.visible=!1},i.getGoodsIDArr=function(t){var e=DataTable.itemtab.itemArr,i=[],n=0,s=0;if(0==t)for(n=0;n<e.length;n++)(1==e[n][4]||6==e[n][4])&&DataTable.m_iSelfUser.m_szData.level>=e[n][5]&&(s=DataTable.m_iSelfUser.GetBagItemNum(0,e[n][0]),i.push([e[n][0],s]));else if(1==t)for(n=0;n<e.length;n++)(2==e[n][4]||3==e[n][4])&&DataTable.m_iSelfUser.m_szData.level>=e[n][5]&&(s=DataTable.m_iSelfUser.GetBagItemNum(1,e[n][0]),i.push([e[n][0],s]));return i},i.upData=function(t){void 0===t&&(t=0);var e,i=[],n=[],s=0,a=0;for(n=this.getGoodsIDArr(t),s=0,a=n.length;a>s;s++)e=new Object,e.itemid=n[s][0],e.image=DataTable.getSkin(this.item.getItemArr(e.itemid)[3]),e.label=n[s][1],e.itemid>4e3&&e.itemid<4012?e.info={label1:this.item.getItemArr(e.itemid)[2],label2:this.item.getItemArr(e.itemid)[10],label3:TimerTools.conversion(60*this.item.getItemArr(e.itemid)[13])}:e.info={label1:this.item.getItemArr(e.itemid)[2],label2:this.item.getItemArr(e.itemid)[10]},i.push(e),e=null;this.wareList.array=i,this.wareList.scrollTo(0)},i.CheckVipTimes=function(){var t="";if(this.m_nTradeKind=WorldBuyView.getInstance().m_nTradeKind,DataTable.m_iSelfUser.GetMaxVipTradeFreeTimes(this.m_nTradeKind)<1)return t=0==this.m_nTradeKind?Math.floor(6.0002)+"":""+Math.floor(4.0004),void(this.m_iLeftTimeLable.text="VIP"+t+"开启");var e=DataTable.m_iSelfUser.GetVipWorldTradeFreeTimes(this.m_nTradeKind);e>0?(this.diamond=0,this.txt_zs_num&&(this.txt_zs_num.removeSelf(),this.img_zs.removeSelf()),this.m_iAskBtn.label="求购"):(0==this.m_nTradeKind?this.diamond=15:this.diamond=10,this.txt_zs_num?this.txt_zs_num.SetText(this.diamond+""):(this.txt_zs_num=new GObj2DMutiText,this.txt_zs_num.LoadAni("tex_文字中_ani"),this.txt_zs_num.SetScrPos(180,355,2),this.txt_zs_num.SetText(this.diamond+""),this.numselect.addChild(this.txt_zs_num),this.img_zs=new Image2(DataTable.getSkin("tex_按钮_钻石")),this.img_zs.pos(177,325),this.img_zs.size(64,64),this.img_zs.scale(.5,.5),this.numselect.addChild(this.img_zs)),this.m_iAskBtn.label="    求购"),this.m_iLeftTimeLable.text="今日还可免费求购:"+e+"次",this.upData()},i.AskForItem=function(t){this.m_nBuyItemID<0||(this.diamond>0?MessageBox.show(5,{title:"提示",content:"你确定花费"+this.diamond+"钻石吗？",num:this.diamond},new Handler(this,this.okHandler)):this.OnAskForTradeItem(this.m_nTradeKind,this.m_nBuyItemID,this.m_nBuyNum,this.m_nSellItemID,this.m_nSellNum,this.diamond,[Laya.stage.mouseX,Laya.stage.mouseY],this.m_nPriceMultiple))},i.okHandler=function(){this.OnAskForTradeItem(this.m_nTradeKind,this.m_nBuyItemID,this.m_nBuyNum,this.m_nSellItemID,this.m_nSellNum,this.diamond,[Laya.stage.mouseX,Laya.stage.mouseY],this.m_nPriceMultiple)},i.OnAskForTradeItem=function(t,e,i,n,s,a,r,h,o){function l(t){d=1,u.CheckVipTimes(),t>0&&u.onBackHandler()}var u=this;void 0===o&&(o=0);var c,_=0;if(0==t?(c="工具互换",_=60002):(c="世界求购",_=40004),!DataTable.m_iSelfUser.IsCanVipFunc(_)){var m=c+"需要VIP"+Math.floor(_/1e4)+"才能使用";return gSys.PopOkCancel(Handler.create(this,function(){}),null,null,m,"VIP求购提示"),0}if(e==n)return gSys.GameMsg("不能用同样的东西交换"),0;if(0==t&&!n)return gSys.GameMsg("您当前没有可以用来交换的工具"),0;var d=0;return DataTable.m_iSelfUser.IsHaveTradeToGetByKind(this.m_nTradeKind),DataTable.m_iSelfUser.OnAskForTradeItem(new Handler(this,l),t,e,i,n,s,a,r,o),d},e}(buyCanvasUI),ExchangeCanvas=function(t){function e(){this.mygoodsNum=null,this.targoodsNum=null,this.num_switch=null,this.good_switch=null,this.m_nBuyItemID=0,this.m_nBuyNum=0,this.m_nSellItemID=0,this.m_nSellNum=0,this.diamond=0,this.m_nTradeKind=0,this.m_nPriceMultiple=0,this.txt_zs_num=null,this.img_zs=null,e.__super.call(this),this.item=ItemFeild.getInstance(),this.init()}__class(e,"display.mainIcon.chat.trade.ExchangeCanvas",t);var i=e.prototype;return i.init=function(){this.mygoodsNum=new GObj2DMutiText,this.mygoodsNum.LoadAni("tex_文字小_ani"),this.mygoodsNum.SetScrPos(172,140,0),this.numselect.addChild(this.mygoodsNum),this.targoodsNum=new GObj2DMutiText,this.targoodsNum.LoadAni("tex_文字小_ani"),this.targoodsNum.SetScrPos(172,230,0),this.numselect.addChild(this.targoodsNum),this.num_switch=new NumSelectItem,this.num_switch.pos(220,85),this.num_switch.on("dragChange",this,this.ReCal),this.numselect.addChildAt(this.num_switch,this.numselect.numChildren-1),this.good_switch=new GoodsSelectItem,this.good_switch.pos(225,173),this.good_switch.on("goodsChange",this,this.goodsChangeHandler),this.numselect.addChild(this.good_switch),DisplayTools.scrollBar=this.wareList.scrollBar,this.returnBtn.on("click",this,this.onBackHandler),this.wareList.renderHandler=new Handler(this,this.wareRenderHandler),this.wareList.mouseHandler=new Handler(this,this.wareListMouseHandler),this.upData(),this.setMygoods(0),this.goodsChangeHandler(this.good_switch.goodsData[this.good_switch.curSelect]),this.m_iAskBtn.on("click",this,this.AskForItem)},i.wareRenderHandler=function(t,e){if(t.dataSource){var i=t.getChildByName("renderNumLabel");i||(i=new GObj2DMutiText,i.LoadAni("tex_文字小_ani"),i.SetScrPos(70,60,0),i.name="renderNumLabel",t.addChildAt(i,t.numChildren-1)),i.SetText(t.dataSource.label+"")}},i.wareListMouseHandler=function(t,e){"click"==t.type&&this.setMygoods(e)},i.setMygoods=function(t){if(this.wareList.array[t]){this.mygoods.skin=DataTable.getSkin(this.item.getItemArr(this.wareList.array[t].itemid)[3]);var e=Math.min(this.wareList.array[t].label,10);this.num_switch.SetMinMax(0,e),this.mygoodsNum.SetText("1"),this.targoodsNum.SetText("1"),this.m_nSellItemID=this.wareList.array[t].itemid,this.m_nSellNum=1,this.m_nBuyNum=this.m_nSellNum}},i.ReCal=function(){this.mygoodsNum.SetText(this.num_switch.curNum+""),this.targoodsNum.SetText(this.num_switch.curNum+""),this.m_nBuyNum=this.m_nSellNum=this.num_switch.curNum},i.goodsChangeHandler=function(t){this.targoods.skin=DataTable.getSkin(this.item.getItemArr(t)[3]),this.m_nBuyItemID=t},i.onBackHandler=function(t){Tween.to(this,{x:this.width},200,Ease.circOut,Handler.create(this,this.onComplete));var e=WorldTradeView.getInstance().dataPanel;Tween.to(e,{x:0},200,Ease.circOut),WorldTradeView.getInstance().startBtn.visible=!0},i.onComplete=function(){this.visible=!1},i.upData=function(){var t,e=[],i=[],n=0,s=0;for(i=DataTable.m_iSelfUser.GetBagItemSz(1),n=0,s=i.length;s>n;n++){var a=i[n][0];(a>=10&&15>=a||a>=19&&21>=a)&&(t=new Object,t.itemid=i[n][0],t.image=DataTable.getSkin(this.item.getItemArr(t.itemid)[3]),t.label=i[n][1],t.itemid>4e3&&t.itemid<4012?t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10],label3:this.item.getItemArr(t.itemid)[13]}:t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10]},e.push(t),t=null)}this.wareList.array=e,this.wareList.scrollTo(0),this.wareList.scrollBar.visible=!1},i.CheckVipTimes=function(){var t="";if(this.m_nTradeKind=WorldTradeView.getInstance().m_nTradeKind,DataTable.m_iSelfUser.GetMaxVipTradeFreeTimes(this.m_nTradeKind)<1)return t=0==this.m_nTradeKind?Math.floor(6.0002)+"":""+Math.floor(4.0004),void(this.m_iLeftTimeLable.text="VIP"+t+"开启");var e=DataTable.m_iSelfUser.GetVipWorldTradeFreeTimes(this.m_nTradeKind);e>0?(this.diamond=0,this.txt_zs_num&&(this.txt_zs_num.removeSelf(),this.img_zs.removeSelf()),this.m_iAskBtn.label="求换"):(0==this.m_nTradeKind?this.diamond=15:this.diamond=10,this.txt_zs_num?this.txt_zs_num.SetText(this.diamond+""):(this.txt_zs_num=new GObj2DMutiText,this.txt_zs_num.LoadAni("tex_文字中_ani"),this.txt_zs_num.SetScrPos(190,355,2),this.txt_zs_num.SetText(this.diamond+""),this.numselect.addChild(this.txt_zs_num),this.img_zs=new Image2(DataTable.getSkin("tex_按钮_钻石")),this.img_zs.pos(187,325),this.img_zs.size(64,64),this.img_zs.scale(.5,.5),this.numselect.addChild(this.img_zs)),this.m_iAskBtn.label="    求换"),this.m_iLeftTimeLable.text="今日还可免费求购:"+e+"次",this.upData()},i.AskForItem=function(t){this.m_nBuyItemID<0||(this.diamond>0?MessageBox.show(5,{title:"提示",content:"你确定花费"+this.diamond+"钻石吗？",num:this.diamond},new Handler(this,this.okHandler)):this.OnAskForTradeItem(this.m_nTradeKind,this.m_nBuyItemID,this.m_nBuyNum,this.m_nSellItemID,this.m_nSellNum,this.diamond,[Laya.stage.mouseX,Laya.stage.mouseY],this.m_nPriceMultiple))},i.okHandler=function(){this.OnAskForTradeItem(this.m_nTradeKind,this.m_nBuyItemID,this.m_nBuyNum,this.m_nSellItemID,this.m_nSellNum,this.diamond,[Laya.stage.mouseX,Laya.stage.mouseY],this.m_nPriceMultiple)},i.OnAskForTradeItem=function(t,e,i,n,s,a,r,h,o){function l(t){d=1,u.CheckVipTimes(),t>0&&u.onBackHandler()}var u=this;void 0===o&&(o=0);var c,_=0;if(0==t?(c="工具互换",_=60002):(c="世界求购",_=40004),!DataTable.m_iSelfUser.IsCanVipFunc(_)){var m=c+"需要VIP"+Math.floor(_/1e4)+"才能使用";return gSys.PopOkCancel(Handler.create(this,function(){}),null,null,m,"VIP求购提示"),0}if(e==n)return gSys.GameMsg("不能用同样的东西交换"),0;if(0==t&&!n)return gSys.GameMsg("您当前没有可以用来交换的工具"),0;var d=0;return DataTable.m_iSelfUser.IsHaveTradeToGetByKind(this.m_nTradeKind),DataTable.m_iSelfUser.OnAskForTradeItem(new Handler(this,l),t,e,i,n,s,a,r,o),d},e}(exchangeCanvasUI),LoadingView=function(t){function e(){if(this.loadMAX=100,this.loadCurrent=0,this.loadValue=0,this.animationHC=null,
this.completeHandler=null,this.scalX=0,this.scalY=0,this.sp=null,this.markImg=null,this.img=new Image2,e.__super.call(this),e.isboo)throw new Error("单例 请调用getInstance()来获取实例");Laya.loader.load([{url:"ui/img/loadingBg.jpg",type:"image"},{url:"images/cp_logo.png",type:"image"}],Handler.create(this,this.init))}__class(e,"display.loading.LoadingView",t);var i=e.prototype;return i.removeSelf=function(){return this.loadCurrent=0,laya.display.Node.prototype.removeSelf.call(this)},i.init=function(){this.sp=new Sprite,this.addChildAt(this.sp,0),this.img.skin="ui/img/loadingBg.jpg",this.addChildAt(this.img,1),GameMain._ins.isLoadingBg=!0,this.loadText.fontSize=18,this.loadText.x=521,this.loadText.y=119,this.markImg=new Image2,this.markImg.skin="images/cp_logo.png",this.addChild(this.markImg),this.onResizeMe(),Laya.loader.load([{url:"ani/tex_train_ani_0.png",type:"image"},{url:"ani/tex_train_ani.ani",type:"arraybuffer"}],new Handler(this,this.addAnimation)),Laya.stage.on("resize",this,this.onResizeMe),this.upData()},i.onResizeMe=function(){this.scalX=Laya.stage.width/1024,this.scalY=Laya.stage.height/768,this.width=Laya.stage.width,this.height=Laya.stage.height;var t=this.scalX>this.scalY?this.scalX:this.scalY;this.img.width=1024*t,this.img.height=768*t,this.img.pivot(this.img.width/2,this.img.height/2),this.img.pos(Laya.stage.width/2,Laya.stage.height/2),this.markImg.top=50,this.markImg.right=50,this.boxContainer.scale(t,t),this.boxContainer.centerX=0,this.boxContainer.bottom=20,this.sp.graphics.drawRect(-(Laya.stage.width/2-this.width/2),0,Laya.stage.width,Laya.stage.height,"#000000")},i.addAnimation=function(){var t,e;t=Laya.loader.getRes("ani/tex_train_ani_0.png"),t.canInAtlas=!1,e=Laya.loader.getRes("ani/tex_train_ani.ani");var i=new Muti2DAniData;i.img=t,i.loadAniData("ani/tex_train_ani.ani",new Byte(e)),this.animationHC=new Muti2DAniIns(!1,i);var n=new Sprite;n.addChild(this.animationHC),DisplayTools.addTarget(n,this.boxx,{x:111,y:-38}),this.animationHC.scale(.7,.7),this.animationHC.playAniIdx(0),this.animationHC.y=-50,n.scrollRect=new Rectangle(30,-150,500,300)},i.upData=function(){this.loadProgress.value=0,this.loadCurrent=0,this.loadValue=0,this.loadText.text="0%"},i.timeHandler=function(){if(this.loadValue=this.loadCurrent/this.loadMAX,this.loadValue<.1&&(this.loadValue=.1),this.loadProgress.value=this.loadValue,this.loadText.text=(100*this.loadValue).toFixed(1)+"%",this.animationHC&&(this.animationHC.x=this.diangan.x+300/this.loadMAX*this.loadCurrent),this.loadCurrent>=this.loadMAX){var t;return this.completeHandler&&(t=this.completeHandler,this.completeHandler=null),void(t&&t.run())}},__getset(0,i,"LabelText",null,function(t){this.label1.text=t}),__getset(0,i,"currentValue",null,function(t){t<this.loadCurrent||(this.loadCurrent=t,this.timeHandler())}),__getset(0,i,"fun",null,function(t){this.completeHandler=t}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e}(LoadingUI),GoodsSelectItem=function(t){function e(){this.goodsCan=null,this.goodsData=null,this.rule=58,this.lastX=0,this.startX=0,this.curSelect=1,e.__super.call(this),this.init()}__class(e,"display.mainIcon.chat.trade.GoodsSelectItem",t);var i=e.prototype;return i.init=function(){this.goodsCan=new Sprite,this.gridbox.addChild(this.goodsCan),this.goodsCan.on("mousedown",this,this.onMouse),this.goodsCan.on("mouseup",this,this.onMouse),this.goodsCan.on("mouseout",this,this.onMouse);var t=new Sprite;t.graphics.drawRect(3,0,170,58,"#ffffff"),this.gridbox.mask=t,this.goodsData=DataTable.m_iSelfUser.GetAllToolsID();for(var e=0;e<this.goodsData.length;e++){var i=new Image2;i.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.goodsData[e])[3]),i.size(58,58),i.pos(58*e,0),this.goodsCan.addChild(i)}this.gridbox.mouseEnabled=!0,this.goodsCan.mouseEnabled=!0,this.goodsCan.size(58*this.goodsData.length,58)},i.onMouse=function(t){switch(t.type){case"mousedown":this.lastX=this.getMousePoint().x,this.startX=this.getMousePoint().x,this.goodsCan.on("mousemove",this,this.onMouse);break;case"mouseup":case"mouseout":this.goodsCan.off("mousemove",this,this.onMouse);var e=0,i=0;e=Math.abs(this.goodsCan.x)%58,i=Math.floor(Math.abs(this.goodsCan.x)/58),e>29?(i+=1,Tween.to(this.goodsCan,{x:58*-i},50,Ease.circOut,new Handler(this,this.onComplete))):(i=i,Tween.to(this.goodsCan,{x:58*-i},50,Ease.circOut,new Handler(this,this.onComplete)));break;case"mousemove":var n=this.getMousePoint().x;n>this.lastX?this.goodsCan.x+=n-this.lastX:this.goodsCan.x+=n-this.lastX,this.lastX=n,this.goodsCan.x>0&&(this.goodsCan.x=0),this.goodsCan.x<58*-(this.goodsData.length-3)&&(this.goodsCan.x=58*-(this.goodsData.length-3))}},i.onComplete=function(){this.curSelect=Math.abs(this.goodsCan.x/58)+1,this.event("goodsChange",this.goodsData[this.curSelect])},e}(goodsSelectUI),NumSelectItem=function(t){function e(){this.rule=25,this.curNum=0,this.min=0,this.max=0,this.dis=0,this.globeP=new Point,e.__super.call(this),this.initDrag()}__class(e,"display.mainIcon.chat.trade.NumSelectItem",t);var i=e.prototype;return i.initDrag=function(){this.saleNum.on("mousedown",this,this.onMouse),this.saleNum.pivot(this.saleNum.width/2,this.saleNum.height/2),this.saleNum.pos(this.saleNumBg.x+this.rule,this.saleNumBg.y+this.rule),this.dis=this.saleNumBg.width-2*this.rule},i.onMouse=function(t){switch(t.type){case"mousedown":Laya.stage.on("mousemove",this,this.onMouse),Laya.stage.on("mouseup",this,this.onMouse);break;case"mouseup":case"mouseout":Laya.stage.off("mousemove",this,this.onMouse),Laya.stage.off("mouseup",this,this.onMouse);break;case"mousemove":this.globeP=this.globalToLocal(new Point(Laya.stage.mouseX,Laya.stage.mouseY));var e=this.globeP.x;e<this.saleNumBg.x+this.rule?this.saleNum.x=this.saleNumBg.x+this.rule:e>this.saleNumBg.x+this.saleNumBg.width-this.rule?this.saleNum.x=this.saleNumBg.x+this.saleNumBg.width-this.rule:this.saleNum.x=e,this.curNum=Math.floor((this.saleNum.x-this.saleNumBg.x-this.rule)/this.dis*(this.max-this.min))+1,this.curNum>this.max&&(this.curNum=this.max),this.event("dragChange")}},i.SetMinMax=function(t,e){this.min=t,this.max=e},i.setCurValue=function(t){this.curNum=t,this.event("dragChange");var e=this.curNum/(this.max-this.min)*this.dis+this.saleNumBg.x+this.rule;this.saleNum.x=e},e}(NumSelectUI),OtherInfoItem=function(t){function e(t,i){this.data=null,this.m_nTradeKind=0,this.warningCans=null,e.__super.call(this),this.data=t,this.m_nTradeKind=i,this.updateData(),this.on("click",this,this.onMouse)}__class(e,"display.mainIcon.chat.trade.OtherInfoItem",t);var i=e.prototype;return i.updateData=function(){this.buyBox.visible=!1,this.exchange.visible=!1;var t;if(0==this.m_nTradeKind){this.exchange.visible=!0,this.headimg.skin=DataTable.getSkin("tex_face"+this.data[2]),this.havegoods.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.data[6][0])[3]),this.targoods.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.data[7][0])[3]),t=new GObj2DMutiText,t.LoadAni("tex_文字小_ani"),t.SetScrPos(200,65,0),t.SetText(this.data[6][1]+""),this.addChild(t),t=new GObj2DMutiText,t.LoadAni("tex_文字小_ani"),t.SetScrPos(440,60,0),this.addChild(t);var e=DataTable.m_iSelfUser.GetHaveItemNum(this.data[7][0]);t.SetText(e+"/"+this.data[7][1])}else{this.buyBox.visible=!0,this.headimg.skin=DataTable.getSkin("tex_face"+this.data[2]),this.buyitem.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.data[7][0])[3]),this.data[6][2]>0?(this.zhekou.visible=!0,this.zhekou.index=this.data[6][2]-1):this.zhekou.visible=!1,t=new GObj2DMutiText,t.LoadAni("tex_文字大_ani"),t.SetScrPos(310,65,0),t.SetText(this.data[7][1]+""),this.addChild(t);var i=DataTable.m_iSelfUser.GetHaveItemNum(this.data[7][0]);t.SetText(i+"/"+this.data[7][1]),t=new GObj2DMutiText,t.LoadAni("tex_文字大_ani"),t.SetScrPos(530,65,2),t.SetText(this.data[6][1]+""),this.addChild(t)}},i.onMouse=function(t){var e=this.data[1]==DataTable.m_iSelfUser.GetUID();return e?void gSys.GameMsg("不能购买自己的订单"):(this.warningCans&&this.warningCans.destroy(),this.warningCans=new TradeWarning,this.warningCans.myPopup(),void this.warningCans.InitData(this.data,this.m_nTradeKind))},e}(otherInfoItemUI),ReceiveTradeItem=function(t){function e(t,i){this.m_szTradeData=null,this.m_nIsInitOk=0,this.m_nIsModi=0,this.m_nTradeKind=0,e.__super.call(this),this.m_szTradeData=t,this.m_nTradeKind=i,this.OnInitEnd()}__class(e,"display.mainIcon.chat.trade.ReceiveTradeItem",t);var i=e.prototype;return i.OnInitEnd=function(){this.m_nIsInitOk=1,this.m_nIsModi=1,this.UpDataView(),this.getBtn.on("click",this,this.OnReceive)},i.UpDataView=function(){if(this.m_nIsInitOk&&this.m_nIsModi){this.m_nIsModi=0;var t=new GObj2DMutiText;t.LoadAni("tex_文字小_ani"),t.SetScrPos(325,50,0),this.addChild(t),0==this.m_szTradeData[4]?this.m_szTradeData[3]>0?(this.m_iStateLable.text="交换成功",this.m_iItemCon.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.m_szTradeData[7][0])[3]),t.SetText(this.m_szTradeData[7][1]+"")):(this.m_iStateLable.text="交换过期",this.m_iItemCon.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.m_szTradeData[6][0])[3]),t.SetText(this.m_szTradeData[6][1]+"")):this.m_szTradeData[3]>0?(this.m_iStateLable.text="求购成功",this.m_iItemCon.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.m_szTradeData[7][0])[3]),t.SetText(this.m_szTradeData[7][1]+"")):(this.m_iStateLable.text="求购过期",this.m_iItemCon.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.m_szTradeData[6][0])[3]),t.SetText(this.m_szTradeData[6][1]+""))}},i.OnReceive=function(t){var e=[Laya.stage.mouseX,Laya.stage.mouseY];DataTable.m_iSelfUser.GetMyTradeRec(new Handler(this,this.onBack),this.m_szTradeData,e)},i.onBack=function(t){t>0&&(0==this.m_nTradeKind?WorldTradeView.getInstance().refreshPage():WorldBuyView.getInstance().refreshPage())},e}(ReceiveTradeItemUI),SelfInfoItem=function(t){function e(t,i){this.data=null,this.m_nTradeKind=0,this.warningCans=null,e.__super.call(this),this.data=t,this.m_nTradeKind=i,this.updateData(),this.on("click",this,this.onMouse)}__class(e,"display.mainIcon.chat.trade.SelfInfoItem",t);var i=e.prototype;return i.updateData=function(){this.buyBox.visible=!1,this.exchange.visible=!1;var t;0==this.m_nTradeKind?(this.exchange.visible=!0,this.headimg.skin=DataTable.getSkin("tex_face"+this.data[2]),this.havegoods.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.data[6][0])[3]),this.targoods.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.data[7][0])[3]),t=new GObj2DMutiText,t.LoadAni("tex_文字小_ani"),t.SetScrPos(200,65,0),t.SetText(this.data[6][1]+""),this.addChild(t),t=new GObj2DMutiText,t.LoadAni("tex_文字小_ani"),t.SetScrPos(440,60,0),t.SetText(this.data[7][1]+""),this.addChild(t)):(this.buyBox.visible=!0,this.headimg.skin=DataTable.getSkin("tex_face"+this.data[2]),this.buyitem.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.data[7][0])[3]),this.data[6][2]>0?(this.zhekou.visible=!0,this.zhekou.index=this.data[6][2]-1):this.zhekou.visible=!1,t=new GObj2DMutiText,t.LoadAni("tex_文字大_ani"),t.SetScrPos(310,60,0),t.SetText(this.data[7][1]+""),this.addChild(t),t=new GObj2DMutiText,t.LoadAni("tex_文字大_ani"),t.SetScrPos(530,60,2),t.SetText(this.data[6][1]+""),this.addChild(t))},i.onMouse=function(t){var e=this.data[1]==DataTable.m_iSelfUser.GetUID();return e?void gSys.GameMsg("不能购买自己的订单"):(this.warningCans&&this.warningCans.destroy(),this.warningCans=new TradeWarning,this.warningCans.myPopup(),void this.warningCans.InitData(this.data,this.m_nTradeKind))},e}(selfInfoItemUI),Help=function(t){function e(){if(e.__super.call(this),e.isboo)throw new Error("请用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.chat.Help",t);var i=e.prototype;return i.init=function(){this.m_text.text="亲爱的玩家：\n《梦幻家园》首测开启，一起来打造独一无二的梦幻乐园吧！"},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e}(helpUI),WorldBuyView=function(t){function e(){if(this.m_nConKind=0,this.m_nIsLock=1,this.m_szAllMsgData=null,this.m_nTradeKind=0,this.buyCas=null,this.leftP=0,this.receiveMsgNum=0,this.m_pTip=null,e.__super.call(this),e.isboo)throw new Error("这是个单例类！");this.init()}__class(e,"display.mainIcon.chat.WorldBuyView",t);var i=e.prototype;return i.init=function(){this.buyCas=new BuyCanvas,this.buyCas.visible=!1,this.contenPanel.addChild(this.buyCas),this.contenPanel.content.mouseEnabled=!0,this.switchTab.visible=!1,this.switchTab.ls_box.on("click",this,this.onSwitchTab),this.switchTab.wp_box.on("click",this,this.onSwitchTab),this.switchTab.ls_bg.visible=!0,this.switchTab.wp_bg2.visible=!0,this.switchTab.wp_bg.visible=!1,this.switchTab.ls_bg2.visible=!1,this.buyCas.upData(0),this.buyCas.setMygoods(0),this.m_pTip=new SparkTips,this.m_pTip.SetPos(130,20),this.startBtn.addChild(this.m_pTip),this.leftP=0,this.dataPanel.vScrollBar.visible=!1,this.receivePanelCon.vScrollBar.visible=!1,this.receivePanel.visible=!1,this.viplimit.vipTxt.text="VIP4可发布世界求购",this.startBtn.on("click",this,this.onMouse),this.ReciverreturnBtn.on("click",this,this.onMouse),DataTable.m_iSelfUser.AddNoti("WorldTradeStgateChged",this,this.CheckShowBusyInfo),DataTable.m_iSelfUser.AddNoti("WorldTradeStgateChged",this,this.NotiSubDataChged)},i.onInit=function(){var t=this.IsValidVip();t?(this.viplimit.visible=!1,this.buyCas.visible||(this.startBtn.visible=!0)):(this.startBtn.visible=!1,this.viplimit.visible=!0),this.m_nTradeKind=1,this.SetMsgData()},i.onMouse=function(t){switch(t.currentTarget){case this.startBtn:"发起求购"==this.startBtnLabel.text?(this.buyCas.x=this.buyCas.width,this.buyCas.onshow(),this.buyCas.visible=!0,this.switchTab.visible=!0,Tween.to(this.buyCas,{x:this.leftP},200,Ease.circOut),Tween.to(this.dataPanel,{x:this.leftP-this.dataPanel.width},200,Ease.circOut),this.buyCas.CheckVipTimes(),this.startBtn.visible=!1):(this.receivePanel.visible=!0,this.receivePanel.x=this.receivePanel.width,Tween.to(this.receivePanel,{x:this.leftP},200,Ease.circOut),Tween.to(this.dataPanel,{x:this.leftP-this.dataPanel.width},200,Ease.circOut),this.startBtn.visible=!1);break;case this.ReciverreturnBtn:this.buyCas.x=this.buyCas.width,this.buyCas.visible=!0,this.switchTab.visible=!0,Tween.to(this.buyCas,{x:this.leftP},200,Ease.circOut),Tween.to(this.receivePanel,{x:this.leftP-this.receivePanel.width},200,Ease.circOut),this.buyCas.CheckVipTimes(),this.startBtn.visible=!1}},i.onSwitchTab=function(t){switch(t.target){case this.switchTab.ls_box:this.switchTab.ls_bg.visible=!0,this.switchTab.wp_bg2.visible=!0,this.switchTab.wp_bg.visible=!1,this.switchTab.ls_bg2.visible=!1,this.buyCas.upData(0);break;case this.switchTab.wp_box:this.switchTab.ls_bg.visible=!1,this.switchTab.wp_bg2.visible=!1,this.switchTab.wp_bg.visible=!0,this.switchTab.ls_bg2.visible=!0,this.buyCas.upData(1)}},i.SetMsgData=function(){this.m_szAllMsgData=DataTable.m_iSelfUser.GetWorldTradeDataByKind(this.m_nTradeKind),this.UpdateView()},i.UpdateView=function(){this.dataPanel.content.mouseEnabled=!0,this.dataPanel.destroyChildren(),this.receivePanelCon.content.mouseEnabled=!0,this.receivePanelCon.destroyChildren();var t=0;this.receiveMsgNum=0;for(var e=0;e<this.m_szAllMsgData.length;e++){var i,n=this.m_szAllMsgData[e],s=gSys.GetCurSecAdj();this.IsValidMsg(n,s)?(i=n[1]==DataTable.m_iSelfUser.GetUID()?new SelfInfoItem(n,this.m_nTradeKind):new OtherInfoItem(n,this.m_nTradeKind),i.pos(0,100*t),this.dataPanel.addChild(i),t++):this.IsValidMsg_recei(n,s)&&(i=new ReceiveTradeItem(n,this.m_nTradeKind),i.pos(0,100*this.receiveMsgNum),this.receivePanelCon.addChild(i),this.receiveMsgNum++)}this.ShowNoneLable(t),this.CheckBtnText()},i.IsValidMsg=function(t,e){return 1!=t[4]?0:0!=t[5]?0:t[8]<e?0:1},i.IsValidMsg_recei=function(t,e){return t[1]!=DataTable.m_iSelfUser.GetUID()?0:t[4]!=this.m_nTradeKind?0:4==t[5]||2!=t[5]&&t[8]>=e?0:1},i.ShowNoneLable=function(t){if(1>t){var e=new tipTxtUI;e.pos(180,146),this.dataPanel.addChild(e)}},i.CheckShowBusyInfo=function(){if(1!=this.m_nConKind&&this.IsValidVip()){var t=1;if(!(1>t)){var e,i=SysID.GetTradeItemCostAgv(t);switch(t){case 1:e="繁忙";break;case 2:e="拥挤";break;default:e="爆满"}var n="市场处于%1，求购最低需要#倍！";n.replace("%1",e),n.replace("#",""+i)}}},i.NotiSubDataChged=function(t){this.m_szAllMsgData=DataTable.m_iSelfUser.GetWorldTradeDataByKind(this.m_nTradeKind),this.UpdateView()},i.CheckBtnText=function(){return DataTable.m_iSelfUser.IsHaveTradeToGetByKind(this.m_nTradeKind)?(this.startBtnLabel.text="收取物品",this.m_pTip.visible=!0):(this.startBtnLabel.text="发起求购",this.m_pTip.visible=!1),1},i.IsValidVip=function(){var t=0;return t=0==this.m_nConKind?60002:40004,DataTable.m_iSelfUser.IsCanVipFunc(t)},i.InitView=function(){this.NotiVipChged(),this.m_nIsLock&&DataTable.m_iSelfUser.AddNoti("userviplvchged",this,this.NotiVipChged)},i.NotiVipChged=function(){this.IsValidVip()?this.m_nIsLock=0:0==this.m_nConKind?this.SetUnLockVipLv(0,60002):this.SetUnLockVipLv(1,40004),this.CheckShowBusyInfo()},i.SetUnLockVipLv=function(t,e){var i;i="(VIP%1可发布%2)",0==t?(i.replace("%1",""+DataTable.m_iSelfUser.GetVipFuncLv(60002)),i.replace("%2","工具交换")):(i.replace("%1",""+DataTable.m_iSelfUser.GetVipFuncLv(40004)),i.replace("%2","世界求购"))},i.refreshPage=function(){this.m_szAllMsgData=DataTable.m_iSelfUser.GetWorldTradeDataByKind(this.m_nTradeKind),this.UpdateView(),this.receiveMsgNum<1&&(this.buyCas.x=this.buyCas.width,this.buyCas.visible=!0,this.switchTab.visible=!0,Tween.to(this.buyCas,{x:this.leftP},200,Ease.circOut),Tween.to(this.receivePanel,{x:this.leftP-this.receivePanel.width},200,Ease.circOut),this.buyCas.CheckVipTimes(),this.startBtn.visible=!1),PanelMain.getInstance().refreshTradeTip()},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(WorldBuyUI),WorldTradeView=function(t){function e(){if(this.m_nConKind=0,this.m_pConView=null,this.m_nIsLock=1,this.m_szAllMsgData=null,this.m_nTradeKind=0,this.exchageCas=null,this.leftP=0,this.receiveMsgNum=0,this.m_pTip=null,e.__super.call(this),e.isboo)throw new Error("这是个单例类！");this.init()}__class(e,"display.mainIcon.chat.WorldTradeView",t);var i=e.prototype;return i.init=function(){this.exchageCas=new ExchangeCanvas,this.exchageCas.visible=!1,this.contenPanel.addChild(this.exchageCas),this.contenPanel.content.mouseEnabled=!0,this.m_pTip=new SparkTips,this.m_pTip.SetPos(130,20),this.startBtn.addChild(this.m_pTip);var t=new Sprite;t.graphics.drawRect(0,0,727,526,"#ffffff"),this.leftP=0,this.dataPanel.vScrollBar.visible=!1,this.receivePanelCon.vScrollBar.visible=!1,this.receivePanel.visible=!1,this.startBtn.on("click",this,this.onMouse),this.ReciverreturnBtn.on("click",this,this.onMouse),DataTable.m_iSelfUser.AddNoti("WorldTradeStgateChged",this,this.CheckShowBusyInfo),DataTable.m_iSelfUser.AddNoti("WorldTradeStgateChged",this,this.NotiSubDataChged)},i.onInit=function(){var t=this.IsValidVip();t?(this.viplimit.visible=!1,this.exchageCas.visible||(this.startBtn.visible=!0)):(this.startBtn.visible=!1,this.viplimit.visible=!0),this.m_nTradeKind=0,this.SetMsgData()},i.onMouse=function(t){switch(t.currentTarget){case this.startBtn:"发起交换"==this.startBtnLabel.text?(this.exchageCas.x=this.exchageCas.width,this.exchageCas.visible=!0,Tween.to(this.exchageCas,{x:this.leftP},200,Ease.circOut),Tween.to(this.dataPanel,{x:this.leftP-this.dataPanel.width},200,Ease.circOut),this.exchageCas.CheckVipTimes(),this.startBtn.visible=!1):(this.receivePanel.visible=!0,this.receivePanel.x=this.receivePanel.width,Tween.to(this.receivePanel,{x:this.leftP},200,Ease.circOut),Tween.to(this.dataPanel,{x:this.leftP-this.dataPanel.width},200,Ease.circOut),this.startBtn.visible=!1);break;case this.ReciverreturnBtn:this.exchageCas.x=this.exchageCas.width,this.exchageCas.visible=!0,Tween.to(this.exchageCas,{x:this.leftP},200,Ease.circOut),Tween.to(this.receivePanel,{x:this.leftP-this.receivePanel.width},200,Ease.circOut),this.exchageCas.CheckVipTimes(),this.startBtn.visible=!1}},i.SetMsgData=function(){this.m_szAllMsgData=DataTable.m_iSelfUser.GetWorldTradeDataByKind(this.m_nTradeKind),this.UpdateView()},i.UpdateView=function(){this.dataPanel.content.mouseEnabled=!0,this.dataPanel.destroyChildren(),this.receivePanelCon.content.mouseEnabled=!0,this.receivePanelCon.destroyChildren();var t=0;this.receiveMsgNum=0;for(var e=0;e<this.m_szAllMsgData.length;e++){var i,n=this.m_szAllMsgData[e],s=gSys.GetCurSecAdj();this.IsValidMsg(n,s)?(i=n[1]==DataTable.m_iSelfUser.GetUID()?new SelfInfoItem(n,this.m_nTradeKind):new OtherInfoItem(n,this.m_nTradeKind),i.pos(0,100*t),this.dataPanel.addChild(i),t++):this.IsValidMsg_recei(n,s)&&(i=new ReceiveTradeItem(n,this.m_nTradeKind),i.pos(0,100*this.receiveMsgNum),this.receivePanelCon.addChild(i),this.receiveMsgNum++)}this.ShowNoneLable(t),this.CheckBtnText()},i.IsValidMsg=function(t,e){return 0!=t[4]?0:0!=t[5]?0:t[8]<e?0:1},i.IsValidMsg_recei=function(t,e){return t[1]!=DataTable.m_iSelfUser.GetUID()?0:t[4]!=this.m_nTradeKind?0:4==t[5]||2!=t[5]&&t[8]>=e?0:1},i.ShowNoneLable=function(t){if(1>t){var e=new tipTxtUI;e.pos(180,146),this.dataPanel.addChild(e)}},i.CheckShowBusyInfo=function(){if(0!=this.m_nConKind&&this.IsValidVip()){var t=1;if(!(1>t)){var e,i=SysID.GetTradeItemCostAgv(t);switch(t){case 1:e="繁忙";break;case 2:e="拥挤";break;default:e="爆满"}var n="市场处于%1，求购最低需要#倍！";n.replace("%1",e),n.replace("#",""+i)}}},i.NotiSubDataChged=function(t){this.m_szAllMsgData=DataTable.m_iSelfUser.GetWorldTradeDataByKind(this.m_nTradeKind),this.UpdateView()},i.CheckBtnText=function(){return DataTable.m_iSelfUser.IsHaveTradeToGetByKind(this.m_nTradeKind)?(this.startBtnLabel.text="收取物品",this.m_pTip.visible=!0):(this.startBtnLabel.text="发起交换",this.m_pTip.visible=!1),1},i.IsValidVip=function(){var t=0;return t=0==this.m_nConKind?60002:40004,DataTable.m_iSelfUser.IsCanVipFunc(t)},i.InitView=function(){this.NotiVipChged(),this.m_nIsLock&&DataTable.m_iSelfUser.AddNoti("userviplvchged",this,this.NotiVipChged)},i.NotiVipChged=function(){this.IsValidVip()?this.m_nIsLock=0:0==this.m_nConKind?this.SetUnLockVipLv(0,60002):this.SetUnLockVipLv(1,40004),this.CheckShowBusyInfo()},i.SetUnLockVipLv=function(t,e){var i;i="(VIP%1可发布%2)",0==t?(i.replace("%1",""+DataTable.m_iSelfUser.GetVipFuncLv(60002)),i.replace("%2","工具交换")):(i.replace("%1",""+DataTable.m_iSelfUser.GetVipFuncLv(40004)),i.replace("%2","世界求购"))},i.refreshPage=function(){this.m_szAllMsgData=DataTable.m_iSelfUser.GetWorldTradeDataByKind(this.m_nTradeKind),this.UpdateView(),this.receiveMsgNum<1&&(this.exchageCas.x=this.exchageCas.width,this.exchageCas.visible=!0,Tween.to(this.exchageCas,{x:this.leftP},200,Ease.circOut),Tween.to(this.receivePanel,{x:this.leftP-this.receivePanel.width},200,Ease.circOut),this.exchageCas.CheckVipTimes(),this.startBtn.visible=!1),PanelMain.getInstance().refreshTradeTip()},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(WorldTradeUI),DingdanItemView=function(t){function e(){this.angle=30,this.boc=50,e.__super.call(this),this.daojishi.isV=!0}__class(e,"display.mainIcon.dingdan.DingdanItemView",t);var i=e.prototype;return i.moveItemHandler=function(){Laya.timer.frameLoop(1,this,this.onFrameHandler,[],!0)},i.changeHandler=function(){this.box_dingdan_yes.visible=!1,this.daojishi.visible=!0,this.daojishi.setTime(840,0,0,null,new Handler(this,this.timecompleteHandler))},i.timecompleteHandler=function(){console.log(123123123)},i.onFrameHandler=function(){return this.boc<=0?(Laya.timer.clear(this,this.onFrameHandler),this.angle=30,this.boc=50,void(this.rotation=0)):(this.rotation=Math.sin(this.angle)*this.boc,this.angle+=.2,void(this.boc-=.2))},e}(DingdanItemUI),Achievement=function(t){function e(){if(this.achievement2DText=null,this.mutiTextArr=[],this.m_szArch=null,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.figureInfoPanel.Achievement",t);var i=e.prototype;return i.init=function(){this.achievement2DText=new GObj2DMutiText,this.achievement2DText.LoadAni("tex_文字大_ani"),this.addChild(this.achievement2DText),this.achievement2DText.SetScrPos(419,215,1),this.achieveList.scrollBar.hide=!0,this.achieveList.scrollBar.elasticDistance=200,this.achieveList.scrollBar.elasticBackTime=50,this.achieveList.renderHandler=new Handler(this,this.onRenderHandler);for(var t=0;4>t;t++){var e=new GObj2DMutiText;e.LoadAni("tex_文字大_ani"),e.SetScrPos(530,102,0),this.achieveList.getCell(t).addChild(e),e.SetText("Z15");var i=new GObj2DMutiText;i.LoadAni("tex_文字大_ani"),i.SetScrPos(530,156,0),this.achieveList.getCell(t).addChild(i),i.SetText("E500"),this.mutiTextArr.push([e,i])}},i.onRenderHandler=function(t,e){if(t.dataSource){var i=t.dataSource;if(i.allover)return t.getChildByName("names").text="已全部完成",t.getChildByName("btn_lingjiang").skin=null,t.getChildByName("btn_lingjiang").label="已全部领取",t.getChildByName("box_progress").visible=!1,t.getChildByName("label1").visible=!1,void(t.getChildByName("label2").visible=!1);var n=t.getChildByName("btn_lingjiang"),s=t.getChildByName("box_progress");n.clickHandler&&n.clickHandler.recover(),n.clickHandler=new Handler(this,this.OnLBDown,[i]),1==i.status?(n.visible=!0,s.visible=!1):(n.visible=!1,s.visible=!0),t.getChildByName("names").height>60?t.getChildByName("names").y=25:t.getChildByName("names").y=50,this.upExpDiamonData(e,Laya.__parseInt(t.getChildByName("m_nDiamon").text),Laya.__parseInt(t.getChildByName("m_nExp").text))}},i.upExpDiamonData=function(t,e,i){this.mutiTextArr[t%4][0].SetText("Z"+e),this.mutiTextArr[t%4][1].SetText("E"+i)},i.OnLBDown=function(t){DataTable.m_iSelfUser.GetArchReward(t.id,t.m_nCurLev,[Laya.stage.mouseX,Laya.stage.mouseY]),this.Refresh()},i.onShow=function(){this.Refresh()},i.Refresh=function(){this.m_szArch=[],this.achievement2DText.SetText(DataTable.m_iSelfUser.GetArchPoint()+"");for(var t,e=DataTable.m_iAchievementTab.GetAll(),i=0,n=[],s=0,a=e.length;a>s;s++)null!=e[s]&&(e[s][2].length<1||(t=new Object,i=this.itemInit(e[s],t),2!=i?1!=i?this.m_szArch.push(t):this.m_szArch.unshift(t):n.push(t)));this.m_szArch=ArrOp.SzLink(this.m_szArch,n),this.achieveList.array=this.m_szArch},i.itemInit=function(t,e){var i=0,n=0,s=0,a=0,r=0;n=DataTable.m_iSelfUser.GetAchvTagNum(t[4]);var h=DataTable.m_iSelfUser.GetAchvData(t[0]),o=t[5],l=0;i=1;for(var u=0;u<h.length;u++)if(null!=o[u]&&(s=o[u][0],2!=h[u])){i=u,a=o[u][1],r=o[u][2],o[u][0]<=n&&(l=1,e.status=l,e.id=t[0],e.m_nCurLev=i);break}0>i&&(l=2,e.status=l);var c=n/s;c>1?c=1:0>c&&(c=0),e.m_nExp=a,e.m_nDiamon=r,e.box_progress={},e.box_progress.progressLabel=n+"/"+s,e.box_progress.m_gpro=c;var _=t[2];return _=_.replace("{d}",s.toString()),e.names=_,0>i?e.allOver=!0:e.allOver=!1,l},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(achievementUI),FigureInfo=function(t){function e(){if(this.spritePanel=null,this.isClick=!0,this.m_vVisu=null,this.m_sLabel=null,this.point=new Point,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.figureInfoPanel.FigureInfo",t);var i=e.prototype;return i.init=function(){this.figurePanel.vScrollBar.hide=!0,this.figurePanel.vScrollBar.elasticDistance=200,this.figurePanel.vScrollBar.elasticBackTime=50,this.figurePanel.vScrollBar.changeHandler=new Handler(this,this.onPanelChangeHandler),this.btn_geren.on("click",this,this.onClick);for(var t=this.box_left.numChildren,e=0;t>e;e++){var i=this.box_left.getChildAt(e);"render"==i.name&&i.on("mousedown",this,this.onMouseDown)}this.on("removed",this,this._$7_onRemoved),this.btn_shezhi.on("click",this,this.onSettings),this.btn_shezhi.visible=!1,this.m_quitGame.visible=!1;var n=window.LayaBoxMarket&&window.LayaBoxMarket.getInstance();n&&n.canLogout&&n.canLogout()&&(this.m_quitGame.visible=!0,this.m_quitGame.on("click",this,this.onQuitGame)),this.on("removed",this,this.Save)},i.onQuitGame=function(){var t=window.LayaBoxMarket&&window.LayaBoxMarket.getInstance();t&&t.logout("",function(t){var e=JSON.parse(t);e&&0==e.result&&MarketCtr.Me().loginResult&&2==MarketCtr.Me().loginResult.loginType&&window.location.reload()})},i.onSettings=function(){Settings.getInstance().myPopup()},i._$7_onRemoved=function(){this.box_right.removeChildren()},i.onPanelChangeHandler=function(t){this.box_right.y=t},i.onClick=function(){var t=this;this.idLabel.visible=!0,this.box_geren.visible=!1,Tween.clearTween(this.box_geren),Tween.clearTween(this.box_view),this.isClick=!1,Tween.to(this.box_view,{x:10},200,null,Handler.create(null,function(){t.box_right.removeChildren(),t.isClick=!0})),this.Save(),this.upDate()},i.onMouseDown=function(t){if(this.point.setTo(Laya.stage.mouseX,Laya.stage.mouseY),t.target.getChildByName("white")){var e=t.target.getChildByName("white");e.visible=!0,Laya.stage.on("mousemove",this,this.onMouseMove_Up,[e]),Laya.stage.on("mouseup",this,this.onMouseMove_Up,[e])}},i.onMouseMove_Up=function(t,e){var i=this;if("mousemove"==e.type){Point.EMPTY.setTo(Laya.stage.mouseX,Laya.stage.mouseY);var n=MathUtil1.Vec2Dis(this.point.x,this.point.y,Point.EMPTY.x,Point.EMPTY.y);n>20&&(t.visible=!1)}else if("mouseup"==e.type){if(Laya.stage.off("mousemove",this,this.onMouseMove_Up),Laya.stage.off("mouseup",this,this.onMouseMove_Up),!this.isClick)return;if(!t.visible)return;if(t.visible=!1,!this.whichView(t))return;this.idLabel.visible=!1,this.box_geren.visible=!0,this.box_geren.alpha=0,Tween.to(this.box_geren,{alpha:1},500),Tween.to(this.box_view,{x:-this.box_view.width/2-10},200,null,Handler.create(null,function(){i.isClick=!0}))}},i.whichView=function(t){this.box_right.removeChildren();var e=t.parent,i=e.getChildByName("title").text;switch(i){case"头像":return MyHeadPage.getInstance().update(),this.box_right.addChild(MyHeadPage.getInstance()),!0;case"昵称":return MyNickPage.getInstance().update(),this.box_right.addChild(MyNickPage.getInstance()),!0;case"我的称号":return!1;case"签名":return MyLabelPage.getInstance().update(),this.box_right.addChild(MyLabelPage.getInstance()),!0;case"VIP":return MainIcon.getInstance().rightIcon.addInterface(1,1),!1;case"点赞花信息":return MyPraisePage.getInstance().update(),this.box_right.addChild(MyPraisePage.getInstance()),!0;case"最高访问量":return MyUVPage.getInstance().update(),this.box_right.addChild(MyUVPage.getInstance()),!0}return!1},i.onShow=function(){this.btn_geren.skin=DataTable.getSkin("tex_backbtn"),this.box_geren.visible=!1,this.idLabel.visible=!0,this.idLabel.text="人物ID:   "+DataTable.m_iSelfUser.m_szData.uid,this.box_view.x=10,this.upDate()},i.upDate=function(){var t=this;this.m_vVisu=DataTable.m_iSelfFrd.GetShortInfo(),this.m_sLabel=DataTable.m_iSelfFrd.GetLabel(),this.img_touxiang.skin=DataTable.getSkin("tex_face"+this.m_vVisu[2]),this.names.text=this.m_vVisu[1],this.m_sLabel.length>2?this.qianming.text=this.m_sLabel:this.qianming.text="这家伙很懒，什么都没有留下",this.vip.filters=DataTable.m_iSelfUser.GetVipLevel()?null:[ColorFilter.GRAY],DataTable.m_iSelfUser.GetRealUserVisit(Handler.create(this,function(e){t.label_fangwen.text=e[4]+""})),this.youqing.text=DataTable.m_iSelfUser.GetFriPoint()+""},i.removeSelf=function(){return laya.display.Node.prototype.removeSelf.call(this),Tween.clearTween(this.box_geren),Tween.clearTween(this.box_view),this},i.Save=function(){var t=DataTable.m_iSelfFrd.GetShortInfo();t!=this.m_vVisu&&DataTable.m_iSelfFrd.ChgUserInfo(this.m_vVisu);var e=DataTable.m_iSelfFrd.GetLabel();e!=this.m_sLabel&&DataTable.m_iSelfFrd.ChgUserLabel(this.m_sLabel)},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(figureUI),ManuFacture=function(t){function e(){this.arrManu=[],this.arrGrid=[],this.number=0,this.downID=-1,this.stageY=0,this.stageX=0,this.iboxX=0,this.iboxY=0,this.isMouse=!0,this.ish=!0,this.valueY=200,this.mousesY=0,this.xArr=[46,130,204,278,352],this.scaleNum=NaN,this.xNum=-1,this.ibox=null,this.addArr=[114,187,260,329],this.n=-1,this.numTxt=null,this.gbottomBtn=null,this.sq=null,this.kuangText=null,
this.szneeddia=[5,10,20,50,100,200,300,500],e.__super.call(this),this.init()}__class(e,"display.Machine.ManuFacture",t);var i=e.prototype;return i.status=function(t){var e=this;void 0===t&&(t=!0),DataTable.m_iSelfUser.IsVip(3)&&(this.sq.visible=!0),t?Tween.to(this,{scaleX:1,scaleY:1},200):Tween.to(this,{scaleX:.1,scaleY:.1},200,Ease.strongInOut,Handler.create(this,rem=function(){e.removeSelf()}))},i.fillData=function(t,e){if(t&&!(t.length<1)&&e==GMapBuildBase.currentBuildId){this.arrManu=[];var i,n,s=0;for(this.n=-1,s=0;s<t.length;s++){if(i=new Object,"车间"==this.title.text){var a=DataTable.m_iBuildTab.Get(t[s][0])[4];n=GVar.mutiAniDic[a][1].replace(".png","s.png")}else n=DataTable.getSkin(DataTable.m_iItemTab.Get(t[s][0])[3]);i.ibox={x:52,y:52,image:n,label:{text:t[s][1]+"",color:t[s][1]<1?"#ff0000":"#ffffff"}},i.id=t[s][0],i.x=116*s,i.y=0,i.filters=[],i.imageBg=DataTable.getSkin(this.CheckState(t[s][0])),this.arrManu.push(i),DataTable.m_iSelfUser.GetLevel()<t[s][2]&&(i.ibox.label="",i.filters=[ColorFilter.GRAY],i.imageBg=DataTable.getSkin("tex_素材_单子02"),this.n=s),GLeadManager.RegArrowInterface(this,"机器_产品_"+t[s][0],0,13,100)}i=null,this.wuList.array=this.arrManu}},i.upWuList=function(){for(var t=0;t<this.wuList.length;t++)this.wuList.getItem(t).imageBg=DataTable.getSkin(this.CheckState(this.wuList.getItem(t).id));this.fillData(this.gbottomBtn.m_pLink.GetPopItem(),this.gbottomBtn.m_pLink.GetBuildID())},i.fillcurrent=function(t,e){if(t&&e==GMapBuildBase.currentBuildId){var i=this.baiBox.numChildren-1;this.number=i;for(var n=0;i>n;n++)n<t.length?this.baiBox.getChildByName("item"+n).dataSource=t[n]:(this.number--,this.baiBox.getChildByName("item"+n).dataSource={image:""})}},i.fillNumber=function(t,e){if(e==GMapBuildBase.currentBuildId){for(var i=this.baiBox.numChildren-1,n=0;i>n;n++)this.baiBox.getChildByName("item"+n).visible=!1,t>n&&(this.baiBox.getChildByName("item"+n).visible=!0);9>t&&this.numTxt.SetText(this.szneeddia[t-1]+"Z"),this.add.visible=9!=t,5>t&&(t-=1),this.add.x=this.addArr[t%5],this.add.y=t>=5?292:212,t>=5&&(CountDown.getInstance().y=356)}},i.init=function(){if(this.wuList.scrollBar.hide=!0,this.pivotY=this.height,this.addEvent(),this.initAniTxt(),!this.sq){this.sq=new Image2,this.sq.skin="3d/tex/5208aadae7c9900a.png",this.addChild(this.sq),this.sq.scale(.8,.8),this.sq.on("click",this,this.putBag),this.sq.pos(-100,180),this.sq.visible=!1;var t=new Text;t.text="收起",t.pos(30,125),t.bold=!0,t.fontSize=30,t.color="#ffffff",t.stroke=1,this.sq.addChild(t)}},i.putBag=function(){this.removeSelf(),this.gbottomBtn.m_pLink.OnPutBag()},i.initAniTxt=function(){this.m_pOreBtn.skin="ui/icon/522334fa08c76004.png",this.numTxt=new GObj2DMutiText,this.numTxt.LoadAni("tex_文字中_ani"),this.add.addChild(this.numTxt),this.numTxt.scale(.8,.8),this.numTxt.SetScrPos(35,60,1),this.numTxt.SetText("500Z"),this.kuangText=new GObj2DMutiText,this.kuangText.LoadAni("tex_文字小_ani"),this.m_pOreBtn.addChild(this.kuangText),this.kuangText.SetScrPos(29,100,1)},i.addEvent=function(){this.wuList.mouseHandler=Handler.create(this,this.onListDown,null,!1),this.wuList.on("mousedown",this,this.downHandler),this.add.on("click",this,this.onaddClickHandler),this.m_pOreBtn.on("click",this,this.oreClick)},i.CheckBombNeed=function(t,e){var i=NaN,n=NaN;i=1*t/18e3,n=1*e/18e3,i>Math.floor(i)&&(i+=1),n>Math.floor(n)&&(n+=1),this.MutiText(Math.floor(n).toString())},i.MutiText=function(t){var e=DataTable.m_iSelfUser.GetItemNum(18);t?this.kuangText.SetText(e+"/"+t):this.kuangText.SetText(e+"/0")},i.oreClick=function(){var t=this;this.gbottomBtn.m_pLink.OnQuickOver(1,0,Handler.create(this,okcg=function(){t.gbottomBtn.m_pLink.PlayKindEndRetrun("爆炸"),DataTable.m_iSoundTab.OnPlay("爆破"),t.CheckBombNeed(0,t.gbottomBtn.m_pLink.m_nLeftSec)}))},i.downHandler=function(){DisplayTools.scrollBar=this.wuList.scrollBar,this.wuList.array.length<5&&(this.isMouse=!1,this.wuList.scrollBar.stopScroll())},i.onaddClickHandler=function(t){this.gbottomBtn.m_pLink.OnAddQueMax()},i.onListDown=function(t,e){if("mousedown"==t.type&&(this.stage.on("mousemove",this,this.onMove,[e]),this.stage.once("mouseup",this,this.onUp,[e]),this.CheckAll(t.target.dataSource.id,e==this.n),GameMain._ins.m_gameUI.isShow=!1,!(e==this.n||this.number>=9))){this.downID=Laya.__parseInt(this.wuList.getItem(e).id),this.xNum=e;this.wuList.getItem(e);this.ibox=t.target.getChildByName("ibox");var i=t.target.localToGlobal(new Point(this.ibox.x,this.ibox.y)),n=this.baiBox.globalToLocal(i);this.moxing.x=n.x-37,this.moxing.y=n.y-37,this.moxing.dataSource={image:this.ibox.dataSource.image,label:this.ibox.dataSource.label,visible:!0},this.iboxX=this.moxing.x,this.iboxY=this.moxing.y,this.stageY=this.stage.mouseY,this.stageX=this.stage.mouseX,this.mousesY=0,this.wuList.array.length<5&&(this.isMouse=!1,this.ibox.visible=!1,this.moxing.visible=!0)}},i.onUp=function(t,e){if(VehicleTip.getInstance().removeSelf(),Tooltip.getInstance().removeSelf(),this.stage.off("mousemove",this,this.onMove),GameMain._ins.m_gameUI.isShow=!0,!(t==this.n||this.number>=9)){if(this.baiBox.getChildByName("item"+this.number).dataSource={image:""},this.downID=-1,this.moxing.y>=65){var i=Laya.__parseInt(this.ibox.parent.dataSource.id);this.gbottomBtn.m_pLink.OnPut(i),this.upWuList()}this.moxing.scale(1,1),this.moxing.visible=!1,this.ibox&&(this.ibox.scale(1,1),this.ibox.visible=!0,this.ibox=null),this.wuList.array=this.arrManu,this.isMouse=!0,this.ish=!0}},i.onMove=function(t,e){if(Tooltip.getInstance().onTipMove(),VehicleTip.getInstance().onTipMove(),!(t==this.n||this.number>=9)){if(this.isMouse)return this.stageX>this.stage.mouseX+30&&this.isMouse||this.stageX<this.stage.mouseX-30&&this.isMouse?(this.ish=!1,this.moxing.visible=!1,void(this.ibox.visible=!0)):void(this.stageY+10<this.stage.mouseY&&this.ish&&(this.isMouse=!1,this.ibox.visible=!1,this.moxing.visible=!0,this.wuList.scrollBar.stopScroll()));this.wuList.array.length<=4&&this.wuList.scrollBar.stopScroll();var i=this.xArr[this.number];this.valueY=200,this.number>=5&&(this.valueY=300,i=this.xArr[(this.number+1)%5]),this.scaleNum=DisplayTools.getNum(0,this.valueY,1,.2,this.moxing.y);var n=DisplayTools.getNum(65,this.valueY,this.iboxX,i,this.moxing.y);if(this.moxing.scale(this.scaleNum,this.scaleNum),this.stage.mouseY>this.stageY&&this.stage.mouseY>this.mousesY?this.moxing.y>=this.valueY||this.stage.mouseY>this.stageY+this.valueY?this.moxing.y=this.valueY:this.moxing.y+=10:this.stage.mouseY<this.stageY+this.valueY&&this.stage.mouseY<this.mousesY&&(this.moxing.y<=0||this.stage.mouseY<=this.stageY?this.moxing.y=0:this.moxing.y-=10),this.moxing.y>this.iboxY+65){this.moxing.x=n;var s="";if("车间"==this.title.text){var a=DataTable.m_iBuildTab.Get(this.downID)[4];s=GVar.mutiAniDic[a][1].replace(".png","s.png")}else s=DataTable.getSkin(DataTable.m_iItemTab.Get(this.downID)[3]);this.baiBox.getChildByName("item"+this.number).dataSource={image:s}}else this.baiBox.getChildByName("item"+this.number).dataSource={image:""},this.moxing.x=this.iboxX;this.mousesY=this.stage.mouseY}},i.CheckState=function(t){var e=DataTable.m_iMacFormulTab.Get(t);if(null==e)throw new Error("Mark->5-formul not find id="+t);var i=e[5];if(!i||i.length<1)return"tex_素材_单子01";for(var n=0,s=0;s<i.length;s++)if(n=DataTable.m_iSelfUser.GetHaveItemNum(i[s][0]),i[s][1]>n)return"tex_素材_单子02";return"tex_素材_单子01"},i.CheckAll=function(t,e){void 0===e&&(e=!1);var i=new Object,n=DataTable.m_iMacFormulTab.Get(t);if(null==n)throw new Error("Mark->6-formul not find id="+t);var s=n[5],a=TimerTools.conversion(Math.floor(60*n[4]*this.gbottomBtn.m_pLink.GetQuickAgv()*DataTable.m_iSelfUser.GetNewerQuickAgv(2)));if(i.label1=n[1],"车间"==this.title.text){var r=DataTable.m_iBuildTab.Get(t)[8];return VehicleTip.getInstance().fillInfo([n[1],a,s,r]),DisplayTools.addTarget(VehicleTip.getInstance(),GameMain._ins.m_gameUI.incontainer,{x:Laya.stage.mouseX,y:Laya.stage.mouseY-Tooltip.getInstance().height}),void VehicleTip.getInstance().onTipMove()}if(!s||s.length<1)return i.label3={text:a,y:s&&s.length>1?125:66},Tooltip.getInstance().init(128,126),Tooltip.getInstance().TipContent=i,DisplayTools.addTarget(Tooltip.getInstance(),GameMain._ins.m_gameUI.incontainer,{x:Laya.stage.mouseX,y:Laya.stage.mouseY-Tooltip.getInstance().height}),void Tooltip.getInstance().onTipMove();i.label3={text:a,y:s&&s.length>1?125:86};for(var h=0;4>h;h++)if(h<s.length){var o=DataTable.getSkin(DataTable.m_iItemTab.Get(s[h][0])[3]),l=DataTable.m_iSelfUser.GetHaveItemNum(s[h][0]);1==h&&2==s.length?i.item2={visible:!0,icon:o,have:{text:l+"",color:l<s[h][1]?"#ff0000":"#ffffff"},need:"/"+s[h][1]}:i["item"+h]={visible:!0,icon:o,have:{text:l+"",color:l<s[h][1]?"#ff0000":"#ffffff"},need:"/"+s[h][1]}}Tooltip.getInstance().init(),s.length>=2&&(Tooltip.getInstance().bg.height=176);var u=n[1].length<=2?123:32*n[1].length*1.8;if(s.length>=3&&(u=255),u>255&&(u=255),Tooltip.getInstance().bg.width=u,n[7]>1&&(i.label1=n[1]+"x"+n[7]),e){var c=5;n[1].length>3&&(c+=n[1].length-2),Tooltip.getInstance().bg.height=95,Tooltip.getInstance().bg.width=25*c,i={label1:n[1],label2:n[3]+"级解锁"}}Tooltip.getInstance().TipContent=i,DisplayTools.addTarget(Tooltip.getInstance(),GameMain._ins.m_gameUI.incontainer,{x:Laya.stage.mouseX,y:Laya.stage.mouseY-Tooltip.getInstance().height}),Tooltip.getInstance().onTipMove()},__getset(0,i,"bottomBtn",null,function(t){this.gbottomBtn=t}),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(manufactureUI),MyHeadPage=function(t){function e(){if(this.visu=null,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.figureInfoPanel.MyHeadPage",t);var i=e.prototype;return i.init=function(){SysID.FRD_ON("visuchged",this,this.OnVisuChged),this.image_paizhao.skin=DataTable.getSkin("tex_按钮_拍照"),this.image_bendi.skin=DataTable.getSkin("tex_按钮_选择图片"),this.image_paizhao.disabled=!0,this.image_bendi.disabled=!0,this.list_.scrollBar.hide=!0,this.list_.scrollBar.elasticDistance=150,this.list_.mouseHandler=new Handler(this,this.onListMouseHandler);for(var t=[],e=DataTable.m_iSysHead.GetAll(),i=1;i<e.length;i++)t.push({id:e[i][0],img:DataTable.getSkin(e[i][1])});this.list_.array=t,this.update()},i.onListMouseHandler=function(t,e){if("click"==t.type&&this.list_.array[e]){var i=this.list_.array[e],n=DataTable.m_iSelfFrd.GetShortInfo();n[2]=i.id,n.visuver=0,this.OnVisuChged(n)}},i.OnVisuChged=function(t){this.displayInStage&&t&&FrdUserInfo.isstruct(t)&&(FigureInfo.getInstance().m_vVisu[2]=t[2],FigureInfo.getInstance().m_vVisu[3]=t[3],this.update(t))},i.update=function(t){this.visu=t?t:DataTable.m_iSelfFrd.GetShortInfo(),this.img_touxiang.skin=DataTable.getSkin("tex_face"+this.visu[2])},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(MyHeadPageUI),MyLabelPage=function(t){function e(){if(e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.figureInfoPanel.MyLabelPage",t);var i=e.prototype;return i.init=function(){this.img_inputBj.skin=DataTable.getSkin("tex_素材_人名字输入框"),this.m_pEdit.color="#ffffff",this.m_pEdit.on("input",this,this.OnPrePageHide),this.on("removed",this,this._$7_onRemoved)},i._$7_onRemoved=function(){var t=DataTable.m_iSelfFrd.GetLabel();this.m_pEdit.text!=t&&FigureInfo.getInstance().Save()},i.OnPrePageHide=function(){var t=this.m_pEdit.text;FigureInfo.getInstance().m_sLabel=t},i.OnCheckChgNick=function(){},i.update=function(){this.m_pEdit.text=FigureInfo.getInstance().m_sLabel},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(MyLabelPageUI),MyNickPage=function(t){function e(){if(this.aniText=null,this.img=null,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.figureInfoPanel.MyNickPage",t);var i=e.prototype;return i.init=function(){this.img_inputBj.skin=DataTable.getSkin("tex_素材_人名字输入框"),this.btn_.skin=DataTable.getSkin("btn_结束地块编辑"),this.m_pInputNick.on("input",this,this.CheckChar),this.btn_.on("click",this,this.OnChgNick),this.aniText=this.aniText||new GObj2DMutiText,this.aniText.LoadAni("tex_文字大_ani")},i.GetInput=function(){var t;return t=this.m_pInputNick.text},i.OnChgNick=function(){var t,e=this.GetInput();if(e.indexOf("*")>=0)return void(this.m_pFilterInfo.visible=!0);if(e.indexOf(" ")>=0)return void(this.m_pFilterInfo.visible=!0);if(e.length<1)return t=ErrorDef.ERR_MESSAGE(201),t=t.replace("{d}","1"),void gSys.GameMsg(t,!1);if(e.length>16)return t=ErrorDef.ERR_MESSAGE(202),t=t.replace("{d}","16"),void gSys.GameMsg(t,!1);var i=FigureInfo.getInstance().m_vVisu[1];StringOp.Compare(i,e)||DataTable.m_iSelfUser.OnChgNick(Handler.create(this,function(t){t&&(FigureInfo.getInstance().m_vVisu[1]=e,FigureInfo.getInstance().Save(),FigureInfo.getInstance().onClick())}),[Laya.stage.width/2,Laya.stage.height/2])},i.CheckChar=function(){var t=this.m_pInputNick.text,e=t.indexOf("*")<0&&t.indexOf(" ")<0;this.btn_.disabled=!e,this.m_pFilterInfo.visible=!e},i.Refresh=function(){var t,e=this,i=DataTable.m_iSelfUser.GetChgNickNum();i=2-i,i>0?(t="(免费改名剩余次数：%d次)",t=t.replace("%d",i+""),this.m_pMem.text=t,DisplayTools.onCenter(this.m_pMem,new Sprite,this.box_num)):(t="改名费用：",this.m_pMem.text=t,this.aniText.SetOkHandler(Handler.create(this,function(){e.box_num.addChild(e.aniText),DisplayTools.onCenter(null,null,e.box_num,[e.m_pMem,e.aniText])})),this.aniText.SetText("100Z"),this.aniText.y=15)},i.update=function(){this.m_pInputNick.text=DataTable.m_iSelfFrd.GetNick(),this.CheckChar(),this.Refresh()},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(MyNickPageUI),MyPraisePage=function(t){function e(){if(e.__super.call(this),this.mutiText0=new GObj2DMutiText,this.mutiText1=new GObj2DMutiText,this.mutiText2=new GObj2DMutiText,e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.figureInfoPanel.MyPraisePage",t);var i=e.prototype;return i.init=function(){this.img_hua0.skin=DataTable.getSkin("tex_玫瑰_001"),this.img_hua1.skin=DataTable.getSkin("tex_玫瑰_001"),this.img_hua2.skin=DataTable.getSkin("tex_玫瑰_001"),this.mutiText0.LoadAni("tex_文字大_ani"),this.mutiText1.LoadAni("tex_文字大_ani"),this.mutiText2.LoadAni("tex_文字大_ani"),this.list_.renderHandler=new Handler(this,this.onRenderHandler)},i.onRenderHandler=function(t,e){if(t.dataSource){var i=t.dataSource.uid;SysID.FRD_GETUSERINFO(i,null,null,Handler.create(this,function(e){var i=t.getChildByName("img"),n=t.getChildByName("nick");i.skin=DataTable.getSkin("tex_face"+e[2]),n.text=e[1],DisplayTools.onCenter(n,new Sprite,t)}))}},i.update=function(){for(var t=DataTable.m_iSelfUser.GetPraiseData(),e=0,i=0,n=0;n<t[7].length;n++)i=t[7][n][1],e+=t[7][n][3];this.mutiText0.SetScrPos(this.img_hua0.x-5,57,2),this.mutiText0.SetText(i+""),this.addChild(this.mutiText0),this.mutiText1.SetScrPos(this.img_hua1.x-5,135,2),this.mutiText1.SetText(t[3]+""),this.addChild(this.mutiText1),this.mutiText2.SetScrPos(this.img_hua2.x-5,213,2),this.mutiText2.SetText(e+""),this.addChild(this.mutiText2);var s=[];if(t[5]&&t[5].length>0)for(n=t[5].length-1;n>=0;n--)s.push({uid:t[5][n]});this.list_.array=s},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(MyPraisePageUI),MyUVPage=function(t){function e(){if(e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.figureInfoPanel.MyUVPage",t);var i=e.prototype;return i.init=function(){this.list_.renderHandler=new Handler(this,this.onRenderHandler)},i.onRenderHandler=function(t,e){if(t.dataSource){var i=t.dataSource.uid;SysID.FRD_GETUSERINFO(i,null,null,Handler.create(this,function(e){var i=t.getChildByName("img"),n=t.getChildByName("nick");i.skin=DataTable.getSkin("tex_face"+e[2]),n.text=e[1],DisplayTools.onCenter(n,new Sprite,t)}))}},i.update=function(){var t=this;DataTable.m_iSelfUser.GetRealUserVisit(Handler.create(this,function(e){var i=DataTable.m_iSelfUser.GetSvrLocalTime();i=DateOp.SetDate(i,i.getFullYear(),i.getMonth(),i.getDate()),e[0]=DateOp.SetDateStr(e[0]),e[0]=DateOp.SetDate(e[0],e[0].getFullYear(),e[0].getMonth(),e[0].getDate());var n=DateOp.SubDateDay(i,e[0]),s=0;for(s=0;7>s;s++)if(0==s?this["item"+s].text="今日":this["item"+s].text=s+"天前",n>s)this["num"+s].text="0";else{var a=e[2][s-n];this["num"+s].text=a?a:"0"}e[3]=e[3]||[];var r=Util.Clamp(e[3].length,0,7);for(s=0;r>s;s++)FriendDef.IsPlayer(e[3][s])&&n++;n=Util.Clamp(n,0,5);var h=[];if(n>0)for(s=0;r>s&&(!FriendDef.IsPlayer(e[3][s])||(h.push({uid:e[3][s]}),n--,0!=n));s++);t.list_.array=h}))},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(MyUVPageUI),FrdHead=function(t){function e(){this._clickHandler=null,this.headEvalue=null,this.headClick=null,this.m_nUid=0,this.m_sNick="",this.m_sHeadImgResName="",this._kind=-1,e.__super.call(this);var t=this;this.img_touxiang.on("click",this,this.onClick11),this.headEvalue=new i,this.headEvalue.SetOkHandler(Handler.create(this,___=function(){t.headEvalue.SetScrPos(t.width/2-16,t.height-15,1),t.headEvalue.scale(1.6,1.6),t.addChild(t.headEvalue)})),this.headEvalue.load()}var i;__class(e,"display.mainIcon.friendInfoPanel.FrdHead",t);var n=e.prototype;return n.ModifyMenu=function(t){this._kind=t},n.onClick11=function(){if(this._clickHandler&&this._clickHandler.run(),!this._clickHandler){this.headClick||(this.headClick=new HeadClick),this.headClick.ModifyMenu(this._kind);var t=new Point(Laya.stage.mouseX,Laya.stage.mouseY);this.headClick.onShow(t,this.m_nUid,this.m_sNick,this.m_sHeadImgResName)}},n.initInfo=function(t){var e=[0,"",0,0];FriendDef.IsUncleJamie(t)?(e[0]=t,e[1]="杰米大叔",this.SetInfo(e)):SysID.FRD_GETUSERINFO(t,null,null,Handler.create(this,this.SetInfo))},n.setEvalue=function(t){return FriendDef.IsUncleJamie(this.m_nUid)?void 0:0>t?void(this.headEvalue.visible=!1):void this.headEvalue.Set(t)},n.SetInfo=function(t){this.SetVisu(t[2],t[0],t[3],t[1])},n.SetVisu=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=""),this.m_nUid=e,this.headEvalue.setUid(e);Math.round(t/1e3);t=FriendDef.GETVISUNO(t),this.m_sHeadImgResName="",this.m_sNick=n,FriendDef.IsUncleJamie(e)?this.img_.skin=DataTable.getSkin("DEFUSER_NPC"):(this.img_.skin="friendPanel/52d63a79b2606004.png",this.img_touxiang.skin=DataTable.getSkin("tex_face"+t))},__getset(0,n,"clickHandler",function(){return this._clickHandler},function(t){this._clickHandler=t}),e.__init$=function(){i=function(t){function e(){this.m_nUid=0,e.__super.call(this),SysID.FRD_ON("frdgamechged",this,this.Refresh)}__class(e,"",t);var i=e.prototype;return i.load=function(){this.LoadAni("ani_frd_评价符号")},i.setUid=function(t){this.m_nUid=t},i.Set=function(t){this.SetText(EvaLevel.GetLevelStr(t))},i.Refresh=function(t,e){t==this.m_nUid&&this.Set(e[3])},e}(GObj2DMutiText)},e}(FrdHeadUI),FrdItem=function(t){function e(){this.aniText=null,this._onClickH=null,this.m_nUid=0,e.__super.call(this),this.img_Yaoqing.on("click",this,this.OnShareToFrd),this.btn_Add.on("click",this,this.OnAddFrd),this.on("click",this,this.onClickH),this.head.img_touxiang.on("click",this,this.onTouxiangClick)}__class(e,"display.mainIcon.friendInfoPanel.FrdItem",t);var i=e.prototype;return i.onTouxiangClick=function(){4==FriendPanel.getInstance().GetCurIndex()&&(DataTable.m_iSelfFrd.IsFriend(this.m_nUid)||(this.head.ModifyMenu(2|this.head._kind),this.head.onClick11()))},i.onClickH=function(){this._onClickH&&this._onClickH.run()},i.OnAddFrdView=function(){DataTable.m_iSoundTab.playButton(),MainIcon.getInstance().onAddFirendView()},i.OnAddFrd=function(){DataTable.m_iSoundTab.playButton(),this.btn_Add.disabled=!0,DataTable.m_iFriendBar.AddFollower(Handler.create(this,___=function(){GFlyItemIcon.FlyText("添加好友成功","#00ff00")}),this.m_nUid)},i.OnShareToFrd=function(){DataTable.m_iSoundTab.playButton(),Frd_Apply.getInstance().Index=0,Frd_Apply.getInstance().myPopup(!0)},i.updataGuanZhu=function(t){this.img_Yaoqing.visible=!1,this.label_wait.visible=!1,this.box_exp.visible=!1,this.img_help.visible=!1,this.btn_Add.visible=!1,this.box_frd.visible=!0,this.box_shang.visible=!0,this.head.SetInfo(t),this.label_name.text=t[1],this.btn_Add.visible||this.label_wait.visible?this.label_name.y=157:this.label_name.y=172,DisplayTools.onAutoSizeX(this.label_name,this,!0)},i.updataThis=function(t){if(this.m_nUid=t[0],this.btn_Add.disabled=!1,this.box_shang.visible=!0,this.box_frd.visible=!0,this.img_help.visible=!1,this.img_Yaoqing.visible=!1,-100==t[0])return this.box_frd.visible=!1,this.img_Yaoqing.visible=!0,void(DataTable.m_iSelfUser.IsHaveOkInviteQuest()&&(this.img_help.visible=!0));if(-101==t[0])return this.box_shang.visible=!1,this.label_wait.visible=!1,void(this._onClickH=new Handler(this,this.OnAddFrdView));switch(this.box_exp.visible=!0,FriendDef.IsUncleJamie(this.m_nUid)&&(this.box_exp.visible=!1),this.btn_Add.visible=!1,this.label_wait.visible=!1,t[1]){case 0:this.btn_Add.visible=!0;break;case 1:this.label_wait.visible=!0}this.label_name.text=t[2],this.aniText||(this.aniText=new GObj2DMutiText,this.aniText.SetOkHandler(new Handler(this,this._A_,[t])),this.aniText.LoadAni("tex_文字小_ani")),this.aniText.SetText(t[5][0]+""),this.img_help.visible=!0,t[6]<1&&(this.img_help.visible=!1),this.SetModiStyle(FriendPanel.getInstance().GetCurIndex()),this.head.initInfo(t[0]),this.head.setEvalue(t[5][3]),this.btn_Add.visible||this.label_wait.visible?this.label_name.y=157:this.label_name.y=172,DisplayTools.onAutoSizeX(this.label_name,this,!0)},i._A_=function(t){this.aniText.SetScrPos(this.box_exp.width/2+3,this.box_exp.height-25,1),this.box_exp.addChild(this.aniText)},i.SetModiStyle=function(t){switch(t){case-1:this.head.ModifyMenu(128);break;case 0:this.head.ModifyMenu(65);break;case 1:this.head.ModifyMenu(93);break;case 2:this.head.ModifyMenu(69);break;case 3:this.head.ModifyMenu(71);break;case 4:this.head.ModifyMenu(67)}},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){return this._onClickH&&(this._onClickH.clear(),this._onClickH=null),t&&t instanceof Array&&0!=t.length?void this.updataThis(t):void("number"==typeof t&&Math.floor(t)==t&&SysID.FRD_GETUSERINFO(t,null,null,Handler.create(this,this.updataGuanZhu)))}),e.a_nameY=157,e.b_nameY=172,e}(frdItemUI),frdS_item=function(t){function e(){e.__super.call(this)}__class(e,"display.mainIcon.friendInfoPanel.frdsearch.frdS_item",t);var i=e.prototype;return i.init=function(t){this.head.ModifyMenu(11),this.head.SetInfo(FriendBase.CastShortInfo(t)),this.label_name.text=t[2]},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&t instanceof Array&&0!=t.length&&this.init(t)}),e}(frdS_itemUI),FrdS_view=function(t){function e(){e.__super.call(this),this.list_.scrollBar.hide=!0,this.list_.scrollBar.elasticDistance=200,this.list_.scrollBar.elasticBackTime=50,this.list_.mouseEnabled=this.list_.content.mouseEnabled=!0}__class(e,"display.mainIcon.friendInfoPanel.frdsearch.FrdS_view",t);var i=e.prototype;return i.init=function(){},i.updata=function(t){this.list_.array=t},e}(frdS_viewUI),Frd_ApplyItem=function(t){function e(){this.aniText=null,this.m_nQuestID=0,this.m_nHave=0,this.m_nNeed=0,this.m_szReward=[],e.__super.call(this),this.img_bj0.skin=DataTable.getSkin("uiimg_分享底板2"),this.img_yilingqu.skin=DataTable.getSkin("uiimg_已领奖"),this.list_.renderHandler=new Handler(this,this.onListRender),this.btn_lingqu.clickHandler=new Handler(this,this.OnGet)}__class(e,"display.mainIcon.friendInfoPanel.Frd_ApplyItem",t);var i=e.prototype;return i.SetData=function(t,e,i,n,s,a){this.m_nQuestID=t,this.m_nHave=i,this.m_nNeed=n,this.m_szReward.length=0;var r="邀请%1位小伙伴升到%2级奖励";r=r.replace("%1",""+n),r=r.replace("%2",""+e),this.label.text=r;for(var h,o=[],l=0;l<a.length;l++)h={},h.arr=[a[l][0],a[l][1]],o.push(h);return this.list_.array=o,2==s?void this.SetState(2):n>i?void this.SetState(0):void this.SetState(1)},i.SetState=function(t){switch(t){case 0:this.btn_lingqu.visible=!1,this.img_yilingqu.visible=!1,this.aniText.SetText(""+this.m_nHave+"/"+this.m_nNeed),this.img_bj.visible=!0,this.aniText.visible=!0;break;case 1:this.img_yilingqu.visible=!1,this.img_bj.visible=!1,this.aniText.visible=!1,this.btn_lingqu.visible=!0;break;default:this.img_bj.visible=!1,this.aniText.visible=!1,this.btn_lingqu.visible=!1,this.img_yilingqu.visible=!0}},i.OnGet=function(){var t=this;DataTable.m_iSoundTab.playButton(),this.btn_lingqu.disabled=!1;var e;e=[[Laya.stage.width/2,Laya.stage.height/2]],DataTable.m_iSelfUser.HandInQuest(this.m_nQuestID,e,null,Handler.create(this,function(e){return e?void t.SetState(2):void(t.btn_lingqu.disabled=!0)}))},i.onListRender=function(t,e){if(t.dataSource){var i=t.dataSource.arr[0],n=t.dataSource.arr[1],s=t.getChildByName("img"),a=t.getChildByName("ani");if(SysID.IsDTJZID(i)){s.visible=!1,a||(a=new Muti2DAniIns,a.name="ani"),a.visible=!0,a.SetOkHandler(Handler.create(this,_A_D=function(){var e=a.GetRect(),i=0,n=0;if(i=e.right-e.left,n=e.bottom-e.top,!(1>i||1>n)){var r=s.width/i,h=s.height/n;r>h&&(r=h),r>1&&(r=1),a.scale(r,r),a.x=(s.width-i*r)/2-e.left*r,a.y=(s.height-n*r)/2-e.top*r,t.addChild(a)}}));var r=DataTable.m_iBuildTab.Get(i);a.createInsFromName(r[4])}else if(s.visible=!0,a&&(a.visible=!1),i){var h=DataTable.m_iItemTab.Get(i);if(null==h||0==h.length)return void gSys.Err("item not find id="+i);h[3].length>0&&(SysID.IsJZPFID(i)||(s.skin=DataTable.getSkin(h[3])))}else s.skin=DataTable.getSkin("tex_图标_未知物品");var o=t.getChildByName("aniTe");o||(o=new GObj2DMutiText,o.name="aniTe",o.LoadAni("tex_文字小_ani"),o.SetScrPos(s.x+s.width/2+5,s.y+s.height+15,1),o.scale(.6,.6),t.addChild(o)),o.SetText(n+"")}},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&t instanceof Array&&6==t.length&&(this.aniText||(this.aniText=new GObj2DMutiText,this.aniText.LoadAni("tex_文字小_ani"),this.aniText.SetScrPos(this.img_bj.x+this.img_bj.width/2,this.img_bj.y+this.img_bj.height-10,1),this.addChild(this.aniText)),this.SetData(t[0],t[1],t[2],t[3],t[4],t[5]))}),e}(Frd_ApplyItemUI),Tooltip=function(t){function e(t){this.strlen=null,this.cdTimeText=null,this.textArr=[],void 0===t&&(t="reuse/bg.png"),e.__super.call(this),this.initText()}__class(e,"display.kit.Tooltip",t);var i=e.prototype;return i.initText=function(){for(var t=0;4>t;t++){var e=new GObj2DMutiText;e.LoadAni("tex_文字小_ani"),this.boxs.getChildByName("item"+t).addChild(e),e.SetScrPos(30,28,0),e.SetText("20/10"),this.textArr.push(e)}this.cdTimeText=new GObj2DMutiText,this.cdTimeText.LoadAni("tex_文字小_ani"),this.boxs.getChildByName("label3").addChild(this.cdTimeText),this.cdTimeText.SetScrPos(0,20,0),this.cdTimeText.SetText("30M")},i.init=function(t,e){void 0===t&&(t=128),void 0===e&&(e=156),this.cdTimeText.SetText(""),this.boxs.dataSource={image:{width:t,height:e},label1:{text:"",fontSize:32,x:7,y:10},label2:{text:"",x:7,y:51},label3:{text:"",x:7,y:86},item0:{visible:!1},item1:{visible:!1},item2:{visible:!1},item3:{visible:!1}}},i.upWidth=function(t){void 0===t&&(t=!0);var e,i=this.boxs.getChildByName("label2").textField,n=this.boxs.getChildByName("label1").textField;e=i.textWidth>n.textWidth?i:n,(e.textHeight>30||e.textWidth>=100||""==this.strlen)&&(this.boxs.dataSource={image:{width:e.textWidth+30,height:e.textHeight+70}})},i.onTipMove=function(){this.x=Laya.stage.mouseX-this.bg.width/2,this.y=Laya.stage.mouseY-this.bg.height,this.x<=0&&(this.x=0),this.y<=0&&(this.y=0,this.x=Laya.stage.mouseX-this.bg.width),this.y<=0&&this.x<=0&&(this.y=Laya.stage.mouseY+50,this.x=Laya.stage.mouseX-this.bg.width/2)},__getset(0,i,"TipContent",null,function(t){var e=new Object;DisplayTools.setObject(e,t),e.label3?"object"==typeof e.label3?(this.cdTimeText.SetText(e.label3.text),this.strlen=e.label3.text,e.label3.text=""):(this.cdTimeText.SetText(e.label3),this.strlen=e.label3,e.label3=""):this.cdTimeText.SetText("");for(var i=0;4>i;i++)e["item"+i]&&e["item"+i].visible&&("object"==typeof e["item"+i].have?this.textArr[i].SetText(e["item"+i].have.text+e["item"+i].need):this.textArr[i].SetText(e["item"+i].have+e["item"+i].need));this.boxs.dataSource=e,t=null,e=null}),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(toolTipUI),GroupSelect=function(t){function e(){if(this.hh=0,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.on("removed",this,this.onRemoveFun),Laya.stage.on("mousedown",this,this.onThisMouseDown)}__class(e,"display.mainIcon.friendInfoPanel.GroupSelect",t);var i=e.prototype;return i.onRemoveFun=function(){for(var t=0,e=7;e>t;t++){var i=this.getChildByName("item0");i&&(i.clickHandler=null)}},i.onThisMouseDown=function(t){-1==t.target.name.indexOf("item")&&this.displayInStage&&this.parent&&this.removeSelf()},i.init=function(t){this.hh=15;for(var e=0;7>e;e++){var i=this.getChildByName("item"+e);i&&(i.visible=!1,e>=t.length||(this.hh+=64,i.visible=!0,i.label=t[e][1],i.clickHandler=new Handler(this,this.onbtnClick,[t[e][0]])))}this.hh+=15,this.image_auto.height=this.hh,this.height=this.hh},i.onbtnClick=function(t){t.run(),this.removeSelf()},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(gropSelectUI),HeadClick=function(t){function e(){this.m_nMenu=0,this.imgArr=[],this.m_sHeadImgResName_="",this.OnSinaInviteHand=null,this.point=null,e.__super.call(this),this.on("removed",this,this.onRemoveFun),Laya.stage.on("mousedown",this,this.onThisMouseDown),this.m_nMenu=11,this.box_Tip.visible=!1,this.box_grop.visible=!1}__class(e,"display.mainIcon.friendInfoPanel.HeadClick",t);var i=e.prototype;return i.onThisMouseDown=function(t){-1==t.target.name.indexOf("item")&&"HeadClickItem"!=t.target.name&&this.displayInStage&&this.removeSelf()},i.onRemoveFun=function(){GLeadManager.UnRegArrowInterface("好友界面_拜访");for(var t=0,i=this.imgArr.length;i>t;t++)this.imgArr[t].offAll("click"),this.imgArr[t].removeSelf(),e.imageArr.push(this.imgArr[t]);this.imgArr=null},i.MENU2_ITEM=function(t,i,n,s,a,r){void 0===a&&(a=128),void 0===r&&(r=64);var h=e.imageArr.length?e.imageArr.pop():new Image2;return h.name="HeadClickItem",h.skin=t,h.on("mousedown",this,this.onMouseDown,[h]),h.on("click",i,n,[s]),h.size(a,r),h.pos(17,50+h.height*this.imgArr.length),this.box_Tip.addChild(h),this.imgArr.push(h),h},i.onMouseDown=function(t){TweenTool.getInstance().buttonTween(t)},i._RES=function(t){return DataTable.getSkin(t)},i.OnMenuSeePhoto=function(t){this.m_sHeadImgResName_.length<1},i.OnMenuVisit=function(t){this.removeSelf(),GameMain._ins.closeAllView(),MainIcon.getInstance().goOtherHome(t,null)},i.OnMenuAddFollower=function(t){this.removeSelf(),DataTable.m_iFriendBar.AddFollower(null,t)},i.OnMenuDelFollower=function(t){this.removeSelf(),DataTable.m_iFriendBar.DelFollower(t)},i.OnMenuOnOutBox=function(t){this.removeSelf(),GameMain._ins.closeAllView(),DataTable.m_iFriendBar.OnOutBox(t)},i.OnMenuEditFriendGroup=function(t){this.box_Tip.visible=!1,Laya.timer.once(100,this,this.SecLvEditTask,[t])},i.SecLvEditTask=function(t){var e=[],i=0;if(e=DataTable.m_iFriendBar.GetFriend(t),FriendInfo.isstruct(e)){this.box_grop.visible=!0;for(var n,s=0;s<GFriendBar.s_vDefGroup.length-2;s++)if(!(GFriendBar.s_vDefGroup[s][0]<0)&&(i=e[1]==GFriendBar.s_vDefGroup[s][0]?1:0,n=this.box_grop.getChildByName("item"+s),n&&(n.label=GFriendBar.s_vDefGroup[s][1],n.on("click",this,this.OnModiFrdGroup,[t,GFriendBar.s_vDefGroup[s][0]]),i))){var a=this.box_grop.getChildByName("duigou");a.skin=DataTable.getSkin("tex_素材_对勾"),a.y=n.y+20}n=this.box_grop.getChildByName("item6"),n.label="修改分组",n.on("click",this,this.OnMenuEditFriendGroupName,[t]),this.updataPos(this.box_grop)}},i.OnModiFrdGroup=function(t,e){this.removeSelf(),DataTable.m_iFriendBar.MoveToGroup(t,e)},i.OnMenuEditFriendGroupName=function(t){this.removeSelf(),GEditFriendDlg.getInstance().Init(t),GEditFriendDlg.getInstance().myPopup(!1);
},i.OnMenuCollapseAllGroup=function(t){this.removeSelf(),console.log("没找到脚本中 关于 OnCollapseAllGroup 的处理函数")},i.OnSinaInvite=function(){this.OnSinaInviteHand&&this.OnSinaInviteHand.run()},i.OnReportUser=function(){this.removeSelf(),console.log("没找到脚本中 关于 聊天 举报的处理函数")},i.onShow=function(t,e,i,n){var s=this;if(this.box_grop.visible=!1,this.m_sHeadImgResName_=n,this.imgArr=[],e==DataTable.m_iSelfUser.GetUID())return void(FriendDef.HAS_FLAG(this.m_nMenu,64)&&n.length>0&&this.MENU2_ITEM(this._RES("uiimg_查看大图"),this,this.OnMenuSeePhoto,e,128,64));if(FriendDef.IsUncleJamie(e))return void this.OnMenuVisit(e);var a=1;if(DataTable.m_iFriendBar&&(SysID.FRF_HAS("selectplayer")?(SysID.FRD_EMIT("selectplayer",e),a=0):a=1),a&&0!=this.m_nMenu){if(this.label_name.text="",FriendDef.IsPlayer(e)?SysID.FRD_GETUSERINFO(e,null,null,Handler.create(this,_nameFun=function(t){s.label_name.text=t[1]})):i.length>0&&(this.label_name.text=i),FriendDef.HAS_FLAG(this.m_nMenu,1)){var r=this.MENU2_ITEM(this._RES("tex_按钮_拜访3"),this,this.OnMenuVisit,e,128,64);GLeadManager.RegArrowInterface(r,"好友界面_拜访",0,0,r.height/2)}if(FriendDef.HAS_FLAG(this.m_nMenu,64)&&n.length>0&&this.MENU2_ITEM(this._RES("uiimg_查看大图"),this,this.OnMenuSeePhoto,e,128,64),FriendDef.IsPlayer(e)){var h=DataTable.m_iSelfFrd.GetFriendGroup(e);FriendDef.ISFANS(h)?((FriendDef.HAS_FLAG(this.m_nMenu,2)||FriendDef.HAS_FLAG(this.m_nMenu,4))&&this.MENU2_ITEM(this._RES("tex_按钮_加好友3"),this,this.OnMenuAddFollower,e,128,64),FriendDef.HAS_FLAG(this.m_nMenu,4)&&this.MENU2_ITEM(this._RES("tex_按钮_删除好友3"),this,this.OnMenuDelFollower,e,128,64)):(FriendDef.ISFRIEND(h)&&(FriendDef.HAS_FLAG(this.m_nMenu,8)&&this.MENU2_ITEM(this._RES("tex_按钮_发消息3"),this,this.OnMenuOnOutBox,e,128,64),FriendDef.HAS_FLAG(this.m_nMenu,16)&&this.MENU2_ITEM(this._RES("uiimg_移至分组"),this,this.OnMenuEditFriendGroup,e,128,64)),(FriendDef.ISFRIEND(h)||FriendDef.ISFOLLOWER(h))&&FriendDef.HAS_FLAG(this.m_nMenu,4)&&this.MENU2_ITEM(this._RES("tex_按钮_删除好友3"),this,this.OnMenuDelFollower,e,128,64),FriendDef.ISFRIEND(h)||FriendDef.ISFOLLOWER(h)||FriendDef.HAS_FLAG(this.m_nMenu,2)&&this.MENU2_ITEM(this._RES("tex_按钮_加好友3"),this,this.OnMenuAddFollower,e,128,64))}FriendDef.HAS_FLAG(this.m_nMenu,128)&&this.MENU2_ITEM(this._RES("tex_按钮_加好友3"),this,this.OnSinaInvite,e,128,64),FriendDef.HAS_FLAG(this.m_nMenu,32)&&this.MENU2_ITEM(this._RES("tex_按钮_收起分组"),this,this.OnMenuCollapseAllGroup,e,128,64)}FriendDef.HAS_FLAG(this.m_nMenu,256)?(this.btn_jubao.y=50+64*this.imgArr.length,this.btn_jubao.on("click",this,this.OnReportUser),this.btn_jubao.visible=!0):this.btn_jubao.visible=!1,this.btn_jubao.visible?this.bj.height=50+64*(this.imgArr.length+1)+20:this.bj.height=50+64*this.imgArr.length+20,this.box_Tip.visible=!0,this.point=t,this.updataPos(this.box_Tip),Laya.stage.addChild(this)},i.updataPos=function(t){this.jiantou.y=(t.displayHeight-this.jiantou.displayHeight)/2;var e=0,i=0;e=this.point.x,i=this.point.y-t.displayHeight/2,this.jiantou.visible=!0,this.point.x+this.displayWidth>Laya.stage.width&&(e=Laya.stage.width-this.displayWidth,this.jiantou.visible=!1),this.point.y-t.displayHeight/2<0&&(this.jiantou.y=this.jiantou.y+i,i=0),this.point.y+t.displayHeight/2>Laya.stage.height&&(this.jiantou.y=this.jiantou.y+(this.point.y+t.displayHeight/2-Laya.stage.height),i=Laya.stage.height-t.displayHeight),this.pos(e,i)},i.ModifyMenu=function(t){0>t||(this.m_nMenu=t)},e.imageArr=[],e}(HeadClickUI),Head=function(t){function e(){this._clickHandler=null,this.m_nUid=0,this.m_sHeadImgResName=null,this.m_sNick="",this.headClick=null,this._kind=-1,e.__super.call(this),this.init()}__class(e,"display.mainIcon.Head",t);var i=e.prototype;return i.init=function(){this.img_touxiang.on("click",this,this.onTouXiangClick)},i.onTouXiangClick=function(){if(this._clickHandler&&this._clickHandler.run(),!this._clickHandler){this.headClick||(this.headClick=new HeadClick),this.headClick.ModifyMenu(this._kind);var t=new Point(Laya.stage.mouseX,Laya.stage.mouseY);this.headClick.onShow(t,this.m_nUid,this.m_sNick,this.m_sHeadImgResName)}},i.ModifyMenu=function(t){this._kind=t},i.initInfo=function(t){var e=[0,"",0,0];FriendDef.IsUncleJamie(t)?(e[0]=t,e[1]="杰米大叔",this.SetInfo(e)):SysID.FRD_GETUSERINFO(t,null,null,Handler.create(this,this.SetInfo))},i.SetInfo=function(t){this.SetVisu(t[2],t[0],t[3],t[1])},i.SetVisu=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=""),this.m_nUid=e;Math.round(t/1e3);t=FriendDef.GETVISUNO(t),this.m_sHeadImgResName="",this.m_sNick=n,FriendDef.IsUncleJamie(e)?this.img_.skin=DataTable.getSkin("DEFUSER_NPC"):(this.img_.skin="reuse/528077F963A9A01F.png",this.img_touxiang.skin=DataTable.getSkin("tex_face"+t))},__getset(0,i,"clickHandler",function(){return this._clickHandler},function(t){this._clickHandler=t}),e}(HeadUI),MainIcon=function(t){function e(){if(this.spritePanel=null,this.secContainer=null,this.sec_fsArch=null,this.sec_questinfo=null,this.sec_fsVipQuick=null,this.sec_ranks=null,this.firstFlush=null,this.vipI=null,this.gift=null,this.repaySd=null,this.activity_m_pTip=null,this.activity_onlineAni=null,this.activity_timeTextAni=null,this.temp=1,this.market_m_pTip=null,this.time1=0,this.lv_aniText0=null,this.lv_aniText1=null,this.LC_aniText=null,this.CK_aniText=null,this.JB_aniText=null,this.jb_aniText=null,this.zs_aniText=null,this.sd_aniText=null,this.isInitAniText=!1,this.temp_H=0,this.friend_m_pTip=null,this.box_hide=null,this._isShowAll=!0,this.tempBottom=-1,e.instance&&alert("MainIcon err"),console.log("new MainIcon"),e.instance=this,e.__super.call(this),e.isboo)throw new Error("请用 getInstance()来获取实例");this.once("added",this,this.onAddedHandler),this.gift=new GiftIcon}__class(e,"display.mainIcon.MainIcon",t);var i=e.prototype;return i.OnLvChg=function(){DataTable.m_iSelfUser.m_szData.level>4&&!GameMain._ins.signMark&&(DataTable.m_iSelfUser.AddNoti("signOk",this,this.signOKHandler),DlgManager.Me().showSignDlg(88))},i.signOKHandler=function(){DataTable.m_iSelfUser.DelNoti("signOk",this,this.signOKHandler),DlgManager.Me().showSignDlg(0)},i.upDate=function(){},i.init=function(){var t=this;if(e.isInit)return void this.onAddedHandler();var i={};i.ext={},i.ext.dec="开始初始化MainIcon",i.ext.act=2,StatManager.getInstance().send(i),this.box_2.visible=!1,this.box_0.dataSource={gan:{visible:!1}},this.image_gan.destroy(),this.box_ani.removeChildren(),this.secContainer=new Box,this.addChild(this.secContainer),this.secContainer.mouseEnabled=!0,this.secContainer.mouseThrough=!0,this.sec_fsArch=new GMU_sec_fsArch,this.secContainer.addChild(this.sec_fsArch),this.sec_ranks=new GMU_sec_ranks(this.m_rankIcon),this.sec_questinfo=new QuestInfo,this.secContainer.addChild(this.sec_questinfo),this.sec_fsVipQuick=new GMU_sec_fsVipQuick,this.secContainer.addChild(this.sec_fsVipQuick),this.repaySd=new RepayLightBtn,this.secContainer.addChild(this.repaySd),this.secContainer.addChild(this.box_activity),GameMain._ins.m_gameUI.onSetPlaceButton(this.box_activity),GameMain._ins.m_gameUI.onSetPlaceButton(this.sec_fsArch),GameMain._ins.m_gameUI.onSetPlaceButton(this.sec_fsVipQuick),DataTable.m_iSelfUser.m_szData&&DataTable.m_iSelfUser.GetVipLevel()<1&&(this.vipI=new VIPInfo,this.rightIcon.addChild(this.vipI),this.vipI.pos(0,205)),DataTable.m_iSelfUser.m_szData&&!DataTable.m_iSelfUser.GetFirRecharge()&&(this.firstFlush=new FirstFlush,this.rightIcon.addChild(this.firstFlush),this.firstFlush.pos(85,205)),GameMain._ins.m_gameUI.onSetPlaceButton(this.sec_questinfo),this.addClick(),Laya.stage.on("resize",this,this.onResizeMe),this.onResizeMe(),this.activity_m_pTip=new SparkTips,this.activity_m_pTip.SetPos(52,57),this.box_activity.addChild(this.activity_m_pTip),this.activity_m_pTip.visible=!1,this.activity_timeTextAni=new GObj2DMutiText,this.activity_timeTextAni.SetOkHandler(Handler.create(this,function(){t.activity_timeTextAni.SetScrPos(50,20,1),t.activity_timeBox.addChild(t.activity_timeTextAni),t.onCheckActivityOnline()})),this.activity_timeTextAni.LoadAni("tex_文字小_ani"),this.activity_onlineAni=new Muti2DAniIns,this.activity_onlineAni.SetOkHandler(Handler.create(this,function(){var e=t.activity_onlineAni.GetRect(),i=0,n=0;if(i=e.right-e.left,n=e.bottom-e.top,!(1>i||1>n)){var s=t.box_ani.width+5/i,a=t.box_ani.height+5/n;s>a&&(s=a),s>1&&(s=1),t.activity_onlineAni.scale(s,s),t.activity_onlineAni.setPos(i/2-10,n/2-10),t.box_ani.addChild(t.activity_onlineAni),t.onCheckActivityOnline()}})),this.activity_onlineAni.createInsFromName("uiimg_运营活动按钮宝箱_ani"),this.box_activity.on("click",this,this.onShowActivity),NetPt.getInstance(),HornMsg.getInstance(),MessageManger.getInstance(),DataTable.m_iSelfUser.AddNoti("WorldTradeStgateChged",this,this.CheckWorldTradeStgateChged),this.btn_chat.on("click",this,this.loadChatAssets,[!0]),this.updateChat(),this.tipLogo_chat.visible=!1,this.tipLogo_box2.visible=!1,this.tipLogo_market3.visible=!1,FriendDataManger.getInstance(),this.initAniText(),this.upperIcon.upDate(),this.rightIcon.upDate(),this.initChildScale(),DataTable.m_iSelfUser.AddNoti("m_nShopNewNum",this,this.CheckMarketNum),this.CheckMarketNum(),e.isInit=!0;var n={};n.ext={},n.ext.dec="完成初始化MainIcon",n.ext.act=2.1,StatManager.getInstance().send(n)},i.tempButton=function(t,e,i){var n=new Sprite;n.x=t,n.y=e,n.width=100,n.height=30,n.graphics.drawRect(0,0,100,30,"#ff0000");var s=new Label(i);n.addChild(s),this.addChild(n),n.on("click",this,this.onTempClick,[i])},i.onTempClick=function(t){switch(this.spritePanel&&this.spritePanel.removeSelf(),t){case"改名":GHomeNickDlg.Me().Index=0,GHomeNickDlg.Me().myPopup();break;case"MessageBox":var e={title:"系统提示",content:"你的账号在其他设备上登陆了\r\n骆焕涛\r\n登陆IP:1365242165242.6523"};MessageBox.show(22,e,null,null,Handler.create(this,_ool=function(){}));break;case"聊天":DataTable.m_iFriendBar.SendMessage(-100,"gameID="+DataTable.m_iSelfUser.GetUID()+"[INDIVNANT]11啦啦啦qqwqwe+++"+this.temp,null,[],[773.702515,367.107452]),this.temp++;break;case"邮件":}},i.CheckMarketNum=function(){this.market_m_pTip||(this.market_m_pTip=new SparkTips,this.market_m_pTip.SetPos(25,30),this.box_3.addChild(this.market_m_pTip),this.tipLogo_market3&&(this.tipLogo_market3.destroy(),this.tipLogo_market3=null)),this.market_m_pTip.Set(DataTable.m_iSelfUser.m_nShopNewNum)},i.CheckWorldTradeStgateChged=function(){DataTable.m_iFriendBar.CountNewMessage()||DataTable.m_iSelfUser.IsHaveTradeToGetByKind(1)||DataTable.m_iSelfUser.IsHaveTradeToGetByKind(0)?this.tipLogo_chat.visible=!0:this.tipLogo_chat.visible=!1},i.onCheckActivityOnline=function(){if(this.time1=DataTable.m_iSelfUser.GetCurOLGiftSec(),this.time1>0){if(this.time1>180)return this.activity_timeBox.visible=!1,void(this.box_ani.visible=!1);this.activity_timeBox.visible=!0,this.box_ani.visible=!1,Laya.timer.loop(1e3,this,this.loopHandler,null,!0)}else this.activity_timeBox.visible=!1,this.box_ani.visible=!0},i.loopHandler=function(){this.time1>0?(this.time1--,this.activity_timeTextAni.SetText(this.time1+"S")):(Laya.timer.clear(this,this.loopHandler),this.onCheckActivityOnline())},i.initAniText=function(){this.lv_aniText0=new GObj2DMutiText,this.lv_aniText0.LoadAni("tex_文字小_ani"),this.lv_aniText1=new GObj2DMutiText,this.lv_aniText1.LoadAni("tex_文字小_ani"),this.LC_aniText=new GObj2DMutiText,this.LC_aniText.LoadAni("tex_文字小_ani"),this.CK_aniText=new GObj2DMutiText,this.CK_aniText.LoadAni("tex_文字小_ani"),this.JB_aniText=new GObj2DMutiText,this.JB_aniText.LoadAni("tex_文字小_ani"),this.jb_aniText=new GObj2DMutiText,this.jb_aniText.LoadAni("tex_文字小_ani"),this.zs_aniText=new GObj2DMutiText,this.zs_aniText.LoadAni("tex_文字小_ani"),this.sd_aniText=new GObj2DMutiText,this.sd_aniText.SetOkHandler(Handler.create(this,this.addAniText)),this.sd_aniText.LoadAni("tex_文字小_ani")},i.addAniText=function(){this.lv_aniText0.SetScrPos(32,40,1),this.upp_.addChild(this.lv_aniText0),this.lv_aniText1.SetScrPos(103,40,1),this.upp_.addChild(this.lv_aniText1),this.LC_aniText.SetScrPos(273,40,1),this.upp_.addChild(this.LC_aniText),this.CK_aniText.SetScrPos(445,40,1),this.upp_.addChild(this.CK_aniText),this.JB_aniText.SetScrPos(614,40,1),this.upp_.addChild(this.JB_aniText),this.jb_aniText.SetScrPos(117,42,2),this.right_.addChild(this.jb_aniText),this.zs_aniText.SetScrPos(117,104,2),this.right_.addChild(this.zs_aniText),this.sd_aniText.SetScrPos(117,163,2),this.right_.addChild(this.sd_aniText),this.isInitAniText=!0,this.upperIcon.upDate(),this.rightIcon.upDate()},i.updateChat=function(){this.temp_H=642*DisplayTools.globalScale,this.btn_chat.pivotY=this.btn_chat.displayHeight/2,this.btn_chat.y=Laya.stage.height-this.temp_H/2},i.loadChatAssets=function(t){t&&DataTable.m_iSoundTab.playButton(),GameMain._ins.addLoading(),Laya.loader.load(Assets.chatResUrl,Handler.create(this,this.chatH),null,"atlas")},i.chatH=function(){Assets.checkRes(Assets.chatResUrl)&&(GameMain._ins.removeLoading(),PanelMain.getInstance().scale(DisplayTools.globalScale,DisplayTools.globalScale),this.temp_H=PanelMain.getInstance().viewHeight,PanelMain.getInstance().y=this.height-PanelMain.getInstance().viewHeight,DisplayTools.addTarget(PanelMain.getInstance(),GameMain._ins.m_gameUI.container,{x:-PanelMain.getInstance().viewWidth}),PanelMain.getInstance().onCkClick(null,!1),this.updateChat(),this.btn_chat.visible=!1)},i.onAddedHandler=function(){Laya.timer.loop(300,this,this.initFrdData)},i.initFrdData=function(){e.isInit&&(Laya.timer.clear(this,this.initFrdData),Log1.debug(5,"-------------初始化好友数据-----------------"),DataTable.m_iFriendBar=DataTable.m_iFriendBar||GFriendBar.getins(),DataTable.m_iFriendBar.InitFrd(DataTable.m_iSelfUser.GetUID(),DataTable.m_iSelfUser.m_nNetKey),GLeadManager.RegArrowInterface(this.box_1,"主界面_好友",0,0,120),GLeadManager.RegArrowInterface(this.box_3,"主界面_商店",0,10,110),GLeadManager.RegArrowInterface(this.upperIcon.item2,"主界面_仓库"))},i.onShowActivity=function(){DataTable.m_iSoundTab.playButton(),DlgManager.Me().showActivityDlg()},i.onResizeMe=function(){this.width=Laya.stage.width,this.height=Laya.stage.height,this.updateChat(),this.updateBoxHideXY()},i.onShowFriendView=function(t){Laya.loader.getRes(Assets.frdResUrl)||FriendPanel.getInstance().displayInStage&&(FriendPanel.getInstance().Index=t)},i.onAddFirendView=function(){function t(){Assets.checkRes(Assets.frdResUrl)&&(AddFriend.getInstance().Index=0,AddFriend.getInstance().myPopup(!1),GameMain._ins.removeLoading())}GameMain._ins.addLoading(),Laya.loader.load(Assets.frdResUrl,Handler.create(this,t),null,"atlas")},i.OnHelpCountRef=function(t){this.friend_m_pTip||(this.friend_m_pTip=new SparkTips,this.friend_m_pTip.SetPos(97,66),this.box_1.addChild(this.friend_m_pTip));for(var e=0,i=0;i<t.length;i++)e+=t[i][1];this.friend_m_pTip.Set(e)},i.addClick=function(){for(var t=0;4>t;t++)2!=t&&this["box_"+t].on("click",this,this.onClickHandler,[t,-1])},i.onClickHandler=function(t,e){switch(DataTable.m_iSoundTab.playButton(),this.spritePanel&&this.spritePanel.removeSelf(),GameMain._ins.addLoading(),t){case 0:Laya.loader.load(Assets.rankResUrl,Handler.create(this,this.onComplete,[t,e,Assets.rankResUrl]),null,"atlas");break;case 1:Laya.loader.load(Assets.frdResUrl,Handler.create(this,this.onComplete,[t,e,Assets.frdResUrl]),null,"atlas");break;case 2:this.spritePanel=null;break;case 3:Laya.loader.load(Assets.marketResUrl,Handler.create(this,this.onComplete,[t,e,Assets.marketResUrl]),null,"atlas");break;case 4:this.spritePanel=null;break;case 5:this.spritePanel=null;break;case 6:this.spritePanel=null;break;case 7:this.spritePanel=null;break;case 8:this.spritePanel=null;break;case 9:this.spritePanel=null}},i.onComplete=function(t,e,i){if(!i||Assets.checkRes(i)){switch(t){case 0:return this.spritePanel=RankDlg.Me(),this.spritePanel.myPopupMax(!0,!1,!0,"排行榜"),void Loding.getInstance().removeSelf();case 1:return this.spritePanel=FriendPanel.getInstance(),this.spritePanel.Index=e,this.spritePanel.myPopupMax(!0,!1,!0,"好友界面"),void Loding.getInstance().removeSelf();case 2:this.spritePanel=null;break;case 3:return this.spritePanel=MarketView.getInstance(),this.spritePanel.Index=e,this.spritePanel.myPopupMax(!0,!1,!0,"商城"),void Loding.getInstance().removeSelf();case 4:this.spritePanel=null;break;case 5:this.spritePanel=null;break;case 6:this.spritePanel=null;break;case 7:this.spritePanel=null;break;case 8:this.spritePanel=null;break;case 9:this.spritePanel=null}this.spritePanel&&this.spritePanel.myPopup(!0),Loding.getInstance().removeSelf()}},i.showBoxHide=function(){this.box_hide||(this.box_hide=new Box_HIDE),this.box_hide.onShow()},i.updateBoxHideXY=function(){this.box_hide&&this.box_hide.updateXY()},i.removeBoxHide=function(){this.box_hide&&this.box_hide.onClick()},i.goOtherHome=function(t,e){DataTable.m_iOtherUser.applyOtherData(t,e)},i.goMyHome=function(){GameMain._ins.GmView.createHomeMapView()},i.onShowOtherHome=function(){this.upperIcon.visible=!1,this.upp_.visible=!1,this.box_uppEff.visible=!1,this.box_3.visible=!1,this.box_2.visible=!1,OtherGameShow.getInstance().onShow()},i.onShowMyHome=function(){this.upperIcon.visible=!0,this.upp_.visible=!0,this.box_uppEff.visible=!0,this.box_3.visible=!0,OtherGameShow.getInstance().onHide()},i.hideAll=function(){this._isShowAll=!1,this.upperIcon.visible=!1,this.upp_.visible=!1,this.box_uppEff.visible=!1,this.rightIcon.visible=!1,this.right_.visible=!1,this.box_0.visible=!1,this.box_1.visible=!1,this.box_2.visible=!1,this.box_3.visible=!1,this.btn_chat.visible=!1,this.secContainer&&(this.secContainer.visible=!1),this.box_hide&&(this.box_hide.visible=!1)},i.showAll=function(){this._isShowAll=!0,GMapView.m_nSelf&&(this.upperIcon.visible=!0,this.upp_.visible=!0,this.box_uppEff.visible=!0,this.box_3.visible=!0),this.rightIcon.visible=!0,this.right_.visible=!0,this.box_0.visible=!0,this.box_1.visible=!0,this.btn_chat.visible=!0,this.secContainer&&(this.secContainer.visible=!0),this.box_hide&&(this.box_hide.visible=!0),MutiMove.getInstance().isIconShow(!1)},i.initChildScale=function(){this.upperIcon.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.upp_.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.box_uppEff.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.rightIcon.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.right_.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.tempBottom<=0?this.tempBottom=this.box_0.bottom:"",this.box_0.bottom=this.tempBottom*DisplayTools.globalScale,this.box_0.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.box_1.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.box_2.bottom=this.tempBottom*DisplayTools.globalScale,this.box_2.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.box_3.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.btn_chat.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.updateChat(),this.secContainer&&this.secContainer.scale(DisplayTools.globalScale,DisplayTools.globalScale),GameMain._ins.m_gameUI.OnPlaceTempButton(),MutiMove.getInstance().scale(DisplayTools.globalScale,DisplayTools.globalScale)},i.getIconByName=function(t,e){var i;if(!GMapView.m_nSelf)return i=null,e=OtherGameShow.getInstance().getGoHomePos(e),i;switch(t){case"m_i金币显示":i=this.rightIcon.item4,e.x=this.rightIcon.x+i.x,e.y=this.rightIcon.y;break;case"m_i钻石显示":i=this.rightIcon.item5,e.x=this.rightIcon.x+i.x,e.y=this.rightIcon.y;break;case"m_i闪电显示":i=this.rightIcon.item6,e.x=this.rightIcon.x+i.x,e.y=this.rightIcon.y;break;case"m_i经验显示":break;case"m_iExpShow":i=this.upperIcon.item0,e.x=this.upperIcon.x+i.x,e.y=this.upperIcon.y;break;case"m_iCropBagShow":i=this.upperIcon.item1,e.x=this.upperIcon.x+i.x,e.y=this.upperIcon.y;break;case"m_iItemBagShow":i=this.upperIcon.item2,e.x=this.upperIcon.x+i.x,e.y=this.upperIcon.y;break;case"m_iDecBagShow":i=this.upperIcon.item3,e.x=this.upperIcon.x+i.x,e.y=this.upperIcon.y}return i},__getset(0,i,"isShowAll",function(){return this._isShowAll}),e.getInstance=function(){return e.instance||(e.isboo=!1,new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e.isInit=!1,e}(mainIconUI),OtherGameShow=function(t){function e(){if(this.aniText=null,this.m_nUid=0,this.ani_zanText=null,e.__super.call(this),e.isboo)throw new Error("请用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.OtherGameShow",t);var i=e.prototype;return i.init=function(){var t=this;Laya.stage.on("resize",this,this.onResizeMe),this.image_goHome.on("click",this,goHome=function(){Laya.stage.addChild(LoadingView.getInstance()),LoadingView.getInstance().LabelText="努力加载中......",LoadingView.getInstance().currentValue=99,MainIcon.getInstance().goMyHome(),Laya.timer.once(300,t,removeLv=function(){LoadingView.getInstance().removeSelf()})}),this.image_photo.visible=!1,this.image_photo.on("click",this,onPhoto=function(){console.log("new 一个拍照的界面")}),this.size(1,1),this.aniText=new GObj2DMutiText,this.aniText.LoadAni("tex_文字小_ani"),this.aniText.SetScrPos(this.img_xingxing.x+this.img_xingxing.width/2,this.img_xingxing.y+this.img_xingxing.height-15,1),this.box_up.addChild(this.aniText),this.head.clickHandler=new Handler(this,this.onHeadClick),this.img_add.on("click",this,onAddFir=function(){DataTable.m_iSelfFrd.AddFollower(Handler.create(t,function(t){}),DataTable.m_iOtherUser.GetUID())}),this.img_del.on("click",this,onDelFri=function(){DataTable.m_iSelfFrd.DelFollower(DataTable.m_iOtherUser.GetUID(),!0)}),this.img_mail.on("click",this,onMailFri=function(){DataTable.m_iFriendBar.OnOutBox(DataTable.m_iOtherUser.GetUID())}),DataTable.m_iSelfUser.AddNoti("luohuantao_m_nFlowerNum",this,this.OnFlowerChg),this.img_Zan.on("click",this,this.onZanClick),SysID.FRD_ON("frdchged",this,this.OnReLayOut)},i.onZanClick=function(){if(!DataTable.m_iSelfUser.OnPraiseUser(DataTable.m_iOtherUser.GetUID(),0,1))return void MessageBox.show(1,{title:"提示",content:"您的点赞花数量不足，提升vip等级可以增加点赞花数量",lbtn:"查看vip",rbtn:"取消"},Handler.create(this,_a_b=function(){MainIcon.getInstance().rightIcon.addInterface(1,1)}));var t=new Image2(DataTable.getSkin("tex_玫瑰_001"));t.pos(this.img_Zan.x,this.img_Zan.y),this.box_up.addChild(t),Tween.to(t,{x:this.head.x,y:this.head.y},500,null,Handler.create(null,onFlyEnd=function(t){t.removeSelf(),t=null},[t]))},i.onHeadClick=function(){OtherInfo.getInstance().Index=DataTable.m_iOtherUser.GetUID(),OtherInfo.getInstance().myPopup(!0)},i.onResizeMe=function(){this.parent&&this.onShow()},i.onShow=function(){var t=DataTable.m_iOtherUser.GetUID();MainIcon.getInstance().addChild(this),this.box_up.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.box_up.x=(Laya.stage.width-this.box_up.displayWidth)/2,this.m_nUid!=t&&(this.m_nUid=t,this.box_up.y=-this.box_up.displayHeight,Tween.to(this.box_up,{y:-1},500)),this.image_goHome.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.image_goHome.x=Laya.stage.width-this.image_goHome.displayWidth-5,this.image_goHome.y=Laya.stage.height-this.image_goHome.displayHeight-1,this.image_photo.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.image_photo.x=Laya.stage.width-this.image_photo.displayWidth-7,this.image_photo.y=Laya.stage.height-this.image_photo.displayHeight-122,this.aniText.SetText(DataTable.m_iOtherUser.GetLevel()+""),this.label_name.text=DataTable.m_iOtherUser.GetNick(),this.onSizeLable(),this.head.initInfo(t),this.head.setEvalue(DataTable.m_iOtherUser.GetEvalue()),this.OnReLayOut()},i.getGoHomePos=function(t){return t.x=Laya.stage.width,t.y=Laya.stage.height,t},i.OnReLayOut=function(){var t=DataTable.m_iOtherUser.GetUID(),e=DataTable.m_iSelfFrd.GetFriendGroup(t),i=FriendDef.ISFRIEND(e)||FriendDef.ISFOLLOWER(e)||FriendDef.IsNpc(t)?!0:!1;this.img_add.visible=!i;var n=FriendDef.ISFRIEND(e)||FriendDef.ISFOLLOWER(e)?!0:!1;this.img_del.visible=n,this.img_mail.visible=Boolean(FriendDef.ISFRIEND(e)),FriendDef.IsNpc(t)?(this.img_Zan.visible=!1,this.ani_zanText&&(this.ani_zanText.visible=!1)):this.showZanBtn()},i.showZanBtn=function(){this.img_mail.visible?this.img_Zan.pos(208,58):this.img_Zan.pos(this.img_mail.x,this.img_mail.y),this.img_Zan.visible=!0,this.OnFlowerChg()},i.OnFlowerChg=function(t){void 0===t&&(t=-1),this.ani_zanText||(this.ani_zanText=new GObj2DMutiText,this.ani_zanText.LoadAni("tex_文字小_ani"),this.box_up.addChild(this.ani_zanText)),this.ani_zanText.SetScrPos(this.img_Zan.x+this.img_Zan.width-20,this.img_Zan.y+this.img_Zan.height,0),this.ani_zanText.SetText(DataTable.m_iSelfUser.m_nFlowerNum+"")},i.onSizeLable=function(){if(!(this.box_name.width>this.label_name.displayWidth)){var t=this.box_name.width/this.label_name.displayWidth;this.label_name.scale(t,t)}},i.onHide=function(){this.removeSelf()},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e}(OtherGameShowUI),MarketItemView=function(t){function e(){this.label_numText=null,this.label_shoujiaText=null,this.label_iconText=null,this.buildName=null,this.nowScale=0,this.isClick=!1,this.m_szLeadPos=null,this.m_nBuildID=0,this.m_vTips=null,this.m_nBuildKind=0,this.m_nCostKind=0,this.m_nCost=0,this.m_nNeedLevel=0,this.m_nbAble=!1,this.point=new Point,e.__super.call(this),this.box_scalc.pivot(this.box_scalc.width/2,this.box_scalc.height/2),this.box_scalc.x=this.box_scalc.width/2,this.box_scalc.y=this.box_scalc.height/2,this.on("removed",this,this.onRemovedFun),this.on("mousedown",this,this.onMouseDown),this.initText()}__class(e,"display.mainIcon.market.MarketItemView",t);var i=e.prototype;return i.onRemovedFun=function(){GLeadManager.UnRegArrowInterface("商店物品_"+this.buildName)},i.initText=function(){this.label_numText=new GObj2DMutiText,this.label_numText.LoadAni("tex_文字小_ani"),this.label_numText.SetText("10/20"),this.label_numText.SetScrPos(70,145,1),this.box_scalc.addChild(this.label_numText),this.label_shoujiaText=new GObj2DMutiText,this.label_shoujiaText.LoadAni("tex_文字中_ani"),this.label_shoujiaText.SetText("10/20"),this.label_shoujiaText.SetScrPos(78,26,2),this.box_shoujia.addChild(this.label_shoujiaText),this.label_iconText=new GObj2DMutiText,this.label_iconText.LoadAni("tex_文字中_ani"),this.label_iconText.SetText("10/20"),this.label_iconText.SetScrPos(65,25,2),this.box_icon.addChild(this.label_iconText)},i.onMouseDown=function(){this.isClick=!0,this.nowScale=this.scaleX,this.point.setTo(Laya.stage.mouseX,Laya.stage.mouseY),Tween.to(this,{scaleX:1.04,scaleY:1.04},200,null,null,0,!0),Laya.stage.on("mousemove",this,this.onMouseMove_Up),Laya.stage.on("mouseup",this,this.onMouseMove_Up)},i.onMouseMove_Up=function(t){if("mousemove"==t.type){Point.EMPTY.setTo(Laya.stage.mouseX,Laya.stage.mouseY);var e=MathUtil1.Vec2Dis(this.point.x,this.point.y,Point.EMPTY.x,Point.EMPTY.y);e>20&&(this.isClick=!1,Tween.to(this,{scaleX:this.nowScale,scaleY:this.nowScale},200,null,null,0,!0))}else if("mouseup"==t.type&&(Laya.stage.off("mousemove",this,this.onMouseMove_Up),Laya.stage.off("mouseup",this,this.onMouseMove_Up),Tween.to(this,{scaleX:this.nowScale,scaleY:this.nowScale},200,null,null,0,!0),this.isClick)){if(this.isClick=!1,!this.m_nbAble)return;if(6==this.m_nBuildID)return void DataTable.m_iSelfUser.BuyBlockFromShop(Handler.create(this,function(t){t&&MyDiaLog.closeAll()}));MyDiaLog.closeAll();var i=DataTable.m_iBuildTab.Get(this.m_nBuildID),n=DisplayItem.m_pBk.getFreePos(i[5],i[6]);if(n){var s=new GMapBuyItem;s.Init(this.m_nBuildID,n.x,n.y),s.SetSubData(1,this.m_nCostKind,this.m_nCost),DisplayItem.m_pBk.SelObjToMove(s.m_disObj)}else GMapBuyItem.notiNoFreePos()}},i.Init=function(t,e,i){this.box_scalc.visible=!1,this.m_nBuildID=t[0],this.m_vTips=["item",this.m_nBuildID],this.m_nBuildKind=t[1],2==i.length&&(t[2]==i[0]&&this.OnSpark(),2==i[1].length&&(this.m_szLeadPos=i[1])),this.buildName=t[2],GLeadManager.RegArrowInterface(this.box_scalc,"商店物品_"+this.buildName,1,0,120),this.checkCanBuy(t,2)},i.checkCanBuy=function(t,e){this.Enable(1,1,1);var i=DataTable.m_iSelfUser.GetShopTipData();null==i&&(i=[]);var n=ArrOp.SzSearch(t[0],i);n>=0?this.Image_new.visible=!0:this.Image_new.visible=!1,this.m_nNeedLevel=t[11];var s=DataTable.m_iSelfUser.GetLevel();if(s>=this.m_nNeedLevel)this.txt_title.text=t[3]+"",this.onCenter(this.image_name,this.txt_title,this.box_name),this.label_numText.visible=!0,this.box_name.visible=!0,this.box_shoujia.visible=!0,this.label_weikaiqi_yigoumai.visible=!1;else{var a=0;if(this.m_nBuildID==SysID.BUILDID_DXWWJ&&(DataTable.m_iSelfUser.IsCanVipFunc(90006)||(a=9.0006)),a){var r="vip[级开启";r=r.replace("[",a+""),this.label_weikaiqi_yigoumai.text=r,this.label_numText.visible=!1,this.box_name.visible=!1,this.box_shoujia.visible=!1,this.label_weikaiqi_yigoumai.visible=!0}else{var h="]级开启";h=h.replace("]",this.m_nNeedLevel+""),this.label_weikaiqi_yigoumai.text=h,this.label_numText.visible=!1,this.box_name.visible=!1,this.box_shoujia.visible=!1,this.label_weikaiqi_yigoumai.visible=!0}this.Enable(0,0,0)}var o;if(this.label_numText.visible&&this.box_shoujia.visible){var l=DataTable.m_iSelfUser.GetBuildHaveNum(this.m_nBuildID),u=Math.max(1,DataTable.m_iUserLevelTab.GetLevelBuildNum(s,this.m_nBuildID));if(6!=this.m_nBuildID){if(o=DataTable.m_iBuildTab.Get(this.m_nBuildID),null==o||0==o.length)throw new Error("buildid not find id="+this.m_nBuildID)}else l=DataTable.m_iSelfUser.GetBlockCountFromShop(),u=100;switch(1==u&&(0==this.m_nBuildKind||6==this.m_nBuildKind||2==this.m_nBuildKind)&&(u=1e3),t[16]>0?this.m_nCost=t[14]+Math.floor(l/t[16])*t[17]:this.m_nCost=t[14],this.label_shoujiaText.SetText(this.m_nCost+""),this.m_nCostKind=t[15],this.m_nCostKind){case 0:this.image_shoujia.skin=DataTable.getSkin("tex_按钮_金币");DataTable.m_iSelfUser.GetMoney();break;case 1:this.image_shoujia.skin=DataTable.getSkin("tex_按钮_钻石");DataTable.m_iSelfUser.GetDiamond();break;case 2:this.image_shoujia.skin=DataTable.getSkin("tex_按钮_贝壳");DataTable.m_iSelfUser.GetShell();break;case 3:this.image_shoujia.skin=DataTable.getSkin("tex_按钮_奖杯大");DataTable.m_iSelfUser.GetMedal()}u>999?this.label_numText.SetText(l?l+"":""):this.label_numText.SetText(l+"/"+u),l==u?(this.label_weikaiqi_yigoumai.text="已购买",this.label_weikaiqi_yigoumai.visible=!0,this.box_shoujia.visible=!1):l>u&&gSys.Err("shopItem's num is err!"),999>u&&(u>l?(this.Enable(1,1,1),6!=this.m_nBuildID&&(this.Image_new.visible=!0)):(this.Enable(0,0,1),this.Image_new.visible=!1))}var c=DataTable.m_iSelfUser.GetShopBuildEvalue(t[0]);c>0?(this.label_iconText.SetText(c+""),this.image_icon.skin=DataTable.getSkin("tex_按钮_奖杯大"),this.box_icon.visible=!0):this.box_icon.visible=!1;var _=this.box_item.getChildByName("IIImage");_||(_=new Image2,_.size(128,128),_.name="IIImage",this.box_item.addChild(_)),6==this.m_nBuildID?_.skin="3d/tex/52abdc130bb81004.png":(o=DataTable.m_iBuildTab.Get(this.m_nBuildID),_.skin=Assets.BuildUrl(o[4])),this.box_scalc.visible=!0},i.onCenter=function(t,e,i){var n=t.width+e.width;t.x=.5*(i.width-n),e.x=t.x+t.width},i.OnSpark=function(){},i.StopSpark=function(){},i.Enable=function(t,e,i){this.m_nbAble=Boolean(t)},e}(MarketItemUI),RightIcon=function(t){function e(){this.panelSprite=null,this.index=0,e.__super.call(this),this.init()}__class(e,"display.mainIcon.RightIcon",t);var i=e.prototype;return i.init=function(){this.addEvent()},i.addEvent=function(){this.rightContainer.on("mousedown",this,this.onDownHandler),this.rightContainer.on("click",this,this.onClickHandler)},i.onDownHandler=function(t){""!=t.target.name&&TweenTool.getInstance().buttonTween(t.target)},i.onClickHandler=function(t){var e=t.target.name;""!=e&&(DataTable.m_iSoundTab.playButton(),this.index=Laya.__parseInt(t.target.name.slice(4)),this.addInterface())},i.addInterface=function(t,e,i){switch(void 0===t&&(t=-1),void 0===e&&(e=-1),t>=0&&(this.index=t),GameMain._ins.addLoading(),this.index){case 0:case 4:Laya.loader.load(Assets.goldResUrl,Handler.create(this,this.onComplete,[Assets.goldResUrl]),null,"atlas");break;case 1:case 5:case 2:case 6:Laya.loader.load([{url:Assets.vipResUrl,type:"atlas"}],Handler.create(this,this.onComplete,[Assets.vipResUrl,e,i],!0))}},i.onComplete=function(t,e,i){if(void 0===e&&(e=-1),!t||Assets.checkRes(t)){switch(this.index){case 0:case 4:this.panelSprite=Gold.getInstance(),this.panelSprite.Index=0,this.panelSprite&&!this.panelSprite.displayInStage&&this.panelSprite.myPopup(!0);
break;case 1:case 5:this.panelSprite=VIPprivilegeSpreeView.getInstance(),this.panelSprite.selfData=i,this.panelSprite.Index=e>-1?e:2,this.panelSprite&&!this.panelSprite.displayInStage&&this.panelSprite.myPopup(!0,!1,!0);break;case 2:case 6:this.panelSprite=VIPprivilegeSpreeView.getInstance(),this.panelSprite.selfData=i,this.panelSprite.Index=e>-1?e:3,this.panelSprite&&!this.panelSprite.displayInStage&&this.panelSprite.myPopup(!0,!1,!0)}GameMain._ins.removeLoading()}},i.upDate=function(){DataTable.m_iSelfUser.m_szData&&MainIcon.getInstance().isInitAniText&&(MainIcon.getInstance().jb_aniText.SetText(Math.floor(DataTable.m_iSelfUser.GetMoney())+""),MainIcon.getInstance().zs_aniText.SetText(Math.floor(DataTable.m_iSelfUser.GetDiamond())+""),MainIcon.getInstance().sd_aniText.SetText(Math.floor(DataTable.m_iSelfUser.GetLight())+""))},e}(rightIconUI),PetIcon=function(t){function e(t){this.cX=NaN,this.cY=NaN,this.scaleN=.83,this.scaleM=.9,this.tooltip=null,this.Id=888,this.numTxt=null,e.__super.call(this),this.Id=t,this.init(),this.mouseEnabled=!0,this.mouseThrough=!0}__class(e,"display.Pet.PetIcon",t);var i=e.prototype;return i.fillData=function(t){void 0===t&&(t=!0);var e=this.getNum(this.Id);this.Id&&this.numTxt.SetText(e+"");var i=GVar.texDic[DataTable.m_iItemTab.Get(this.Id)[3]];this.cropBox.dataSource={cropIcon:i,jiantou:"3d/tex/5284c06ba4be7029.png",jinbi:{visible:!1},jinbiText:"",cropText:"",scaleX:this.scaleN,scaleY:this.scaleN}},i.getNum=function(t){var e=0;return e=DataTable.m_iSelfUser.GetItemNum(t)},i.init=function(){var t="";this.Id?(t=GVar.texDic[DataTable.m_iItemTab.Get(this.Id)[3]],this.numTxt=new GObj2DMutiText,this.numTxt.LoadAni("tex_文字小_ani"),this.cropBox.addChild(this.numTxt),this.numTxt.SetScrPos(68,106,1)):t=GVar.texDic["tex_图标_口哨"],this.cropBox.dataSource={cropIcon:t,jiantou:"3d/tex/5284c06ba4be7029.png",jinbi:{visible:!1},jinbiText:"",cropText:"",scaleX:this.scaleN,scaleY:this.scaleN},this.cX=0,this.cY=0,this.tooltip=Tooltip.getInstance(),this.cropBox.on("mousedown",this,this.onMouseDown)},i.CheckAll=function(){var t="",e=this.cX,i=this.cY,n={label1:"",label2:"",label3:""};if(this.Id){var s=DataTable.m_iItemTab.Get(this.Id);t=s[2],this.tooltip.init(195,130),n.label1=t,n.label2=s[10],n.label3=TimerTools.conversion(DataTable.m_iMacFormulTab.Get(this.Id)[4]),i-=70}this.tooltip.TipContent=n,DisplayTools.addTarget(this.tooltip,Laya.stage,{x:e,y:i,mouseEnabled:!1,mouseThrough:!0}),this.tooltip.onTipMove()},i.onMouseDown=function(){this.tooltip&&this.tooltip.displayInStage&&this.tooltip.removeSelf(),this.Id>0&&this.CheckAll(),this.stage.once("mouseup",this,this.onMouseUp),Tween.to(this.cropBox,{scaleX:this.scaleM,scaleY:this.scaleM},100,Ease.expoInOut,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:.3},jiantou:""},this.cropBox.startDrag(),this.Id?PetIconMain.getInstance().iconAlpha(0,.5):PetIconMain.getInstance().iconAlpha(1,.5),this.stage.on("mousemove",this,this.onMouseMove)},i.onMouseMove=function(t){this.Id?PetIconMain.getInstance().iconAlpha(0,0):PetIconMain.getInstance().iconAlpha(1,0),this.removeTip(),PetIconMain.getInstance().m_pLink.isMouseOn()&&(this.onMouseUp(),PetIconMain.getInstance().removeSelf(),this.Id?PetIconMain.getInstance().m_pLink.OnFeed():PetIconMain.getInstance().m_pLink.OnBack())},i.onMouseUp=function(){this.removeTip(),this.stage.off("mousemove",this,this.onMouseMove),this.cropBox.stopDrag(),this.Id?PetIconMain.getInstance().iconAlpha(0,1):PetIconMain.getInstance().iconAlpha(1,1),Tween.to(this.cropBox,{x:this.cX,y:this.cY,scaleX:this.scaleN,scaleY:this.scaleN},100,null,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:1},jiantou:"3d/tex/5284c06ba4be7029.png"}},i.removeTip=function(){this.tooltip&&this.tooltip.removeSelf()},e}(cropIconUI),Decorate=function(t){function e(){if(this.total=null,this.dialy=null,this.iconAniArr=[],this.decorateArr=[],this.testarr=["tex_断翼壁灯_ani","tex_摩天轮_ani","tex_挖掘机_ani","tex_旋转木马_ani","tex_无形幽灵_ani","tex_早餐车_ani","tex_春节2_ani","tex_月宫仙子_ani","tex_木栅栏_ani","tex_木桌_ani","tex_木马_ani","tex_杰米大叔雕像_ani"],e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.trophyPanel.Decorate",t);var i=e.prototype;return i.init=function(){this.initTxt(),this.bjt.skin="3d/tex/52b3e013ec98a002.png";for(var t,e=0;26>e;e++)t=new Object,t.num="储存："+e%16+"个",t.pingjia=e%10,this.decorateArr.push(t),t=null;this.upData(),DisplayTools.scrollBar=this.decorateList.scrollBar,this.decorateList.renderHandler=Handler.create(this,this.fillList,null,!1),this.decorateList.mouseHandler=Handler.create(this,this.listOnClick,null,!1)},i.listOnClick=function(t,e){"click"==t.type&&DecoratePopup.getInstance().myPopup()},i.initTxt=function(){this.total=new GObj2DMutiText,this.total.LoadAni("tex_文字大_ani"),this.addChild(this.total),this.total.SetText("307"),this.total.SetScrPos(220,82,0),this.dialy=new GObj2DMutiText,this.dialy.LoadAni("tex_文字中_ani"),this.addChild(this.dialy),this.dialy.SetText("Z30"),this.dialy.SetScrPos(600,90,0)},i.fillList=function(t,e){if(!(0>e)){if(this.iconAniArr.length<12){var i=new Muti2DAniIns;t.addChild(i),i.x=50,i.y=80;var n=new GObj2DMutiText;n.LoadAni("tex_文字大_ani"),t.addChild(n),n.SetScrPos(190,60,0),this.iconAniArr.push([i,n])}this.iconAniArr[e%12][0].SetOkHandler(Handler.create(this,this.iconAniScale,[e%12])),this.iconAniArr[e%12][0].createInsFromName(this.testarr[e%12]),this.iconAniArr[e%12][1].SetText(e+"")}},i.iconAniScale=function(t){var e=85,i=85,n=this.iconAniArr[t%12][0].GetRect().right-this.iconAniArr[t%12][0].GetRect().left,s=this.iconAniArr[t%12][0].GetRect().bottom-this.iconAniArr[t%12][0].GetRect().top,a=e/n,r=i/s,h=NaN;h=a>r?r:a,this.iconAniArr[t%12][0].scale(h,h)},i.upData=function(){this.decorateList.array=this.decorateArr},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(decorateUI),Machine=function(t){function e(){this.macArr=[],this.iconAniArr=[],this.iconUrl=[],this.testarr=[["tex_烤炉_001_ani","烤炉"],["tex_研磨台_ani","研磨台"],["tex_榨汁机_ani","榨汁机"],["tex_乳品机_002_ani","乳品机"],["tex_烹饪台_ani","烹饪台"],["tex_锯木机_ani","锯木机"],["tex_蛋糕店_ani","蛋糕店"],["tex_纺织机02_ani","纺织机"]],e.__super.call(this),this.init()}__class(e,"display.mainIcon.trophyPanel.Machine",t);var i=e.prototype;return i.init=function(){DisplayTools.scrollBar=this.macList.scrollBar,this.setListData(this.testarr),DisplayTools.scrollBar=this.macList.scrollBar,this.macList.renderHandler=Handler.create(this,this.fillList,null,!1),this.macList.mouseHandler=Handler.create(this,this.listOnClick,null,!1)},i.setListData=function(t){this.macArr.length=0,this.iconUrl.length=0,this.upData(t)},i.fillList=function(t,e){if(!(0>e)){if(this.iconAniArr.length<8){var i=new Muti2DAniIns;t.addChild(i),i.x=60,i.y=100,this.iconAniArr.push(i)}this.iconAniArr[e%8].SetOkHandler(Handler.create(this,this.iconAniScale,[e%8])),this.iconAniArr[e%8].createInsFromName(this.iconUrl[e%8])}},i.listOnClick=function(t,e){"click"==t.type&&console.log("安装到庄园----------------------------------------------")},i.iconAniScale=function(t){var e=100,i=125,n=this.iconAniArr[t%8].GetRect().right-this.iconAniArr[t%8].GetRect().left,s=this.iconAniArr[t%8].GetRect().bottom-this.iconAniArr[t%8].GetRect().top,a=e/n,r=i/s,h=NaN;h=a>r?r:a,this.iconAniArr[t%8].scale(h,h)},i.upData=function(t){for(var e,i=0;i<t.length;i++)e=new Object,e.tit=t[i][1],this.macArr.push(e),this.iconUrl.push(t[i][0]);this.macList.array=this.macArr},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(machineUI),UpperIcon=function(t){function e(){this.panelSprite=null,this.index=3,this.s_nIsEffModi=2,this.Mut_LC=null,this.img_LC=null,this.Mut_WP=null,this.img_WP=null,this.m_eff_3=null,this.m_eva_icon=null,e.__super.call(this),this.init()}__class(e,"display.mainIcon.UpperIcon",t);var i=e.prototype;return i.init=function(){this.addEvent(),this.CheckShowEff(),Laya.timer.loop(5e3,this,this.CheckShowEff)},i.addEvent=function(){this.upperContainer.on("click",this,this.onClickHandler),this.upperContainer.on("mousedown",this,this.onDownHandler)},i.onDownHandler=function(t){""!=t.target.name&&TweenTool.getInstance().buttonTween(t.target)},i.onClickHandler=function(t){t.target.name&&""!=t.target.name&&(DataTable.m_iSoundTab.playButton(),this.index=Laya.__parseInt(t.target.name.slice(4)),this.addInterface(this.index))},i.upDate=function(){var t=DataTable.m_iSelfUser.m_szData;if(t&&MainIcon.getInstance().isInitAniText){MainIcon.getInstance().lv_aniText0.SetText(DataTable.m_iSelfUser.m_nLevel+""),MainIcon.getInstance().lv_aniText1.SetText(DataTable.m_iSelfUser.m_nLevelExp+"");var e=DataTable.m_iSelfUser.m_nLevelExp/DataTable.m_iSelfUser.m_nLevelExpNeed||0;this.item0.getChildByName("progress").value=e,DataTable.m_iSelfUser.m_nLevel>=80&&(MainIcon.getInstance().lv_aniText1.visible=!1,this.item0.getChildByName("progress").value=1),MainIcon.getInstance().LC_aniText.SetText(DataTable.m_iSelfUser.m_nBarnNum+"/"+DataTable.m_iSelfUser.m_nBarnAllNum),e=DataTable.m_iSelfUser.m_nBarnNum/DataTable.m_iSelfUser.m_nBarnAllNum,this.item1.getChildByName("progress").value=e,MainIcon.getInstance().CK_aniText.SetText(DataTable.m_iSelfUser.m_nWareNum+"/"+DataTable.m_iSelfUser.m_nWareAllNum),e=DataTable.m_iSelfUser.m_nWareNum/DataTable.m_iSelfUser.m_nWareAllNum,this.item2.getChildByName("progress").value=e,MainIcon.getInstance().JB_aniText.SetText((DataTable.m_iSelfUser.GetEvalue()||0)+""),this.s_nIsEffModi=2,this.CheckShowEff(),DataTable.m_iSelfUser.checkNewEvaSign()}},i.addInterface=function(t,e){switch(void 0===e&&(e=0),this.panelSprite&&this.panelSprite.removeSelf(),GameMain._ins.addLoading(),t){case 0:Laya.loader.load([{url:Assets.figureInfoResUrl,type:"atlas"}],Handler.create(this,this.addPanelSprite,[t,e,Assets.figureInfoResUrl]));break;case 1:case 2:this.addPanelSprite(t,e);break;case 3:Laya.loader.load([{url:Assets.trophyResUrl,type:"atlas"}],Handler.create(this,this.addPanelSprite,[t,e,Assets.trophyResUrl]))}},i.addPanelSprite=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=""),!i||Assets.checkRes(i)){switch(t){case 0:this.panelSprite=FigureInfoPanel.getInstance(),this.panelSprite.Index=e;break;case 1:this.panelSprite=FoodWarehouse.getInstance(),this.panelSprite.Index=0,FoodWarehouse.getInstance().onShow(e);break;case 2:this.panelSprite=FoodWarehouse.getInstance(),this.panelSprite.Index=1,FoodWarehouse.getInstance().onShow(e);break;case 3:return this.panelSprite=EvalueteDlg.Me(),this.panelSprite.Index=1,this.panelSprite.myPopupMax(!0,!1,!0,"装饰仓库"),void GameMain._ins.removeLoading()}this.panelSprite.myPopup(!0),GameMain._ins.removeLoading()}},i.getBox=function(t){return this.getChildByName("item"+t)},i.CheckShowEff=function(){this.checkWhich(1),this.checkWhich(2)},i.checkWhich=function(t){var e=-1;if(1==t?e=0:2==t&&(e=1),!(0>e)&&MainIcon.isInit)if(DataTable.m_iSelfUser.IsCanBagLvUp(e)){var i;if(1==t){if(this.Mut_LC)return;this.Mut_LC=new Muti2DAniIns,this.Mut_LC.createInsFromName("uiimg_仓库升级_ani"),i=this.Mut_LC.GetRect(),this.Mut_LC.x=33+this.item1.x,this.Mut_LC.y=35,MainIcon.getInstance().box_uppEff.addChild(this.Mut_LC)}else if(2==t){if(this.Mut_WP)return;this.Mut_WP=new Muti2DAniIns,this.Mut_WP.createInsFromName("uiimg_仓库升级_ani"),i=this.Mut_WP.GetRect(),this.Mut_WP.x=33+this.item2.x,this.Mut_WP.y=35,MainIcon.getInstance().box_uppEff.addChild(this.Mut_WP)}if(1==t){if(this.img_LC||!this.Mut_LC)return;this.img_LC=new Image2(DataTable.getSkin("icon_粮仓")),this.img_LC.x=this.item1.x,this.img_LC.y=0,MainIcon.getInstance().box_uppEff.addChild(this.img_LC)}else if(2==t){if(this.img_WP)return;this.img_WP=new Image2(DataTable.getSkin("icon_物品仓库")),this.img_WP.x=this.item2.x,this.img_WP.y=0,MainIcon.getInstance().box_uppEff.addChild(this.img_WP)}}else if(1==t){if(!this.Mut_LC)return;this.Mut_LC.dispose(),this.Mut_LC=null,this.img_LC=null}else if(2==t){if(!this.Mut_WP)return;this.Mut_WP.dispose(),this.Mut_WP=null,this.img_WP=null}},i.ShowEvaEff=function(t){if(void 0===t&&(t=!1),t){if(!this.m_eff_3){this.m_eff_3=new Muti2DAniIns,this.m_eff_3.createInsFromName("uiimg_仓库升级_ani");this.m_eff_3.GetRect();this.m_eff_3.x=33+this.item3.x,this.m_eff_3.y=35,MainIcon.getInstance().box_uppEff.addChild(this.m_eff_3)}this.m_eva_icon||(this.m_eva_icon=new Image2(DataTable.getSkin("tex_按钮_奖杯大")),this.m_eva_icon.x=this.item3.x,this.m_eva_icon.y=0,MainIcon.getInstance().box_uppEff.addChild(this.m_eva_icon))}else this.m_eff_3&&(this.m_eff_3.dispose(),this.m_eff_3=null),this.m_eva_icon&&(this.m_eva_icon.removeSelf(),this.m_eva_icon.dispose(),this.m_eva_icon=null)},e}(upperIconUI),QuestMr=function(t){function e(){this.mutiTextArr=[],this.mutiTextArrs=[],this.mutiTextA=[],this.m_szArrow=null,this.m_szReward=[],this.listArr=null,this.arrHelpKind=null,this.arrKind=null,this.m_nID=0,this.m_nKind=0,this.m_nNo=0,this.m_nAlpha=0,this.m_nStatus=0,this.m_nHelpKind=0,e.__super.call(this),this.init(),this.OnInitEnd()}__class(e,"display.mainIcon.quest.QuestMr",t);var i=e.prototype;return i.init=function(){DisplayTools.scrollBar=this.meiriList.scrollBar,this.meiriList.array=[1,2,3,4,5,6,7,8,9],this.meiriList.mouseHandler=Handler.create(this,this.OnClick,null,!1),this.meiriList.renderHandler=new Handler(this,this.renderHandlers),this.rewardHandler()},i.OnInitEnd=function(){var t;t=DataTable.m_iSelfUser.m_szDailyQuest,t&&this.InitActQuest(t)},i.renderHandlers=function(t,e){this.upRewardData(e)},i.rewardHandler=function(){for(var t=0;4>t;t++){var e=new GObj2DMutiText;e.LoadAni("tex_文字小_ani"),e.SetScrPos(87,58,0),this.meiriList.getCell(t).addChild(e);var i=new GObj2DMutiText;i.LoadAni("tex_文字小_ani"),i.SetScrPos(217,58,0),this.meiriList.getCell(t).addChild(i),this.mutiTextArr.push([e,i])}for(t=0;4>t;t++){var n=new GObj2DMutiText;n.LoadAni("tex_文字中_ani"),n.SetScrPos(62,28,2),this.meiriList.getCell(t).getChildByName("m_iNum").addChild(n);var s=new GObj2DMutiText;s.LoadAni("tex_文字中_ani"),s.SetScrPos(60,28,0),this.meiriList.getCell(t).getChildByName("m_iNum").addChild(s),this.mutiTextArr.push([n,s])}},i.upRewardData=function(t){if(!(t>=this.mutiTextArrs.length||0>t))for(var e=0;2>e;e++){var i="";this.mutiTextArrs[t][e]&&(i="X"+this.mutiTextArrs[t][e]),this.mutiTextArr[t%4][e].SetText(i),this.mutiTextArr[t%4+4][e].SetText(this.mutiTextA[t][e]+"")}},i.InitActQuest=function(t){this.listArr=[],this.m_szArrow=[],this.arrHelpKind=[],this.arrKind=[],this.mutiTextArrs=[],this.mutiTextA=[];var e,i=[],n=[],s=[],a=0,r=0;for(t&&(r=t.length),a=0;r>a;a++)if(t[a]&&!(t[a].length<1)&&1!=t[a]&&(e=DataTable.m_iSelfUser.GetQuestData(t[a][0])))switch(e[2]){case 2:s.push(e);break;case 1:i.push(e);break;default:n.push(e)}t=i,t=ArrOp.SzLink(t,n),t=ArrOp.SzLink(t,s),this.Init(t)},i.AddNewQuest=function(t){if(0!=t){var e=DataTable.m_iSelfUser.GetQuestData(t);return e.length<1?void gSys.Err("err添加任务的时候报错了"):void 0}},i.Init=function(t){for(var e=0;e<t.length;e++){this.m_szArrow[e]=[],this.mutiTextArrs[e]=[],this.m_nHelpKind=0;var i=new Object;SysID.IsZXRWID(t[e][0])&&(this.m_nKind=0),SysID.IsRCRWID(t[e][0])&&(this.m_nKind=1),SysID.IsHDRWID(t[e][0])&&(this.m_nKind=2),this.arrKind[e]=this.m_nKind;var n=DataTable.m_iQuestTab.GetQuestByID(t[e][0]);this.m_nID=n[0],this.m_nStatus=t[e][2];var s=n[16],a=Math.floor(Util.Clamp(DataTable.m_iSelfUser.GetAchvTagNum(n[14])-t[e][1],0,s)),r=[];r=n[21]&&n[21].length?n[21]:t[e][3],i.m_nStatus=this.m_nStatus,i.m_nID=this.m_nID;var h="/"+s;switch(i.m_iNum={visible:!0},this.mutiTextA.push([a,h]),h+=a.toString(),h=n[5],n[14]){case"get_分享次数":h+="(点击分享)",this.m_nHelpKind=1;break;case"get_普通月卡":h+=DataTable.m_iSelfUser.GetYKXSSJ(3),this.m_nHelpKind=2;break;case"get_超级月卡":h+=DataTable.m_iSelfUser.GetYKXSSJ(4),this.m_nHelpKind=2;break;case"get_vip等级":DataTable.m_iSelfUser.IsVip()||(h+="(点击查看VIP)"),this.m_nHelpKind=3;break;case"get_点石成金次数":case"get_连续点石成金次数":this.m_nHelpKind=4}i.m_iMem=h,this.arrHelpKind.push(this.m_nHelpKind),h=n[23];for(var o=h.split("/"),l=0;l<o.length;l++){if(""==o[l]){this.m_szArrow[e].push([]);break}var u,c,_=o[l].split(":");_.length>1?(u=_[1],c=_[0]):(u="0",c=_[0]),this.m_szArrow[e].push([c,Laya.__parseInt(u)])}i.reward0={visible:!1},i.reward1={visible:!1};for(var m=0;2>m;m++)if(r&&r[m]){var d=DataTable.getSkin(DataTable.m_iItemTab.Get(r[m][0])[3]);i["reward"+m]={visible:!0,icon:d},this.mutiTextArrs[e].push(r[m][1])}this.listArr.push(i),i=null,this.meiriList.array=this.listArr,this.SetComplete(this.m_nStatus,e)}},i.fillData=function(){this.meiriList.refresh()},i.SetComplete=function(t,e){switch(t){case 0:this.listArr[e].m_iNum.visible=!0,this.listArr[e].m_iBtn={visible:!1},this.listArr[e].m_iComplete={visible:!1};break;case 1:this.listArr[e].m_iNum={visible:!1},this.listArr[e].m_iBtn={visible:!0},this.listArr[e].m_iComplete={visible:!1};break;case 2:this.listArr[e].m_iNum={visible:!1},this.listArr[e].m_iBtn={visible:!1},this.listArr[e].m_iComplete={visible:!0}}this.fillData()},i.OnClick=function(t,e){var i=this;if("click"==t.type){if(!this.meiriList.getCell(e).dataSource.m_nStatus)return void this.RunHelp(e);for(var n=NaN,s=NaN,a=[],r=this.meiriList.getCell(e).dataSource.m_nID,h=0;2>h;h++){n=0,s=0;var o=this.meiriList.getCell(e).getChildByName("reward"+h);if(o.visible){var l=this.localToGlobal(new Point(o.x,o.y));a.push([l.x,l.y])}}DataTable.m_iSelfUser.HandInQuest(r,a,null,Handler.create(this,function(t){t&&(i.SetComplete(2,e),2==i.arrKind[e]&&i.AddNewQuest(DataTable.m_iQuestTab.ActContQuest(r)))}))}},i.RunHelp=function(t){switch(this.arrHelpKind[t]){case 1:break;case 2:MainIcon.getInstance().rightIcon.addInterface(2,1);break;case 3:MainIcon.getInstance().rightIcon.addInterface(2,1);break;case 4:break;default:if(this.m_szArrow[t][0].length<1)return;DataTable.m_i_QuestInfo.RunHelp(this.m_szArrow[t])}return 1==this.arrKind[t]?void QuestPanel.getInstance().OnClose():void 0},e}(QuestMeiRiUI),QuestZx=function(t){function e(){this.mutiTextArr=[],this.m_szArrow=[],this.m_nNo=0,this.m_nPlayNo=0,this.m_nStatus=0,this.m_nGroup=0,this.m_nCanPlay=0,this.m_szAward=[],this.m_szAwardPos=null,this.m_szSubQuest=null,this.m_iCompleteArr=[],this.m_Ani=[],e.__super.call(this),this.init()}__class(e,"display.mainIcon.quest.QuestZx",t);var i=e.prototype;return i.init=function(){this.addEvent(),this.addCompleteAni()},i.addCompleteAni=function(){for(var t=0;3>t;t++){var e=new Muti2DAniIns;e.createInsFromName("tex_任务头像效果表现_ani"),DisplayTools.addTarget(e,this.zhuList.getChildByName("item"+t),{x:507,y:67}),e.playAni("完成"),this.m_iCompleteArr.push(e);var i=new GObj2DMutiText;i.LoadAni("tex_文字大_ani"),i.SetScrPos(85,40,1),this.addChild(i),this.getChildByName("item"+t).addChild(i),this.mutiTextArr.push(i)}for(t=0;3>t;t++){var n=new GObj2DMutiText;n.LoadAni("tex_文字中_ani"),n.SetScrPos(144,50,2),this.zhuList.getChildByName("item"+t).addChild(n),n.SetText("12");var s=new GObj2DMutiText;s.LoadAni("tex_文字中_ani"),s.SetScrPos(142,50,0),this.zhuList.getChildByName("item"+t).addChild(s),s.SetText("/12"),this.mutiTextArr.push([n,s])}},i.addEvent=function(){this.zhuList.on("click",this,this.OnBoxClick),this.btn_lq.on("click",this,this.onComplete)},i.onComplete=function(){var t=this;return this.GetHelpNo()>=0?(this.RunHelps(this.GetHelpNo()),void QuestPanel.getInstance().OnClose()):void this.HandIn(Handler.create(this,function(e){e&&t.CompleteEff()}))},i.RunHelps=function(t){for(var e=t;e<this.m_szSubQuest.length&&!this.RunHelp(e);e++);},i.CompleteEff=function(){QuestPanel.getInstance().OnClose(),DataTable.m_i_QuestInfo.CheckQuest()},i.OnBoxClick=function(t){if(!(t.target.name.length<2)){var e=Laya.__parseInt(t.target.name.substring(t.target.name.length-1));this.RunHelp(e),QuestPanel.getInstance().OnClose()}},i.InitData=function(){this.m_szAward=[],this.m_szSubQuest=[],this.m_szAwardPos=[];for(var t=this.m_Ani.length;--t>-1;)DisplayItem.SafeDelObj(this.m_Ani[t]),this.m_Ani.splice(t,1);if(this.m_nGroup=DataTable.m_iSelfUser.m_nQuestGrp,0==this.m_nGroup)throw this.m_nGroup=DataTable.m_iQuestTab.GetQuestGrp(DataTable.m_iSelfUser.m_szQuest[0][0]),new Error("quest group err ");var e,i=DataTable.m_iQuestTab.GetGroupQuest(this.m_nGroup),n=0,s=0,a=1;for(n=0;n<i.length;n++)e=DataTable.m_iSelfUser.GetQuestData(i[n][0]),!e||e.length<1||(s=DataTable.m_iSelfUser.GetAchvTagNum(i[n][14])-e[1],1!=e[2]||QuestCompleteAni.GetIsPlay(i[n][0])?this.Init(n,i[n],s):(this.Init(n,i[n],s,a),QuestCompleteAni.SetIsPlay(i[n][0]),a++,this.m_nCanPlay=1),this.m_szAward.length||(i[n][21]&&i[n][21].length?this.m_szAward=i[n][21]:this.m_szAward=e[3]));this.fillQuestAward(this.m_szAward)},i.OnInitEnd=function(){return 0},i.Init=function(t,e,i,n){void 0===n&&(n=0);var s,a=new Object;this.m_szArrow[t]=[],this.m_nNo=t,this.m_nPlayNo=n;var r=e[16];this.m_nStatus=r>i?0:1,i=Util.Clamp(i,0,r);var h="/"+r;if(a.m_nStatus=this.m_nStatus,this.mutiTextArr[t+3][0].SetText(i+""),this.mutiTextArr[t+3][1].SetText(h),this.m_nStatus?(a.image="",a.mouseEnabled=!1):(a.image="mainIcon/5284c06ea4be702b.png",a.mouseEnabled=!0),a.title=e[5],e[9].length&&this.SetQuestMem(e[9]),e[6].length){var o=e[6],l=e[8];switch(e[7]){case 0:var u=64;0!=l&&(u=Math.floor(64*l)),a.icon={skin:DataTable.getSkin(o),width:u,height:u};break;case 1:a.icon="",s=new GMutiAniIconBase,s.SetAniImg(o,88,88),DisplayTools.addTarget(s.m_disObj,this.zhuList.getChildByName("item"+t).getChildByName("icon")),s.SetAPos(36,36),this.m_Ani.push(s.m_disObj),0!=l&&s.m_disObj.scale(s.m_disObj.scaleX*l,s.m_disObj.scaleY*l);break;case 2:a.icon="",0==l&&(l=1.5),s=new GMutiAniIconBase,s.SetAniImg(o,88,88),DisplayTools.addTarget(s.m_disObj,this.zhuList.getChildByName("item"+t).getChildByName("icon")),s.SetAPos(36,48),this.m_Ani.push(s.m_disObj),s.m_disObj.scale(s.m_disObj.scaleX*l,s.m_disObj.scaleY*l)}}h=e[23];for(var c=h.split("/"),_=0;_<c.length;_++){var m,d,p=c[_].split(":");d=p[0],m=p[1],0!=d.length&&this.m_szArrow[t].push([d,m])}n?this.m_iCompleteArr[t].visible||(this.m_iCompleteArr[t].PlayKindEndRetrun("完成动画1"),this.m_iCompleteArr[t].visible=!0):(this.m_iCompleteArr[t].visible=!1,this.m_iCompleteArr[t].playAni("完成")),this.fillData(a)},i.RunHelp=function(t){return!this.m_szArrow[t]||this.m_szArrow[t].length<1?0:(DataTable.m_i_QuestInfo.RunHelp(this.m_szArrow[t]),this.removeSelf(),1)},i.PlayAni=function(){this.m_nPlayNo},i.SetQuestMem=function(t){this.contentLabel.text=t},i.fillData=function(t){this.m_szSubQuest.push(t);for(var e=0;3>e;e++)e>this.m_nNo&&(this.zhuList.getChildByName("item"+e).visible=!1),e==this.m_nNo&&(this.zhuList.getChildByName("item"+e).dataSource=t,this.zhuList.getChildByName("item"+e).visible=!0)},i.fillQuestAward=function(t){for(var e=0;e<t.length;e++){var i=this.getChildByName("item"+e);i.dataSource={icon:{skin:DataTable.getSkin(DataTable.m_iItemTab.Get(t[e][0])[3]),width:64,height:64}};var n=this.localToGlobal(new Point(i.x,i.y));this.m_szAwardPos.push([n.x,n.y]),this.mutiTextArr[e].SetText(t[e][1]+"")}},i.GetHelpNo=function(){for(var t=-1,e=0;e<this.m_szSubQuest.length;e++)if(!this.m_szSubQuest[e].m_nStatus){t=e;break}return t},i.HandIn=function(t){DataTable.m_iSelfUser.HandInQuest(this.m_nGroup,this.m_szAwardPos,null,Handler.create(this,function(e){return e?void(t&&t.runWith(1)):void(t&&t.runWith(0))}))},i.PlayCompleteAni=function(){this.m_nCanPlay&&(this.m_nCanPlay=0)},e}(QuestZhuXianUI),TreeHelpIcon=function(t){function e(){this.cX=NaN,this.cY=NaN,this.scaleN=.83,this.scaleM=.9,this.isOk=!1,this.m_pLink=null,e.__super.call(this),this.mouseEnabled=!0,this.mouseThrough=!1,this.scale(this.scaleN,this.scaleN),this.showIcon()}__class(e,"display.tree.TreeHelpIcon",t);var i=e.prototype;return i.SetShow=function(t){if(void 0===t&&(t=1),t){var e=this.m_pLink.getCentPtOnScr().x,i=this.m_pLink.getCentPtOnScr().y;DisplayTools.addTarget(this,GameMain._ins.m_gameUI.incontainer,{x:e,y:i,scaleX:.2,scaleY:.2});var n=262,s=0;this.m_pLink.getCentPtOnScr().x<n&&(n-=this.m_pLink.getCentPtOnScr().x,e+=n),this.m_pLink.getCentPtOnScr().y<180&&(s=180,s-=this.m_pLink.getCentPtOnScr().y,i+=s),this.m_pLink.getCentPtOnScr().y>590&&(s=590,s=-(this.m_pLink.getCentPtOnScr().y-590),i+=s),Tween.to(this,{x:e-150,y:i-180,scaleX:DisplayTools.globalScale-.1,scaleY:DisplayTools.globalScale-.1},200)}else this.removeSelf()},i.showIcon=function(){var t="3d/tex/52b429e1ed3f6002.png";this.cropBox.dataSource={cropIcon:t,jiantou:"3d/tex/5284c06ba4be7029.png",jinbi:{visible:!1},jinbiText:"",cropText:""},this.cropBox.on("mousedown",this,this.onMouseDown)},i.onMouseDown=function(){this.isOk=!0,this.cX=this.x,this.cY=this.y,this.stage.once("mouseup",this,this.onMouseUp),Tween.to(this,{scaleX:DisplayTools.globalScale,scaleY:DisplayTools.globalScale},100,Ease.expoInOut,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:.3},jiantou:""},this.startDrag(),this.on("mousemove",this,this.onMouseMove)},i.onMouseMove=function(t){this.m_pLink.isMouseOn()&&(this.m_pLink.AskHelp(),display.tree.TreeHelpIcon.getInstance().SetShow(0),TreePop.getInstance().CheckAll(0))},i.onMouseUp=function(){this.isOk=!1,this.off("mousemove",this,this.onMouseMove),this.stopDrag(),Tween.to(this,{x:this.cX,y:this.cY,scaleX:DisplayTools.globalScale-.1,scaleY:DisplayTools.globalScale-.1},100,null,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:1},jiantou:"3d/tex/5284c06ba4be7029.png"}},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(cropIconUI),TreeIcon=function(t){function e(){this.cX=NaN,this.cY=NaN,this.scaleN=.83,this.scaleM=.9,this.tooltip=null,this.m_nItemID=888,this.isOk=!1,this.han=null,this.m_pLink=null,this.kind=0,this.m_nNum=0,this.m_nGetLock=0,this.tX=NaN,this.tY=NaN,this.memArr=null,this.num=null,e.__super.call(this),this.mouseEnabled=!0,this.mouseThrough=!0,this.num=new GObj2DMutiText,this.num.LoadAni("tex_文字小_ani"),this.cropBox.addChild(this.num),this.num.SetText("20"),this.num.SetScrPos(68,106,1)}__class(e,"display.tree.TreeIcon",t);var i=e.prototype;return i.SetShow=function(t){if(void 0===t&&(t=1),t){var e=0,i=0,n=0;this.tX=this.m_pLink.getCentPtOnScr().x,this.tY=this.m_pLink.getCentPtOnScr().y,DisplayTools.addTarget(this,GameMain._ins.m_gameUI.container,{x:this.tX,y:this.tY,scaleX:.2,scaleY:.2}),1==this.m_pLink.m_nOpState&&this.m_pLink.m_nPickTime<4?(this.tX-=267,this.tY-=140,e=262):(this.tX-=150,this.tY-=180,e=148),this.m_pLink.getCentPtOnScr().x>Laya.stage.width&&(i=this.m_pLink.getCentPtOnScr().x-Laya.stage.width,this.tX-=i),this.m_pLink.getCentPtOnScr().x<e&&(i=e-this.m_pLink.getCentPtOnScr().x,this.tX+=i),this.m_pLink.getCentPtOnScr().y<180&&(n=180,n-=this.m_pLink.getCentPtOnScr().y,this.tY+=n),this.m_pLink.getCentPtOnScr().y>590&&(n=590,n=-(this.m_pLink.getCentPtOnScr().y-590),this.tY+=n),(0!=i||0!=n)&&DisplayItem.m_pBk.setScrOffset(i,n,!0,200),Tween.to(this,{x:this.tX,y:this.tY,scaleX:DisplayTools.globalScale-.1,scaleY:DisplayTools.globalScale-.1},200)}else this.displayInStage&&this.removeSelf()},i.getNum=function(t){return void 0===t&&(t=0),this.kind?this.m_nItemID<1||!this.m_pLink?0:(this.m_nNum=this.m_pLink.GetPickNum(),this.m_nNum):(this.m_nNum=DataTable.m_iSelfUser.GetItemNum(t),this.m_nNum)},i.InitItem=function(t,e,i,n){void 0===i&&(i=0),this.m_pLink=t,this.m_nItemID=e,this.kind=i,this.han=n,this.m_nItemID>0&&this.showIcon()},i.showIcon=function(){var t="";if(!SysID.IsDTJZID(this.m_nItemID))if(this.m_nItemID){var e=DataTable.m_iItemTab.Get(this.m_nItemID);if(null==e)throw new Error("item not find id="+this.m_nItemID);e[3].length>0&&(t=SysID.IsJZPFID(this.m_nItemID)?"tex_角标_配方":e[3])}else t="tex_图标_未知物品";t=DataTable.getSkin(t),this.kind?(this.num.SetText(""),this.cropBox.dataSource={cropIcon:t,jiantou:"3d/tex/5284c06ba4be7029.png",jinbi:{visible:!1},jinbiText:"",cropText:""}):(this.cropBox.dataSource={cropIcon:t,jiantou:"3d/tex/5284c06ba4be7029.png",jinbi:{visible:!1},jinbiText:"",cropText:""},this.num.SetText(this.getNum(this.m_nItemID).toString())),this.tooltip=Tooltip.getInstance(),this.cropBox.on("mousedown",this,this.onMouseDown)},i.CheckAll=function(){this.memArr=DataTable.m_iItemTab.Get(this.m_nItemID);var t={label1:"",label2:"",label3:""};t.label1=this.memArr[2],t.label2=this.memArr[10],this.tooltip.init(128,116),this.tooltip.TipContent=t,this.tooltip.onTipMove(),DisplayTools.addTarget(this.tooltip,GameMain._ins.m_gameUI.incontainer),this.tooltip.upWidth()},i.onMouseDown=function(){this.isOk=!0,this.cX=this.x,this.cY=this.y,this.tooltip&&this.tooltip.displayInStage&&this.tooltip.removeSelf(),this.CheckAll(),this.stage.once("mouseup",this,this.onMouseUp),Tween.to(this,{scaleX:DisplayTools.globalScale,scaleY:DisplayTools.globalScale},100,Ease.expoInOut,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:.3},jiantou:""},this.startDrag(),this.on("mousemove",this,this.onMouseMove)},i.UnLock=function(){this.m_nGetLock=0},i.onMouseMove=function(t){var e=this;if(this.removeTip(),this.m_pLink.isMouseOn())if(this.kind){if(this.kind){if(this.m_nGetLock)return;this.m_nGetLock=1,Laya.timer.once(100,this,this.UnLock),this.m_pLink.OnHarvest(this.m_nItemID,Handler.create(this,function(){var t=e.m_nNum;e.getNum(),t>0&&e.m_nNum<1&&(e.SetShow(0),e.onMouseUp(),TreePop.getInstance().CheckAll(0))}))}}else GameMain._ins.GmView.deleteBuildHandler=Handler.create(this,function(){TreeHelpIcon.getInstance().SetShow(0),GameMain._ins.GmView.deleteBuildHandler.clear(),GameMain._ins.GmView.deleteBuildHandler=null}),this.onMouseUp(),this.m_pLink.OnCut(),this.SetShow(0)},i.onMouseUp=function(){this.isOk=!1,this.removeTip(),this.stage.off("mouseup",this,this.onMouseUp),this.off("mousemove",this,this.onMouseMove),this.stopDrag(),Tween.to(this,{x:this.cX,y:this.cY,scaleX:DisplayTools.globalScale-.1,scaleY:DisplayTools.globalScale-.1},100,null,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:1},jiantou:"3d/tex/5284c06ba4be7029.png"}},i.removeTip=function(){this.tooltip.displayInStage&&this.tooltip.removeSelf()},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(cropIconUI),GPetHuntDlg=function(t){function e(){this.m_pLink=null,this.luckyArr=[],this.m_pDragBox=null,this.m_pQueBox=null,this.m_pGiftBox=null,this.m_pLuckyValue=null,this.addPrice=null,this.m_nNo=0,e.__super.call(this),this.init()}__class(e,"display.petHunt.GPetHuntDlg",t);var i=e.prototype;return i.init=function(){this.pivot(this.width/2,this.height/2),this.mouseEnabled=!0,this.initImg(),this.m_pGiftBox=new GGiftBox,DisplayTools.addTarget(this.m_pGiftBox,this,{x:250,y:-20}),this.m_pQueBox=new GQueBox,this.addChild(this.m_pQueBox),this.buyContainer.mouseEnabled=!0,this.buyButton.on("click",this,this.GotoBuyFirPet),this.m_pDragBox=new GPetDragBox,this.addChild(this.m_pDragBox),this.on("removed",this,this.stopTween)},i.stopTween=function(){Tween.clearAll(this.m_pStartBtn),Laya.timer.clear(this,this.TweenAni),this.m_pStartBtn.scale(1,1)},i.initImg=function(){var t=new Muti2DAniIns;t.createInsFromName("tex_素材_寻宝底板_ani"),this.addChildAt(t,0),t.pos(385,118);var e=new Sprite;e.size(770,230),this.addChildAt(e,0),e.mouseEnabled=!0;var i=new GObj2DMutiText;i.LoadAni("tex_文字小_ani"),this.addChild(i),i.SetScrPos(185,80,0),i.SetText("l"),this.m_pLuckyValue=new GObj2DMutiText,this.m_pLuckyValue.LoadAni("tex_文字小_ani"),this.addChild(this.m_pLuckyValue),this.m_pLuckyValue.SetScrPos(205,76,0),this.m_pLuckyValue.SetText("55"),this.addPrice=new GObj2DMutiText,this.addPrice.LoadAni("tex_文字中_ani"),this.GAddBtn.addChild(this.addPrice),this.addPrice.SetScrPos(35,62,1),this.addPrice.SetText("55Z"),this.GAddBtn.visible=!1},i.GotoBuyFirPet=function(){var t;t="主界面_商店:270/商店物品_宠物01:90";var e=GLeadManager.SeprateLeadStr(t);DataTable.m_i_QuestInfo.RunHelp(e),this.removeSelf()},i.OnCreate=function(){var t=DisplayTools.globalScale;.6>t&&(t=.6),this.OnInit(),this.scale(.3,.3),Tween.to(this,{scaleX:t,scaleY:t},100,Ease.sineIn)},i.OnInit=function(){var t=this,e=this.m_pLink.GetBuildID(),i=DataTable.m_iPetHuntTab.Get(e);this.m_pLink.GetShowItem(Handler.create(this,giftItem=function(n){t.m_pGiftBox.InitGift(n,i[4]);var s=[];s=DataTable.m_iSelfUser.GetMyPetData(),t.m_pDragBox.OnInit(t.m_pQueBox,new GPetItem,752,116,75,116,1);var a=t.m_pLink.GetUnlockNo();5701==e&&(a=1);for(var r=0;r<s.length;r++)if(!(s[r][2].length<1)){2!=s[r][2].length&&(s[r][2]=[0,0]);
var h=[5700,5701,5702,5703],o=ArrOp.SzSearch(e,h);if(!(0>o)){h.splice(o,1);for(var l=0,u=0;u<h.length;u++){var c,_=h[u];c=DataTable.FindInterface("_PETHUNT"+_),c&&c.IsPetOnHunting(s[r][1])&&(l=2)}l?s[r][2][0]=2:2!=s[r][2][0]||l||(s[r][2][0]=0)}}if(t.m_pQueBox.InitQue(t.m_pDragBox,i[2],i[3],a),t.m_pStartBtn.pos(-80+135*(i[3]+1),300),s.length>0&&i[3]>1){var m=[];m=t.GetFriPetData(),m&&m.length>0&&(s=s.concat(m))}t.m_pDragBox.SetOpBtn(s),t.CheckQueChg()}))},i.GetFriPetData=function(){var t=[],e=DataTable.m_iSelfUser.GetFriPetHunt(),i=gSys.GetCurSecAdj();e&&e.length>1&&Math.floor(i/86400)==Math.floor(e[0]/86400)&&(t=e[1]);var n=[],s=[];s=DataTable.m_iSelfFrd.GetAllFriendVar();for(var a=[],r=[],h=0;h<s.length;h++)if(r=s[h],FriendDef.ISFRIEND(r[1])){var o=t?t.indexOf(r[0]):-1;o>=0||r[5].length<1||(a=r[5][2],a&&3==a.length&&(a[1]>1e3||n.push([-1,a[0],null,a[1],r[0],r])))}return!n||n.length<1?null:(n=ArrOp.SzSortEx(n,3,1),n.splice(10,1e3),n)},i.CheckQueChg=function(){this.CalCurLucky();var t=this.m_pQueBox.GetHuntCheck();return t&&t.length>2?(this.m_pGiftBox.SetPetNum(t[3]),this.m_pDragBox.EnablePet(t[0],t[1]),void this.Enable(t[2])):void this.Enable(0)},i.Enable=function(t){return t?(this.xbIcon.filters=[],this.m_pStartBtn.mouseEnabled=!0,this.m_pStartBtn.once("click",this,this.OnStart),this.addChild(this.m_pStartBtn),this.TweenAni(this.m_pStartBtn),void Laya.timer.loop(1e3,this,this.TweenAni,[this.m_pStartBtn],!0)):(this.xbIcon.filters=[ColorFilter.GRAY],this.m_pStartBtn.mouseEnabled=!1,void this.stopTween())},i.TweenAni=function(t){Tween.to(t,{scaleX:1.1,scaleY:1.1},500,Ease.sineInOut,null,0,!0),Tween.to(t,{scaleX:.9,scaleY:.9},500,null,null,500)},i.CalCurLucky=function(){var t;t=this.m_pQueBox.GetHuntPetData();for(var e=0,i=0;i<t.length;i++)if(t[i][0]<0)e+=t[i][3];else{var n=DataTable.m_iPetTab.Get(t[i][1]);n.length<1||(e+=t[i][2].length<1?n[3]:DataTable.m_iSelfUser.GetPetCurLucky(n[3],n[4],t[i][2][1]))}this.m_pLuckyValue.SetText(e+""),this.m_pGiftBox.SetCurLucky(e)},i.OnAddHuntQue=function(t,e){var i=this;DataTable.m_iSelfUser.OnAddHuntQueMax(this.m_pLink.m_nMapDataNo,t,e,Handler.create(this,addhunt=function(){i.m_pLink.SetUnlockNo(t+1),i.OnInit()}))},i.OnStart=function(){var t=this.m_pQueBox.GetHuntPet();DataTable.m_iSelfUser.OnPetHunt(this.m_pLink.m_nMapDataNo,t),this.removeSelf()},i.SetDef=function(t,e){this.m_nNo=e,this.GAddBtn.visible=!0,this.addPrice.SetText(10+50*e+"Z"),this.GAddBtn.x=135*t+50+70,this.GAddBtn.once("click",this,this.OnAddHuntQue,[e,[Laya.stage.mouseX,Laya.stage.mouseY]])},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(PetPanelUI),VIPpsDangweiView=function(t){function e(t){this._vipLv=0,e.__super.call(this),this.aBox=new Box,this._vipLv=t,this.panel_dw.vScrollBar.hide=!0,this.panel_dw.vScrollBar.elasticDistance=200,this.panel_dw.vScrollBar.elasticBackTime=50,this.panel_dw.mouseEnabled=this.panel_dw.content.mouseEnabled=!0,this.initView()}__class(e,"display.mainIcon.vipps.tequanchildren.VIPpsDangweiView",t);var i=e.prototype;return i.initView=function(){this.aBox.visible=!1;for(var t=SysID.GetVipDescriptionByLv(this._vipLv),e=SysID.GetVipReachReward(this._vipLv),i=0,n=0,s=t.length;s>n;n++){var a=new VIPdangweiPsItemUI,r=t[n],h=!1;if(r=r.replace(/<黄色>/g,""),r=r.replace(/<>/g,""),-1!=r.indexOf("<VIP奖励>")&&(r=r.replace("<VIP奖励>",""),h=!0),a.label.text=r,a.pos(0,i),this.panel_dw.addChild(a),i+=a.displayHeight,h){for(var o,l=0,u=e.length;u>l;l++){o={},o.itemID=e[l][0],o.itemNum=e[l][1];var c=new Box;c.size(140,130),c.pos(this.aBox.numChildren*c.width+(this.aBox.numChildren?10:0),0),c.dataSource=o,this.onListRender(c,0),this.aBox.addChild(c)}this.aBox.pos(0,i),this.aBox.visible=!0,this.panel_dw.addChild(this.aBox),i+=this.aBox.displayHeight}}this.aBox.visible&&DisplayTools.onCenter(this.aBox,new Sprite,this.panel_dw)},i.onListRender=function(t,e){if(t.dataSource){var i=t.dataSource.itemID,n=t.dataSource.itemNum,s=t.getChildByName("image"),a=t.getChildByName("aniTe");s||(s=new Image2,s.name="image",s.size(100,100),s.pos(0,0),t.addChild(s));var r=t.getChildByName("ani"),h=t.getChildByName("a_aniTe");if(SysID.IsDTJZID(i)){s&&(s.visible=!1),a&&(a.visible=!1),r&&(r.visible=!0),h&&(h.visible=!0),r||(r=new Muti2DAniIns,r.name="ani"),r.SetOkHandler(Handler.create(this,_A_D=function(){var e=r.GetRect(),i=0,n=0;if(i=e.right-e.left,n=e.bottom-e.top,!(1>i||1>n)){var a=s.width/i,h=s.height/n;a>h&&(a=h),a>1&&(a=1),r.scale(a,a),r.x=(s.width-i*a)/2-e.left*a,r.y=(s.height-n*a)/2-e.top*a,t.addChild(r)}}));var o=DataTable.m_iBuildTab.Get(i);r.createInsFromName(o[4]);var l=o[8];h||(h=new GObj2DMutiText,h.name="a_aniTe",h.LoadAni("tex_文字中_ani"),h.SetScrPos(s.x+s.width/2,s.y+s.height+25,1),t.addChild(h)),h.SetText(""+l+"w")}else{if(s&&(s.visible=!0),a&&(a.visible=!0),r&&(r.visible=!1),h&&(h.visible=!1),i){var u=DataTable.m_iItemTab.Get(i);if(null==u||0==u.length)return void gSys.Err("item not find id="+i);u[3].length>0&&(SysID.IsJZPFID(i)||(s.skin=DataTable.getSkin(u[3])))}else s.skin=DataTable.getSkin("tex_图标_未知物品");a||(a=new GObj2DMutiText,a.name="aniTe",a.LoadAni("tex_文字小_ani"),a.SetScrPos(s.x+s.width-10,s.y+s.height-15,0),t.addChild(a)),a.SetText("X"+n)}}},i.updateHandler=function(){},e}(VIPdangweiPsUI),VipItem_1=function(t){function e(){this.m_nIsIapItem=NaN,this.m_sProductID=null,this.m_nGroup=0,this.m_szProduct=null,this.m_nCanBuy=1,this.label_1_aniText=null,this.usediamond=0,e.__super.call(this),this.initAniText(),this.list_.renderHandler=new Handler(this,this.onListRenderHandler),this.btn_buy.clickHandler=new Handler(this,this.onClickHandler),this.btn_buy.on("mousedown",this,this.onMouseDownHandler),this.btn_buy.pivot(this.btn_buy.width/2,this.btn_buy.height/2),this.btn_buy.x+=this.btn_buy.width/2,this.btn_buy.y+=this.btn_buy.height/2,this.box_double.on("click",this,this.onClickHandler),this.box_double.on("mousedown",this,this.onMouseDownHandler),this.box_double.pivot(this.box_double.width/2,this.box_double.height/2),this.box_double.x+=this.box_double.width/2,this.box_double.y+=this.box_double.height/2}__class(e,"display.mainIcon.vipps.VipItem_1",t);var i=e.prototype;return i.initAniText=function(){this.label_1_aniText=new GObj2DMutiText,this.label_1_aniText.LoadAni("tex_文字大_ani"),this.label_1&&(this.label_1.destroy(),this.iamge_zuanshi_1.destroy()),this.addAniText()},i.addAniText=function(){this.label_1_aniText.SetScrPos(this.width/2,195,1),this.addChild(this.label_1_aniText)},i.onMouseDownHandler=function(t){TweenTool.getInstance().buttonTween(t.currentTarget,!1)},i.onClickHandler=function(){var t=this;if(DataTable.m_iSoundTab.playButton(),this.m_nCanBuy){if(!this.m_nIsIapItem){var e="您确定花费"+this.usediamond+"钻石吗?";return void gSys.PopOkCancel(new Handler(this,_a_=function(){var e=new Point(t.width/2-20,t.height/2),i=t.localToGlobal(e);DataTable.m_iSelfUser.OnDiaToItem(t.m_sProductID,[i.x,i.y,0,"",5],0,Handler.create(t,_back=function(e){e&&t.Refresh()}))}),null,null,e,"","确定","",!1,this.usediamond,null,!1)}if(IapProduct.isstruct(this.m_szProduct)){var i=this.m_sProductID,n=this.m_szProduct[5],s=100*this.m_szProduct[4];GameMarket.onBuy(n,s,DataTable.m_iSelfUser.GetUID(),DataTable.m_iSelfUser.GetLevel(),i,1),MyDiaLog.closeAll()}this.Refresh()}},i.onListRenderHandler=function(t,e){t.dataSource&&this.SetItem(t)},i.update=function(){this._dataSource&&(2!=VIPprivilegeSpreeView.getInstance().m_nKind?this.InitProduct(this._dataSource):this.InitDiaToItem(this._dataSource))},i.InitDiaToItem=function(t,e){void 0===e&&(e=-1),this.m_sProductID=t[0],this.m_nGroup=e,this.m_nIsIapItem=0,this.m_szProduct=t;var i;i=t[4],"名字"==i?(this.label_d_1.visible=!1,this.list_.visible=!0):(this.label_d_1.text=i,this.label_d_1.visible=!0,this.list_.visible=!1),i=this.m_szProduct[5],this.label_1_aniText.SetText(i),this.image_icon.skin=DataTable.getSkin(this.m_szProduct[7]),this.SetBtnData("Z"+t[2],t[3]?"Z"+t[3]:"",1);var n;this.label_lingzeng.text="",this.shuangbei.skin="",n=t[6].slice(),this.m_nGroup<0&&ArrOp.DelSz(0,n),n[0]&&n[0].length&&n[0][1]&&(this.m_nGroup<0&&(this.label_lingzeng.text="另赠"),this.SetBonusItem(n))},i.InitProduct=function(t,e){void 0===e&&(e=-1);this.m_nIsIapItem=1,this.m_sProductID=t[0],this.m_nGroup=e,this.m_szProduct=t,this.image_icon.skin=DataTable.getSkin(this.m_szProduct[8]);var i;this.IsIapStoreItem(this.m_sProductID)&&(i=this.m_szProduct[6],this.label_1_aniText.SetText(i));var n,s,a=0,r=[];switch(n="￥"+this.m_szProduct[4],this.label_lingzeng.text="",this.shuangbei.skin="",this.m_szProduct[2]){case 0:this.m_szProduct[10].length&&(r=this.m_szProduct[10],a=DataTable.m_iSelfUser.IsFirIapBuy(this.m_szProduct[0])),a&&(this.label_lingzeng.text="另赠",this.m_szProduct[7][1]==r[0][1]?this.shuangbei.skin="VIPprivilegespree/55ff667080f5e003.png":this.shuangbei.skin="VIPprivilegespree/55ff667080f5e003_热销.png");break;case 1:a=0;break;case 2:a=0;break;case 5:if(s=StringOp.Compare(this.m_szProduct[0],"s3011")?"￥48":"￥68",r=this.m_szProduct[7].slice(),this.IsIapStoreItem(this.m_sProductID)){this.label_lingzeng.text="另赠";var h,o;h=this.m_szProduct[6],o=StringOp.GetWord(h,"Z"),r[0][1]-=Laya.__parseInt(h)}this.shuangbei.skin="VIPprivilegespree/55ff667080f5e003_热销.png",a=1;break;case 3:this.label_lingzeng.text="每天另赠",s="￥30",r=this.m_szProduct[7],a=1}return this.IsIapStoreItem(this.m_sProductID)&&(s=""),this.SetBtnData(n,s),a?(this.label_d_1.visible=!1,this.list_.visible=!0,void this.SetBonusItem(r)):(this.label_d_1.text=this.m_szProduct[5],this.label_d_1.visible=!0,void(this.list_.visible=!1))},i.SetBonusItem=function(t){if(t.length){for(var e=[],i=0;i<t.length;i++)2==t[i].length&&0!=t[i][1]&&e.push({itemid:t[i][0],num:t[i][1]});this.list_.array=e}},i.SetBtnData=function(t,e,i){if(void 0===i&&(i=0),i){this.usediamond=Laya.__parseInt(t.replace("Z","")),this.box_xiao.destroyChildren();var n=new GObj2DMutiText;n.LoadAni("tex_文字中_ani"),n.SetScrPos(this.box_xiao.width/2,this.box_xiao.height,1),n.SetText(e),this.box_xiao.addChild(n),this.image_last&&(this.image_last.destroy(),this.label_last.destroy());var s=new GObj2DMutiText;s.LoadAni("tex_文字大_ani"),s.SetScrPos(this.box_double.width/2,this.box_double.height-5,1),s.SetText(t),this.box_xiao.addChild(s),this.box_double.visible=!0,this.btn_buy.visible=!1;var a=n.getClipRect();this.image_hengxian.width=a.right-a.left,DisplayTools.onCenter(this.image_hengxian,new Sprite,this.box_double)}else this.btn_buy.label=t,this.box_double.visible=!1,this.btn_buy.visible=!0},i.IsIapStoreItem=function(t){switch(t){case"s3003":return 0;case"s3004":return 0;case"s3005":return 0;case"s3006":return 0;case"s3007":return 0;case"s3008":return 0;case"s3009":return 0;case"s3010":return 0;case"s3011":return 0}return 1},i.SetItem=function(t){var e=t.dataSource.itemid,i=t.getChildByName("clip_"),n=t.getChildByName("label_2"),s=t.getChildByName("box_aniText"),a=t.dataSource.num;switch(a>=0?(n.visible=!1,s||(s=new GObj2DMutiText,s.name="box_aniText",s.SetOkHandler(Handler.create(this,__=function(){t.addChild(s)})),s.LoadAni("tex_文字大_ani")),s.SetScrPos(90,37,0),s.visible=!0,s.SetText("+"+t.dataSource.num)):(s&&(s.visible=!1),n.visible=!1),i.visible=!0,e){case 1:i.index=2;break;case 8:case 23:case 24:case 29:case 30:0>a&&(this.SetMonthCardMem(e,n,a),i.index=3);break;case 2:i.index=0;break;case 25:i.index=1;break;default:i.visible=!1;var r;return void(DiaToItemData.isstruct(this.m_szProduct)?(r=this.m_szProduct[5].charAt(0)+"+"+a,s.SetScrPos(15,45,0),s.visible=!0,s.SetText(r)):IapProduct.isstruct(this.m_szProduct)&&(r=this.m_szProduct[6].charAt(0)+"+"+a,s.SetScrPos(15,45,0),s.visible=!0,s.SetText(r)))}if(a>=0){if(i.visible){var h=s.getClipRect();s.width=h.right-h.left+25,DisplayTools.onCenter(i,s,t)}}else DisplayTools.onCenter(i,n,t)},i.SetMonthCardMem=function(t,e,i){var n;switch(t){case 23:n="作物提速20%";break;case 24:n="家畜提速20%";break;case 8:n="机器加速10%";break;case 29:n="生产提速10%";break;case 30:n="生产提速15%";break;default:return}e.text=n},i.Refresh=function(){if(!(this.m_nGroup<0)){var t,e,i,n=DataTable.m_iActivityTab.GetActivityByID(this.m_nGroup);i=n[14];for(var s=0;s<i.length;s++)t=DataTable.m_iQuestTab.GetQuestByID(i[s][0]),StringOp.Compare(t[15],this.m_sProductID)&&(e=DataTable.m_iSelfUser.GetQuestData(i[s][0]),!e||e.length<1?gSys.Err("iap quest data err id : "+i[s][0]):this.SetCanBuy(e[4],t[17],t[19]))}},i.SetCanBuy=function(t,e,i){var n,s,a=e>t?1:0;switch(i){case 2:n="今日购买已达上限",s="每日限购%a/%b次";break;default:n="购买已达上限",1e3>e&&(s="限购%a/%b次"),StringOp.Compare(this.m_sProductID,"c1029")&&(s="可重复购买")}s=s.replace("%a",t+""),s=s.replace("%b",e+""),this.m_nIsIapItem||(this.m_nCanBuy=a)},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){t.prototype._$set_dataSource.call(this,e),this.update()}),e}(VipItems_1UI),VIPyuekaPSItem=function(t){function e(){this.m_nKind=0,this.m_szVipData=null,this.m_vTips=null,this.m_szProduct=null,this.ani_0=null,this.ani_1=null,e.__super.call(this),DataTable.m_iSelfUser.AddNoti("addmonthdia",this,this.CheckMonthDia),this.box_btn_buy_l.on("click",this,this.OnBuy)}__class(e,"display.mainIcon.vipps.tequanchildren.VIPyuekaPSItem",t);var i=e.prototype;return i.CheckMonthDia=function(t){t==this.m_nKind&&this.InitKind(t)},i.InitKind=function(t){var e;switch(t){case 0:e="s3003";break;case 1:e="s3004";break;case 2:e="s3005";break;case 3:e="s3012";break;case 4:e="s3013"}this.Init(e)},i.Init=function(t){var e=30;this.m_szProduct=IOS_iap.GetProductItem(t);var i=[],n=0;switch(t){case"s3003":case"s3006":this.m_iKindIcon.skin=DataTable.getSkin("tex_农场月卡"),i.push([23,-1]),i.push([2,30]),this.m_vTips=["item",23],this.m_nKind=0;break;case"s3004":case"s3007":this.m_iKindIcon.skin=DataTable.getSkin("uiimg_养殖月卡"),i.push([24,-1]),i.push([2,30]),this.m_vTips=["item",24],this.m_nKind=1;break;case"s3005":case"s3008":this.m_iKindIcon.skin=DataTable.getSkin("uiimg_科技月卡"),i.push([8,-1]),i.push([2,30]),this.m_vTips=["item",8],this.m_nKind=2;break;case"s3012":this.m_iKindIcon.skin=DataTable.getSkin("uiimg_超值月卡"),i=this.m_szProduct[7],this.m_vTips=["item",29],this.m_nKind=3,n=100;break;case"s3013":case"s3014":this.m_iKindIcon.skin=DataTable.getSkin("uiimg_特惠季卡"),i=this.m_szProduct[7],this.m_vTips=["item",30],this.m_nKind=4,e=90,n=120;break;default:return void(this.m_nKind=5)}this.setAni(this.ani_0,0,90,200),this.setAni(this.ani_1,1,90,260),2!=i.length&&Log1.error(5,"月卡数据错误 VIPyuekaPSItem");for(var s=0;s<i.length;s++)2==i[s][0]?this.SetItem(this.box0,i[s][0],i[s][1]):(i[s][1]=-1,this.SetItem(this.box1,i[s][0],i[s][1]));this.SetItem(this.box2,2,n),this.m_szVipData=DataTable.m_iSelfUser.GetVipData(this.m_nKind);var a,r=this.GetSubVipLeftTime();a="￥";var h=1;1>r?(this.m_iKindIcon.disabled=!0,this.label_Day.text=e+"天",this.box_day.visible=!0,this.img_lock.visible=!0,this.label_leftTime.text="未激活",h?(this.btn_label.text="购买"+a+this.m_szProduct[4],this.box_btn_buy_l.disabled=!1,this.box_btn_buy_l.mouseEnabled=!0):(this.btn_label.text="即将开放",this.box_btn_buy_l.disabled=!0,this.box_btn_buy_l.mouseEnabled=!1)):(this.m_iKindIcon.disabled=!1,this.box_day.visible=!1,this.img_lock.visible=!1,this.label_leftTime.text=TimeCalStyle.GetLongTimeText(r,1),h?(this.btn_label.text="续费"+a+this.m_szProduct[4],this.box_btn_buy_l.disabled=!1,this.box_btn_buy_l.mouseEnabled=!0):(this.btn_label.text="即将开放",this.box_btn_buy_l.disabled=!0,this.box_btn_buy_l.mouseEnabled=!1))},i.GetSubVipLeftTime=function(){var t=0;return t=gSys.GetCurSecAdj(),this.m_szVipData[VipData.endtime]<t?0:this.m_szVipData[VipData.endtime]-t},i.OnBuy=function(){var t;switch(this.m_nKind){case 0:t="s3003";break;case 1:t="s3004";break;case 2:t="s3005";break;case 3:t="s3012";break;case 4:t="s3013";break;default:t="s3005"}var e=IOS_iap.GetProductItem(this.m_szProduct[0]);if(!e||0==e.length)return void gSys.GameMsg("未能找到该产品",!1);var i=this.m_szProduct[0],n=this.m_szProduct[5],s=100*this.m_szProduct[4];GameMarket.onBuy(n,s,DataTable.m_iSelfUser.GetUID(),DataTable.m_iSelfUser.GetLevel(),i,1)},i.setAni=function(t,e,i,n){var s=this;t||(t=new Muti2DAniIns),t.SetOkHandler(Handler.create(this,_A_D=function(){t.GetRect();e?t.playAni("每日专享"):t.playAni("购买即送"),t.setPos(i,n),s.addChild(t)})),t.createInsFromName("uiimg_购买即送字_ani")},i.SetItem=function(t,e,i){var n=t.getChildByName("clip_"),s=t.getChildByName("label_2"),a=t.getChildByName("aniText");switch(i>=0?(a||(a=new GObj2DMutiText,a.LoadAni("tex_文字大_ani"),a.SetScrPos(n.x+n.width,30,0),t.addChild(a)),a.SetText("+"+i),a.visible=!0,s&&(s.visible=!1)):(s||(s=new Label,s.bold=!0,s.fontSize=20,s.color="#ffffff",s.pos(n.x+n.width,10),t.addChild(s)),a&&(a.visible=!1),s.visible=!0),e){case 1:n.index=2;break;case 8:case 23:case 24:case 29:case 30:0>i&&(this.SetMonthCardMem(e,s,i),n.index=3);break;case 2:n.index=0;break;case 25:n.index=1;break;default:return}},i.SetMonthCardMem=function(t,e,i){var n;switch(t){case 23:n="作物提速20%";break;case 24:n="家畜提速20%";break;case 8:n="机器加速10%";break;case 29:n="生产提速10%";break;case 30:n="生产提速15%";break;default:return}e.text=n},e}(VIPyuekaPsItemUI),VIPpsYuekaView=function(t){function e(){this.yuekaArr=[3,4],e.__super.call(this)}__class(e,"display.mainIcon.vipps.tequanchildren.VIPpsYuekaView",t);var i=e.prototype;return i.updateHandler=function(){this.box_cjth.dataSource={txt_content:"1.购买月卡、季卡即送大量钻石（多买多送）。\n2.同时购买月卡、季卡后，每日专享钻石可叠加领取；加速特权不可叠加，享受最高15%的加速。"},this.view_one.InitKind(this.yuekaArr[0]),this.view_two.InitKind(this.yuekaArr[1])},e}(VIPyuekaPsUI),VIPpsDaojuView=function(t){function e(){if(e.__super.call(this),e.isboo)throw new Error("这是单例类！");this.list_daoju.scrollBar.hide=!0}__class(e,"display.mainIcon.vipps.VIPpsDaojuView",t);var i=e.prototype;return i.updateHandler=function(t,e){this.list_daoju.array=t;for(var i=0,n=t.length;n>i;i++)if(t[i][0]==e){this.list_daoju.scrollTo(i);break}},i.destoryMySelf=function(){this.removeSelf()},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(VIPpsDaojuUI),VIPpsTequanView=function(t){function e(){if(this.initx=1,this.curx=0,this.offestx=726,this.index=0,this.dw_item_arr=[],this.initA=!1,this.aniT_VipCur=null,this.aniT_Pro=null,this.aniT_VipNext=null,this.box_view=new Box,e.__super.call(this),e.isboo)throw new Error("这是单例类！");this.initView()}__class(e,"display.mainIcon.vipps.VIPpsTequanView",t);var i=e.prototype;return i.onClickBtnHandler=function(t){switch(DataTable.m_iSoundTab.playButton(),t.currentTarget.name){case"box_next":this.nextPageHandler();break;case"box_prev":this.prevPageHandler()}},i.prevPageHandler=function(){this.curx!=this.initx&&(this.index--,1==this.index&&(this.box_prev.visible=!1),this.index<=9&&(this.box_next.visible=!0),this.curx=this.curx+this.offestx,Tween.to(this.box_view,{x:this.curx},300,null,null,2,!0),0==this.index?this.txt_cur_title.text="月卡":this.txt_cur_title.text="VIP "+this.index,this.index-1==0?this.box_prev.dataSource={txt_check_l:"月卡",img_vip_prev:{visible:!1}}:this.box_prev.dataSource={txt_check_l:(this.index-1).toString(),img_vip_prev:{visible:!0}},this.box_next.dataSource={txt_check_r:(this.index+1).toString()})},i.nextPageHandler=function(){this.initA,this.curx!=this.initx-8*this.offestx&&(this.index++,0!=this.index&&(this.box_prev.visible=!0),this.index>=8&&(this.box_next.visible=!1),this.curx=this.curx-this.offestx,Tween.to(this.box_view,{x:this.curx},300,null,null,2,!0),0==this.index?this.txt_cur_title.text="月卡":this.txt_cur_title.text="VIP "+this.index,this.index-1==0?this.box_prev.dataSource={txt_check_l:"月卡",img_vip_prev:{visible:!1}}:this.box_prev.dataSource={txt_check_l:(this.index-1).toString(),img_vip_prev:{visible:!0}},this.box_next.dataSource={txt_check_r:(this.index+1).toString()})},i.initView=function(){this.box_view.mouseEnabled=this.panel_item.mouseEnabled=this.panel_item.content.mouseEnabled=!0,DisplayTools.addTarget(this.box_view,this.panel_item),this.box_view.mouseEnabled=!0;for(var t=1;9>t;t++){var e=new VIPpsDangweiView(t);DisplayTools.addTarget(e,this.box_view,{x:140+(t-1)*(e.width+180),y:3}),this.dw_item_arr.push(e)}this.box_next.on("click",this,this.onClickBtnHandler),this.box_prev.on("click",this,this.onClickBtnHandler)},i.updateHandler=function(t,e){if(this.RefVipData(),this.box_prev.visible=!1,this.box_next.visible=!0,this.index=e?e:1,this.box_view.pos(0,0),this.initx=0,!e){var i=DataTable.m_iSelfUser.GetVipLevel();this.index=i?8==i?8:i:1,this.initA=!0}this.curx=this.initx-this.offestx*(this.index-1),this.index<=1?this.box_prev.visible=!1:this.box_prev.visible=!0,this.index>=8?this.box_next.visible=!1:this.box_next.visible=!0,this.box_view.x=this.curx,0==this.index?this.txt_cur_title.text="月卡":this.txt_cur_title.text="VIP "+this.index,this.index-1==0?this.box_prev.dataSource={txt_check_l:"月卡",img_vip_prev:{visible:!1}}:this.box_prev.dataSource={txt_check_l:(this.index-1).toString(),img_vip_prev:{visible:!0}},this.box_next.dataSource={txt_check_r:(this.index+1).toString()}},i.RefVipData=function(t){void 0===t&&(t=0);var e=DataTable.m_iSelfUser.GetVipLevel(),i=DataTable.m_iSelfUser.GetIapTotalRmb();if(this.aniT_VipCur||(this.aniT_VipCur=new GObj2DMutiText,this.aniT_VipCur.LoadAni("tex_文字大_ani"),this.aniT_VipCur.SetScrPos(142,40,0),this.addChild(this.aniT_VipCur)),this.aniT_VipCur.SetText(e+""),e>=8)this.aniT_Pro&&(this.aniT_Pro.visible=!1),this.aniT_VipNext&&(this.aniT_VipNext.visible=!1),this.txt_zcz.visible=!1,this.prog_progressbar.visible=!1,this.box_noMaxVip.visible=!1,this.label_maxVip.text="当前已达到VIP最高等级",this.label_maxVip.visible=!0;else{var n=DataTable.m_iSelfUser.GetVipNeedRechargeDia(e+1);this.aniT_Pro||(this.aniT_Pro=new GObj2DMutiText,this.aniT_Pro.LoadAni("tex_文字大_ani"),this.aniT_Pro.SetScrPos(290,40,1),this.addChild(this.aniT_Pro)),this.aniT_Pro.SetText(i+"/"+n),this.prog_progressbar.value=i/n,this.aniT_VipNext||(this.aniT_VipNext=new GObj2DMutiText,this.aniT_VipNext.LoadAni("tex_文字大_ani"),this.aniT_VipNext.SetScrPos(790,40,0),this.addChild(this.aniT_VipNext)),this.aniT_VipNext.SetText(e+1+""),this.txt_zcz.text="￥"+(n-i)}},i.destoryMySelf=function(){this.removeSelf()},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(VIPpsTequanUI),GoldSwitchItem=function(t){function e(){this.rule=25,this.curNum=0,this.min=0,this.max=0,this.dis=0,this.globeP=new Point,e.__super.call(this),this.initDrag()}__class(e,"display.roadShop.GoldSwitchItem",t);var i=e.prototype;return i.initDrag=function(){this.totalPriceIco.on("mousedown",this,this.onTotalPriceMouse),this.totalPriceIco.pivot(this.totalPriceIco.width/2,this.totalPriceIco.height/2),this.totalPriceIco.pos(this.totalPriceIcoBg.x+this.rule,this.totalPriceIcoBg.y+this.rule),this.dis=this.totalPriceIcoBg.width-2*this.rule},i.onTotalPriceMouse=function(t){switch(t.type){case"mousedown":Laya.stage.on("mousemove",this,this.onTotalPriceMouse),Laya.stage.on("mouseup",this,this.onTotalPriceMouse);break;case"mouseup":case"mouseout":Laya.stage.off("mousemove",this,this.onTotalPriceMouse),Laya.stage.off("mouseup",this,this.onTotalPriceMouse);break;case"mousemove":this.globeP=this.globalToLocal(new Point(Laya.stage.mouseX,Laya.stage.mouseY));var e=this.globeP.x;e<this.totalPriceIcoBg.x+this.rule?this.totalPriceIco.x=this.totalPriceIcoBg.x+this.rule:e>this.totalPriceIcoBg.x+this.totalPriceIcoBg.width-this.rule?this.totalPriceIco.x=this.totalPriceIcoBg.x+this.totalPriceIcoBg.width-this.rule:this.totalPriceIco.x=e,this.curNum=Math.floor((this.totalPriceIco.x-this.totalPriceIcoBg.x-this.rule)/this.dis*(this.max-this.min)),this.event("dragChange")}},i.SetMinMax=function(t,e){this.min=t,this.max=e},i.setCurValue=function(t){this.curNum=t,this.event("dragChange");var e=this.curNum/(this.max-this.min)*this.dis+this.totalPriceIcoBg.x+this.rule;this.totalPriceIco.x=e},e}(GoldSwitchUI),NumSwitchItem=function(t){function e(){this.rule=25,this.curNum=0,this.min=0,this.max=0,this.dis=0,this.globeP=new Point,e.__super.call(this),this.initDrag()}__class(e,"display.roadShop.NumSwitchItem",t);var i=e.prototype;return i.initDrag=function(){this.saleNum.on("mousedown",this,this.onMouse),this.saleNum.pivot(this.saleNum.width/2,this.saleNum.height/2),this.saleNum.pos(this.saleNumBg.x+this.rule,this.saleNumBg.y+this.rule),this.dis=this.saleNumBg.width-2*this.rule},i.onMouse=function(t){switch(t.type){case"mousedown":Laya.stage.on("mousemove",this,this.onMouse),Laya.stage.on("mouseup",this,this.onMouse);break;case"mouseup":case"mouseout":Laya.stage.off("mousemove",this,this.onMouse),Laya.stage.off("mouseup",this,this.onMouse);break;case"mousemove":this.globeP=this.globalToLocal(new Point(Laya.stage.mouseX,Laya.stage.mouseY));var e=this.globeP.x;e<this.saleNumBg.x+this.rule?this.saleNum.x=this.saleNumBg.x+this.rule:e>this.saleNumBg.x+this.saleNumBg.width-this.rule?this.saleNum.x=this.saleNumBg.x+this.saleNumBg.width-this.rule:this.saleNum.x=e,this.curNum=Math.floor((this.saleNum.x-this.saleNumBg.x-this.rule)/this.dis*(this.max-this.min))+1,this.curNum>this.max&&(this.curNum=this.max),this.event("dragChange")}},i.SetMinMax=function(t,e){this.min=t,this.max=e},i.setCurValue=function(t){this.curNum=t,this.event("dragChange");var e=this.curNum/(this.max-this.min)*this.dis+this.saleNumBg.x+this.rule;this.saleNum.x=e},e}(NumSwitchUI),RoadShopItem=function(t){function e(){this.m_nSzNo=0,this.m_szItem=null,this.m_nLvLock=0,this.m_nItemID=0,this.m_nGetMoney=0,this.m_nSelf=0,this.m_pSellEdit=null,this.m_nMouseEnable=1,this.goodsNum_ani=null,this.m_pPrice_ani=null,e.__super.call(this),this.addEvent()}__class(e,"display.roadShop.RoadShopItem",t);var i=e.prototype;return i.addEvent=function(){this.haveSell.visible=!1,this.on("click",this,this.OnClick),this.goodsNum_ani=new GObj2DMutiText,this.goodsNum_ani.LoadAni("tex_文字小_ani"),this.goodsNum_ani.SetScrPos(66,100,1),this.goodsNum_ani.width=this.goodsNum_ani.getClipRect().right-this.goodsNum_ani.getClipRect().left,this.addChild(this.goodsNum_ani),this.m_pPrice_ani=new GObj2DMutiText,this.m_pPrice_ani.LoadAni("tex_文字中_ani"),this.m_pPrice_ani.SetScrPos(65,125,2),this.m_pPrice_ani.width=this.m_pPrice_ani.getClipRect().right-this.m_pPrice_ani.getClipRect().left,this.addChild(this.m_pPrice_ani)},i.Init=function(t,e){var i=this;this.m_nSzNo=t,this.m_szItem=e,this.m_nLvLock=0,!e||e&&e.length<1?this.m_nItemID=0:this.m_nItemID=e[1],this.m_nGetMoney=0,this.m_pAd.visible=!1;var n=gSys.GetCurSecAdj(),s=0;if(this.m_nSelf=RoadShopView.getInstance().m_nSelf,this.m_nItemID>0){var a=0;if(1==e[5]&&(a=1),a&&this.m_nSelf)this.priceBg.visible=!1,this.discount.visible=!1,this.stateTxt.visible=!1,this.goodsNum_ani.SetText(""),this.m_nGetMoney=e[3],this.m_pPrice_ani.SetText(e[3]+""),SysID.FRD_GETUSERINFO(e[7],null,null,Handler.create(this,function(t){i.m_pNick.text=t[1];var e=new Image2;e.skin=DataTable.getSkin("tex_face"+t[2]),e.pos(32,20),e.size(70,70),i.addChild(e);var n=new Image2;n.skin="roadShop/52a2e789d6558002.png",n.pos(e.x-5,e.y-5),n.size(82,82),i.addChild(n)}));else{this.m_pNick.visible=!1,this.stateTxt.visible=!1;var r=new Image2;r.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.m_nItemID)[3]),r.pos(40,30),r.size(60,60),this.addChildAt(r,this.getChildIndex(this.goodsbox)+1);var h=DataTable.m_iItemTab.Get(this.m_nItemID);if(null==h)return;this.goodsNum_ani.SetText(e[2]+"");var o=3.3*h[6]*e[2],l=SysID.GETSELLPERCENT(e[3],o);if(l.length>0)switch(this.discount.visible=!0,l){case"c9":this.discount.index=1;break;case"c8":this.discount.index=2;break;case"c7":this.discount.index=3;break;case"c6":this.discount.index=0}else this.discount.visible=!1;if(a?(this.goldimg.visible=!1,this.haveSell.visible=!0,this.m_pPrice_ani.SetText(""),this.discount.filters=[ColorFilter.GRAY],this.goodsbox.filters=[ColorFilter.GRAY],r.filters=[ColorFilter.GRAY]):this.m_pPrice_ani.SetText(e[3]+""),n-e[4]<0&&this.m_nSelf&&(this.m_pAd.visible=!0),!this.m_nSelf&&h[5]>DataTable.m_iSelfUser.GetLevel()){var u=new GLvlockUI;u.locktxt.text=h[5]+"级解锁",u.pos(13,40),this.addChild(u),this.m_nLvLock=1}}}else s=1;s&&(this.m_pNick.visible=!1,this.m_pPrice_ani.visible=!1,this.discount.visible=!1,this.discount.visible=!1,this.m_pAd.visible=!1,this.goodsNum_ani.visible=!1,this.priceBg.visible=!1,this.goldimg.visible=!1,this.stateTxt.visible=!0),this.setChildIndex(this.goodsNum_ani,this.numChildren-1)},i.OnLBDown=function(t,e){},i.OnLBUp=function(t,e){},i.OnMouseOut=function(){},i.OnClick=function(){if(this.m_nMouseEnable&&!this.m_nLvLock)if(this.m_nItemID){var t=NaN,e=NaN;if(t=Laya.stage.mouseX,e=Laya.stage.mouseY,this.m_nSelf)this.m_nGetMoney>0?this.GetSellMoney(this.m_nSzNo,this.m_szItem,t,e):this.OpenSellEdit(this.m_nSzNo,this.m_szItem);else{if(0!=this.m_szItem[5])return;this.BuySellItem(this.m_nSzNo,this.m_szItem,t,e)}}else this.m_nSelf&&(RoadShopDepotView.getInstance().myPopup(!1),RoadShopDepotView.getInstance().OnInit(this.m_nSzNo))},i.Enable=function(t){void 0===t&&(t=1),this.m_nMouseEnable=t,t?this.filters=[ColorFilter.GRAY]:this.filters=[]},i.BuySellItem=function(t,e,i,n){RoadShopView.getInstance().EnableItem(t,0),DataTable.m_iSelfUser.OnBuySellItem(t,e,[i,n],RoadShopView.getInstance())},i.GetSellMoney=function(t,e,i,n){RoadShopView.getInstance().EnableItem(t,0),DataTable.m_iSelfUser.OnGetSellMoney(t,null,[i,n])},i.OpenSellEdit=function(t,e){this.m_pSellEdit||(this.m_pSellEdit=new OnSaleItem),this.m_pSellEdit.myPopup(),this.m_pSellEdit.OnInit(t,e,RoadShopView.getInstance().GetAdCdTime())},e}(RoadShopItemUI),RoadShopLockItem=function(t){function e(){this.m_nFriend=0,this._diamond=0,e.__super.call(this)}__class(e,"display.roadShop.RoadShopLockItem",t);var i=e.prototype;return i.setDef=function(t,e){if(this._diamond=e,this.goodsbox.filters=[ColorFilter.GRAY],t>0)this.m_nFriend=1,this.goldbox.visible=!1,this.friendtxt.text="还需要"+t+"个好友解锁!";else{this.friendtxt.visible=!1;var i=new GObj2DMutiText;i.LoadAni("tex_文字中_ani"),i.SetText(e+""),i.SetScrPos(28,27,1),i.width=i.getClipRect().right-i.getClipRect().left,this.goldbox.addChild(i)}this.on("click",this,this.onMouse)},i.onMouse=function(){return this.m_nFriend?void MainIcon.getInstance().onAddFirendView():void MessageBox.show(5,{title:"提示",content:"你确定花费"+this._diamond+"钻石吗？",num:this._diamond},new Handler(this,this.okHandler))},i.okHandler=function(){var t=NaN,e=NaN;t=Laya.stage.mouseX,e=Laya.stage.mouseY,this.OnAddSellMax(t,e)},i.OnAddSellMax=function(t,e){DataTable.m_iSelfUser.OnAddSellMax([t,e])},e}(RoadShopLockItemUI),PaperDesItem=function(t){function e(){e.__super.call(this),this.init()}__class(e,"display.tv.PaperDesItem",t);var i=e.prototype;return i.init=function(){},i.setPaperData=function(t){var e=new Muti2DAniIns;e.createInsFromName("_Map_Cloud_地图云新3_ani"),DisplayTools.addTarget(e,this,{x:0,y:0,scaleX:0,scaleY:0},0),Laya.timer.frameOnce(3,this,this.FitSize,[e,1.5]),this.cubTxt.text="+"+t[1],this.moneyTxt.text=t[2],this.nicheng.text=t[3]},i.FitSize=function(t,e,i,n){void 0===e&&(e=1),void 0===i&&(i=450),void 0===n&&(n=410);var s=0,a=0,r=t.GetRect();if(r&&(s=r.right-r.left,a=r.bottom-r.top,!(1>s||1>a))){var h=i/s,o=n/a;h>o&&(h=o),h>e&&(h=e),t.scale(h,h),t.x=(i-s*h)/2-r.left*h,t.y=(n-a*h)/2-r.top*h}},e}(PaperDesItemUI),PaperItem=function(t){function e(){this.m_nUid=0,this.goodsNum_ani=null,this.moneyTxt_ani=null,this.item=ItemFeild.getInstance(),e.__super.call(this),this.init()}__class(e,"display.tv.PaperItem",t);var i=e.prototype;return i.init=function(){this.on("click",this,this.onMouseClick),this.goodsNum_ani=new GObj2DMutiText,this.goodsNum_ani.LoadAni("tex_文字小_ani"),this.goodsNum_ani.SetScrPos(65,100,1),this.goodsNum_ani.width=this.goodsNum_ani.getClipRect().right-this.goodsNum_ani.getClipRect().left,this.addChild(this.goodsNum_ani),this.moneyTxt_ani=new GObj2DMutiText,this.moneyTxt_ani.LoadAni("tex_文字中_ani"),this.moneyTxt_ani.SetScrPos(65,127,1),this.addChild(this.moneyTxt_ani)},i.onMouseClick=function(t){DataTable.m_iOtherUser.applyOtherData(this.m_nUid,Handler.create(this,function(t){GMapView.lubiantan.OnClick()}),!0),PaperView.getInstance().close()},i.setPaperData=function(t){this.m_nUid=t[1],this.goodsImg.skin=DataTable.getSkin(this.item.getItemArr(t[5])[3]),this.goodsNum_ani.SetText(t[6]+""),this.moneyTxt_ani.SetText(t[7]+"$"),
this.homeName.text=t[2],this.homeName.width>120?this.homeName.scaleX=this.homeName.scaleY=120/this.homeName.width:this.homeName.x=103+(120-this.homeName.width)/2,this.head.skin=DataTable.getSkin("tex_face"+t[3]),this.helpstatus.visible=t[8];var e=DataTable.m_iItemTab.Get(t[5]),i=3.3*e[6]*t[6],n=SysID.GETSELLPERCENT(t[7],i);if(n.length>0)switch(this.discount.visible=!0,n){case"c9":this.discount.index=1;break;case"c8":this.discount.index=2;break;case"c7":this.discount.index=3;break;case"c6":this.discount.index=0}else this.discount.visible=!1},e}(PaperItemUI),GFastTimePro=function(t){function e(){this.m_nLeftTime=0,this.m_nAllCoolT=0,this.m_pLink=null,this.m_nNeedDiamon=0,e.__super.call(this),this.onInit()}__class(e,"game.ui.comui.GFastTimePro",t);var i=e.prototype;return i.onInit=function(){this.m_pCDOver.on("click",this,this.OnCDOver,[1])},i.SetLinkObj=function(t){this.m_pLink=t},i.SetDef=function(t,e,i,n){void 0===n&&(n=8),this.m_nNeedDiamon=n},i.OnCDOver=function(t){Laya.timer.clear(this,this.SetLeftSec),this.m_pLink.OnCDOver(t)},i.Init=function(t,e,i){return void 0===i&&(i=1),Laya.timer.clear(this,this.SetLeftSec),this.m_nLeftTime=t,this.m_nAllCoolT=e,1>t?void(this.m_pLink&&this.m_pLink.TimeEnd()):(this.SetLeftSec(),void Laya.timer.loop(1e3,this,this.SetLeftSec))},i.SetLeftSec=function(){var t=this.m_nLeftTime;if(1>t)return Laya.timer.clear(this,this.SetLeftSec),void this.m_pLink.TimeEnd();if(!(this.m_nAllCoolT<1)){var e=(this.m_pLink.GetNeedDiamond(t),TimerTools.conversion(t));this.m_pLeftSec.text=e,this.m_pProgress.value=(this.m_nAllCoolT-t)/this.m_nAllCoolT,this.m_nLeftTime--}},e}(GFastTimeProUI),GPetDragBox=function(t){function e(){this.m_TabName=null,e.__super.call(this),this._$7_init()}__class(e,"display.petHunt.GPetDragBox",t);var i=e.prototype;return i._$7_init=function(){this.mouseEnabled=!0,this.mouseThrough=!0,this.m_TabName=new Text,this.m_TabName.color="#FFFFFFFF",this.addChild(this.m_TabName)},i.SetTabName=function(t){this.m_TabName.text=t},i.EnablePet=function(t,e){},i.ResetPos=function(){var t=0,e=0;t=this.m_nOpBtnX,e=90;for(var i=0;i<this.m_szOpBtn.length;i++)this.m_szBkFrame[i].pos(t-65,e-83),this.m_szOpBtn[i].m_disObj.pos(t-10,90),this.bjEvt[i].pos(t-65,e-83),t+=this.m_szOpBtn[i].IsSelfPet()?135:160,this.m_szBkFrame[i].SetData(this.m_szOpBtn[i].GetBkData())},e}(GObjDragBox),Notice=function(t){function e(){e.__super.call(this),this.init()}__class(e,"game.ui.Notice",t);var i=e.prototype;return i.init=function(){this.size(920,643),this.txt.leading=15,this.btn_ok.on("click",this,this.onClickHandler),this.btn_close.on("click",this,this.onClickHandler),DisplayTools.scrollBar=this.txtPanel.vScrollBar},i.sizeHandler=function(){this.pivot(this.width/2,this.height/2),this.scale(DisplayTools.globalScale,DisplayTools.globalScale),this.pos(Laya.stage.width/2,Laya.stage.height/2)},i.onClickHandler=function(){Laya.timer.clear(this,this.onClickHandler),gSys.SetSignal("removeLoading",1),Laya.stage.off("resize",this,this.sizeHandler),this.destroyChildren(),this.removeSelf(),game.ui.Notice.instance=null;var t={};t.ext={},t.ext.dec="关闭登陆公告",t.ext.act=2.7,StatManager.getInstance().send(t)},i.onContextSetFinish=function(){(Browser.onWeiXin||Browser.onMQQBrowser)&&WebGL.isExperimentalWebgl()&&WebGL.addRenderFinish()},i.setText=function(t){var e=/\n/g;t=t.replace(e,"	"),this.txt.text=t,this.sizeHandler(),Laya.stage.addChild(this),Laya.timer.once(1e4,this,this.onContextSetFinish),Laya.timer.once(6e4,this,this.onClickHandler),Laya.stage.on("resize",this,this.sizeHandler)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(gameNoticeUI),GBoardNote=function(t){function e(){this.res_0_red=null,this.res_0_write=null,this.res_0_black=null,this.res_1_red=null,this.res_1_green=null,this.res_pCanDo=null,this.m_pMoney=null,this.m_pExp=null,this.m_pSwingTask=null,this.m_pScaleTask=null,this.m_szData=null,this.m_nszNo=0,this.m_nDel=0,this._scaleOver=!0,this._tw1=null,this._tw2=null,this.m_fCurAngle=NaN,this.count=0,this.angle=30,e.__super.call(this),this.onInit()}__class(e,"game.ui.order.GBoardNote",t);var i=e.prototype;return i.onInit=function(){this.m_pMoney=new GObj2DMutiText,this.m_pMoney.LoadAni("tex_文字中_ani"),this.m_pMoney.SetScrPos(40,78,0),this.addChild(this.m_pMoney),this.m_pExp=new GObj2DMutiText,this.m_pExp.LoadAni("tex_文字中_ani"),this.m_pExp.SetScrPos(40,120,0),this.addChild(this.m_pExp),this.res_0_red=DataTable.getSkin("tex_素材_红订单板"),this.res_0_write=DataTable.getSkin("tex_素材_订单白板"),this.res_0_black=DataTable.getSkin("tex_素材_黑订单板"),this.res_1_red=DataTable.getSkin("tex_素材_红卡子"),this.res_1_green=DataTable.getSkin("tex_素材_绿卡子"),this.res_pCanDo=DataTable.getSkin("tex_素材_对勾"),this.img_0.skin=this.res_0_write,this.img_1.skin=this.res_1_red,this.visible=!0,this.m_pFastPro.SetLinkObj(this),this.m_pFastPro.visible=!1,this.mouseEnabled=!0,this.pivotX=80,this.on("mousedown",this,this.OnLBDown)},i.SetSzNo=function(t){this.m_nszNo=t},i.GetSzNo=function(){return this.m_nszNo},i.OnCDOver=function(t){console.log("[OnCDOver]",t),this.OnSel(0),GOrderDlg.Me().OnDelCd(t)},i.TimeEnd=function(){this.m_pFastPro.visible=!1},i.GetNeedDiamond=function(t){return 3},i.GetData=function(){return this.m_szData},i.IsCanDo=function(){return this.m_pCanDo.visible?1:0},i.SetData=function(t){if(this.m_szData=t,this.m_pFastPro.visible=!1,3==t.length){if(0!=t[0])return this.m_nDel=0,this.SetNote(t[2]),this.visible=!0,1;if(0==t[0]&&0==t[1])return this.visible=!1,0}this.m_nDel=1,this.m_pName.text="等待订单";var e=DataTable.m_iUserLevelTab.Get(DataTable.m_iSelfUser.GetLevel());return this.m_pFastPro.Init(t[1]+60*e[3]-gSys.GetCurSecAdj(),60*e[3]),this.m_pFastPro.visible=!0,this.SetNote(null),this.visible=!0,1},i.SetNote=function(t){if(!t)return void this.Clear();if(this.m_pName.text=""+t[1],DataTable.m_iSelfUser.IsActWeekend(0))switch(DataTable.m_iSelfUser.getDoubleActState(0)){case 2:this.m_pMoney.SetText("$"+t[4]+"x2"),this.m_pExp.SetText("E"+t[5]);break;case 3:this.m_pMoney.SetText("$"+t[4]),this.m_pExp.SetText("E"+t[5]+"x2");break;default:this.m_pMoney.SetText("$"+t[4]+"x2"),this.m_pExp.SetText("E"+t[5]+"x2")}else this.m_pMoney.SetText("$"+t[4]),this.m_pExp.SetText("E"+t[5]);this.m_pMoney.visible=!0,this.m_pExp.visible=!0},i.SetCanDo=function(t){return this.m_pCanDo.visible=!1,this.m_nDel?void(this.img_0.skin=this.res_0_black):void(t?(this.img_0.skin=this.res_0_write,this.m_pCanDo.skin=this.res_pCanDo,this.m_pCanDo.visible=!0):this.img_0.skin=this.res_0_red)},i.OnSel=function(t){void 0===t&&(t=1),this.img_1.skin=this.res_1_green,this.ScaleTask(),t&&this.OnSwing(),GOrderDlg.Me().OnSelect(this)},i.UnSel=function(){this.img_1.skin=this.res_1_red,this.m_nDel?this.img_0.skin=this.res_0_black:this.IsCanDo()?this.img_0.skin=this.res_0_write:this.img_0.skin=this.res_0_red},i.ScaleTask=function(){DisplayTools.moveTop(this),Tween.clearTween(this),this._tw1=Tween.to(this,{scaleX:1,scaleY:1},70,Ease.sineIn)},i.OnSwing=function(){Tween.to(this,{rotation:50},200,Ease.sineInOut,null),Tween.to(this,{rotation:-50},200,Ease.sineInOut,null,200),Tween.to(this,{rotation:40},200,Ease.sineInOut,null,400),Tween.to(this,{rotation:-40},200,Ease.sineInOut,null,600),Tween.to(this,{rotation:30},200,Ease.sineInOut,null,800),Tween.to(this,{rotation:-30},200,Ease.sineInOut,null,1e3),Tween.to(this,{rotation:10},200,Ease.sineInOut,null,1200),Tween.to(this,{rotation:0},200,Ease.sineInOut,null,1400)},i.OnLBDown=function(){Tween.to(this,{scaleX:.7,scaleY:.7},200,Ease.sineIn),this.stage.once("mouseup",this,this.OnLBUp)},i.OnLBUp=function(){this.OnSel()},i.Clear=function(){this.m_pMoney.visible=!1,this.m_pExp.visible=!1,this.img_0.skin=this.res_0_black},e}(GBoardNoteUI),NoteMaItem=function(t){function e(){this.m_nNo=0,this.m_nMax=0,this.mutiTextHave=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.order.NoteMaItem",t);var i=e.prototype;return i.onInit=function(){this.mouseEnabled=!0,this.mutiTextHave=new GObj2DMutiText,this.mutiTextHave.LoadAni("tex_文字小_ani"),this.mutiTextHave.SetScrPos(32,85,1),this.addChild(this.mutiTextHave)},i.Init=function(t,e,i,n,s){this.m_nNo=n,this.m_nMax=s,this.mutiTextHave.SetText(e+"/"+i),this.m_item.skin="";var a=ItemFeild.getInstance().getItemArr(t);if(a){var r=a[3];this.m_item.skin=DataTable.getSkin(r)}this.scale(.5,.5),Tween.to(this,{scaleX:1,scaleY:1},500,Ease.elasticOut)},i.OnMoveDisappear=function(t){if(t){var e=0;t?(e=5-this.m_nNo,Tween.to(this,{x:500},100*(e+1))):(e=this.m_nNo,Tween.to(this,{x:0},100*(e+1)));var i=200*(e+1)-200;100>i&&(i=200)}},e}(NoteMaItemUI),ComboBox1=function(t){function e(){e.__super.call(this),e.ins=this,this.init()}__class(e,"Tools.ComboBox",t,"ComboBox1");var i=e.prototype;return i.init=function(){this.visible=!1,this.mouseEnabled=!1,this.clip_0.on("click",this,this.onClickHandler,[0]),this.clip_1.on("click",this,this.onClickHandler,[1]),this.clip_2.on("click",this,this.onClickHandler,[2])},i.onClickHandler=function(t,e){var i=!1,n=e.target;switch(n.index?(n.index=0,i=!1):(n.index=1,i=!0),t){case 0:GameMain._ins.showLand=i,1==i?GameMain._ins.GmView.setAllBuildVis(!1):GameMain._ins.GmView.setAllBuildVis(!0);break;case 1:GameMain._ins.closeAni=i;break;case 2:GameMain._ins.optimizeAni=i}},i.isShow=function(t){this.visible=t,this.mouseEnabled=t},e.ins=null,e}(comboBoxUI),RankAwardView=function(t){function e(){this.m_szAwardDlg=[],this.m_nInitEnd=0,this.m_nKind=0,this.m_nCurNo=0,this.m_nLastNo=0,this.m_pNoOne=null,this.m_iCurItem=null,this.m_iLastItem=null,this.m_iCurGetItem=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.rank.award.RankAwardView",t);var i=e.prototype;return i.onInit=function(){this.m_iCurItem=new GObj2DMutiText,this.m_iCurItem.LoadAni("tex_文字中_ani"),this.m_iCurItem.SetScrPos(240,30,0),this.m_iCurAward.addChild(this.m_iCurItem),this.m_iLastItem=new GObj2DMutiText,this.m_iLastItem.LoadAni("tex_文字中_ani"),this.m_iLastItem.SetScrPos(240,70,0),this.m_iCurAward.addChild(this.m_iLastItem),this.m_iCurGetItem=new GObj2DMutiText,this.m_iCurGetItem.LoadAni("tex_文字中_ani"),this.m_iCurGetItem.SetScrPos(240,30,0),this.m_iGetAward.addChild(this.m_iCurGetItem),this.m_pNoOne=new GObj2DMutiText,this.m_pNoOne.LoadAni("tex_文字中_ani"),this.m_pNoOne.SetScrPos(125,216,1),this.addChild(this.m_pNoOne),this.m_pNoOne.SetText("1"),this.OnInitEnd()},i.OnInitEnd=function(){this.m_iAward0.UseStyle(1),this.m_iAward1.UseStyle(0),this.m_iAward2.UseStyle(0),this.m_iAward3.UseStyle(0),this.m_iAward4.UseStyle(0),this.m_iAward5.UseStyle(0),this.m_iAward6.UseStyle(0),this.m_iAward7.UseStyle(0),this.m_iAward8.UseStyle(0),this.m_iAward9.UseStyle(0),this.m_iAward10.UseStyle(0),this.m_szAwardDlg.push(this.m_iAward0),this.m_szAwardDlg.push(this.m_iAward1),this.m_szAwardDlg.push(this.m_iAward2),this.m_szAwardDlg.push(this.m_iAward3),this.m_szAwardDlg.push(this.m_iAward4),this.m_szAwardDlg.push(this.m_iAward5),this.m_szAwardDlg.push(this.m_iAward6),this.m_szAwardDlg.push(this.m_iAward7),this.m_szAwardDlg.push(this.m_iAward8),this.m_szAwardDlg.push(this.m_iAward9),this.m_szAwardDlg.push(this.m_iAward10),this.m_iAward0.on("click",this,this.OnGetAward),this.m_iAward1.on("click",this,this.OnGetAward),this.m_iAward2.on("click",this,this.OnGetAward),this.m_iAward3.on("click",this,this.OnGetAward),this.m_iAward4.on("click",this,this.OnGetAward),this.m_iAward5.on("click",this,this.OnGetAward),this.m_iAward6.on("click",this,this.OnGetAward),this.m_iAward7.on("click",this,this.OnGetAward),this.m_iAward8.on("click",this,this.OnGetAward),this.m_iAward9.on("click",this,this.OnGetAward),this.m_iAward10.on("click",this,this.OnGetAward),this.m_nInitEnd=1},i.OnShowInfo=function(){if(this.m_nKind=RankDlg.Me().m_nKind,this.m_nCurNo=RankDlg.Me().GetLastRankGroup(),this.m_nLastNo=RankDlg.Me().m_nCanAward,this.m_nLastNo<1&&(this.m_nCurNo=RankDlg.Me().GetCurRankGroup()),!(this.m_nKind>=DataTable.m_iRankAward.m_szAllAward.length)){var t,e=DataTable.m_iRankAward.m_szAllAward[this.m_nKind],i=ArrOp.SzHalfSearch(Math.floor(this.m_nCurNo/1e4),e);0>i&&(i=-1-i);var n=0;if(e&&(n=e.length),!(i>=n)&&e&&e[i]&&!(e[i].length<2)){e=e[i][1];var s=0,a=1,r="",h="",o="";for(s=0;s<e.length;s++){switch(t=e[s],t[1]){case 2:r="Z";break;case 25:r="^";break;case 22:r="G"}if(r+=""+t[2],t.length>4){switch(t[3]){case 2:h="Z";break;case 25:h="^";break;case 22:h="G"}h+=""+t[4]}else h="";if(t.length>6){switch(t[5]){case 2:o="Z";break;case 25:o="^";break;case 22:o="G"}o+=""+t[6]}else o="";this.m_szAwardDlg[s].SetInfo(a,t[0],r,h,o,this.m_nLastNo),a=t[0]+1}this.m_nLastNo>=a&&RankDlg.Me().OnGetAward(null),this.SetAwardState()}}},i.GetAwardString=function(t){if(this.m_nKind>=DataTable.m_iRankAward.m_szAllAward.length)return null;var e,i=DataTable.m_iRankAward.m_szAllAward[this.m_nKind],n=ArrOp.SzHalfSearch(Math.floor(this.m_nCurNo/1e4),i);0>n&&(n=-1-n);var s=0;if(i&&(s=i.length),n>=s)return null;if(!i||!i[n]||i[n].length<2)return null;i=i[n][1];var a,r=0,h=" -",o=0;for(r=0;r<i.length;r++){switch(e=i[r],e[1]){case 2:a="Z";break;case 25:a="^"}if(a+=""+e[2],t<=e[0])break}if(0==t&&(a=" -"),r>=i.length&&(a=" -"),r--,r>=0){switch(e=i[r],e[1]){case 2:h="Z";break;case 25:h="^"}h+=""+e[2],o=e[0]}return[a,h,o]},i.SetAwardState=function(){this.m_iCurAward.visible=this.m_nLastNo<1,this.m_iGetAward.visible=this.m_nLastNo>0;var t,e,i=0;this.m_nLastNo<1?(i=RankDlg.Me().m_nCurPerNo,t=this.GetAwardString(i),e="排名 %",e=1>i?"无    ":e.replace("%",i),this.m_iCurItem.SetText("")," -"!=t[0]?this.m_iCurItem.SetText(t[0]):e+="   无",this.m_iCur.text=e,e="排名 %",e=t[2]<1?"无    ":e.replace("%",t[2]),this.m_iLastItem.SetText("")," -"!=t[1]?this.m_iLastItem.SetText(t[1]):e+="   无",this.m_iLast.text=e):(t=this.GetAwardString(this.m_nLastNo),e="排名第 %",e=e.replace("%",this.m_nLastNo),this.m_iCurGet.text=e,this.m_iCurGetItem.SetText(t[0]))},i.OnGetAward=function(){RankDlg.Me().OnGetAward(null),RankAGShowDlg.Me().OnClose()},i.dispose=function(){this.removeChildren();for(var t,e=0;this.m_szAwardDlg&&e<this.m_szAwardDlg.length;e++)t=this.m_szAwardDlg[e],t&&(t.offAll("click"),t.dispose()),this.m_szAwardDlg[e]=null,t=null;this.m_szAwardDlg=null},e}(RankAwardViewUI),SubAct=function(t){function e(){this.m_pMyHead=null,this.m_iIcon=null,this.m_nID=0,e.__super.call(this),this.m_pMyHead=new Head,this.m_pMyHead.mouseEnabled=!1,this.m_pMyHead.initInfo(DataTable.m_iSelfUser.GetUID()),this.m_pMyHead.pos(90,5),this.addChild(this.m_pMyHead),this.m_iIcon=new Muti2DAniIns,this.m_iIcon.pos(145,100),this.m_iIcon.scale(.5,.5),this.addChild(this.m_iIcon)}__class(e,"game.ui.rank.act.SubAct",t);var i=e.prototype;return i.OnInitEnd=function(){},i.SetData=function(t,e,i){this.m_nID=e;var n=DataTable.m_iBuffGroupTab.Get(e);if(null!=n){this.m_iIcon.createInsFromName(n[4]);var s="本周活动全球榜第%名";s=s.replace("%",t),this.m_iRankInfoLable.text=s;var a=TimeCalStyle.GetLongTimeText(n[6],1);this.m_iTimeLable.text="尊享"+a,this.m_iInforLable.text=n[2];var r=0;0>i?(-100==i&&(r=1),this.m_iGotShow.visible=!1,this.m_iGetRewardBtn.visible=!1):(this.m_iGetRewardBtn.mouseEnabled=!i,this.m_iGetRewardBtn.mouseEnabled?this.m_iGetRewardBtn.filters=[]:this.m_iGetRewardBtn.filters=[ColorFilter.GRAY],i?(this.m_iGotShow.visible=!0,this.m_iGetRewardBtn.visible=!1):(this.m_iGotShow.visible=!1,this.m_iGetRewardBtn.visible=!0))}},i.GetReward=function(){this.m_iGetRewardBtn.mouseEnabled=!1,this.m_iGetRewardBtn.filters=[ColorFilter.GRAY],DataTable.m_iSelfUser.GetMyWorldRankReward(Handler.create(this,this.onGetRewardNext))},i.onGetRewardNext=function(t){return 0>=t?(this.m_iGetRewardBtn.mouseEnabled=!0,void(this.m_iGetRewardBtn.filters=[])):(RankDlg.Me()&&RankDlg.Me().OnChgGetAwardState(),void GFlyItemIcon.FlyText("领取成功！","#00ff00"))},e}(SubActUI),RandsItem=function(t){function e(){this.m_pNo=null,this.m_pUp=null,this.m_pLvl=null,this.m_pLvlIcon=null,this.m_pTr=null,this.m_pIcon=null,this.m_pTrCr=null,this.m_nUid=0,e.__super.call(this),this.m_pNo=new GObj2DMutiText,this.m_pNo.LoadAni("tex_文字大_ani"),this.m_pNo.SetScrPos(36,40,1),this.addChild(this.m_pNo),this.m_pUp=new GChgSign,this.m_pUp.pos(80,10),this.addChild(this.m_pUp),this.m_pLvlIcon=new Image2,this.m_pLvlIcon.pivot(28,28),this.m_pLvlIcon.size(56,56),this.m_pLvlIcon.skin=DataTable.getSkin("tex_按钮_经验"),this.addChild(this.m_pLvlIcon),this.m_pLvlIcon.pos(155,35),this.m_pLvl=new GObj2DMutiText,this.m_pLvl.LoadAni("tex_文字中_ani"),this.m_pLvl.SetScrPos(155,40,1),this.addChild(this.m_pLvl),this.m_pTrCr=new Sprite,this.m_pTrCr.pos(680,40),this.addChild(this.m_pTrCr),this.m_pTrCr.scaleX=this.m_pTrCr.scaleY=.7,this.m_pTr=new GObj2DMutiText,this.m_pTr.LoadAni("tex_文字大_ani"),this.m_pTr.SetScrPos(0,0,2),this.m_pTrCr.addChild(this.m_pTr),this.m_pIcon=new Image2,this.m_pIcon.size(64,64),this.m_pIcon.pivot(32,32),this.m_pIcon.pos(706,30),this.addChild(this.m_pIcon)}__class(e,"game.ui.rank.RandsItem",t);var i=e.prototype;return i.InitTop=function(t,e,i,n,s){var a=i[0],r=i[1];this.m_nUid=r,r==DataTable.m_iSelfUser.GetUID()?(this.mouseEnabled=!1,this.m_pBg.skin=DataTable.getSkin("tex_素材_蓝排名底板")):(this.m_pBg.skin=DataTable.getSkin("tex_素材_橙排名底板"),this.mouseEnabled=!0),this.m_pLvl.SetText(""+i[2][0]),this.m_pName.text=i[2][1];i[3];return this.CountValueStr(a),this.m_pIcon.skin=s,RankDlg.Me().m_nWorld<2?this.SetNoChg(t,i[3]):this.SetNoChg(t,t),this.m_pNo.SetText(""+(e+1)),this.CreateIcon(e),r==DataTable.m_iSelfUser.GetUID()},i.CountValueStr=function(t){var e=t.toString(),i=Math.floor(e.length/3);e.length<=3*i&&i--,0>i&&(i=0);var n=NaN;n=i>0?t/Math.pow(10,3*i):t;var s=["","k","m","b","t"];e=""+n.toFixed(2),e=e.replace(".00","");var a=e.indexOf(".");a>2&&(e=e.substr(0,a+2)),e+=s[i],this.m_pTr.SetText(e)},i.SetNoChg=function(t,e){if(this.m_pNo.SetText(""+(t+1)),1==RankDlg.Me().m_nWorld&&t+1>200){var i,n=t+1,s=n+"",a=Math.floor(s.length/3);s.length<=3*a&&a--,0>a&&(a=0);var r=NaN;r=a>0?n/Math.pow(10,3*a):n;var h=["","k","m","b","t"];s=""+r;var o=s.indexOf(".");if(o>=0){var l=StringOp.GetWordM(s,".");i=l[1],s=l[0],l=null,s=i}else s=r+"";a=s.length,a>1&&(n=Laya.__parseInt(s),n=Math.floor(n/(10*(a-1))*(10*(a-1))),s=""+n),s+=h[a],o>0&&(s+="+"),this.m_pNo.SetText(s)}e-=t,Math.abs(e)>5e3&&(e=0),this.m_pUp.Set(e)},i.CreateIcon=function(t){if(3>t)switch(t){case 0:this.m_pNoIcon.skin=DataTable.getSkin("tex_图标_奖牌_1");break;case 1:this.m_pNoIcon.skin=DataTable.getSkin("tex_图标_奖牌_2");break;case 2:this.m_pNoIcon.skin=DataTable.getSkin("tex_图标_奖牌_3")}else this.m_pNoIcon.skin=null},e}(RandsItemUI),RankGroupView=function(t){function e(){this.m_nKind=0,this.m_nCurNo=0,this.m_nLastNo=0,this.m_nMoveOver=0,this.m_szAwardDlg=null,e.__super.call(this)}__class(e,"game.ui.rank.award.RankGroupView",t);var i=e.prototype;return i.OnInitEnd=function(){this.m_nKind=RankDlg.Me().m_nKind,this.m_nCurNo=RankDlg.Me().GetCurRankGroup()/1e4,this.m_nLastNo=RankDlg.Me().m_szLaskRankLv[this.m_nKind]},i.OnShowInfo=function(){if(this.OnInitEnd(),!(this.m_nMoveOver||(this.m_szAwardDlg=[],this.m_nMoveOver=1,this.m_nKind>=DataTable.m_iRankAward.m_szAllAward.length))){var t,e,i,n=DataTable.m_iRankAward.m_szAllAward[this.m_nKind],s=0,a=25,r=6,h=n.length;for(h>r&&(h=r),s=0;h>s;s++){switch(t=n[s][1][0],i=new SubGroup,t[1]){case 2:e="Z";break;case 25:e="^"}e+=""+t[2],i.SetParam(s,e,this.m_nCurNo),i.OnInitEnd(),i.pos(a,100),a+=150,this.m_szAwardDlg.push(i),this.addChild(i)}}},i.dispose=function(){this.removeChildren();for(var t,e=0;this.m_szAwardDlg&&e<this.m_szAwardDlg.length;e++)t=this.m_szAwardDlg[e],t&&t.dispose(),this.m_szAwardDlg[e]=null,t=null;this.m_szAwardDlg=null},e}(RankGroupViewUI),SubAward=function(t){function e(){this.m_iAward=null,this.m_iAward2=null,this.m_iAward3=null,e.__super.call(this),this.m_iAward=new GObj2DMutiText,this.addChild(this.m_iAward),this.m_iAward2=new GObj2DMutiText,this.m_iAward2.LoadAni("tex_文字中_ani"),this.addChild(this.m_iAward2),this.m_iAward3=new GObj2DMutiText,this.m_iAward3.LoadAni("tex_文字中_ani"),this.addChild(this.m_iAward3),this.Init()}__class(e,"game.ui.rank.award.SubAward",t);var i=e.prototype;return i.Init=function(){this.m_iAward2.visible=!1,this.m_iAward3.visible=!1},i.UseStyle=function(t){void 0===t&&(t=0),1==t?(this.m_iAward.LoadAni("tex_文字大_ani"),this.m_pbk.width=430,this.m_iText.pos(14,100),this.m_iAward.SetScrPos(250,90,1),this.m_iAward2.SetScrPos(180,125,1),this.m_iAward3.SetScrPos(310,125,1),this.size(430,137)):(this.m_iAward.LoadAni("tex_文字中_ani"),this.m_pbk.width=198,this.m_iText.pos(8,18),this.m_iAward.SetScrPos(90,90,1),this.m_iAward2.SetScrPos(50,125,1),this.m_iAward3.SetScrPos(150,125,1),this.size(198,137))},i.SetInfo=function(t,e,i,n,s,a){var r="排名";r+=t==e||1>e-t?""+e:""+t+"-"+e,this.m_iText.text=r,this.m_iAward.SetText(i),n.length>0?(s.length<1&&this.m_iAward2.SetScrPos(100,100,1),this.m_iAward2.SetText(n),this.m_iAward2.visible=!0):this.m_iAward2.visible=!1,s.length>0?(this.m_iAward3.SetText(s),this.m_iAward3.visible=!0):this.m_iAward3.visible=!1,this.visible=!0;var h=0;return this.filters=null,0!=a&&(a==e||a>=t&&e>=a)&&(h=1),h>0?this.mouseEnabled=!0:(this.mouseEnabled=!1,a>0&&(this.filters=[ColorFilter.GRAY])),h},i.dispose=function(){this.removeChildren()},e}(SubAwardUI),SubGroup=function(t){function e(){this.m_nLv=0,this.m_sNum="",this.m_iOver=null,this.m_iCupShow=null,this.m_pCupNum=null,this.m_pLevOver=null,this.m_pLevNum=null,this.m_pBg=null,this.m_nCurNo=0,e.__super.call(this),this.m_pBg=new Sprite,this.m_iChgBk.pos(0,-128),this.m_pBg.pos(0,340),this.m_pBg.addChild(this.m_iChgBk),this.addChildAt(this.m_pBg,0),this.m_iCupShow=new Muti2DAniIns,this.m_iCupShow.createInsFromName("uiimg_金奖杯金杯_ani"),this.m_pCup.addChild(this.m_iCupShow),this.m_iCupShow.pos(55,-40),this.m_pCupNum=new GObj2DMutiText,this.m_pCupNum.LoadAni("tex_文字中_ani"),this.m_pCupNum.SetScrPos(55,90,1),this.m_pCup.addChild(this.m_pCupNum),this.m_pLevOver=new Muti2DAniIns,this.m_pLevOver.addChild(this.m_pLevOver),this.m_pLevNum=new GObj2DMutiText,this.m_pLevNum.LoadAni("tex_文字中_ani"),this.m_pLevNum.SetScrPos(100,40,1),this.m_pLev.addChild(this.m_pLevNum),this.m_iOver=new Image2,this.m_iOver.skin=DataTable.getSkin("uiimg_已挑战"),this.m_iOver.pos(-10,-75),this.m_iOver.visible=!1,this.m_pCup.addChild(this.m_iOver)}__class(e,"game.ui.rank.award.SubGroup",t);var i=e.prototype;return i.SetParam=function(t,e,i){this.m_nLv=t,this.m_sNum=e,this.m_nCurNo=i},i.OnInitEnd=function(){this.m_iCupShow.visible=!1,this.m_pLev.visible=!1;var t;t=PubDef.RANK_LV_GROUP(),this.m_iCupShow.playAni("奖杯"+(this.m_nLv+1)),this.m_pCupNum.SetText(this.m_sNum);var e=0,i=1;this.m_nLv>0&&(i=t[this.m_nLv-1]+1),this.m_nLv<t.length&&(e=t[this.m_nLv]);var n=""+i;n+=e>0?"-"+e:"+",this.m_pLevNum.SetText(n),Laya.timer.once(200*this.m_nLv,this,this.OnStarMove)},i.OnStarMove=function(){if(this.m_nLv>0){var t=193-20*this.m_nLv,e=1+.15*this.m_nLv;Tween.to(this.m_pCup,{y:t},200,Ease.linearIn),Tween.to(this.m_pBg,{scaleY:e},150,Ease.linearIn)}this.m_pLev.visible=!0,this.m_iCupShow.visible=!0;var i=370;Tween.to(this.m_pLev,{y:i},200,Ease.backOut),this.m_nLv>=this.m_nCurNo||(Tween.from(this.m_iOver,{scaleX:2,scaleY:2},200,Ease.cubicIn),this.m_iOver.visible=!0)},i.dispose=function(){Laya.timer.clearAll(this),Tween.clearAll(this),Tween.clearAll(this.m_pLev),Tween.clearAll(this.m_iOver),Tween.clearAll(this.m_pCup),Tween.clearAll(this.m_pBg),this.removeChildren(),this.m_iOver=null,this.m_iCupShow=null,this.m_pCupNum=null,this.m_pLevOver=null,this.m_pLevNum=null},e}(SubGroupUI),EvaItem=function(t){function e(){this.m_nSzNo=0,this.m_nNum=0,this.m_nItemID=0,this.m_pStarLv=null,this.m_iEvalue=null,this.m_item=null,this.m_pNew=null,this.m_pPickBtn=null,e.__super.call(this),this.m_iEvalue=new GObj2DMutiText,this.m_iEvalue.LoadAni("tex_文字大_ani"),this.m_iEvalue.SetScrPos(160,70,1),this.addChild(this.m_iEvalue),this.m_item=new GItemIconBase1,this.m_item.SetPos(60,50),this.addChild(this.m_item),this.m_pNew=new Image2,this.m_pNew.skin=DataTable.getSkin("tex_货架标签3"),this.m_pNew.visible=!1,this.m_pNew.scaleX=this.m_pNew.scaleY=.6,this.addChild(this.m_pNew),this.on("click",this,this.OnClick)}__class(e,"game.ui.ornament.totem.EvaItem",t);var i=e.prototype;return i.Init=function(t,e,i,n){void 0===n&&(n=!1),this.m_pNew.visible=n,this.m_nSzNo=e;var s,a=0;switch(t){case 2:this.scaleX=this.scaleY=1,this.m_nItemID=i[1],this.m_nNum=i[2],a=i[0],s="储存：%个",s=s.replace("%",this.m_nNum);break;case 3:this.scaleX=this.scaleY=1.5,this.m_nItemID=i[1],this.m_nNum=i[2],i[3]&&i[3].length>0&&(a=i[3][4]);var r=DataTable.m_iBuildTab.Get(this.m_nItemID);s=r[3];break;default:this.scaleX=this.scaleY=1.5,this.m_nItemID=i[1],this.m_nNum=i[2],a=i[0];var h=DataTable.m_iWonderKind.Get(this.m_nItemID);s=h[1]}3==t?(this.m_iNum.y=22,this.m_iEvalue.SetShow(0)):(DisplayItem.SafeDelObj(this.m_pStarLv),this.m_iEvalue.SetText("w"+a),this.m_iEvalue.SetShow(1)),this.m_iNum.text=s,this.m_item.Init(this.m_nItemID,80)},i.OnClick=function(t,e){if(SysID.IsDTZSJZID(this.m_nItemID)||SysID.IsJZPFID(this.m_nItemID))return DlgManager.Me().showOrnamentInfo(this.m_nItemID,this,1),1;var i,n,s,a=0;return SysID.IsJZPFID(this.m_nItemID)?(i=DataTable.m_iItemTab.Get(this.m_nItemID),n=i[2],s=i[10]):(i=DataTable.m_iBuildTab.Get(this.m_nItemID),n=i[3],s=i[12],SysID.IsDTZSJZID(this.m_nItemID)&&(a=1)),this.ShowMenu(s),1},i.ShowMenu=function(t){!SysID.IsJZPFID(this.m_nItemID);GPopMenu.Menu(this);var e,i,t,n=0;if(SysID.IsJZPFID(this.m_nItemID)?(e=DataTable.m_iItemTab.Get(this.m_nItemID),i=e[2],t=e[10]):(e=DataTable.m_iBuildTab.Get(this.m_nItemID),i=e[3],t=e[12],SysID.IsDTZSJZID(this.m_nItemID)&&(n=1)),i&&i.length>0){var s=new Label;s.align="center",s.color="#715641",s.text=i,s.fontSize=26,s.size(200,50),s.pivot(100,25),s.bold=!0,GSysPopMenu.s_pMenu.AppendObjItem(s)}if(t&&t.length>0){var a=new GObj2DDocx;a.bold=!0,a.mouseEnabled=!1,a.width=240,a.fontSize=20,a.SetText(this.GetMemTxt(t));var r=a.textField.textHeight;a.size(240,r),a.pivot(120,r/2),GSysPopMenu.s_pMenu.AppendObjItem(a)}n&&(this.m_pPickBtn=GSysPopMenu.s_pMenu.AppendImgItem(DataTable.getSkin("tex_按钮_通用"),Handler.create(this,this.packUp),null,150,80,0,0,"全部收起")),SysID.IsJZPFID(this.m_nItemID)||GSysPopMenu.s_pMenu.AppendImgItem(DataTable.getSkin("tex_按钮_通用"),Handler.create(this,this.PutItemOut),null,150,80,0,0,"安装到庄园"),GPopMenu.Pop()},i.GetMemTxt=function(t){return t=t.replace(/<line>/g,"\r\n"),t=t.replace(/<enter>/g,"\r\n")},i.packUp=function(){var t=DataTable.m_iSelfView.GetCanOrGoldEva();return t&&t.length>0?void DataTable.m_iSelfUser.GetOrEvaGold(Handler.create(this,this.packUpNext,[!0]),null,0):void this.packUpNext(!1)},i.packUpNext=function(t,e){void 0===t&&(t=!1);var i=NaN,n=NaN;i=Laya.stage.mouseX,n=Laya.stage.mouseY,DataTable.m_iSelfUser.MutiPutBuildBag(this.m_nItemID,[i,n]),EvalueteDlg.Me().Refresh()},i.PutItemOut=function(){return EvalueteDlg.Me().OnClose(),this.m_nNum<1?void GFlyItemIcon.FlyText("仓库里没有该装饰物了!"):void GMapOrnament.PutOrnament(this.m_nSzNo,this.m_nItemID,this.m_nNum)},e}(EvaItemUI),AccReward=function(t){function e(){this.m_iItem=null,this.m_nNo=0,this.m_nItemID=0,this.m_nNum=0,e.__super.call(this)}__class(e,"game.ui.sign.AccReward",t);var i=e.prototype;return i.InitAccReward=function(t){var e=DataTable.m_iSelfUser.GetSignReward(t,0);if(e&&!(e.length<1)){this.m_nNo=t,this.m_nItemID=e[0],this.m_nNum=e[1],this.m_iNum.text=this.m_nNum.toString();var i=ItemFeild.getInstance().getItemArr(this.m_nItemID),n=i[3];switch(this.m_item.skin=DataTable.getSkin(n),t){case 7:this.m_iText.text="累计2天";break;case 8:this.m_iText.text="累计3天";break;case 9:this.m_iText.text="累计5天";break;case 10:this.m_iText.text="累计7天"}this.Refresh()}},i.Refresh=function(t){if(!(t&&t.length&&ArrOp.SzHalfSearch(this.m_nNo,t)<0)){var e=DataTable.m_iSelfUser.GetSignData(this.m_nNo,0);this.m_iComplete.visible=!!e,this.m_nNo>6}},e}(AccRewardUI),OrdinarySign=function(t){function e(){this.m_szReward=[],this.m_szRewardPos=[],e.__super.call(this),this.onInit()}__class(e,"game.ui.sign.OrdinarySign",t);var i=e.prototype;return i.onShow=function(){this.Refresh()},i.onInit=function(){this.m_szReward.push(this.m_sign0,this.m_sign1,this.m_sign2,this.m_sign3,this.m_sign4,this.m_sign5,this.m_sign6)},i.Refresh=function(){this.m_szRewardPos=[];for(var t=0;7>t;t++){var e=this.m_szReward[t];e.InitSignReward(t),this.m_szRewardPos.push([e.x,e.y])}this.m_acc2.InitAccReward(7),this.m_acc3.InitAccReward(8),this.m_acc5.InitAccReward(9),this.m_acc7.InitAccReward(10),this.m_szRewardPos.push([this.m_acc2.x,this.m_acc2.y]),this.m_szRewardPos.push([this.m_acc3.x,this.m_acc3.y]),this.m_szRewardPos.push([this.m_acc5.x,this.m_acc5.y]),this.m_szRewardPos.push([this.m_acc7.x,this.m_acc7.y]),this.m_szRewardPos.push([this.m_iTotal.x,this.m_iTotal.y]),this.totalRewardRefresh()},i.totalRewardRefresh=function(){var t=DataTable.m_iSelfUser.GetSignReward(11,0);if(t&&!(t.length<1)){var e=(t[0],t[1],DataTable.m_iSelfUser.GetSignData(11,0)),i="总签到%1/%2天";i=i.replace("%1",e),i=i.replace("%2",Math.floor(30*(e/30+1))),this.m_iNum&&(this.m_iNum.text=i)}},i.PlayAniTotal=function(){},i.GetRewardPos=function(t,e){return void 0===e&&(e=0),[this.stage.mouseX,this.stage.mouseY]},i.SignRewardFly=function(t){var e=0,i=0;for(e=0;e<t.length;e++)i=t[e],11!=i?0>i||this.m_szReward[i]&&this.m_szReward[i].PlayAni():this.PlayAniTotal();this.Refresh()},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(OrdinarySignUI),SignReward=function(t){function e(){this.m_iItem=null,this.m_nNo=0,this.m_nItemID=0,this.m_nNum=0,this.m_iCosts=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.sign.SignReward",t);var i=e.prototype;return i.onInit=function(){this.m_iCosts=new GObj2DMutiText,this.m_iCosts.LoadAni("tex_文字中_ani"),this.addChild(this.m_iCosts),this.m_iCosts.SetScrPos(63,240,1),this.on("mousedown",this,this.OnLBDown),this.on("mouseup",this,this.OnLBUp),this.on("click",this,this.OnClick),this.m_iRetroactive.on("click",this,this.onRetClick)},i.onRetClick=function(){},i.OnLBDown=function(){this.m_nNo>6},i.OnLBUp=function(){this.m_nNo>6},i.OnClick=function(){return DataTable.m_iSelfUser.GetSignData(this.m_nNo,0)||this.m_nNo>DataTable.m_iSelfUser.GetCurSignDay(0)?void(SysID.IsDTZSJZID(this.m_nItemID)||SysID.IsJZPFID(this.m_nItemID)):("补签"==this.m_iRetroactive.label?this.Sign(1):this.Sign(0),void GSignDlg.Me().Refresh())},i.Sign=function(t){this.m_nNo>6||DataTable.m_iSelfUser.Sign(this.m_nNo,t)},i.PlayAni=function(){var t=NaN,e=NaN;this.GetItemPos(t,e)},i.GetItemPos=function(t,e){return[t,e]},i.InitSignReward=function(t){switch(t){case 0:this.img_L.visible=!0,this.img_C.visible=!1,this.img_R.visible=!1;break;case 6:this.img_L.visible=!1,this.img_C.visible=!1,this.img_R.visible=!0}var e=DataTable.m_iSelfUser.GetSignReward(t,0);if(e&&!(e.length<1)){this.m_nNo=t,this.m_nItemID=e[0],this.m_nNum=e[1];var i=ItemFeild.getInstance().getItemArr(this.m_nItemID);if(i){var n=i[3];this.m_item.skin=DataTable.getSkin(n)}else{var s=DataTable.m_iBuildTab.Get(this.m_nItemID),a=new DisplayItem(null,!1);a.LoadFromName(s[4]),DisplayTools.addTarget(a.m_disObj,this.m_item,{x:31,y:50,scaleX:.8,scaleY:.8})}var r="第%d天";r=r.replace("%d",t+1),this.m_iText.text=r,this.m_iNum.text=this.m_nNum.toString();var h=DataTable.m_iSignRewardTab.GetVip(t);this.m_iVip.visible=h>0,h&&(r="V%d双倍",r=r.replace("%d",h),this.m_iVip.text=r),this.Refresh()}},i.Refresh=function(t){if(!(t&&t.length&&ArrOp.SzHalfSearch(this.m_nNo,t)<0)){var e=DataTable.m_iSelfUser.GetSignData(this.m_nNo,0);if(this.m_iComplete.visible=!!e,!(this.m_nNo>6)){this.m_iRetroactive.visible=!e;var i=DataTable.m_iSelfUser.GetCurSignDay(0);if(this.m_nNo>i)return this.m_iRetroactive.visible=!1,void(this.m_iCosts.visible=!1);if(e||(this.m_item.alpha=.75),this.m_nNo!=i){var n=DataTable.m_iSignRewardTab.GetCost(this.m_nNo);this.m_iRetroactive.label="补签",this.m_iRetroactive.selected=!0,this.m_iCosts.SetText(n.toString()+"Z"),this.m_iCosts.visible=!e}else this.m_iRetroactive.label="签到",this.m_iRetroactive.selected=!1,this.m_iCosts.visible=!1,GameMain._ins.signMark=1,this.m_iRetroactive.visible&&DataTable.m_iSelfUser.Emit("signOk",null)}}},e}(SignRewardUI),SuperSign=function(t){function e(){this.mutiTextArr=[],this.ani=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.sign.SuperSign",t);var i=e.prototype;return i.onShow=function(){
this.Refresh()},i.onInit=function(){this.signList.scrollBar.hide=!0,this.signList.scrollBar.elasticDistance=200,this.signList.scrollBar.elasticBackTime=50,this.signList.renderHandler=new Handler(this,this.onRenderHandler);for(var t=0;5>t;t++){var e=new GObj2DMutiText;e.LoadAni("tex_文字小_ani"),e.SetScrPos(222,62,0),this.signList.getCell(t).addChild(e);var i=new GObj2DMutiText;i.LoadAni("tex_文字小_ani"),i.SetScrPos(364,64,0),this.signList.getCell(t).addChild(i),this.mutiTextArr.push([e,i])}},i.onRenderHandler=function(t,e){if(t.dataSource){var i=t.dataSource,n=t.getChildByName("m_iBtn");n.clickHandler=new Handler(this,this.OnLBClick,[i,t]),0>e||e>=this.mutiTextArr.length||(t.getChildByName("item0").dataSource&&this.mutiTextArr[e][0].SetText("X"+t.getChildByName("item0").dataSource.m_iNum),t.getChildByName("item1").dataSource&&this.mutiTextArr[e][1].SetText("X"+t.getChildByName("item1").dataSource.m_iNum))}},i.OnLBClick=function(t,e){var i=this;if(DataTable.m_iSelfUser.GetCurSignDay(1)==t.m_nNo)if(t.m_nCanFinish){for(var n=[],s=0;2>s;s++){var a=e.getChildByName("item"+s),r=new Point;a.localToGlobal(r),n.push([Math.floor(r.x),Math.floor(r.y)])}DataTable.m_iSelfUser.SuperSign(n,Handler.create(this,function(){var n={};i.SetStatus(t.m_nNo,n),e.dataSource=n,GSignDlg.Me().Refresh()}))}else MainIcon.getInstance().rightIcon.addInterface(1,2)},i.Refresh=function(){for(var t=DataTable.m_iSignRewardTab.GetSignNum(1),e=[],i=0;t>i;i++){var n={};this.InitSignReward(i,n),e.push(n)}this.signList.array=e},i.InitSignReward=function(t,e){var i=t,n="第%d天";n=n.replace("%d",i+1),e.m_iTitle=n,e.m_nNo=i;var s=DataTable.m_iSelfUser.GetSignReward(t,1);if(!(null==s||s.length<1)){for(var a=0;a<s.length;a++){var r=ItemFeild.getInstance().getItemArr(s[a][0]);if(!r||r.length<3){if(r=DataTable.m_iBuildTab.Get(s[a][0]),!r||r.length<3)return;this.ani||(this.ani=new DisplayItem(null,!1)),0==a?(this.ani.LoadFromName(r[4]),this.signList.getCell(t).getChildByName("item0").addChild(this.ani.m_disObj),this.ani.m_disObj.x=this.ani.m_disObj.y=40,e.item0={m_iNum:s[a][1]}):(this.ani.LoadFromName(r[4]),this.signList.getCell(t).getChildByName("item1").addChild(this.ani.m_disObj),this.ani.m_disObj.x=this.ani.m_disObj.y=40,e.item1={m_iNum:s[a][1]})}else 0==a?e.item0={m_item:{skin:DataTable.getSkin(r[3])},m_iNum:s[a][1]}:e.item1={m_item:{skin:DataTable.getSkin(r[3])},m_iNum:s[a][1]}}this.SetStatus(t,e)}},i.SetStatus=function(t,e){var i=0,n=DataTable.m_iSelfUser.GetSignData(t,1);if(e.m_iBtn={},n)return e.m_iComplete={visible:!0},e.m_iStatus={visible:!1},void(e.m_iBtn.visible=!1);e.m_iComplete||(e.m_iComplete={}),e.m_iComplete.visible=!1;var s=DataTable.m_iSelfUser.GetCurSignDay(1);if(t!=s&&(e.m_iStatus={visible:!0},e.m_iBtn.visible=!1),t==s){var a=DataTable.m_iSignRewardTab.GetNeedMoney(t),r=DataTable.m_iSelfUser.GetSignMoney(t);i=a>r?0:1,e.m_nCanFinish=i,i?e.m_iBtn.label="领取":e.m_iBtn.label="充值",e.m_iStatus={visible:!1},e.m_iBtn.visible=!0}},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(SuperSignUI),GCardItem=function(t){function e(){this.selectHandler=null,this.m_nLock=0,this.m_pitem=null,this.m_nMode=1,this.m_nCheckMode=1,this.m_nCardXpos=0,this.m_nCardYpos=0,this.m_nNo=0,this.m_pRotateTask=null,e.__super.call(this),this.size(121,136),this.mouseEnabled=!0,this.m_pitem=new GGiftItem,this.m_pitem.pos(0,10),this.addChild(this.m_pitem),this.m_pitem.visible=!1,this.on("click",this,this.OnLBUp)}__class(e,"game.ui.wharf.ex.GCardItem",t);var i=e.prototype;return i.dispose=function(){this.removeChildren(),this.destroy(),this.m_pitem=null,this.selectHandler.recover(),this.selectHandler=null},i.onReset=function(){this.m_pitem.onReset(),this.mouseEnabled=!0},i.InitItem=function(t){this.m_nNo=t},i.GetNo=function(){return this.m_nNo},i.IsLocked=function(){return this.m_nLock},i.EnableTips=function(t){this.m_pitem.mouseEnabled=t},i.GetItemPos=function(t,e){},i.GetItemData=function(){return this.m_pitem.GetItemData()},i.SetCardPos=function(t,e){this.m_nCardXpos=t,this.m_nCardYpos=e,this.pos(t,e)},i.GetCardPos=function(t,e){t.uid=this.m_nCardXpos,e.uid=this.m_nCardYpos},i.SetNo=function(t){t?(this.m_pitem.visible=!0,this.m_pbk.skin=DataTable.getSkin("tex_素材_卡牌正")):(this.m_pitem.visible=!1,this.m_pbk.skin=DataTable.getSkin("tex_挑战翻牌"))},i.OnSelect=function(){this.m_pitem.OnSelect()},i.Rotate=function(t){this.m_nCheckMode!=t&&(this.m_nCheckMode=t,this.RotateTask(t))},i.RotateTask=function(t){this.m_nLock=1;var e=0;e=this.m_nMode?0:270},i.TurnItem=function(t,e){this.mouseEnabled=!1,this.m_pitem.Init(t,e),this.m_pitem.visible=!0,this.Rotate(1)},i.RoteToPos=function(t,e){},i.OnLBUp=function(){this.selectHandler&&this.selectHandler.runWith([this.m_nNo,this])},e}(GCardItemUI),GBuyBackItem=function(t){function e(t){this.m_bg=null,this.m_pNum=null,this.m_nCurNum=0,this.m_pPrice=null,this.m_pBk=null,this.pid=null,this.m_nNum=0,this.m_nKind=0,this.m_nPrice=0,e.__super.call(this),this.pid=t,this.m_pNum=new GObj2DMutiText,this.m_pNum.setPos(10,35),this.m_pNum.LoadAni("muti文字小"),this.addChild(this.m_pNum),this.m_pBk=new Image2,this.m_pBk.skin=DataTable.getSkin("tex_素材_数字框"),this.m_pBk.pos(-51,50),this.m_pBk.size(102,24),this.addChildAt(this.m_pBk,0),this.m_pPrice=new GObj2DMutiText,this.m_pPrice.LoadAni("tex_文字中_ani"),this.m_pPrice.SetScrPos(0,70,1),this.addChild(this.m_pPrice),this.m_bg=new Image2,this.m_bg.pos(-64,-34),this.m_bg.skin=DataTable.getSkin("tex_素材_木盒子"),this.addChildAt(this.m_bg,0),this.mouseEnabled=!0,this.on("click",this,this.OnClick)}__class(e,"game.ui.buyback.tom.GBuyBackItem",t);var i=e.prototype;return i.InitMe=function(t,e,i,n){this.m_nNum=e,this.m_nKind=i,this.m_nPrice=n,this.m_nCurNum=e,this.m_pNum.SetText("x"+e),this.m_pPrice.SetText(n+"$"),this.Init(t,96),this.m_pNum.SetScrPos(10,this.height/2,1),this.hitArea=new Rectangle(-64,-34,this.width,this.height)},i.OnClick=function(){var t=0,e=0;t=this.stage.mouseX,e=this.stage.mouseY,this.pid.BuyItem(this.m_nItemID,this.m_nNum,this.m_nKind,this.m_nPrice,[t,e])},e}(GItemIconBase1),BagItem=function(t){function e(){this.m_nSzNo=0,this.m_nNum=0,this.m_pNum=null,e.__super.call(this),this.mouseEnabled=!0,this.m_pNum=new GObj2DMutiText,this.m_pNum.LoadAni("tex_文字小_ani"),this.m_pNum.SetScrPos(32,30,0),this.addChild(this.m_pNum)}__class(e,"game.ui.comui.bag.BagItem",t);var i=e.prototype;return i.InitMe=function(t,e,i){this.m_nSzNo=t,this.m_nNum=i,this.Init(e,64),this.m_pNum.SetText(""+i),this.pivot(-32,-32),this.hitArea=new Rectangle(-32,-32,this.width,this.height)},e}(GItemIconBase1),SelectOrder=function(t){function e(){this.m_nNo=-1,this.m_nDouble=0,this.pid=null,this.m_pIcon=null,this.m_pNum=null,this.m_pMony=null,this.m_pExp=null,this.m_pOtherTr=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.wharf.SelectOrder",t);var i=e.prototype;return i.onInit=function(){this.m_pT.text="货物信息:",this.m_pIcon=new GItemIconBase1,this.m_pIcon.SetPos(50,230),this.m_pIcon.mouseEnabled=!0,this.addChild(this.m_pIcon),this.m_pNum=new GObj2DMutiText,this.m_pNum.LoadAni("tex_文字小_ani"),this.m_pNum.SetScrPos(50,280,1),this.addChild(this.m_pNum),this.m_pMony=new GObj2DMutiText,this.m_pMony.LoadAni("tex_文字中_ani"),this.m_pMony.SetScrPos(120,225,0),this.addChild(this.m_pMony),this.m_pExp=new GObj2DMutiText,this.m_pExp.LoadAni("tex_文字中_ani"),this.m_pExp.SetScrPos(120,255,0),this.addChild(this.m_pExp),this.m_pOtherTr=new GObj2DMutiText,this.m_pOtherTr.LoadAni("tex_文字中_ani"),this.m_pOtherTr.SetScrPos(120,285,0),this.addChild(this.m_pOtherTr),this.m_pMake.label="装货",this.m_pMake.on("click",this,this.OnFinishBox),this.m_pAskHelp.label="请求帮助",this.m_pAskHelp.on("click",this,this.AskHelp)},i.dispose=function(){this.removeChildren(),this.offAll("click"),this.pid=null},i.OnSelect=function(t){this.m_nNo=t,this.Ref()},i.Ref=function(){if(this.m_nDouble=0,this.m_nNo<0)return void this.setAllShow(0);var t;if(t=this.pid.GetOrderNo(this.m_nNo),!t||1&t[0])return void this.setAllShow(0);if(!(this.pid.m_nSelf||2&t[0]))return void this.setAllShow(0);this.setAllShow(1);var e=t[2],i=DataTable.m_iSelfUser.GetItemNum(e);if(this.m_pIcon.Init(e,64),i<t[3]?this.m_pNum.SetText(i+"/"+t[3]):this.m_pNum.SetText(""+i+"/"+t[3]),this.m_pExp.SetText("E"+t[4]),DataTable.m_iSelfUser.IsActWeekend(1)){var n=1;switch(DataTable.m_iSelfUser.getDoubleActState(1)){case 2:n=2;break;case 3:n=1;break;default:n=2}n>1?(this.m_pMony.SetText("$"+t[5]+"x"+n),this.m_nDouble=1):this.m_pMony.SetText("$"+t[5])}else this.m_pMony.SetText("$"+t[5]);this.m_pMake.mouseEnabled=0==(1&t[0]),this.pid.m_nSelf?(this.m_pAskHelp.label="请求帮助("+this.pid.m_nUseHelpNum+"/3)",1&t[0]||2&t[0]?(this.m_pAskHelp.mouseEnabled=!1,this.m_pAskHelp.filters=[ColorFilter.GRAY]):(this.m_pAskHelp.mouseEnabled=this.pid.m_nUseHelpNum<3,this.m_pAskHelp.mouseEnabled?this.m_pAskHelp.filters=null:this.m_pAskHelp.filters=[ColorFilter.GRAY]),this.m_pOtherTr.visible=!1):(this.m_pOtherTr.SetText(""+t[6]+"T"),this.m_pAskHelp.visible=!1)},i.OnFinishBox=function(){var t=this;this.m_nNo<0||this.pid.m_szBox[this.m_nNo].OnFinishBox(this.m_nDouble,Handler.create(this,function(e){e?(t.m_nNo=-1,t.pid.RefData()):gSys.Err("can't finish box"+t.m_nNo)}))},i.AskHelp=function(){DataTable.m_iSelfUser.OnAskHelpBox(this.m_nNo),this.pid.RefData()},i.setAllShow=function(t){this.m_subBox.visible=!!t},e}(SelectOrderUI),GSubVisu=function(t){function e(){this.pt=null,this.pImg=null,this.pl=null,this.pMText=null,this.pNIcon=null,this.m_pWharfIcon=null,this.m_nClicking=0,this.m_nNo=0,this.m_nState=0,e.__super.call(this),this.size(268,386),this.mouseEnabled=!0,this.m_pWharfIcon=new GMutiAniIconBase,this.pt=new Label,this.pt.fontSize=20,this.pt.text="已购买",this.addChild(this.pt),this.pt.visible=!1,this.pImg=new GObj2DImg,this.pImg.SetSrc(DataTable.getSkin("tex_按钮_对号标签1")),this.addChild(this.pImg),this.pImg.visible=!1,this.pl=new Label,this.pl.text="当前外形",this.pl.fontSize=20,this.addChild(this.pl),this.pl.visible=!1,this.pMText=new GObj2DMutiText,this.pMText.LoadAni("tex_文字中_ani"),this.addChild(this.pMText),this.pMText.visible=!1,this.pNIcon=new GItemNumIcon,this.addChild(this.pNIcon),this.pNIcon.visible=!1}__class(e,"game.ui.wharf.termini.GSubVisu",t);var i=e.prototype;return i.onReset=function(){this.pt.visible=!1,this.pImg.visible=!1,this.pl.visible=!1,this.pMText.visible=!1,this.pNIcon.visible=!1,this.m_pWharfIcon.m_disObj&&this.m_pWharfIcon.m_disObj.removeSelf()},i.OnInit=function(t,e,i,n,s,a,r,h,o,l,u){switch(this.onReset(),this.m_nNo=i,this.m_nState=n,this.m_pWharfIcon.SetAniImg(s),this.m_pWharfIcon.FitSize(256,256),this.m_pWharfIcon.SetAPos(l/2,u/2),this.addChild(this.m_pWharfIcon.m_disObj),i||(n=1),n){case 1:this.pt.pos(l/2-this.pt.width/2,u-50),this.pt.visible=!0;break;case 2:this.pImg.SetPos(20,u-70),this.pImg.visible=!0,this.pl.pos(l/2-this.pl.width/2,u-50),this.pl.visible=!0;break;default:this.pMText.SetScrPos(5,u-40,0),a>r?this.pMText.SetText("X "+a):this.pMText.SetText("X "+a),this.pMText.visible=!0,o>DataTable.m_iSelfUser.GetHaveItemNum(h)?this.pNIcon.Init(h,o,32):this.pNIcon.Init(h,o,32),this.pNIcon.SetPos(5,u-35),this.pNIcon.visible=!1}},e}(GSubVisuUI),GBkItem=function(t){function e(){this.m_pBk=null,e.__super.call(this),this.m_pBk=new Image2,this.m_pBk.skin=DataTable.getSkin("tex_挑战奖励物品_底框"),this.addChildAt(this.m_pBk,0)}__class(e,"game.ui.wharf.termini.GBkItem",t);var i=e.prototype;return i.Init=function(e,i){void 0===i&&(i=80),t.prototype.Init.call(this,e,i),this.m_pBk.pivot(i/2,i/2),this.setChildIndex(this.m_pBk,0)},e}(GItemIconBase1),MacStarLv=function(t){function e(){e.__super.call(this)}__class(e,"game.ui.ornament.totem.MacStarLv",t);var i=e.prototype;return i.GetSlicRight=function(t,e,i){return 1==i?-42:-35},e}(GSlicStarLv),GItemNumTipsIcon=function(t){function e(){e.__super.call(this)}__class(e,"game.ui.comui.GItemNumTipsIcon",t);var i=e.prototype;return i.Init=function(e,i,n,s,a,r,h){void 0===n&&(n=80),void 0===s&&(s=""),void 0===a&&(a=2),void 0===r&&(r=1),void 0===h&&(h=0),t.prototype.Init.call(this,e,i,n,s,a,r,h),e&&(this.m_vTips=["item",e])},e}(GItemNumIcon),ActivityMainUI=function(t){function e(){this.box_bj=null,this.panel_tab=null,this.list_tab=null,this.dataTxt=null,this.desTitle=null,this.subCanvas=null,e.__super.call(this)}__class(e,"game.ui.activity_list.ActivityMainUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"110",sizeGrid:"130,30,30,30",height:"616",skin:"reuse/528077ed63a9a016.png",width:"924",x:"0"}},{type:"Box",props:{height:"616",y:"110","var":"box_bj",width:"924",x:"0"}},{type:"Panel",child:[{type:"Image",props:{y:"0",width:"276",height:"456",skin:"reuse/564048ae8879302f.png",sizeGrid:"30,30,30,30",x:"0"}},{type:"List",child:[{type:"Box",child:[{type:"Clip",props:{name:"tab_btn_clip",clipY:"2",width:"276",autoPlay:"false",height:"92",y:"0",index:"0",skin:"activity/clip_activity_tabbtn.png",x:"0"}},{type:"Label",props:{y:"16",text:"首充6元",width:"186",align:"center",height:"53",name:"tab_btn_txt",color:"#333333",fontSize:"40",bold:"true",x:"36"}}],props:{name:"render"}}],props:{y:"14","var":"list_tab",width:"276",height:"429",vScrollBarSkin:"reuse/vscroll.png",spaceY:"10",x:"12"}}],props:{y:"237","var":"panel_tab",width:"289",mouseEnabled:"true",height:"464",mouseThrough:"true",x:"43"}},{type:"Label",props:{y:"202","var":"dataTxt",text:"2015年11月30日",width:"193",height:"33",fontSize:"25",x:"101"}},{type:"Label",props:{y:"135","var":"desTitle",text:"首充6元礼包",width:"924",align:"center",height:"44",strokeColor:"#000000",color:"#ffffff",fontSize:"40",stroke:"1",x:"0"}},{type:"Button",props:{scaleX:".6",y:"116",scaleY:".6",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"831"}},{type:"Box",props:{height:"472",y:"223","var":"subCanvas",width:"563",x:"332"}}],props:{height:"726",width:"924"}}}]),e}(MyDiaLog),Activity_hdmUI=function(t){function e(){this.btn_=null,this.input_bj=null,this.input_=null,this.txt_title=null,e.__super.call(this)}__class(e,"game.ui.activity_list.Activity_hdmUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",sizeGrid:"130,30,30,30",height:"350",skin:"reuse/528077ed63a9a016.png",width:"600",x:"0"}},{type:"Button",props:{scaleX:".6",y:"6",scaleY:".6",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"498"}},{type:"Button",props:{y:"260","var":"btn_",labelSize:"30",stateNum:"1",labelBold:"true",labelColors:"#ffffff,#ffffff,#ffffff",skin:"reuse/btn_5270caa6b30a1013.png",label:"领取奖励",x:"172"}},{type:"Image",props:{y:"111.5","var":"input_bj",sizeGrid:"30,30,30,30",height:"117",width:"466",x:"67"}},{type:"TextInput",props:{y:"120.5","var":"input_",text:"TextInput",width:"445",align:"left",height:"99",fontSize:"30",bold:"true",x:"77.5"}},{type:"Label",props:{y:"20","var":"txt_title",text:"活动码填写",width:"359",align:"left",height:"46",name:"txt_title",color:"#ffffff",fontSize:"40",bold:"true",x:"32"}}],props:{height:"350",width:"600"}}}]),e}(MyDiaLog),TradeWarningUI=function(t){function e(){this.btn_close=null,this.getImg=null,this.costImg=null,this.sureBtn=null,e.__super.call(this)}__class(e,"game.ui.chat.trade.TradeWarningUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"10",width:"415",height:"341",skin:"reuse/528077ed63a9a016.png",sizeGrid:"50,100,50,50",x:"1"}},{type:"Label",props:{y:"32",text:"交易确认",width:"246",align:"center",height:"57",color:"#ffffff",fontSize:"34",bold:"true",x:"77"}},{type:"Button",props:{scaleX:".6",y:"21",scaleY:".6","var":"btn_close",stateNum:"1",height:"110",name:"close",skin:"reuse/btn_close.png",width:"110",x:"336"}},{type:"Label",props:{y:"126",text:"您将获得",width:"138",align:"center",height:"37",color:"#000000",fontSize:"24",bold:"true",x:"52"}},{type:"Label",props:{y:"204",text:"您将消耗",width:"138",align:"center",height:"37",color:"#ff0000",fontSize:"24",bold:"true",x:"51"}},{type:"Image",props:{y:"109","var":"getImg",width:"64",height:"64",skin:"reuse/527cc2532399b007.png",x:"249"}},{type:"Image",props:{y:"184","var":"costImg",width:"64",height:"64",skin:"reuse/527cc2532399b007.png",x:"250"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"22",sizeGrid:"20,40,20,40",label:"确认交易",labelBold:"true",skin:"reuse/button_527cbad72a3e402b.png",x:"138",y:"276","var":"sureBtn",width:"159",height:"53",labelStroke:"1",labelMargin:"30,20,35,20",stateNum:"1"}}]}}]),e}(MyDiaLog),PlayMovieUI=function(t){function e(){this.m_pOkBtn=null,this.m_pTitle=null,this.m_Box=null,e.__super.call(this)}__class(e,"game.ui.comui.PlayMovieUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"460",skin:"reuse/528077ed63a9a016.png",width:"468",x:"0"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"24",label:"知道了",labelBold:"true",x:"153",y:"360",labelStrokeColor:"#000000","var":"m_pOkBtn",stateNum:"1",height:"84",labelStroke:"1",skin:"reuse/btn_Qd.png",width:"168"}},{type:"Label",props:{y:"26","var":"m_pTitle",text:"收获作物引导",width:"429",align:"left",height:"48",color:"#ffffff",fontSize:"30",bold:"true",x:"26"}},{type:"Box",props:{y:"228","var":"m_Box",width:"431",mouseEnabled:"true",height:"292",x:"238"}}],props:{height:"460",width:"468"}}}]),e}(MyDiaLog),CreateUserUI=function(t){function e(){this.btn_=null,this.input_=null,e.__super.call(this)}__class(e,"game.ui.CreateUserUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"800",height:"500",skin:"reuse/528077ed63a9a016.png",sizeGrid:"20,100,20,20",x:"0"}},{type:"Label",props:{y:"16",text:"创建用户名",width:"489",align:"center",height:"53",color:"#ffffff",fontSize:"40",bold:"true",x:"156.5"}},{type:"Button",props:{y:"381","var":"btn_",labelSize:"30",stateNum:"1",labelBold:"true",labelColors:"#ffffff,#ffffff,#ffffff",skin:"reuse/btn_5270caa6b30a1013.png",label:"确定",x:"273"}},{type:"Image",props:{y:"213",sizeGrid:"20,20,20,20",height:"56",skin:"reuse/bg.png",width:"439",x:"181.5"}},{type:"TextInput",props:{maxChars:"20",y:"218","var":"input_",width:"408",align:"center",height:"37",fontSize:"30",bold:"true",x:"195"}},{type:"Label",props:{y:"178",text:"请输入你的用户名",width:"334",align:"center",height:"34",fontSize:"30",bold:"true",x:"233"}}],props:{height:"500",width:"800"}}}]),e}(MyDiaLog),DiaGiftBoxUI=function(t){function e(){this.okBtn=null,e.__super.call(this)}__class(e,"game.ui.DiaGiftBoxUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Button",props:{name:"okBtn",y:"167",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff","var":"okBtn",labelSize:"30",stateNum:"1",labelMargin:"75",labelStroke:"1",skin:"reuse/btn_common.png",label:"开启",x:"301"}},{type:"Label",props:{y:"99",text:"里面会有什么样的宝物呢？",color:"#ffffff",fontSize:"33",bold:"true",stroke:"1",x:"257"}},{type:"Button",props:{y:"0",width:"78",height:"78",name:"close",skin:"reuse/btn_close.png",stateNum:"1",x:"659"}}],props:{height:"320",width:"800"}}}]),e}(MyDiaLog),DingdanUI=function(t){function e(){this.btn_close=null,this.img_chilun_r=null,this.img_chilun_l=null,this.btn_change=null,this.btn_jiaohuo=null,this.box_dingdan=null,this.box_huowu=null,e.__super.call(this)}__class(e,"game.ui.dingdan.DingdanUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"839",mouseEnabled:"true",height:"589",skin:"reuse/528077ed63a9a016.png",sizeGrid:"130,30,30,30",x:"0"}},{type:"Image",props:{y:"-76",width:"183",mouseEnabled:"true",height:"154",skin:"reuse/528077f463a9a01c.png",x:"61"}},{type:"Image",props:{height:"138",y:"-62",skin:"dingdan/img_dingdan_icon.png",width:"138",x:"84"}},{type:"Image",props:{scaleX:"1.5",y:"75",scaleY:"1.5",width:"537.9999999999998",height:"323.33333333333366",skin:"dingdan/img_dingdan_bg.jpg",x:"18"}},{type:"Image",props:{height:"51",y:"441",skin:"dingdan/5263A9C2E8646013.png",width:"742",x:"50"}},{type:"Button",props:{scaleX:".7",y:"4",scaleY:".7","var":"btn_close",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"732"}},{type:"Image",props:{y:"419",skin:"dingdan/img_dingdan_box.png",x:"633"}},{type:"Box",child:[{type:"Image",props:{height:"68",y:"0",skin:"dingdan/img_ld.png",width:"556",x:"0"}},{type:"Image",props:{scaleX:".8",y:"16",scaleY:".8","var":"img_chilun_r",skin:"dingdan/5263aa08e8646028.png",x:"502"}},{type:"Image",props:{scaleX:".8",y:"16",scaleY:".8","var":"img_chilun_l",skin:"dingdan/5263aa08e8646028.png",x:"3"}}],props:{y:"483",x:"157"}},{type:"Button",props:{scaleX:".5",y:"435",scaleY:".5","var":"btn_change",stateNum:"1",name:"btn_change",skin:"dingdan/btn_gh.png",x:"25"}},{type:"Image",props:{height:"138",y:"418",skin:"dingdan/img_dingdan_box2.png",width:"122",x:"696"}},{type:"Button",props:{scaleX:".5",y:"432",scaleY:".5","var":"btn_jiaohuo",stateNum:"1",skin:"dingdan/btn_jh.png",x:"690"}},{type:"Box",props:{height:"318",y:"101","var":"box_dingdan",width:"703",x:"68"}},{type:"Box",props:{height:"84",y:"443","var":"box_huowu",width:"458",x:"194"}}],props:{height:"589",width:"839"}}}]),e}(MyDiaLog),EvaHelpUI=function(t){function e(){this.evaList=null,e.__super.call(this)}__class(e,"game.ui.EvaHelpUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"495",height:"499",skin:"reuse/528077ed63a9a016.png",sizeGrid:"80,30,30,30",x:"0"}},{type:"Button",props:{y:"8",width:"72",height:"72",name:"close",skin:"reuse/btn_close.png",stateNum:"1",x:"407"}},{type:"Label",props:{y:"21",text:"评价等级说明",color:"#ffffff",fontSize:"36",bold:"true",x:"137"}},{type:"Label",props:{y:"94",fontSize:"33",text:"等级",bold:"true",x:"97"}},{type:"Label",props:{y:"93",fontSize:"33",text:"评价",bold:"true",x:"320"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{name:"dt",width:"461",height:"1",y:"58",skin:"reuse/528077d263a9a009.png",x:"-15"}}],props:{height:"60",y:"2",name:"render",width:"430",x:"5"}}],props:{y:"142","var":"evaList",width:"435",height:"335",vScrollBarSkin:"reuse/vscroll.png",x:"38"}}],props:{height:"515",width:"495"}}}]),e}(MyDiaLog),GNpcDlgUI=function(t){function e(){this.m_p1=null,this.m_p2=null,this.m_p3=null,e.__super.call(this)}__class(e,"game.ui.lead.GNpcDlgUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item0",labelSize:"24",sizeGrid:"20,50,20,50",label:"没问题",labelBold:"true",x:"338",y:"334",labelStrokeColor:"#000000","var":"m_p1",stateNum:"1",height:"80",labelStroke:"1",skin:"reuse/btn_Qd.png",width:"265"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item1",labelSize:"24",sizeGrid:"20,50,20,50",label:"不想卖了",labelBold:"true",x:"338",y:"422",labelStrokeColor:"#000000","var":"m_p2",stateNum:"1",height:"80",labelStroke:"1",skin:"reuse/btn_Qd.png",width:"265"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"item2",labelSize:"24",sizeGrid:"20,50,20,50",label:"稍等...",labelBold:"true",x:"338",y:"510",labelStrokeColor:"#000000","var":"m_p3",stateNum:"1",height:"80",labelStroke:"1",skin:"reuse/btn_Qd.png",width:"265"}}],props:{height:"600",width:"800"}}}]),e}(MyDiaLog),levelUpPanelUI=function(t){function e(){this.unLockTxt=null,this.levelTxt=null,this.wareList=null,this.sureBtn=null,this.txtget=null,this.buildList=null,e.__super.call(this)}__class(e,"game.ui.levelUp.levelUpPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"100",width:"495",height:"433",skin:"reuse/528077ed63a9a016.png",sizeGrid:"50,100,50,50",x:"-10"}},{type:"Label",props:{y:"342","var":"unLockTxt",text:"升级解锁了:",width:"133",align:"left",height:"33",color:"#663300",fontSize:"20",bold:"true",x:"32"}},{type:"Image",props:{y:"176",width:"451",height:"167",skin:"reuse/555d6bcf5d23a009.png",sizeGrid:"60,30,30,30",x:"14"}},{type:"Label",props:{y:"112","var":"levelTxt",text:"5",width:"93",align:"center",height:"33",color:"#996666",fontSize:"30",bold:"true",x:"182"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{scaleX:"0.8",name:"image",scaleY:"0.8",width:"80",height:"80",y:"2",skin:"reuse/527cc2532399b007.png",x:"0"}},{type:"Label",props:{y:"41",text:"20",width:"59",mouseEnabled:"false",align:"left",height:"30",name:"label",color:"#000000",fontSize:"25",bold:"true",x:"82"}},{type:"Image",props:{y:"22",name:"isnew",skin:"levelUp/52a2c693d3253010.png",x:"17"}}],props:{name:"render",y:"11",width:"134",mouseEnabled:"true",height:"85",mouseThrough:"false",x:"1"}}],props:{height:"101",y:"239",repeatX:"3","var":"wareList",repeatY:"1",mouseEnabled:"true",hScrollBarSkin:"reuse/vscroll.png",spaceX:"10",spaceY:"10",width:"418",x:"27"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",name:"sure",labelSize:"30",sizeGrid:"20,40,20,40",label:"确认",labelBold:"true",labelMargin:"30,20,26,20",x:"179",y:"461","var":"sureBtn",width:"125",height:"58",labelStroke:"1",skin:"reuse/button_527cbad72a3e402b.png",stateNum:"1"}},{type:"Label",props:{y:"211","var":"txtget",text:"升级获得了:",width:"133",align:"left",height:"33",color:"#663300",fontSize:"20",bold:"true",x:"30"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{scaleX:"0.8",name:"image",scaleY:"0.8",width:"80",height:"80",y:"2",x:"0"}},{type:"Label",props:{y:"41",text:"20",width:"59",mouseEnabled:"false",align:"left",height:"30",name:"label",color:"#000000",fontSize:"25",bold:"true",x:"82"}},{type:"Image",props:{y:"22",name:"isnew",skin:"levelUp/52a2c693d3253010.png",x:"17"}}],props:{name:"render",y:"11",width:"134",mouseEnabled:"true",height:"85",mouseThrough:"false",x:"1"}}],props:{height:"101",y:"369",repeatX:"3","var":"buildList",repeatY:"1",mouseEnabled:"true",hScrollBarSkin:"reuse/vscroll.png",spaceX:"10",spaceY:"10",width:"418",x:"27"}}]}}]),e}(MyDiaLog),figurePanelUI=function(t){function e(){this.clip_hg=null,this.clip_tx=null,this.close_btn=null,this.icon=null,this.box_view=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.figureInfoPanel.figurePanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"720",mouseEnabled:"true",height:"573",skin:"reuse/528077ed63a9a016.png",sizeGrid:"60,30,30,30",x:"0"}},{type:"Clip",props:{y:"29","var":"clip_hg",index:"1",clipY:"2",skin:"figureInfo/clip_HG.png",x:"424"}},{type:"Clip",props:{y:"29",clipY:"2","var":"clip_tx",index:"1",skin:"figureInfo/clip_TX.png",x:"307"}},{type:"Button",props:{scaleX:"0.7",y:"17",scaleY:"0.7","var":"close_btn",stateNum:"1",mouseEnabled:"true",name:"close",skin:"reuse/btn_close.png",x:"615"}},{type:"Image",props:{y:"-77",width:"185",mouseEnabled:"true",height:"154",skin:"reuse/528077f463a9a01c.png",x:"65"}},{type:"Image",props:{y:"-65","var":"icon",width:"148",height:"144",skin:"figureInfo/528077fc63a9a021.png",x:"85"}},{type:"Box",props:{y:"106","var":"box_view",width:"688",mouseEnabled:"true",height:"452",x:"17"}}],props:{height:"573",width:"720"}}}]),e}(MyDiaLog),SettingsUI=function(t){function e(){this.title=null,this.close_btn=null,this.panel_=null,this.btn_againMail=null,this.btn_quitGame=null,this.btn_screenshots=null,this.box_0=null,this.clip_yinyue=null,this.clip_yinxiao=null,this.box_1=null,this.box_2=null,this.box_3=null,this.box_set=null,this.btn_set=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.figureInfoPanel.SettingsUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"720",mouseEnabled:"true",height:"655",skin:"reuse/528077ed63a9a016.png",sizeGrid:"130,30,30,30",x:"0"}},{type:"Label",props:{y:"25","var":"title",text:"游戏设置",width:"720",align:"center",height:"40",color:"#cccc66",fontSize:"30",bold:"true",x:"0"}},{type:"Button",props:{scaleX:"0.7",y:"11",scaleY:"0.7","var":"close_btn",stateNum:"1",mouseEnabled:"true",height:"100",name:"close",skin:"reuse/btn_close.png",width:"100",x:"620"}},{type:"Panel",child:[{type:"Box",child:[{type:"Image",props:{y:"172",width:"660",height:"376",visible:"true",skin:"reuse/white.png",sizeGrid:"3,3,3,3",x:"0"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"25",sizeGrid:"30,10,30,10",width:"204",labelBold:"true",x:"10",y:"474",labelStrokeColor:"#000000","var":"btn_againMail",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/button_527cbad72a3e402b.png",label:"重取邮件"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"25",sizeGrid:"30,10,30,10",width:"204",labelBold:"true",x:"230",y:"474",labelStrokeColor:"#000000","var":"btn_quitGame",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/button_527cbad72a3e402b.png",label:"退出游戏"}},{type:"Image",props:{height:"64","var":"btn_screenshots",width:"256"}},{type:"Label",props:{y:"12",text:"游戏截屏",align:"right",color:"#000000",fontSize:"30",bold:"true",x:"529"}},{type:"Label",props:{y:"72",text:"背景音乐",align:"right",color:"#000000",fontSize:"25",bold:"true",x:"2"}},{type:"Label",props:{y:"121",text:"游戏音效",align:"right",color:"#000000",fontSize:"25",bold:"true",x:"2"}},{type:"Box",child:[{type:"Label",props:{name:"title",text:"帐号管理",align:"left",y:"22",fontSize:"25",bold:"true",x:"12"}},{type:"Label",props:{y:"22",fontSize:"25",text:">",bold:"true",x:"641"}},{type:"Image",props:{name:"white",visible:"false",sizeGrid:"3,3,3,3",height:"72",y:"5",alpha:"0.2",skin:"reuse/white.png",width:"660",x:"0"}}],props:{height:"82",name:"帐号管理",y:"169","var":"box_0",width:"660"}},{type:"Clip",props:{y:"64","var":"clip_yinyue",width:"50",x:"568",height:"50",index:"1",skin:"reuse/clip_duigou.png",clipX:"2"}},{type:"Clip",props:{y:"113","var":"clip_yinxiao",width:"50",x:"568",height:"50",index:"1",skin:"reuse/clip_duigou.png",clipX:"2"}},{type:"Box",child:[{type:"Label",props:{name:"title",text:"高级设置",align:"left",y:"22",fontSize:"25",bold:"true",x:"12"}},{type:"Label",props:{y:"22",fontSize:"25",text:">",bold:"true",x:"641"}},{type:"Image",props:{name:"white",visible:"false",sizeGrid:"3,3,3,3",height:"72",y:"5",alpha:"0.2",skin:"reuse/white.png",width:"660",x:"0"}}],props:{height:"82",name:"高级设置",y:"241","var":"box_1",width:"660"}},{type:"Box",child:[{type:"Label",props:{y:"22",fontSize:"25",text:">",bold:"true",x:"641"}},{type:"Label",props:{name:"title",text:"帮助和支持",align:"left",y:"22",fontSize:"25",bold:"true",x:"12"}},{type:"Image",props:{name:"white",visible:"false",sizeGrid:"3,3,3,3",height:"72",y:"5",alpha:"0.2",skin:"reuse/white.png",width:"660",x:"0"
}}],props:{height:"82",name:"帮助和支持",y:"313","var":"box_2",width:"660"}},{type:"Box",child:[{type:"Label",props:{name:"title",text:"关于我们",align:"left",y:"22",fontSize:"25",bold:"true",x:"12"}},{type:"Label",props:{y:"22",fontSize:"25",text:">",bold:"true",x:"641"}},{type:"Image",props:{y:"54",skin:"figureInfo/xian.png",width:"660",height:"3",bottom:"0",x:"0"}},{type:"Image",props:{name:"white",visible:"false",sizeGrid:"3,3,3,3",height:"72",y:"5",alpha:"0.2",skin:"reuse/white.png",width:"660",x:"0"}}],props:{height:"82",name:"关于我们",y:"386","var":"box_3",width:"660"}}],props:{height:"555",y:"20",width:"661",x:"14"}}],props:{y:"75",vScrollBarSkin:"reuse/vscroll.png",width:"689",height:"564","var":"panel_",x:"17"}},{type:"Box",child:[{type:"Image",props:{height:"50",y:"0","var":"btn_set",width:"128",x:"0"}},{type:"Label",props:{y:"5",text:"游戏设置",mouseEnabled:"false",align:"center",color:"#666666",fontSize:"20",bold:"true",x:"20"}}],props:{height:"35",y:"25","var":"box_set",width:"128",x:"25"}}],props:{height:"655",width:"720"}}}]),e}(MyDiaLog),AddFriendUI=function(t){function e(){this.btn_close=null,this.list_=null,this.btn_=null,this.add=null,this.btn_lingqu=null,this.btn_lable=null,this.input_txt1=null,this.txt_title=null,this.input_txt=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.AddFriendUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.Head"]=Head,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"525",skin:"reuse/528077ed63a9a016.png",width:"640",x:"0"}},{type:"Button",props:{y:"6","var":"btn_close",width:"76",height:"76",name:"close",skin:"reuse/btn_close.png",stateNum:"1",x:"545"}},{type:"Image",props:{height:"2",y:"366",skin:"friendPanel/txBg.png",width:"580",x:"30"}},{type:"List",child:[{type:"Box",child:[{type:"Head",props:{scaleX:"0.8",runtime:"display.mainIcon.Head",scaleY:"0.8",width:"100",height:"100",name:"head"}},{type:"Label",props:{y:"102",strokeColor:"#000000",text:"名字名字",align:"center",height:"30",name:"label",color:"#ffffff",fontSize:"20",stroke:"1",x:"0"}}],props:{height:"129",name:"render",width:"100"}}],props:{y:"201",repeatX:"5","var":"list_",repeatY:"1",spaceX:"10",x:"53"}},{type:"Image",props:{y:"436","var":"btn_",sizeGrid:"10,80,10,80",height:"64",skin:"reuse/btn_5270caa6b30a1013.png",width:"427",x:"97"}},{type:"Image",props:{y:"367",sizeGrid:"20,70,20,20",height:"67",skin:"friendPanel/55d1c54ca089802e.png",width:"438",x:"90"}},{type:"Image",props:{y:"93",sizeGrid:"20,70,20,20",height:"67",skin:"friendPanel/55d1c54ca089802e.png",width:"400",x:"90"}},{type:"Image",props:{y:"94","var":"add",skin:"friendPanel/55d1c497a0898019.png",x:"426"}},{type:"Image",props:{height:"64",y:"366","var":"btn_lingqu",width:"64",x:"461"}},{type:"Label",props:{y:"452",strokeColor:"#000000",text:"和微博好友一起玩游戏","var":"btn_lable",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"192"}},{type:"TextInput",props:{y:"384","var":"input_txt1",text:"输入好友邀请码领取奖励",width:"343",height:"33",color:"#ffffff",fontSize:"20",x:"108"}},{type:"Label",props:{y:"19","var":"txt_title",text:"添加好友",width:"640",align:"center",height:"46",color:"#ffffff",fontSize:"35",bold:"true",x:"0"}},{type:"TextInput",props:{y:"110","var":"input_txt",text:"输入对方ID",width:"296",height:"33",color:"#ffffff",fontSize:"20",x:"108"}},{type:"Label",props:{y:"159",text:"推荐邻居：",color:"#cc9900",fontSize:"25",bold:"true",stroke:"1",x:"62"}}],props:{height:"525",width:"640"}}}]),e}(MyDiaLog),Frd_ApplyUI=function(t){function e(){this.btn_close=null,this.img_leftHua=null,this.img_yqBJ=null,this.img_zsBJ=null,this.img_rHua=null,this.btn_fenxiang1=null,this.btn_fenxiang0=null,this.img_yaoqing=null,this.img_ZS=null,this.list_play=null,this.box_yaoqing=null,this.btn_lingqu=null,this.input_txt1=null,this.list_=null,this.head_applyed=null,this.label_info=null,this.btn_lable=null,this.label_applyed=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.Frd_ApplyUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.Head"]=Head,View.viewClassMap["display.mainIcon.friendInfoPanel.Frd_ApplyItem"]=Frd_ApplyItem,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"575",skin:"reuse/528077ed63a9a016.png",width:"750",x:"0"}},{type:"Button",props:{y:"6","var":"btn_close",width:"76",height:"76",name:"close",skin:"reuse/btn_close.png",stateNum:"1",x:"653"}},{type:"Image",props:{scaleX:"-1",rotation:"20",y:"120","var":"img_leftHua",x:"120"}},{type:"Image",props:{y:"186","var":"img_yqBJ",width:"284",height:"364",sizeGrid:"100,20,100,20",x:"41"}},{type:"Image",props:{height:"2",y:"174",skin:"friendPanel/txBg.png",width:"580",x:"86"}},{type:"Image",props:{y:"275","var":"img_zsBJ",x:"116"}},{type:"Image",props:{rotation:"-20",y:"120","var":"img_rHua",x:"636"}},{type:"Button",props:{y:"473","var":"btn_fenxiang1",labelSize:"25",stateNum:"1",label:"告诉小伙伴",labelBold:"true",height:"64",labelColors:"#000000,#000000,#000000",skin:"reuse/btn_Qd.png",width:"205",x:"74"}},{type:"Image",props:{y:"74",sizeGrid:"20,70,20,20",height:"67",skin:"friendPanel/55d1c54ca089802e.png",width:"277",x:"284"}},{type:"Button",props:{y:"75","var":"btn_fenxiang0",labelSize:"28",stateNum:"1",label:"分享",labelBold:"true",height:"64",labelColors:"#000000,#000000,#000000",skin:"reuse/btn_Qd.png",width:"104",x:"475"}},{type:"Image",props:{y:"74","var":"img_yaoqing",x:"148"}},{type:"Image",props:{height:"110",y:"283","var":"img_ZS",width:"110",x:"128"}},{type:"List",child:[{type:"Box",child:[{type:"Head",props:{runtime:"display.mainIcon.Head",name:"head"}},{type:"Label",props:{y:"120",text:"名字名字",align:"center",height:"30",name:"label",color:"#000000",fontSize:"20",x:"20"}}],props:{name:"render"}}],props:{scaleX:"0.5",y:"465",repeatX:"4","var":"list_play",hScrollBarSkin:"reuse/vscroll.png",scaleY:"0.5",x:"53"}},{type:"Box",child:[{type:"Image",props:{height:"67",y:"1",skin:"friendPanel/55d1c54ca089802e.png",width:"260",sizeGrid:"20,70,20,20"}},{type:"Image",props:{height:"64","var":"btn_lingqu",width:"64",x:"193"}},{type:"TextInput",props:{y:"18","var":"input_txt1",text:"输入对方邀请码",width:"164",height:"33",color:"#ffffff",fontSize:"20",x:"19"}}],props:{y:"184","var":"box_yaoqing",x:"51"}},{type:"List",child:[{type:"Frd_ApplyItem",props:{name:"render",y:"0",runtime:"display.mainIcon.friendInfoPanel.Frd_ApplyItem",x:"0"}}],props:{y:"209",repeatX:"1",vScrollBarSkin:"reuse/vscroll.png",width:"388",height:"338","var":"list_",spaceY:"-15",x:"338"}},{type:"Head",props:{scaleX:"0.5",runtime:"display.mainIcon.Head",scaleY:"0.5","var":"head_applyed",y:"187",x:"145"}},{type:"Label",props:{y:"19",text:"招募小伙伴",width:"750",align:"center",height:"46",color:"#ffffff",fontSize:"35",bold:"true",x:"0"}},{type:"Label",props:{y:"139","var":"label_info",text:"邀请小伙伴一起玩《梦幻家园》可获得丰厚奖品",width:"715",align:"center",height:"36",color:"#000000",fontSize:"25",bold:"true",x:"17"}},{type:"Label",props:{y:"92","var":"btn_lable",text:"正在申请邀请码...",width:"168",height:"29",color:"#000000",fontSize:"20",bold:"true",x:"297"}},{type:"Label",props:{y:"180",text:"邀请好友达到以下条件可领取",width:"353",align:"center",height:"27",color:"#ff9966",fontSize:"20",bold:"true",x:"328"}},{type:"Label",props:{y:"428",text:"我邀请的小伙伴",width:"244",align:"center",height:"27",color:"#000000",fontSize:"20",bold:"true",x:"56"}},{type:"Label",props:{y:"202","var":"label_applyed",text:"已接受             的邀请",width:"275",align:"center",height:"36",color:"#000000",fontSize:"25",bold:"true",x:"50"}}],props:{height:"575",width:"750",pivotY:"-180"}}}]),e}(MyDiaLog),friendPanelUI=function(t){function e(){this.btn_hy=null,this.tx_image=null,this.label_=null,this.add=null,this.input_txt=null,this.box_4=null,this.box_3=null,this.box_2=null,this.box_1=null,this.box_0=null,this.box_name=null,this.name_label=null,this.label_empty=null,this.list_=null,this.panel_search=null,this.box_click=null,this.seek=null,this.label_quxiao=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.friendPanelUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.friendInfoPanel.FrdItem"]=FrdItem,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"5",width:"1070",mouseEnabled:"true",height:"177",skin:"friendPanel/55B83DAE09652009.png",sizeGrid:"10,10,10,10",x:"5"}},{type:"Image",props:{y:"7",skin:"friendPanel/528077D563A9A00B.png",x:"11"}},{type:"Image",props:{y:"118",width:"1099",mouseEnabled:"false",height:"666",mouseThrough:"true",skin:"reuse/528077f163a9a019.png",sizeGrid:"130,30,30,30",x:"-12.5"}},{type:"Image",props:{y:"716",width:"1042",height:"38",alpha:"0.6",skin:"friendPanel/txBg.png",x:"15"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"24",width:"139",labelBold:"true",x:"921",y:"159",labelStrokeColor:"#000000","var":"btn_hy",stateNum:"1",height:"57",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"全部好友"}},{type:"Image",props:{scaleX:"0.45",y:"39",scaleY:"0.45","var":"tx_image",width:"128",height:"128",skin:"reuse/tou0.jpg",x:"46"}},{type:"Image",props:{scaleX:"0.6",y:"31",scaleY:"0.6",skin:"reuse/528077F963A9A01F.png",x:"36"}},{type:"Button",props:{scaleX:"0.5",y:"11",scaleY:"0.5",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"1006"}},{type:"Label",props:{y:"723",text:"提示: 提升VIP等级可以增加好友上限哦!",width:"494",align:"left",height:"40",color:"#cc3333",fontSize:"24",bold:"true",x:"21"}},{type:"Label",props:{y:"723","var":"label_",text:"我的全部好友数量为:7/10",width:"494",align:"right",height:"40",color:"#000000",fontSize:"23",bold:"true",x:"556"}},{type:"Image",props:{y:"154",sizeGrid:"20,70,20,20",height:"67",skin:"friendPanel/55d1c54ca089802e.png",width:"837",x:"80"}},{type:"Image",props:{y:"157","var":"add",skin:"friendPanel/55d1c497a0898019.png",x:"15"}},{type:"TextInput",props:{y:"171","var":"input_txt",text:"搜索:好友",width:"734",height:"33",color:"#ffffff",fontSize:"20",bold:"true",x:"98"}},{type:"Box",child:[{type:"Clip",props:{mouseThrough:"true",name:"bg",clipY:"2",skin:"friendPanel/clip_bg.png",index:"1"}},{type:"Image",props:{scaleX:"0.65",name:"icon",scaleY:"0.65",y:"0",skin:"friendPanel/55d6d8a1f67b300c.png",x:"19"}},{type:"Label",props:{y:"36",text:"最近帮助",color:"#ffffff",fontSize:"23",bold:"true",x:"88"}}],props:{y:"56",name:"box_4","var":"box_4",mouseEnabled:"true",mouseThrough:"false",x:"770"}},{type:"Box",child:[{type:"Clip",props:{mouseThrough:"true",name:"bg",clipY:"2",skin:"friendPanel/clip_bg.png",index:"1"}},{type:"Image",props:{scaleX:"0.65",name:"icon",scaleY:"0.65",y:"0",skin:"friendPanel/55d1c47aa0898012.png",x:"42"}},{type:"Label",props:{y:"35",text:"粉丝",color:"#ffffff",fontSize:"23",bold:"true",x:"120"}}],props:{y:"56",name:"box_3","var":"box_3",mouseEnabled:"true",mouseThrough:"false",x:"595"}},{type:"Box",child:[{type:"Clip",props:{mouseThrough:"true",name:"bg",clipY:"2",skin:"friendPanel/clip_bg.png",index:"1"}},{type:"Image",props:{scaleX:"0.65",name:"icon",scaleY:"0.65",y:"0",skin:"friendPanel/55d1c46ba089800e.png",x:"42"}},{type:"Label",props:{y:"35",text:"关注",color:"#ffffff",fontSize:"23",bold:"true",x:"123"}}],props:{y:"56",name:"box_2","var":"box_2",width:"224",mouseEnabled:"true",height:"83.2",mouseThrough:"false",x:"446"}},{type:"Box",child:[{type:"Clip",props:{mouseThrough:"true",name:"bg",clipY:"2",skin:"friendPanel/clip_bg.png",index:"1"}},{type:"Image",props:{scaleX:"0.65",name:"icon",scaleY:"0.65",y:"0",skin:"friendPanel/55d1c45ea089800a.png",x:"39"}},{type:"Label",props:{y:"35",text:"好友",color:"#ffffff",fontSize:"23",bold:"true",x:"118"}}],props:{y:"56",name:"box_1","var":"box_1",mouseEnabled:"true",mouseThrough:"false",x:"288"}},{type:"Box",child:[{type:"Clip",props:{name:"bg",mouseThrough:"true",clipY:"2",skin:"friendPanel/clip_bg.png",index:"1"}},{type:"Image",props:{scaleX:"0.65",name:"icon",scaleY:"0.65",y:"0",skin:"friendPanel/55d1c446a0898006.png",x:"44"}},{type:"Label",props:{y:"35",text:"求助",color:"#ffffff",fontSize:"23",bold:"true",x:"113"}}],props:{y:"56",name:"box_0","var":"box_0",mouseEnabled:"true",mouseThrough:"false",x:"126"}},{type:"Box",child:[{type:"Label",props:{"var":"name_label",text:"小胖子",align:"center",height:"40",color:"#ffffff",fontSize:"26",bold:"true"}}],props:{y:"98","var":"box_name",width:"123",x:"13"}},{type:"Label",props:{y:"424","var":"label_empty",text:"提示: 提升VIP等级可以增加好友上限哦!",width:"1017",align:"center",height:"40",color:"#000000",fontSize:"30",bold:"true",x:"30"}},{type:"List",child:[{type:"frdItem",props:{name:"render",y:"0",runtime:"display.mainIcon.friendInfoPanel.FrdItem",x:"0"}}],props:{spaceX:"10",y:"245",repeatX:"6","var":"list_",width:"1020",height:"466",vScrollBarSkin:"reuse/vscroll.png",spaceY:"6",repeatY:"2",x:"30"}},{type:"Panel",props:{height:"528",y:"234","var":"panel_search",width:"1060",x:"9"}},{type:"Box",child:[{type:"Image",props:{y:"0","var":"seek",width:"45",height:"45",skin:"friendPanel/55d1c51da089802a.png",x:"38"}},{type:"Label",props:{y:"9","var":"label_quxiao",text:"取消",align:"center",visible:"false",color:"#ffffff",fontSize:"20",bold:"true",x:"35"}}],props:{height:"62",y:"164","var":"box_click",width:"89",x:"826"}}],props:{height:"772",width:"1076"}}}]),e}(MyDiaLog),GEditFriendDlgUI=function(t){function e(){this.btn_close=null,this.btn_=null,this.img0=null,this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.txt_title=null,this.label1=null,this.label3=null,this.label5=null,this.label2=null,this.label0=null,this.label4=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.friendInfoPanel.GEditFriendDlgUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"400",skin:"reuse/528077ed63a9a016.png",width:"640",x:"0"}},{type:"Button",props:{y:"6","var":"btn_close",width:"76",height:"76",name:"close",skin:"reuse/btn_close.png",stateNum:"1",x:"545"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"30",stateNum:"1",labelBold:"true",x:"227",y:"304",labelStrokeColor:"#000000","var":"btn_",label:"确定",height:"64",labelStroke:"2",skin:"reuse/btn_Qd.png",width:"149"}},{type:"Image",props:{y:"104","var":"img0",width:"183",height:"50",sizeGrid:"10,30,10,30",x:"331"}},{type:"Image",props:{y:"172","var":"img1",width:"183",height:"50",sizeGrid:"10,30,10,30",x:"331"}},{type:"Image",props:{y:"240","var":"img2",width:"183",height:"50",sizeGrid:"10,30,10,30",x:"331"}},{type:"Image",props:{y:"172","var":"img3",width:"183",height:"50",sizeGrid:"10,30,10,30",x:"111"}},{type:"Image",props:{y:"240","var":"img4",width:"183",height:"50",sizeGrid:"10,30,10,30",x:"111"}},{type:"Label",props:{y:"24","var":"txt_title",text:"修改好友分组名称",width:"359",height:"46",color:"#ffffff",fontSize:"35",bold:"true",x:"35"}},{type:"TextInput",props:{y:"110",strokeColor:"#000000",width:"165",fontSize:"25",align:"left",height:"37",color:"#ffffff","var":"label1",bold:"true",stroke:"1",x:"339"}},{type:"TextInput",props:{y:"178",strokeColor:"#000000",width:"165",fontSize:"25",align:"left",height:"37",color:"#ffffff","var":"label3",bold:"true",stroke:"1",x:"339"}},{type:"TextInput",props:{y:"246",strokeColor:"#000000",width:"165",fontSize:"25",align:"left",height:"37",color:"#ffffff","var":"label5",bold:"true",stroke:"1",x:"339"}},{type:"TextInput",props:{y:"178",strokeColor:"#000000",width:"165",fontSize:"25",align:"left",height:"37",color:"#ffffff","var":"label2",bold:"true",stroke:"1",x:"119"}},{type:"Label",props:{y:"112","var":"label0",text:"好友",align:"left",fontSize:"25",bold:"true",x:"119"}},{type:"TextInput",props:{y:"246",strokeColor:"#000000",width:"165",fontSize:"25",align:"left",height:"37",color:"#ffffff","var":"label4",bold:"true",stroke:"1",x:"119"}}],props:{height:"400",width:"640"}}}]),e}(MyDiaLog),GiftbagUI=function(t){function e(){this.buyBtn=null,this.buy=null,this.buys=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.GiftbagUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"70",width:"1055",height:"625",skin:"reuse/528077ed63a9a016.png",sizeGrid:"90,50,50,50",x:"139"}},{type:"Label",props:{y:"190",text:"剩余时间：",color:"#993300",fontSize:"45",bold:"true",x:"492"}},{type:"Button",props:{y:"640","var":"buyBtn",labelSize:"46",sizeGrid:"16,16,16,16",stateNum:"1",height:"97",labelColors:"#ffffff,#ffffff,#ffffff,",labelStroke:"1",skin:"reuse/button_527cbad72a3e402b.png",width:"496",x:"421"}},{type:"Button",props:{y:"88",width:"85",height:"85",name:"close",skin:"reuse/btn_close.png",stateNum:"1",x:"1086"}},{type:"Label",props:{y:"664",text:"立即购买",color:"#ffffff",fontSize:"50",bold:"true",stroke:"1",x:"456"}},{type:"Label",props:{y:"664","var":"buy",text:"￥18 ",color:"#ffffff",fontSize:"50",bold:"false",stroke:"1",x:"671"}},{type:"Label",props:{y:"663","var":"buys",text:"￥6",color:"#ff0000",fontSize:"50",bold:"true",stroke:"1",x:"784"}}],props:{height:"750",width:"1334"}}}]),e}(MyDiaLog),goldItemUI=function(t){function e(){this.btn_close=null,this.txt_title=null,this.btn_sure=null,this.btn_cancel=null,this.label_dec=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.goldItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"391",skin:"reuse/528077ed63a9a016.png",width:"545",x:"0.5"}},{type:"Button",props:{y:"6","var":"btn_close",width:"76",height:"76",name:"close",skin:"reuse/btn_close.png",stateNum:"1",x:"445"}},{type:"Label",props:{y:"19","var":"txt_title",text:"点石成金",width:"359",height:"46",color:"#ffffff",fontSize:"35",bold:"true",x:"35"}},{type:"Button",props:{y:"291","var":"btn_sure",labelSize:"30",label:"确定",width:"201",height:"65",labelColors:"#ffffff,#ffffff,#ffffff",labelStroke:"1",skin:"reuse/btn_Qd.png",stateNum:"1",x:"275"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"30",width:"140",labelStroke:"1",x:"69",y:"297","var":"btn_cancel",label:"取消",height:"53",name:"no",skin:"reuse/btn_Qd.png",stateNum:"1"}},{type:"Label",props:{y:"99","var":"label_dec",text:"连续使用1次点金手",align:"left",color:"#ffffff",fontSize:"30",bold:"true",stroke:"1",x:"85"}},{type:"Label",props:{y:"158.5",text:"需要消耗：",align:"left",color:"#ffffff",fontSize:"30",bold:"true",stroke:"1",x:"85"}},{type:"Label",props:{y:"218.5",text:"至少获得：",align:"left",color:"#ffffff",fontSize:"30",bold:"true",stroke:"1",x:"85"}},{type:"Image",props:{y:"146",skin:"reuse/527cc2592399b009.png",x:"228"}},{type:"Image",props:{y:"206",skin:"reuse/527cc2532399b007.png",x:"228"}}],props:{height:"391",width:"545"}}}]),e}(MyDiaLog),goldUI=function(t){function e(){this.box_zhujiemian=null,this.dit=null,this.image_dk2=null,this.box_=null,this.label_dec=null,this.btn_1=null,this.label_keyong=null,this.btn_2=null,this.label_=null,this.close_btn=null,this.pig=null,this.box_item=null,this.image_item_bj=null,this.list_=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.goldUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Box",child:[{type:"Image",props:{y:"42",sizeGrid:"30,80,30,30",mouseEnabled:"true",height:"450",skin:"reuse/528077ed63a9a016.png",width:"653"}},{type:"Image",props:{y:"115",width:"613",height:"248",skin:"gold/55c347cdb69e0012.png",sizeGrid:"20,20,20,20",x:"20"}},{type:"Image",props:{height:"166",y:"50","var":"dit",width:"466",x:"118"}},{type:"Image",props:{y:"195","var":"image_dk2",width:"539",height:"158",skin:"gold/55cc0d1343626013.png",sizeGrid:"60,15,15,15",x:"57"}},{type:"Box",child:[{type:"Image",props:{rotation:"270",y:"97",skin:"reuse/5347780e2346f017.png",x:"150"}},{type:"Image",props:{skin:"reuse/527cc2532399b007.png",x:"304"}},{type:"Image",props:{skin:"reuse/527cc2592399b009.png"}}],props:{y:"262","var":"box_",x:"104"}},{type:"Image",props:{y:"355",sizeGrid:"30,30,55,55",height:"128",skin:"reuse/img_content_item_bg.png",width:"577",x:"37"}},{type:"Label",props:{y:"198","var":"label_dec",text:"使用少量钻石换取大量金币",width:"416",align:"center",height:"42",color:"#fde0a4",fontSize:"28",bold:"true",stroke:"1",x:"121"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"25",sizeGrid:"10,50,10,50",width:"144",labelBold:"true",x:"128",y:"387","var":"btn_1",stateNum:"1",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",label:"单次使用"}},{type:"Label",props:{y:"126","var":"label_keyong",text:"（今日可用0/2）",width:"568",align:"center",height:"37",color:"#ffffff",fontSize:"28",bold:"true",x:"43"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"25",sizeGrid:"10,50,10,50",label:"连续使用",labelBold:"true",x:"368",y:"387","var":"btn_2",width:"144",height:"64",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",stateNum:"1"}},{type:"Label",props:{y:"273","var":"label_",text:"使用少量砖石换取大量金币",width:"518",align:"center",height:"46",color:"#fde0a4",fontSize:"35",bold:"true",stroke:"1",x:"68"}},{type:"Button",props:{scaleX:"0.6",y:"48",scaleY:"0.6","var":"close_btn",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"566"}},{type:"Image",props:{"var":"pig",x:"10"}}],props:{mouseEnabled:"true",y:"-42","var":"box_zhujiemian",x:"0"}},{type:"Box",child:[{type:"Image",props:{y:"0","var":"image_item_bj",sizeGrid:"20,25,20,25",height:"190",skin:"gold/55c1ee1ca8038005.png",width:"613",x:"0.5"}},{type:"List",child:[{type:"Box",child:[{type:"Label",props:{width:"148",align:"right",height:"35",color:"#ffffff",fontSize:"25",bold:"true",x:"394"}},{type:"Image",props:{skin:"reuse/shiyong.png",y:"5"}},{type:"Image",props:{y:"5",skin:"reuse/huode.png",x:"169"}}],props:{name:"render"}}],props:{y:"22",vScrollBarSkin:"reuse/vscroll.png","var":"list_",width:"542",height:"151",spaceY:"2",x:"38"}}],props:{y:"450","var":"box_item",x:"20"}}],props:{height:"640",mouseThrough:"true",width:"653"}}}]),e}(MyDiaLog),OtherInfoUI=function(t){function e(){this.btn_close=null,this.head=null,this.txt_title=null,this.label_name=null,this.qianming=null,this.fangwenliang=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.OtherInfoUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["display.mainIcon.Head"]=Head,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"525",skin:"reuse/528077ed63a9a016.png",width:"640",x:"0"}},{type:"Button",props:{y:"6","var":"btn_close",width:"76",height:"76",name:"close",skin:"reuse/btn_close.png",stateNum:"1",x:"545"}},{type:"Head",props:{y:"103",runtime:"display.mainIcon.Head","var":"head",x:"48"}},{type:"Image",props:{y:"242",skin:"mainOther/xian.png",width:"580",x:"30"}},{type:"Image",props:{y:"302",skin:"mainOther/xian.png",width:"580",x:"30"}},{type:"Image",props:{y:"362",skin:"mainOther/xian.png",width:"580",x:"30"}},{type:"Label",props:{y:"24","var":"txt_title",text:"点石成金",width:"359",height:"46",color:"#ffffff",fontSize:"35",bold:"true",x:"35"}},{type:"Label",props:{y:"122","var":"label_name",text:"人物ID:   128008",width:"263",align:"left",height:"32",color:"#999999",fontSize:"25",x:"182"}},{type:"Label",props:{y:"257","var":"qianming",width:"475",align:"right",height:"32",color:"#999999",fontSize:"25",x:"110"}},{type:"Label",props:{y:"317","var":"fangwenliang",text:"0",width:"263",align:"right",height:"32",color:"#999999",fontSize:"25",x:"322"}},{type:"Label",props:{y:"257",text:"签名：",width:"67",align:"left",height:"32",color:"#000000",fontSize:"25",bold:"true",x:"42"}},{type:"Label",props:{y:"317",text:"访问量：",width:"263",align:"left",height:"32",color:"#000000",fontSize:"25",bold:"true",x:"42"}}],props:{height:"525",width:"640"}}}]),e}(MyDiaLog),matchesUI=function(t){function e(){this.close_btn=null,this.txt=null,this.matchesPanel=null,this.liansai=null,this.paiming=null,this.matchesList=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.rankingPanel.matchesUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"691",skin:"reuse/528077ed63a9a016.png",width:"1022",x:"0"}},{type:"Button",props:{scaleX:".6",y:"9",scaleY:".6","var":"close_btn",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"912"}},{type:"Image",props:{scaleX:"0.6",y:"-80",scaleY:"0.6",width:"304.3333333333338",mouseEnabled:"true",height:"266.00000000000006",skin:"reuse/528077f463a9a01c.png",x:"65"}},{type:"Image",props:{height:"140",y:"-62",skin:"ranking/5270bdfab30a100b.png",width:"142",x:"88"}},{type:"Image",props:{y:"94",width:"811",height:"190",skin:"ranking/55c347cdb69e0012.png",sizeGrid:"20,20,20,20",x:"177"}},{type:"Button",props:{y:"147",labelSize:"25",label:"查看奖励",width:"288",height:"72",labelColors:"#ffffff",skin:"ranking/btn_559.png",stateNum:"1",x:"425"}},{type:"Image",props:{y:"113",skin:"ranking/55d3f5e5c61e900f.png",x:"214"}},{type:"Image",props:{y:"241",sizeGrid:"5,10,5,10",height:"29",skin:"ranking/528077ca63a9a005.png",width:"112",x:"230"}},{type:"Image",props:{scaleX:".6",y:"237",scaleY:".6",skin:"reuse/527cbab92a3e4016.png",x:"198"}},{type:"Label",props:{y:"113",text:"本周",width:"52",align:"left",height:"35",fontSize:"25",x:"382"}},{type:"Label",props:{y:"113",text:"排名前200可获得奖励",width:"268",align:"left",height:"28",fontSize:"25",x:"489"}},{type:"Label",props:{y:"186",text:"2.          150",width:"129",align:"left",height:"30",fontSize:"20",x:"793"}},{type:"Label",props:{align:"left",y:"232",fontSize:"25",text:"离结束还有：5天",x:"479"}},{type:"Label",props:{y:"117",text:"前三名奖励",width:"136",align:"left",height:"34",fontSize:"25",x:"783"}},{type:"Label",props:{y:"152",text:"1.         300",width:"119",align:"left",height:"30",fontSize:"20",x:"793"}},{type:"Label",props:{y:"215",text:"3.            90",width:"131",align:"left",height:"30",fontSize:"20",x:"793"}},{type:"Image",props:{y:"160",skin:"reuse/527cc2592399b009.png",x:"914"}},{type:"Label",props:{y:"113","var":"txt",text:"排名",width:"52",align:"left",height:"35",color:"#ff3300",fontSize:"25",x:"439"}},{type:"Image",props:{y:"77",width:"148",height:"601",skin:"ranking/55c347dbb69e0015.png",sizeGrid:"20,20,20,20",x:"15"}},{type:"Panel",child:[{type:"Box",child:[{type:"Clip",props:{name:"clipBg",width:"99",height:"103",y:"0",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30",x:"0"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"活动",x:"10"}},{type:"Image",props:{y:"12",skin:"ranking/5624c225d6727005.png",x:"44"}}],props:{height:"99",name:"box_0",width:"108",mouseEnabled:"true"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"评价",x:"10"}},{type:"Image",props:{y:"14",skin:"reuse/527cbab02a3e4012.png",x:"42"}}],props:{name:"box_1",width:"106",mouseEnabled:"true",height:"99",y:"74",x:"0"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"人气",x:"10"}},{type:"Image",props:{height:"55",y:"22",skin:"ranking/55d1ac29a42f500a.png",width:"55",x:"46"}}],props:{name:"box_2",y:"148",mouseEnabled:"true"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"等级",x:"10"}},{type:"Image",props:{height:"60",y:"17",skin:"ranking/55ed411b5e17701c.png",width:"60",x:"45"}}],props:{name:"box_3",y:"222",mouseEnabled:"true"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"金币",x:"10"}},{type:"Image",props:{y:"14",skin:"reuse/527cc2532399b007.png",x:"44"}}],props:{name:"box_4",y:"296",mouseEnabled:"true"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"航运",x:"10"}},{type:"Image",props:{y:"15",skin:"ranking/5270aadfb2a06013.png",x:"44"}}],props:{name:"box_5",y:"370",mouseEnabled:"true"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"种植",x:"10"}},{type:"Image",props:{y:"15",skin:"ranking/55d17c84990ba021.png",x:"38"}}],props:{name:"box_6",y:"444",mouseEnabled:"true"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"养殖",x:"10"}},{type:"Image",props:{y:"14",skin:"ranking/55d17c70990ba01d.png",x:"41"}}],props:{name:"box_7",y:"518",mouseEnabled:"true"}}],props:{y:"75","var":"matchesPanel",width:"111",mouseEnabled:"true",height:"600",mouseThrough:"true",vScrollBarSkin:"reuse/vscroll.png",x:"67"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",index:"1",width:"149",height:"63",clipY:"2",skin:"ranking/clip_up.png"}},{type:"Label",props:{y:"20",text:"我的联赛",color:"#990000",fontSize:"22",bold:"true",x:"24"}}],props:{y:"14","var":"liansai",x:"280"}},{type:"Box",child:[{type:"Clip",props:{height:"63",name:"clipBg",clipY:"2",skin:"ranking/clip_up.png",width:"152"}},{type:"Label",props:{y:"19",text:"全球排名",color:"#990000",fontSize:"22",bold:"true",x:"28"}}],props:{y:"16","var":"paiming",x:"471"}},{type:"Label",props:{y:"241",text:"20-29",width:"105",align:"center",height:"27",color:"#ffffff",fontSize:"20",x:"230"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{y:"0",sizeGrid:"20,10,8,10",height:"70",skin:"ranking/5270aad9b2a0600d.png",width:"823",x:"0"}},{type:"Image",props:{y:"1",skin:"reuse/527cbab02a3e4012.png",x:"760"}},{type:"Image",props:{y:"18",skin:"ranking/5270aaceb2a06007.png",x:"75"}},{type:"Image",props:{y:"3",skin:"ranking/5270acfbb2a06028.png",x:"3"}},{type:"Image",props:{y:"2",skin:"reuse/527cbab92a3e4016.png",x:"115"}},{type:"Label",props:{y:"14",text:"1",align:"left",color:"#ff0000",fontSize:"25",bold:"true",x:"24"}},{type:"Label",props:{y:"15",text:"26",align:"left",color:"#ff0000",fontSize:"25",bold:"true",x:"135"}},{type:"Label",props:{y:"19",text:"998",width:"81",align:"right",height:"34",color:"#ff0000",fontSize:"25",bold:"true",x:"679"}},{type:"Label",props:{y:"18",text:"不要998过千万不要",align:"left",color:"#ff0000",fontSize:"25",bold:"true",x:"219"}}],props:{name:"render"}}],props:{y:"295",vScrollBarSkin:"reuse/vscroll.png",width:"844",height:"350","var":"matchesList",repeatY:"5",x:"170"}}],props:{height:"691",width:"1022"}}}]),e}(MyDiaLog),decoratePopupUI=function(t){function e(){this.title=null,this.have=null,this.okBtn=null,this.noBtn=null,this.descriPtion=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.trophyInfoPanel.decoratePopupUI",t);var i=e.prototype;return i.createChildren=function(){
laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"10",width:"435",height:"542",skin:"trophy/563b1bf936ceb00b.png",sizeGrid:"50,50,50,50",x:"43"}},{type:"Label",props:{y:"40","var":"title",text:"装饰岩石",width:"218",align:"center",height:"37",color:"#ffffff",fontSize:"31",bold:"true",stroke:"1",x:"151"}},{type:"Label",props:{y:"98","var":"have",text:"（已拥有：3）",width:"218",align:"center",height:"37",color:"#333333",fontSize:"25",stroke:"1",x:"153"}},{type:"Button",props:{y:"460","var":"okBtn",labelSize:"20",stateNum:"1",width:"133",labelBold:"true",height:"57",labelColors:"#ffffff,#ffffff,#ffffff",skin:"reuse/btn_Qd.png",label:"安装到庄园",x:"281"}},{type:"Button",props:{y:"460","var":"noBtn",labelSize:"20",stateNum:"1",width:"133",labelBold:"true",height:"57",labelColors:"#ffffff,#ffffff,#ffffff",skin:"reuse/btn_Qd.png",label:"全部收起",x:"107"}},{type:"Label",props:{y:"407",wordWrap:"true","var":"descriPtion",text:"美化庄园。",width:"285.3",align:"center",height:"57",color:"#660033",fontSize:"22",bold:"true",x:"120"}},{type:"Image",props:{y:"134",width:"294",height:"240",alpha:"0.5",skin:"trophy/561f5f477bc03005.png",sizeGrid:"50,50,50,50",x:"114"}},{type:"Image",props:{height:"50",y:"136",skin:"reuse/527cbab02a3e4012.png",width:"50",x:"328"}}],props:{height:"550",width:"518"}}}]),e}(MyDiaLog),trophyPanelUI=function(t){function e(){this.ck_1=null,this.ck_2=null,this.cangkuText=null,this.button_close=null,this.ck_0=null,this.clip_ck=null,this.box_view=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.trophyInfoPanel.trophyPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"838",mouseEnabled:"true",height:"577",skin:"reuse/528077ed63a9a016.png",sizeGrid:"59,28,28,67",x:"1"}},{type:"Image",props:{scaleX:"0.5",y:"-79",scaleY:"0.5",width:"360",mouseEnabled:"true",height:"310",skin:"reuse/528077f463a9a01c.png",x:"63"}},{type:"Clip",props:{y:"16","var":"ck_1",width:"95",index:"1",height:"93",clipY:"2",skin:"reuse/clip_ls.png",x:"398"}},{type:"Clip",props:{y:"16","var":"ck_2",width:"90",index:"1",height:"93",clipY:"2",skin:"reuse/clip_gj.png",x:"523"}},{type:"Label",props:{y:"65","var":"cangkuText",text:"生产机器仓库",width:"240",align:"center",height:"42",color:"#ffffff",fontSize:"35",x:"26"}},{type:"Button",props:{scaleX:".6",y:"35",scaleY:".6","var":"button_close",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"726"}},{type:"Clip",props:{y:"16","var":"ck_0",width:"95",index:"0",height:"93",clipY:"2",skin:"reuse/clip_ls.png",x:"277"}},{type:"Clip",props:{y:"-65",index:"0","var":"clip_ck",width:"143",height:"139",clipY:"3",skin:"trophy/clip_mark.png",x:"83"}},{type:"Box",props:{y:"111.5","var":"box_view",width:"805",mouseEnabled:"true",height:"449",x:"18.5"}}],props:{height:"577",mouseThrough:"true",width:"838",mouseEnabled:"true"}}}]),e}(MyDiaLog),foodWarehouseUI=function(t){function e(){this.sj_btn=null,this.tb_Clip=null,this.ls_btn=null,this.wp_btn=null,this.cangkuText=null,this.button_close=null,this.numLabel=null,this.wareList=null,this.box_shengji=null,this.label_nextNum=null,this.shengji0=null,this.shengji1=null,this.shengji2=null,this.btn_shengji=null,e.__super.call(this)}__class(e,"game.ui.mainIcon.warehouse.foodWarehouseUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.mainIcon.warehouse.shengjiItemUI"]=shengjiItemUI,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"754",mouseEnabled:"true",height:"531",skin:"reuse/528077ed63a9a016.png",sizeGrid:"56,30,30,30",x:"0"}},{type:"Image",props:{scaleX:"0.5",y:"-78",scaleY:"0.5",width:"362",mouseEnabled:"true",height:"312",skin:"reuse/528077f463a9a01c.png",x:"62"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"28",sizeGrid:"16,30,16,30",label:"升级",labelBold:"true",x:"236",y:"455",labelStrokeColor:"#000000","var":"sj_btn",width:"285",height:"63",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",stateNum:"1"}},{type:"Clip",props:{y:"-62","var":"tb_Clip",width:"146",index:"0",height:"139",clipY:"2",skin:"reuse/clip_ck.png",x:"79"}},{type:"Clip",props:{y:"29","var":"ls_btn",width:"80",index:"0",height:"82",clipY:"2",skin:"reuse/clip_ls.png",x:"311"}},{type:"Clip",props:{y:"31","var":"wp_btn",width:"77",index:"0",height:"81",clipY:"2",skin:"reuse/clip_gj.png",x:"429"}},{type:"Label",props:{y:"73","var":"cangkuText",text:"粮食仓库",width:"156",align:"center",height:"39",color:"#ffffff",fontSize:"30",bold:"true",x:"74"}},{type:"Button",props:{scaleX:".7",y:"23",scaleY:".7","var":"button_close",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"646"}},{type:"Label",props:{strokeColor:"#000000",text:"143/149",color:"#ffffff",fontSize:"30",x:"552",y:"464","var":"numLabel",width:"124",align:"left",height:"40",bold:"true",stroke:"1"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{height:"83",name:"image",skin:"reuse/527cc2532399b007.png",width:"83"}},{type:"Label",props:{strokeColor:"#000000",text:"20",mouseEnabled:"false",color:"#ffffff",fontSize:"25",x:"83",y:"41",width:"59",align:"left",height:"30",name:"label",bold:"true",stroke:"1"}}],props:{x:"0",name:"render",mouseThrough:"false",y:"0",mouseEnabled:"true"}}],props:{spaceX:"10",spaceY:"0",vScrollBarSkin:"reuse/vscroll.png",mouseEnabled:"true",x:"88.5",y:"125",repeatX:"4","var":"wareList",repeatY:"4",height:"332",enableRenderMerge:"true",width:"617"}},{type:"Box",child:[{type:"Label",props:{y:"296","var":"label_nextNum",text:"粮仓升级后容量提升到：225",align:"left",fontSize:"30",bold:"true",x:"142"}},{type:"shengjiItem",props:{name:"item0",runtime:"game.ui.mainIcon.warehouse.shengjiItemUI","var":"shengji0",mouseEnabled:"true",y:"24",x:"159"}},{type:"shengjiItem",props:{y:"110",name:"item1","var":"shengji1",runtime:"game.ui.mainIcon.warehouse.shengjiItemUI",x:"159"}},{type:"shengjiItem",props:{y:"196",name:"item2","var":"shengji2",runtime:"game.ui.mainIcon.warehouse.shengjiItemUI",x:"159"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"28",sizeGrid:"16,30,16,30",label:"升级",labelBold:"true",x:"518",y:"168",labelStrokeColor:"#000000","var":"btn_shengji",width:"150",height:"100",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",stateNum:"1"}}],props:{y:"113","var":"box_shengji",width:"722",mouseEnabled:"true",height:"342",x:"17"}}],props:{height:"531",mouseThrough:"true",width:"754"}}}]),e}(MyDiaLog),MarketUI=function(t){function e(){this.img_BJ=null,this.btn_close=null,this.btn_tab_1=null,this.img_tab_1=null,this.btn_tab_2=null,this.img_tab_2=null,this.btn_tab_3=null,this.img_tab_3=null,this.btn_tab_4=null,this.img_tab_4=null,this.btn_tab_5=null,this.img_tab_5=null,this.txt_titile=null,this.label_jinbi=null,this.label_zuanshi=null,this.label_beike=null,this.box_num_1=null,this.img_num_1=null,this.label_num_1=null,this.box_num_2=null,this.img_num_2=null,this.label_num_2=null,this.box_num_3=null,this.img_num_3=null,this.label_num_3=null,this.box_num_4=null,this.img_num_4=null,this.label_num_4=null,this.box_num_5=null,this.img_num_5=null,this.label_num_5=null,this.panel_boxctn=null,e.__super.call(this)}__class(e,"game.ui.market.MarketUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"-182","var":"img_BJ",width:"1024",mouseEnabled:"true",height:"1024",x:"-80"}},{type:"Button",props:{scaleX:".6",y:"16",scaleY:".6","var":"btn_close",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"757"}},{type:"Image",props:{y:"605",sizeGrid:"0,10,0,10",height:"32",skin:"market/img_shop_grid.png",width:"195",x:"153"}},{type:"Image",props:{scaleX:".9",y:"589",scaleY:".9",skin:"reuse/527cc2532399b007.png",x:"300"}},{type:"Image",props:{y:"605",sizeGrid:"0,10,0,10",height:"32",skin:"market/img_shop_grid.png",width:"195",x:"372"}},{type:"Image",props:{scaleX:".9",y:"589",scaleY:".9",skin:"reuse/527cc2592399b009.png",x:"525"}},{type:"Image",props:{y:"605",sizeGrid:"0,10,0,10",height:"32",skin:"market/img_shop_grid.png",width:"195",x:"591"}},{type:"Image",props:{scaleX:".9",y:"589",scaleY:".9",skin:"reuse/527cc25d2399b00b.png",x:"738"}},{type:"Box",child:[{type:"Clip",props:{scaleX:".6",name:"tab_bg",scaleY:".6",index:"0",skin:"market/clip_tab_bg.png",clipX:"2"}},{type:"Image",props:{height:"64",y:"1","var":"img_tab_1",width:"64",x:"7"}}],props:{y:"17",name:"btn_tab_1","var":"btn_tab_1",x:"176"}},{type:"Box",child:[{type:"Clip",props:{scaleX:".6",name:"tab_bg",scaleY:".6",index:"0",skin:"market/clip_tab_bg.png",clipX:"2"}},{type:"Image",props:{height:"64",y:"1","var":"img_tab_2",width:"64",x:"7"}}],props:{y:"17",name:"btn_tab_2","var":"btn_tab_2",x:"282"}},{type:"Box",child:[{type:"Clip",props:{scaleX:".6",name:"tab_bg",scaleY:".6",index:"0",skin:"market/clip_tab_bg.png",clipX:"2"}},{type:"Image",props:{height:"64","var":"img_tab_3",width:"64",x:"9"}}],props:{y:"17",name:"btn_tab_3","var":"btn_tab_3",x:"388"}},{type:"Box",child:[{type:"Clip",props:{scaleX:".6",name:"tab_bg",scaleY:".6",index:"0",skin:"market/clip_tab_bg.png",clipX:"2"}},{type:"Image",props:{height:"64","var":"img_tab_4",width:"64",x:"7"}}],props:{y:"17",name:"btn_tab_4","var":"btn_tab_4",x:"493"}},{type:"Box",child:[{type:"Clip",props:{scaleX:".6",name:"tab_bg",scaleY:".6",index:"0",skin:"market/clip_tab_bg.png",clipX:"2"}},{type:"Image",props:{height:"62",y:"2","var":"img_tab_5",width:"61",x:"7"}}],props:{y:"17",name:"btn_tab_5","var":"btn_tab_5",x:"598"}},{type:"Label",props:{y:"33","var":"txt_titile",text:"DIY建筑",width:"147",align:"center",height:"58",color:"#ffffff",fontSize:"40",bold:"false",x:"22"}},{type:"Label",props:{y:"610","var":"label_jinbi",text:"987654321",width:"140",align:"right",height:"28",color:"#ffffff",fontSize:"20",bold:"true",x:"164"}},{type:"Label",props:{y:"610","var":"label_zuanshi",text:"987654321",width:"140",align:"right",height:"28",color:"#ffffff",fontSize:"20",bold:"true",x:"389"}},{type:"Label",props:{y:"610","var":"label_beike",text:"987654321",width:"140",align:"right",height:"28",color:"#ffffff",fontSize:"20",bold:"true",x:"599"}},{type:"Box",child:[{type:"Image",props:{height:"32",y:"0","var":"img_num_1",width:"32",x:"0"}},{type:"Label",props:{y:"3","var":"label_num_1",text:"10",width:"32",align:"center",height:"22",color:"#ffffff",fontSize:"18",bold:"true",x:"0"}}],props:{y:"25","var":"box_num_1",x:"164"}},{type:"Box",child:[{type:"Image",props:{height:"32",y:"0","var":"img_num_2",width:"32",x:"0"}},{type:"Label",props:{y:"3","var":"label_num_2",text:"5",width:"32",align:"center",height:"22",color:"#ffffff",fontSize:"18",bold:"true",x:"0"}}],props:{y:"25","var":"box_num_2",x:"270"}},{type:"Box",child:[{type:"Image",props:{height:"32",y:"0","var":"img_num_3",width:"32",x:"0"}},{type:"Label",props:{y:"3","var":"label_num_3",text:"10",width:"32",align:"center",height:"22",color:"#ffffff",fontSize:"18",bold:"true",x:"0"}}],props:{y:"25","var":"box_num_3",x:"378"}},{type:"Box",child:[{type:"Image",props:{height:"32",y:"0","var":"img_num_4",width:"32",x:"0"}},{type:"Label",props:{y:"3","var":"label_num_4",text:"10",width:"32",align:"center",height:"22",color:"#ffffff",fontSize:"18",bold:"true",x:"0"}}],props:{y:"25","var":"box_num_4",x:"483"}},{type:"Box",child:[{type:"Image",props:{height:"32",y:"0","var":"img_num_5",width:"32",x:"0"}},{type:"Label",props:{y:"3","var":"label_num_5",text:"10",width:"32",align:"center",height:"22",color:"#ffffff",fontSize:"18",bold:"true",x:"0"}}],props:{y:"25","var":"box_num_5",x:"586"}},{type:"Panel",props:{y:"116","var":"panel_boxctn",width:"754",hScrollBarSkin:"reuse/vscroll.png",mouseEnabled:"true",height:"522",name:"panel_boxctn",x:"59"}}],props:{height:"640",width:"865"}}}]),e}(MyDiaLog),MsgBoxType2UI=function(t){function e(){this.img_bj=null,this.btn_close=null,this.txt_title=null,this.txt_content=null,e.__super.call(this)}__class(e,"game.ui.msgbox.MsgBoxType2UI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0","var":"img_bj",sizeGrid:"130,30,30,30",height:"205",skin:"reuse/528077ed63a9a016.png",width:"530",x:"0"}},{type:"Button",props:{scaleX:".6",y:"4",scaleY:".6","var":"btn_close",stateNum:"1",name:"btn_close",skin:"reuse/btn_close.png",x:"431"}},{type:"Label",props:{y:"22","var":"txt_title",text:"充值购买",width:"359",height:"46",name:"txt_title",fontSize:"40",x:"33"}},{type:"Label",props:{y:"91",wordWrap:"true","var":"txt_content",text:"今天直升机代购次数已用完，刷新时间剩余：22时22分22秒",width:"482",align:"center",name:"txt_content",fontSize:"35",bold:"true",x:"24"}}],props:{height:"205",width:"530"}}}]),e}(MyDiaLog),MsgBoxType4UI=function(t){function e(){this.btn_close=null,this.img=null,this.txt_title=null,this.txt_content=null,e.__super.call(this)}__class(e,"game.ui.msgbox.MsgBoxType4UI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"97",width:"545",mouseEnabled:"true",height:"391",skin:"reuse/528077ed63a9a016.png",sizeGrid:"130,30,30,30",x:"136"}},{type:"Button",props:{y:"103","var":"btn_close",width:"76",height:"76",skin:"reuse/btn_close.png",stateNum:"1",x:"581"}},{type:"Image",props:{height:"256",y:"172","var":"img",width:"512",x:"154"}},{type:"Label",props:{y:"120","var":"txt_title",text:"取消售出提示",width:"359",height:"46",color:"#ffffff",fontSize:"35",bold:"true",x:"171"}},{type:"Label",props:{y:"432",wordWrap:"true","var":"txt_content",text:"16级可修建码头，预计修理费用8000金币",width:"512",align:"center",height:"40",name:"txt_content",fontSize:"26",bold:"true",x:"154"}}],props:{height:"586",width:"817"}}}]),e}(MyDiaLog),MsgBoxType5UI=function(t){function e(){this.btn_close=null,this.txt_title=null,this.txt_content=null,this.label_true=null,this.clip_sure=null,this.box_btn=null,this.btn_sure=null,this.label_num=null,this.image_zuanshi=null,this.label_queding=null,e.__super.call(this)}__class(e,"game.ui.msgbox.MsgBoxType5UI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"2",sizeGrid:"130,30,30,30",height:"290",skin:"reuse/528077ed63a9a016.png",width:"530",x:"2"}},{type:"Button",props:{scaleX:".6",y:"7",scaleY:".6","var":"btn_close",stateNum:"1",name:"btn_close",skin:"reuse/btn_close.png",x:"431"}},{type:"Label",props:{y:"18","var":"txt_title",text:"取消售出提示",align:"left",name:"txt_title",color:"#ffffff",fontSize:"40",bold:"true",x:"31"}},{type:"Label",props:{y:"96",wordWrap:"true","var":"txt_content",text:"你确定花费10钻石吗？吗吗吗",width:"482",align:"center",name:"txt_content",fontSize:"35",bold:"true",x:"28"}},{type:"Label",props:{y:"232","var":"label_true",text:"本次登录不再提示",width:"359",height:"28",fontSize:"25",x:"45"}},{type:"Clip",props:{y:"214","var":"clip_sure",x:"422",name:"clip_sure",index:"1",skin:"reuse/clip_select.png",clipX:"2"}},{type:"Box",child:[{type:"Button",props:{name:"btn_sure","var":"btn_sure",width:"275",height:"53",skin:"reuse/btn_5270caa6b30a1013.png",stateNum:"1"}},{type:"Label",props:{y:"14","var":"label_num",text:"100",align:"right",color:"#ffffff",fontSize:"20",bold:"true",x:"46"}},{type:"Image",props:{height:"32",y:"11","var":"image_zuanshi",width:"32",x:"122"}},{type:"Label",props:{y:"14","var":"label_queding",text:"确定",align:"left",color:"#ffffff",fontSize:"20",bold:"true",x:"156"}}],props:{x:"131",y:"161","var":"box_btn",mouseEnabled:"true"}}],props:{height:"290",width:"530"}}}]),e}(MyDiaLog),GOrderDlgUI=function(t){function e(){this.m_pwheel2=null,this.m_pwheel1=null,this.m_matBox=null,this.m_boardBox=null,this.btn_close=null,this.m_pDrop=null,this.m_pHandIn=null,e.__super.call(this)}__class(e,"game.ui.order.GOrderDlgUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"75",width:"778",mouseEnabled:"true",height:"546",skin:"reuse/528077ed63a9a016.png",sizeGrid:"130,30,30,30",x:"6"}},{type:"Image",props:{y:"150",sizeGrid:"50,50,50,50",height:"442.33333333333366",skin:"dingdan/img_dingdan_bg.jpg",width:"746",x:"24"}},{type:"Image",props:{y:"2",width:"176",mouseEnabled:"true",height:"147",skin:"reuse/528077f463a9a01c.png",x:"62"}},{type:"Image",props:{height:"145",y:"463",skin:"dingdan/img_dingdan_box.png",width:"54",x:"595"}},{type:"Image",props:{height:"62",y:"486",skin:"dingdan/5263A9C2E8646013.png",width:"624",x:"44"}},{type:"Image",props:{y:"543",width:"501",height:"58",skin:"dingdan/img_ld.png",sizeGrid:"70,0,70,0",x:"155"}},{type:"Image",props:{y:"576","var":"m_pwheel2",pivotX:"22",x:"633",height:"44",skin:"dingdan/5263aa08e8646028.png",width:"44",pivotY:"22"}},{type:"Image",props:{y:"576","var":"m_pwheel1",pivotX:"22",x:"180",height:"44",skin:"dingdan/5263aa08e8646028.png",width:"44",pivotY:"22"}},{type:"Box",props:{height:"98",y:"488","var":"m_matBox",width:"466",x:"183"}},{type:"Box",props:{y:"163","var":"m_boardBox",width:"679",mouseEnabled:"true",height:"316",x:"58"}},{type:"Image",props:{height:"143",y:"464",skin:"dingdan/img_dingdan_box2.png",width:"111",x:"649"}},{type:"Image",props:{y:"18",skin:"dingdan/img_dingdan_icon.png",x:"84"}},{type:"Button",props:{scaleX:".7",y:"81",scaleY:".7","var":"btn_close",stateNum:"1",height:"114",name:"close",skin:"reuse/btn_close.png",width:"114",x:"684"}},{type:"Button",props:{y:"487","var":"m_pDrop",width:"128",height:"122",skin:"dingdan/btn_gh.png",stateNum:"1",x:"36"}},{type:"Button",props:{y:"472","var":"m_pHandIn",width:"128",height:"122",skin:"dingdan/btn_jh.png",stateNum:"1",x:"638"}}],props:{height:"630",width:"800"}}}]),e}(MyDiaLog),GHomeNickDlgUI=function(t){function e(){this.m_pTitle=null,this.m_pBtnSend=null,this.m_pClose=null,this.img_inputBj=null,this.m_pNick=null,e.__super.call(this)}__class(e,"game.ui.player.GHomeNickDlgUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"260",skin:"reuse/528077ed63a9a016.png",width:"448",x:"0"}},{type:"Label",props:{y:"20","var":"m_pTitle",text:"给自己的庄园取个名字",align:"center",strokeColor:"#000000",color:"#ffffff",fontSize:"35",bold:"true",stroke:"2",x:"42"}},{type:"Button",props:{y:"76","var":"m_pBtnSend",labelSize:"30",width:"90",labelBold:"true",height:"90",skin:"reuse/52a70e9abac7b002.png",stateNum:"1",x:"329"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"30",label:"确定",labelBold:"true",x:"156",y:"170",labelStrokeColor:"#000000","var":"m_pClose",stateNum:"1",height:"69",labelStroke:"2",skin:"reuse/btn_Qd.png",width:"134"}},{type:"Image",props:{y:"96","var":"img_inputBj",sizeGrid:"10,30,10,30",height:"50",width:"302",x:"30"}},{type:"TextInput",props:{strokeColor:"#000000",text:"给自己的庄园取个名字",color:"#ffffff",fontSize:"25",x:"39.5",y:"102.5","var":"m_pNick",width:"283",align:"left",height:"37",bold:"true",stroke:"1"}}],props:{height:"260",width:"448"}}}]),e}(MyDiaLog),QuestManagerUI=function(t){function e(){this.btn_close=null,this.clip_ZX=null,this.clip_MR=null,this.containerAni=null,e.__super.call(this)}__class(e,"game.ui.quest.QuestManagerUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Box",child:[{type:"Image",props:{y:"28",sizeGrid:"10,10,60,10",height:"534",skin:"quest/renwu_bg.png",width:"801",x:"0"}},{type:"Image",props:{y:"36",width:"592",height:"449",skin:"quest/renwu_bg_book.png",sizeGrid:"50,50,50,50",x:"185"}},{type:"Image",props:{y:"16",skin:"quest/renwu_book_bar.png",x:"343"}},{type:"Image",props:{y:"16",skin:"quest/renwu_book_bar.png",x:"237"}},{type:"Image",props:{y:"16",skin:"quest/renwu_book_bar.png",x:"556"}},{type:"Image",props:{y:"16",skin:"quest/renwu_book_bar.png",x:"450"}},{type:"Image",props:{y:"16",skin:"quest/renwu_book_bar.png",x:"662"}},{type:"Button",props:{scaleX:"0.55",y:"0",scaleY:"0.55","var":"btn_close",stateNum:"1",mouseEnabled:"true",skin:"reuse/btn_close.png",x:"749"}},{type:"Clip",props:{y:"117","var":"clip_ZX",x:"758",mouseEnabled:"true",index:"0",skin:"quest/clip_ZX.png",clipX:"2"}},{type:"Clip",props:{y:"201","var":"clip_MR",x:"758",mouseEnabled:"true",index:"1",skin:"quest/clip_MR.png",clipX:"2"}},{type:"Box",child:[{type:"Image"}],props:{x:"19",y:"356","var":"containerAni",bottom:"60",left:"20"}}],props:{mouseEnabled:"true",y:"0",x:"73"}}],props:{height:"562",width:"922",mouseEnabled:"true"}}}]),e}(MyDiaLog),quickPanelUI=function(t){function e(){this.bg=null,this.m_iBtn=null,this.m_iBtn1=null,this.m_iHalfInfoLable=null,e.__super.call(this)}__class(e,"game.ui.quickPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"761",height:"493",skin:"reuse/528077ed63a9a016.png",sizeGrid:"40,67,40,40",x:"0"}},{type:"Image",props:{height:"389",y:"90","var":"bg",width:"728",x:"18"}},{type:"Button",props:{y:"11",width:"77",height:"74",name:"close",skin:"reuse/btn_close.png",stateNum:"1",x:"667"}},{type:"Box",child:[{type:"Button",props:{height:"105",skin:"reuse/btn_common.png",stateNum:"1",width:"256"}},{type:"Label",props:{y:"26",strokeColor:"#000000",text:"加速1个",color:"#ffffff",fontSize:"23",bold:"true",stroke:"1",x:"85"}}],props:{y:"311","var":"m_iBtn",x:"73"}},{type:"Box",child:[{type:"Button",props:{height:"105",skin:"reuse/btn_common.png",stateNum:"1",width:"256"}},{type:"Label",props:{strokeColor:"#000000",text:"全体加速(4个)",color:"#ffffff",fontSize:"23",x:"26",y:"26",width:"200",align:"center",height:"30",name:"m_itext",bold:"true",stroke:"1"}}],props:{y:"311","var":"m_iBtn1",x:"438"}},{type:"Label",props:{y:"21",strokeColor:"#000000",text:"加速生产",color:"#ffffff",fontSize:"41",bold:"true",stroke:"1",x:"299"}},{type:"Label",props:{y:"427","var":"m_iHalfInfoLable",text:"VIP3享5折",fontSize:"20",bold:"true",x:"524"}}],props:{height:"493",width:"761"}}}]),e}(MyDiaLog),RankActDlgUI=function(t){function e(){this.m_pClose=null,this.m_iView=null,this.m_iText=null,e.__super.call(this)}__class(e,"game.ui.rank.RankActDlgUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.rank.act.SubAct"]=SubAct,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"14",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"675",skin:"reuse/528077ed63a9a016.png",width:"959",x:"8"}},{type:"Button",props:{scaleX:".6",y:"20",scaleY:".6","var":"m_pClose",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"863"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",y:"32",labelSize:"24",sizeGrid:"10,30,10,30",label:"奖品",labelBold:"true",x:"406",selected:"true",name:"item1",stateNum:"2",mouseEnabled:"false",height:"65",labelStroke:"#000000",skin:"ranking/clip_up.png",width:"189"}},{type:"Image",props:{sizeGrid:"0,100,0,100",y:"71",skin:"ranking/564ab97030e4f010.png",width:"944",x:"16"}},{type:"List",child:[{type:"SubAct",props:{name:"render",runtime:"game.ui.rank.act.SubAct",width:"850",height:"164",y:"0",x:"0"}}],props:{y:"166",vScrollBarSkin:"reuse/vscroll.png",width:"878",height:"495","var":"m_iView",x:"64"}},{type:"Label",props:{y:"102","var":"m_iText",text:"本周的收集活动前3名可获得炫酷称号",width:"721",align:"center",height:"35",color:"#ffffff",fontSize:"25",bold:"true",x:"129.5"}}],props:{height:"700",width:"980"}}}]),e}(MyDiaLog),RankagShowDlgUI=function(t){function e(){this.m_pClose=null,this.m_ptab=null,this.m_iAwardD=null,this.m_iGroupD=null,e.__super.call(this)}__class(e,"game.ui.rank.RankagShowDlgUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.rank.award.RankAwardView"]=RankAwardView,View.viewClassMap["game.ui.rank.award.RankGroupView"]=RankGroupView,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"714",skin:"reuse/528077ed63a9a016.png",width:"1018",x:"0"}},{type:"Button",props:{scaleX:".6",y:"7",scaleY:".6","var":"m_pClose",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"916"}},{type:"Tab",child:[{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"24",sizeGrid:"10,30,10,30",label:"奖品",labelBold:"true",labelStroke:"#000000",name:"item0",stateNum:"2",height:"65",y:"0",skin:"ranking/clip_up.png",width:"189"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",y:"0",labelSize:"24",sizeGrid:"10,30,10,30",label:"比赛分组",labelBold:"true",x:"191",name:"item1",stateNum:"2",height:"65",labelStroke:"#000000",skin:"ranking/clip_up.png",width:"189"}}],props:{y:"17","var":"m_ptab",x:"316"}},{type:"RankAwardView",props:{y:"75",runtime:"game.ui.rank.award.RankAwardView","var":"m_iAwardD",x:"61"}},{type:"RankGroupView",props:{y:"129","var":"m_iGroupD",width:"968",height:"550",runtime:"game.ui.rank.award.RankGroupView",x:"27"}}],props:{height:"714",width:"1018"}}}]),e}(MyDiaLog),RankDlgUI=function(t){function e(){this.m_pClose=null,this.m_ptab=null,this.m_iKindView=null,this.item6=null,this.m_iGroupBk=null,this.m_pBg=null,this.m_iOverTime=null,this.m_iText=null,this.m_iStarBox=null,this.m_iAwardBtn=null,this.m_iTitleReward=null,this.m_iView=null,this.m_pTips=null,e.__super.call(this)}__class(e,"game.ui.rank.RankDlgUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.rank.RandsItem"]=RandsItem,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"83",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"620",skin:"reuse/528077ed63a9a016.png",width:"916",x:"18"}},{type:"Image",props:{scaleX:"0.6",y:"15",scaleY:"0.6",width:"271.00000000000017",mouseEnabled:"true",height:"229.33333333333348",skin:"reuse/528077f463a9a01c.png",x:"78"}},{type:"Image",props:{y:"29",skin:"ranking/5270bdfab30a100b.png",x:"97"}},{type:"Button",props:{scaleX:".6",y:"89",scaleY:".6","var":"m_pClose",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"831"}},{type:"Image",props:{y:"148",sizeGrid:"10,10,10,10",height:"543",skin:"ranking/55c347dbb69e0015.png",width:"123",x:"33"}},{type:"Tab",child:[{type:"Button",props:{stateNum:"2",labelColors:"#ffffff,#ffffff,#ffffff",name:"item0",labelSize:"24",width:"189",sizeGrid:"30,10,30,0",labelBold:"true",height:"65",labelStroke:"#000000",skin:"ranking/clip_up.png",label:"我的联赛"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",y:"1",labelSize:"24",sizeGrid:"30,10,30,0",label:"全球排名",labelBold:"true",x:"191",name:"item1",stateNum:"2",height:"65",labelStroke:"#000000",skin:"ranking/clip_up.png",width:"189"}}],props:{y:"95","var":"m_ptab",x:"248"}},{type:"Panel",child:[{type:"Box",child:[{type:"Clip",props:{name:"clipBg",index:"0",width:"99",height:"103",y:"0",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30",x:"0"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"活动",x:"10"}},{type:"Image",props:{y:"12",skin:"ranking/5624c225d6727005.png",x:"44"}}],props:{name:"item7",width:"105",mouseEnabled:"true",height:"99",y:"0",x:"0"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"评价",x:"10"}},{type:"Image",props:{y:"14",skin:"reuse/527cbab02a3e4012.png",x:"42"}}],props:{name:"item0",width:"106",mouseEnabled:"true",height:"99",y:"77",x:"0"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"人气",x:"10"}},{type:"Image",props:{height:"55",y:"22",skin:"ranking/55d1ac29a42f500a.png",width:"55",x:"46"}}],props:{x:"0",name:"item1",y:"151",mouseEnabled:"true"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"等级",x:"10"}},{type:"Image",props:{height:"60",y:"17",skin:"ranking/55ed411b5e17701c.png",width:"60",x:"45"}}],props:{x:"0",name:"item2",y:"225",mouseEnabled:"true"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"金币",x:"10"}},{type:"Image",props:{y:"14",skin:"reuse/527cc2532399b007.png",x:"44"}}],props:{x:"0",name:"item3",y:"299",mouseEnabled:"true"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"航运",x:"10"}},{type:"Image",props:{y:"15",skin:"ranking/5270aadfb2a06013.png",x:"44"}}],props:{x:"0",name:"item4",y:"373",mouseEnabled:"true"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"种植",x:"10"}},{type:"Image",props:{y:"15",skin:"ranking/55d17c84990ba021.png",x:"38"}}],props:{name:"item5","var":"item6",width:"109",mouseEnabled:"true",height:"99",y:"447",x:"0"}},{type:"Box",child:[{type:"Clip",props:{name:"clipBg",clipY:"2",skin:"ranking/clip_.png",sizeGrid:"30,30,30,30"}},{type:"Label",props:{align:"left",y:"34",fontSize:"20",text:"养殖",x:"10"}},{type:"Image",props:{y:"14",skin:"ranking/55d17c70990ba01d.png",x:"41"}}],props:{x:"0",name:"item6",y:"521",mouseEnabled:"true"}}],props:{y:"146","var":"m_iKindView",width:"132",mouseEnabled:"true",height:"536",mouseThrough:"true",vScrollBarSkin:"reuse/vscroll.png",x:"49"}},{type:"Box",child:[{type:"Image",props:{y:"0","var":"m_pBg",width:"725",height:"170",visible:"true",skin:"ranking/55c347cdb69e0012.png",sizeGrid:"20,20,20,20",x:"0"}},{type:"Image",props:{height:"26",y:"134",skin:"ranking/528077ca63a9a005.png",width:"104",x:"43"}},{type:"Label",props:{y:"126","var":"m_iOverTime",text:"离结束还有：5天",width:"376",align:"center",height:"37",fontSize:"20",bold:"true",x:"167"}},{type:"Label",props:{y:"26","var":"m_iText",text:"本周评价排名前200可获得奖励",width:"385",align:"center",height:"33",strokeColor:"#ffffff",fontSize:"25",stroke:"1",x:"153"}},{type:"Image",props:{scaleX:".6",y:"129",scaleY:".6","var":"m_iStarBox",skin:"reuse/527cbab92a3e4016.png",x:"18"}},{type:"Button",props:{y:"49","var":"m_iAwardBtn",labelSize:"24",label:"查看奖励",labelBold:"true",labelColors:"#ffffff,#ffffff,#ffffff",skin:"ranking/btn_559.png",stateNum:"1",x:"222"}},{type:"Label",props:{y:"25","var":"m_iTitleReward",text:"前三名奖励",width:"159",align:"left",height:"32",fontSize:"25",x:"537"}},{type:"Label",props:{y:"59",text:"1. ",width:"104",align:"left",height:"28",fontSize:"20",x:"548"}},{type:"Label",props:{y:"87",text:"2.",width:"104",align:"left",height:"28",fontSize:"20",
x:"548"}},{type:"Label",props:{y:"115",text:"3.",width:"104",align:"left",height:"28",fontSize:"20",x:"548"}}],props:{height:"176",y:"167","var":"m_iGroupBk",width:"729",x:"178"}},{type:"List",child:[{type:"RandsItem",props:{height:"63",name:"render",y:"2",runtime:"game.ui.rank.RandsItem",x:"0"}}],props:{y:"349",vScrollBarSkin:"reuse/vscroll.png",width:"745",height:"333","var":"m_iView",x:"171"}},{type:"Label",props:{visible:"false",text:"本周还未入榜，继续努力吧~",mouseEnabled:"false",fontSize:"25",x:"167",y:"483",wordWrap:"true","var":"m_pTips",width:"736",align:"center",height:"111",bold:"true"}}],props:{height:"740",width:"960"}}}]),e}(MyDiaLog),RepayLightUI=function(t){function e(){this.label1=null,this.label2=null,this.m_iBtn=null,e.__super.call(this)}__class(e,"game.ui.RepayLightUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Box",child:[{type:"Label",props:{fontSize:"40",text:"现在花费的",bold:"true",x:"27"}},{type:"Label",props:{color:"#00ffff",fontSize:"40",text:"闪电",bold:"true",x:"230"}},{type:"Label",props:{fontSize:"40",text:"会在",bold:"true",x:"308"}},{type:"Label",props:{y:"43",color:"#ff0000",fontSize:"40",text:"10级全额返还！",bold:"true"}},{type:"Label",props:{y:"43",fontSize:"40",text:"花的",bold:"true",x:"286"}},{type:"Label",props:{y:"82",fontSize:"40",text:"越多返的越多！",bold:"true",x:"2"}}],props:{y:"179","var":"label1",x:"476"}},{type:"Label",props:{y:"175",wordWrap:"true","var":"label2",text:"恭喜你可以领取物品了，赶快领取吧！",width:"385",height:"131",fontSize:"40",bold:"true",x:"500"}},{type:"Button",props:{y:"653","var":"m_iBtn",labelSize:"35",stateNum:"1",width:"240",height:"68",labelColors:"#ffffff,#ffffff,#ffffff",labelStroke:"1",skin:"reuse/btn_Qd.png",label:"领取",x:"542"}}],props:{height:"770",width:"1320"}}}]),e}(MyDiaLog),OnSaleItemUI=function(t){function e(){this.goodsImg=null,this.deleteBtn=null,this.paper=null,this.cooltime=null,this.button_close=null,e.__super.call(this)}__class(e,"game.ui.roadShop.OnSaleItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"56",width:"399",height:"404",skin:"reuse/528077ed63a9a016.png",sizeGrid:"100,100,100,100",x:"40"}},{type:"Image",props:{y:"146",width:"303",height:"120",skin:"reuse/bg.png",sizeGrid:"50,50,50,50",x:"87"}},{type:"Image",props:{y:"161",skin:"reuse/527cc2532399b007.png",x:"282"}},{type:"Image",props:{y:"163","var":"goodsImg",skin:"reuse/527cc2532399b007.png",x:"123"}},{type:"Image",props:{height:"32",y:"181",skin:"roadShop/5270cb20b30a102d.png",width:"56",x:"208"}},{type:"Box",child:[{type:"Image",props:{y:"2",width:"76",height:"24",skin:"roadShop/5270efe1bcaf3012.png",sizeGrid:"20,10,20,10",x:"17"}},{type:"Image",props:{height:"26",skin:"reuse/527cc2592399b009.png",width:"27",x:"59"}}],props:{y:"401",x:"202"}},{type:"Image",props:{y:"370","var":"deleteBtn",width:"80",height:"80",skin:"roadShop/52bce32376b4100e.png",x:"157"}},{type:"Box",child:[{type:"Image",props:{height:"32",skin:"roadShop/5270efe4bcaf3014.png",width:"39"}},{type:"Label",props:{y:"3","var":"cooltime",text:"广告冷却时间：",width:"138",mouseEnabled:"false",align:"center",height:"30",color:"#000000",fontSize:"20",bold:"true",x:"51"}}],props:{y:"271","var":"paper",x:"120"}},{type:"Button",props:{scaleX:".7",y:"57",scaleY:".7","var":"button_close",stateNum:"1",height:"120",name:"close",skin:"reuse/btn_close.png",width:"120",x:"346"}}]}}]),e}(MyDiaLog),RoadShopDepotUI=function(t){function e(){this.ls_btn=null,this.wp_btn=null,this.cangkuText=null,this.button_close=null,this.wareList=null,this.ladk=null,this.goodsInfo=null,this.cooltime=null,this.salebtn=null,this.goodsImg=null,this.m_pCheck=null,this.percent_logo=null,e.__super.call(this)}__class(e,"game.ui.roadShop.RoadShopDepotUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"10",width:"754",mouseEnabled:"true",height:"531",skin:"reuse/528077ed63a9a016.png",sizeGrid:"56,30,30,30",x:"10"}},{type:"Image",props:{scaleX:"0.5",y:"-68",scaleY:"0.5",width:"362",mouseEnabled:"true",height:"312",skin:"reuse/528077f463a9a01c.png",x:"72"}},{type:"Clip",props:{y:"39","var":"ls_btn",width:"80",index:"0",height:"82",clipY:"2",skin:"reuse/clip_ls.png",x:"321"}},{type:"Clip",props:{y:"41","var":"wp_btn",width:"77",index:"0",height:"81",clipY:"2",skin:"reuse/clip_gj.png",x:"439"}},{type:"Label",props:{y:"81","var":"cangkuText",text:"粮食仓库",width:"156",align:"center",height:"39",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"84"}},{type:"Button",props:{scaleX:".7",y:"33",scaleY:".7","var":"button_close",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"656"}},{type:"List",child:[{type:"Box",child:[{type:"Image",props:{height:"85",name:"image",skin:"reuse/527cc2532399b007.png",width:"85"}}],props:{name:"render",y:"10",width:"127",mouseEnabled:"true",height:"85",mouseThrough:"false",x:"40"}}],props:{height:"377",y:"135",repeatX:"3","var":"wareList",repeatY:"4",mouseEnabled:"true",spaceX:"10",vScrollBarSkin:"reuse/vscroll.png",spaceY:"10",width:"404",x:"30"}},{type:"Image",props:{y:"-44",skin:"roadShop/5270efd8bcaf300b.png",x:"98"}},{type:"Image",props:{y:"130","var":"ladk",sizeGrid:"20,20,20,20",height:"388",skin:"roadShop/5270cb26b30a1032.png",width:"308",x:"439"}},{type:"Box",child:[{type:"Image",props:{height:"32",y:"234",skin:"roadShop/5270efe4bcaf3014.png",width:"39",x:"55"}},{type:"Label",props:{y:"25",text:"出售数量",width:"114",mouseEnabled:"false",align:"center",height:"30",name:"label",color:"#996666",fontSize:"18",bold:"true",x:"145"}},{type:"Label",props:{y:"127",text:"出售总价",width:"114",mouseEnabled:"false",align:"center",height:"30",name:"label",color:"#996666",fontSize:"18",bold:"true",x:"145"}},{type:"Label",props:{y:"237","var":"cooltime",text:"广告冷却时间：",width:"138",mouseEnabled:"false",align:"center",height:"30",color:"#000000",fontSize:"20",bold:"true",x:"106"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"20",label:"出售",labelBold:"true",x:"71",y:"339","var":"salebtn",width:"192",height:"52",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",stateNum:"1"}},{type:"Image",props:{y:"10","var":"goodsImg",width:"85",height:"85",skin:"reuse/527cc2532399b007.png",x:"18"}},{type:"Image",props:{name:"image",width:"60",height:"60",y:"132",skin:"reuse/527cc2532399b007.png",x:"31"}},{type:"Clip",props:{y:"219","var":"m_pCheck",x:"250",index:"1",skin:"reuse/clip_select.png",clipX:"2"}},{type:"Clip",props:{"var":"percent_logo",skin:"reuse/clip_52cbb4dd05219002.png",clipX:"4"}}],props:{y:"124","var":"goodsInfo",x:"427"}}]}}]),e}(MyDiaLog),RoadShopMainUI=function(t){function e(){this.bjt=null,this.btn_close=null,this.goodsCon=null,e.__super.call(this)}__class(e,"game.ui.roadShop.RoadShopMainUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"7",width:"776",mouseEnabled:"true",height:"536",skin:"reuse/528077ed63a9a016.png",sizeGrid:"130,30,30,30",x:"-2"}},{type:"Image",props:{height:"441",y:"84","var":"bjt",width:"742",x:"17"}},{type:"Button",props:{scaleX:".6",y:"15",scaleY:".6","var":"btn_close",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"677"}},{type:"Image",props:{scaleX:"0.5",y:"-72",scaleY:"0.5",width:"362",mouseEnabled:"true",height:"312",skin:"reuse/528077f463a9a01c.png",x:"52"}},{type:"Image",props:{y:"-46",skin:"roadShop/5270efd8bcaf300b.png",x:"78"}},{type:"Label",props:{y:"37",text:"路边摊",width:"118",align:"center",height:"32",color:"#ffffff",fontSize:"22",bold:"true",stroke:"1",x:"204"}},{type:"Panel",props:{x:"41",y:"157","var":"goodsCon",width:"689",hScrollBarSkin:"reuse/vscroll.png",height:"362",mouseEnabled:"true"}}],props:{mouseEnabled:"true"}}}]),e}(MyDiaLog),SignDlgUI=function(t){function e(){this.box_view=null,this.bg_box=null,this.m_tab=null,this.close_btn=null,e.__super.call(this)}__class(e,"game.ui.sign.SignDlgUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"211",sizeGrid:"20,20,20,20",height:"504",skin:"reuse/bg.png",width:"747",x:"96"}},{type:"Image",props:{y:"199",sizeGrid:"24,24,24,24",height:"521",skin:"sign/563c80aa4e71300a.png",width:"759",x:"85"}},{type:"Box",props:{y:"219","var":"box_view",width:"717",mouseEnabled:"true",height:"479",x:"106"}},{type:"Box",props:{y:"0","var":"bg_box",width:"901",mouseEnabled:"false",height:"593",x:"0"}},{type:"Tab",child:[{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"22",labelBold:"true",labelStroke:"1",labelMargin:"10,0,0,0",x:"0",y:"0",labelStrokeColor:"#000000",width:"170",height:"80",name:"item0",skin:"sign/btn_tabsign.png",stateNum:"2"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff",labelSize:"22",labelBold:"true",labelStroke:"1",skin:"sign/btn_tabsign.png",x:"140",y:"0",labelStrokeColor:"#000000",stateNum:"2",height:"80",name:"item1",labelMargin:"10,0,0,0",width:"170"}},{type:"Label",props:{y:"38",text:"普通签到",mouseEnabled:"false",color:"#ffffff",fontSize:"24",stroke:"1",x:"40"}},{type:"Label",props:{y:"38",text:"豪华签到",mouseEnabled:"false",color:"#ffffff",fontSize:"24",stroke:"1",x:"180"}}],props:{y:"129","var":"m_tab",x:"143"}},{type:"Button",props:{scaleX:"0.7",y:"145",scaleY:"0.7","var":"close_btn",stateNum:"1",mouseEnabled:"true",height:"92",name:"close",skin:"reuse/btn_close.png",width:"94",x:"758"}}]}}]),e}(MyDiaLog),GTomBuyDlgUI=function(t){function e(){this.tab_0=null,this.tab_1=null,this.m_pClose=null,this.m_pIcon=null,this.m_selBg=null,this.m_pTitle=null,this.m_pOutTime=null,this.m_iView=null,this.m_pFindNow=null,e.__super.call(this)}__class(e,"game.ui.tom.GTomBuyDlgUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"86",width:"782",mouseEnabled:"true",height:"574",skin:"reuse/528077ed63a9a016.png",sizeGrid:"56,30,30,30",x:"16"}},{type:"Image",props:{scaleX:"0.5",y:"10",scaleY:"0.5",width:"362",mouseEnabled:"true",height:"312",skin:"reuse/528077f463a9a01c.png",x:"78"}},{type:"Clip",props:{y:"114","var":"tab_0",width:"80",index:"0",height:"82",clipY:"2",skin:"reuse/clip_ls.png",x:"341"}},{type:"Clip",props:{y:"115","var":"tab_1",width:"77",index:"1",height:"81",clipY:"2",skin:"reuse/clip_gj.png",x:"456"}},{type:"Button",props:{scaleX:".7",y:"102",scaleY:".7","var":"m_pClose",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"695"}},{type:"Image",props:{height:"115",y:"34","var":"m_pIcon",width:"127",x:"104"}},{type:"Image",props:{y:"215","var":"m_selBg",sizeGrid:"20,20,20,20",height:"414",width:"317",x:"452"}},{type:"Label",props:{y:"159","var":"m_pTitle",text:"粮食仓库",width:"168",align:"center",height:"39",color:"#ffffff",fontSize:"25",bold:"true",stroke:"1",x:"79"}},{type:"Label",props:{y:"575","var":"m_pOutTime",text:"今天还可以为您服务：1次",width:"312",align:"center",height:"39",color:"#ffffff",fontSize:"22",bold:"true",stroke:"1",x:"457"}},{type:"List",props:{height:"419",y:"213",repeatX:"2","var":"m_iView",width:"276",mouseEnabled:"true",spaceX:"20",vScrollBarSkin:"reuse/vscroll.png",spaceY:"5",x:"134"}},{type:"Button",props:{labelColors:"#ffffff",labelSize:"20",label:"立即寻找",labelBold:"true",x:"481",y:"494","var":"m_pFindNow",width:"264",height:"66",labelStroke:"1",skin:"reuse/btn_5270caa6b30a1013.png",stateNum:"1"}}],props:{height:"700",width:"800"}}}]),e}(MyDiaLog),EvalueteDlgUI=function(t){function e(){this.m_pTitle=null,this.button_close=null,this.m_pTitleIcon=null,this.tab_2=null,this.tab_1=null,this.tab_0=null,this.m_iEvaBanner=null,this.m_pEvaHelpBtn=null,this.m_iRewardWord=null,this.m_iCoolWord=null,this.m_iLeftSec=null,this.m_iValueNum=null,this.m_iView_0=null,this.m_iView_1=null,this.m_iView_2=null,this.m_iBagNumLable=null,this.m_iEmptyLable=null,e.__super.call(this)}__class(e,"game.ui.totem.EvalueteDlgUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.ornament.totem.EvaItem"]=EvaItem,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"80",width:"838",mouseEnabled:"true",height:"577",skin:"reuse/528077ed63a9a016.png",sizeGrid:"59,28,28,67",x:"10"}},{type:"Image",props:{scaleX:"0.5",y:"1",scaleY:"0.5",width:"360",mouseEnabled:"true",height:"310",skin:"reuse/528077f463a9a01c.png",x:"72"}},{type:"Label",props:{y:"145","var":"m_pTitle",text:"生产机器仓库",width:"252",align:"center",height:"42",color:"#ffffff",fontSize:"35",x:"35"}},{type:"Button",props:{scaleX:".6",y:"115",scaleY:".6","var":"button_close",stateNum:"1",name:"close",skin:"reuse/btn_close.png",x:"735"}},{type:"Clip",props:{y:"15",index:"0","var":"m_pTitleIcon",width:"143",height:"139",clipY:"3",skin:"trophy/clip_mark.png",x:"92"}},{type:"Clip",props:{y:"108","var":"tab_2",index:"1",clipY:"2",skin:"trophy/clip_diy.png",x:"538"}},{type:"Clip",props:{y:"108",clipY:"2","var":"tab_1",index:"1",skin:"trophy/clip_jq.png",x:"412"}},{type:"Clip",props:{y:"108",clipY:"2",skin:"trophy/clip_zs.png","var":"tab_0",x:"291"}},{type:"Box",child:[{type:"Image",props:{y:"0",sizeGrid:"0,50,0,70",height:"128",skin:"trophy/52b3e013ec98a002.png",width:"806",x:"0"}},{type:"Image",props:{y:"30","var":"m_pEvaHelpBtn",width:"70",height:"57",skin:"trophy/52de56172ea47003.png",x:"105"}},{type:"Label",props:{y:"10",text:"总评价:",width:"114",align:"left",height:"40",color:"#ffff00",fontSize:"33",bold:"true",stroke:"1",x:"180"}},{type:"Label",props:{y:"58","var":"m_iRewardWord",text:"每天可领取额外奖励:",width:"225",align:"center",height:"28",color:"#ffff00",fontSize:"20",bold:"true",x:"518"}},{type:"Clip",props:{scaleX:"0.5",y:"91",scaleY:"0.5",index:"2",width:"31",x:"208",height:"31",clipY:"3",skin:"reuse/clip_52d63a9fb2606005.png",clipX:"4"}},{type:"Clip",props:{scaleX:"0.5",y:"91",scaleY:"0.5",index:"2",width:"31",x:"223",height:"31",clipY:"3",skin:"reuse/clip_52d63a9fb2606005.png",clipX:"4"}},{type:"Clip",props:{scaleX:"0.5",y:"91",scaleY:"0.5",width:"31",x:"238",height:"31",clipY:"3",skin:"reuse/clip_52d63a9fb2606005.png",clipX:"4"}},{type:"Clip",props:{scaleX:"0.5",y:"91",scaleY:"0.5",width:"31",x:"253",height:"31",clipY:"3",skin:"reuse/clip_52d63a9fb2606005.png",clipX:"4"}},{type:"Clip",props:{scaleX:"0.5",y:"91",scaleY:"0.5",width:"31",x:"268",height:"31",clipY:"3",skin:"reuse/clip_52d63a9fb2606005.png",clipX:"4"}},{type:"Label",props:{y:"10","var":"m_iCoolWord",text:"冷却时间",width:"225",align:"center",height:"28",color:"#ffff00",fontSize:"20",bold:"true",x:"518"}},{type:"Label",props:{y:"35","var":"m_iLeftSec",width:"225",align:"center",height:"28",color:"#ffffff",fontSize:"20",bold:"true",stroke:"1",x:"518"}},{type:"Label",props:{y:"49","var":"m_iValueNum",text:"222",width:"175",align:"left",height:"44",color:"#ffffff",fontSize:"30",bold:"true",stroke:"1",x:"229"}}],props:{y:"194","var":"m_iEvaBanner",x:"28"}},{type:"List",child:[{type:"EvaItem",props:{runtime:"game.ui.ornament.totem.EvaItem",name:"render"}}],props:{y:"312","var":"m_iView_0",width:"800",height:"328",vScrollBarSkin:"reuse/vscroll.png",enableRenderMerge:"true",x:"31"}},{type:"List",child:[{type:"EvaItem",props:{scaleX:"1.5",runtime:"game.ui.ornament.totem.EvaItem",scaleY:"1.5",width:"394.5",height:"165",name:"render"}}],props:{y:"204","var":"m_iView_1",width:"800",height:"432",vScrollBarSkin:"reuse/vscroll.png",enableRenderMerge:"true",x:"30"}},{type:"List",child:[{type:"EvaItem",props:{scaleX:"1.5",runtime:"game.ui.ornament.totem.EvaItem",scaleY:"1.5",width:"394.5",height:"165",name:"render"}}],props:{y:"255","var":"m_iView_2",width:"800",height:"381",vScrollBarSkin:"reuse/vscroll.png",enableRenderMerge:"true",x:"30"}},{type:"Label",props:{text:"-",color:"#ffffff",fontSize:"30",x:"72",y:"449",wordWrap:"true","var":"m_iBagNumLable",width:"725",align:"center",height:"142",bold:"true",stroke:"1"}},{type:"Label",props:{text:"-",color:"#ffffff",fontSize:"30",x:"73",y:"384",wordWrap:"true","var":"m_iEmptyLable",width:"725",align:"center",height:"142",bold:"true",stroke:"1"}}],props:{height:"660",width:"860"}}}]),e}(MyDiaLog),OrnamentInfoUI=function(t){function e(){this.m_iName=null,this.m_iNum=null,this.m_iPutItemOut=null,this.m_iPackUp=null,this.descriPtion=null,this.m_iBtn=null,this.m_iNone=null,e.__super.call(this)}__class(e,"game.ui.totem.OrnamentInfoUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"435",height:"542",skin:"trophy/563b1bf936ceb00b.png",sizeGrid:"50,50,50,50",x:"0"}},{type:"Image",props:{y:"124",width:"294",height:"240",alpha:"0.5",skin:"trophy/561f5f477bc03005.png",sizeGrid:"5,0,5,0",x:"70"}},{type:"Label",props:{y:"30","var":"m_iName",width:"383",align:"center",height:"37",color:"#ffffff",fontSize:"30",bold:"true",stroke:"1",x:"26"}},{type:"Label",props:{y:"85","var":"m_iNum",text:"（已拥有：3）",width:"334",align:"center",height:"37",color:"#996633",fontSize:"25",bold:"true",x:"50"}},{type:"Button",props:{y:"450","var":"m_iPutItemOut",labelSize:"20",stateNum:"1",width:"133",labelBold:"true",height:"57",labelColors:"#ffffff,#ffffff,#ffffff",skin:"reuse/btn_Qd.png",label:"安装到庄园",x:"238"}},{type:"Button",props:{y:"450","var":"m_iPackUp",labelSize:"20",stateNum:"1",width:"133",labelBold:"true",height:"57",labelColors:"#ffffff,#ffffff,#ffffff",skin:"reuse/btn_Qd.png",label:"全部收起",x:"64"}},{type:"Label",props:{y:"368",wordWrap:"true","var":"descriPtion",width:"297.3",height:"73",color:"#996600",fontSize:"22",bold:"true",x:"68.85"}},{type:"Button",props:{y:"389","var":"m_iBtn",labelSize:"20",stateNum:"1",width:"133",labelBold:"true",height:"57",labelColors:"#ffffff,#ffffff,#ffffff",skin:"reuse/btn_Qd.png",label:"合成",x:"238"}},{type:"Label",props:{y:"85","var":"m_iNone",text:"未拥有",width:"334",align:"center",height:"37",color:"#ff0000",fontSize:"25",bold:"true",x:"50"}}],props:{height:"542",width:"435"}}}]),e}(MyDiaLog),PaperUI=function(t){function e(){this.leftCon=null,this.rightCon=null,this.leftpagetxt=null,this.rightpagetxt=null,this.button_close=null,e.__super.call(this)}__class(e,"game.ui.tv.PaperUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{scaleX:"-1",y:"0",width:"512",height:"512",skin:"tv/52707543f26f100e.png",x:"512"}},{type:"Image",props:{height:"512",y:"0",skin:"tv/52707543f26f100e.png",width:"512",x:"512"}},{type:"Box",props:{height:"410",y:"51","var":"leftCon",width:"469",x:"35"}},{type:"Box",props:{height:"410",y:"51","var":"rightCon",width:"469",x:"519"}},{type:"Label",props:{y:"460","var":"leftpagetxt",text:"1",width:"37",align:"center",height:"23",fontSize:"16",x:"259"}},{type:"Label",props:{y:"460","var":"rightpagetxt",text:"1",width:"37",align:"center",height:"23",fontSize:"16",x:"723"}},{type:"Button",props:{scaleX:".7",y:"4",scaleY:".7","var":"button_close",stateNum:"1",height:"86",name:"close",skin:"reuse/btn_close.png",width:"86",x:"947"}}],props:{height:"512",width:"1024"}}}]),e}(MyDiaLog),VIPprivilegeSpreeUI=function(t){function e(){this.box_bj=null,this.btn_tab_item_03=null,this.clip_3=null,this.icon_3=null,this.btn_tab_item_02=null,this.clip_2=null,this.icon_2=null,this.btn_tab_item_01=null,this.clip_1=null,this.icon_1=null,this.image_bj=null,this.box_=null,this.btn_close=null,e.__super.call(this)}__class(e,"game.ui.vipprivilegespree.VIPprivilegeSpreeUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Box",child:[{type:"Box",child:[{type:"Clip",props:{"var":"clip_3",width:"138",index:"1",height:"153",clipY:"2",skin:"VIPprivilegespree/clip_tab_btn.png"}},{type:"Image",props:{y:"37","var":"icon_3",width:"80",height:"80",skin:"VIPprivilegespree/img_tab_1.png",x:"29"}}],props:{mouseEnabled:"true",y:"373",name:"btn_tab_item_03","var":"btn_tab_item_03",x:"0"}},{type:"Box",child:[{type:"Clip",props:{"var":"clip_2",width:"138",index:"1",height:"153",clipY:"2",skin:"VIPprivilegespree/clip_tab_btn.png"}},{type:"Image",props:{y:"37","var":"icon_2",width:"80",height:"80",skin:"VIPprivilegespree/img_tab_1.png",x:"29"}}],props:{mouseEnabled:"true",y:"264",name:"btn_tab_item_02","var":"btn_tab_item_02",x:"0"}},{type:"Box",child:[{type:"Clip",props:{y:"0",index:"0","var":"clip_1",width:"138",height:"153",clipY:"2",skin:"VIPprivilegespree/clip_tab_btn.png",x:"0"}},{type:"Image",props:{y:"37","var":"icon_1",width:"80",height:"80",skin:"VIPprivilegespree/img_tab_1.png",x:"29"}}],props:{mouseEnabled:"true",y:"161",name:"btn_tab_item_01","var":"btn_tab_item_01",x:"0"}},{type:"Image",props:{y:"0","var":"image_bj",sizeGrid:"130,30,30,30",mouseEnabled:"true",height:"618",skin:"reuse/528077ed63a9a016.png",width:"904",x:"94"}}],props:{"var":"box_bj",mouseEnabled:"true"}},{type:"Box",props:{y:"75","var":"box_",width:"871",mouseEnabled:"true",height:"526",x:"112"}},{type:"Button",props:{scaleX:".5",y:"8",scaleY:".5","var":"btn_close",stateNum:"1",height:"142",name:"close",skin:"reuse/btn_close.png",width:"144",x:"898"}}],props:{height:"618",width:"1042"}}}]),e}(MyDiaLog),GBoatBoxDlgUI=function(t){function e(){this.m_pBk1=null,this.m_pBk2=null,this.m_pStarBk=null,this.m_pSubTitle=null,this.m_pTitleImg=null,this.m_pTitle=null,this.m_pTime=null,this.m_pCost1=null,this.m_pClose=null,this.m_pBuy2=null,this.m_pBuy1=null,this.m_pBuy3=null,e.__super.call(this)}__class(e,"game.ui.wharf.GBoatBoxDlgUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.wharf.ex.GCardItem"]=GCardItem,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"135","var":"m_pBk1",width:"490",height:"240",skin:"wharf/53f474c5ef9fc00a.png",sizeGrid:"10,10,10,10",x:"0"}},{type:"Image",props:{y:"390","var":"m_pBk2",width:"490",height:"186",skin:"wharf/53f474c5ef9fc00a.png",sizeGrid:"10,10,10,10",x:"0"}},{type:"Image",props:{y:"0","var":"m_pStarBk",width:"299",height:"128",skin:"levelUp/52a2c691d325300d.png",x:"80"}},{type:"Label",props:{y:"375","var":"m_pSubTitle",text:"抽奖",width:"245",align:"center",height:"38",color:"#ffffff",fontSize:"28",bold:"true",x:"122.5"}},{type:"Image",props:{y:"65","var":"m_pTitleImg",skin:"levelUp/52a2c68ad3253008.png",x:"40"}},{type:"Label",props:{y:"100","var":"m_pTitle",text:"挑战胜利",width:"222",align:"center",height:"42",color:"#ff440000",fontSize:"30",bold:"true",x:"134"}},{type:"Label",props:{y:"275","var":"m_pTime",text:"完成时间",width:"263",align:"center",height:"42",color:"#ffffff",fontSize:"20",bold:"true",x:"113.5"}},{type:"Label",props:{y:"533","var":"m_pCost1",text:"免费",width:"80",align:"center",height:"36",color:"#ffffff",fontSize:"20",bold:"true",x:"101"}},{type:"Button",props:{y:"555","var":"m_pClose",labelSize:"26",label:"返回",width:"132",labelBold:"true",height:"58",skin:"reuse/button_527cbad72a3e402b.png",stateNum:"1",x:"179"}},{type:"GCardItem",props:{y:"405","var":"m_pBuy2",width:"112",height:"136",runtime:"game.ui.wharf.ex.GCardItem",x:"194"}},{type:"GCardItem",props:{y:"407","var":"m_pBuy1",width:"112",height:"136",runtime:"game.ui.wharf.ex.GCardItem",x:"85"}},{type:"GCardItem",props:{y:"407","var":"m_pBuy3",width:"112",height:"136",runtime:"game.ui.wharf.ex.GCardItem",x:"304"}}],props:{height:"620",width:"490"}}}]),e}(MyDiaLog),GBoatTerminiDlgUI=function(t){function e(){this.m_bg=null,this.m_pTitle=null,this.m_pClose=null,this.m_pLeftBtn=null,this.m_pRightBtn=null,this.m_pMake=null,e.__super.call(this)}__class(e,"game.ui.wharf.GBoatTerminiDlgUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"832",mouseEnabled:"true",height:"568",skin:"reuse/528077ed63a9a016.png",sizeGrid:"100,50,50,50",x:"0"}},{type:"Image",props:{height:"466",y:"79","var":"m_bg",width:"772",x:"17"}},{type:"Label",props:{y:"24","var":"m_pTitle",text:"目的地选择",width:"569",align:"left",height:"46",color:"#ffffff",fontSize:"30",bold:"true",x:"36"}},{type:"Button",props:{scaleX:".7",y:"3",scaleY:".7","var":"m_pClose",stateNum:"1",height:"119.71428571428572",name:"close",skin:"reuse/btn_close.png",width:"124.00000000000001",x:"703"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff","var":"m_pLeftBtn",labelSize:"30",stateNum:"1",width:"51",labelBold:"true",height:"61",y:"284",skin:"reuse/btn_Qd.png",label:"<",x:"-39"}},{type:"Button",props:{labelColors:"#ffffff,#ffffff,#ffffff","var":"m_pRightBtn",labelSize:"30",stateNum:"1",width:"55",labelBold:"true",height:"61",y:"277",skin:"reuse/btn_Qd.png",label:">",x:"788"}},{type:"Button",props:{y:"101","var":"m_pMake",labelSize:"20",stateNum:"1",labelBold:"true",labelColors:"#ffffff,#ffffff,#ffffff",labelStroke:"#000000",skin:"reuse/button_527cbad72a3e402b.png",label:"码头外形",x:"307"}}],props:{height:"623",width:"880"}}}]),e}(MyDiaLog),GSelWharfVisuUI=function(t){function e(){this.m_pTitle=null,this.m_pClose=null,this.m_pList=null,e.__super.call(this)}__class(e,"game.ui.wharf.GSelWharfVisuUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.wharf.termini.GSubVisu"]=GSubVisu,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"802",mouseEnabled:"true",height:"562",skin:"reuse/528077ed63a9a016.png",sizeGrid:"100,50,50,50",x:"0"}},{type:"Label",props:{y:"24","var":"m_pTitle",text:"选择码头的外形",width:"569",align:"left",height:"46",color:"#ffffff",fontSize:"30",bold:"true",x:"36"}},{type:"Button",props:{scaleX:".7",y:"3",scaleY:".7","var":"m_pClose",stateNum:"1",height:"119.71428571428572",name:"close",skin:"reuse/btn_close.png",width:"124.00000000000001",x:"702"}},{type:"List",child:[{type:"GSubVisu",props:{name:"render",runtime:"game.ui.wharf.termini.GSubVisu"}}],props:{y:"148",repeatX:"3","var":"m_pList",width:"730",hScrollBarSkin:"reuse/hscroll.png",height:"396",x:"37"}}],props:{height:"562",width:"802"}}}]),e}(MyDiaLog),GTerminiDlgUI=function(t){function e(){this.m_pName=null,this.m_pClose=null,this.m_pLeft=null,this.m_pTimeInfor=null,this.m_pDif=null,this.m_pRewards=null,this.m_pInfor=null,this.m_pSetBtn=null,e.__super.call(this)}__class(e,"game.ui.wharf.GTerminiDlgUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"0",width:"803",mouseEnabled:"true",height:"563",skin:"reuse/528077ed63a9a016.png",sizeGrid:"100,50,50,50",x:"0"}},{type:"Label",props:{y:"27",text:"目的地名字",width:"626",align:"left",height:"46",color:"#ffffff",fontSize:"30",bold:"true",x:"39"}},{type:"Label",props:{y:"113","var":"m_pName",text:"目的地名字",width:"461",align:"center",height:"63",color:"#000000",fontSize:"40",bold:"true",x:"230"}},{type:"Button",props:{scaleX:".7",y:"5",scaleY:".7","var":"m_pClose",stateNum:"1",height:"119.71428571428572",name:"close",skin:"reuse/btn_close.png",width:"124.00000000000001",x:"703"}},{type:"Label",props:{y:"241","var":"m_pLeft",text:"剩余次数:",width:"130",align:"left",height:"28",color:"#000000",fontSize:"20",bold:"true",x:"254"}},{type:"Label",props:{y:"270","var":"m_pTimeInfor",text:"（每天增加1次挑战次数）",width:"446",align:"left",height:"28",color:"#6d8642",fontSize:"16",bold:"true",x:"249"}},{type:"Label",props:{y:"298","var":"m_pDif",text:"挑战难度:",width:"237",align:"left",height:"46",color:"#000000",fontSize:"20",bold:"true",x:"254"}},{type:"Label",props:{y:"366","var":"m_pRewards",text:"可能获得:",width:"230",align:"left",height:"37",color:"#000000",fontSize:"20",bold:"true",x:"254"}},{type:"Label",props:{y:"423","var":"m_pInfor",text:"预约成功后,下一趟航运生效",width:"408",align:"center",height:"33",color:"#ff0000",fontSize:"18",bold:"true",x:"254"}},{type:"Button",props:{y:"464","var":"m_pSetBtn",labelSize:"20",stateNum:"1",labelBold:"true",labelColors:"#ffffff,#ffffff,#ffffff",labelStroke:"#000000",skin:"reuse/button_527cbad72a3e402b.png",label:"预约挑战",x:"370"}}],props:{height:"563",width:"803"}}}]),e}(MyDiaLog),GWharfDlgUI=function(t){function e(){this.m_pSelTermini=null,this.m_Box=null,this.m_pLock=null,this.m_pClose=null,this.m_pTitle=null,this.m_pSelect=null,this.m_pCon=null,this.m_pT=null,this.m_pFestivalPt=null,this.m_pFinshPt=null,this.m_pBoatQuit=null,e.__super.call(this)}__class(e,"game.ui.wharf.GWharfDlgUI",t);var i=e.prototype;return i.createChildren=function(){View.viewClassMap["game.ui.wharf.SelectOrder"]=SelectOrder,laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"85",width:"932",mouseEnabled:"true",height:"612",skin:"reuse/528077ed63a9a016.png",sizeGrid:"100,50,50,50",x:"16"}},{type:"Image",props:{y:"160",sizeGrid:"50,50,50,50",height:"516.3333333333337",skin:"dingdan/img_dingdan_bg.jpg",width:"899",x:"34"}},{type:"Image",props:{y:"269",width:"860",height:"56",skin:"wharf/5270cb1eb30a102a.png",sizeGrid:"20,0,20,0",x:"52"}},{type:"Image",props:{y:"425",width:"860",height:"53",skin:"wharf/5270cb1eb30a102a.png",sizeGrid:"20,0,20,0",x:"52"}},{type:"Image",props:{y:"590",sizeGrid:"30,00,20,0",height:"53",skin:"wharf/5270cb1eb30a102a.png",width:"861",x:"51"}},{type:"Image",props:{y:"5",width:"180",mouseEnabled:"true",height:"158",skin:"reuse/528077f463a9a01c.png",x:"78"}},{type:"Image",props:{height:"135",y:"26",skin:"wharf/5270caacb30a1017.png",width:"135",x:"101"}},{type:"Image",props:{y:"642",width:"427",height:"32",skin:"wharf/5270e83cbb309002.png",sizeGrid:"10,4,10,4",x:"212"}},{type:"Button",props:{y:"578","var":"m_pSelTermini",skin:"wharf/53f463e6f14b1009.png",stateNum:"1",x:"645"}},{type:"Box",props:{y:"164","var":"m_Box",width:"602",mouseEnabled:"true",height:"480",x:"51"}},{type:"Image",props:{y:"631","var":"m_pLock",width:"120",mouseEnabled:"false",height:"62",skin:"wharf/555981eb1ee4f01c.png",x:"650"}},{type:"Button",props:{scaleX:".7",y:"91",scaleY:".7","var":"m_pClose",stateNum:"1",height:"119.71428571428572",name:"close",skin:"reuse/btn_close.png",width:"124.00000000000001",x:"841"}},{type:"Image",props:{height:"380",y:"175",skin:"wharf/5270cb26b30a1032.png",width:"342",x:"555"}},{type:"Label",props:{y:"108","var":"m_pTitle",text:"码头",width:"424",align:"left",height:"46",color:"#ffffff",fontSize:"30",bold:"true",x:"250"}},{type:"SelectOrder",props:{y:"175",runtime:"game.ui.wharf.SelectOrder","var":"m_pSelect",x:"554"}},{type:"Label",props:{y:"642","var":"m_pCon",text:"连续完成：0",width:"234",align:"left",height:"37",color:"#ffffff",fontSize:"26",bold:"true",x:"252"}},{type:"Label",props:{y:"194","var":"m_pT",text:"船离港剩余时间：",width:"305",align:"left",height:"28",color:"#666666",fontSize:"20",bold:"true",x:"578"}},{type:"Label",props:{
y:"318","var":"m_pFestivalPt",text:"节日额外奖励: ",width:"309",align:"left",height:"28",color:"#ff361e12",fontSize:"20",bold:"true",x:"578"}},{type:"Label",props:{y:"258","var":"m_pFinshPt",text:"全部完成额外奖励：",width:"309",align:"left",height:"28",color:"#000000",fontSize:"20",bold:"true",x:"579"}},{type:"Button",props:{y:"578","var":"m_pBoatQuit",stateNum:"1",name:"m_pBoatQuit",skin:"wharf/5270caa3b30a1010.png",x:"780"}}],props:{height:"700",width:"970"}}}]),e}(MyDiaLog),GWharfWaitUI=function(t){function e(){this.btn_close=null,this.m_pT=null,e.__super.call(this)}__class(e,"game.ui.wharf.GWharfWaitUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},__static(e,["uiView",function(){return this.uiView={type:"MyDiaLog",child:[{type:"Image",props:{y:"79",width:"595",mouseEnabled:"true",height:"401",skin:"reuse/528077ed63a9a016.png",sizeGrid:"100,50,50,50",x:"0"}},{type:"Image",props:{y:"-2",width:"180",mouseEnabled:"true",height:"158",skin:"reuse/528077f463a9a01c.png",x:"61"}},{type:"Image",props:{y:"21",skin:"wharf/534f7c72a071000d.png",x:"82"}},{type:"Button",props:{scaleX:".7",y:"84",scaleY:".7","var":"btn_close",stateNum:"1",height:"120",name:"close",skin:"reuse/btn_close.png",width:"124",x:"488"}},{type:"Label",props:{y:"178","var":"m_pT",text:"下一船到港剩余时间",width:"455",align:"center",height:"39",color:"#000000",fontSize:"26",bold:"true",x:"69"}}],props:{height:"480",width:"595"}}}]),e}(MyDiaLog),RewardBox=function(t){function e(){this.getrewardAni=null,this.aniCon=null,this.m_loopHandler=null,this._po=null,e.__super.call(this),this.init()}__class(e,"display.mainIcon.activityviews.RewardBox",t);var i=e.prototype;return i.init=function(){},i.onShow=function(t,e){function i(){n.getrewardAni.playAni("开启后"),s.visible=!0,a.visible=!0}var n=this;this._po=e,this.aniCon||(this.aniCon=new Sprite),this.aniCon.mouseEnabled=!0,this.getrewardAni=new Muti2DAniIns,this.getrewardAni.mouseEnabled=!0;var s=new Sprite;s.visible=!1;var a=new GetRewardAniUI;a.visible=!1,this.getrewardAni.SetOkHandler(Handler.create(this,function(){var e=n.getrewardAni.GetRect();e&&(n.getrewardAni.x=(e.right-e.left)/2,n.getrewardAni.width=e.right-e.left),n.aniCon.addChild(n.getrewardAni);for(var i=0;i<t.length;i++)if(!(t[i][1]<=0)){var r=new Image2;r.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(t[i][0])[3]),r.x=100*i,r.size(60,60),s.addChild(r);var h=new Label;h.text=t[i][1]+"",h.fontSize=20,h.color="#ffffff",h.stroke=2,h.strokeColor="#000000",h.bold=!0,h.x=r.x+r.width,h.y=20,s.addChild(h)}s.y=80,n.aniCon.addChild(s),n.aniCon.addChild(a),a.x=(n.getrewardAni.width-a.width)/2,a.y=35,s.x=(n.getrewardAni.width-100*t.length)/2+10,a.mouseEnabled=!0,a.sureBtn.on("click",this,n.onRewardAniSure),n.aniCon.scale(DisplayTools.globalScale,DisplayTools.globalScale),DisplayTools.addTarget(n.aniCon,Laya.stage,{x:(Laya.stage.width-a.width)/2,y:(Laya.stage.height-n.aniCon.viewHeight)/2})})),this.getrewardAni.createInsFromName(GDia_Gift.resBox),this.getrewardAni.PlayKindEnd("开启",1,0,Handler.create(this,i))},i.onRewardAniSure=function(){gSys.SetSignal("chggift",null),this.getrewardAni.dispose(),this.getrewardAni=null,this.aniCon.destroyChildren(),this.aniCon.removeSelf(),this.aniCon=null},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e}(MyDiaLog),PaperView=function(t){function e(){if(this.peperObj={},this.peperArr=[],this.lastX=NaN,this.curPage=0,this.totalPage=0,this.goodsPage=0,this.m_szTvData=null,this.desArr=null,this.pageArr=null,this.coverBox=null,this.closeBtn=null,this.itemArr=[],this.container=new Sprite,e.__super.call(this),e.isboo)throw new Error("这是个单例类！");this.init()}__class(e,"display.tv.PaperView",t);var i=e.prototype;return i.init=function(){this.on("mousedown",this,this.onMouseEvent),this.on("mouseup",this,this.onMouseEvent),this.size(1024,512),this.addChild(this.container)},i.createPage=function(){this.destroyChildren(),this.itemArr.length=0;for(var t,e,i=0;3>i;i++)i%2==0?(t=new PaperLeftUI,t.pivotX=512,t.leftpagetxt.text=""+(i+1),this.itemArr.push(t),DisplayTools.addTarget(t,this,{x:0,y:-256,visible:!1},0),this.createMutiText(t,Laya.__parseInt(t.leftpagetxt.text))):(e=new PaperRightUI,e.rightpagetxt.text=""+(i+1),this.itemArr.push(e),DisplayTools.addTarget(e,this,{x:0,y:-256},0),this.createMutiText(e,Laya.__parseInt(e.rightpagetxt.text)));this.itemArr.length%2!=0&&(e=new PaperRightUI,e.rightpagetxt.text=""+(this.itemArr.length+1),this.itemArr.push(e),DisplayTools.addTarget(e,this,{x:0,y:-256},0),this.createMutiText(e,Laya.__parseInt(e.rightpagetxt.text))),this.coverBox=new PaperCoverUI,this.closeBtn=new PaperCloseUI,DisplayTools.addTarget(this.coverBox,this,{x:0,y:-256}),DisplayTools.addTarget(this.closeBtn,this,{x:440,y:-256})},i.createMutiText=function(t,e){for(var i,n,s,a=[],r=0;6>r;r++)i=new GObj2DMutiText,i.LoadAni("tex_文字小_ani"),i.SetScrPos(65,100,1),i.width=i.getClipRect().right-i.getClipRect().left,t.addChild(i),n=new GObj2DMutiText,n.LoadAni("tex_文字中_ani"),n.SetScrPos(65,127,1),t.addChild(n),s=new Sprite,s.size(280,160),t.addChild(s),a.push([i,n,s]);this.peperObj[e]=a},i.onMouseEvent=function(t){var e=this.curPage%4;switch(t.type){case"mousedown":this.on("mousemove",this,this.onMouseEvent),this.lastX=this.getMousePoint().x;break;case"mouseup":this.off("mousemove",this,this.onMouseEvent);break;case"mousemove":this.lastX>0?this.lastX-this.getMousePoint().x>50&&this.curPage+2<this.totalPage&&(this.curPage<0?(Tween.to(this.coverBox,{skewY:-90,scaleX:0},200,null,new Handler(this,this.turnLeft)),this.curPage+=2):(this.setChildIndex(this.itemArr[e+1],this.numChildren-1),Tween.to(this.itemArr[e+1],{skewY:-90,scaleX:0},200,null,new Handler(this,this.turnLeft)),this.curPage+=2,e=this.curPage%4,this.itemArr[e+1].scaleX=1,this.itemArr[e+1].skewY=0,this.fillData(e)),this.off("mousemove",this,this.onMouseEvent)):this.getMousePoint().x-this.lastX>50&&this.curPage>-1&&(this.setChildIndex(this.itemArr[e],this.numChildren-1),Tween.to(this.itemArr[e],{skewY:90,scaleX:0},200,null,new Handler(this,this.turnRight)),this.curPage-=2,this.curPage>-1&&(e=this.curPage%4,this.itemArr[e].scaleX=1,this.itemArr[e].skewY=0,this.fillData(e)),this.off("mousemove",this,this.onMouseEvent))}},i.turnLeft=function(){var t=this.curPage;t=this.curPage%4,this.setChildIndex(this.itemArr[t],this.numChildren-1),this.itemArr[t].scaleX=0,this.itemArr[t].skewY=90,this.itemArr[t].visible=!0,Tween.to(this.itemArr[t],{skewY:0,scaleX:1},200),this.setChildIndex(this.closeBtn,this.numChildren-1)},i.fillData=function(t){this.itemArr[t].leftpagetxt.text=this.curPage+1+"";for(var e=0;e<this.pageArr[this.curPage].length;e++)this.setItemdData(this.pageArr[this.curPage][e],this.itemArr[t],e);if(this.curPage+1<this.goodsPage)for(this.itemArr[t+1].rightpagetxt.text=this.curPage+2+"",e=0;e<this.pageArr[this.curPage+1].length;e++)this.setItemdData(this.pageArr[this.curPage+1][e],this.itemArr[t+1],e);else this.itemArr[t+1].scaleX=0},i.turnRight=function(){if(this.curPage<0)this.setChildIndex(this.coverBox,this.numChildren-1),this.coverBox.scaleX=0,this.coverBox.skewY=-90,Tween.to(this.coverBox,{skewY:0,scaleX:1},200);else{var t=this.curPage;t=this.curPage%4,this.setChildIndex(this.itemArr[t+1],this.numChildren-1),this.itemArr[t+1].scaleX=0,this.itemArr[t+1].skewY=-90,Tween.to(this.itemArr[t+1],{skewY:0,scaleX:1},200)}this.setChildIndex(this.closeBtn,this.numChildren-1)},i.onInit=function(t){if(t&&t[1]){t[0];this.m_szTvData=t[1],this.desArr=[];var e=this.m_szTvData.length;this.goodsPage=e%6==0?Math.floor(e/6):Math.floor(e/6)+1,this.totalPage=this.goodsPage+this.desArr.length,this.pageArr=[];for(var i=0;i<6*this.totalPage;)this.pageArr.push(this.m_szTvData.slice(i,i+6)),i+=6;this.curPage=0,this.createPage(),this.setPaperData(),this.itemArr.length>0&&(this.itemArr[0].visible=!1,Tween.to(this.coverBox,{skewY:-90,scaleX:0},200,null,new Handler(this,this.turnLeft)))}},i.setItemdData=function(t,e,i){if(e["bg"+i].name=t[1],e["goodsImg"+i].skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(t[5])[3]),e["homeName"+i].text=t[2],DisplayTools.setObject(e["homeName"+i],{text:t[2],x:5,y:14,width:109,height:37,fontSize:25}),t[2]&&t[2].length>4){var n=3;t[2].length>7&&(n=4),e["homeName"+i].fontSize=e["homeName"+i].fontSize-t[2].length-n}var s,a=0;a=e instanceof game.ui.tv.PaperLeftUI?Laya.__parseInt(e.leftpagetxt.text)%4:Laya.__parseInt(e.rightpagetxt.text)%4,a||(a=4),s=this.peperObj[a],s&&(s[i][0].SetText(t[6]+""),s[i][1].SetText(t[7]+"$"),s[i][0].SetScrPos(e["goodsImg"+i].x+50,e["goodsImg"+i].y+90,1),s[i][1].SetScrPos(e["goodsImg"+i].x+50,e["goodsImg"+i].y+117,1),s[i][2].pos(e["goodsImg"+i].x-30,e["goodsImg"+i].y-10),s[i][2].on("click",this,this.onMouseClick,[t[1]])),e["head"+i].skin=DataTable.getSkin("tex_face"+t[3]),e["helpstatus"+i].visible=t[8];var r=DataTable.m_iItemTab.Get(t[5]),h=3.3*r[6]*t[6],o=SysID.GETSELLPERCENT(t[7],h);if(o.length>0)switch(e["discount"+i].visible=t[8],o){case"c9":e["discount"+i].index=1;break;case"c8":e["discount"+i].index=2;break;case"c7":e["discount"+i].index=3;break;case"c6":e["discount"+i].index=0}else e["discount"+i].visible=!1},i.onMouseClick=function(t,e){DataTable.m_iOtherUser.applyOtherData(t,Handler.create(this,function(t){GMapView.lubiantan.OnClick()}),!1),display.tv.PaperView.getInstance().close()},i.setPaperData=function(){for(var t=0;t<this.itemArr.length;t++);var e=0,i=0;do if(i<this.totalPage){if(i<this.goodsPage){for(e=0;e<this.pageArr[i].length;e++)this.setItemdData(this.pageArr[i][e],this.itemArr[i],e);if(i+1<this.goodsPage)for(e=0;e<this.pageArr[i+1].length;e++)this.setItemdData(this.pageArr[i+1][e],this.itemArr[i+1],e)}i+=2}while(4>i)},i.close=function(e){this.destroyChildren(),t.prototype.close.call(this,e)},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(MyDiaLog),KnifeView=function(t){function e(){this.offsetX=0,this.offsetY=0,this.m_nUnLeadArrow=0,this.gmv=GameMain._ins.GmView,e.__super.call(this),this._$8_init(),this.on("added",this,this._$8_onAdded)}__class(e,"display.crop.KnifeView",t);var i=e.prototype;return i._$8_onAdded=function(){GLeadManager.RegArrowInterface(this,"田_收获",0,0,80)},i._$8_init=function(){this.cropBox.dataSource={cropIcon:"ui/icon/51bfe749311a3004.png",jiantou:"3d/tex/5284c06ba4be7029.png",jinbi:{visible:!1},jinbiText:"",cropText:""},this.on("added",this,this.AddH)},i.AddH=function(){GMB_Field.isHide=!1},i.onMouseDown=function(){this.offsetX=Laya.stage.mouseX-(64+this.x),this.offsetY=Laya.stage.mouseY-(64+this.y),this.m_nUnLeadArrow=1,DisplayTools.addTarget(this.tooltip,this,{x:this.cX,y:this.cY-this.tooltip.height/1.5,mouseEnabled:!1,mouseThrough:!0}),Tooltip.getInstance().init(),Tooltip.getInstance().TipContent={label1:{text:"收割农作物",fontSize:18,align:this.left},image:{height:80}},Tween.to(this.cropBox,{scaleX:this.scaleM,scaleY:this.scaleM},100,Ease.expoInOut,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:.3},jiantou:{visible:!1}},this.cropBox.startDrag(),this.stage.once("mouseup",this,this._$8_onMouseUp),this.stage.on("mousemove",this,this._$8_onMouseMove)},i.CheckLeadArrow=function(){return this.m_nUnLeadArrow},i._$8_onMouseMove=function(){this.removeTip();var t=this.gmv.getMPBuild(60,this.offsetX,this.offsetY);if(t instanceof game.build.GMB_Field){if(t.m_nLinkItemID<4e3||!GameMain._ins.m_gameUI.mouseBoolean)return;t.OnHarvest()}if(t instanceof Array)for(var e=0,i=t.length;i>e;e++)t[e]&&t[e]instanceof game.build.GMB_Field&&(t[e].m_nLinkItemID<4e3||!GameMain._ins.m_gameUI.mouseBoolean||t[e].OnHarvest())},i._$8_onMouseUp=function(){this.m_nUnLeadArrow=0,this.removeTip(),this.stage.off("mousemove",this,this._$8_onMouseMove),this.cropBox.stopDrag(),Tween.to(this.cropBox,{x:this.cX,y:this.cY,scaleX:this.scaleN,scaleY:this.scaleN},100,null,null,0,!0),this.cropBox.dataSource={cropBg:{alpha:1},jiantou:{visible:!0}},GMB_Field.isHide&&GameMain._ins.m_gameUI.disposeIcon()},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(CropView),GResDlg=function(t){function e(){e.__super.call(this)}__class(e,"game.ui.base.GResDlg",t);var i=e.prototype;return i.Open=function(){},i.Init=function(t,e){},e}(MyDiaLog),GTomHarvestDlg=function(t){function e(){this.m_pBkBubble=null,this.m_pTalk=null,this.m_Tom=null,this.m_pCanBuy=null,this.m_pOutTime=null,e.__super.call(this),this.m_pBkBubble=new Image2,this.m_pBkBubble.skin="3d/tex/51f9cee9fb2d6002.png",this.addChild(this.m_pBkBubble),this.m_pBkBubble.size(500,430),this.m_pBkBubble.pos(-150,-380),this.m_pTalk=new Label,this.m_pTalk.wordWrap=!0,this.m_pTalk.fontSize=30,this.m_pTalk.bold=!0,this.m_pTalk.size(270,300),this.m_pTalk.pos(this.m_pBkBubble.x+130,this.m_pBkBubble.y+150),this.m_pTalk.text="这是我帮您找到的。请挑选一个您喜欢的",this.addChild(this.m_pTalk),this.m_Tom=new Muti2DAniIns,this.m_Tom.createInsFromName("tex_npc飞行员分层_ani"),this.addChild(this.m_Tom),this.m_Tom.scale(3,3),this.m_Tom.pos(this.m_pBkBubble.x-100,300),this.m_pCanBuy=new Box,this.addChild(this.m_pCanBuy),this.m_pCanBuy.pos(this.m_pBkBubble.x+50,0),this.m_pOutTime=new Label,this.m_pOutTime.color="#FFFFFF",this.m_pOutTime.fontSize=24,this.m_pOutTime.stroke=1,this.m_pOutTime.size(400,100),this.m_pOutTime.wordWrap=!0,this.m_pOutTime.text="剩余次数",this.m_pOutTime.bold=!0,this.addChild(this.m_pOutTime),this.m_pOutTime.pos(this.m_pBkBubble.x+100,240)}__class(e,"game.ui.buyback.tom.GTomHarvestDlg",t);var i=e.prototype;return i.onReset=function(){e.m_pLink=null,this.m_pOutTime.text="剩余次数"},i.myPopup=function(e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!0),void 0===n&&(n=!0),t.prototype.myPopup.call(this,e,i,n),this.OnInit()},i.close=function(e){t.prototype.close.call(this,e),this.onReset()},i.OnInit=function(){var t=DataTable.m_iBuyBack.Get();if(t){this.SetItemData(e.m_pLink.m_nItemID,t[5],e.m_pLink.m_nLeftTime);var i="今天还可以为您服务：%次";i=i.replace("%",""+e.m_pLink.m_nLeftTime),this.m_pOutTime.text=i}},i.BuyItem=function(t,e,i,n,s){DataTable.m_iSelfUser.OnTomBuy(t,e,i,n,s,Handler.create(this,this.OnTomBuyRe))},i.OnTomBuyRe=function(t){if(t){var i=e.m_pLink.CheckMode();3==i||4==i?e.m_pLink.OnPlaneGo(0):e.m_pLink.OnPlaneGo(1),this.OnClose()}},i.SetItemData=function(t,e,i){this.m_pCanBuy.removeChildren();var n=DataTable.m_iItemTab.Get(t);if(null==n)return void gSys.Err("item not find id="+t);for(var s,a=0,r=0;e&&r<e.length;r++)if(!e[r]||3==e[r].length){var h=0;e[r][1]-e[r][0]>0&&(h=Math.floor(i%(e[r][1]-e[r][0])));var o=Math.floor(e[r][0]+h),l=Math.floor(3.3*n[6]*o*e[r][2]*1/100);1>l&&(l=1);var u=new GBuyBackItem(this);if(u.SetPos(60+120*r,64),u.InitMe(t,o,r,l),this.m_pCanBuy.addChild(u),a=Math.floor(3.3*n[6]*o),s=SysID.GETSELLPERCENT(l,a),s&&s.length>0){var c=new Muti2DAniIns;c.setPos(60+120*r-41,61),c.createInsFromName("tex_打折_ani"),c.playAni(s),this.m_pCanBuy.addChild(c)}}var _=new Button;_.label="都不需要",_.clickHandler=Handler.create(this,this.OnClose);var m="reuse/btn_5270caa6b30a1013.png";Laya.loader.load(m,Handler.create(this,this.onLoadSkin,[_,m]),null,"image"),_.pos(60,160),_.size(264,64),_.labelSize=20,_.labelStroke=1,_.labelColors="#ffffff,#ffffff,#ffffff",this.m_pCanBuy.addChild(_)},i.onLoadSkin=function(t,e){t.skin=e,t.stateNum=1},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e.m_pLink=null,e}(MyDiaLog),GTomHireDlg=function(t){function e(){this.m_pHireBox=null,this.m_pBkBubble=null,this.TomImg=null,this.m_pTalk=null,e.__super.call(this),this.create()}__class(e,"game.ui.comui.GTomHireDlg",t);var i=e.prototype;return i.myPopup=function(e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!0),void 0===n&&(n=!0),t.prototype.myPopup.call(this,e,i,n),this.OnInit()},i.onReset=function(){e.m_pLink=null},i.dispose=function(){e.m_pLink=null,this.TomImg.dispose(),this.m_pHireBox.dispose(),this.destroy()},i.create=function(){this.m_pBkBubble=new Image2,this.m_pBkBubble.skin="3d/tex/51f9cee9fb2d6002.png",this.addChild(this.m_pBkBubble),this.m_pBkBubble.size(500,430),this.m_pBkBubble.pos(-206,-400),this.m_pTalk=new Text,this.m_pTalk.text="您需要雇佣我吗?",this.m_pTalk.fontSize=30,this.m_pTalk.bold=!0,this.m_pTalk.x=-70,this.m_pTalk.y=-231,this.addChild(this.m_pTalk),this.m_pHireBox=new GHireBox(this),this.addChild(this.m_pHireBox),this.m_pHireBox.pos(-155,-80),this.TomImg=new Muti2DAniIns,this.TomImg.createInsFromName("tex_npc飞行员分层_ani"),this.addChild(this.TomImg),this.TomImg.scale(3,3),this.TomImg.pos(this.m_pBkBubble.x-100,300)},i.OnInit=function(){var t=DataTable.m_iBuyBack.Get();t&&this.m_pHireBox.InitHire(t[4],e.m_pLink.m_nLeftTime)},i.OnHire=function(t,e){return t>0?void DataTable.m_iSelfUser.OnTomHire(t,e,Handler.create(this,this.OnTomHireRe)):void this.OnClose()},i.OnTomHireRe=function(t){t&&(e.m_pLink.CheckMode(),this.OnClose())},i.OnClose=function(){t.prototype.OnClose.call(this),this.onReset()},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e.m_pLink=null,e}(MyDiaLog),GPopMenu=function(t){function e(){this.m_nNeedUpdate=0,this.m_pPanel=null,this.m_pArrow=null,this.m_szItems=[],e.__super.call(this),this.m_pPanel=new Image2,this.m_pPanel.skin=DataTable.getSkin("tex_素材_菜单面板"),this.m_pPanel.sizeGrid="30,30,30,30",this.addChild(this.m_pPanel),this.m_pArrow=new GObj2DImg,this.m_pArrow.skin=DataTable.getSkin("tex_素材_菜单箭头"),this.m_pArrow.pivot(0,23),this.addChild(this.m_pArrow),this.m_pArrow.visible=!1}__class(e,"game.ui.comui.menu.GPopMenu",t);var i=e.prototype;return i.OnClose=function(){t.prototype.OnClose.call(this),this.removeChildren()},i.AppendObjItem=function(t){GSysPopMenu.s_pMenu&&GSysPopMenu.s_pMenu.AppendItem(t)},i.AppendImgItem=function(t,e,i,n,s,a,r,h){if(void 0===n&&(n=60),void 0===s&&(s=40),void 0===a&&(a=0),void 0===r&&(r=0),void 0===h&&(h=""),!GSysPopMenu.s_pMenu)return null;var o=new MyPopMenuItem;return o.SetDef(h,e,t,n,s,a,r),o.Data(i),GSysPopMenu.s_pMenu.AppendItem(o),o},i.Pop=function(){this.OnShow()},i.OnShow=function(){if(!this.m_nNeedUpdate)return void(this.visible=!0);var t=0,e=0;if(this.m_szItems&&!(this.m_szItems.length<1)){e=20,t=0;for(var i,n=0;this.m_szItems&&n<this.m_szItems.length;n++)i=this.m_szItems[n],e+=i.height/2,i.x=0,i.y=e,e+=i.height/2+5,t=Math.max(t,i.width);this.size(t,e),t+=40,e+=20,this.m_pPanel.size(t,e),this.m_pPanel.pivot(t/2,0);var s=0,a=0;s=Laya.stage.mouseX,a=Laya.stage.mouseY,this.pos(s,a),this.m_nNeedUpdate=0,this.visible=!0,this.popupCenter=!1,this.myPopup(!1)}},i.AppendItem=function(t){return this.m_szItems.push(t),this.addChild(t),this.m_nNeedUpdate=1,t},e.Menu=function(t){game.ui.comui.menu.GPopMenu.Close(),GSysPopMenu.s_pMenu=new e,game.ui.comui.menu.GPopMenu.s_pOwner=t},e.Close=function(){GSysPopMenu.s_pMenu&&(GSysPopMenu.s_pMenu.OnClose(),GSysPopMenu.s_pMenu=null)},e.Pop=function(){GSysPopMenu.s_pMenu&&GSysPopMenu.s_pMenu.Pop()},e.s_pOwner=null,e}(MyDiaLog),OpenGift=function(t){function e(){this.box=null,this.btn=null,this.okHandler=null,this.giftArr=null,this.itemIconArr=null,e.__super.call(this),this.init()}__class(e,"game.ui.comui.OpenGift",t);var i=e.prototype;return i.init=function(){this.isCanClickMaskToDel=!1,this.create()},i.create=function(){this.itemIconArr=[],this.box=new Muti2DAniIns,this.box.createInsFromName("tex_宠物寻宝宝箱_ani"),this.addChild(this.box),this.box.scale(2,2),this.btn=new Button("reuse/btn_common.png","确认"),this.btn.labelColors="#ffffff,#ffffff,#ffffff",this.btn.labelSize=30,this.btn.labelStroke=1,this.btn.stateNum=1,this.addChild(this.btn),this.btn.pos(this.btn.x-this.btn.width/2,this.btn.y=200),this.createBox(3),this.btn.on("click",this,this.okClick)},i.createBox=function(t){if(!(1>t))for(var e,i,n,s,a=0;t>a;a++)e=new GItemIconBase1,i=new GObj2DMutiText,i.LoadAni("tex_文字小_ani"),i.SetScrPos(40,10,0),i.scale(1.3,1.3),n=new Point(this.btn.x*this.itemIconArr.length+150,this.btn.y-80),s=new Sprite,s.addChild(e),s.addChild(i),s.mouseEnabled=!1,s.mouseThrough=!0,this.itemIconArr.push([e,i,n,s]),n=null,i=null,e=null,s=null},i.okClick=function(){var t,e=this.giftArr.length,i=0;for(i=0;e>i;i++)t=this.localToGlobal(this.itemIconArr[i][2],!0),GFlyItemIcon.AutoFlyTo(this.giftArr[i][0],this.giftArr[i][1],[t.x,t.y]),t=null;this.removeSelf(),this.okHandler&&(this.okHandler.run(),this.okHandler=null)},i.onStart=function(t,e,i){i&&this.box.createInsFromName(i),this.giftArr=t,this.okHandler=e,this.box.playAni("开启"),Tween.to(this.box,{x:80,y:-200},200,Ease.elasticInOut),Tween.to(this.box,{x:0,y:0},200,null,null,200),this.giftArr.length>this.itemIconArr.length&&this.createBox(this.giftArr.length-this.itemIconArr.length),Laya.timer.once(500,this,this.onPlay)},i.onPlay=function(){if(this.giftArr&&!(this.giftArr.length<1)){this.box.playAni("开启后");var t=this.giftArr.length,e=0;for(e=0;t>e;e++)this.itemIconArr[e][0].Init(this.giftArr[e][0]),this.itemIconArr[e][1].SetText(this.giftArr[e][1]+""),this.itemIconArr[e][3].pos(10,-55),this.addChild(this.itemIconArr[e][3]),Tween.to(this.itemIconArr[e][3],{x:this.itemIconArr[e][2].x-10,y:this.itemIconArr[e][3].y-90},200,null,null,100*e),Tween.to(this.itemIconArr[e][3],{x:this.itemIconArr[e][2].x,y:this.itemIconArr[e][2].y},200,Ease.strongInOut,null,100*e+200)}},i.removeSelf=function(){var e=this.itemIconArr.length,i=0;for(i=0;e>i;i++)this.itemIconArr[i][3].removeSelf();return t.prototype.removeSelf.call(this)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(MyDiaLog),FastBuildPop=function(t){function e(){this.m_pLink=null,this.m_pFastPro=null,e.__super.call(this),this.m_pFastPro=CountDown.getInstance(),this.m_pFastPro.sdClick=Handler.create(this,this.OnCDOver)}__class(e,"game.ui.wharf.FastBuildPop",t);var i=e.prototype;return i.dispose=function(){this.removeChildren(),this.destroy(),this.m_pLink=null,this.m_pFastPro=null,e._me=null},i.SetLinkObj=function(t){this.m_pLink=t},i.OnPrepareShow=function(){},i.OnCDOver=function(t){this.m_pLink.OnQuickFix(t),this.m_pFastPro.removeSelf(),this.OnClose()},i.TimeEnd=function(){this.m_pFastPro.removeSelf(),this.OnClose()},i.OnClose=function(){t.prototype.OnClose.call(this),this.dispose()},i.OnCreate=function(){DisplayTools.addTarget(this.m_pFastPro,GameMain._ins.m_gameUI.container,{x:this.m_pLink.getScrPoint().x-100,y:this.m_pLink.getScrPoint().y}),this.m_pFastPro.Init(86400,this.m_pLink.m_nLeftSec,1,this)},i.Init=function(t){DisplayTools.addTarget(this.m_pFastPro,GameMain._ins.m_gameUI.container,{x:this.m_pLink.getScrPoint().x-100,y:this.m_pLink.getScrPoint().y}),this.m_pFastPro.Init(86400,t,1,this)},i.GetNeedDiamond=function(t){return Math.floor(t/600)+1},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(MyDiaLog),LogDebug=function(t){function e(){this.tempA=NaN,e.__super.call(this),this.on("added",this,this._$8_onAdded),this.on("removed",this,this._$8_onRemoved),this.panel_.mouseEnabled=this.panel_.content.mouseEnabled=!0,this.panel_.vScrollBar.hide=!0}__class(e,"game.ui.LogDebug",t);var i=e.prototype;return i._$8_onAdded=function(){e.isShow=!0,this.tempA=this.panel_.vScrollBar.value,this.tempA&&(this.panel_.vScrollBar.value=this.panel_.vScrollBar.max),this.txt.text=Log1.logDebug,this.panel_.refresh()},i._$8_onRemoved=function(){e.isShow=!1},i.updateText=function(){this.tempA=this.panel_.vScrollBar.value,this.txt.text=Log1.logDebug,this.tempA&&(this.panel_.vScrollBar.value=this.tempA),this.panel_.refresh()},__getset(1,e,"I",function(){return e.i=e.i||new e},game.ui.logUI._$SET_I),e.i=null,e.isShow=!1,e}(logUI),SelfRandsItem=function(t){function e(){e.__super.call(this),this.m_pBg.skin=DataTable.getSkin("tex_素材_蓝排名底板"),this.visible=!1}__class(e,"game.ui.rank.SelfRandsItem",t);var i=e.prototype;return i.OnInitSelf=function(){this.mouseEnabled=!0,this.m_pLvl.SetText(""+DataTable.m_iSelfUser.GetLevel()),this.m_pName.text=DataTable.m_iSelfUser.GetNick(),this.m_pTr.SetScrPos(681,30,0),this.m_pIcon.pos(706,30)},i.InitSelf=function(t,e,i){if(!t||t.length<7)return this.visible=!1,0;var n=0;return n=t[2],this.m_pIcon.skin=DataTable.getSkin(i),t[1]+1},i.OnLBUp=function(t,e){},e}(RandsItem),ActivityMainView=function(t){function e(){if(this.tmp_posx=0,this.tmp_posy=0,this.tab_name=["首充6元","帮装船","双倍奖励","在线礼包","签到","活动码"],this.tabArr=[],this.spritePanel=null,this.tags=0,this.allAct=[],e.__super.call(this),e.isboo)throw new Error("这是单例类@！");this.initTabScreen()}__class(e,"display.mainIcon.activityviews.ActivityMainView",t);var i=e.prototype;return i.initTabScreen=function(){var t=this;DataTable.m_iSelfUser.AddNoti("activchg",this,this.updateTab);var e=new Muti2DAniIns;e.SetOkHandler(Handler.create(this,aniSucc=function(){e.setPos(t.box_bj.width/2,t.box_bj.height/5),e.scale(1.15,1.15),t.box_bj.addChild(e)})),e.createInsFromName("tex_运营活动顶框_ani"),this.subCanvas.mouseEnabled=!0,this.list_tab.scrollBar.visible=!1,this.list_tab.mouseHandler=new Handler(this,this.onMouseHandler),DisplayTools.scrollBar=this.list_tab.scrollBar,this.on("added",this,this.updateTab)},i.updateTab=function(){this.allAct=DataTable.m_iActivityTab.GetShowAll(0)[0],this.tabArr.length=0;for(var t=[],e=0;e<this.tab_name.length;e++)0==e&&DataTable.m_iSelfUser.GetFirRecharge()||(1!=e||this.onFindAct(3).length)&&(t=new Object,t.tab_btn_txt=""+this.tab_name[e],t.tab_btn_clip=e>0?1:0,t.name=""+this.tab_name[e],this.tabArr.push(t));var i=this.list_tab.scrollBar.value;this.list_tab.array=this.tabArr,this.list_tab.scrollBar.value=i;var n=new Event;n.type="click",n.target=new Sprite,DataTable.m_iSelfUser.GetFirRecharge()?this.onFindAct(3).length&&"升级送礼"==this.tab_name[1]?n.target.name="升级送礼":n.target.name="帮装船":n.target.name="首充6元",DataTable.m_iSelfUser.GetCurOLGiftSec()<=0&&(n.target.name="在线礼包"),1==this.tags&&(n.target.name="首充6元",this.tags=-1),this.onMouseHandler(n,0);var s=gSys.GetLocalTime();this.dataTxt.text=DateOp.getDateStr(s)},i.onFindAct=function(t){for(var e=0;e<this.allAct.length;e++)if(this.allAct[e][1][0]==t)return this.allAct[e][1];return[]},i.onMouseHandler=function(t,e){if("click"==t.type){for(var i=0;i<this.tabArr.length;i++)t.target.name==this.tabArr[i].name?this.tabArr[i].tab_btn_clip=0:this.tabArr[i].tab_btn_clip=1;var n=this.list_tab.scrollBar.value;this.list_tab.array=this.tabArr,this.list_tab.scrollBar.value=n;var s=[];switch(this.spritePanel&&this.spritePanel.removeSelf(),t.target.name){case"首充6元":s=this.onFindAct(9),this.desTitle.text=s[12],this.spritePanel=Activity_fristChargeView.getInstance(),Activity_fristChargeView.getInstance().onInit(s);break;case"升级送礼":s=this.onFindAct(3),this.desTitle.text=s[12];break;case"帮装船":s=this.onFindAct(404),this.desTitle.text=s[12],this.spritePanel=Activity_zmhdView.getInstance(),Activity_zmhdView.getInstance().Index=1;break;case"双倍奖励":s=this.onFindAct(230),this.desTitle.text=s[12],this.spritePanel=Activity_zmhdView.getInstance(),Activity_zmhdView.getInstance().Index=2;break;case"精彩活动":s=this.onFindAct(231),this.desTitle.text=s[12],this.spritePanel=Activity_zmhdView.getInstance(),Activity_zmhdView.getInstance().Index=3;break;case"在线礼包":s=this.onFindAct(4),this.desTitle.text=s[12],this.spritePanel=Activity_OnlineLbView.getInstance();break;case"签到":s=this.onFindAct(6),this.desTitle.text=s[12],this.spritePanel=Activity_zmhdView.getInstance(),Activity_zmhdView.getInstance().Index=0;break;case"首次分享":s=this.onFindAct(220),this.desTitle.text=s[12];break;case"活动码":s=this.onFindAct(7),this.desTitle.text=s[12],this.spritePanel=Activity_zmhdView.getInstance(),Activity_zmhdView.getInstance().Index=4}DisplayTools.addTarget(this.spritePanel,this.subCanvas,{x:this.tmp_posx,y:this.tmp_posy,visible:!0})}},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(ActivityMainUI),Activity_hdm=function(t){function e(){e.__super.call(this),this.init()}__class(e,"display.mainIcon.activityviews.Activity_hdm",t);var i=e.prototype;return i.init=function(){this.btn_.on("click",this,this.onGetReward),this.btn_.disabled=!1,this.input_.text="",this.input_.on("input",this,this.onInput),this.input_bj.skin=DataTable.getSkin("tex_素材_输入框")},i.onInput=function(){this.input_.text},i.onGetReward=function(){return this.input_.text.length>0?(DataTable.m_iSelfUser.OnHandInActCode(this.input_.text,[Laya.stage.width/2,Laya.stage.height/2,0,"",10]),void this.close()):void gSys.GameMsg("请输入活动码",!1)},e}(Activity_hdmUI),TradeWarning=function(t){function e(){this.m_szData=null,this.m_nRet=0,this.m_nTradeKind=0,e.__super.call(this),this.sureBtn.on("click",this,this.onMouse)}__class(e,"display.mainIcon.chat.trade.TradeWarning",t);var i=e.prototype;return i.onMouse=function(){this.close(),this.OnClick()},i.InitData=function(t,e){this.m_szData=t,this.m_nTradeKind=e,this.UpDate()},i.UpDate=function(){if(null!=this.m_szData){this.getImg.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.m_szData[6][0])[3]),this.costImg.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(this.m_szData[7][0])[3]);var t=new GObj2DMutiText;t.LoadAni("tex_文字小_ani"),t.SetScrPos(320,156,0),t.SetText(this.m_szData[6][1]+""),this.addChild(t),t=new GObj2DMutiText,t.LoadAni("tex_文字小_ani"),t.SetScrPos(320,240,0),t.SetText(this.m_szData[7][1]+""),this.addChild(t)}},i.OnClick=function(){this.m_nRet=1,gSys.SetSignal("worldtradconfig",this.m_nRet),this.OnSellTradeItem(this.m_szData,[Laya.stage.mouseX,Laya.stage.mouseY])},i.OnSellTradeItem=function(t,e){var i,n=0;if(0==this.m_nTradeKind?(i="工具互换",n=60002):(i="世界求购",n=40004),!DataTable.m_iSelfUser.IsCanVipFunc(n)){var s=i+"需要VIP"+Math.floor(n/1e4)+"才能使用";return void gSys.PopOkCancel(Handler.create(this,function(){}),null,null,s,"VIP求购提示")}DataTable.m_iSelfUser.OnSellTradeItem(new Handler(this,this.backHandler),t,e)},i.backHandler=function(t){},e}(TradeWarningUI),DingdanView=function(t){function e(){if(this.item_tmp=null,this.item_arr=[],e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.btn_close.on("click",this,this.onClickBtnCloseHandler),this.btn_change.on("click",this,this.onClickChangeBtnHandler),this.initView()}__class(e,"display.mainIcon.dingdan.DingdanView",t);var i=e.prototype;return i.onClickChangeBtnHandler=function(){this.item_tmp&&this.item_tmp.changeHandler()},i.onClickBtnCloseHandler=function(){this.removeSelf()},i.initView=function(){for(var t=-1,e=0;2>e;e++)for(var i=0;4>i;i++){t++;var n=new DingdanItemView;n.x=(n.width+20)*i+300,n.y=(n.height+20)*e+198,this.addChild(n),n.name="dingdan"+t,this.item_arr.push(n),n.jiazi.skin="dingdan/img_r_zs.png",n.on("mousedown",this,this.onMouseDownThisHandler)}this.btn_jiaohuo.on("click",this,this.onClickJiaoHuoBtnHandler)},i.onClickJiaoHuoBtnHandler=function(t){},i.onMouseDownThisHandler=function(t){for(var e=0;e<this.item_arr.length;e++)this.item_arr[e].jiazi.skin="dingdan/img_r_zs.png";this.setChildIndex(t.target,this.numChildren-1),this.item_tmp=t.target,this.stage.on("mouseup",this,this.onMouseUpHandler),Tween.to(this.item_tmp,{scaleX:.7,scaleY:.7},100)},i.onMouseUpHandler=function(t){Tween.to(this.item_tmp,{scaleX:1,scaleY:1},100),this.item_tmp.moveItemHandler(),this.item_tmp.jiazi.skin="dingdan/img_w_zs.png",this.stage.off("mouseup",this,this.onMouseUpHandler)},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(DingdanUI),FigureInfoPanel=function(t){function e(){if(this.index=0,this.spritePanel=null,this.m_pArchTip=null,e.__super.call(this),e.isboo)throw new Error("请用  getInstance()来获取实例");this.init(),WSocket.normalLog&&this.icon.on("click",this,this.onIconClick)}__class(e,"display.mainIcon.figureInfoPanel.FigureInfoPanel",t);var i=e.prototype;return i.onIconClick=function(){},i.RefreshArchTip=function(){this.m_pArchTip.Set(DataTable.m_iSelfUser.CountNewArch())},i.init=function(){this.m_pArchTip=new GUI_NumberTip,this.clip_hg.addChild(this.m_pArchTip),this.m_pArchTip.pos(58,60),this.RefreshArchTip(),DataTable.m_iSelfUser.AddNoti("archchged",this,this.RefreshArchTip),this.addEvent(),this.upData()},i.addEvent=function(){this.closeHandler=new Handler(this,this.onCloseHandler),
this.close_btn.name="close",this.clip_tx.on("click",this,this.clipClickHandler),this.clip_hg.on("click",this,this.clipClickHandler)},i.clipClickHandler=function(t){DataTable.m_iSoundTab.OnPlay("标签切页"),t.target==this.clip_tx?this.index=0:t.target==this.clip_hg&&(this.index=1),this.upData()},i.upData=function(){this.spritePanel&&this.spritePanel.removeSelf(),1==this.index?(this.clip_hg.index=0,this.clip_tx.index=1,this.icon.skin=DataTable.getSkin("tex_素材_成就图标"),this.spritePanel=Achievement.getInstance(),this.spritePanel.onShow()):(this.clip_hg.index=1,this.clip_tx.index=0,this.spritePanel=FigureInfo.getInstance(),this.icon.skin=DataTable.getSkin("tex_素材_修改头像界面图标"),this.spritePanel.onShow()),DisplayTools.addTarget(this.spritePanel,this.box_view,{y:-170})},i.onCloseHandler=function(){this.spritePanel.removeSelf(),this.removeSelf()},__getset(0,i,"Index",null,function(t){this.index=t,this.upData()}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(figurePanelUI),Quick=function(t){function e(){this.m_pLink=null,this.m_iAni=null,this.m_iAni1=null,this.m_iAni2=null,this.cultureContainer=null,this.fieldContainer=null,this.m_iOneMoney=null,this.m_iMoreMoney=null,this.m_iMoreMoney1=null,this.discount=null,this.sp=new Sprite,e.__super.call(this),this.OnInitEnd()}__class(e,"display.kit.Quick",t);var i=e.prototype;return i.OnInitEnd=function(){this.cultureContainer=new Sprite,this.fieldContainer=new Sprite,this.addChild(this.cultureContainer),this.addChild(this.fieldContainer),this.bg.skin="3d/tex/55963f49e9f32003.png";var t=new DisplayItem(null,!1),e=new DisplayItem(null,!1),i=new DisplayItem(null,!1),n=new DisplayItem(null,!1);t.LoadFromName("uiimg_土地围栏_ani"),e.LoadFromName("uiimg_土地围栏_ani_001"),i.LoadFromName("uiimg_土地围栏_ani"),n.LoadFromName("uiimg_土地围栏_ani_001"),i.SetAniKind("遮挡"),n.SetAniKind("遮挡"),DisplayTools.addTarget(t.m_disObj,this.cultureContainer,{x:200,y:250}),DisplayTools.addTarget(e.m_disObj,this.cultureContainer,{x:550,y:250}),DisplayTools.addTarget(i.m_disObj,this.cultureContainer,{x:200,y:250}),DisplayTools.addTarget(n.m_disObj,this.cultureContainer,{x:550,y:250});var s=new DisplayItem(null,!1),a=new DisplayItem(null,!1);s.LoadFromName("uiimg_土地0_ani"),a.LoadFromName("uiimg_土地0_ani_001"),DisplayTools.addTarget(s.m_disObj,this.fieldContainer,{x:200,y:250}),DisplayTools.addTarget(a.m_disObj,this.fieldContainer,{x:566,y:250}),this.m_iAni=new DisplayItem(null,!1),this.m_iAni1=new DisplayItem(null,!1),this.m_iAni2=new DisplayItem(null,!1),this.m_iOneMoney=new GObj2DMutiText,this.m_iOneMoney.LoadAni("tex_文字小_ani"),this.m_iBtn.addChild(this.m_iOneMoney),this.m_iOneMoney.SetScrPos(132,85,1),this.m_iMoreMoney=new GObj2DMutiText,this.m_iMoreMoney.LoadAni("tex_文字小_ani"),this.m_iBtn1.addChild(this.m_iMoreMoney),this.m_iMoreMoney.SetScrPos(132,85,1),this.m_iMoreMoney1=new GObj2DMutiText,this.m_iMoreMoney1.LoadAni("tex_文字小_ani"),this.m_iBtn1.addChild(this.m_iMoreMoney1),this.m_iMoreMoney1.SetScrPos(102,85,1),this.m_iMoreMoney1.scale(.8,.8),this.sp.pos(122,65),this.sp.graphics.drawRect(0,0,1.5,55,"#ff0000"),this.sp.rotation=75,this.m_iBtn1.addChild(this.sp),this.discount=new Muti2DAniIns,this.discount.createInsFromName("tex_打折_ani"),this.m_iBtn1.addChild(this.discount),this.discount.pos(39,42),this.discount.playAni("c6"),this.m_iBtn.on("click",this,this.onClicks,[0]),this.m_iBtn1.on("click",this,this.onClicks,[1]),this.m_iBtn.on("mousedown",this,this.downH,[this.m_iBtn]),this.m_iBtn1.on("mousedown",this,this.downH,[this.m_iBtn1])},i.downH=function(t){TweenTool.getInstance().buttonTween(t)},i.onClicks=function(t){this.m_pLink.OnSelectKind(t),this.OnClose()},i.setShow=function(t){this.m_iMoreMoney1.visible=!!t,this.sp.visible=!!t,this.discount.visible=!!t,t?this.m_iMoreMoney.SetScrPos(172,85,1):this.m_iMoreMoney.SetScrPos(132,85,1)},i.OnSetTime=function(t,e,i,n){void 0===n&&(n=0),this.cultureContainer.visible=!1,this.fieldContainer.visible=!1,this.m_iMoreMoney1.visible=!1,this.sp.visible=!1,e[1]<1&&(e[1]=1);var s=e[1];e[0]>1&&(s=Math.floor(s/2)),1>s&&(s=1),this.m_iOneMoney.SetText(t+"^");var a;DataTable.m_iSelfUser.IsCanVipFunc(n?30005:30004)?(this.setShow(1),this.m_iMoreMoney1.SetText(e[1]+"^"),this.m_iMoreMoney.SetText(s+"^"),this.m_iHalfInfoLable.text=""):(this.setShow(0),this.m_iOneMoney.SetText(t+"^"),this.m_iMoreMoney.SetText(e[1]+"^"),a="VIP%1享%2折",a=a.replace("%1",Math.floor(DataTable.m_iSelfUser.GetVipFuncLv(n?30005:30004))),a=a.replace("%2",Math.floor(5)),this.m_iHalfInfoLable.text=a),this.m_iBtn1.dataSource={m_itext:"全部加速("+e[0]+"个)"},this.m_iAni.LoadFromName(i),this.m_iAni1.LoadFromName(i),this.m_iAni2.LoadFromName(i),this.m_iAni.SetAniKind("单独帧"),this.m_iAni1.SetAniKind("单独帧"),this.m_iAni2.SetAniKind("单独帧"),n?(DisplayTools.addTarget(this.m_iAni.m_disObj,this.cultureContainer,{x:200,y:250},2),DisplayTools.addTarget(this.m_iAni1.m_disObj,this.cultureContainer,{x:490,y:250},2),DisplayTools.addTarget(this.m_iAni2.m_disObj,this.cultureContainer,{x:615,y:250},2),this.cultureContainer.visible=!0):(DisplayTools.addTarget(this.m_iAni.m_disObj,this.fieldContainer,{x:200,y:250}),DisplayTools.addTarget(this.m_iAni1.m_disObj,this.fieldContainer,{x:510,y:250}),DisplayTools.addTarget(this.m_iAni2.m_disObj,this.fieldContainer,{x:625,y:250}),this.fieldContainer.visible=!0)},i.OnSelectKind=function(t){},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(quickPanelUI),Settings=function(t){function e(){if(this.isClick=!0,e.__super.call(this),this.point=new Point,e.isboo)throw new Error("请用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.figureInfoPanel.Settings",t);var i=e.prototype;return i.init=function(){this.btn_screenshots.skin=DataTable.getSkin("BTN_TAKEPHOTOL"),this.btn_set.skin=DataTable.getSkin("tex_backbtn"),this.box_set.on("click",this,this.onSetClick),this.panel_.vScrollBar.hide=!0,this.panel_.vScrollBar.elasticDistance=200,this.panel_.vScrollBar.elasticBackTime=50;for(var t=0;4>t;t++)this["box_"+t].on("mousedown",this,this.onBoxMouseDown,[this["box_"+t]]);this.on("added",this,this._$9_onAdded)},i._$9_onAdded=function(){this.box_set.visible=!1},i.onSetClick=function(){this.title.text="游戏设置",this.box_set.visible=!1},i.onBoxMouseDown=function(t){this.point.setTo(Laya.stage.mouseX,Laya.stage.mouseY);var e=t.getChildByName("white");e.visible=!0,Laya.stage.on("mousemove",this,this.onMouseMove_Up,[e]),Laya.stage.on("mouseup",this,this.onMouseMove_Up,[e])},i.onMouseMove_Up=function(t,e){if("mousemove"==e.type){Point.EMPTY.setTo(Laya.stage.mouseX,Laya.stage.mouseY);var i=MathUtil1.Vec2Dis(this.point.x,this.point.y,Point.EMPTY.x,Point.EMPTY.y);i>20&&(t.visible=!1)}else if("mouseup"==e.type){if(Laya.stage.off("mousemove",this,this.onMouseMove_Up),Laya.stage.off("mouseup",this,this.onMouseMove_Up),!this.isClick)return;if(!t.visible)return;if(t.visible=!1,!this.whichView(t))return;this.box_set.visible=!0,this.box_set.alpha=0,Tween.to(this.box_set,{alpha:1},500)}},i.whichView=function(t){var e=t.parent;switch(e.name){case"帐号管理":return this.title.text="帐号管理",!0;case"高级设置":return this.title.text="高级设置",!0;case"帮助和支持":return this.title.text="帮助和支持",!0;case"关于我们":return this.title.text="关于我们",!0}return!1},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e}(SettingsUI),AddFriend=function(t){function e(){if(e.__super.call(this),e.isboo)throw new Error("请用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.friendInfoPanel.AddFriend",t);var i=e.prototype;return i.init=function(){var t=this;this.btn_lingqu.skin=DataTable.getSkin("uiimg_领取"),this.btn_.skin="reuse/btn_5270caa6b30a1013.png",this.list_.renderHandler=new Handler(this,this.onListRender),this.input_txt.on("focus",this,_on_focus=function(){t.input_txt.text=""}),this.input_txt1.on("focus",this,_on_focus1=function(){t.input_txt1.text=""}),this.add.on("click",this,this.OnAddFrdByID),this.btn_lingqu.on("click",this,this.OnInvatiedCode),this.add.on("mousedown",this,this.onMouseDownTween,[this.add]),this.btn_lingqu.on("mousedown",this,this.onMouseDownTween,[this.btn_lingqu]),this.btn_.on("click",this,this.onShare),GameMarket.isShare?(this.btn_.visible=!0,this.btn_lable.visible=!0,this.btn_lable.text="和好友一起玩游戏"):(this.btn_.visible=!1,this.btn_lable.visible=!1)},i.onShare=function(){GameMarket.share()},i.onMouseDownTween=function(t){TweenTool.getInstance().buttonTween(t)},i.OnAddFrdByID=function(){DataTable.m_iSoundTab.playButton(),this.add.disabled=!0;var t=this.input_txt.text;return t=t.replace(" ",""),t.length<1||"输入对方ID"==t?void(this.add.disabled=!1):(this.AddFollower(Handler.create(this,_backFF=function(t){t&&(GFlyItemIcon.FlyText("添加关注成功","#00ff00"),MainIcon.getInstance().onShowFriendView(2))}),t),this.input_txt.text="输入对方ID",void(this.add.disabled=!1))},i.OnInvatiedCode=function(){DataTable.m_iSoundTab.playButton(),this.btn_lingqu.disabled=!0;var t=this.input_txt1.text;return t=t.replace(" ",""),t.length<1?void(this.btn_lingqu.disabled=!1):(this.SubmitCode(t),this.input_txt1.text="",void(this.btn_lingqu.disabled=!1))},i.SubmitCode=function(t){var e=this;return t.length<4?void gSys.GameMsg("无效的邀请码！",!1):void DataTable.m_iSelfUser.GetInviteReward(t,-1,Handler.create(this,_aabb=function(t){if(!t)return void gSys.GameMsg("服务未开放");var i=[500,500];switch(t[0]){case 0:var n=t[2];DataTable.m_iSelfUser.CheckMakeItemSz(n,1,0,Handler.create(e,_succF=function(){var t=new StringRef;DataTable.m_iSelfUser.ChgItemSz(n,t,OPEnum.OP_YQM_JL,i,1)&&(GFlyItemIcon.FlyText("奖励领取成功","#00ff00"),e.QueryCode(1))}));break;case 2:gSys.GameMsg("无效的邀请码！",!1);break;case 3:gSys.GameMsg("无法邀请自己！",!1);break;case 4:gSys.GameMsg("无法互相邀请！",!1);break;case 5:gSys.GameMsg("不能接受比自己晚注册玩家的邀请",!1);break;default:gSys.GameMsg("杰米很忙，请稍候再来。"+t[0],!1)}}))},i.onListRender=function(t,e){if(t.dataSource){var i=t.getChildByName("head");i.SetInfo(t.dataSource.frdInfo);var n=t.getChildByName("label");n.text=t.dataSource.label,DisplayTools.onAutoSizeX(n,t)}},i.OnRecommended=function(t,e){for(var i,n=[],s=0;s<e.length;s++)FrdUserInfo.isstruct(e[s])&&(i={},i.label=e[s][1],i.frdInfo=e[s],n.push(i),i=null);this.list_.array=n},i.AddFollower=function(t,e,i){var n=this;if(void 0===i&&(i=0),!DataTable.m_iSelfUser.m_nNetLinkOk)return i||gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"),void(t&&t.runWith(0));var s,a=0;return a=Laya.__parseInt(e),a>0?void DataTable.m_iFriendBar.AddFollower(Handler.create(this,_onB=function(e){t&&t.runWith(e)}),a,1,i):(s=e,s.length<4?(i||ErrorDef.ERR_DLG(503),void(t&&t.runWith(0))):(s=s.toLowerCase(),void csvr.call("邮件登录","FindUserByMail",s,Handler.create(this,_ok=function(e){return 1>e?(i||ErrorDef.ERR_DLG(508),void(t&&t.runWith(0))):void DataTable.m_iFriendBar.AddFollower(Handler.create(n,_onBa=function(e){t&&t.runWith(e)}),e,1,i)}),Handler.create(this,_noF=function(){return ErrorDef.CALLFAIL()?(i||ErrorDef.ERR_DLG(csvr.retflag),void(t&&t.runWith(0))):void 0}),0)))},i.QueryCode=function(t){var e=this;void 0===t&&(t=0),this.btn_lingqu.visible=!1,this.input_txt1.text="正在查询...",DataTable.m_iSelfUser.GetInviteCode(Handler.create(this,_QueryCode=function(i){var n,s,a=i&&i.length>=2?1:0;a&&(n=i[0],s=i[1],TInviteCode.isstruct(n)||(a=0)),a?0==n[4]?(e.btn_lingqu.visible=!0,e.input_txt1.text="输入好友邀请码领取奖励"):(e.btn_lingqu.visible=!1,SysID.FRD_GETUSERINFO(n[4],null,null,Handler.create(e,_FF=function(i){e.input_txt1.text="您的推荐人是:	"+i[2],e.input_txt1.mouseEnabled=!1,t&&e.AddFollower(null,""+i[0],1)}))):e.input_txt1.text="获取失败"}))},i.TestIsBindWeiBo=function(){},__getset(0,i,"Index",null,function(t){this.input_txt.text="输入对方ID",this.input_txt1.text="输入好友邀请码领取奖励";var e=DataTable.m_iSelfUser.GetUID();this.list_.array=[],csvr.call(PubDef.HYFWM(e),"RequestRecommended",[DataTable.m_iSelfUser.GetUID(),5],null,null,0),this.QueryCode(),this.TestIsBindWeiBo()}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e}(AddFriendUI),LevelUpView=function(t){function e(){if(this.m_titleAni=null,this.m_loopHandler=null,this.aniText=null,this.flowerAniRight=null,this.flowerAni=null,e.__super.call(this),e.isboo)throw new Error("这是个单例类！");this.init()}__class(e,"display.mainIcon.levelUp.LevelUpView",t);var i=e.prototype;return i.TitleAniLoop=function(){this.m_titleAni.PlayKindEnd("升级动画",1,2.208,this.m_loopHandler)},i.init=function(){this.isCanClickMaskToDel=!1,this.isCanCloseByOther=!1,DisplayTools.scrollBar=this.wareList.scrollBar,DisplayTools.scrollBar=this.buildList.scrollBar,this.m_titleAni=new Muti2DAniIns,this.m_titleAni.createInsFromName("tex_升级动画新_ani"),this.m_loopHandler||(this.m_loopHandler=new Handler(this,this.TitleAniLoop)),this.m_titleAni.PlayKindEnd("升级动画",1,0,this.m_loopHandler),DisplayTools.addTarget(this.m_titleAni,this,{x:235,y:220},this.numChildren-1),this.levelTxt.y-=100,this.levelTxt.x+=8,this.flowerAni=new Muti2DAniIns,this.flowerAni.createInsFromName("tex_升级动画_ani"),this.flowerAni.mouseEnabled=!1,DisplayTools.addTarget(this.flowerAni,this,{x:10,y:514}),this.flowerAniRight=new Muti2DAniIns,this.flowerAniRight.createInsFromName("tex_升级动画_ani"),this.flowerAniRight.mirror=!0,this.flowerAniRight.mouseEnabled=!1,DisplayTools.addTarget(this.flowerAniRight,this,{x:462,y:514}),this.aniText=new GObj2DMutiText,this.aniText.LoadAni("tex_文字大_ani"),this.aniText.SetScrPos(238,35,1),this.aniText.visible=!1,this.buildList.renderHandler=new Handler(this,this.onRenderHandler),this.wareList.renderHandler=new Handler(this,this.onWareListRender)},i.onWareListRender=function(t,e){if(t.dataSource){t.dataSource.isnew?t.getChildByName("isnew").visible=!0:t.getChildByName("isnew").visible=!1;var i=t.getChildByName("aniText1111");i||(i=new GObj2DMutiText,i.name="aniText1111",i.LoadAni("tex_文字小_ani")),i.SetText("X"+t.dataSource.num),i.SetScrPos(85,68,0),i.width=i.getClipRect().right-i.getClipRect().left,t.addChildAt(i,t.numChildren-1)}},i.onRenderHandler=function(t,e){if(t.dataSource){var i=t.dataSource,n=t.getChildByName("anitarget");n&&(n.removeSelf(),n.destroy());var s=t.getChildByName("aniText");if(s||(s=new GObj2DMutiText,s.name="aniText",s.LoadAni("tex_文字小_ani")),s.SetText("X"+t.dataSource.num),s.SetScrPos(85,68,0),s.width=s.getClipRect().right-s.getClipRect().left,t.addChildAt(s,t.numChildren-1),i.isnew?t.getChildByName("isnew").visible=!0:t.getChildByName("isnew").visible=!1,i.aniAdr){var a=new Muti2DAniIns;a.createInsFromName(i.aniAdr),a.name="anitarget",a.scale(.01,.01),DisplayTools.addTarget(a,t,{x:0,y:0},0),Laya.timer.frameOnce(3,this,this.FitSize,[a,1.5])}}},i.FitSize=function(t,e,i,n){void 0===e&&(e=1),void 0===i&&(i=80),void 0===n&&(n=80);var s=0,a=0,r=t.GetRect();if(r&&(s=r.right-r.left,a=r.bottom-r.top,!(1>s||1>a))){var h=i/s,o=n/a;h>o&&(h=o),h>e&&(h=e),t.scale(h,h),t.x=(i-s*h)/2-r.left*h,t.y=(n-a*h)/2-r.top*h}},i.close=function(t){display.mydialog.MyDiaLog.prototype.close.call(this,t),gSys.SetSignal("closelvupdlg"),gSys.SetSignal("chglevitem");var e=IOS_iap.GetFirRecSz(),i=ArrOp.SzSearch(DataTable.m_iSelfUser.m_nLevel,e);if(!(0>i)){var n=DataTable.FindInterface("_FirIapBtn");n&&n.CheckOpenDlg()}},__getset(0,i,"Index",null,function(t){var e=this,i=DataTable.m_iSelfUser.m_szData.level;this.levelTxt.text="",this.aniText.SetText(i+""),this.aniText.width=this.aniText.getClipRect().right-this.aniText.getClipRect().left,this.addChild(this.aniText),this.timerOnce(1e3,this,function(){e.aniText.visible=!0});var n,s=DataTable.m_iUserLevelTab,a=s.Get(i),r=[],h=[],o=0;if(a[9])for(o=0;o<a[9].length;o++){n=new Object;var l=GResTab_Build._ins.GetByName(a[9][o][0]);n.aniAdr=l[4],n.label="",n.num=a[9][o][1],n.isnew=s.CheckBuildFirstNew(i,l[0]),r.push(n)}if(this.buildList.dataSource=r,r.length>0?this.unLockTxt.visible=!0:this.unLockTxt.visible=!1,a[10])for(o=0;o<a[10].length;o++){n=new Object;var u=a[10][o],c=DataTable.m_iItemTab.GetIdByName(u[0]),_=DataTable.m_iItemTab.Get(c);null!=_&&0!=u[1]&&(n.image=DataTable.getSkin(_[3]),n.isnew=0!=_[4],n.label="",n.num=u[1],h.push(n))}this.wareList.dataSource=h}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(levelUpPanelUI),Frd_Apply=function(t){function e(){if(this.aniText=null,this.ani=null,this.m_nMyInviterID=0,this.m_nCode=0,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.friendInfoPanel.Frd_Apply",t);var i=e.prototype;return i.init=function(){this.list_.scrollBar.hide=!0,this.list_.scrollBar.elasticDistance=200,this.list_.scrollBar.elasticBackTime=50,this.list_play.renderHandler=new Handler(this,this.onlist_playRender),this.list_play.scrollBar.hide=!0,this.list_play.scrollBar.elasticDistance=200,this.list_play.scrollBar.elasticBackTime=50,this.btn_lingqu.skin=DataTable.getSkin("uiimg_领取"),this.img_ZS.skin=DataTable.getSkin("icon_界面大钻石"),this.img_zsBJ.skin=DataTable.getSkin("uiimg_分享好友钻石底板"),this.img_yqBJ.skin=DataTable.getSkin("uiimg_分享底板"),this.img_yaoqing.skin=DataTable.getSkin("uiimg_分享好友邀请码"),this.img_leftHua.skin=DataTable.getSkin("uiimg_分享好友底纹"),this.img_rHua.skin=DataTable.getSkin("uiimg_分享好友底纹"),this.input_txt1.on("focus",this,this._onFocus),this.btn_fenxiang0.clickHandler=new Handler(this,this.onFenxiang,[this.btn_fenxiang0]),this.btn_fenxiang1.clickHandler=new Handler(this,this.onFenxiang,[this.btn_fenxiang1]),GameMarket.isShare?(this.btn_fenxiang0.visible=!0,this.btn_fenxiang1.visible=!0):(this.btn_fenxiang0.visible=!1,this.btn_fenxiang1.visible=!1),this.btn_lingqu.on("click",this,this.OnInvatiedCode),this.head_applyed.visible=!1,this.label_applyed.visible=!1},i.onFenxiang=function(t){DataTable.m_iSoundTab.playButton(),GameMarket.share()},i._onFocus=function(){this.input_txt1.text=""},i.upData=function(){this.aniText||(this.aniText=new GObj2DMutiText,this.aniText.SetOkHandler(Handler.create(this,this._comAniText)),this.aniText.LoadAni("tex_文字大_ani")),this.aniText.SetText("10")},i._comAniText=function(){this.aniText.SetScrPos(this.img_ZS.x+75,this.img_ZS.y+105,0),this.addChild(this.aniText)},i.OnInitEnd=function(){var t=0;t=1;var e,i,n=DataTable.m_iSelfUser.GetInviteQuest(),s=0,a=[],r=0,h=0,o=[],l=[];for(s=0;s<n.length;s++)QuestData.isstruct(n[s])&&(a=DataTable.m_iQuestTab.GetQuestByID(n[s][0]),Quest.isstruct(a)&&(e=a[14],i=StringOp.GetWord(e,":"),"get_邀请_等级人数"==i&&(h=Laya.__parseInt(StringOp.GetWordM(e,":")[1]),r=DataTable.m_iSelfUser.GetAchvTagNum(a[14]),2==n[s][2]?l.push([n[s][0],h,r,a[16],n[s][2],a[21]]):r>=a[16]?o=ArrOp.InsertSz(-1,o,[n[s][0],h,r,a[16],n[s][2],a[21]]):o.push([n[s][0],h,r,a[16],n[s][2],a[21]]))));var u=[];for(s=0;s<o.length;s++)u.push(o[s]);for(s=0;s<l.length;s++)u.push(l[s]);this.list_.array=u,this.QueryCode()},i.QueryCode=function(){var t=this;this.m_nMyInviterID=0;var e,i;this.ani||(this.ani=new Muti2DAniIns,this.ani.SetOkHandler(Handler.create(this,_c_=function(){t.ani.playAni("walk1");var e=0,i=0,n=t.ani.GetRect();e=n.right-n.left,i=n.bottom-n.top,t.ani.setPos(-e/2+t.btn_lable.x-e,-i/2+t.btn_lable.y)})),this.ani.createInsFromName("tex_鸡_ani")),this.btn_lable.text="正在申请邀请码...",DataTable.m_iSelfUser.GetInviteCode(Handler.create(this,_c_a=function(n){var s=n&&n.length>=2?1:0;if(s&&(e=n[0],i=n[1],TInviteCode.isstruct(e)||(s=0)),s)if(t.m_nCode=Laya.__parseInt(e[2]),t.btn_lable.text=t.m_nCode+"",t.label_info.text="邀请小伙伴一起玩《梦幻家园》可获得丰厚奖品",t.m_nMyInviterID=e[4],e[3]&&e[3].length>0){t.list_play.visible=!0;for(var a,r=[],h=0;h<e[3].length;h++)("number"!=typeof e[3][h]||Math.floor(e[3][h])!=e[3][h])&&(a={},a.kind=11,a.uid=e[3][h][0],r.push(a));t.list_play.array=r}else t.list_play.visible=!1;else t.label_info.text="获取失败，请稍后重新获取。";t.CheckShowInviterUI(),t.ani&&t.ani.dispose()}))},i.onlist_playRender=function(t,e){t.dataSource&&SysID.FRD_GETUSERINFO(t.dataSource.uid,null,null,Handler.create(this,_frdInfo=function(e){var i=t.getChildByName("head");i.ModifyMenu(t.dataSource.kind),i.SetInfo(e);var n=t.getChildByName("label");n.text=e[1],DisplayTools.onAutoSizeX(n,t,!0)}))},i.CheckShowInviterUI=function(){return this.m_nMyInviterID>0?(this.head_applyed.ModifyMenu(11),this.head_applyed.initInfo(this.m_nMyInviterID),this.head_applyed.visible=!0,this.label_applyed.visible=!0,void(this.box_yaoqing.visible=!1)):(this.head_applyed.visible=!1,this.label_applyed.visible=!1,this.input_txt1.text="输入对方邀请码",void(this.box_yaoqing.visible=!0))},i.OnInvatiedCode=function(){DataTable.m_iSoundTab.playButton(),this.btn_lingqu.disabled=!0;var t=this.input_txt1.text;return t=t.replace(" ",""),t.length<1?void(this.btn_lingqu.disabled=!1):(this.SubmitCode(t),this.input_txt1.text="",void(this.btn_lingqu.disabled=!1))},i.SubmitCode=function(t){var e=this;return t.length<4?void gSys.GameMsg("无效的邀请码！",!1):void DataTable.m_iSelfUser.GetInviteReward(t,-1,Handler.create(this,_aabb=function(t){if(!t)return void gSys.GameMsg("服务未开放");var i=[500,500];switch(t[0]){case 0:var n=t[2];DataTable.m_iSelfUser.CheckMakeItemSz(n,1,0,Handler.create(e,_succF=function(){var s=new StringRef;DataTable.m_iSelfUser.ChgItemSz(n,s,OPEnum.OP_YQM_JL,i,1)&&(e.m_nMyInviterID=t[1],e.CheckShowInviterUI())}));break;case 2:gSys.GameMsg("无效的邀请码！",!1);break;case 3:gSys.GameMsg("无法邀请自己！",!1);break;case 4:gSys.GameMsg("无法互相邀请！",!1);break;case 5:gSys.GameMsg("不能接受比自己晚注册玩家的邀请",!1);break;default:gSys.GameMsg("杰米很忙，请稍候再来。"+t[0],!1)}}))},__getset(0,i,"Index",null,function(t){this.upData(),this.OnInitEnd()}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(Frd_ApplyUI),FriendPanel=function(t){function e(){if(this.m_nCurIndex=0,this.SpritePanel=null,this.isSameIndex=!1,this.m_szLimitNumShow=[],this.m_szAllFrdData=[],this.frdS_view=null,this.m_szFriends=[],this.tempStr="搜索:好友",this.subno=2,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.friendInfoPanel.FriendPanel",t);var i=e.prototype;return i.init=function(){this.addEvent(),GLeadManager.RegArrowInterface(this.box_1,"好友标签_好友",0,112),this.list_.scrollBar.hide=!0,this.list_.scrollBar.elasticDistance=200,this.list_.scrollBar.elasticBackTime=50,this.initSearch(),this.initGroup(),e.isInit=!0},i.addEvent=function(){for(var t=0;5>t;t++)this["box_"+t].on("click",this,this.onClick1,[t]);this.tx_image.on("click",this,_goFigureInfo=function(){MainIcon.getInstance().upperIcon.addInterface(0,0)}),this.add.on("click",this,this.OnAddFrd),this.btn_hy.on("click",this,this.onShowGroup),this.box_click.on("click",this,this.onBoxClick),this.add.on("mousedown",this,this.onMouseDownTween,[this.add]),this.btn_hy.on("mousedown",this,this.onMouseDownTween,[this.btn_hy]),this.seek.on("mousedown",this,this.onMouseDownTween,[this.seek])},i.onBoxClick=function(){this.seek.visible?this.onSeekClick():this.onQuxiaoClick()},i.onMouseDownTween=function(t){TweenTool.getInstance().buttonTween(t)},i.onClick1=function(t){this.addChild(this["box_"+t]),this.m_nCurIndex==t?this.isSameIndex=!0:this.isSameIndex=!1,this.m_nCurIndex=t,this.upData()},i.upData=function(){for(var t=0;5>t;t++)this["box_"+t].dataSource={bg:{index:1}},this.m_nCurIndex==t&&(this["box_"+t].dataSource={bg:{index:0}});this.addInterface()},i.addInterface=function(){var t,e=this,i=[],n="",s=-1,a=0,r=0;switch(this.btn_hy.visible=!1,this.SpritePanel&&this.SpritePanel.removeSelf(),this.m_nCurIndex){case 0:i=this.GetNeedHelpData(),n="没有好友需要帮助",t="需要帮助的好友",s=i.length;break;case 1:var h;if(2==this.subno){for(h=this.GetAllFrdData(),r=0;r<h.length;r++)i.push(h[r]);t="我的全部好友",s=i.length-1-1,a=DataTable.m_iSelfUser.GetMyFriendMaxNum()}else{for(h=this.GetGroupData(this.subno),r=0;r<h.length;r++)i.push(h[r]);var o=ArrOp.SzSearch(this.subno,GFriendBar.s_vDefGroup);o>=0&&(t="我的"+GFriendBar.s_vDefGroup[o][1],s=i.length);var l=[0,0,"",0,0,[],0];l[0]=-101,l[2]="添加关注",l[5]=[-1,0,[],0,""],l[1]=this.subno,i.push(l),-1==this.subno}this.btn_hy.visible=!0;break;case 2:i=this.GetGroupData(1),t="我的关注",s=i.length,a=20;break;case 3:i=this.GetGroupData(0),n="您还没有粉丝",t="我的粉丝",s=i.length,a=50;break;case 4:return void this.GetRecentVisitor(Handler.create(this,___=function(r){i=r,n="您家里最近还没有来过客人",t="最近来访的",s=i.length,i.length<1&&n.length>0?(e.label_empty.text=n,e.label_empty.visible=!0):e.label_empty.visible=!1,e.list_.array=i,e.m_szLimitNumShow=[t,s,a],e.UpDateLimitNum()}))}if(i.length<1&&n.length>0?(this.label_empty.text=n,this.label_empty.visible=!0):this.label_empty.visible=!1,this.isSameIndex){var u=this.list_.scrollBar.value;return this.list_.array=i,this.list_.scrollBar.value=u,this.m_szLimitNumShow=[t,s,a],void this.UpDateLimitNum()}this.list_.array=i,this.m_szLimitNumShow=[t,s,a],this.UpDateLimitNum()},i.OnAddFrd=function(){DataTable.m_iSoundTab.playButton(),MainIcon.getInstance().onAddFirendView()},i.GetNotNullTabs=function(){var t=[],e=0,i=0;e=2,i=this.GetAllFrdData().length,t.push(e),e=-1,t.push(e);for(var n=4;10>=n;n++)e=n,i=this.GetGroupData(n).length,i>0&&t.push(e);return t},i.UpDateLimitNum=function(){if(this.m_szLimitNumShow.length<1)return void(this.label_.visible=!1);if(this.m_szLimitNumShow[1]<0)return void(this.label_.visible=!1);var t=this.m_szLimitNumShow[0]+"数量为："+this.m_szLimitNumShow[1];this.m_szLimitNumShow[2]>0&&(t+="/"+this.m_szLimitNumShow[2]),this.label_.text=t,this.label_.visible=!0},i.GetGroupData=function(t){if(0>t)return this.GetWeiBoData();for(var e=[],i=0;i<this.m_szAllFrdData.length;i++)-100!=this.m_szAllFrdData[i][0]&&(0!=t||-101!=this.m_szAllFrdData[i][0])&&this.m_szAllFrdData[i][1]==t&&e.push(this.m_szAllFrdData[i]);return e},i.GetAllFrdData=function(){for(var t=[],e=0;e<this.m_szAllFrdData.length;e++)2!=this.m_szAllFrdData[e][1]&&(this.m_szAllFrdData[e][1]<4||this.m_szAllFrdData[e][1]>10)||t.push(this.m_szAllFrdData[e]);return t},i.GetNeedHelpData=function(){for(var t=[],e=0;e<this.m_szAllFrdData.length;e++)this.m_szAllFrdData[e][6]<1||t.push(this.m_szAllFrdData[e]);return t},i.GetWeiBoData=function(){var t=[];return t},i.GetRecentVisitor=function(t){DataTable.m_iSelfUser.GetRealUserVisit(Handler.create(this,__=function(e){for(var i=[],n=0;n<e[3].length;n++)FriendDef.IsPlayer(e[3][n])&&i.push(e[3][n]);t.runWith([i])}))},i.GetInsertPosByLv=function(t,e){if(void 0===e&&(e=1),this.m_szAllFrdData.length<1)return 0;var i=0,n=0,s=0,a=0,r=0,h=0;for(a=0,r=this.m_szAllFrdData.length;;){if(i=a+Math.round((r-a)/2),0>i){i=0;break}if(i>=this.m_szAllFrdData.length){i=this.m_szAllFrdData.length-1;break}if(n=t>this.m_szAllFrdData[i][5][0]?e?-1:1:e?1:-1,n>0?a=i+1:r=i-1,i==s){i=n>0?r:a;break}h=n,s=i}return i},i.GetCurIndex=function(){return this.m_nCurIndex},i.GetCurGoup=function(){switch(this.m_nCurIndex){case-1:return FriendDef.FRDGROUP_WEIBO;case 0:return 2;case 1:return 2;case 2:return 1;case 3:return 0}return-1},i.initSearch=function(){this.input_txt.on("focus",this,this.onInputFocus),this.input_txt.on("input",this,this.onInputChange),this.panel_search.visible=!1,this.panel_search.mouseEnabled=!0,this.panel_search.content.mouseEnabled=!0},i.onShowGroup=function(){DataTable.m_iSoundTab.playButton(),this.PopTabSelect()},i.onInputChange=function(){this.input_txt.text.length<=0||this.input_txt.text!=this.tempStr&&this.Search(this.input_txt.text)},i.onInputFocus=function(){this.input_txt.text="",this.onShowSearchView()},i.onQuxiaoClick=function(){var t=this;DataTable.m_iSoundTab.playButton(),this.seek.visible=!0,this.label_quxiao.visible=!1,this.input_txt.text=this.tempStr,this.frdS_view&&Tween.to(this.frdS_view,{y:this.panel_search.height},500,null,Handler.create(null,_comp=function(){t.frdS_view.removeSelf(),t.panel_search.visible=!1}))},i.onSeekClick=function(){DataTable.m_iSoundTab.playButton(),this.onInputFocus()},i.onShowSearchView=function(){this.panel_search.visible||(this.panel_search.visible=!0,this.seek.visible=!1,this.label_quxiao.visible=!0,this.frdS_view||(this.frdS_view=new FrdS_view,this.frdS_view.init()),this.frdS_view.parent||this.panel_search.addChild(this.frdS_view),this.updataSearch(),this.frdS_view.y=this.panel_search.height,Tween.to(this.frdS_view,{y:0},500))},i.updataSearch=function(){if(this.UpdateFriend(),this.frdS_view&&this.frdS_view.parent)if(0==this.input_txt.text.length||this.input_txt.text==this.tempStr){var t=DataTable.m_iFriendBar.GetAllFriendVar().slice();this.frdS_view.updata(t)}else this.onInputChange()},i.UpdateFriend=function(t){var e=DataTable.m_iFriendBar.GetAllFriendVar().slice();this.m_szFriends.length=0;for(var i,n=0;n<e.length;n++)i=Util.FirstPinyin(e[n][2]),i=i.toLowerCase(),this.m_szFriends.push([i,e[n]])},i.Search=function(t){if(t.length<1)return void(this.frdS_view.box_noFind.visible=!0);if(this.frdS_view.box_noFind.visible=!1,!(this.m_szFriends.length<1)){t=t.toLowerCase();var e=[];if(t.length>0)for(var i,n=0,s=0;s<this.m_szFriends.length;s++)n=this.m_szFriends[s][0].indexOf(t),n>=0?e.push(this.m_szFriends[s][1]):(i=this.m_szFriends[s][1][2],i=i.toLowerCase(),n=i.indexOf(t),n>=0&&e.push(this.m_szFriends[s][1]));this.frdS_view.updata(e)}},i.initGroup=function(){SysID.FRD_ON("frdgroup",this,this.NotiFrdGroupChg),this.NotiFrdGroupChg(),Laya.timer.loop(10,this,this.NotiFrdGroupChg)},i.NotiFrdGroupChg=function(){if(DataTable.m_iFriendBar.m_szData){Laya.timer.clear(this,this.NotiFrdGroupChg);var t=DataTable.m_iFriendBar.GetCustomGroup();"好友"!=t[0][1]&&(t=ArrOp.InsertSz(-1,t,[2,"好友"])),t.push([0,"粉丝"]),t.push([1,"关注"]),GFriendBar.s_vDefGroup=t}},i.PopTabSelect=function(){for(var t=0,e=this.GetNotNullTabs(),i=[],n=0;n<e.length;n++)t=ArrOp.SzSearch(e[n],GFriendBar.s_vDefGroup),0>t||(2==GFriendBar.s_vDefGroup[t][0]?i.push([new Handler(this,this.OnSelSubTab,[GFriendBar.s_vDefGroup[t][0],"全部好友"]),"全部好友"]):i.push([new Handler(this,this.OnSelSubTab,[GFriendBar.s_vDefGroup[t][0],GFriendBar.s_vDefGroup[t][1]]),GFriendBar.s_vDefGroup[t][1]]));GroupSelect.getInstance().init(i),GroupSelect.getInstance().pos(905,205),this.addChild(GroupSelect.getInstance())},i.OnSelSubTab=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=""),this.btn_hy.label=e,this.OnFrdFilter(t)},i.OnFrdFilter=function(t){this.subno=t,this.onClick1(1)},__getset(0,i,"Index",null,function(t){var e=DataTable.m_iSelfFrd.GetShortInfo();this.tx_image.skin=DataTable.getSkin("tex_face"+e[2]),this.name_label.text=e[1],DisplayTools.onAutoSizeX(this.name_label,this.box_name,!0),FriendDataManger.getInstance().GetFrdData(),FriendDataManger.getInstance().OnHelpCount(),this.UpDateLimitNum(),this.m_nCurIndex=t>0?t:1,this.onClick1(this.m_nCurIndex)}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e.isInit=!1,e}(friendPanelUI),GEditFriendDlg=function(t){function e(){this.m_nGroupId=0,this.m_szInfo=null,e.__super.call(this);var t=this;if(e.isboo)throw new Error("请调用 getInstance()来获取实例");this.closeHandler=new Handler(this,this.onCloseHandler),this.on("added",this,this.onAdd),this.btn_.on("mousedown",this,_btn=function(){TweenTool.getInstance().buttonTween(t.btn_)}),this.btn_.clickHandler=new Handler(this,this.OnTrueClose);for(var i=0;5>i;i++)this["img"+i].skin=DataTable.getSkin("tex_素材_人名字输入框")}__class(e,"display.mainIcon.friendInfoPanel.GEditFriendDlg",t);var i=e.prototype;return i.OnTrueClose=function(){this.ClickApply(),this.OnClose()},i.onCloseHandler=function(){SysID.FRF_DEL("selectplayer")},i.onAdd=function(){SysID.FRD_ON("selectplayer",this,this.Init)},i.Init=function(t){if(DataTable.m_iSelfFrd.IsFriend(t)){var e=0;this.m_szInfo=DataTable.m_iFriendBar.GetFriend(t);var i=0;for(e=0;e<GFriendBar.s_vDefGroup.length;e++)if(!(GFriendBar.s_vDefGroup[e][0]<0||FriendDef.ISFANS(GFriendBar.s_vDefGroup[e][0])||FriendDef.ISFOLLOWER(GFriendBar.s_vDefGroup[e][0]))){var n=this["label"+i];n.text=GFriendBar.s_vDefGroup[e][1],n.name=GFriendBar.s_vDefGroup[e][0],n&&i++}}},i.ClickApply=function(){if(FriendDef.IsNpc(this.m_szInfo[0]))return void this.OnClose();for(var t=0,e=[],i=1;6>i;i++){var n=this["label"+i];t=ArrOp.SzSearch(n.name,GFriendBar.s_vDefGroup),0>t||n.text.length>0&&n.text!=GFriendBar.s_vDefGroup[t][1]&&e.push([GFriendBar.s_vDefGroup[t][0],n.text])}e.length&&DataTable.m_iFriendBar.ModifyGroup(e),
GFlyItemIcon.FlyText("应用成功","#00ff00")},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(GEditFriendDlgUI),FoodWarehouse=function(t){function e(){if(this.tip=null,this.index=0,this.aniText=null,this.aniText0_0=null,this.aniText0_1=null,this.aniText1_0=null,this.aniText1_1=null,this.aniText2_0=null,this.aniText2_1=null,this.item=ItemFeild.getInstance(),this.pointXY=new Point,e.__super.call(this),e.isboo)throw new Error("请用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.FoodWarehouse",t);var i=e.prototype;return i.init=function(){this.tip||(this.tip=new Tooltip,this.addChild(this.tip),this.tip.visible=!1),this.initAni(),this.initAniText(),this.addEvent(),this.wareList.scrollBar.hide=!0,this.wareList.scrollBar.elasticDistance=200,this.wareList.scrollBar.elasticBackTime=50},i.initAni=function(){this.aniText=new GObj2DMutiText,this.aniText.LoadAni("tex_文字大_ani"),this.aniText.SetScrPos(621,500,1),this.aniText.scale(1.2,1.2),this.addChild(this.aniText),this.numLabel.removeSelf()},i.addEvent=function(){this.ls_btn.on("click",this,this.onClickHandler),this.wp_btn.on("click",this,this.onClickHandler),this.sj_btn.on("click",this,this.onClickHandler),this.button_close.on("click",this,this.onClickHandler),TweenTool.getInstance().buttonTween(this.btn_shengji,!0,!0,!1),this.btn_shengji.on("click",this,this.onClickHandler),this.wareList.mouseHandler=new Handler(this,this.onListClick),this.wareList.renderHandler=new Handler(this,this.onRenderHandler)},i.onRenderHandler=function(t,e){if(t.dataSource){var i=t.getChildByName("aniT111");i||(i=new GObj2DMutiText,i.LoadAni("tex_文字小_ani"),i.name="aniT111",t.addChild(i)),6==t.dataSource.itemid?(i.SetScrPos(43,80,1),i.scale(1.2,1.2),i.SetText(t.dataSource.left_+"/"+t.dataSource.use_)):(i.SetScrPos(85,71,0),i.scale(1.5,1.5),i.SetText(t.dataSource.label+""));var n=t.getChildByName("label");n&&(n.removeSelf(),n=null)}},i.onListClick=function(t,e){if("mousedown"==t.type){TweenTool.getInstance().buttonTween(t.target,!0,!1),this.tip.init(),this.tip.TipContent=this.wareList.array[e].info,this.tip.upWidth(),this.tip.visible=!0,this.pointXY.x=this.stage.mouseX,this.pointXY.y=this.stage.mouseY;var i=this.globalToLocal(this.pointXY);this.tip.x=i.x-this.tip.width/2.5,this.tip.y=i.y-this.tip.height-20}("mouseout"==t.type||"mouseup"==t.type)&&(this.tip.visible=!1)},i.onClickHandler=function(t){var e=t.target;switch(e){case this.ls_btn:this.index=0,this.onShow(!1),DataTable.m_iSoundTab.OnPlay("标签切页");break;case this.wp_btn:this.index=1,this.onShow(!1),DataTable.m_iSoundTab.OnPlay("标签切页");break;case this.sj_btn:this.onShow(Boolean("升级"==this.sj_btn.label));break;case this.button_close:this.dispose();break;case this.btn_shengji:this.onClickShengji()}e=null},i.dispose=function(){this.removeSelf(),this.wareList.array=[]},i.upData=function(){var t,e=[],i=[],n=0,s=0;if(0==this.index){for(this.ls_btn.index=0,this.wp_btn.index=1,this.cangkuText.text="粮食仓库",i=DataTable.m_iSelfUser.GetBagItemSz(0),n=0,s=i.length;s>n;n++)t=new Object,t.itemid=i[n][0],t.image=DataTable.getSkin(this.item.getItemArr(t.itemid)[3]),t.label=i[n][1],t.label<=0||(t.itemid>4e3&&t.itemid<4012?t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10],label3:TimerTools.conversion(60*this.item.getItemArr(t.itemid)[13])}:t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10]},e.push(t),t=null);this.aniText.SetText(DataTable.m_iSelfUser.m_nBarnNum+"/"+DataTable.m_iSelfUser.m_nBarnAllNum)}else if(1==this.index){for(this.ls_btn.index=1,this.wp_btn.index=0,this.cangkuText.text="物品仓库",i=DataTable.m_iSelfUser.GetBagItemSz(1),n=0,s=i.length;s>n;n++)t=new Object,t.itemid=i[n][0],t.image=DataTable.getSkin(this.item.getItemArr(t.itemid)[3]),t.label=i[n][1],t.label<=0||(t.itemid>4e3&&t.itemid<4012?t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10],label3:this.item.getItemArr(t.itemid)[13]}:t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10]},e.push(t),t=null);this.aniText.SetText(DataTable.m_iSelfUser.m_nWareNum+"/"+DataTable.m_iSelfUser.m_nWareAllNum)}this.tb_Clip.index=this.index;var a=this.AddExItem();for(n=0,s=a.length;s>n;n++)e.push(a[n]);this.wareList.array=e,this.wareList.scrollTo(0)},i.onShow=function(t){t?(this.onShengjiUpData(),this.box_shengji.visible=!0,this.wareList.visible=!1,this.sj_btn.label="返回"):(this.box_shengji.visible=!1,this.wareList.visible=!0,this.sj_btn.label="升级",this.upData())},i.onShengjiUpData=function(){var t=0;0==this.index?(t=DataTable.m_iSelfUser.GetNextBagMax(0),this.label_nextNum.text="粮食仓库升级后容量提升到："+t,this.SetUpBagKind(0),this.aniText.SetText(DataTable.m_iSelfUser.m_nBarnNum+"/"+DataTable.m_iSelfUser.m_nBarnAllNum)):(t=DataTable.m_iSelfUser.GetNextBagMax(1),this.label_nextNum.text="物品仓库升级后容量提升到："+t,this.SetUpBagKind(1),this.aniText.SetText(DataTable.m_iSelfUser.m_nWareNum+"/"+DataTable.m_iSelfUser.m_nWareAllNum))},i.SetUpBagKind=function(t){var e=[],i=0;switch(i=DataTable.m_iSelfUser.GetBagLvl(t)+1,i>50&&(i=50),t){case 0:e.push(10),e.push(11),e.push(12);break;case 1:e.push(13),e.push(14),e.push(15);break;default:return}var n=0,s=0;for(n=0;n<e.length;n++)s=DataTable.m_iSelfUser.GetBagItemNum(1,e[n]),this.onShengjiItem(n,{id:e[n],curNum:s,needNum:i})},i.initAniText=function(){this.aniText0_0=new GObj2DMutiText,this.aniText0_0.LoadAni("tex_文字小_ani"),this.aniText0_0.SetScrPos(322,86,1),this.aniText0_0.scale(1.5,1.5),this.box_shengji.addChild(this.aniText0_0),this.aniText1_0=new GObj2DMutiText,this.aniText1_0.LoadAni("tex_文字小_ani"),this.aniText1_0.SetScrPos(322,172,1),this.aniText1_0.scale(1.4,1.5),this.box_shengji.addChild(this.aniText1_0),this.aniText2_0=new GObj2DMutiText,this.aniText2_0.LoadAni("tex_文字小_ani"),this.aniText2_0.SetScrPos(322,258,1),this.aniText2_0.scale(1.5,1.5),this.box_shengji.addChild(this.aniText2_0),this.aniText0_1=new GObj2DMutiText,this.aniText0_1.LoadAni("tex_文字中_ani"),this.aniText0_1.SetScrPos(462,87,2),this.aniText0_1.scale(1.5,1.5),this.box_shengji.addChild(this.aniText0_1),this.aniText1_1=new GObj2DMutiText,this.aniText1_1.LoadAni("tex_文字中_ani"),this.aniText1_1.SetScrPos(462,173,2),this.aniText1_1.scale(1.5,1.5),this.box_shengji.addChild(this.aniText1_1),this.aniText2_1=new GObj2DMutiText,this.aniText2_1.LoadAni("tex_文字中_ani"),this.aniText2_1.SetScrPos(462,259,2),this.aniText2_1.scale(1.5,1.5),this.box_shengji.addChild(this.aniText2_1)},i.onShengjiItem=function(t,e){var i=this["shengji"+t],n=this["aniText"+t+"_0"],s=this["aniText"+t+"_1"],a=DataTable.m_iItemTab.Get(e.id);null==a?(i.image.skin=DataTable.getSkin("tex_图标_未知物品"),gSys.Err("item not find id="+e.id)):i.image.skin=DataTable.getSkin(a[3]),i.label.destroy(),n.SetText(e.curNum+"/"+e.needNum),i.box_zuanshi.destroy(),e.curNum<e.needNum?(s.SetText((a?a[8]*(e.needNum-e.curNum):0)+"Z"),s.visible=!0):s.visible=!1,i.image.hasListener("mousedown")||i.image.on("mousedown",this,this.onItemMouseDown,[i])},i.onItemMouseDown=function(t,e){TweenTool.getInstance().buttonTween(t,!0,!1)},i.onClickShengji=function(){var t=this,e=0;e=0==this.index?0:1,DataTable.m_iSelfUser.OnAddBagLvl(e,Handler.create(this,function(e){if(e){DataTable.m_iSoundTab.OnPlay("仓库扩充"),t.onShow(!1),MainIcon.getInstance().upperIcon.upDate();var i=new Star;this.addChild(i),i.setStarPos(t.sj_btn.x+t.sj_btn.width/2,t.sj_btn.y+t.sj_btn.height/2),DataTable.m_iSoundTab.OnPlay("等级提升")}}))},i.AddExItem=function(){for(var t,e=[],i=0,n=[9,3,26,27,39,41,42,28,6],s=0;s<n.length;s++){switch(t={},t.itemid=n[s],t.image=DataTable.getSkin(this.item.getItemArr(t.itemid)[3]),n[s]){case 9:i=DataTable.m_iSelfUser.m_nShowMedal;break;case 3:i=DataTable.m_iSelfUser.m_nShowShell;break;case 26:i=DataTable.m_iSelfUser.GetKey();break;case 27:i=DataTable.m_iSelfUser.GetHorn();break;case 39:i=DataTable.m_iSelfUser.GetFlowerNumByKind(0);break;case 41:i=DataTable.m_iSelfUser.GetXTCS(41);break;case 42:i=DataTable.m_iSelfUser.GetXTCS(42);break;case 28:i=DataTable.m_iSelfUser.GetActFen();break;case 6:var a=DataTable.m_iSelfUser.GetCutMapData();t.left_=a[3],t.use_=a[4],i=10}1>i||(t.label=i,t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10]},e.push(t),t=null)}return e},__getset(0,i,"Index",null,function(t){this.index=t}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(foodWarehouseUI),Gold=function(t){function e(){if(this.label_zuanshi=null,this.label_jinbi=null,this.texArr=[],this.m_nCanGetGold=1,this.m_nClick=0,this._goldItem=null,this.ins=0,this.listArr=null,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.initAni()}__class(e,"display.mainIcon.Gold",t);var i=e.prototype;return i.initAni=function(){var t=new DisplayItem(null,!1);t.LoadFromName("uiimg_点石成金拆分手指_ani_001"),this.box_zhujiemian.addChildAt(t.m_disObj,this.box_zhujiemian.numChildren-4),t.m_disObj.x=73,t.m_disObj.y=165,t.m_disObj.rotation=-140,t.m_disObj.scale(1.2,1.1);var e=new DisplayItem(null,!1);e.LoadFromName("uiimg_点石成金拆分手指_ani_001"),this.box_zhujiemian.addChildAt(e.m_disObj,this.box_zhujiemian.numChildren-4),e.m_disObj.x=575,e.m_disObj.y=165,e.m_disObj.rotation=140,e.m_disObj.scale(1.2,1.1),e.m_disObj.mirror=!0;var i=new DisplayItem(null,!1);i.LoadFromName("uiimg_活动彩带_ani"),this.box_zhujiemian.addChildAt(i.m_disObj,this.box_zhujiemian.numChildren-3),i.m_disObj.x=328,i.m_disObj.y=99,i.m_disObj.scale(1.15,1.1);var n=new DisplayItem(null,!1);n.LoadFromName("uiimg_点石成金拆分_ani"),this.box_zhujiemian.addChild(n.m_disObj),n.m_disObj.x=270,n.m_disObj.y=60,this.pig.skin="ui/img/pig.png";var s=new Image2;s.skin="3d/tex/52a2c687d3253005.png",s.pivot(this.dit.width/2,this.dit.height/2),s.x=180,s.y=65,s.size(400,160),s.rotation=180,this.dit.addChild(s),this.label_zuanshi=new GObj2DMutiText,this.label_zuanshi.LoadAni("tex_文字大_ani"),this.box_.addChild(this.label_zuanshi),this.label_zuanshi.SetScrPos(60,45,0),this.label_jinbi=new GObj2DMutiText,this.label_jinbi.LoadAni("tex_文字大_ani"),this.box_.addChild(this.label_jinbi),this.label_jinbi.SetScrPos(364,45,0);for(var a=0;6>a;a++){var r=new GObj2DMutiText;r.LoadAni("uiimg_点石成金钻石数字_ani"),r.SetScrPos(50,35,0);var h=new GObj2DMutiText;h.LoadAni("uiimg_点石成金金币数字_ani"),h.SetScrPos(220,35,0);var o=new Muti2DAniIns;o.createInsFromName("uiimg_暴击_ani"),this.list_&&this.list_.getCell(a)&&(this.list_.getCell(a).addChild(r),this.list_.getCell(a).addChild(h),DisplayTools.addTarget(o,this.list_.getCell(a),{x:450,y:18,scaleX:.7,scaleY:.7,visible:!1}),this.texArr.push([r,h,o]))}},i.init=function(){this.showList(!1),this.listArr=this.listArr||[],this.listArr.length=0,this.list_.scrollBar.hide=!0,this.list_.renderHandler=new Handler(this,this.onRenderHander),this.closeHandler=new Handler(this,this.onCloseHandler),this.btn_2.visible=!1,this.btn_2.clickHandler=new Handler(this,this.onBtnClick,[this.btn_2]),this.btn_1.x=258,this.btn_1.clickHandler=new Handler(this,this.onBtnClick,[this.btn_1])},i.onRenderHander=function(t,e){if(t.dataSource){var i=t.dataSource;this.texArr&&this.texArr[e%6]&&(this.texArr[e%6][0].SetText("Z"+Math.abs(i.diamond)),this.texArr[e%6][1].SetText("$"+Math.abs(i.gold))),i.crit>0&&this.texArr[e%6]?(this.texArr[e%6][2].playAni("暴击"+i.crit),this.texArr[e%6][2].visible=!0):this.texArr[e%6][2].visible=!1}},i.onMoveTxt=function(t,e){if(void 0===e&&(e=0),1>t){var i=new Muti2DAniIns;return i.createInsFromName("uiimg_暴击_ani"),this.addChild(i),i.pos(300,330),i.scale(1.3,1.3),i.playAni("暴击"+e),void Tween.to(i,{y:i.y-90,alpha:0},400,null,Handler.create(this,this.destruction,[i]),0)}var n=new Text;n.pos(170,300),n.fontSize=45,n.color="#ffffff",n.strokeColor="#531C1C",n.stroke=1,n.bold=!0,this.addChild(n),n.text="获得金币";var s=new GObj2DMutiText;s.LoadAni("tex_文字大_ani"),this.addChild(s),s.SetScrPos(380,338,0),s.scale(1.3,1.3),s.SetText(e+""),Tween.to(n,{y:n.y-90,alpha:0},400,null,Handler.create(this,this.destruction,[n]),0),Tween.to(s,{y:s.y-90,alpha:0},400,null,Handler.create(this,this.destruction,[s]),0)},i.destruction=function(t){t.removeSelf(),t=null},i.onBtnClick=function(t){t==this.btn_1?"单次使用"==this.btn_1.label?this.GetGold():"查看VIP"==this.btn_1.label?MainIcon.getInstance().rightIcon.addInterface(2,1):"确认"==this.btn_1.label&&this.close():t==this.btn_2&&(this._goldItem&&(this._goldItem=null),this._goldItem=new GoldItem,this._goldItem.Index=0,this._goldItem.GetGoldEnd=new Handler(this,this.GetGoldEnd),this._goldItem.onCloseFun=new Handler(this,this.onCloseGoldItem),this._goldItem.myPopup(!1))},i.GetGold=function(t){var e=this;if(void 0===t&&(t=0),!this.m_nClick){if(!this.m_nCanGetGold)return void MainIcon.getInstance().rightIcon.addInterface(2,1);var i=null;DataTable.m_iSelfUser.OnGoldCoins(0,Handler.create(this,okH=function(t){i=t,i&&i.length&&e.GetGoldEnd(i)}))}},i.onCloseGoldItem=function(){this._goldItem=null},i.showList=function(t){t?(this.box_item.visible=!0,this.box_zhujiemian.y=-42):(this.box_item.visible=!1,this.box_zhujiemian.y=95)},i.GetGoldEnd=function(t){this.m_nClick=1,this.ins=0;var e=t[0],i=t[2];if(e&&e.length){for(var n=0,s=e.length;s>n;n+=2)i&&i.length&&n/2==i[0][0]?(this.AddMsg(-e[n][1],e[n+1][1],i[0][1],n),i=ArrOp.DelSz(0,i)):this.AddMsg(-e[n][1],e[n+1][1],0,n,0);gSys.SetSignal("dia2gold"),this.m_nClick=0}},i.AddMsg=function(t,e,i,n,s){if(void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=1),n>this.ins){this.ins=n;var a=n/2*500;return s&&(a-=400),void Laya.timer.once(a,this,this.updataHandler,[t,e,i])}this.updateList(t,e,i),this.Refresh()},i.updataHandler=function(t,e,i){this.updateList(t,e,i),this.Refresh()},i.Refresh=function(){var t="(今日可用%a/%b)",e=DataTable.m_iSelfUser.GetGoldCoinsMax(),i=DataTable.m_iSelfUser.GetGoldCoinsData(),n=i[0];if(t=t.replace("%a",n+""),t=t.replace("%b",e+""),this.label_keyong.text=t,this.btn_1.label="单次使用",n>=e?(300!=e?(this.label_.text="提升VIP等级可以增加点金次数",this.btn_1.label="查看VIP"):(this.label_.text="次数已全部用完，请明天再来！",this.btn_1.label="确认"),this.label_.visible=!0,this.box_.visible=!1,t="今日点金手次数已用完。",this.m_nCanGetGold=0,this.label_dec.text=t):(t="使用少量钻石换取大量金币",this.label_dec.text=t,this.label_.visible=!1,this.box_.visible=!0),!n||n>=e?(this.btn_1.x=258,this.btn_2.visible=!1):(this.btn_1.x=144,this.btn_2.visible=!0),this.box_.visible){if(i=DataTable.m_iSelfUser.CurDiaToGoldData(0,0),!i||!i.length)return;t=""+-i[0][0][1],this.label_zuanshi.SetText(t),t=""+i[0][1][1],this.label_jinbi.SetText(t)}},i.updateList=function(t,e,i){void 0===i&&(i=0),this.listArr.push({diamond:t,gold:e,crit:i}),this.list_.array=this.listArr,this.showList(!0),i>0?(this.onMoveTxt(0,i),Laya.timer.once(300,this,this.onMoveTxt,[1,e])):this.onMoveTxt(1,e)},i.onCloseHandler=function(){this.closeHandler=null,this.btn_1.clickHandler=null,this.btn_2.clickHandler=null,this.list_.renderHandler=null},__getset(0,i,"Index",null,function(t){this.init(),this.Refresh()}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(goldUI),GoldItem=function(t){function e(){this.onCloseFun=null,this.GetGoldEnd=null,this.label_xiaohaos=null,this.label_huodes=null,e.__super.call(this),this.initTextAni()}__class(e,"display.mainIcon.GoldItem",t);var i=e.prototype;return i.initTextAni=function(){this.label_xiaohaos=new GObj2DMutiText,this.label_xiaohaos.LoadAni("tex_文字大_ani"),this.label_xiaohaos.SetScrPos(295,195,0),this.addChild(this.label_xiaohaos),this.label_huodes=new GObj2DMutiText,this.label_huodes.LoadAni("tex_文字大_ani"),this.label_huodes.SetScrPos(295,255,0),this.addChild(this.label_huodes)},i.init=function(){this.closeHandler=new Handler(this,this.onCloseHandler),this.btn_sure.clickHandler=new Handler(this,this.GetGold)},i.onCloseHandler=function(){this.closeHandler=null,this.btn_sure.clickHandler=null;var t=this.onCloseFun;this.onCloseFun=null,this.GetGoldEnd=null,t&&t.run()},i.GetGold=function(){var t=this,e=null;DataTable.m_iSelfUser.OnGoldCoins(1,Handler.create(this,okH=function(i){e=i,e&&e.length&&(t.GetGoldEnd&&t.GetGoldEnd.runWith([e,1]),t.close())}))},i.upDate=function(){var t=DataTable.m_iSelfUser.CurDiaToGoldData(1,0),e=""+-t[0][0][1]*t[1];this.label_xiaohaos.SetText(e),e=""+t[0][1][1]*t[1],this.label_huodes.SetText(e),e="连续使用%d次点金手!",e=e.replace("%d",t[1]),this.label_dec.text=e},__getset(0,i,"Index",null,function(t){this.init(),this.upDate()}),e}(goldItemUI),OtherInfo=function(t){function e(){if(this.uid=0,e.__super.call(this),e.isboo)throw new Error("请用 getInstance()来获取实例")}__class(e,"display.mainIcon.OtherInfo",t);var i=e.prototype;return __getset(0,i,"Index",null,function(t){var e=this;this.uid=t,SysID.FRD_GETUSERINFO(this.uid,null,null,Handler.create(this,_initInfo=function(t){e.head.SetInfo(t),e.label_name.text="昵称："+t[1],e.txt_title.text=t[1],e.qianming.text="这家伙很懒，什么都没有留下",DataTable.m_iFriendBar.GetGameInfo(e.uid,Handler.create(e,_getGameInfo=function(t){t&&t[4].length>0&&(e.qianming.text=t[4])})),e.fangwenliang.text="0",csvr.call(PubDef.YHFWM(e.uid),"GetUserOtherSvrName",[e.uid,DataTable.m_iSelfUser.GetUID()],Handler.create(e,_onGetUserOtherSvrName=function(t){csvr.call(t,"GetUserVisitByOther",DataTable.m_iSelfUser.GetUID(),Handler.create(e,_onGetUserVisitByOther=function(t){e.fangwenliang.text=t[0]+""}),null,0)}),null,0)}))}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.isboo=!0,e}(OtherInfoUI),ThlbPanel=function(t){function e(){this.tip=null,this.clickArr=[],this.dataInfo=[[1,17,25,18,16],[29,25],[1,25],[1,25,2]],this.sizeArr=[[220,160],[270,240],[270,240],[220,220]],this.xyArr=[[[320,250],[564,250],[798,250],[320,426],[564,426]],[[365,300],[675,300]],[[365,282],[675,282]],[[300,300],[550,300],[800,300]]],this.diimg=null,this.flagNum=0,this.m_iLeftTimeLable=null,this.m_szProduct=null,this.m_pLink=null,this.nX=0,this.nY=0,this.container=new Sprite,e.__super.call(this),this.create()}__class(e,"display.mainIcon.ThGiftbag.ThlbPanel",t);var i=e.prototype;return i.create=function(){this.mouseThrough=!0;var t=new Image2;t.skin="ui/img/giftbg.png",DisplayTools.addTarget(t,this,{x:196,y:163,width:955,height:494,sizeGrid:"30,30,30,30"},1);var e=new Image2;e.skin="ui/img/giftTitle.png",DisplayTools.addTarget(e,this,{x:389,width:512,height:180}),this.diimg=new Image2,this.diimg.skin="ui/img/thlb4.png",DisplayTools.addTarget(this.diimg,this,{x:300,y:255});var i=new Muti2DAniIns;i.createInsFromName("uiimg_活动大板子彩带_ani_001"),DisplayTools.addTarget(i,this,{x:670,y:158,scaleX:1.4,scaleY:1.4},2);var n=new Sprite;n.graphics.drawRect(0,0,2,104,"#ff0000","#ff0000"),DisplayTools.addTarget(n,this.buy,{x:104,y:11,rotation:80}),this.m_iLeftTimeLable=new GObj2DMutiText,this.m_iLeftTimeLable.LoadAni("tex_文字小_ani"),this.addChild(this.m_iLeftTimeLable),this.m_iLeftTimeLable.SetScrPos(710,223,0),this.m_iLeftTimeLable.scale(1.5,1.5),this.addChild(this.container),this.tip=Tooltip.getInstance(),this.mouseEnabled=!0,this.mouseThrough=!1,this.buyBtn.on("click",this,this.OnBuy),this.on("removed",this,this.removeHandler);for(var s,a=0;5>a;a++)s=new Sprite,s.size(270,240),this.addChild(s),this.clickArr.push(s),s.on("mousedown",this,this.onCLickHandler,[a]),s=null},i.onUPHandler=function(){this.tip.removeSelf()},i.setTarget=function(t,e){this.flagNum=e;for(var i=0;5>i;i++)t>i?(this.clickArr[i].visible=!0,this.clickArr[i].size(this.sizeArr[e][0],this.sizeArr[e][1]),this.clickArr[i].pos(this.xyArr[e][i][0],this.xyArr[e][i][1])):this.clickArr[i].visible=!1},i.onCLickHandler=function(t){var e=DataTable.m_iItemTab.Get(this.dataInfo[this.flagNum][t]);this.tip.init(),this.tip.TipContent={label1:e[1],label2:e[10]},this.tip.upWidth(),this.clickArr[t].addChild(this.tip),this.tip.pos(0,-this.tip.height),Laya.stage.once("mouseup",this,this.onUPHandler)},i.removeHandler=function(){this.container.destroyChildren()},i.SetMutiPrice=function(t,e){this.buy.text="￥"+t,this.buys.text="￥"+e},i.InitData=function(t,e,i){i||(i=[]),this.removeHandler();i.slice();this.m_pLink=t,this.m_szProduct=IOS_iap.GetProductItem(e);var n=0,s=0,a=[];switch(this.m_szProduct[2]){case 1:var r=DataTable.m_iSelfUser.GetIapMoney(this.m_szProduct[7]);a.push([1,r]);break;case 4:"t1002"==this.m_szProduct[0]&&(s=DataTable.m_iSelfUser.GetLeastTool(),a.push([s,5]));case 7:case 5:for(n=0;n<this.m_szProduct[7].length;n++)2==this.m_szProduct[7][n].length&&a.push([this.m_szProduct[7][n][0],this.m_szProduct[7][n][1]]);break;default:a.push(this.m_szProduct[7])}switch(e){case"t1002":this.diimg.pos(355,282),this.diimg.skin="ui/img/thlb2.png",this.setTarget(2,2);break;case"t1003":this.diimg.pos(355,282),this.diimg.skin="ui/img/thlb3.png",this.setTarget(2,1);break;case"t1004":this.diimg.pos(300,255),this.diimg.skin="ui/img/thlb4.png",this.setTarget(3,3);break;case"t1005":this.diimg.pos(317,226),this.diimg.skin="ui/img/thlb1.png",this.setTarget(5,0);break;case"t1006":this.diimg.pos(355,282),this.diimg.skin="ui/img/thlb3.png",this.setTarget(2,2)}if(this.m_szProduct[3]>0){var h,o;h=""+this.m_szProduct[4],o=""+3*this.m_szProduct[4],this.nX=67,this.nY=396,this.SetMutiPrice(o,h)}DataTable.m_iSelfUser.AddNoti("m_nLeftSec",this,this.LeftChged)},i.setShowPop=function(){},i.checkXY=function(){this.nX>=1120&&(this.nX=280,this.nY+=200)},i.PopWindowDlg=function(t,e){},i.LeftChged=function(t){return 1>t?void this.m_iLeftTimeLable.SetText("0s"):void this.m_iLeftTimeLable.SetText(TimerTools.conversion(t))},i.OnBuy=function(){if(!this.m_pLink)return gSys.GameMsg("限时特惠礼包已结束"),void this.OnClose();this.m_pLink.OnBuying(this.m_szProduct[0]),this.OnClose();var t=this.m_szProduct[0],e=this.m_szProduct[5],i=100*this.m_szProduct[4];GameMarket.onBuy(e,i,DataTable.m_iSelfUser.GetUID(),DataTable.m_iSelfUser.GetLevel(),t,1)},i.Close=function(){},i.OnAutoPlaceSize=function(){},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(GiftbagUI),RankingPanel=function(t){function e(){if(this.index=0,this.isIndex=0,this.panelArr=[],this.listArr=[],e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.rankingPanel.RankingPanel",t);var i=e.prototype;return i.init=function(){for(var t,e=0;8>e;e++)this.panelArr.push(this.matchesPanel.getChildByName("box_"+e)),t=new Object,this.listArr.push(t);this.matchesList.array=this.listArr,this.addEvent(),DisplayTools.scrollBar=this.matchesList.scrollBar,DisplayTools.scrollBar=this.matchesPanel.vScrollBar},i.addEvent=function(){this.matchesPanel.on("click",this,this.onBoxClick),this.close_btn.on("click",this,this.onCloseClick)},i.onCloseClick=function(t){this.removeSelf()},i.onBoxClick=function(t){this.index=Math.abs(Number(t.target.name.slice(4))),this.upData()},i.upData=function(){for(var t=0;8>t;t++)this.panelArr[t].dataSource={clipBg:0},this.index==t&&(this.panelArr[t].dataSource={clipBg:1});var e="";switch(this.index){case 0:e="活动";break;case 1:e="评价";break;case 2:e="人气";break;case 3:e="等级";break;case 4:e="金币";break;case 5:e="航运";break;case 6:e="种植";break;case 7:e="养殖"}this.txt.text=e},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(matchesUI),MarketView=function(t){function e(){if(this.tab_TuBiao=["BTN_SHOPANIMAL","BTN_SHOPMAC","BTN_SHOPTREE","BTN_SHOPOTHER","BTN_DIY"],this.tab_Kind=[4,3,2,0,7],this.tab_name=["养殖","机器","果树","装饰","DIY建筑"],this._selectIndex=0,this.m_szNewNum=null,this.moneyText=null,this.diamondText=null,this.shellText=null,this.spaceX=20,this.spaceY=10,this.bianju=80,this.dataLen=0,this.m_szClearNewKind=null,this.tempBox=new Box,e.__super.call(this),e.isboo)throw new Error("这是个单例类！");this.initText(),this.tempBox.mouseEnabled=!0,this.img_BJ.skin=DataTable.getSkin("tex_商店_大背景图"),this.panel_boxctn.hScrollBar.value=0,this.panel_boxctn.hScrollBar.elasticDistance=100,this.panel_boxctn.hScrollBar.hide=!0,this.panel_boxctn.hScrollBar.changeHandler=new Handler(this,this.onMoveHandler),this.btn_tab_1.visible=!0,this.btn_tab_2.visible=!0,this.btn_tab_3.visible=!0,this.btn_tab_4.visible=!0,this.btn_tab_5.visible=!0;for(var t=1,i=this.tab_TuBiao.length;i>=t;t++)this["img_tab_"+t].skin=DataTable.getSkin(this.tab_TuBiao[t-1]),this["box_num_"+t].visible=!1,5!=t?(this["btn_tab_"+t].on("click",this,this.onClickTabBtnHandler),this["btn_tab_"+t].on("mousedown",this,this._$9_onMouseDown)):this["btn_tab_"+t].visible=!1;this.btn_close.name="close",this.closeHandler=new Handler(this,this.onCloseHandler)}__class(e,"display.mainIcon.market.MarketView",t);var i=e.prototype;return i.initText=function(){this.label_jinbi.text="",this.label_zuanshi.text="",this.label_beike.text="",this.moneyText=new GObj2DMutiText,this.moneyText.LoadAni("tex_文字大_ani"),this.moneyText.SetText("200"),this.moneyText.SetScrPos(304,635,2),this.addChild(this.moneyText),this.diamondText=new GObj2DMutiText,this.diamondText.LoadAni("tex_文字大_ani"),this.diamondText.SetText("200"),this.diamondText.SetScrPos(529,635,2),this.addChild(this.diamondText),this.shellText=new GObj2DMutiText,this.shellText.LoadAni("tex_文字大_ani"),this.shellText.SetText("200"),this.shellText.SetScrPos(739,635,2),this.addChild(this.shellText)},i._$9_onMouseDown=function(t){TweenTool.getInstance().buttonTween(t.target,!1)},i.onCheckNewLab=function(t){var e,i=DataTable.m_iSelfUser.GetShopTipData(),n=0,s=0,a=0,r=[],h=0;for(n=0;n<t.length;n++)r.push([t[n],0,[]]);for(i||(i=[]),n=0,s=i.length;s>n;n++)if(i[n]&&i[n]instanceof Array&&!(i[n].length<2)){if(e=DataTable.m_iBuildTab.Get(i[n][0]),null==e)throw new Error("buildid not find id="+i[n]);e[14]<1||(a=e[1],(1==a||5==a||10==a)&&(a=4),(6==a||9==a||11==a)&&(a=0),h=ArrOp.SzSearch(a,r),0>h||(r[h][1]+=i[n][1],ArrOp.SzSearch(e[0],r[h][2])>=0||r[h][2].push(e[0])))}var o=-1,l=this.tab_Kind,u=-1;for(n=0,s=l.length;s>n;n++)4!=n?(u>=0&&t[n]==u&&(o=n),h=ArrOp.SzSearch(t[n],r),0>h||(r[h][1]>0&&0>o&&(o=n),this.setTabShowNum(n+1,r[h][1]))):this.setTabShowNum(n+1,0);return this.m_szNewNum=r,o},i.setTabShowNum=function(t,e){e?(this["box_num_"+t].visible=!0,this["img_num_"+t].skin=DataTable.getSkin("tex_new"),this["label_num_"+t].text=e+""):this["box_num_"+t].visible=!1},i.onClickTabBtnHandler=function(t){this.showWhichTab(Laya.__parseInt(t.target.name.slice(8)))},i.showWhichTab=function(t){if(this._selectIndex!=t){this._selectIndex=t,e.s_nLastNo=t-1;for(var i=1;6>i;i++)t==i?(this["btn_tab_"+i].mouseEnabled=!1,this["btn_tab_"+i].dataSource={tab_bg:1}):(this["btn_tab_"+i].mouseEnabled=!0,this["btn_tab_"+i].dataSource={tab_bg:0});this.txt_titile.text=this.tab_name[e.s_nLastNo];var n=this.tab_Kind[e.s_nLastNo],s=0,a=0,r=0,h=[],o=0,l=DataTable.m_iBuildTab.GetAll();ArrOp.SzSortEx(l,11,0);var u=[];if(4==n){var c=[];c[0]=6,c[3]="地块X10",c[2]="地块X10",c[14]=DataTable.m_iSelfUser.GetBlockPriceFromShop(),c[15]=3,c[16]=1,c[17]=500,c[11]=1,h.push([c,s,[]]),s++}for(a=0,r=l.length;r>a;a++)l[a][14]<1||l[a][11]<0&&DataTable.m_iSelfUser.GetPower()<1||(o=l[a][1],(1==o||5==o||10==o)&&(o=4),(6==o||9==o||11==o)&&(o=0),o==n&&(h.push([l[a],s,u]),s++));this.CheckClearNew(n),this.initView(Math.ceil(s/2),h)}},i.upDateMoneys=function(){this.moneyText.SetText(DataTable.m_iSelfUser.GetMoney()+""),this.diamondText.SetText(DataTable.m_iSelfUser.GetDiamond()+""),this.shellText.SetText(DataTable.m_iSelfUser.GetShell()+"")},i.initView=function(t,e){this.upDateMoneys(),this.panel_boxctn.removeChildren(),this.tempBox.removeChildren();for(var i=-1,n=0;t>n;n++)for(var s=0;2>s&&(i++,i!=e.length);s++){var a=new MarketItemView;a.x=(a.width+this.spaceX)*n+this.bianju,a.y=(a.height+this.spaceY)*s,a.Init(e[i][0],e[i][1],e[i][2]),this.tempBox.addChild(a)}DisplayTools.addTarget(new Sprite,this.tempBox,{x:this.tempBox.width,width:this.bianju}),this.panel_boxctn.addChild(this.tempBox),this.dataLen=this.tempBox.numChildren,this.panel_boxctn.hScrollBar.value=0,this.onMoveHandler(0)},i.onMoveHandler=function(t){return},i.CheckClearNew=function(t){this.m_szClearNewKind.push(t)},i.onClose=function(){if(this.m_szClearNewKind.length>0)for(var t=[],e=0,i=this.m_szClearNewKind.length;i>e;e++){var n=0;if(n=ArrOp.SzSearch(this.m_szClearNewKind[e],this.m_szNewNum),0>n)return;if(!(this.m_szNewNum[n][2].length<1)){var s=ArrOp.SzFind(5700,this.m_szNewNum[n][2]);if("string"==typeof s?s=Laya.__parseInt(s+""):0,s>=0){t.push(5700),DataTable.m_iSelfUser.ClearShopTip(t);break}}}},i.onCloseHandler=function(){this.onClose(),this.panel_boxctn.removeChildren(),this.tempBox.removeChildren(),this._selectIndex=-1,GLeadManager.UnRegArrowInterface("商店标签_养殖"),GLeadManager.UnRegArrowInterface("商店标签_机器"),GLeadManager.UnRegArrowInterface("商店标签_果树"),GLeadManager.UnRegArrowInterface("商店标签_装饰"),GLeadManager.UnRegArrowInterface("商店标签_奇迹建筑")},i.myPopup=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),display.mydialog.MyDiaLog.prototype.myPopup.call(this,t,e,i),GLeadManager.RegArrowInterface(this.btn_tab_1,"商店标签_养殖",0,-23,85),GLeadManager.RegArrowInterface(this.btn_tab_2,"商店标签_机器",0,-23,85),GLeadManager.RegArrowInterface(this.btn_tab_3,"商店标签_果树",0,-23,85),GLeadManager.RegArrowInterface(this.btn_tab_4,"商店标签_装饰",0,-23,85),GLeadManager.RegArrowInterface(this.btn_tab_5,"商店标签_奇迹建筑",0,-23,85)},__getset(0,i,"Index",null,function(t){var e=0;this.m_szNewNum=[],this.m_szClearNewKind=[];var i=this.onCheckNewLab(this.tab_Kind);i>=0&&(e=i),e?e+=1:e=1,this.showWhichTab(e)}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.instance=null,e.s_nLastNo=0,e.isboo=!0,e}(MarketUI),DecoratePopup=function(t){function e(){this.evaluateV=null,this.iconAni=null,e.__super.call(this),this.create()}__class(e,"display.mainIcon.trophyPanel.DecoratePopup",t);var i=e.prototype;return i.create=function(){var t=new Muti2DAniIns;t.createInsFromName("uiimg_新弹框彩带_ani"),DisplayTools.addTarget(t,this,{x:159,y:90,scaleX:.8,scaleY:.8},1),this.evaluateV=new GObj2DMutiText,this.evaluateV.LoadAni("tex_文字中_ani"),this.addChild(this.evaluateV),this.evaluateV.SetText("20"),this.evaluateV.SetScrPos(370,174,0),this.iconAni=new Muti2DAniIns,this.iconAni.createInsFromName("tex_假山3_ani"),DisplayTools.addTarget(this.iconAni,this,{x:182,y:281}),this.noBtn.on("click",this,this.btnHandler,[0]),this.okBtn.on("click",this,this.btnHandler,[1])},i.btnHandler=function(t){},i.Init=function(t,e,i){switch(void 0===i&&(i=0),this.noBtn.visible=!0,this.okBtn.visible=!0,i){case 0:break;case 1:this.noBtn.visible=!1,this.okBtn.visible=!1;break;case 2:}},i.setData=function(t,e,i,n,s){this.title.text=t,this.have.text="（已拥有："+e+"）",this.evaluateV.SetText(i+""),this.descriPtion.text=n},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(decoratePopupUI),TrophyPanel=function(t){function e(){if(this.spritePanel=null,this.txt=null,this.trophyArr=[],this.index=0,this.m_nLastT=0,this.m_nBagKind=2,this.m_pLink,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.init()}__class(e,"display.mainIcon.trophyPanel.TrophyPanel",t);var i=e.prototype;return i.init=function(){this.txt=new Text,DisplayTools.addTarget(this.txt,this.box_view,{x:200,y:180,alige:"left",fontSize:30}),this.addEvent(),this.upData()},i.addEvent=function(){for(var t=0;3>t;t++)this["ck_"+t].on("click",this,this.onClick1,[t]);this.button_close.on("click",this,this.onClose)},i.onClose=function(){this.removeSelf()},i.onClick1=function(t,e){switch(DataTable.m_iSoundTab.OnPlay("标签切页"),this.index=t,this.index){case 0:this.m_nBagKind=2;break;case 1:this.m_nBagKind=3;break;default:this.m_nBagKind=4}this.OnChged()},i.upData=function(){for(var t=0;3>t;t++)this["ck_"+t].index=1,t==this.index&&(this["ck_"+t].index=0);this.clip_ck.index=this.index,this.spritePanel&&this.spritePanel.removeSelf();var e;switch(this.index){case 0:this.cangkuText.text="装饰仓库",this.spritePanel=Decorate.getInstance(),this.txt.visible=!1;break;case 1:this.cangkuText.text="生产机器仓库",e="机器仓库没有存放任何机器",DataTable.m_iSelfUser.IsCanVipFunc(40002)||(e+="\n(VIP"+DataTable.m_iSelfUser.GetVipFuncLv(70001)+"解锁：机器收入仓库功能)",this.spritePanel=null),this.spritePanel=Machine.getInstance();
break;case 2:this.cangkuText.text="DIY建筑仓库",e="DIY建筑仓库没有存放任何建筑",DataTable.m_iSelfUser.IsCanVipFunc(70001)||(e+="\n(VIP"+DataTable.m_iSelfUser.GetVipFuncLv(70001)+"解锁：机器收入仓库功能)"),this.spritePanel=null}e&&e.length>0&&(this.txt.text=e,this.txt.visible=!0),DisplayTools.addTarget(this.spritePanel,this.box_view)},i.OnInit=function(t){this.m_pLink=t,this.SetEvaStar(),this.OnChged()},i.SetEvaStar=function(){var t=DataTable.m_iFriendBar.m_szData[4][3];console.log("设置星星数量：",e.s_szLvl[t])},i.GetBuildEvalue=function(t){var e=DataTable.m_iBuildTab.Get(t);return null==e?0:e[8]},i.SetLeftTime=function(t){this.m_nLastT>0!=t>0,this.m_nLastT=t},i.SetEvaluete=function(t){},i.OnChged=function(t){void 0===t&&(t=0);var e=0,i=DataTable.m_iSelfUser.GetEvalue();this.SetEvaluete(i);var n,s,a,r=(gSys.GetCurSecAdj(),0),h=0;if(2==this.m_nBagKind){for(n=DataTable.m_iSelfUser.GetEvalueteSz(),s=DataTable.m_iSelfUser.GetBagItemSz(2),e=0;e<n[7].length;e++)n[7][e][0]<6e3||(h=0,r=ArrOp.SzSearch(n[7][e][0],s),r>=0&&(h=s[r][1],s=ArrOp.DelSz(r,s)),a.push([this.GetBuildEvalue(n[7][e][0]),n[7][e][0],h]));for(e=0;e<s.length;e++)s[e][0]<6e3||a.push([this.GetBuildEvalue(s[e][0]),s[e][0],s[e][1]]);a=ArrOp.SzSort(a,1)}else for(s=DataTable.m_iSelfUser.GetBagItemSz(this.m_nBagKind),e=0;e<s.length;e++)a.push([this.GetBuildEvalue(s[e][0]),s[e][0],s[e][1],s[e][2]]);var o;switch(!a||a.length<1?3==this.m_nBagKind?(o=" 机器仓库没有存放任何机器",DataTable.m_iSelfUser.IsCanVipFunc(40002)||(o+="\r\n(VIP%解锁:机器收入仓库功能)",o=o.replace("%",""+DataTable.m_iSelfUser.GetVipFuncLv(40002)))):(o=" DIY建筑仓库没有存放任何建筑",DataTable.m_iSelfUser.IsCanVipFunc(70001)||(o+="\r\n(VIP%解锁:DIY建筑收入仓库功能)",o=o.replace("%",""+DataTable.m_iSelfUser.GetVipFuncLv(70001)))):this.SetSubItem(this.m_nBagKind,a),this.m_nBagKind){case 3:break;case 4:DataTable.m_iSelfUser.IsCanVipFunc(70001)&&(o="仓库容量：%1/%2",o=o.replace("%1",""+a.length),o=o.replace("%2",""+DataTable.m_iSelfUser.GetBagMax(4)),DataTable.m_iSelfUser.IsCanVipFunc(80001)||(o+=" (VIP%3容量增加至%4)",o=o.replace("%3",""+DataTable.m_iSelfUser.GetVipFuncLv(80001)),o=o.replace("%4","40")))}},i.SetSubItem=function(t,e){for(var i=[],n=0;n<e.length;n++)i[n]=[],i.data=[this.m_nBagKind,n,e[n]]},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,__static(e,["s_szLvl",function(){return this.s_szLvl=["33333","03333","00333","00033","00003","00000","10000","11000","11100","11110","11111","21111","22111","22211","22221","22222","42222","44222","44422","44442","44444","54444","55444","55544","55554","55555","65555","66555","66655","66665","66666","86666","88666","88866","88886","88888","98888","99888","99988","99998","99999","a9999","aa999","aaa99","aaaa9","aaaaa"]}]),e}(trophyPanelUI),QuestPanel=function(t){function e(){this.questMr=null,this.questZx=null,this.m_iUncle=null,this.m_iPet=null,this.m_nHelpNo=0,this.m_nCurPage=0,this.m_szAward=null,this.m_szAwardPos=null,this.m_pPage=null,e.__super.call(this),this.init()}__class(e,"display.mainIcon.quest.QuestPanel",t);var i=e.prototype;return i.init=function(){this.addMouseEvent(),this.initPanel(),this.addAni(),this.clip_MR.visible=!1,this.clip_MR.mouseEnabled=!1,this.OnInit()},i.addAni=function(){this.m_iUncle=new Muti2DAniIns,this.m_iPet=new Muti2DAniIns,this.m_iUncle.createInsFromName("tex_女孩大切图_ani"),this.m_iPet.createInsFromName("tex_宠物猫1_ani"),DisplayTools.addTarget(this.m_iUncle,this.containerAni,{x:50,y:-80,scaleX:3.8,scaleY:3.8}),DisplayTools.addTarget(this.m_iPet,this.containerAni,{y:-50,scaleX:3.8,scaleY:3.8}),this.m_iUncle.playAni("休息1"),this.m_iPet.playAni("休息2"),this.m_iPet.mirror=!0},i.initPanel=function(){this.mouseEnabled=!0,this.questZx||(this.questZx=new QuestZx),this.questMr||(this.questMr=new QuestMr),this.Refresh()},i.addMouseEvent=function(){this.btn_close.on("click",this,this.onCloseClick),this.clip_ZX.on("click",this,this.Refresh,[0]),this.clip_MR.on("click",this,this.Refresh,[1])},i.OnInit=function(t){void 0===t&&(t=0),this.m_iUncle.PlaySpeed(1,0),this.m_iPet.PlaySpeed(1,0),Laya.timer.loop(5e3,this,this.PlayRandAni)},i.PlayRandAni=function(){var t="休息",e=Math.floor(3*Math.random());e&&2==e&&this.m_iUncle.PlayKindEndRetrun(t+e)},i.Refresh=function(t){void 0===t&&(t=1),this.questMr.displayInStage&&this.questMr.removeSelf(),this.questZx.displayInStage&&this.questZx.removeSelf(),t?(DisplayTools.addTarget(this.questMr,this,{x:223,y:65}),this.questMr.OnInitEnd(),this.clip_MR.index=0,this.clip_ZX.index=1):(DisplayTools.addTarget(this.questZx,this,{x:167,y:65}),this.clip_MR.index=1,this.clip_ZX.index=0,this.questZx.InitData(),this.SetHelp())},i.OnSelTabBtn=function(t,e){},i.OnTabAct=function(t,e){this.m_nCurPage=e,this.Refresh(this.m_nCurPage)},i.SetHelp=function(){this.m_nHelpNo=this.questZx.GetHelpNo(),this.m_nHelpNo<0?this.questZx.btn_lq.label="领 取":this.questZx.btn_lq.label="引 导"},i.HandIn=function(){this.m_nHelpNo>=0||this.m_pPage.HandIn()&&this.CompleteEff()},i.GetAwardPos=function(){return[]},i.CompleteEff=function(){DataTable.m_i_QuestInfo.CheckQuest()},i.onCloseClick=function(t){this.OnClose()},i.OnClose=function(){this.questMr.displayInStage&&this.questMr.removeSelf(),this.questZx.displayInStage&&this.questZx.removeSelf(),display.mydialog.MyDiaLog.prototype.OnClose.call(this)},__getset(0,i,"questDaily",function(){return this.questMr}),__getset(0,i,"questMain",function(){return this.questZx}),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(QuestManagerUI),VIPprivilegeSpreeView=function(t){function e(){if(this.tmp_mc=null,this.tabKind=[0,2,3],this.m_iTitle=null,this.m_nKind=0,e.__super.call(this),e.isboo)throw new Error("请调用 getInstance()来获取实例");this.m_iTitle=new Muti2DAniIns,this.m_iTitle.createInsFromName("tex_标题美术字_ani"),this.m_iTitle.x=this.width/2+30,this.m_iTitle.y=25,this.addChild(this.m_iTitle)}__class(e,"display.mainIcon.vipps.VIPprivilegeSpreeView",t);var i=e.prototype;return i.init=function(){this.closeHandler=new Handler(this,this.onCloseHandler),this.btn_tab_item_01.on("click",this,this.onClickThisHandler),this.btn_tab_item_02.on("click",this,this.onClickThisHandler),this.btn_tab_item_03.on("click",this,this.onClickThisHandler),DataTable.m_iSelfUser.AddNoti("firiapbuychg",this,this.onRefushVip)},i.onClickThisHandler=function(t){this.selfData=null,DataTable.m_iSoundTab.playButton();var e=Math.abs(Number(t.target.name.substr(-1)));switch(t.target.name){case"btn_tab_item_01":this.initViewHandler(e);break;case"btn_tab_item_02":this.initViewHandler(e);break;case"btn_tab_item_03":this.initViewHandler(e)}},i.setTab=function(){for(var t=0;t<this.tabKind.length;t++){var e="";switch(this.tabKind[t]){case 3:e=DataTable.getSkin("icon_杂物按钮");break;case 2:e=DataTable.getSkin("tex_标签按钮图1");break;case 0:e=DataTable.getSkin("tex_标签按钮图2");break;case 1:e=DataTable.getSkin("uiimg_标签按钮图4")}this["icon_"+(t+1)].skin=e}},i.showTab=function(t){this.box_bj.setChildIndex(this["btn_tab_item_0"+t],this.box_bj.numChildren-1),this["clip_"+t].index=1,this["icon_"+t].scale(1.2,1.2),this.box_bj.setChildIndex(this.image_bj,this.box_bj.numChildren-2);for(var e=3,i=1;4>i;i++)i!=t&&(this.box_bj.setChildIndex(this["btn_tab_item_0"+i],this.box_bj.numChildren-e),this["clip_"+i].index=0,this["icon_"+i].scale(1,1),e++)},i.setTitleAni=function(t){switch(t){case 1:this.m_nKind=5,this.m_iTitle.playAni("月惠礼包");break;case 3:this.m_nKind=2,this.m_iTitle.playAni("闪电礼包");break;case 2:this.m_nKind=0,this.m_iTitle.playAni("钻石礼包");break;case 0:this.m_nKind=-1,this.m_iTitle.playAni("VIP特权")}},i.onRefushVip=function(){this.m_nKind<0&&VIPpsTequanView.getInstance().updateHandler([],null)},i.onRefush=function(){var t=[];if(this.m_nKind<0)return t;var e=5,i=0;i=2!=this.m_nKind?IOS_iap.GetProductNum():DiamondToItem.GetProductNum();for(var n=0;i>n;n++)if(2!=this.m_nKind){var s=IOS_iap.GetProduct(n);if(!s[9])continue;if(s[2]!=this.m_nKind)continue;3==s[2]&&(e=50),t.push(s)}else{var a=DiamondToItem.GetProduct(n);if(2==a[1])continue;if(4==a[1])continue;t.push(a)}return t},i.initViewHandler=function(t){void 0===t&&(t=1),this.showTab(t),this.setTitleAni(this.tabKind[t-1]);var e=this.onRefush();switch(this.tmp_mc&&this.tmp_mc.destoryMySelf(),t){case 1:this.tmp_mc=VIPpsTequanView.getInstance(),this.tmp_mc.updateHandler(e,this.selfData);break;case 2:case 3:this.tmp_mc=VIPpsDaojuView.getInstance(),this.tmp_mc.updateHandler(e,this.selfData)}DisplayTools.addTarget(this.tmp_mc,this.box_,null,-1,!0)},i.onCloseHandler=function(){this.closeHandler=null,this.btn_tab_item_01.off("click",this,this.onClickThisHandler),this.btn_tab_item_02.off("click",this,this.onClickThisHandler),this.btn_tab_item_03.off("click",this,this.onClickThisHandler),this.selfData=null},__getset(0,i,"Index",null,function(t){this.init(),this.setTab(),this.initViewHandler(t)}),e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(VIPprivilegeSpreeUI),OnSaleItem=function(t){function e(){this.m_szItem=null,this.no=0,this.goodsNum_ani=null,this.moneyTxt_ani=null,this.goldTxt_ani=null,e.__super.call(this),this.init()}__class(e,"display.roadShop.OnSaleItem",t);var i=e.prototype;return i.init=function(){this.deleteBtn.on("click",this,this.OnDrop),this.goodsNum_ani=new GObj2DMutiText,this.goodsNum_ani.LoadAni("tex_文字小_ani"),this.goodsNum_ani.SetScrPos(155,245,1),this.goodsNum_ani.width=this.goodsNum_ani.getClipRect().right-this.goodsNum_ani.getClipRect().left,this.addChild(this.goodsNum_ani),this.moneyTxt_ani=new GObj2DMutiText,this.moneyTxt_ani.LoadAni("tex_文字中_ani"),this.moneyTxt_ani.SetScrPos(315,245,1),this.moneyTxt_ani.width=this.moneyTxt_ani.getClipRect().right-this.moneyTxt_ani.getClipRect().left,this.addChild(this.moneyTxt_ani),this.goldTxt_ani=new GObj2DMutiText,this.goldTxt_ani.LoadAni("tex_文字中_ani"),this.goldTxt_ani.SetScrPos(255,427,2),this.goldTxt_ani.SetText("1"),this.addChild(this.goldTxt_ani)},i.OnInit=function(t,e,i){this.no=t,this.m_szItem=e,this.goodsImg.skin=DataTable.getSkin(ItemFeild.getInstance().getItemArr(e[1])[3]),this.goodsImg.size(60,60),this.goodsNum_ani.SetText(e[2]+""),this.moneyTxt_ani.SetText(e[3]+""),this.SetAdCD(i)},i.SetAdCD=function(t){CountDown.getInstance().displayInStage&&CountDown.getInstance().removeSelf(),t>0?(this.paper.visible=!0,CountDown.getInstance().scale(1,1),CountDown.getInstance().Init(300,t,1,this),CountDown.getInstance().sdClick=new Handler(this,this.EndAdCd),DisplayTools.addTarget(CountDown.getInstance(),this,{x:95,y:305})):this.paper.visible=!1},i.EndAdCd=function(){function t(t){t&&e.SetAdCD(0)}var e=this,i=NaN,n=NaN,s=0;i=Laya.stage.mouseX,n=Laya.stage.mouseY,DataTable.m_iSelfUser.EndAdCd([i,n],s,Handler.create(this,t))},i.GetNeedDiamond=function(t){return 1},i.OnDrop=function(){function t(){RoadShopView.getInstance().EnableItem(e.no,0),DataTable.m_iSelfUser.DelSell(e.no,e.m_szItem,[i,n])}var e=this;this.close();var i=NaN,n=NaN;i=Laya.stage.mouseX,n=Laya.stage.mouseY,MessageBox.show(3,{title:"取消售出提示",content:"您确定要删除物品吗？删除后物品将会消失。",lbtn:"确定",rbtn:"取消"},Handler.create(this,t))},e}(OnSaleItemUI),RoadShopDepotView=function(t){function e(){if(this.tip=null,this.num_switch=null,this.gold_switch=null,this.curSelect=null,this.s_vLastOperation=[-1,0,0],this.m_fScalePre=50,this.m_nNum=0,this.m_nGold=0,this.m_fMaxPrice=NaN,this.m_nBasePrice=0,this.itemid=0,this.m_nSellPos=0,this.numlabel=null,this.saleNum=null,this.totalPrice_ani=null,this.item=ItemFeild.getInstance(),e.__super.call(this),e.isboo)throw new Error("这是个单例类！");this.init()}__class(e,"display.roadShop.RoadShopDepotView",t);var i=e.prototype;return i.init=function(){this.tip||(this.tip=new Tooltip,this.addChild(this.tip),this.tip.visible=!1),this.numlabel=new GObj2DMutiText,this.numlabel.LoadAni("tex_文字小_ani"),this.numlabel.SetScrPos(270,116,1),this.addChild(this.numlabel),this.saleNum=new GObj2DMutiText,this.saleNum.LoadAni("tex_文字小_ani"),this.saleNum.SetScrPos(60,116,1),this.goodsInfo.addChild(this.saleNum),this.totalPrice_ani=new GObj2DMutiText,this.totalPrice_ani.LoadAni("tex_文字大_ani"),this.totalPrice_ani.SetScrPos(60,214,1),this.totalPrice_ani.scale(.8,.8),this.totalPrice_ani.width=this.totalPrice_ani.getClipRect().right-this.totalPrice_ani.getClipRect().left,this.goodsInfo.addChild(this.totalPrice_ani),this.num_switch=new NumSwitchItem,this.num_switch.pos(105,61),this.num_switch.on("dragChange",this,this.ReCal),this.goodsInfo.addChild(this.num_switch),this.gold_switch=new GoldSwitchItem,this.gold_switch.pos(105,162),this.gold_switch.on("dragChange",this,this.ReCal),this.goodsInfo.addChild(this.gold_switch),this.addEvent(),this.ls_btn.index=this.wp_btn.index=1,this.curSelect=this.ls_btn,this.curSelect.index=0,DisplayTools.scrollBar=this.wareList.scrollBar,this.wareList.renderHandler=new Handler(this,this.wareRenderHandler),this.goodsInfo.visible=!1},i.wareRenderHandler=function(t,e){if(t.dataSource){var i=t.getChildByName("renderNumLabel");i||(i=new GObj2DMutiText,i.LoadAni("tex_文字小_ani"),i.SetScrPos(90,71,0),i.name="renderNumLabel",t.addChildAt(i,t.numChildren-1)),i.SetText(t.dataSource.label+"")}},i.addEvent=function(){this.ls_btn.on("click",this,this.onClickHandler),this.wp_btn.on("click",this,this.onClickHandler),this.button_close.on("click",this,this.onClickHandler),this.m_pCheck.on("click",this,this.onClickHandler),this.salebtn.on("click",this,this.onClickHandler),this.wareList.mouseHandler=new Handler(this,this.onListClick)},i.onListClick=function(t,e){if("mousedown"==t.type){this.tip.init(),this.tip.TipContent=this.wareList.array[e].info,this.tip.upWidth(),this.tip.visible=!0;var i=this.globalToLocal(new Point(this.stage.mouseX,this.stage.mouseY));this.tip.x=i.x-this.tip.width/2.5,this.tip.y=i.y-this.tip.height-20,this.setGoodsInfo(this.wareList.array[e]),this.goodsInfo.visible=!0}("mouseout"==t.type||"mouseup"==t.type)&&(this.tip.visible=!1)},i.setGoodsInfo=function(t){this.itemid=t.itemid;DataTable.m_iItemTab.GetItemValuePrice(this.itemid);this.goodsImg.skin=t.image;var e=DataTable.m_iItemTab.Get(this.itemid);if(!e)throw new Error("item not find id="+this.itemid);if(0==e[6])return void gSys.GameMsg("此物品不能出售！",!0,"提示信息");this.m_nBasePrice=e[6],this.m_fMaxPrice=3.3*e[6];var i=t.label,n=Math.min(t.label,10);this.m_nNum=Util.Clamp(n/2,1,n),this.gold_switch.SetMinMax(0,100),this.num_switch.SetMinMax(0,n),this.itemid!=this.s_vLastOperation[0]||this.s_vLastOperation[1]>i?(this.m_nNum=Util.Clamp(n/2,1,n),this.m_fScalePre=50):(this.m_nNum=this.s_vLastOperation[1],this.m_fScalePre=this.s_vLastOperation[2]),this.num_switch.setCurValue(Math.floor(this.m_nNum)),this.gold_switch.setCurValue(this.m_fScalePre),this.SetAdCD(this.GetAdCdTime())},i.ReCal=function(){this.m_nNum=this.num_switch.curNum,this.m_fScalePre=this.gold_switch.curNum;var t=Util.Clamp(this.m_fScalePre,0,100);this.m_nGold=Math.floor(t*this.m_nNum*this.m_fMaxPrice/100),this.m_nGold<1&&(this.m_nGold=1),this.saleNum.SetText(this.m_nNum+""),this.totalPrice_ani.SetText(this.m_nGold+"");var e=3.3*this.m_nBasePrice*this.m_nNum,i=SysID.GETSELLPERCENT(this.m_nGold,e);if(i.length>0)switch(this.percent_logo.visible=!0,i){case"c9":this.percent_logo.index=1;break;case"c8":this.percent_logo.index=2;break;case"c7":this.percent_logo.index=3;break;case"c6":this.percent_logo.index=0}else this.percent_logo.visible=!1},i.onClickHandler=function(t){switch(t.target){case this.ls_btn:this.curSelect=this.ls_btn,this.curSelect.index=0,this.wp_btn.index=1,this.upData();break;case this.wp_btn:this.curSelect=this.wp_btn,this.curSelect.index=0,this.ls_btn.index=1,this.upData();break;case this.button_close:break;case this.m_pCheck:this.m_pCheck.index=1==this.m_pCheck.index?0:1;break;case this.salebtn:if(this.close(),0==this.itemid)return;if(this.m_nNum<1)return;RoadShopView.getInstance().AddSellItem(this.m_nSellPos,this.itemid,this.m_nNum,this.m_nGold,this.m_pCheck.index),this.s_vLastOperation[0]=this.itemid,this.s_vLastOperation[1]=this.m_nNum,this.s_vLastOperation[2]=this.m_fScalePre}},i.upData=function(){var t,e=[],i=[],n=0,s=0;if(0==this.ls_btn.index){for(this.cangkuText.text="粮食仓库",i=DataTable.m_iSelfUser.GetBagItemSz(0),n=0,s=i.length;s>n;n++)t=new Object,t.itemid=i[n][0],t.image=DataTable.getSkin(this.item.getItemArr(t.itemid)[3]),t.label=i[n][1],t.itemid>4e3&&t.itemid<4012?t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10],label3:TimerTools.conversion(60*this.item.getItemArr(t.itemid)[13])}:t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10]},e.push(t),t=null;this.numlabel.SetText(DataTable.m_iSelfUser.m_nBarnNum+"/"+DataTable.m_iSelfUser.m_nBarnAllNum)}else{for(this.cangkuText.text="物品仓库",i=DataTable.m_iSelfUser.GetBagItemSz(1),n=0,s=i.length;s>n;n++)t=new Object,t.itemid=i[n][0],t.image=DataTable.getSkin(this.item.getItemArr(t.itemid)[3]),t.label=i[n][1],t.itemid>4e3&&t.itemid<4012?t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10],label3:this.item.getItemArr(t.itemid)[13]}:t.info={label1:this.item.getItemArr(t.itemid)[2],label2:this.item.getItemArr(t.itemid)[10]},e.push(t),t=null;this.numlabel.SetText(DataTable.m_iSelfUser.m_nWareNum+"/"+DataTable.m_iSelfUser.m_nWareAllNum)}this.wareList.array=e,this.wareList.scrollTo(0),this.onChooseItemInit()},i.onChooseItemInit=function(){for(var t=0;t<this.wareList.array.length;t++)if(this.wareList.array[t].itemid==this.s_vLastOperation[0])return this.setGoodsInfo(this.wareList.array[t]),void(this.goodsInfo.visible=!0);this.wareList.array[0]&&(this.setGoodsInfo(this.wareList.array[0]),this.goodsInfo.visible=!0)},i.OnInit=function(t){this.m_nSellPos=t,this.SetAdCD(this.GetAdCdTime()),this.goodsInfo.visible=!1,this.upData()},i.SetAdCD=function(t){CountDown.getInstance().displayInStage&&CountDown.getInstance().removeSelf(),1>t?(this.m_pCheck.index=1,this.cooltime.text="广告持续3小时：",this.m_pCheck.visible=!0):(this.m_pCheck.index=0,this.m_pCheck.visible=!1,this.cooltime.text="广告冷却时间：",CountDown.getInstance().scale(1,1),CountDown.getInstance().Init(300,t,1,this),CountDown.getInstance().sdClick=Handler.create(this,this.EndAdCd),DisplayTools.addTarget(CountDown.getInstance(),this.goodsInfo,{x:20,y:260}))},i.GetNeedDiamond=function(t){return 1},i.EndAdCd=function(){function t(t){t&&e.SetAdCD(0)}var e=this,i=NaN,n=NaN,s=0;i=Laya.stage.mouseX,n=Laya.stage.mouseY,DataTable.m_iSelfUser.EndAdCd([i,n],s,Handler.create(this,t))},i.GetAdCdTime=function(){var t=gSys.GetCurSecAdj(),e=GMapView.lubiantan.m_szSysData;return e[2]-t},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(RoadShopDepotUI),RoadShopView=function(t){function e(){if(this.m_nUid=0,this.m_nSelf=0,this.m_szMarketData=null,this.m_szItem=[],e.__super.call(this),e.isboo)throw new Error("这是个单例类！");this.init()}__class(e,"display.roadShop.RoadShopView",t);var i=e.prototype;return i.init=function(){this.bjt.skin=DataTable.getSkin("tex_界面_路边摊"),this.closeHandler=new Handler(this,this.onCloseHandler),this.goodsCon.content.mouseEnabled=!0,this.goodsCon.hScrollBar.value=0,this.goodsCon.hScrollBar.elasticDistance=100,this.goodsCon.hScrollBar.hide=!0},i.onCloseHandler=function(){},i.onOkFun=function(){},i.GetNextFriendNum=function(t){var e=[1,3,5,10,16,23,32,42,55,75,100,125,150,175,200],i=0;i=ArrOp.SzHalfSearch(t,e),0>i&&(i=-1-i),i>=e.length&&(i=e.length-1);var n=DataTable.m_iSelfFrd.GetFriendNum();return e[i]+1-n},i.OnChged=function(t,e,i,n){this.m_nSelf=e,this.goodsCon.content.destroyChildren(),this.m_szItem.length=0;var s,a=0,r=0,h=0,o=[];for(r=0,h=40,a=0;a<t.length;a++)s=new RoadShopItem,!t[a]||t[a]&&t[a].length<1?s.Init(a,null):(o=t[a],s.Init(a,o)),s.pos(r,h),a%2==0?h=223:(h=40,r+=134),this.goodsCon.addChild(s),this.m_szItem.push(s);if(e){var l,u=this.GetNextFriendNum(i);u>0&&(l=new RoadShopLockItem,l.setDef(u,0),this.goodsCon.addChild(l),l.pos(r,h),a%2==0?h=223:(h=40,r+=134)),n&&(l=new RoadShopLockItem,l.setDef(0,15),this.goodsCon.addChild(l),l.pos(r,h))}},i.SetMaster=function(t,e){this.m_nUid=t,this.m_nSelf=e;var i;i=e?GMapView.lubiantan.m_szSysData:DataTable.m_iOtherUser.m_szSysData_LBT,this.m_szMarketData=i,this.OnChged(i[3],e,i[5],i[4]<1275)},i.EnableItem=function(t,e){0>t||t>=this.m_szItem.length||this.m_szItem[t].Enable(e)},i.ReEnableItem=function(t){this.EnableItem(t,1)},i.AddSellItem=function(t,e,i,n,s){this.EnableItem(t,0),DataTable.m_iSelfUser.OnSellItem(t,e,i,n,s)},i.AddSellAd=function(t,e,i,n){this.EnableItem(t,0),DataTable.m_iSelfUser.AddSellAd(t,e,[i,n])},i.GetAdCdTime=function(){var t=gSys.GetCurSecAdj();return GMapView.lubiantan.m_szSysData[2]-t},i.close=function(t){display.mydialog.MyDiaLog.prototype.close.call(this,t),this.m_nSelf&&gSys.SetSignal("closemarket:self")},e.getInstance=function(){return e.instance||(e.isboo=!1,e.instance=new e,e.isboo=!0),e.instance},e.isboo=!0,e.instance=null,e}(RoadShopMainUI),DiaGiftBoxDlg=function(t){function e(){this.m_nLock=0,this.m_nItemID=0,this.m_iNum=null,this._po=null,e.__super.call(this),this.create()}__class(e,"game.ui.comui.DiaGiftBoxDlg",t);var i=e.prototype;return i.create=function(){this.okBtn.labelPadding="0,0,0,45";var t=new Image2;t.skin=DataTable.getSkin("uiimg_活动底图"),DisplayTools.addTarget(t,this,{x:135,y:55,width:558,height:191,sizeGrid:"30,30,30,30"},0);var e=new Image2;e.skin=DataTable.getSkin("uiimg_活动底图1"),DisplayTools.addTarget(e,this,{x:113,y:35,width:600,height:229,sizeGrid:"30,30,30,30"},0);var i=new Image2;i.skin=DataTable.getSkin("uiimg_神秘宝箱"),DisplayTools.addTarget(i,this,{x:270,y:6,width:256,height:128});var n=new Image2;n.skin=DataTable.getSkin("uiimg_活动横条"),DisplayTools.addTarget(n,this,{x:0,y:177,width:800,height:139});var s=new GObj2DMutiText;s.LoadAni("tex_文字大_ani"),this.addChild(s),s.SetScrPos(385,220,0),s.SetText("K"),this.m_iNum=new GObj2DMutiText,this.m_iNum.LoadAni("tex_文字大_ani"),this.addChild(this.m_iNum),this.m_iNum.SetScrPos(380,211,2),this.m_iNum.SetText("1"),this.OnInitEnd()},i.Init=function(t,e){this.m_nItemID=t,this._po=e,DataTable.m_iSelfUser.GetKey()||this.m_iNum.SetText("1")},i.OnInitEnd=function(){this.okBtn.on("click",this,this.OnBuy),this.closeHandler=new Handler(this,this.onCloseHandler)},i.onCloseHandler=function(t){t&&t.length&&GMapView.m_cloudMgr.delGift(0)},i.OnBuy=function(t){this.m_nLock=1;var e=NaN,i=NaN;e=Laya.stage.mouseX,i=Laya.stage.mouseY;var n=DataTable.m_iSelfUser.OnGetBoxItemByDia(this.m_nItemID,[e,i],null);n&&n.length&&(DataTable.m_iSoundTab.OnPlay("带锁宝箱"),RewardBox.getInstance().onShow(n,this._po)),this.OnDiaClose()},i.OnDiaClose=function(t){void 0===t&&(t=0),this.OnClose()},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(DiaGiftBoxUI),EvaHelp=function(t){function e(){this.listNumArr=[],this.listDataArr=[],e.__super.call(this),this.OnPopEnd()}__class(e,"game.ui.comui.EvaHelp",t);var i=e.prototype;return i.OnPopEnd=function(){this.Init()},i.Init=function(){for(var t=EvaLevel.GetLevelSz(),e=1;31>e&&e<t.length;e++)this.listDataArr.push([t[e][1],t[e][0]]);this.evaList.array=this.listDataArr,this.initList(),this.evaList.renderHandler=Handler.create(this,this.upList,null,!1)},i.initList=function(){for(var t,e,i=0;7>i;i++)e=new MyHeadEvalue,e.Set(20),t=new GObj2DMutiText,t.LoadAni("tex_文字大_ani"),this.evaList.getCell(i).addChild(e),this.evaList.getCell(i).addChild(t),t.SetText("w20"),t.SetScrPos(280,55,0),this.listNumArr.push([e,t]),t=null,e=null;DisplayTools.scrollBar=this.evaList.scrollBar},i.upList=function(t,e){0>e||e>=this.listDataArr.length||(this.listNumArr[e%7][0].SetText(this.listDataArr[e][0]),this.listNumArr[e%7][1].SetText("w"+this.listDataArr[e][1]))},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}(EvaHelpUI),PlayMovie=function(t){function e(t,i,n){this.m_STitle=null,this.m_sName=null,this.m_nOkShowTime=0,this.m_pMovie=null,e.__super.call(this),void 0===n&&(n=0),this.onInit(),this.SetTitle(t),this.m_STitle=t,this.m_sName=i,this.m_pMovie.SetPos(this.height/2,140),this.m_pMovie.LoadFromName(""+i,this),this.m_pMovie.PlayAni(1),this.m_Box.addChild(this.m_pMovie.m_disObj),this.CheckMaxFrame(n)}__class(e,"game.ui.comui.PlayMovie",t);var i=e.prototype;return i.onInit=function(){this.isCanClickMaskToDel=!1,this.isCanCloseByOther=!1,this.m_pMovie=new DisplayItem(null,!1),this.m_pOkBtn.on("click",this,this.OnOk),this.m_pOkBtn.visible=!0,this.m_Box.mouseEnabled=!1,this.m_pOkBtn.mouseEnabled=!1,this.m_pOkBtn.filters=[ColorFilter.GRAY]},i.CheckMaxFrame=function(t){Laya.timer.once(500,this,this.CheckMaxFrameNetx,[t],!0)},i.CheckMaxFrameNetx=function(t){var e=1;t?this.ShowClose():Laya.timer.once(1e3*e,this,this.ShowClose)},i.ShowClose=function(){this.m_pOkBtn.visible=!0,this.m_pOkBtn.filters=null,this.m_pOkBtn.mouseEnabled=!0,this.m_nOkShowTime=gSys.GetTickCount()},i.OnOk=function(){this.m_sName.length>0?gSys.SetSignal("closemovie:"+this.m_sName):gSys.SetSignal("closemovie");var t={};t.ext={},t.ext.dec=this.m_STitle,t.ext.act=StatManager.getInstance().m_nCurStep,StatManager.getInstance().send(t),this.close()},i.OnClose=function(){if(!this.m_pOkBtn.mouseEnabled)return void this.ShowClose();var t=gSys.GetTickCount();t-this.m_nOkShowTime<500||this.OnOk()},i.SetTitle=function(t){this.m_pTitle.text=t},i.myPopup=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!1),this.isCanClickMaskToDel=!1,display.mydialog.MyDiaLog.prototype.myPopup.call(this,t,e,i)},e}(PlayMovieUI),GNpcDlg=function(t){function e(){this._pid=null,this.m_pHead=null,this.m_pNeedItemBox=null,this.m_pLink=null,this.m_nNpcID=0,this.m_nDlgMode=0,this.m_szNpcData=null,this.m_sBtnName="",this.m_nCanClose=1,this.flag=!1,e.__super.call(this),this.isCanClickMaskToDel=!1,this.isCanCloseByOther=!1,this.onInit()}__class(e,"game.ui.lead.npc.GNpcDlg",t);var i=e.prototype;return i.onInit=function(){DataTable.m_iNpcDlg=this,this.m_pNeedItemBox=new GNeedItemBox,this.addChildAt(this.m_pNeedItemBox,0),this.m_pNeedItemBox.pos(340,100),this.m_p1.label="没问题",this.m_p2.label="不想卖了",this.m_p3.label="稍等...",this.m_p1.visible=!1,this.m_p2.visible=!1,this.m_p3.visible=!1,this.m_p1.on("click",this,this.OnSell),this.m_p2.on("click",this,this.NotSell),this.m_p3.on("click",this,this.Close)},i.onReset=function(){this.m_p1.label="没问题",this.m_p2.label="不想卖了",this.m_p3.label="稍等...",this.m_p1.visible=!1,this.m_p2.visible=!1,this.m_p3.visible=!1,this.m_p3.pos(338,510)},i.OnCreate=function(){var t=this.pid.GetDlgData();this.m_sBtnName=this.pid.GetBtnName(),this.m_nNpcID=t[0],this.m_nDlgMode=t[1],this.m_szNpcData=t[2],this.PopOnTopWnd(),this.SetNpcData()},i.SetTalk=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=""),this.m_nNpcID=t,this.m_nDlgMode=e,this.m_szNpcData=i,this.SetNpcData()},i.PopOnTopWnd=function(){this.m_pLink=this.pid},i.DelayClose=function(){var t=this;this.m_nCanClose=0,Laya.timer.once(500,this,function(){t.m_nCanClose=1})},i.OnActive=function(){},i.SetBtnMode=function(t,e){return void 0===e&&(e=1),t?(this.m_p1.visible=!0,e?this.m_p2.visible=!0:this.m_p3.pos(338,440),void(this.m_p3.visible=!0)):(this.m_p3.pos(338,390),this.m_sBtnName&&this.m_sBtnName.length>0?this.m_p3.label=this.m_sBtnName:this.m_p3.label="好的",void(this.m_p3.visible=!0))},i.SetNpcData=function(){this.onReset();var t;switch(t=DataTable.m_iNpcTab.Get(this.m_nNpcID),this.m_pHead&&this.m_pHead.m_disObj&&DisplayItem.SafeDelObj(this.m_pHead),this.m_nNpcID){case 100:this.m_pHead=new DisplayItem,this.m_pHead.LoadFromName(""+t[4],this);break;case 200:this.m_pHead=new Man(this),this.m_pHead.InitJimi(t[4]);break;case 5:this.m_pHead=new Man(this),this.m_pHead.InitSorceress(t[4]),this.SetItemData();break;default:this.m_pHead=new Man(this),this.m_pHead.InitRes(t[4])}this.addChild(this.m_pHead.m_disObj),this.m_pHead.m_disObj.scaleX=this.m_pHead.m_disObj.scaleY=2,this.m_pHead.SetPos(160,560),this.SetMemData()},i.SetItemData=function(){},i.SetMemData=function(){var t,e=this.m_szNpcData;if(3==this.m_nDlgMode){if(e){t="您能卖给我%1个%2吗？";var i;if(i=DataTable.m_iItemTab.Get(e[2]),null==i)return void gSys.Err("item not find:  "+e[2]);t=t.replace("%1",""+e[3]),t=t.replace("%2",""+i[2]);var n=DataTable.m_iSelfUser.GetBagItemNum(DataTable.m_iSelfUser.GetItemBagByKind(i[4]),e[2]);return this.m_pNeedItemBox.SetNeedData(t,e[2],e[3],n,e[4]),void this.SetBtnMode(1,DataTable.m_iSelfUser.CheckAchFinish(47))}}else t=e.toString(),this.m_pNeedItemBox.SetNeedData(t,0,0,0,0),this.DelayClose();this.SetBtnMode(0)},i.OnSell=function(){var t=NaN,e=NaN;DataTable.m_iNpcManager.HandInOrder(this.m_szNpcData[0],[this.m_szNpcData[2],this.m_szNpcData[3],this.m_szNpcData[4]],[t,e]),this.Close()},i.NotSell=function(){DataTable.m_iNpcManager.HandInOrder(this.m_szNpcData[0]),this.Close()},i.Close=function(){this.m_nCanClose&&(this.flag||gSys.SetSignal("closenpcdlg:"+this.m_nNpcID),this.close(),this.onReset())},i.close=function(t){display.mydialog.MyDiaLog.prototype.close.call(this,t),this.flag=!1},i.OnClose=function(){this.m_pLink&&this.m_pLink.MoveAround(),this.Close()},i.myPopup=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!1),this.parent&&(this.flag=!1),this.isCanClickMaskToDel=!1,display.mydialog.MyDiaLog.prototype.myPopup.call(this,t,e,i)},__getset(0,i,"pid",function(){return this._pid},function(t){this._pid=t,this.OnCreate()}),e.Me=function(){return null==e._me&&(e._me=new e),e._me},e._me=null,e}(GNpcDlgUI),GTomBuyDlg=function(t){function e(){this.m_pItem=null,this.m_pBagNum=null,this.m_nLinkBagKind=0,this.m_tabs=[],this.tab_data=[["粮食仓库","icon_粮仓",0],["物品仓库","icon_物品仓库",1]],e.__super.call(this),this.m_selBg.skin=DataTable.getSkin("tex_素材_银色底板"),this.m_pItem=new GItemIconBase1,this.m_pItem.pos(620,330),this.m_pItem.mouseEnabled=!0,this.addChild(this.m_pItem),this.m_pFindNow.mouseEnabled=!1,this.m_pFindNow.filters=[ColorFilter.GRAY],this.m_pFindNow.on("click",this,this.FindNow),this.m_pBagNum=new GUI_ConNumText,this.m_pBagNum.SetScrPos(250,180,0),this.addChild(this.m_pBagNum),this.m_pOutTime.text="剩余次数",this.m_tabs=[this.tab_0,this.tab_1],this.tab_0.on("click",this,this.OnTab,[0]),this.tab_1.on("click",this,this.OnTab,[1]),this.m_iView.scrollBar.hide=!0,this.m_iView.scrollBar.elasticDistance=200,this.m_iView.scrollBar.elasticBackTime=50,this.m_iView.renderHandler=new Handler(this,this.onViewRenderHandler),this.m_iView.itemRender=BagItem,this.m_iView.array=[]}__class(e,"game.ui.buyback.tom.GTomBuyDlg",t);var i=e.prototype;return i.myPopup=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),display.mydialog.MyDiaLog.prototype.myPopup.call(this,t,e,i),this.OnCreate(),this.OnTab(0)},i.onViewRenderHandler=function(t,e){if(t.dataSource){var i=t.dataSource.data;i&&t.InitMe.apply(t,i),t.off("click",this,this.OnClickItem),t.on("click",this,this.OnClickItem,[t.m_nSzNo,t.m_nItemID,t.m_nNum])}},i.OnCreate=function(){var t="今天还可以为您服务：%次";t=t.replace("%",e.m_pLink.m_nLeftTime),this.m_pOutTime.text=t,this.CheckBagNum()},i.OnTab=function(t){this.SetTab(t),this.m_pTitle.text=this.tab_data[t][0],this.m_nLinkBagKind=this.tab_data[t][2],this.m_pIcon.skin=DataTable.getSkin(this.tab_data[t][1]),this.OnChged(this.m_nLinkBagKind),this.CheckBagNum()},i.SetTab=function(t){for(var e=0;e<this.m_tabs.length;e++){var i=this.m_tabs[e];i.index=e==t?0:1}},i.OnChged=function(t){for(var e=this.GetBagItemByKind(this.m_nLinkBagKind),i=[],n=0;e&&n<e.length;n++)(2!=this.m_nLinkBagKind||SysID.IsJZPFID(e[n][0]))&&(i[n]=[],i[n].data=[n,e[n][0],e[n][1]]);this.m_iView.array=i},i.GetBagItemByKind=function(t,e){void 0===e&&(e=0);var i=0,n=DataTable.m_iSelfUser.GetBagItemSz(t),s=DataTable.m_iSelfUser.GetLevel();for(i=0;n&&i<n.length;i++){var a=0,r=DataTable.m_iItemTab.Get(n[i][0]);null!=r&&s<r[5]&&(a=1),(a||!this.IsCanBeFindByTom(n[i][0]))&&(n=ArrOp.DelSz(i,n),i--)}n=ArrOp.SzSortEx(n,1,e);var h=DataTable.m_iItemTab.GetTomItems(DataTable.m_iSelfUser.GetLevel());for(i=0;h&&i<h.length;i++)if(this.GetItemBagByKind(h[i][2])==t&&this.IsCanBeFindByTom(h[i][1],h[i][2])){var o=ArrOp.SzSearch(h[i][1],n);o>=0||(n=ArrOp.InsertSz(0,n,[h[i][1],0]))}return n},i.GetItemBagByKind=function(t){switch(t){case 1:
case 6:return 0;case 0:case 2:case 3:case 4:return 1;case 5:return 2}return-1},i.SetFindItem=function(t){this.m_pItem.Init(t,128),this.m_pFindNow.mouseEnabled=!0,this.m_pFindNow.filters=null},i.FindNow=function(){this.m_pItem.m_nItemID&&this.OnFindNow(this.m_pItem.m_nItemID)},i.OnFindNow=function(t){DataTable.m_iSelfUser.OnTomFind(t)&&(e.m_pLink.CheckMode(),e.m_pLink.OnPlaneGo(1),this.OnClose())},i.CheckBagNum=function(){var t;t=DataTable.m_iSelfUser.GetBagNumData(this.m_nLinkBagKind),this.m_pBagNum.Set(t[0],t[1],-1)},i.IsCanBeFindByTom=function(t,e){return void 0===e&&(e=-1),0>e&&(e=DataTable.m_iItemTab.GetItemKind(t)),0==e?0:SysID.IsJZPFID(t)?0:SysID.IsHDCPID(t)&&!DataTable.m_iSelfUser.IsActivDay("2015-11-26 00:00:00","2015-11-29 23:59:59")?0:15>=t?0:19==t||20==t||21==t||22==t?0:t>=40&&43>t?0:1},i.OnClickItem=function(t,e,i){this.SetFindItem(e)},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e.m_pLink=null,e}(GTomBuyDlgUI),RepayLight=function(t){function e(){this.m_iIcon=null,this.m_iText=null,this.jimi=null,e.__super.call(this),this.create(),this.init()}__class(e,"game.ui.comui.RepayLight",t);var i=e.prototype;return i.init=function(){this.label2.visible=!1,this.m_iBtn.visible=!1,this.mouseThrough=!0},i.create=function(){this.jimi=new Muti2DAniIns,this.jimi.createInsFromName("tex_吉米大叔_ani"),this.addChild(this.jimi),this.jimi.pos(339,624),this.jimi.scale(3,3);var t=new Image2;t.skin="3d/tex/51f9cee9fb2d6002.png",DisplayTools.addTarget(t,this,{x:404,y:13,width:545,height:459},0),this.m_iIcon=new Muti2DAniIns,this.m_iIcon.createInsFromName("uiimg_闪电返还0_ani"),this.addChild(this.m_iIcon),this.m_iIcon.pos(661,553),this.m_iText=new GObj2DMutiText,this.m_iText.LoadAni("tex_文字大_ani"),this.addChild(this.m_iText),this.m_iText.SetScrPos(664,605,1),this.m_iText.SetText("+0"),this.m_iBtn.once("click",this,this.OnClick)},i.OnInitEnd=function(){this.Init()},i.Init=function(){var t=DataTable.m_iSelfUser.m_nLevel;this.m_iBtn.visible=t>=10,10>t?(this.label1.visible=!0,this.label2.visible=!1):(this.label1.visible=!1,this.label2.visible=!0);var e=DataTable.m_iSelfUser.GetGiftPickRec(1);e>0&&(gSys.GameMsg("该奖励已经被领取",!0,"提示"),this.removeSelf()),this.m_iText.SetText("+"+(0>e?-e:e))},i.OnClick=function(){if(DataTable.m_iSelfUser.m_nLevel<10)return void gSys.GameMsg("该奖励10以后才可以领取",!0,"提示");var t=NaN,e=NaN;t=Laya.stage.mouseX,e=Laya.stage.mouseY,DataTable.m_iSelfUser.GetRepayLight([t,e],Handler.create(this,okH=function(){DataTable.m_i_RepayLightBtn.Refresh()})),this.OnClose()},i.destroyPanel=function(){this.destroyChildren()},e.getIns=function(){return e.ins||(e.ins=new e),e.ins},e.ins=null,e}(RepayLightUI),GOrderDlg=function(t){function e(){this.m_pSelect=null,this.m_pSelName=null,this.m_szNote=[],this.m_szDing=null,this.m_nShowNum=0,this.m_pNoteMat=null,this.m_nOpLock=0,e.__super.call(this),this.onInit()}__class(e,"game.ui.order.GOrderDlg",t);var i=e.prototype;return i.myPopup=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),display.mydialog.MyDiaLog.prototype.myPopup.call(this,t,e,i),this.m_pSelect&&this.m_pSelect.OnSel(),GLeadManager.RegArrowInterface(this.m_pHandIn,"主界面_订单提交",0,0,100)},i.close=function(t){display.mydialog.MyDiaLog.prototype.close.call(this,t),GLeadManager.UnRegArrowInterface("主界面_订单提交")},i.onInit=function(){this.m_pNoteMat=new GNoteMat,this.m_matBox.addChild(this.m_pNoteMat),this.m_pDrop.visible=!1,this.m_pHandIn.visible=!1,this.m_pHandIn.dataSource||(this.m_pHandIn.dataSource={}),this.m_pHandIn.dataSource.m_nSpark=0,this.OnCreate(),this.m_pHandIn.on("click",this,this.OnHandIn),this.m_pDrop.on("click",this,this.OnDrop)},i.OnCreate=function(){this.ReaddparamchgNoti()},i.ReaddparamchgNoti=function(){GMSB_Balloon.Me().m_pTruck&&this.OnTrackStateChg(GMSB_Balloon.Me().m_pTruck.m_nTruckState),this.OnChg(GMSB_Order.Me().m_szOrder),this.OnCanDoChg(GMSB_Order.Me().m_szCanDo)},i.OnCanDoChg=function(t){if(Log1.debug("GOrderDlg| [OnCanDoChg]"),t)for(var e=0;e<t.length&&!(e>=this.m_szNote.length);e++)this.m_szNote[e].SetCanDo(t[e]),this.m_szNote[e]==this.m_pSelect&&this.SparkButton(this.m_pHandIn,0==t[e])},i.OnChg=function(t){if(!t||t.length<1)return void this.OnClear();var e,i=0;this.m_nShowNum=0;for(var n=0;n<t.length&&!(n>=9);n++)n>=this.m_szNote.length?(e=new GBoardNote,e.SetSzNo(n),e.pos(this.m_szNote.length%4*170+80,150*Math.floor(this.m_szNote.length/4)),this.m_boardBox.addChild(e),i=e.SetData(t[n]),GMSB_Order.Me().GetLastSelect()==n&&(this.m_pSelect=e),this.m_szNote.push(e)):(i=this.m_szNote[n].SetData(t[n]),n==GMSB_Order.Me().GetLastSelect()&&(this.m_pSelect=this.m_szNote[n])),this.m_nShowNum+=i},i.OnTrackStateChg=function(t){this.EnableButton(this.m_pHandIn,2>t)},i.OnSelect=function(t){this.m_pSelect!=t&&this.m_pSelect&&this.m_pSelect.UnSel(),this.m_pSelect=t;var e=t.GetData();e[1]>0?(this.m_pDrop.visible=!1,this.m_pHandIn.visible=!1):(this.m_nShowNum>1&&(this.m_pDrop.visible=!0),this.m_pHandIn.visible=!0),this.m_pNoteMat.OnChged(t),t.IsCanDo()?this.SparkButton(this.m_pHandIn,1):this.SparkButton(this.m_pHandIn,0),GMSB_Order.Me().SetLastSelect(t.GetSzNo()),this.m_nShowNum>0&&this.m_nShowNum<5?this.m_pDrop.pos(t.x,t.y+300):this.m_pDrop.pos(25,481)},i.GetCurOrderID=function(){if(!this.m_pSelect)return-1;var t=this.m_pSelect.GetData();return 3!=t.length?-1:0==t[0]?0:t[0]},i.GetCurOrderNo=function(){if(!this.m_pSelect)return-1;var t=this.m_pSelect.GetSzNo();return t},i.OnHandIn=function(){var t=this;if(!this.m_nOpLock){this.m_nOpLock=1;var e=this.GetCurOrderID();if(0==e||-1==e)return void(this.m_nOpLock=0);var i;if(i=GMC_Truck.Me(),!i)return void console.log("热气球找不到了");i.GetReward();var n=NaN,s=NaN;n=this.stage.mouseX,s=this.stage.mouseY,DataTable.m_iSelfUser.OnHandinOrder(e,n,s,Handler.create(this,function(e){return e?(t.OnMoveWheel(t.m_pwheel1),t.OnMoveWheel(t.m_pwheel2),t.m_pNoteMat.OnMoveDisappear(1),void Laya.timer.once(1e3,this,t.onWheelEnd,[i])):void(t.m_nOpLock=0)}))}},i.onWheelEnd=function(t){gSys.SetSignal("orderdataref",-1),t.OnGo(),this.m_nOpLock=0,this.OnClose()},i.OnDelCd=function(t){var e=this.GetCurOrderNo();0>e||DataTable.m_iSelfUser.OnDelCdOver(e,3,t)},i.OnDrop=function(){if(!this.m_nOpLock){this.m_nOpLock=1;var t=this.GetCurOrderID();if(0==t||-1==t)return void(this.m_nOpLock=0);if(!DataTable.m_iSelfUser.OnDelOrder(t))return void(this.m_nOpLock=0);this.m_pNoteMat.OnMoveDisappear(0),gSys.SetSignal("orderdataref",-1),this.m_nOpLock=0}},i.OnClear=function(t){void 0===t&&(t=-1)},i.OnClose=function(){this.m_nOpLock||this.close()},i.OnMoveWheel=function(t){Tween.to(t,{rotation:t.rotation+180},1e3,Ease.sineIn)},i.EnableButton=function(t,e){t.mouseEnabled=e,t.mouseEnabled?t.filters=null:t.filters=[ColorFilter.GRAY],e&&t.dataSource.m_nSpark},i.SparkButton=function(t,e){t.dataSource.m_nSpark=e,e&&!t.mouseEnabled},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(GOrderDlgUI),GHomeNickDlg=function(t){function e(){e.__super.call(this),this.isCanClickMaskToDel=!1,this.isCanCloseByOther=!1,this.img_inputBj.skin=DataTable.getSkin("tex_素材_人名字输入框"),this.m_pNick.on("change",this,this.onInputChange),this.m_pBtnSend.on("click",this,this.RandNick),this.m_pClose.on("click",this,this.OnCloseMe),this.RandNick()}__class(e,"game.ui.player.GHomeNickDlg",t);var i=e.prototype;return i.RandNick=function(){this.m_pNick.text=DataTable.m_iNpcNickdictTab.GetNick()},i.onInputChange=function(){this.m_pNick.text.length?this.m_pClose.disabled=!1:this.m_pClose.disabled=!0},i.OnCloseMe=function(){var t=this.m_pNick.text;if(!(t.length<1)){var e=DataTable.m_iSelfFrd.GetShortInfo();if(e[1]==t)return void this.close();e[1]=t,DataTable.m_iSelfUser.SetMyNick("aa"),DataTable.m_iSelfUser.SetMyNick("guest"+DataTable.m_iSelfUser.GetUID()),DataTable.m_iSelfFrd.ChgUserInfo(e)&&this.close()}},__getset(0,i,"Index",null,function(t){this.RandNick()}),e.Me=function(){return null==e._me&&(e._me=new e),e._me},e._me=null,e}(GHomeNickDlgUI),RankActDlg=function(t){function e(){e.__super.call(this),this.m_iView.scrollBar.hide=!0,this.m_iView.scrollBar.elasticDistance=200,this.m_iView.scrollBar.elasticBackTime=50,this.m_iView.renderHandler=new Handler(this,this.onViewRenderHandler)}__class(e,"game.ui.rank.act.RankActDlg",t);var i=e.prototype;return i.onViewRenderHandler=function(t,e){if(t.dataSource){var i=t.dataSource.data;i&&t.SetData.apply(t,i)}},i.myPopup=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),display.mydialog.MyDiaLog.prototype.myPopup.call(this,t,e,i),this.OnInitEnd()},i.OnInitEnd=function(){var t=DataTable.m_iSelfUser.GetMyWorldRankRewardNo(),e=DataTable.m_iRankAward.GetAllMainRankReward(7);if(!t||!e)return void this.setDefaultData();var i=[],n=0,s=0;e&&(s=e.length);for(var a=0;s>a;a++)n=-1,null!=t&&(n=t[1]==a?t[2]:-100),i[a]=[],i[a].data=[e[a][0],e[a][1][0][0],n];this.m_iView.array=i},i.setDefaultData=function(){var t=[];t[0]=[],t[0].data=[1,40002,-1],t[1]=[],t[1].data=[2,40001,-1],t[2]=[],t[2].data=[3,4e4,-1],this.m_iView.array=t},i.close=function(t){display.mydialog.MyDiaLog.prototype.close.call(this,t),this.destory()},i.destory=function(){e._me=null,this.removeChildren()},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(RankActDlgUI),RankAGShowDlg=function(t){function e(){this.m_nKind=0,e.__super.call(this),this.onInit()}__class(e,"game.ui.rank.award.RankAGShowDlg",t);var i=e.prototype;return i.onInit=function(){this.m_iAwardD.visible=!1,this.m_iGroupD.visible=!1,this.m_ptab.selectHandler=Handler.create(this,this.OnTabAct,null,!1),this.m_ptab.selectedIndex=0},i.OnTabAct=function(t){this.m_nKind=t,this.m_iAwardD.visible=0==this.m_nKind,this.m_iGroupD.visible=1==this.m_nKind,0==this.m_nKind?this.m_iAwardD.OnShowInfo():1==this.m_nKind&&this.m_iGroupD.OnShowInfo()},i.close=function(t){display.mydialog.MyDiaLog.prototype.close.call(this,t),this.dispose()},i.dispose=function(){this.removeChildren(),this.m_ptab&&(this.m_ptab.selectHandler=null),this.m_iAwardD&&(this.m_iAwardD.dispose(),this.m_iAwardD=null),this.m_iGroupD&&(this.m_iGroupD.dispose(),this.m_iGroupD=null),e._me=null},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(RankagShowDlgUI),RankDlg=function(t){function e(){this.m_szAllRank=null,this.m_szCurData=null,this.m_szAllKindBtn=null,this.m_szAwardData=null,this.m_szLaskRankLv=null,this.m_szLastNo=null,this.m_szCurNo=null,this.m_nKind=0,this.m_nWorld=0,this.m_nCanAward=0,this.m_nCurPerNo=0,this.m_pTask=null,this.m_pShowTask=null,this.m_nIfCanAward=0,this.m_pSelfItem=null,this.m_iNum=null,this.m_iCup=null,this.m_iAward=null,this.m_iLv1=null,this.m_iLv2=null,this.m_iLv3=null,this.m_pAwardBtnTip=null,this.m_pKindList=[],this.m_pKindTipsList=[],this.m_curKinName="",this.m_nShowRewardDlg=0,this.old=0,e.__super.call(this),this.onInit()}__class(e,"game.ui.rank.RankDlg",t);var i=e.prototype;return i.onInit=function(){this.m_pSelfItem=new SelfRandsItem,this.m_pSelfItem.OnInitSelf(),this.addChild(this.m_pSelfItem),this.m_iNum=new GObj2DMutiText,this.m_iNum.LoadAni("tex_文字中_ani"),this.m_iNum.SetScrPos(98,160,1),this.m_iGroupBk.addChild(this.m_iNum),this.m_iCup=new Muti2DAniIns,this.m_iCup.pos(100,70),this.m_iGroupBk.addChild(this.m_iCup),this.m_iAward=new GObj2DMutiText,this.m_iAward.LoadAni("tex_文字大_ani"),this.m_iAward.SetScrPos(685,120,1),this.m_iGroupBk.addChild(this.m_iAward),this.m_iLv1=new GObj2DMutiText,this.m_iLv1.LoadAni("tex_文字中_ani"),this.m_iLv1.SetScrPos(650,80,2),this.m_iGroupBk.addChild(this.m_iLv1),this.m_iLv2=new GObj2DMutiText,this.m_iLv2.LoadAni("tex_文字中_ani"),this.m_iLv2.SetScrPos(650,110,2),this.m_iGroupBk.addChild(this.m_iLv2),this.m_iLv3=new GObj2DMutiText,this.m_iLv3.LoadAni("tex_文字中_ani"),this.m_iLv3.SetScrPos(650,137,2),this.m_iGroupBk.addChild(this.m_iLv3),this.m_pAwardBtnTip=new SparkTips,this.m_pAwardBtnTip.SetPos(40,20),this.m_pAwardBtnTip.visible=!1,this.m_iAwardBtn.addChild(this.m_pAwardBtnTip),this.mouseEnabled=!0,this.m_iView.scrollBar.hide=!0,this.m_iView.scrollBar.elasticDistance=200,this.m_iView.scrollBar.elasticBackTime=50,this.m_iView.renderHandler=new Handler(this,this.onViewRenderHandler),this.m_iView.repeatX=1,this.m_iView.pos(170,349),this.m_iView.size(748,326),this.m_ptab.selectHandler=Handler.create(this,this.onChgTab,null,!1),this.m_iKindView.on("click",this,this.onClickKind),this.m_iAwardBtn.on("click",this,this.OnShowAwardData),DisplayTools.scrollBar=this.m_iKindView.vScrollBar,this.m_pKindList.length=0,this.m_pKindTipsList.length=0;for(var t,e=0;8>e;e++){var i=this.m_iKindView.getChildByName("item"+e);this.m_pKindList.push(i),t=new SparkTips,t.visible=!1,t.SetPos(64,45),i.addChild(t),this.m_pKindTipsList.push(t)}this.OnInitEnd(),this.refreshKind(0),this.OnTabAct("tab_Kind",0),this.m_ptab.selectedIndex=0},i.OnInitEnd=function(){var t=this.m_ptab.getChildByName("item1");t&&(t.visible=!1),this.m_nKind=0,this.OnCountTime(),DataTable.m_iSelfUser.AddNoti("m_szLaskRankLv",this,this.OnGetLastRankLv),DataTable.m_iSelfUser.AddNoti("m_szLastRankNo",this,this.OnGetLastRankNo),DataTable.m_iSelfUser.AddNoti("m_szCurWeekNo",this,this.OnGetCurRankNo),DataTable.m_iSelfUser.AddNoti("m_szRankAward",this,this.OnGetAwardData),DataTable.m_iSelfUser.AddNoti("m_nLevel",this,this.OnUserLvChg),DataTable.m_iSelfUser.m_szLaskRankLv&&this.OnGetLastRankLv(DataTable.m_iSelfUser.m_szLaskRankLv),DataTable.m_iSelfUser.m_szLastRankNo&&this.OnGetLastRankNo(DataTable.m_iSelfUser.m_szLastRankNo),DataTable.m_iSelfUser.m_szCurWeekNo&&this.OnGetCurRankNo(DataTable.m_iSelfUser.m_szCurWeekNo),DataTable.m_iSelfUser.m_szRankAward&&this.OnGetAwardData(DataTable.m_iSelfUser.m_szRankAward),DataTable.m_iSelfUser.m_nLevel&&this.OnUserLvChg(DataTable.m_iSelfUser.m_nLevel),this.m_szAllRank=ArrOp.InitSz(8,null)},i.onClickKind=function(t){var e=t.target.name;if(this.m_curKinName!=e){this.m_curKinName=e;var i=Laya.__parseInt(e.substr(4));this.OnTabAct("tab_Kind",i),this.refreshKind(i)}},i.refreshKind=function(t){void 0===t&&(t=0);for(var e,i=0;i<this.m_pKindList.length;i++){e=this.m_pKindList[i];var n=e.getChildByName("clipBg");n&&(n.index=i==t?1:0)}},i.onChgTab=function(t){this.OnTabAct("tab_Rank",t)},i.onViewRenderHandler=function(t,e){if(t.dataSource){var i=t.dataSource.data;i&&t.InitTop.apply(t,i),t.off("click",this,this.onClickSub),t.on("click",this,this.onClickSub,[t])}},i.onClickSub=function(t){if(t){if(t.m_nUid==DataTable.m_iSelfUser.GetUID())return;this.stage.mouseX,this.stage.mouseY;GPopMenu.Menu(this),GSysPopMenu.s_pMenu.AppendImgItem(DataTable.getSkin("tex_按钮_拜访3"),Handler.create(this,this.OnVisit,[t.m_nUid]),null,138,72),GPopMenu.Pop()}},i.OnVisit=function(t){this.OnClose(),MainIcon.getInstance().goOtherHome(t,null)},i.OnUserLvChg=function(t){var e=this.m_ptab.getChildByName("item1");e&&(e.visible=t>24),DataTable.m_iSelfUser.GetPower()>0&&(e.visible=!0)},i.ShowRewardDlg=function(){this.m_nShowRewardDlg=1},i.OnGetLastRankNo=function(t){this.m_szLastNo=t,this.AwardChg()},i.OnGetCurRankNo=function(t){this.m_szCurNo=t,this.SetCurCup()},i.OnGetLastRankLv=function(t){this.m_szLaskRankLv=t,8!=this.m_szLaskRankLv.length&&(this.m_szLaskRankLv=ArrOp.InitSz(8,0)),this.OnChgGetAwardState()},i.OnGetAwardData=function(t){this.m_szAwardData=t,this.AwardChg()},i.OnTabAct=function(t,e){this.m_pTips.visible=!1,this.m_pSelfItem.visible=!0,this.m_nCurPerNo=0,this.m_iView.array=[],this.m_pSelfItem.visible=!1,"tab_Rank"==t&&(this.m_nWorld=e),"tab_Kind"==t&&(this.m_nKind=e);var i=this.IsShowGroupBK();i?(this.m_iView.pos(170,350),this.m_iView.size(745,325),this.m_pSelfItem.pos(this.m_iView.x,this.m_iView.y+325-59)):(this.m_iView.pos(170,162),this.m_iView.size(745,520),this.m_pSelfItem.pos(this.m_iView.x,this.m_iView.y+520-59)),"tab_Kind"==t&&(this.OnShowLvAward(),this.SetCurCup()),this.SetKind(this.m_nKind,this.m_nWorld),this.m_iGroupBk.visible=i,0!=this.m_nWorld?(this.m_iCup.createInsFromName("uiimg_称号奖杯_ani"),this.m_pBg.skin=DataTable.getSkin("uiimg_称号底板"),this.m_pBg.size(725,227),this.m_pBg.pos(0,-30)):(this.m_iCup.createInsFromName("uiimg_金奖杯金杯_ani"),this.m_pBg.skin=DataTable.getSkin("uiimg_活动底图1"),this.m_pBg.size(725,170),this.m_pBg.pos(0,0)),this.m_szLaskRankLv&&(this.OnChgGetAwardState(),this.OnShowTabData())},i.SetKind=function(t,e){var i=["评价","人气","等级","金币","航运","种植","养殖","活动"],n="本周%1排名前%2可获得奖励";n=n.replace("%1",i[t]),n=e?n.replace("%2","3"):n.replace("%2","200"),this.m_iText.text=n},i.IsShowGroupBK=function(){var t=0==this.m_nWorld;return 7==this.m_nKind&&(t=!0),t},i.OnShowTabData=function(){this.GetData(this.m_nKind,Handler.create(this,this.OnShowTabDataNext))},i.OnShowTabDataNext=function(t){if(this.m_szCurData=t,!this.m_szCurData||this.m_szCurData.length<2)return this.m_iView.visible=!1,this.m_pSelfItem.visible=!1,void(this.m_pTips.visible=!0);this.m_iView.visible=!0;var e;return this.m_nWorld>=this.m_szCurData.length?void DataTable.m_iSelfFrd.GetSourceFrdRank("sina",this.m_nKind,Handler.create(this,this.GetSourceFrdRankNext)):(e=this.m_szCurData[this.m_nWorld],void this.GetSourceFrdRankNext(e))},i.GetSourceFrdRankNext=function(t){var e;return e=this.GetKindIcon(this.m_nKind),!t||t.length<1||!t[0]?(this.m_iView.visible=!1,this.m_pSelfItem.visible=!1,void(this.m_pTips.visible=!0)):(this.CreateTopItems(t[0],this.m_nKind,e)?(t[1]&&t[1].length>6&&(this.m_nCurPerNo=t[1][1]+1),this.m_pSelfItem.visible=!0):t[0]&&t[0].length>0&&(this.m_nCurPerNo=this.m_pSelfItem.InitSelf(t[1],this.m_nKind,e)),void(this.m_nShowRewardDlg&&(this.m_nShowRewardDlg=0,RankAGShowDlg.Me().myPopup())))},i.CreateTopItems=function(t,e,i){var n=[],s=0,a=0,r=0,h=0;s=-1;for(var o=0;o<t.length;o++){a=t[o][0],s!=a&&(r=o),n[o]=[],n[o].data=[o,r,t[o],e,i];var l=t[1];l==DataTable.m_iSelfUser.GetUID()&&(h=1,game.ui.rank.RankDlg.Me().m_pSelfItem.InitTop(o,r,t[o],e,i)),s=t[o][0]}return this.m_iView.array=n,h},i.OnSelfRankShow=function(){this.SetSelfRankShow(1)},i.SetSelfRankShow=function(t){this.m_nCurPerNo<1||(this.m_pSelfItem.visible=!!t)},i.GetData=function(t,e){if(t>=this.m_szAllRank.length||0>t)return void(e&&e.runWith([null]));var i=this.m_szAllRank[t];return i&&i.length>1?void(e&&e.runWith([i])):void DataTable.m_iSelfUser.CallSvrRet("GetSvrRankData",t,Handler.create(this,this.GetDataNext,[t,e]))},i.GetDataNext=function(t,e,i){this.m_szAllRank[t]=i,e&&e.runWith([i])},i.OnGetAward=function(t){DataTable.m_iSelfUser.CallSvrRet("GetRankAward",this.m_nKind,Handler.create(this,this.OnGetAwardNext))},i.OnGetAwardNext=function(t){if(t&&!(t.length<2)){var e,i,n=0,s=t[0],a=t[1];switch(s){case-1:i="您上周没有进入排名奖励";break;case-2:i="请于今天5点之后领取奖励";break;case-3:i="";break;case-4:i="";break;case-5:i="";break;case-6:i=""}if(a&&a.length>1){a[1]&&a[1].length>6&&(n=a[1][1]+1,e=DataTable.m_iRankAward.GetRankAward(this.m_nKind,this.m_szLastNo[this.m_nKind]/1e4,n),i="您上周获得了第%名，请再接再厉",i=i.replace("%",n));var r;r=DataTable.m_iSelfUser.GetSvrLocalTime(),this.m_szAwardData[this.m_nKind]=DateOp.string(r),DataTable.m_iSelfUser.m_szRankAward=this.m_szAwardData,this.OnChgGetAwardState()}if(0>s&&i.length>0)return void gSys.GameMsg(i);if(e&&e.length>0){var h=new StringRef,o=new Point;if(o=this.m_iAwardBtn.localToGlobal(o),!DataTable.m_iSelfUser.ChgItemSz(e,h,OPEnum.OP_PHB_JL,[o.x,o.y]))return}else 1==s&&i.length>0&&gSys.GameMsg(i)}},i.OnShowAwardData=function(){0==this.m_nWorld?RankAGShowDlg.Me().myPopup(!1):RankActDlg.Me().myPopup(!1)},i.SetCurCup=function(){var t;t=PubDef.RANK_LV_GROUP();var e=Math.floor(this.m_szCurNo[this.m_nKind]/1e4);this.m_szCurNo[this.m_nKind]<0&&(e=PubDef.FindRankLvGroup(DataTable.m_iSelfUser.m_nLevel)),this.m_iCup.playAni("奖杯"+(e+1));var i=0,n=1;e>0&&(n=t[e-1]+1),e<t.length&&(i=t[e]);var s=""+n;s+=i>0?"-"+i:"+",this.m_iNum.SetText(s)},i.OnShowLvAward=function(){if(!(this.m_nWorld>0||this.m_nKind>=DataTable.m_iRankAward.m_szAllAward.length)){var t;t=PubDef.RANK_LV_GROUP();var e=Math.floor(this.m_szCurNo[this.m_nKind]/1e4);this.m_szCurNo[this.m_nKind]<0&&(e=PubDef.FindRankLvGroup(DataTable.m_iSelfUser.m_nLevel));var i,n=DataTable.m_iRankAward.m_szAllAward[this.m_nKind],s=ArrOp.SzHalfSearch(e,n);if(0>s&&(s=-1-s),!(s>=n.length)&&n[s]&&!(n[s].length<2)){n=n[s][1];var a,r,h=0;for(h=0;h<n.length;h++){switch(i=n[h],a=""+i[2],i[1]){case 2:r="Z";break;case 25:r="^"}if(0==h&&this.m_iLv1.SetText(a),1==h&&this.m_iLv2.SetText(a),2==h&&this.m_iLv3.SetText(a),h>1)break}this.m_iAward.SetText(r)}}},i.GetCurRankGroup=function(){var t=this.m_szCurNo[this.m_nKind];return 0>t&&(t=Math.floor(1e4*PubDef.FindRankLvGroup(DataTable.m_iSelfUser.m_nLevel))),t},i.GetLastRankGroup=function(){return this.m_szLastNo[this.m_nKind]},i.OnCountTime=function(){this.old=0,Laya.timer.clear(this,this.OnCoutTimer),Laya.timer.loop(1e3,this,this.OnCoutTimer)},i.OnCoutTimer=function(){var t,e,i,n="",s=0,a=0,r=0;t=DataTable.m_iSelfUser.GetSvrLocalTime(),e=DataTable.m_iSelfUser.GetSvrLocalTime(),r=e.getDay(),0==r&&(r=7),r>1&&(e=DateOp.AdjDateDay(-r+1,e)),n=DateOp.GetYMD(e)+" 05:00:00",e=DateOp.SetDateStr(n,e),a=DateOp.SubDateSec(t,e),0>a?(i="请于今天凌晨5点之后领取,奖励计算中",n="...   ",a=Math.floor(Math.abs(a)%3),i+=n.substr(0,a+1)+n.substr(n.length-(2-a),2-a),this.m_iOverTime.text=i,this.m_iAwardBtn.mouseEnabled=!1,this.m_nIfCanAward=0):(this.m_nIfCanAward=1,this.m_iAwardBtn.mouseEnabled=!0,e=DataTable.m_iSelfUser.GetSvrLocalTime(),r=e.getDay(),0==r&&(r=7),e=DateOp.AdjDateDay(8-r,e),n=DateOp.GetYMD(e)+" 00:00:00",e=DateOp.SetDateStr(n,e),s=DateOp.SubDateSec(e,t),a=Math.floor(s/86400),s=Math.floor(s%86400),a>0?(i="离结束还有：%天",i=i.replace("%",a)):(a=Math.floor(s/3600),s=Math.floor(s%3600),a>0?(i="离结束还有：%小时&分钟",i=i.replace("%",a),a=Math.floor(s/60),i=i.replace("&",a)):(a=Math.floor(s/60),s=Math.floor(s%60),i="离结束还有：%分&秒",i=a>0?i.replace("%",a):i.replace("%分",""),i=i.replace("&",s))),this.m_iOverTime.text=i),this.old<0&&a>=0&&this.AwardChg(),this.old=a},i.OnClearCurShow=function(){this.m_szAllRank=ArrOp.InitSz(8,null),this.event("OnTabAct",["tab_Kind",this.m_nKind])},i.GetKindIcon=function(t){var e="";switch(t){case 2:e=DataTable.getSkin("uiimg_经验值");break;case 4:e=DataTable.getSkin("tex_图标_航运");break;case 0:e=DataTable.getSkin("tex_按钮_奖杯大");break;case 1:e=DataTable.getSkin("icon_人气花");break;case 3:e=DataTable.getSkin("tex_按钮_金币");break;case 5:e=DataTable.getSkin("uiimg_种植");break;case 6:e=DataTable.getSkin("uiimg_养殖");break;case 7:e=DataTable.getSkin("icon_活动图标64")}return e},i.OnBtnCheckAward=function(t){var e=0;if(this.m_szLastNo&&(e=this.m_szLastNo.length),t>=e)return 0;var i,n=Math.floor(this.m_szLastNo[t]%1e4-1),s=0>n?0:1,a=DataTable.m_iSelfUser.GetSvrLocalTime();if(!this.m_szAwardData||t>=this.m_szAwardData.length)return 0;var r=this.m_szAwardData[t];i=DateOp.SetDateStr(r,i);var h=a.getDay();return 0==h&&(h=7),h>1&&(a=DateOp.AdjDateDay(-h+1,a)),r=DateOp.GetYMD(a)+" 05:00:00",a=DateOp.SetDateStr(r,a),DateOp.SubDateSec(i,a)>=0&&(s=0),s&&(s=this.m_nIfCanAward),s},i.OnChgGetAwardState=function(){var t,e=this.OnCheckAwardState(this.m_nKind);this.m_nCanAward=-1,this.m_nCanAward&&(this.m_nCanAward=this.m_szLaskRankLv[this.m_nKind]),t=e>0?"领取奖励":"查看奖励",this.m_iAwardBtn.label=t,e||(this.m_nCanAward=-1),this.m_pAwardBtnTip.Set(e),this.AwardChg()},i.OnCheckAwardState=function(t){var e,i=DataTable.m_iSelfUser.GetSvrLocalTime();if(this.m_nWorld){var n=DataTable.m_iSelfUser.IsHaveWorldRankReward();return 1==i.getDay()&&i.getHours()<5?0:n>0?1:0}var s=0;this.m_szLaskRankLv&&(s=this.m_szLaskRankLv[t]);var a=s>0?1:0;if(!this.m_szAwardData||t>=this.m_szAwardData.length)return 0;var r=this.m_szAwardData[t];e=DateOp.SetDateStr(r,e);var h=i.getDay();return 0==h&&(h=7),h>1&&(i=DateOp.AdjDateDay(-h+1,i)),r=DateOp.GetYMD(i)+" 05:00:00",i=DateOp.SetDateStr(r,i),DateOp.SubDateSec(e,i)>=0&&(a=0),a},i.AwardChg=function(){for(var t=0;8>t;t++){var e=this.OnCheckAwardState(t),i=this.m_pKindTipsList[t];i&&i.Set(e)}},i.removeSelf=function(){return Laya.timer.clear(this,this.OnCoutTimer),display.mydialog.MyDiaLog.prototype.removeSelf.call(this)},i.myPopup=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),display.mydialog.MyDiaLog.prototype.myPopup.call(this,t,e,i),this.AwardChg()},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(RankDlgUI),OrnamentInfo=function(t){function e(){this.m_pItem=null,this.m_pExpand=null,this.m_pLinkObj=null,this.m_nClose=0,e.__super.call(this),this.OnInitEnd(),this.m_iPackUp.on("click",this,this.PackUp),this.m_iPutItemOut.on("click",this,this.PutItemOut)}__class(e,"game.ui.ornament.OrnamentInfo",t);var i=e.prototype;return i.OnInitEnd=function(){this.m_pItem=new OrnamentItem,this.m_pItem.pos(210,239),this.addChild(this.m_pItem)},i.Init=function(t,e,i){void 0===i&&(i=0),this.m_iPackUp.visible=!1,this.m_iPutItemOut.visible=!1,this.m_pItem.Init(t),this.m_pLinkObj=e,this.m_iName.text=this.m_pItem.m_name,this.descriPtion.text=this.m_pItem.m_mem;var n=this.m_pItem.m_nNum;if(n>0){var s="（已拥有：%d）";s=s.replace("%d",""+n),this.m_iNum.text=s,this.m_iNone.visible=!1}else this.m_iNum.visible=!1,this.m_iNone.visible=!0;switch(2==this.m_pItem.m_nKind&&(i=0),i){case 0:this.m_iPackUp.visible=!1,this.m_iPutItemOut.visible=!1,this.m_iBtn.visible=!1;break;case 1:this.m_iPackUp.visible=!0,this.m_iPutItemOut.visible=!0,this.m_iBtn.visible=!1;break;case 2:this.m_iPackUp.visible=!1,this.m_iPutItemOut.visible=!1,this.m_iBtn.visible=!1}this.SetBtnChange(this.m_pItem.m_nKind)},i.OnClick=function(){return this.m_nClose?void this.OnClose():1==this.m_pItem.m_nKind&&this.m_pItem.m_nFormulStatus?void this.OnCompose():(this.ExpandShow(this.m_pItem.m_nID,this.m_pItem.m_nKind),void this.SetBtnChange())},i.SetBtnChange=function(t){void 0===t&&(t=-1),this.m_pItem.m_nFormulStatus&&(t=100),this.SetWord(t)},i.SetWord=function(t){switch(this.m_nClose=0,t){case 0:this.m_iBtn.label="获取途径";break;case 1:this.m_iBtn.label="合成公式";break;case 2:this.m_iBtn.label="获取途径";break;case 100:this.m_iBtn.label="合成";break;default:this.m_iBtn.label="确定",this.m_nClose=1}},i.ExpandShow=function(t,e){},i.OnMove=function(){this.SetBtnChange(this.m_pItem.m_nKind)},i.OnCompose=function(t){void 0===t&&(t=-1),0>t&&(t=this.m_pItem.m_nID);var e=DataTable.m_iMacFormulTab.GetBuild(t);if(1>e)return void gSys.Err("MacFormul tab not find this");var i=DataTable.m_iBuildTab.Get(e);if(i&&!(i.length<1)){var n="地图_"+i[2],s=GLeadManager.GetMapBuildObj(n);return s?void this.OnClose():void gSys.GameMsg("岛上没有合成所需机器",!1,"")}},i.PackUp=function(){this.m_pLinkObj&&this.m_pLinkObj.packUp(),this.OnClose()},i.PutItemOut=function(){this.m_pLinkObj&&this.m_pLinkObj.PutItemOut(),this.OnClose()},i.close=function(t){display.mydialog.MyDiaLog.prototype.close.call(this,t),this.m_pLinkObj=null},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(OrnamentInfoUI),EvalueteDlg=function(t){function e(){this.m_pLink=null,this.m_nLastT=0,this.m_iBag=null,this.m_iStar=null,this.m_iGetMoney=null,this.m_tabs=null,this.m_tabIndex=0,this.m_pPutBuild=null,this.m_nBagKind=2,e.__super.call(this),this.OnInitEnd()}__class(e,"game.ui.ornament.totem.EvalueteDlg",t);var i=e.prototype;return i.myPopup=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),display.mydialog.MyDiaLog.prototype.myPopup.call(this,t,e,i),this.Refresh()},i.OnInitEnd=function(){this.m_iLeftSec.visible=!1,this.m_iCoolWord.visible=!1,this.m_iRewardWord.y=35,this.m_iGetMoney=new GObj2DMutiText,this.m_iGetMoney.LoadAni("tex_文字中_ani"),this.m_iGetMoney.SetScrPos(640,90,1),this.m_iEvaBanner.addChild(this.m_iGetMoney),this.m_iView_0.scrollBar.hide=!0,this.m_iView_0.scrollBar.elasticDistance=200,this.m_iView_0.scrollBar.elasticBackTime=50,this.m_iView_0.repeatX=3,this.m_iView_1.scrollBar.hide=!0,this.m_iView_1.scrollBar.elasticDistance=200,this.m_iView_1.scrollBar.elasticBackTime=50,this.m_iView_1.repeatX=2,this.m_iView_2.scrollBar.hide=!0,this.m_iView_2.scrollBar.elasticDistance=200,this.m_iView_2.scrollBar.elasticBackTime=50,this.m_iView_2.repeatX=2,this.m_iView_0.renderHandler=new Handler(this,this.onViewRenderHandler),this.m_iView_1.renderHandler=new Handler(this,this.onViewRenderHandler),this.m_iView_2.renderHandler=new Handler(this,this.onViewRenderHandler),this.m_pEvaHelpBtn.on("click",this,this.onEvaHelpShow),this.m_iView_0.array=[],this.m_iView_1.array=[],this.m_iView_1.array=[],this.m_tabs=[this.tab_0,this.tab_1,this.tab_2],this.tab_2.visible=!1,this.tab_2.mouseEnabled=!1,this.InitTabEvent(),this.OnTabAct(0)},i.onEvaHelpShow=function(){EvaHelp.getInstance().myPopup(!1)},i.InitTabEvent=function(){for(var t,e=0;e<this.m_tabs.length;e++)t=this.m_tabs[e],t.on("click",this,this.OnClickTab,[e])},i.OnClickTab=function(t){for(var e,i=0;i<this.m_tabs.length;i++)e=this.m_tabs[i],e.index=i==t?0:1;this.OnTabAct(t)},i.onViewRenderHandler=function(t,e){if(t.dataSource){var i=t.dataSource.data;i&&t.Init.apply(t,i)}},i.RegCmd=function(t,i){e.cmdWhenShow[t]=i},i.RunCmd=function(){e.cmdWhenShow&&e.cmdWhenShow.length>0},i.OnInit=function(t){this.m_pLink=t,this.m_iLeftSec.visible=!1,this.m_iCoolWord.visible=!1,this.m_pLink&&this.m_pLink instanceof game.build.GMB_Totem&&this.m_pLink.on("m_nLeftSec",this,this.SetLeftTime),this.SetEvaStar(),this.OnChged()},i.OnTabAct=function(t){switch(this.m_tabIndex=t,t){case 0:this.m_nBagKind=2,this.m_pTitleIcon.index=0,this.m_pTitle.text="装饰仓库";break;case 1:this.m_nBagKind=3,this.m_pTitleIcon.index=1,this.m_pTitle.text="生产机器仓库";break;default:this.m_nBagKind=4,this.m_pTitleIcon.index=2,this.m_pTitle.text="DIY建筑仓库"}this.OnChged()},i.SetEvaStar=function(){if(DataTable.m_iFriendBar.m_szData){var t=DataTable.m_iFriendBar.m_szData[4][3];console.log("设置星星数量：",e.s_szLvl[t])}},i.GetBuildEvalue=function(t){var e=DataTable.m_iBuildTab.Get(t);return null==e?0:e[8]},i.SetLeftTime=function(t){this.m_nLastT>0!=t>0&&(t>0?(this.m_iRewardWord.y=58,this.m_iGetMoney.SetScrPos(640,110,1),this.m_iLeftSec.visible=!0,this.m_iCoolWord.visible=!0):(this.m_iLeftSec.visible=!1,this.m_iCoolWord.visible=!1)),this.m_nLastT=t,this.m_iLeftSec.text=TimerTools.conversion(t)},i.SetEvaluete=function(t){this.m_iGetMoney.SetText("I"+Math.max(1,Math.floor(t/10))),this.m_iValueNum.text=""+t},i.OnChged=function(t){void 0===t&&(t=0);var e=0,i=DataTable.m_iSelfUser.GetEvalue();this.SetEvaluete(i);var n,s,a=(gSys.GetCurSecAdj(),[]),r=[],h=0,o=0;if(2==this.m_nBagKind){for(n=DataTable.m_iSelfUser.GetEvalueteSz(),s=DataTable.m_iSelfUser.GetBagItemSz(2),s&&(a=a.concat(s)),e=0;e<n[7].length;e++)n[7][e][0]<6e3||(o=0,h=ArrOp.SzSearch(n[7][e][0],a),h>=0&&(o=a[h][1],a=ArrOp.DelSz(h,a)),r.push([this.GetBuildEvalue(n[7][e][0]),n[7][e][0],o]));for(e=0;a&&e<a.length;e++)a[e][0]<6e3||r.push([this.GetBuildEvalue(a[e][0]),a[e][0],a[e][1]]);r=ArrOp.SzSort(r,1)}else for(a=DataTable.m_iSelfUser.GetBagItemSz(this.m_nBagKind),e=0;a&&e<a.length;e++)r.push([this.GetBuildEvalue(a[e][0]),a[e][0],a[e][1],a[e][2]]);var l;switch(!r||r.length<1?(3==this.m_nBagKind?(l=" 机器仓库没有存放任何机器",DataTable.m_iSelfUser.IsCanVipFunc(40002)||(l+="\r\n(VIP%解锁:机器收入仓库功能)",l=l.replace("%",""+DataTable.m_iSelfUser.GetVipFuncLv(40002)))):(l=" DIY建筑仓库没有存放任何建筑",DataTable.m_iSelfUser.IsCanVipFunc(70001)||(l+="\r\n(VIP%解锁:DIY建筑收入仓库功能)",l=l.replace("%",""+DataTable.m_iSelfUser.GetVipFuncLv(70001)))),this.m_iEmptyLable.text=l,this.m_iEmptyLable.visible=!0,this.m_iView_0.visible=!1,this.m_iView_0.array=[],this.m_iView_1.visible=!1,this.m_iView_1.array=[],this.m_iView_2.visible=!1,this.m_iView_2.array=[]):(this.m_iEmptyLable.visible=!1,this.m_iView_0.visible=!1,this.m_iView_1.visible=!1,this.m_iView_2.visible=!1,this["m_iView_"+this.m_tabIndex].visible=!0,this.SetSubItem(this.m_nBagKind,r)),this.m_nBagKind){case 3:this.m_iBagNumLable.visible=!1,this.m_iEvaBanner.visible=!1;break;case 4:this.m_iEvaBanner.visible=!1,DataTable.m_iSelfUser.IsCanVipFunc(70001)&&(l="仓库容量：%1/%2",l=l.replace("%1",""+r.length),l=l.replace("%2",""+DataTable.m_iSelfUser.GetBagMax(4)),DataTable.m_iSelfUser.IsCanVipFunc(80001)||(l+=" (VIP%3容量增加至%4)",l=l.replace("%3",""+DataTable.m_iSelfUser.GetVipFuncLv(80001)),l=l.replace("%4","40")),this.m_iBagNumLable.text=l,this.m_iBagNumLable.visible=!1);break;default:this.m_iBagNumLable.visible=!1,
this.m_iEvaBanner.visible=!0}},i.SetSubItem=function(t,e){for(var i=[],n=0;n<e.length;n++)i[n]=[],2==this.m_nBagKind?i[n].data=[this.m_nBagKind,n,e[n],DataTable.m_iSelfUser.hasNewEvaSign(e[n][1])]:i[n].data=[this.m_nBagKind,n,e[n],!1];this["m_iView_"+this.m_tabIndex].array=i},i.OnClickItem=function(t,e,i){this.PutOrnament(t,e,i)},i.OpenStampDlg=function(){},i.PutOrnament=function(t,e,i){GMapOrnament.PutOrnament(t,e,i),this.OnClose()},i.Refresh=function(){this.OnChged(),this.m_pLink&&this.m_pLink.OnData()},i.OnHelp=function(){},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e.cmdWhenShow=[],__static(e,["s_szLvl",function(){return this.s_szLvl=["33333","03333","00333","00033","00003","00000","10000","11000","11100","11110","11111","21111","22111","22211","22221","22222","42222","44222","44422","44442","44444","54444","55444","55544","55554","55555","65555","66555","66655","66665","66666","86666","88666","88866","88886","88888","98888","99888","99988","99998","99999","a9999","aa999","aaa99","aaaa9","aaaaa"]}]),e}(EvalueteDlgUI),GSignDlg=function(t){function e(){this.bg_img=null,this.contentV=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.sign.GSignDlg",t);var i=e.prototype;return i.onChangeTab=function(t){this.contentV&&this.contentV.parent&&this.contentV.removeSelf(),0==t?(this.contentV=OrdinarySign.Me(),OrdinarySign.Me().onShow()):1==t&&(this.contentV=SuperSign.Me(),SuperSign.Me().onShow()),DisplayTools.addTarget(this.contentV,this.box_view,{y:0})},i.onInit=function(){this.m_tab.selectHandler=new Handler(this,this.onChangeTab),this.m_tab.selectedIndex=0,this.bg_img=new Muti2DAniIns,this.bg_img.createInsFromName("uiimg_每日签到_ani"),this.addChildAt(this.bg_img,2),this.bg_img.setPos(468,228)},i.Refresh=function(){OrdinarySign.Me().Refresh(),SuperSign.Me().Refresh()},__getset(0,i,"Index",null,function(e){return t.prototype._$set_Index.call(this,e),this.m_tab.selectedIndex==e?void this.onChangeTab(e):void(this.m_tab.selectedIndex=e)}),e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(SignDlgUI),GBoatBoxDlg=function(t){function e(){this.m_nLock=0,this.m_pLink=null,this.m_nLevel=0,this.m_nCloseLock=1,this.m_pShell=null,this.m_nShell=0,this.m_nHaveBuy=0,this.m_pResultStar=null,this.m_pStarInfor1=null,this.m_pStarInfor2=null,this.m_pStarInfor3=null,this.m_pCost2=null,this.m_pCost3=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.wharf.ex.GBoatBoxDlg",t);var i=e.prototype;return i.onReset=function(){this.m_pTime.text="完成时间",this.m_pResultStar.onReset(),this.m_nLock=0,this.m_pLink=null,this.m_nLevel=0,this.m_nCloseLock=1,this.m_nShell=0,this.m_nHaveBuy=0,this.m_pClose.filters=[ColorFilter.GRAY],this.m_pShell&&(this.m_pShell.visible=!1),this.m_pBuy1.onReset(),this.m_pBuy2.onReset(),this.m_pBuy3.onReset()},i.onInit=function(){this.mouseEnabled=!0,this.m_pResultStar=new GResultStar,this.m_pResultStar.pos(94,134),this.addChild(this.m_pResultStar),this.m_pTime.text="完成时间",this.m_pTitle.color="#440000",this.m_pStarInfor1=new GStarTxt,this.m_pStarInfor1.SetDef(112,360,3,"2小时"),this.addChild(this.m_pStarInfor1),this.m_pStarInfor2=new GStarTxt,this.m_pStarInfor2.SetDef(260,360,2,"4小时"),this.addChild(this.m_pStarInfor2),this.m_pStarInfor3=new GStarTxt,this.m_pStarInfor3.SetDef(370,360,1,"无限时间"),this.addChild(this.m_pStarInfor3);var t=new Handler(this,this.OnBuy);this.m_pBuy1.InitItem(0),this.m_pBuy1.Rotate(0),this.m_pBuy2.InitItem(1),this.m_pBuy2.Rotate(0),this.m_pBuy3.InitItem(2),this.m_pBuy3.Rotate(0),this.m_pBuy1.selectHandler=t,this.m_pBuy2.selectHandler=t,this.m_pBuy3.selectHandler=t,this.m_pCost1.text="免费",this.m_pCost2=new GUI_DiamondShowSmall,this.m_pCost2.SetScrPos(250,560,1),this.m_pCost2.Set(15),this.addChild(this.m_pCost2),this.m_pCost3=new GUI_DiamondShowSmall,this.m_pCost3.SetScrPos(360,560,1),this.m_pCost3.Set(30),this.addChild(this.m_pCost3),this.m_pClose.on("click",this,this.OnDefuse),this.m_pClose.filters=[ColorFilter.GRAY]},i.Init=function(t,e,i){this.onReset(),this.m_nLevel=t,this.m_pTime.text="完成时间:"+TimeCalStyle.GetLongTimeText(e),this.m_pResultStar.SetStarNum(i)},i.OnBuy=function(t,e){if(!this.m_nLock){this.m_nLock=1,t||(this.m_nHaveBuy=1,this.m_pClose.filters=null);var i=NaN,n=NaN;i=this.stage.mouseX,n=this.stage.mouseY,DataTable.m_iSelfUser.OnGetBoatBox(t,[i,n],Handler.create(this,this.OnBuyNext,[e]))}},i.OnBuyNext=function(t,e){e&&e.length>0&&(t.TurnItem(e[0],e[1]),this.m_pShell||(this.m_pShell=new GObj2DMutiText,this.m_pShell.LoadAni("tex_文字大_ani"),this.m_pShell.SetScrPos(10,490,0),this.addChild(this.m_pShell)),this.m_pShell.visible=!0,this.m_nShell+=e[2],this.m_pShell.SetText("B\r\nx"+this.m_nShell)),this.m_nLock=0},i.OnActive=function(){},i.OnDestroy=function(){},i.OnDefuse=function(){this.m_nCloseLock=0,this.OnClose()},i.OnClose=function(){return this.m_nHaveBuy?void(this.m_nCloseLock||display.mydialog.MyDiaLog.prototype.close.call(this)):void this.OnBuy(0,this.m_pBuy1)},i.close=function(t){this.OnClose()},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(GBoatBoxDlgUI),GBoatTerminiDlg=function(t){function e(){this.m_nCurTab=0,this.m_nMaxTab=0,this.m_pCurMap=null,this.m_pLink=null,this.m_pView=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.wharf.GBoatTerminiDlg",t);var i=e.prototype;return i.onReset=function(){},i.dispose=function(){this.m_pLink=null},i.onInit=function(){this.m_bg.skin="3d/tex/53f4000fedac5002.jpg",DataTable.m_iTerminDlg=this,this.m_pTitle.text="目的地选择",this.m_pMake.on("click",this,this.OnChgVisu),this.m_pLeftBtn.on("click",this,this.ChgTabLeft),this.m_pRightBtn.on("click",this,this.ChgTabRight),this.m_pMake.visible=!0,this.m_pLeftBtn.visible=!1,this.m_pRightBtn.visible=!1,this.m_pView=new Sprite,this.m_pView.size(this.width,this.height),this.m_bg.addChild(this.m_pView)},i.Init=function(t){this.m_pLink=DataTable.m_i_WharfDlg,this.m_nCurTab=0;var e=DataTable.m_iBoatExTab.GetTabSz();this.m_nMaxTab=Math.floor((e-1)/6),this.ChgTab()},i.ChgTab=function(){var t=0;if(this.m_pCurMap){var e=this.m_pCurMap;this.m_nCurTab>e.GetTabNo(),t=1}else this.m_pCurMap=new GNauticalChart,this.m_pView.addChild(this.m_pCurMap),this.m_pCurMap.pos(Math.floor(50*Math.random()),0);this.m_pCurMap.InitMap(this.m_pLink,this.m_nCurTab),t&&this.m_nCurTab>e.GetTabNo(),this.m_pLeftBtn.visible=this.m_nCurTab>0,this.m_pRightBtn.visible=this.m_nCurTab<this.m_nMaxTab},i.ChgTabLeft=function(){this.m_nCurTab<1||(this.m_nCurTab--,this.ChgTab())},i.ChgTabRight=function(){this.m_nCurTab>=this.m_nMaxTab||(this.m_nCurTab++,this.ChgTab())},i.OnChgVisu=function(){GSelWharfVisu.Me().OnInit(this,this.m_pLink),GSelWharfVisu.Me().myPopup()},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(GBoatTerminiDlgUI),GWharfDlg=function(t){function e(){this.m_nCloseLock=0,this.m_star=null,this.m_nUseHelpNum=0,this.m_szBox=[],this.m_szData=[],this.m_nClosedNum=0,this.m_nDouble=0,this.m_nSelf=0,this.m_pLeft=null,this.m_pFinshNum1=null,this.m_pFinshNum2=null,this.m_pTrade=null,e.__super.call(this),this.onInit()}__class(e,"game.ui.wharf.GWharfDlg",t);var i=e.prototype;return i.dispose=function(){this.destroy(),e._me=null,DataTable.m_i_WharfDlg=null,this.m_star&&this.m_star.removeSelf(),this.m_star=null},i.onReset=function(){Laya.timer.clear(this,this.OnCheck),DataTable.m_iSelfUser.off("set:m_nNetLinkOk",this,this.OnNetworkState),this.m_nUseHelpNum=0,this.m_nClosedNum=0,this.m_nDouble=0,this.m_nSelf=0,this.m_nCloseLock=0;for(var t,e=0;e<this.m_szBox.length;e++)t=this.m_szBox[e],t&&(t.visible=!1);this.m_star&&this.m_star.removeSelf(),this.m_pFinshNum2.SetText(""),this.m_pFinshNum2.SetScrPos(780,310,0),this.m_pBoatQuit.mouseEnabled=!0,this.m_pBoatQuit.filters=null,this.m_pClose.mouseEnabled=!0,this.m_pClose.filters=null},i.onInit=function(){DataTable.m_i_WharfDlg=this,this.m_pLeft=new GUI_TextLeftTime,this.addChild(this.m_pLeft),this.m_pLeft.SetScrPos(720,240,1),this.m_pFinshNum1=new GObj2DMutiText,this.m_pFinshNum1.LoadAni("tex_文字中_ani"),this.m_pFinshNum1.SetScrPos(584,310,0),this.addChild(this.m_pFinshNum1),this.m_pFinshNum2=new GObj2DMutiText,this.m_pFinshNum2.LoadAni("tex_文字中_ani"),this.m_pFinshNum2.SetScrPos(780,310,0),this.addChild(this.m_pFinshNum2),this.setNumGrey(1),this.m_pTrade=new GUI_TradeShow,this.m_pTrade.SetScrPos(630,686,2),this.addChild(this.m_pTrade),this.m_pSelTermini.visible=!0,this.m_pLock.visible=!0,this.m_pSelect.pid=this,this.m_pBoatQuit.on("click",this,this.NextBoat),this.m_pSelTermini.on("click",this,this.PopSel)},i.myPopup=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),display.mydialog.MyDiaLog.prototype.myPopup.call(this,t,e,i),this.OnCreate()},i.CheckQuitBtnInfor=function(){var t;if(!t){var e=DataTable.m_iSelfUser.GetTrade();2e3>e||(this.m_pSelTermini.visible=!0,this.m_pLock.visible=!0,2500>e&&(this.m_pSelTermini.mouseEnabled=!1,this.m_pLock.visible=!0),this.m_pLock.visible=!this.m_pSelTermini.mouseEnabled)}},i.IsFestival=function(){var t,e,i;return t=gSys.GetLocalTime(t),e=DateOp.SetDateStr("2014-12-17",e),i=DateOp.SetDateStr("2014-12-20",i),DateOp.SubDateDay(t,e)>0&&DateOp.SubDateDay(t,i)<0?1:0},i.RefData=function(){this.CheckQuitBtnInfor();var t=DataTable.m_iSelfUser.GetTrade();this.m_pTrade.SetText(t+"T"),this.m_szData=DataTable.m_i_WharfMT.GetBoatData()[10],this.m_nUseHelpNum=0,this.m_nClosedNum=0;var e=this.IsFestival(),i=1,n=SysID.HYJRHDTBHW();DataTable.m_iSelfUser.m_szBoatHelpBox=ArrOp.InitSz(12,0);for(var s=0;s<this.m_szData.length;s++)this.m_szData[s]&&(0!=(2&this.m_szData[s][0])&&(0!=(1&this.m_szData[s][0])&&(DataTable.m_iSelfUser.m_szBoatHelpBox[s]=1),this.m_nUseHelpNum++),0!=(1&this.m_szData[s][0])&&this.m_nClosedNum++,this.m_szBox[s].Ref(),e&&ArrOp.SzFind(this.m_szData[s][2],n)>=0&&(i=3));this.m_pSelect.Ref(),this.m_nSelf?(this.m_nClosedNum>=this.m_szData.length?(this.m_pBoatQuit.mouseEnabled=!0,this.m_pBoatQuit.filters=[],this.OnCanBoat()):(this.m_pBoatQuit.mouseEnabled=this.m_nUseHelpNum<1&&this.m_nClosedNum<1,this.m_pBoatQuit.mouseEnabled?this.m_pBoatQuit.filters=[]:this.m_pBoatQuit.filters=[ColorFilter.GRAY]),this.m_pFestivalPt.visible=!!e,this.m_pFestivalPt.text="节日特别奖励:圣诞帽 "+i):(this.m_pSelTermini.visible=!1,this.m_pLock.visible=!1,this.m_pBoatQuit.visible=!1,this.m_pFinshPt.visible=!1,this.m_pFestivalPt.visible=!1),DataTable.m_i_WharfMT.RefHelpStatus()},i.setNumGrey=function(t){void 0===t&&(t=0),t?(this.m_pFinshNum1.filters=[ColorFilter.GRAY],this.m_pFinshNum2.filters=[ColorFilter.GRAY]):(this.m_pFinshNum1.filters=[],this.m_pFinshNum2.filters=[])},i.OnCanBoat=function(){this.setNumGrey(0),this.m_star||(this.m_star=new Star),this.m_pBoatQuit.addChild(this.m_star),this.m_star.setStarPos(this.m_pBoatQuit.width/2,this.m_pBoatQuit.height/2,3)},i.onCanBoatWait_1=function(){Laya.timer.once(400,this,this.onCanBoatWait_2)},i.onCanBoatWait_2=function(){Laya.timer.once(520,this,this.onCanBoatWait_1)},i.GetOrderNo=function(t){return this.m_szData[t]},i.OnCreate=function(){if(this.m_nDouble=0,this.m_nSelf=GMapView.m_nSelf,this.OnCheck(),Laya.timer.loop(1e3,this,this.OnCheck),!DataTable.m_i_WharfMT)return void this.OnClose();var t=DataTable.m_i_WharfMT.GetBoatData();if(this.m_nSelf){if(DataTable.m_iSelfUser.IsActWeekend(1)){var e=1;switch(DataTable.m_iSelfUser.getDoubleActState(1)){case 2:e=1;break;case 3:e=2;break;default:e=2}e>1?(this.m_pFinshNum1.SetText("E+"+t[6]+" B+"+t[7]+"x2"),this.m_nDouble=1):this.m_pFinshNum1.SetText("E+"+t[6]+" B+"+t[7])}else this.m_pFinshNum1.SetText("E+"+t[6]+" B+"+t[7]);this.m_pFinshNum2.SetText("T+"+t[5]),this.m_pCon.text="连续完成:"+t[2]}else this.m_pFinshNum1.visible=!1,this.m_pFinshNum2.visible=!1,this.m_pCon.visible=!1;var i,n=t[10],s=0,a=0,r=n.length/3,h=0,o=0,l=[];for(o=3>r?140:105,a=0;3>a;a++)for(s=0;r>s;s++)h>=this.m_szBox.length?(i=new GOrderBox(this),this.m_szBox.push(i),this.m_Box.addChild(i)):i=this.m_szBox[h],l=n[h],i.Init(h,s*o+65,150*a+30),i.visible=!0,h++;this.RefData(),DataTable.m_iSelfUser.AddNoti("set:m_nNetLinkOk",this,this.OnNetworkState),this.OnNetworkState()},i.OnNetworkState=function(){DataTable.m_iSelfUser.m_nNetLinkOk?(this.m_pTitle.color="#FFFFFFFF",this.m_nSelf&&DataTable.m_iSelfUser.GetCurTerminiName(Handler.create(this,this.OnNetworkStateSelfNext))):(this.m_pTitle.color="#FFFFCC33",this.m_pTitle.text="网络断开，此功能暂时不可用。",this.m_pTitle.fontSize=30)},i.OnNetworkStateSelfNext=function(t){void 0===t&&(t="");var e="码头";t.length>0&&(e+="-"+t),this.m_pTitle.text=e,this.m_pTitle.fontSize=26},i.BoatOk=function(t){Laya.timer.clear(this,this.OnCheck),DataTable.m_i_WharfMT&&DataTable.m_i_WharfMT.RefHelpStatus();var e=0,i=0;this.m_pFinshNum2.SetScrPos(660,450,0),e=660,i=450;var n=Math.floor(DataTable.m_i_WharfMT.GetBoatOutLeft()/60),s=DataTable.m_i_WharfMT.GetBoatData(),a=Math.floor(n/60),r=new Label;r.text="时间奖励",r.bold=!0,r.fontSize=20,r.pos(570,400),this.addChild(r);var h=a+1,o=Math.floor(n/h),l=0;this.BoatOkStep1(l,h,r,n,o,s,a,t)},i.BoatOkStep1=function(t,e,i,n,s,a,r,h){return e>t?(t++,i.y-=2,this.m_pLeft.SetText(TimerTools.conversion(60*n)),n-=s,this.m_pFinshNum2.SetText(""+a[5]+"T +"+t+"T"),DataTable.m_iSoundTab.OnPlay("海轮时间奖励"),void Laya.timer.once(200,this,this.BoatOkStep1,[t,e,i,n,s,a,r,h])):(i.removeSelf(),this.m_pFinshNum2.SetText(""+a[5]+"T +"+r+"T"),this.m_pLeft.SetText("0"),void this.BoatOkStep2(a,r,h))},i.BoatOkStep2=function(t,e,i){var n=this;if(this.IsFestival()){var s=1;t=DataTable.m_i_WharfMT.GetBoatData()[10];for(var a=SysID.HYJRHDTBHW(),r=0;r<t.length;r++)if(t[r]&&ArrOp.SzFind(t[r].needitemid,a)>=0){s=3;break}var h=[];return h.push([103,s]),void DataTable.m_iSelfUser.CheckMakeItemSz(h,1,0,Handler.create(this,function(){var t=new StringRef;n.x=n.m_pFinshNum2.x,n.y=n.m_pFinshNum2.y,DataTable.m_iSelfUser.ChgItemSz(h,t,OPEnum.OP_HY_KC,[n.x,n.y],1)||gSys.GameMsg(t.ustr,!1,"特别奖励提示"),i&&i.runWith(e)}),Handler.create(this,function(){gSys.GameMsg("合成特别奖励失败！"),i&&i.runWith(e)}))}i&&i.runWith(e)},i.NextBoat=function(){if(this.m_nCloseLock=1,this.m_pClose.mouseEnabled=!1,this.m_pClose.filters=[ColorFilter.GRAY],this.m_pBoatQuit.mouseEnabled=!1,this.m_pBoatQuit.filters=[ColorFilter.GRAY],this.m_nClosedNum>=this.m_szData.length){this.BoatOk(Handler.create(this,this.onNextBoatSure));var t=new Star;this.m_pBoatQuit.addChild(t),t.setStarPos(-160,-190,4)}else gSys.PopOkCancel(Handler.create(this,this.onNextBoatSure),Handler.create(this,this.onNextBoatNo),Handler.create(this,this.onNextBoatNo),"您确认要放弃该次航运吗？放弃后连续完成次数会减少10次。","航运提示","确定","取消")},i.close=function(t){this.m_nCloseLock||display.mydialog.MyDiaLog.prototype.close.call(this)},i.onNextBoatSure=function(t){void 0===t&&(t=-1),DataTable.m_i_WharfMT.NextBoat(t,!1,this.m_nDouble),this.m_nCloseLock=0,this.OnClose()},i.onNextBoatNo=function(){this.m_pBoatQuit.mouseEnabled=!0,this.m_pBoatQuit.filters=[],this.m_pClose.mouseEnabled=!0,this.m_pClose.filters=[],this.m_nCloseLock=0},i.PopSel=function(){if(DataTable.m_iSelfUser.GetTrade()<2500){var t="飞艇远征挑战将在您的航运值%1达到%2后开启，丰厚奖励等你拿，加油吧！";return t=t.replace("%1"," 图标—航运 "),t=t.replace("%2","2500"),void gSys.GameMsg(t,!1,"远征挑战提示")}GBoatTerminiDlg.Me().Init(DataTable.m_i_WharfDlg),GBoatTerminiDlg.Me().myPopup()},i.OnCheck=function(){var t=DataTable.m_i_WharfMT.GetBoatOutLeft();0>t&&this.OnClose(),this.m_pLeft.SetText(TimerTools.conversion(t))},i.OnClose=function(){this.m_nCloseLock||(this.close(),this.onReset())},i.EnableBtn=function(t){t||(this.m_pLock.visible=!0)},e.Me=function(){return null==e._me&&(e._me=new e),e._me},e._me=null,e}(GWharfDlgUI),GWharfWaitDlg=function(t){function e(){this.m_szFastData=[],this.m_pOpener=null,this.m_pBoatNow=null,this.m_pLeft=null,this.m_szNote=[],e.__super.call(this),this.onInit()}__class(e,"game.ui.wharf.GWharfWaitDlg",t);var i=e.prototype;return i.onInit=function(){this.m_pLeft=new GUI_TextLeftTime,this.addChild(this.m_pLeft),this.m_pLeft.SetScrPos(310,240,1),this.m_pT.text="下一船到港剩余时间",this.m_pBoatNow=new GLightBtn,this.m_pBoatNow.SetDef(170,400,"立即到达",0,Handler.create(this,this.GetBoat),"tex_按钮_通用_长",256,64,1),this.addChild(this.m_pBoatNow)},i.OnCheck=function(){switch(this.m_pOpener.m_nStatus){case 3:this.m_pT.text="船正在入港...",this.m_pBoatNow.visible=!1,this.m_pLeft.visible=!1;break;case 2:this.m_pT.text="下一船到港剩余时间",this.m_pBoatNow.visible=!0,this.m_pLeft.visible=!0;var t=0,e=gSys.GetCurSecAdj();this.m_szFastData&&2==this.m_szFastData.length&&this.m_szFastData[0]/86400==e/86400&&(t=this.m_szFastData[1]);var i=this.m_pOpener.GetBoatInLeft(),n=TimerTools.conversion(i);if(this.m_pLeft.SetText(n),1>i&&this.OnClose(),t>50)this.m_pT.text="下一船到港剩余时间(加速次数已用完):",this.m_pBoatNow.mouseEnabled=!1,this.m_pBoatNow.filters=[ColorFilter.GRAY];else{var s=1*this.m_pOpener.GetBoatInLeft()/15e3,a=Math.floor(0==t?10*s:(13+3*(t-1))*s);1>a&&(a=1),a>20&&(a=20),this.m_pBoatNow.Set(a),this.m_pBoatNow.mouseEnabled=!0,this.m_pBoatNow.filters=[]}break;default:this.OnClose()}},i.OnCreate=function(){this.m_pT.text="下一船到港剩余时间",this.m_pBoatNow.visible=!0,this.m_pLeft.visible=!0,this.m_pOpener=DataTable.m_i_WharfMT,this.m_szFastData=DataTable.m_iSelfUser.GetBoatFastData();var t=this.m_pOpener.GetBoatData()[9],e=DataTable.m_iSelfUser.IsCanVipFunc(50001),i=152,n=284;e||(n=284);for(var s,a=0;a<t.length;a++)a>=this.m_szNote.length?(s=new GItemNumTipsIcon,this.addChild(s),this.m_szNote.push(s)):s=this.m_szNote[a],s.mouseEnabled=!0,s.pos(i,n),"number"==typeof t[a]&&Math.floor(t[a])==t[a]?s.Init(t[a],0):e?s.Init(t[a][0],t[a][1],80,"",3):s.Init(t[a][0],null,80,"",3),s.visible=!0,i+=101;s=null,this.OnCheck(),Laya.timer.loop(1e3,this,this.OnCheck)},i.GetBoat=function(){var t=this;this.m_pBoatNow.mouseEnabled=!1,this.m_pBoatNow.filters=[ColorFilter.GRAY];var e=0,i=gSys.GetCurSecAdj();if(this.m_szFastData&&2==this.m_szFastData.length&&this.m_szFastData[0]/86400==i/86400&&(e=this.m_szFastData[1]),e>50)return void gSys.GameMsg("您今天的加速次数已用完",!1,"提示");var n=this.m_pOpener.GetBoatInLeft(),s=1*n/15e3,a=0==e?10*s:(13+3*(e-1))*s;a=Math.floor(a),1>a&&(a=1),a>20&&(a=20),e++;var r=[];r.push([25,-a]),DataTable.m_iSelfUser.CheckMakeItemSz(r,0,0,Handler.create(this,function(){var s=new StringRef,a=[t.stage.mouseX,t.stage.mouseY];return DataTable.m_iSelfUser.ChgItemSz(r,s,OPEnum.OP_HY_LJ_DD,a,0)?(t.m_szFastData=[i,e],DataTable.m_iSelfUser.SetBoatFastData(i,e),Laya.timer.clear(t.m_pOpener,t.m_pOpener.Check),Laya.timer.clear(this,t.OnCheck),void DataTable.m_iSelfUser.CallSvrRet("OnBoatIn",n,new Handler(this,t.onGetBoatBack))):void gSys.GameMsg(s.ustr,!1,"无法操作")}))},i.onGetBoatBack=function(t){var t=t;return ErrorDef.CALLFAIL()||null==t?void gSys.GameMsg("您的网络不畅通，请检查网络后再使用该功能"):"number"==typeof t&&Math.floor(t)==t?void gSys.GameMsg("dateerr"+t,!1,"无法操作"):(this.m_pOpener.SetSysBuildData(t,0),this.m_pOpener.OnInitedMe(),void this.OnClose())},i.myPopup=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),display.mydialog.MyDiaLog.prototype.myPopup.call(this,t,e,i),this.OnCreate()},i.OnClose=function(){display.mydialog.MyDiaLog.prototype.OnClose.call(this),this.onReset()},i.onReset=function(){for(var t,e=0;e<this.m_szNote.length;e++)t=this.m_szNote[e],t&&(t.visible=!1);Laya.timer.clear(this,this.OnCheck),this.m_pBoatNow.clickHandler=Handler.create(this,this.GetBoat)},i.dispose=function(){this.removeChildren(),this.destroy(!0)},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(GWharfWaitUI),GSelWharfVisu=function(t){function e(){this.m_pStarNum=null,this.m_pMoney=null,this.m_pView=null,this.m_pLink1=null,this.m_pLink2=null,e.__super.call(this),this.m_pTitle.text="选择码头外形",this.m_pView=new Sprite,this.m_pStarNum=new GUI_StarShowSmall,this.m_pStarNum.SetScrPos(40,120,0),this.addChild(this.m_pStarNum),this.m_pMoney=new GUI_MoneyShowSmall,this.m_pMoney.SetScrPos(200,120,0),this.addChild(this.m_pMoney),this.m_pList.scrollBar.hide=!0,this.m_pList.scrollBar.elasticDistance=200,this.m_pList.scrollBar.elasticBackTime=50,this.m_pList.renderHandler=new Handler(this,this.onRenderHandler),this.m_pList.repeatX=0,this.m_pList.repeatY=1}__class(e,"game.ui.wharf.termini.GSelWharfVisu",t);var i=e.prototype;return i.onReset=function(){this.m_pLink1=null,this.m_pLink2=null,this.m_pStarNum.Set(0),this.m_pMoney.Set(0)},i.onSelectSub=function(t){var e=this.m_pList.getCell(t);if(e){var i=this.stage.mouseX,n=this.stage.mouseY;this.OnChgVisu(e.m_nNo,0==e.m_nState?1:0,[i,n])}},i.onRenderHandler=function(t,e){if(t.dataSource){var i=t.dataSource.data;i&&t.OnInit.apply(t,i),t.m_bg.on("click",this,this.onClickSub,[t])}},i.onClickSub=function(t){if(t){var e=this.stage.mouseX,i=this.stage.mouseY;this.OnChgVisu(t.m_nNo,0==t.m_nState?1:0,[e,i])}},i.OnInit=function(t,e){this.onReset(),this.m_pLink1=t,this.m_pLink2=e;var i=DataTable.m_iWharfVisuTab.GetAll();return!i||i.length<1?void gSys.GameMsg("取码头外形数据错误"):void DataTable.m_iSelfUser.GetBoatExData(Handler.create(this,this.OnGetBoatExData,[i]))},i.OnGetBoatExData=function(t,e){var i=0,n=268,s=386,a=0,r=0;for(e[4]&&(r=e[4].length),i=0;r>i;i++)a+=e[4][i];var h=[];for(i=0;i<t.length;i++){var o=0;e[0]==i?o=2:(o=0,e[1]&&(o=e[1].indexOf(i)>=0?1:0)),h[i]=[],h[i].data=[(n+25)*i,0,i,o,t[i][4],t[i][1],a,t[i][2],t[i][3],n,s]}this.m_pList.array=h,this.m_pStarNum.Set(a),this.m_pMoney.Set(DataTable.m_iSelfUser.GetMoney())},i.OnChgVisu=function(t,e,i){var n=this;return t>0&&e?void gSys.PopOkCancel(Handler.create(this,function(){n.OnChgVisuStepNext(t,e,i)}),null,null,"您确认购买这个码头外形吗","码头购买提示"):void this.OnChgVisuStepNext(t,e,i)},i.OnChgVisuStepNext=function(t,e,i){var n=this;DataTable.m_iSelfUser.OnChgWharfVisu(t,e,i,Handler.create(this,function(){DataTable.m_i_Wharf.OnWharfChgVisu(),n.m_pLink1.OnClose(),n.m_pLink2.OnClose(),n.OnClose()}))},i.OnClose=function(){display.mydialog.MyDiaLog.prototype.OnClose.call(this),this.onReset()},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(GSelWharfVisuUI),GTerminiDlg=function(t){function e(){this.m_nNo=0,this.m_pRootLink=null,this.m_pBuy=null,this.m_nbCur=0,this.m_nLeftTime=0,this.m_pStarLv=null,this.m_pConTimes=null,this.m_szNote=[],e.__super.call(this),this.onInit()}__class(e,"game.ui.wharf.termini.GTerminiDlg",t);var i=e.prototype;return i.onReset=function(){this.m_nNo=0,this.m_pRootLink=null,this.m_pBuy&&this.m_pBuy.removeSelf(),this.m_nbCur=0,this.m_nLeftTime=0,this.m_pName.text="目的地名字",this.m_pLeft.text="剩余次数:",this.m_pTimeInfor.text="(每天增加1次挑战次数)",this.m_pDif.text="挑战难度:",this.m_pRewards.text="可能获得:",this.m_pInfor.text="预约成功后,下一趟航运生效"},i.onInit=function(){DataTable.m_iTerminDlg=this,this.m_pName.text="目的地选择",this.m_pLeft.text="剩余次数:",this.m_pTimeInfor.text="(每天增加1次挑战次数)",this.m_pDif.text="挑战难度:",this.m_pRewards.text="可能获得:",this.m_pInfor.text="预约成功后,下一趟航运生效",this.m_pStarLv=new GSlicStarLv,this.m_pStarLv.pos(330,95),this.addChild(this.m_pStarLv),this.m_pConTimes=new GUI_ConNumText,this.m_pConTimes.SetScrPos(370,260,0),this.addChild(this.m_pConTimes),this.m_pSetBtn.on("click",this,this.OnSet)},i.Init=function(t,e){void 0===e&&(e=-1),this.m_nNo=e,this.m_pRootLink=t,DataTable.m_iSelfUser.GetBoatExData(Handler.create(this,this.GetBoatExDataReturn))},i.GetBoatExDataReturn=function(t){var e=DataTable.m_iBoatExTab.Get(this.m_nNo);if(e&&!(e.length<1)){var i=0,n=0;t[4]&&(n=t[4].length),i=this.m_nNo>=n?0:t[4][this.m_nNo],this.m_pStarLv.SetLevel(i);var s=0,a=e[1],r=e[6];for(this.m_nLeftTime=t[6],this.m_nbCur=t[3]==this.m_nNo?1:0,this.m_nbCur?this.m_pSetBtn.label="取消预约":this.m_pSetBtn.label="预约挑战",this.m_pName.text=a,this.m_pConTimes.Set(this.m_nLeftTime,7,2),this.m_nLeftTime<=2&&(this.m_pBuy?this.m_pBuy.clickHandler=Handler.create(this,this.BuyChallengetime,null,!1):(this.m_pBuy=new GDiamondBtn,this.m_pBuy.SetDef(500,200,"购买 ",50,Handler.create(this,this.BuyChallengetime,null,!1),"tex_按钮_通用",180,54,1)),this.m_pBuy.mouseEnabled=!0,this.addChild(this.m_pBuy)),e[5]<=1?this.m_pDif.text="挑战难度:简单":e[5]<=2?this.m_pDif.text="挑战难度:普通":e[5]<=3?this.m_pDif.text="挑战难度:困难":e[5]<=4?this.m_pDif.text="挑战难度:极限":this.m_pDif.text="挑战难度:噩梦",s=0;s<r.length;s++){var h;s>=this.m_szNote.length?(h=new GBkItem,this.addChild(h),this.m_szNote.push(h)):h=this.m_szNote[s],h.pos(390+80*s,370),h.mouseEnabled=!0,h.Init(r[s][0],56),h.visible=!0}}},i.BuyChallengetime=function(){this.m_pBuy.mouseEnabled=!1,gSys.PopOkCancel(Handler.create(this,this.onBuySure),Handler.create(this,this.onBuyNo),Handler.create(this,this.onBuyNo),"是否需要购买7次挑战机会?","挑战提示","现在购买","以后再说",!1,50)},i.onBuySure=function(){var t=this;DataTable.m_iSelfUser.OnBuyChallengetime(Handler.create(this,function(e){return e?(t.m_nLeftTime+=7,t.m_pConTimes.Set(t.m_nLeftTime,7,2),t.m_pBuy.removeSelf(),void 0):void(t.m_pBuy.mouseEnabled=!0)}))},i.onBuyNo=function(){this.m_pBuy.mouseEnabled=!0},i.OnSet=function(){var t=this;if(!this.m_nbCur&&this.m_nLeftTime<1)return void gSys.PopOkCancel(Handler.create(this,this.onSetPopSure),null,null,"您的挑战次数已用完，是否需要购买7次?","挑战提示","确定购买","以后再说",!1,50,null,!1);var e=this.m_nNo;this.m_nbCur&&(e=0),DataTable.m_iSelfUser.SelectNextTermini(e,Handler.create(this,function(e){e&&(t.m_nbCur?GFlyItemIcon.FlyText("取消预约挑战成功!","#00ff00"):GFlyItemIcon.FlyText("预约挑战成功!","#00ff00"),GBoatTerminiDlg.Me().OnClose(),t.m_pRootLink.CheckQuitBtnInfor(),t.OnClose())}))},i.onSetPopSure=function(){this.BuyChallengetime()},e.Me=function(){return null==e._me&&(e._me=new e,e.hadInit=!0),e._me},e.hadInit=!1,e._me=null,e}(GTerminiDlgUI);Laya.__init([LoaderManager,Timer,EventDispatcher,inbox,Browser,WebGLContext2D,LocalStorage,Dialog,ShaderCompile,WebGLContext,AtlasGrid,RenderTargetMAX,GClould_Gift,WebGLFilter,FrdHead,MessageBox,GAppShell]),new Main}(window,document,Laya);